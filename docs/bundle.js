/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={2122:(e,t,n)=>{"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:()=>r})},9756:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:()=>r})},5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},862:(e,t,n)=>{var r=n(8);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},7757:(e,t,n)=>{e.exports=n(5666)},4515:e=>{var t=Object.prototype.toString;e.exports=function(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===t.call(e.buffer)||Array.isArray(e)}},4176:e=>{e.exports=function(e,t){return"number"==typeof e?e:"number"==typeof t?t:0}},1653:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react_hot_loader_root__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1570),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),_components_World__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1016),_components_SectionHero_SectionHero__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4938),_components_Section1_Section1__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9629),_components_Section2_Section2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9484),_components_Section3_Section3__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8766),_components_SectionMethods_SectionMethods__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4109),_components_Footer_Footer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2782),_assets_puddingLogo_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5908),gsap__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5716),gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7082),_styles_style_scss__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7760),enterModule;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};gsap__WEBPACK_IMPORTED_MODULE_9__.p8.registerPlugin(gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_10__.i);var App=function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(e){var t;return _classCallCheck(this,App),(t=_super.call(this,e)).handleSectionUpdate=function(e){var n=t.state.sections;t.setState({currentSection:n[e]})},t.state={currentSection:"section-hero",sections:["section-hero","section-1","section-2","section-3","section-methods"]},t}return _createClass(App,[{key:"componentDidMount",value:function(){var e=this;this.state.sections.map((function(t,n){gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_10__.i.create({trigger:".".concat(t),start:"top ".concat("section-1"===t?"90%":"66%"),onEnter:function(){return e.handleSectionUpdate(n)},onLeaveBack:function(){return e.handleSectionUpdate(n-1)}})}))}},{key:"render",value:function(){var e=this.state.currentSection;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"App"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"logo-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:"https://pudding.cool",target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{src:_assets_puddingLogo_svg__WEBPACK_IMPORTED_MODULE_8__,alt:"The Pudding",className:"logo-full"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"narrative-sections"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_SectionHero_SectionHero__WEBPACK_IMPORTED_MODULE_2__.Z,{rootClassName:"section-hero",onSectionUpdate:this.handleSectionUpdate}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_Section1_Section1__WEBPACK_IMPORTED_MODULE_3__.Z,{rootClassName:"section-1",onSectionUpdate:this.handleSectionUpdate}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_Section2_Section2__WEBPACK_IMPORTED_MODULE_4__.Z,{rootClassName:"section-2",onSectionUpdate:this.handleSectionUpdate}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_Section3_Section3__WEBPACK_IMPORTED_MODULE_5__.Z,{rootClassName:"section-3",onSectionUpdate:this.handleSectionUpdate}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_SectionMethods_SectionMethods__WEBPACK_IMPORTED_MODULE_6__.Z,{rootClassName:"section-methods",onSectionUpdate:this.handleSectionUpdate})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_Footer_Footer__WEBPACK_IMPORTED_MODULE_7__.Z,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_World__WEBPACK_IMPORTED_MODULE_1__.Z,{currentSection:e}))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),App}(react__WEBPACK_IMPORTED_MODULE_0__.Component),_default=(0,react_hot_loader_root__WEBPACK_IMPORTED_MODULE_12__.w)(App);const __WEBPACK_DEFAULT_EXPORT__=_default;var reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(App,"App","/Users/jeff/codeRepos/covid-science/src/App.jsx"),reactHotLoader.register(_default,"default","/Users/jeff/codeRepos/covid-science/src/App.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},2782:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r,i=n(7294),o=n(8318);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(8747),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},c=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Women’s Pockets are Inferior"}],u=function(){var e=a((0,i.useState)(c),2),t=e[0],n=e[1],r=a((0,i.useState)([]),2),s=r[0],l=r[1];return(0,i.useEffect)((function(){var e=new XMLHttpRequest,t=Date.now(),r="https://pudding.cool/assets/data/stories.json?v=".concat(t);e.open("GET",r,!0),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText);n(t)}},e.send()}),[]),(0,i.useEffect)((function(){var e=window.location.href,n=t.filter((function(t){return!e.includes(t.url)})).slice(0,4).map((function(e){return i.createElement("div",{className:"story-link","data-v-bf22f72c":""},i.createElement("a",{href:"https://pudding.cool/".concat(e.url),target:"_blank",rel:"noopener","data-v-bf22f72c":""},i.createElement("img",{class:"story-link-image",src:"https://pudding.cool/common/assets/thumbnails/640/".concat(e.image,".jpg"),alt:"".concat(e.hed),"data-v-bf22f72c":""}),i.createElement("p",{class:"story-link-headline","data-v-bf22f72c":""},"".concat(e.hed))))}));l(n)}),[t]),i.createElement("footer",{className:"pudding-footer","data-v-bf22f72c":""},i.createElement("div",{className:"footer-recirc","data-v-bf22f72c":""},i.createElement("div",{className:"story-links-container","data-v-bf22f72c":""},s)),i.createElement("div",{className:"footer-company","data-v-bf22f72c":""},i.createElement("div",{className:"about-container","data-v-bf22f72c":""},i.createElement("img",{className:"pudding-logo",src:o,"data-v-bf22f72c":""}),i.createElement("p",{className:"footer-company description","data-v-bf22f72c":""},i.createElement("a",{href:"https://pudding.cool","data-v-bf22f72c":""},"The Pudding")," is a digital publication that explains ideas debated in culture with visual essays."))),i.createElement("div",{className:"links-container","data-v-bf22f72c":""},i.createElement("ul",{className:"link-list","data-v-bf22f72c":""},i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://facebook.com/pudding.viz/","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"FACEBOOK"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://twitter.com/puddingviz/","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"TWITTER"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://www.instagram.com/the.pudding","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"INSTAGRAM"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://patreon.com/thepudding/","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"PATREON"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://pudding.cool/about","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"ABOUT"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://pudding.cool/privacy/","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"PRIVACY"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"http://eepurl.com/czym6f","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"NEWSLETTER"))),i.createElement("li",{"data-v-bf22f72c":""},i.createElement("a",{href:"https://pudding.cool/feed/index.xml","data-v-bf22f72c":""},i.createElement("p",{"data-v-bf22f72c":""},"RSS"))))))};l(u,"useState{[stories, setStories](fallbackData)}\nuseState{[storyLinks, setStoryLinks]([])}\nuseEffect{}\nuseEffect{}");var h=u;const d=h;var f,p;(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(c,"fallbackData","/Users/jeff/codeRepos/covid-science/src/components/Footer/Footer.jsx"),f.register(u,"Footer","/Users/jeff/codeRepos/covid-science/src/components/Footer/Footer.jsx"),f.register(h,"default","/Users/jeff/codeRepos/covid-science/src/components/Footer/Footer.jsx")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},9774:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),react_p5__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4210),react_p5__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_p5__WEBPACK_IMPORTED_MODULE_1__),d3_scale__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5128),d3_array__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7622),_js_Utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4880),_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8339),_ArticleGenerator_scoped_scss_scopeId_db438fd8__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9462),enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},w=300,h=200,ArticleGenerator=function(e){var t=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),2),n=t[0],r=t[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){for(var t=[],n=2;n+13<w;)t.push(new Column(n,_js_Utils_js__WEBPACK_IMPORTED_MODULE_2__.c.randBw(.5,1.5),13,e.covidRate)),n+=18;r(t)}),[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"article-generator-container","data-v-db438fd8":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"title","data-v-db438fd8":""},"Rate of ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{"data-v-db438fd8":""},"coronavirus")," articles in ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-db438fd8":""},e.year)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_p5__WEBPACK_IMPORTED_MODULE_1___default(),{setup:function(e,t){e.createCanvas(w,h).parent(t)},draw:function(e){e.clear(),e.background(255,130,20,0);var t,r=_createForOfIteratorHelper(n);try{for(r.s();!(t=r.n()).done;)t.value.update(e)}catch(e){r.e(e)}finally{r.f()}},"data-v-db438fd8":""}))};__signature__(ArticleGenerator,"useState{[columns, setColumns]([])}\nuseEffect{}");var _default=ArticleGenerator;const __WEBPACK_DEFAULT_EXPORT__=_default;var Column=function(){function Column(e,t,n,r){_classCallCheck(this,Column),this.stepSize=t,this.x=e,this.pillWidth=n,this.covidRate=r,this.alphaScale=(0,d3_scale__WEBPACK_IMPORTED_MODULE_5__.ZP)().domain([0,_js_Utils_js__WEBPACK_IMPORTED_MODULE_2__.c.randBw(.5*h,.9*h)]).range([255,0]).exponent(2).clamp(!0),this.pills=[],this.pills.push(new Article(e,t,n,this.alphaScale,r))}return _createClass(Column,[{key:"update",value:function(e){this.pills.forEach((function(t){t.update(),t.display(e)})),(0,d3_array__WEBPACK_IMPORTED_MODULE_6__.Z)(this.pills.map((function(e){return e.y})))>8&&this.pills.push(new Article(this.x,this.stepSize,this.pillWidth,this.alphaScale,this.covidRate)),this.pills=this.pills.filter((function(e){return e.isAlive}))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Column}(),Article=function(){function Article(e,t,n,r,i){_classCallCheck(this,Article),this.x=e,this.stepSize=t,this.w=n,this.alphaScale=r,this.isCovidArticle=Math.random()<=i,this.h=16,this.cornerR=1,this.y=-this.h,this.isAlive=!0,this.alpha=1,this.baseColor=this.isCovidArticle?_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_3__.Z.accent1:"#ffffff00",this.textLineColor=_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_3__.Z.textColor}return _createClass(Article,[{key:"update",value:function(){this.y+=this.stepSize,this.y>h&&(this.isAlive=!1)}},{key:"display",value:function(e){this.alpha=this.alphaScale(this.y),this.color=e.color(this.baseColor),this.isCovidArticle?(this.color.setAlpha(this.alpha),this.textColor=e.color(this.textLineColor)):this.textColor=e.color(120),this.textColor.setAlpha(this.alpha),e.stroke(120,this.alpha),e.fill(this.color),e.rect(this.x,this.y,this.w,this.h,this.cornerR),e.stroke(this.textColor);for(var t=[.2*this.w,.8*this.w],n=1;n<5;n++)4===n&&(t[1]=.6*this.w),e.line(this.x+t[0],this.y+3*n,this.x+t[1],this.y+3*n)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Article}(),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(w,"w","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleGenerator.jsx"),reactHotLoader.register(h,"h","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleGenerator.jsx"),reactHotLoader.register(ArticleGenerator,"ArticleGenerator","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleGenerator.jsx"),reactHotLoader.register(Column,"Column","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleGenerator.jsx"),reactHotLoader.register(Article,"Article","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleGenerator.jsx"),reactHotLoader.register(_default,"default","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleGenerator.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},102:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r,i=n(7294),o=n(8602),a=(n(5267),n(5716)),s=n(5317),l=n(7082);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};a.p8.registerPlugin(l.i);var h={val:0},d=function(e){var t,n,r=(t=(0,i.useState)(0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=r[0],u=r[1];return(0,i.useEffect)((function(){a.p8.timeline({scrollTrigger:{trigger:".container",start:"top 85%",toggleActions:"play complete reset reset"}}).to(h,1,{val:e.value,ease:s.bJ.easeNone,onUpdate:function(){"authors/article"===e.units?u((0,o.WU)(".3s")(h.val)):u(Math.round(h.val))},onComplete:function(){u(e.value)}},{val:0})}),[]),i.createElement("div",{className:"container ".concat(e.align),"data-v-f72b7cae":""},i.createElement("div",{className:"title","data-v-f72b7cae":""},e.title),i.createElement("div",{className:"value","data-v-f72b7cae":""},l),i.createElement("div",{className:"units","data-v-f72b7cae":""},i.createElement("mark",{"data-v-f72b7cae":""},e.units)))};u(d,"useState{[value, setValue](0)}\nuseEffect{}");var f=d;const p=f;var m,g;(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(h,"displayValue","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleStat.jsx"),m.register(d,"ArticleStat","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleStat.jsx"),m.register(f,"default","/Users/jeff/codeRepos/covid-science/src/components/Section1/ArticleStat.jsx")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},5417:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>PapersPerYearPlot});var d3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7560),d3_scale__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1960),d3_scale__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3775),d3_array__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3865),d3_axis__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(604),d3_time_format__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5611),d3_format__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8602),d3_ease__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3630),d3_svg_annotation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7308),_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8339),_assets_papersPerYear_csv__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3192),_assets_papersPerYear_csv__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_assets_papersPerYear_csv__WEBPACK_IMPORTED_MODULE_3__),enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},PapersPerYearPlot=function(){function PapersPerYearPlot(e,t){var n=this;_classCallCheck(this,PapersPerYearPlot),this.container=e,this.show2020=t,this.yearParser=(0,d3_time_format__WEBPACK_IMPORTED_MODULE_4__.Z1)("%Y"),this.data=_assets_papersPerYear_csv__WEBPACK_IMPORTED_MODULE_3___default().slice(1).map((function(e){return{year:n.yearParser(e[0]),nPapers:+e[1]}})),this.containerRect=e.getBoundingClientRect(),this.height=window.innerWidth<480?.8*this.containerRect.width:.57*this.containerRect.width,this.width=this.containerRect.width,this.color=_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_2__.Z.accent1,this.setupPlot()}return _createClass(PapersPerYearPlot,[{key:"setupPlot",value:function(){var e=this;this.margin={top:20,bottom:70,left:20,right:70},this.svg=(0,d3__WEBPACK_IMPORTED_MODULE_0__.Ys)(this.container).append("svg").attr("class","papers-per-year-plot").attr("viewBox","0,0,".concat(Math.floor(this.width),",").concat(Math.floor(this.height))),this.plotG=this.svg.append("g"),this.yScale=(0,d3_scale__WEBPACK_IMPORTED_MODULE_5__.Z)().domain([0,6e3]).range([this.height-this.margin.bottom,this.margin.top]),this.xScale=(0,d3_scale__WEBPACK_IMPORTED_MODULE_6__.Z)().domain((0,d3_array__WEBPACK_IMPORTED_MODULE_7__.Z)(this.data,(function(e){return e.year}))).range([this.margin.left,this.width-this.margin.right]),this.barWidth=(this.xScale.range()[1]-this.xScale.range()[0])/this.data.length*.9,this.svg.append("g").call((function(t){return e.draw_xAxis(t)})),this.svg.append("g").call((function(t){return e.draw_yAxis(t)})),this.outbreakAnnots=[{note:{label:"SARS outbreak",align:"right"},connector:{end:"dot"},color:"grey",x:this.xScale(this.yearParser(2002)),y:this.yScale(1e3),dx:-40,dy:-30},{note:{label:"MERS outbreak",align:"right"},connector:{end:"dot"},color:"grey",x:this.xScale(this.yearParser(2012)),y:this.yScale(3e3),dx:-40,dy:-25}],this.svg.append("g").attr("class","annotation-group").call((0,d3_svg_annotation__WEBPACK_IMPORTED_MODULE_1__.dQ)().annotations(this.outbreakAnnots)),this.svg.append("g").attr("class","title-group").append("text").attr("text-anchor","end").attr("x",this.xScale(this.yearParser(2019))+10).attr("y",this.yScale(0)+50).text('Number of "coronavirus" publications by year'),this.updatePlot(!1)}},{key:"updatePlot",value:function(e){var t=this;this.show2020=e,this.show2020?(this.yScale.domain([0,1e5]),this.yAxis_xPos=this.width-this.margin.right+this.barWidth,this.svg.select(".annotation-group").transition().duration(250).attr("opacity",0),this.svg.select(".x.axis").call((function(e){return e.select(".tick:last-of-type text").transition().duration(t.duration).attr("opacity",1)})).call((function(e){return e.selectAll(".tick:not(:last-of-type)").classed("minimized",!0)})),this.svg.select(".yTickLabelIdx-2").attr("transform","translate(0, ".concat(this.yScale(5e3),")")).attr("opacity",0).transition().duration(this.duration).attr("transform","translate(0, ".concat(this.yScale(8e4),")")).attr("opacity",1),this.svg.select(".yTickLabelIdx-0").attr("opacity",1).transition().duration(this.duration).attr("opacity",0)):(this.yScale.domain([0,6e3]),this.yAxis_xPos=this.width-this.margin.right,this.svg.select(".annotation-group").attr("opacity",0).transition().duration(this.duration).attr("opacity",1),this.svg.select(".x.axis").call((function(e){return e.select(".tick:last-of-type text").attr("opacity",0)})).call((function(e){return e.selectAll(".tick:not(:last-of-type)").classed("minimized",!1)})),this.svg.select(".yTickLabelIdx-2").transition().duration(500).attr("opacity",0),this.svg.select(".yTickLabelIdx-0").attr("opacity",0).transition().duration(this.duration).attr("opacity",1)),this.drawPlot()}},{key:"drawPlot",value:function(){var e=this,t=this.show2020?this.data:this.data.slice(0,-1);this.duration=1e3,this.delay=250;var n=this.svg.transition().duration(this.duration).ease(d3_ease__WEBPACK_IMPORTED_MODULE_8__.fW.exponent(3));this.svg.select(".yTickLabelIdx-1").transition(n).delay(this.delay).attr("transform","translate(0, ".concat(this.yScale(5e3),")")),this.svg.select(".y.axis").transition(n).attr("transform","translate(".concat(this.yAxis_xPos,", 0)")),this.plotG.selectAll("rect").data(t).join((function(t){return t.append("rect").attr("fill",e.color).attr("x",(function(t){return e.xScale(t.year)-e.barWidth/2})).attr("y",e.yScale(0)).attr("height",0).attr("width",e.barWidth).call((function(t){return t.transition(n).attr("y",(function(t){return e.yScale(t.nPapers)})).attr("height",(function(t){return e.yScale(0)-e.yScale(t.nPapers)}))}))}),(function(t){return t.call((function(t){return t.transition(n).delay((function(t){return 2020==t.year.getFullYear()?0:e.delay})).attr("y",(function(t){return e.yScale(t.nPapers)})).attr("height",(function(t){return e.yScale(0)-e.yScale(t.nPapers)}))}))}),(function(t){return t.call((function(t){return t.transition(n).attr("y",(function(t){return e.yScale(0)})).attr("height",0).remove()}))}))}},{key:"draw_xAxis",value:function(e){var t=this;e.attr("transform","translate(0, ".concat(this.height-this.margin.bottom,")")).attr("class","x axis").call((0,d3_axis__WEBPACK_IMPORTED_MODULE_9__.LL)(this.xScale).ticks(this.width/80).tickSizeOuter(0)).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.selectAll("line").remove()})).call((function(e){return e.append("text").attr("x",t.width-t.margin.right).attr("y",-4).attr("text-anchor","end").text(t.data.year)})).call((function(e){return e.attr("opacity",0).transition().duration(1250).attr("opacity",1)}))}},{key:"draw_yAxis",value:function(e){e.attr("transform","translate(".concat(this.width-this.margin.right+10,", 0)")).attr("class","y axis").call((0,d3_axis__WEBPACK_IMPORTED_MODULE_9__.Kh)(this.yScale).tickValues([0,5e3,8e4]).tickFormat((0,d3_format__WEBPACK_IMPORTED_MODULE_10__.WU)(".1s"))).call((function(e){return e.selectAll(".tick").attr("class",(function(e,t){return"yTickLabelIdx-".concat(t)}))})).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.selectAll("line").remove()})).call((function(e){return e.attr("opacity",0).transition().duration(1).attr("opacity",1)}))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),PapersPerYearPlot}(),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(PapersPerYearPlot,"PapersPerYearPlot","/Users/jeff/codeRepos/covid-science/src/components/Section1/PapersPerYear.js"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},9285:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Hero});var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2212),three_src_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1661),enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},Hero=function(){function Hero(){_classCallCheck(this,Hero),this.obj=new three__WEBPACK_IMPORTED_MODULE_0__.Group,this.initScene()}return _createClass(Hero,[{key:"initScene",value:function(){}},{key:"update",value:function(e){}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Hero}(),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(Hero,"Hero","/Users/jeff/codeRepos/covid-science/src/components/Section1/Scene1.js"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},9629:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Section1});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),_PapersPerYear_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5417),gsap__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5716),gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7082),gsap_TextPlugin__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8206),_ArticleStat__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(102),_ArticleGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9774),_Section1_scoped_scss_scopeId_d3b129c0__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6273),_plot_scss__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9248),enterModule;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};gsap__WEBPACK_IMPORTED_MODULE_4__.p8.registerPlugin(gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_5__.i),gsap__WEBPACK_IMPORTED_MODULE_4__.p8.registerPlugin(gsap_TextPlugin__WEBPACK_IMPORTED_MODULE_6__.z);var Section1=function(_Component){_inherits(Section1,_Component);var _super=_createSuper(Section1);function Section1(e){var t;return _classCallCheck(this,Section1),(t=_super.call(this,e)).handleScrollTrigger=function(){var e=t.state,n=e.plot,r=!e.showing2020;n&&n.updatePlot(r),t.setState({showing2020:r})},t.containerRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),t.state={plot:null,showing2020:!1},t}return _createClass(Section1,[{key:"componentDidMount",value:function(){gsap__WEBPACK_IMPORTED_MODULE_4__.p8.to("#revealed-text",{duration:1,delay:.5,text:"then 2020 happened...",scrollTrigger:{trigger:".section1-scroll-container",name:"revealed-text",start:"5% top",onToggle:this.handleScrollTrigger,toggleActions:"play reset reset reset"}}),gsap__WEBPACK_IMPORTED_MODULE_4__.p8.fromTo(".text-2",{opacity:0},{duration:1,delay:1,opacity:1,scrollTrigger:{trigger:".section1-scroll-container",name:"revealed-text",start:"10% top",toggleActions:"play complete reverse reset"}})}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.plot,n=e.showing2020;this.containerRef.current&&!t&&this.setState({plot:new _PapersPerYear_js__WEBPACK_IMPORTED_MODULE_1__.Z(this.containerRef.current,n)})}},{key:"render",value:function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("section",{className:this.props.rootClassName,"data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"narrative-text","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"On Jan 1st 2020"),", a novel virus was beginning to reveal itself to an unprepared world. The next 12 months brought 80+ million cases, but also the first clinically approved vaccines, developed in record-setting time, and whose efficacy exceeded even the most optimistic projections. That type of achievement doesn't happen in a vacuum."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-d3b129c0":""},"Amidst the crumminess of 2020, a hive of scientists and medical researchers mobilized in an historic way. For a year filled with so many terrible, horrible, no good, very bad things, the dedicated effort of the international science community to understand and get us out of the pandemic is something worth celebrating. Hundreds of thousands of individuals, spread across thousands of institutions, in nearly every country around the world, worked together to deconstruct the virus, to learn how it attacks the body and how it spreads, and to engineer solutions for how to fight it. And while the major breakthroughs made headlines, much of the work that they relied on occurred behind the scenes, unacknowledged."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-d3b129c0":""},"One way to grasp the scale of that effort is to look at 2020 through the lens of published research articles, one of the primary ways scientists and researchers can formally communicate new insights to one another. A typical research article might reflect months of data collection and analysis from a team of scientists, summarized in a set of statistical results and a discussion about how those results add to (or challenge) current understanding on a topic. ","  ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/",target:"_blank","data-v-d3b129c0":""},"PubMed Central (PMC)")," ","is an online repository housing millions of such biomedical and life sciences research articles. By searching this database, you can get a sense of the breadth of existing research on any given topic."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-d3b129c0":""},"COVID-19, or rather the virus SARS-CoV-2, belongs to a larger class of viruses known as coronaviruses (",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"COVID-19"),":"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"CO"),"rona",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"VI"),"rus ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"D"),"isease 20",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"19"),") that were first characterized in the mid-1960's. However, it wasn't until the SARS outbreak in 2002, and subsequent MERS outbreak of 2012, that coronaviruses became the focus of increasing research attention.")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"section1-scroll-container","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"content-container","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"plot-container",ref:this.containerRef,"data-v-d3b129c0":""}," "),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"text-overlay-container","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"plot-text","data-v-d3b129c0":""},"By 2019, there were ~5000 publications on coronaviruses coming out per year."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{id:"revealed-text","data-v-d3b129c0":""}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"plot-text text-2","data-v-d3b129c0":""},"There were ~80,000 coronavirus-related articles added to PMC in 2020, a ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"1600%")," increase over 2019.")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"narrative-text middle-section","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-d3b129c0":""},"Of all the articles added in 2020, across all science and medical fields, approximately ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"1 out of every 10")," was related to coronaviruses (compare that to 2019, where that rate was closer to 1 out of every 130 articles.)")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"article-generators-container","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ArticleGenerator__WEBPACK_IMPORTED_MODULE_3__.Z,{year:"2019",covidRate:.007,"data-v-d3b129c0":""}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ArticleGenerator__WEBPACK_IMPORTED_MODULE_3__.Z,{year:"2020",covidRate:.1,"data-v-d3b129c0":""})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"narrative-text middle-section","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-d3b129c0":""},'By expanding the search to include terms specific to the current pandemic (like "COVID-19"), the set of research articles grows to 93,593 new articles in 2020. That means, on average, there were'," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-d3b129c0":""},"~11 new articles coming out each hour"),", every hour throughout the year. Those articles...")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"stats-container","data-v-d3b129c0":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ArticleStat__WEBPACK_IMPORTED_MODULE_2__.Z,{align:"left",title:"were published in",value:"6799",units:"different journals","data-v-d3b129c0":""}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ArticleStat__WEBPACK_IMPORTED_MODULE_2__.Z,{align:"center",title:"had authors from",value:"203",units:"countries","data-v-d3b129c0":""}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ArticleStat__WEBPACK_IMPORTED_MODULE_2__.Z,{align:"right",title:"had an average of",value:"5.46",units:"authors/article","data-v-d3b129c0":""})))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Section1}(react__WEBPACK_IMPORTED_MODULE_0__.Component),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(Section1,"Section1","/Users/jeff/codeRepos/covid-science/src/components/Section1/Section1.jsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},5631:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r,i=n(7294);n(6225),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o=function(e){return i.createElement("div",{className:"container ".concat(e.align),"data-v-300514c7":""},i.createElement("div",{className:"value","data-v-300514c7":""},e.value.toLocaleString()),i.createElement("div",{className:"units","data-v-300514c7":""},i.createElement("mark",{"data-v-300514c7":""},e.units)))},a=o;const s=a;var l,c;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(o,"BigNumber","/Users/jeff/codeRepos/covid-science/src/components/Section2/BigNumber.jsx"),l.register(a,"default","/Users/jeff/codeRepos/covid-science/src/components/Section2/BigNumber.jsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z_});var r=n(7294);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?s(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=n(5697),p=n.n(f);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=1,w=1,S=function(){function e(){i(this,e),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return a(e,[{key:"addChannel",value:function(e){var t=e.delay,n=void 0===t?0:t,r=e.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,o=e.rate,a=void 0===o?1:o,s=e.repeat,l=x++,c={time:0,delay:n,duration:i,rate:a,repeat:void 0===s?1:s};return this._setChannelTime(c,this.time),this.channels.set(l,c),l}},{key:"removeChannel",value:function(e){this.channels.delete(e);var t,n=_(this.animations);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),i=r[0];r[1].channel===e&&this.detachAnimation(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"isFinished",value:function(e){var t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}},{key:"getTime",value:function(e){if(void 0===e)return this.time;var t=this.channels.get(e);return void 0===t?-1:t.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var t,n=_(this.channels.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setChannelTime(r,this.time)}}catch(e){n.e(e)}finally{n.f()}var i,o=_(this.animations.values());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.animation,l=a.channel;s.setTime(this.getTime(l))}}catch(e){o.e(e)}finally{o.f()}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,t){var n=w++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,t){var n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}]),e}();function A(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){if("undefined"!=typeof window&&"object"===u(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"===u(process.versions)&&Boolean(process.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":u(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;return!!(n&&n.indexOf("Electron")>=0)}function M(){return!("object"===("undefined"==typeof process?"undefined":u(process))&&"[object process]"===String(process)&&!process.browser)||E()}var C="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",T=M();function P(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}var D=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";i(this,e),this.storage=P(r),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return a(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var o=e.width*n,a=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var O={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function I(e){return"string"==typeof e?O[e.toUpperCase()]||O.WHITE:e}function R(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(r),o=R(i);try{var a=function(){var r=t.value;"function"==typeof e[r]&&(n.find((function(e){return r===e}))||(e[r]=e[r].bind(e)))};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}}function z(e,t){if(!e)throw new Error(t||"Assertion failed")}var F={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n.g&&n.g,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":u(process))&&process},N=F.window||F.self||F.global,U=F.process||{};function j(){var e;if(T&&N.performance)e=N.performance.now();else if(U.hrtime){var t=U.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}console;var V={debug:T&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},G={enabled:!0,level:0};function H(){}var W={},q={once:!0};function Z(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}var X=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id;i(this,e),this.id=n,this.VERSION=C,this._startTs=j(),this._deltaTs=j(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new D("__probe-".concat(this.id,"__"),G),this.userData={},this.timeStamp("".concat(this.id," started")),B(this),Object.seal(this)}return a(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((j()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((j()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){z(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,V.warn,arguments,q)}},{key:"error",value:function(e){return this._getLogFunction(0,e,V.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,V.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,V.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,V.debug||V.info,arguments,q)}},{key:"table",value:function(e,t,n){return t?this._getLogFunction(e,t,console.table||H,n&&[n],{tag:Z(t)}):H}},{key:"image",value:function(e){var t=e.logLevel,r=e.priority,i=e.image,o=e.message,a=void 0===o?"":o,s=e.scale,l=void 0===s?1:s;return this._shouldLog(t||r)?T?function(e){var t=e.image,n=e.message,r=void 0===n?"":n,i=e.scale,o=void 0===i?1:i;if("string"==typeof t){var a=new Image;return a.onload=function(){var e,t=k(a,r,o);(e=console).log.apply(e,A(t))},a.src=t,H}var s,l=t.nodeName||"";if("img"===l.toLowerCase())return(s=console).log.apply(s,A(k(t,r,o))),H;if("canvas"===l.toLowerCase()){var c=new Image;return c.onload=function(){var e;return(e=console).log.apply(e,A(k(c,r,o)))},c.src=t.toDataURL(),H}return H}({image:i,message:a,scale:l}):function(e){var t=e.image,r=e.scale,i=void 0===r?1:r,o=null;try{o=n(5533)}catch(e){}return o?function(){return o(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(e){return console.log(e)}))}:H}({image:i,message:a,scale:l}):H}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(m({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||H)}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=$({logLevel:e,message:t,opts:n}),i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||H)}},{key:"withGroup",value:function(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=Y(e)}},{key:"_getLogFunction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var o;i=$({logLevel:e,message:t,args:r,opts:i}),z(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=j();var a=i.tag||i.message;if(i.once){if(W[a])return H;W[a]=j()}return t=J(this.id,i.message,i),(o=n).bind.apply(o,[console,t].concat(A(i.args)))}return H}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function Y(e){if(!e)return 0;var t;switch(u(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return z(Number.isFinite(t)&&t>=0),t}function $(e){var t=e.logLevel,n=e.message;e.logLevel=Y(t);for(var r=e.args?Array.from(e.args):[];r.length&&r.shift()!==n;);switch(e.args=r,u(t)){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());var i=u(e.message);return z("string"===i||"object"===i),Object.assign(e,e.opts)}function J(e,t,n){if("string"==typeof t){var r=n.time?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=n.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";i=t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),o=n.color,a=n.background,T||"string"!=typeof i||(o&&(o=I(o),i="[".concat(o,"m").concat(i,"[39m")),a&&(o=I(a),i="[".concat(a+10,"m").concat(i,"[49m"))),t=i}var i,o,a,s;return t}X.VERSION=C;const K=new X({id:"deck"});var Q={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Q,"IDENTITY",{get:function(){return K.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var ee={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},te={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function ne(e,t,n){return(ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var re=new X({id:"luma.gl"});function ie(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function oe(e){return"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext||Boolean(e&&Number.isFinite(e._version))}function ae(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function se(e){return ie(oe(e),"Invalid WebGLRenderingContext"),e}function le(e){return ie(ae(e),"Requires WebGL2"),e}var ce=n(9718),ue={};var he=function e(t){var n=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new e.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(he.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var de,fe=function(e){var t=this;this.gl=e,function(e){var t=e.getError;e.getError=function(){var n;do{0!==(n=t.apply(e))&&(ue[n]=!0)}while(0!==n);for(n in ue)if(ue[n])return delete ue[n],parseInt(n,10);return 0}}(e);var n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){var r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);var i=r.attribs[e];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){var r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);var i=r.attribs[e];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,r){switch(e){case 34962:t.currentArrayBuffer=r;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,r){var i=t.currentVertexArrayObject,o=i.attribs[e];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,r,i,o,a,s){var l=t.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,e);var c=l.attribs[e];return c.buffer=t.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=a,c.offset=s,c.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(function(){ce.CO.console&&ce.CO.console.log&&ce.CO.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()}),!0),this.reset_()};fe.prototype.VERTEX_ARRAY_BINDING_OES=34229,fe.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new he(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},fe.prototype.createVertexArrayOES=function(){var e=new he(this);return this.vertexArrayObjects.push(e),e},fe.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},fe.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof he&&e.hasBeenBound&&e.ext===this)},fe.prototype.bindVertexArrayOES=function(e){var t,n,r=this.gl;if(!e||e.isAlive){var i=this.original,o=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var a=this.currentVertexArrayObject;if(o!==a){o&&a.elementArrayBuffer===o.elementArrayBuffer||i.bindBuffer.call(r,34963,a.elementArrayBuffer);for(var s=this.currentArrayBuffer,l=Math.max(o?o.maxAttrib:0,a.maxAttrib),c=0;c<=l;c++){var u=a.attribs[c],h=o?o.attribs[c]:null;if(o&&u.enabled===h.enabled||(u.enabled?i.enableVertexAttribArray.call(r,c):i.disableVertexAttribArray.call(r,c)),u.enabled){var d=!1;o&&u.buffer===h.buffer||(s!==u.buffer&&(i.bindBuffer.call(r,34962,u.buffer),s=u.buffer),d=!0),(d||u.cached!==h.cached)&&i.vertexAttribPointer.call(r,c,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(r,34962,this.currentArrayBuffer)}}else t="bindVertexArrayOES: attempt to bind deleted arrayObject",ue[1282]=!0,void 0!==t&&(n=t,ce.CO.console&&ce.CO.console.error&&ce.CO.console.error(n))};var pe,me,ge,ye,ve="OES_element_index",_e="WEBGL_draw_buffers",be="WEBGL_debug_renderer_info",xe=function(e){return ae(e)?void 0:0},we=(m(de={},3074,(function(e){return ae(e)?void 0:36064})),m(de,35723,(function(e){return ae(e)?void 0:4352})),m(de,35977,xe),m(de,32937,xe),m(de,36795,(function(e,t){var n=ae(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0})),m(de,37445,(function(e,t){var n=e.getExtension(be);return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),m(de,37446,(function(e,t){var n=e.getExtension(be);return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),m(de,34047,(function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),m(de,32883,xe),m(de,35071,xe),m(de,37447,xe),m(de,36063,(function(e,t){if(!ae(e)){var n=e.getExtension(_e);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),m(de,35379,xe),m(de,35374,xe),m(de,35377,xe),m(de,34852,(function(e){if(!ae(e)){var t=e.getExtension(_e);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),m(de,36203,(function(e){return e.getExtension(ve)?2147483647:65535})),m(de,33001,(function(e){return e.getExtension(ve)?16777216:65535})),m(de,33e3,(function(e){return 16777216})),m(de,37157,xe),m(de,35373,xe),m(de,35657,xe),m(de,36183,xe),m(de,37137,xe),m(de,34045,xe),m(de,35978,xe),m(de,35979,xe),m(de,35968,xe),m(de,35376,xe),m(de,35375,xe),m(de,35659,xe),m(de,37154,xe),m(de,35371,xe),m(de,35658,xe),m(de,35076,xe),m(de,35077,xe),m(de,35380,xe),de),Se="ANGLE_instanced_arrays",Ae=(m(pe={},"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){ie(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),m(pe,Se,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){ie(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),m(pe,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){ie(!1)}}),m(pe,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){ie(!1)},deleteQuery:function(){ie(!1)},beginQuery:function(){ie(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),pe),Ee={readBuffer:function(e,t,n){ae(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i,o=function(e,t){return{webgl2:ae(e),ext:e.getExtension("ANGLE_instanced_arrays")}}(e),a=o.webgl2,s=o.ext;switch(r){case 35069:i=!!a&&void 0;break;case 35070:i=a||s?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function(e,t,n,r){if(!ae(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,i){if(!ae(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:function(e,t,n){var r=we[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)},hint:function(e,t,n,r){return t(n,r)}};function Me(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){var n=t.extension,r=t.target,i=t.target2,o=Ae[n];ie(o);for(var a=o.meta,s=(void 0===a?{}:a).suffix,l=void 0===s?"":s,c=e.getExtension(n),u=function(){var t=d[h],n="".concat(t).concat(l),a=null;"meta"===t||"function"==typeof e[t]||(c&&"function"==typeof c[n]?a=function(){return c[n].apply(c,arguments)}:"function"==typeof o[t]&&(a=o[t].bind(r))),a&&(r[t]=a,i[t]=a)},h=0,d=Object.keys(o);h<d.length;h++)u()}(void 0!==n.g?n.g:window).polyfillContext=function(e){e.luma=e.luma||{};var t=e.luma;return t.polyfilled||(function(e){if("function"!=typeof e.createVertexArray){var t=e.getSupportedExtensions;e.getSupportedExtensions=function(){var e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};var n=e.getExtension;e.getExtension=function(t){return n.call(this,t)||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new fe(this)),this.__OESVertexArrayObject))}}}(e),function(e){e.luma.extensions={};var t,n=Me(e.getSupportedExtensions()||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.luma[r]=e.getExtension(r)}}catch(e){n.e(e)}finally{n.f()}}(e),function(e,t){var n,r=Me(Object.getOwnPropertyNames(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;"overrides"!==i&&Te(e,{extension:i,target:e.luma,target2:e})}}catch(e){r.e(e)}finally{r.f()}}(e,Ae),function(e,t){var n=t.target,r=t.target2;Object.keys(Ee).forEach((function(t){if("function"==typeof Ee[t]){var i=e[t]?e[t].bind(e):function(){},o=Ee[t].bind(null,e,i);n[t]=o,r[t]=o}}))}(e,{target:t,target2:e}),t.polyfilled=!0),e};var Pe=(m(me={},3042,!1),m(me,32773,new Float32Array([0,0,0,0])),m(me,32777,32774),m(me,34877,32774),m(me,32969,1),m(me,32968,0),m(me,32971,1),m(me,32970,0),m(me,3106,new Float32Array([0,0,0,0])),m(me,3107,[!0,!0,!0,!0]),m(me,2884,!1),m(me,2885,1029),m(me,2929,!1),m(me,2931,1),m(me,2932,513),m(me,2928,new Float32Array([0,1])),m(me,2930,!0),m(me,3024,!0),m(me,36006,null),m(me,2886,2305),m(me,33170,4352),m(me,2849,1),m(me,32823,!1),m(me,32824,0),m(me,10752,0),m(me,32938,1),m(me,32939,!1),m(me,3089,!1),m(me,3088,new Int32Array([0,0,1024,1024])),m(me,2960,!1),m(me,2961,0),m(me,2968,4294967295),m(me,36005,4294967295),m(me,2962,519),m(me,2967,0),m(me,2963,4294967295),m(me,34816,519),m(me,36003,0),m(me,36004,4294967295),m(me,2964,7680),m(me,2965,7680),m(me,2966,7680),m(me,34817,7680),m(me,34818,7680),m(me,34819,7680),m(me,2978,[0,0,1024,1024]),m(me,3333,4),m(me,3317,4),m(me,37440,!1),m(me,37441,!1),m(me,37443,37444),m(me,35723,4352),m(me,36010,null),m(me,35977,!1),m(me,3330,0),m(me,3332,0),m(me,3331,0),m(me,3314,0),m(me,32878,0),m(me,3316,0),m(me,3315,0),m(me,32877,0),me),De=function(e,t,n){return t?e.enable(n):e.disable(n)},ke=function(e,t,n){return e.hint(n,t)},Oe=function(e,t,n){return e.pixelStorei(n,t)};function Ie(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var Re=(m(ge={},3042,De),m(ge,32773,(function(e,t){return e.blendColor.apply(e,A(t))})),m(ge,32777,"blendEquation"),m(ge,34877,"blendEquation"),m(ge,32969,"blendFunc"),m(ge,32968,"blendFunc"),m(ge,32971,"blendFunc"),m(ge,32970,"blendFunc"),m(ge,3106,(function(e,t){return e.clearColor.apply(e,A(t))})),m(ge,3107,(function(e,t){return e.colorMask.apply(e,A(t))})),m(ge,2884,De),m(ge,2885,(function(e,t){return e.cullFace(t)})),m(ge,2929,De),m(ge,2931,(function(e,t){return e.clearDepth(t)})),m(ge,2932,(function(e,t){return e.depthFunc(t)})),m(ge,2928,(function(e,t){return e.depthRange.apply(e,A(t))})),m(ge,2930,(function(e,t){return e.depthMask(t)})),m(ge,3024,De),m(ge,35723,ke),m(ge,36006,(function(e,t){var n=ae(e)?36009:36160;return e.bindFramebuffer(n,t)})),m(ge,2886,(function(e,t){return e.frontFace(t)})),m(ge,33170,ke),m(ge,2849,(function(e,t){return e.lineWidth(t)})),m(ge,32823,De),m(ge,32824,"polygonOffset"),m(ge,10752,"polygonOffset"),m(ge,35977,De),m(ge,32938,"sampleCoverage"),m(ge,32939,"sampleCoverage"),m(ge,3089,De),m(ge,3088,(function(e,t){return e.scissor.apply(e,A(t))})),m(ge,2960,De),m(ge,2961,(function(e,t){return e.clearStencil(t)})),m(ge,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),m(ge,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),m(ge,2962,"stencilFuncFront"),m(ge,2967,"stencilFuncFront"),m(ge,2963,"stencilFuncFront"),m(ge,34816,"stencilFuncBack"),m(ge,36003,"stencilFuncBack"),m(ge,36004,"stencilFuncBack"),m(ge,2964,"stencilOpFront"),m(ge,2965,"stencilOpFront"),m(ge,2966,"stencilOpFront"),m(ge,34817,"stencilOpBack"),m(ge,34818,"stencilOpBack"),m(ge,34819,"stencilOpBack"),m(ge,2978,(function(e,t){return e.viewport.apply(e,A(t))})),m(ge,3333,Oe),m(ge,3317,Oe),m(ge,37440,Oe),m(ge,37441,Oe),m(ge,37443,Oe),m(ge,3330,Oe),m(ge,3332,Oe),m(ge,3331,Oe),m(ge,36010,(function(e,t){return e.bindFramebuffer(36008,t)})),m(ge,3314,Oe),m(ge,32878,Oe),m(ge,3316,Oe),m(ge,3315,Oe),m(ge,32877,Oe),m(ge,"framebuffer",(function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)})),m(ge,"blend",(function(e,t){return t?e.enable(3042):e.disable(3042)})),m(ge,"blendColor",(function(e,t){return e.blendColor.apply(e,A(t))})),m(ge,"blendEquation",(function(e,t){t=Ie(t)?t:[t,t],e.blendEquationSeparate.apply(e,A(t))})),m(ge,"blendFunc",(function(e,t){t=Ie(t)&&2===t.length?[].concat(A(t),A(t)):t,e.blendFuncSeparate.apply(e,A(t))})),m(ge,"clearColor",(function(e,t){return e.clearColor.apply(e,A(t))})),m(ge,"clearDepth",(function(e,t){return e.clearDepth(t)})),m(ge,"clearStencil",(function(e,t){return e.clearStencil(t)})),m(ge,"colorMask",(function(e,t){return e.colorMask.apply(e,A(t))})),m(ge,"cull",(function(e,t){return t?e.enable(2884):e.disable(2884)})),m(ge,"cullFace",(function(e,t){return e.cullFace(t)})),m(ge,"depthTest",(function(e,t){return t?e.enable(2929):e.disable(2929)})),m(ge,"depthFunc",(function(e,t){return e.depthFunc(t)})),m(ge,"depthMask",(function(e,t){return e.depthMask(t)})),m(ge,"depthRange",(function(e,t){return e.depthRange.apply(e,A(t))})),m(ge,"dither",(function(e,t){return t?e.enable(3024):e.disable(3024)})),m(ge,"derivativeHint",(function(e,t){e.hint(35723,t)})),m(ge,"frontFace",(function(e,t){return e.frontFace(t)})),m(ge,"mipmapHint",(function(e,t){return e.hint(33170,t)})),m(ge,"lineWidth",(function(e,t){return e.lineWidth(t)})),m(ge,"polygonOffsetFill",(function(e,t){return t?e.enable(32823):e.disable(32823)})),m(ge,"polygonOffset",(function(e,t){return e.polygonOffset.apply(e,A(t))})),m(ge,"sampleCoverage",(function(e,t){return e.sampleCoverage.apply(e,A(t))})),m(ge,"scissorTest",(function(e,t){return t?e.enable(3089):e.disable(3089)})),m(ge,"scissor",(function(e,t){return e.scissor.apply(e,A(t))})),m(ge,"stencilTest",(function(e,t){return t?e.enable(2960):e.disable(2960)})),m(ge,"stencilMask",(function(e,t){var n=v(t=Ie(t)?t:[t,t],2),r=n[0],i=n[1];e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,i)})),m(ge,"stencilFunc",(function(e,t){var n=v(t=Ie(t)&&3===t.length?[].concat(A(t),A(t)):t,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5];e.stencilFuncSeparate(1028,r,i,o),e.stencilFuncSeparate(1029,a,s,l)})),m(ge,"stencilOp",(function(e,t){var n=v(t=Ie(t)&&3===t.length?[].concat(A(t),A(t)):t,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5];e.stencilOpSeparate(1028,r,i,o),e.stencilOpSeparate(1029,a,s,l)})),m(ge,"viewport",(function(e,t){return e.viewport.apply(e,A(t))})),ge);function Le(e,t,n){return void 0!==t[e]?t[e]:n[e]}var Be={blendEquation:function(e,t,n){return e.blendEquationSeparate(Le(32777,t,n),Le(34877,t,n))},blendFunc:function(e,t,n){return e.blendFuncSeparate(Le(32969,t,n),Le(32968,t,n),Le(32971,t,n),Le(32970,t,n))},polygonOffset:function(e,t,n){return e.polygonOffset(Le(32824,t,n),Le(10752,t,n))},sampleCoverage:function(e,t,n){return e.sampleCoverage(Le(32938,t,n),Le(32939,t,n))},stencilFuncFront:function(e,t,n){return e.stencilFuncSeparate(1028,Le(2962,t,n),Le(2967,t,n),Le(2963,t,n))},stencilFuncBack:function(e,t,n){return e.stencilFuncSeparate(1029,Le(34816,t,n),Le(36003,t,n),Le(36004,t,n))},stencilOpFront:function(e,t,n){return e.stencilOpSeparate(1028,Le(2964,t,n),Le(2965,t,n),Le(2966,t,n))},stencilOpBack:function(e,t,n){return e.stencilOpSeparate(1029,Le(34817,t,n),Le(34818,t,n),Le(34819,t,n))}},ze={enable:function(e,t){return e(m({},t,!0))},disable:function(e,t){return e(m({},t,!1))},pixelStorei:function(e,t,n){return e(m({},t,n))},hint:function(e,t,n){return e(m({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case 36160:return e((m(r={},36006,n),m(r,36010,n),r));case 36009:return e(m({},36006,n));case 36008:return e(m({},36010,n));default:return null}},blendColor:function(e,t,n,r,i){return e(m({},32773,new Float32Array([t,n,r,i])))},blendEquation:function(e,t){var n;return e((m(n={},32777,t),m(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((m(r={},32777,t),m(r,34877,n),r))},blendFunc:function(e,t,n){var r;return e((m(r={},32969,t),m(r,32968,n),m(r,32971,t),m(r,32970,n),r))},blendFuncSeparate:function(e,t,n,r,i){var o;return e((m(o={},32969,t),m(o,32968,n),m(o,32971,r),m(o,32970,i),o))},clearColor:function(e,t,n,r,i){return e(m({},3106,new Float32Array([t,n,r,i])))},clearDepth:function(e,t){return e(m({},2931,t))},clearStencil:function(e,t){return e(m({},2961,t))},colorMask:function(e,t,n,r,i){return e(m({},3107,[t,n,r,i]))},cullFace:function(e,t){return e(m({},2885,t))},depthFunc:function(e,t){return e(m({},2932,t))},depthRange:function(e,t,n){return e(m({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(m({},2930,t))},frontFace:function(e,t){return e(m({},2886,t))},lineWidth:function(e,t){return e(m({},2849,t))},polygonOffset:function(e,t,n){var r;return e((m(r={},32824,t),m(r,10752,n),r))},sampleCoverage:function(e,t,n){var r;return e((m(r={},32938,t),m(r,32939,n),r))},scissor:function(e,t,n,r,i){return e(m({},3088,new Int32Array([t,n,r,i])))},stencilMask:function(e,t){var n;return e((m(n={},2968,t),m(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(m({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,r){var i;return e((m(i={},2962,t),m(i,2967,n),m(i,2963,r),m(i,34816,t),m(i,36003,n),m(i,36004,r),i))},stencilFuncSeparate:function(e,t,n,r,i){var o;return e((m(o={},1028===t?2962:34816,n),m(o,1028===t?2967:36003,r),m(o,1028===t?2963:36004,i),o))},stencilOp:function(e,t,n,r){var i;return e((m(i={},2964,t),m(i,2965,n),m(i,2966,r),m(i,34817,t),m(i,34818,n),m(i,34819,r),i))},stencilOpSeparate:function(e,t,n,r,i){var o;return e((m(o={},1028===t?2964:34817,n),m(o,1028===t?2965:34818,r),m(o,1028===t?2966:34819,i),o))},viewport:function(e,t,n,r,i){return e(m({},2978,[t,n,r,i]))}},Fe=function(e,t){return e.isEnabled(t)},Ne=(m(ye={},3042,Fe),m(ye,2884,Fe),m(ye,2929,Fe),m(ye,3024,Fe),m(ye,32823,Fe),m(ye,32926,Fe),m(ye,32928,Fe),m(ye,3089,Fe),m(ye,2960,Fe),m(ye,35977,Fe),ye);function Ue(e){for(var t in e)return!1;return!0}function je(e,t){if(e===t)return!0;var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function Ve(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Ge(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var a=n.apply(void 0,[e.state._updateCache].concat(i)),s=a.valueChanged,l=a.oldValue;return s&&r.apply(void 0,i),l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function He(e){var t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}var We=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,o=void 0!==r&&r,a=n.log,s=void 0===a?function(){}:a;i(this,e),this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=o?$e(t):Object.assign({},Pe),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return a(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){ie(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Ye(this.gl,e),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e){ie(void 0!==i);var o=e[i],a=this.cache[i];je(o,a)||(n=!0,t=a,r&&!(i in r)&&(r[i]=a),this.cache[i]=o)}return{valueChanged:n,oldValue:t}}}]),e}();function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enable,i=void 0===r||r,o=t.copyState;if(ie(void 0!==o),!e.state){var a=void 0!==n.g?n.g:window,s=a.polyfillContext;for(var l in s&&s(e),e.state=new We(e,{copyState:o}),He(e),ze){var c=ze[l];Ge(e,l,c)}Ve(e,"getParameter"),Ve(e,"isEnabled")}return e.state.enable=i,e}function Ze(e){ie(e.state),e.state.pop()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){if(ie(oe(e),"setParameters requires a WebGL context"),!Ue(t)){var n={};for(var r in t){var i=Number(r),o=Re[r];o&&("string"==typeof o?n[o]=!0:o(e,t[r],i))}var a=e.state&&e.state.cache;if(a)for(var s in n)(0,Be[s])(e,t,a)}}function $e(e,t){if("number"==typeof(t=t||Pe)){var n=t,r=Ne[n];return r?r(e,n):e.getParameter(n)}var i,o={},a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(Array.isArray(t)?t:Object.keys(t));try{for(a.s();!(i=a.n()).done;){var s=i.value,l=Ne[s];o[s]=l?l(e,Number(s)):e.getParameter(Number(s))}}catch(e){a.e(e)}finally{a.f()}return o}function Je(e,t,n){if(Ue(t))return n(e);var r,i=t.nocatch,o=void 0===i||i;if(function(e){e.state||qe(e,{copyState:!1}),e.state.push()}(e),Ye(e,t),o)r=n(e),Ze(e);else try{r=n(e)}finally{Ze(e)}return r}function Ke(e){var t=e.luma;if(e.canvas&&t){var n=t.canvasSizeInfo.clientWidth;return n?e.drawingBufferWidth/n:1}return 1}function Qe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Ke(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return tt(t,r,i,o,n)}function et(e){var t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function tt(e,t,n,r,i){var o,a=nt(e[0],t,n),s=rt(e[1],t,r,i),l=nt(e[0]+1,t,n),c=l===n-1?l:l-1;return l=rt(e[1]+1,t,r,i),i?(o=s,s=l=0===l?l:l+1):o=l===r-1?l:l-1,{x:a,y:s,width:Math.max(c-a+1,1),height:Math.max(o-s+1,1)}}function nt(e,t,n){return Math.min(Math.round(e*t),n-1)}function rt(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}var it=(0,ce.jU)(),ot=it&&"undefined"!=typeof document,at={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ie(it,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var t,n=e=Object.assign({},at,e),r=n.width,i=n.height;function o(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}e.onError=o;var a=e,s=a.canvas,l=ut({canvas:s,width:r,height:i,onError:o});return(t=ct(l,e))?(ht(t=lt(t,e)),t):null}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||dt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var n=t=Object.assign({},at,t),r=n.manageState,i=n.debug;return r&&qe(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return re.log.apply(re,[1].concat(t))()}}),it&&i&&(ce.CO.makeDebugContext?(e=ce.CO.makeDebugContext(e,t),re.level=Math.max(re.level,1)):re.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function ct(e,t){var n=t.onError,r=null,i=function(e){return r=e.statusMessage||r};e.addEventListener("webglcontextcreationerror",i,!1);var o=t.webgl1,a=void 0===o||o,s=t.webgl2,l=void 0===s||s,c=null;return l&&(c=(c=c||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),a&&(c=(c=c||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),c?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),c):n("Failed to create ".concat(l&&!a?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function ut(e){var t,n=e.canvas,r=e.width,i=void 0===r?800:r,o=e.height,a=void 0===o?600:o,s=e.onError;return"string"==typeof n?(ot&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):n?t=n:((t=document.createElement("canvas")).id="lumagl-canvas",t.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",t.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",document.body.insertBefore(t,document.body.firstChild)),t}function ht(e){var t=ae(e)?"WebGL2":"WebGL1",n=function(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";re.info(1,"".concat(t).concat(i," context ").concat(r))()}function dt(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function ft(e,t,n){var r="width"in n?n.width:e.canvas.clientWidth,i="height"in n?n.height:e.canvas.clientHeight;r&&i||(re.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,r=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var o=e.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==t){var a=t,s=Math.floor(r*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,e.drawingBufferWidth===s&&e.drawingBufferHeight===l||(re.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/i),e.canvas.width=Math.floor(r*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:t})}}function pt(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){var t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var mt=function(){function e(t,n){i(this,e),this.name=t,this.type=n,this.sampleSize=1,this.reset()}return a(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=pt(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(pt()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),gt=function(){function e(t){var n=t.id,r=t.stats;i(this,e),this.id=n,this.stats={},this._initializeStats(r),Object.seal(this)}return a(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,n=e.type;return this.stats[t]||(this.stats[t]=e instanceof mt?e:new mt(t,n)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}(),yt="8.4.3",vt=new(function(){function e(){i(this,e),this.stats=new Map}return a(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new gt({id:e})),this.stats.get(e)}}]),e}());if(ce.CO.luma&&ce.CO.luma.VERSION!==yt)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(ce.CO.luma.VERSION," vs ").concat(yt));function _t(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function bt(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var r=e[t=t.replace(/^.*\./,"")];return _t(void 0!==r,"Accessing undefined constant GL.".concat(t)),r}function xt(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}ce.CO.luma||((0,ce.jU)()&&re.log(1,"luma.gl ".concat(yt," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),ce.CO.luma=ce.CO.luma||{VERSION:yt,version:yt,log:re,stats:vt,globals:{modules:{},nodeIO:{}}}),ce.CO.luma;var wt={};function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";wt[e]=wt[e]||1;var t=wt[e]++;return"".concat(e,"-").concat(t)}function At(e){return _t("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function Et(e){var t=!0;for(var n in e){t=!1;break}return t}function Mt(e,t,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);r.forEach((function(e){o.methodName||(o[e]=function(){throw re.removed("Calling removed method ".concat(t,".").concat(e,": "),i)(),new Error(e)})}))}function Ct(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pt="Resource subclass must define virtual methods",Dt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),se(t);var r=n.id,o=n.userData,a=void 0===o?{}:o;this.gl=t,this.gl2=t,this.id=r||St(this.constructor.name),this.userData=a,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return a(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(e){return e.delete()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_t(e=bt(this.gl,e));var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=ae(this.gl),o=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!o){var a=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1,l=i?s:a;return l}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},o=ae(this.gl),a={},s=n||Object.keys(i),l=Ct(s);try{for(l.s();!(e=l.n()).done;){var c=e.value,u=i[c],h=u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension));if(h){var d=r?xt(this.gl,c):c;a[d]=this.getParameter(c,t),r&&"GLenum"===u.type&&(a[d]=xt(this.gl,a[d]))}}}catch(e){l.e(e)}finally{l.f()}return a}},{key:"setParameter",value:function(e,t){_t(e=bt(this.gl,e));var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=ae(this.gl);if("webgl2"in n&&!r||"extension"in n&&!this.gl.getExtension(n.extension))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=bt(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return Mt(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(Pt)}},{key:"_deleteHandle",value:function(){throw new Error(Pt)}},{key:"_bindHandle",value:function(e){throw new Error(Pt)}},{key:"_getOptsFromHandle",value:function(){throw new Error(Pt)}},{key:"_getParameter",value:function(e,t){throw new Error(Pt)}},{key:"_setParameter",value:function(e,t){throw new Error(Pt)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=vt.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;vt.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=vt.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=vt.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}();function kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ot(e,t,n){return(Ot=kt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function It(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Lt(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,o=void 0===i?4:i,a=e.temp,s=n*o;a=a||new Uint8Array(s);for(var l=0;l<r/2;++l){var c=l*s,u=(r-l-1)*s;a.set(t.subarray(c,c+s)),t.copyWithin(c,u,u+s),t.set(a,u)}}function Bt(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var l=0;l<i;l++)for(var c=0;c<4;c++)a[4*(s*i+l)+c]=t[4*(2*s*n+2*l)+c];return{data:a,width:i,height:o}}function zt(e,t,n){var r=n.removedProps,i=void 0===r?{}:r,o=n.deprecatedProps,a=void 0===o?{}:o,s=n.replacedProps,l=void 0===s?{}:s;for(var c in i)if(c in t){var u=i[c]?"".concat(e,".").concat(i[c]):"N/A";re.removed("".concat(e,".").concat(c),u)()}for(var h in a)if(h in t){var d=a[h];re.deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(d))()}var f=null;for(var p in l)if(p in t){var m=l[p];re.deprecated("".concat(e,".").concat(p),"".concat(e,".").concat(m))(),(f=f||Object.assign({},t))[m]=t[p],delete f[p]}return f||t}var Ft={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Nt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Ut=function(){function e(){var t=this;i(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return a(e,null,[{key:"getBytesPerElement",value:function(e){return Rt(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return _t(e.size),Rt(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ot(e,[Ft].concat(n))}}]),a(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=zt("Accessor",e,Nt)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}();var jt,Vt,Gt,Ht={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Wt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Ht},qt={removedProps:Ht},Zt=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),(t=r.call(this,e,n)).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),t.target=n.target||(t.gl.webgl2?36662:34962),t.initialize(n),Object.seal(s(t)),t}return a(o,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ut.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ut.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=zt("Buffer",e,Wt),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=zt("Buffer",e,qt))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Ut(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,o=t.srcOffset,a=void 0===o?0:o,s=e.byteLength||e.length;_t(n);var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),0!==a||void 0!==s?(le(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(l,i,n),this.gl.bindBuffer(l,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,o=void 0===i?0:i,a=e.size,s=this.gl;return le(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,o=e.dstOffset,a=void 0===o?0:o,s=e.length,l=void 0===s?0:s;le(this.gl);var c,u,h=Rt(this.accessor.type||5126,{clamped:!1}),d=this._getAvailableElementCount(i),f=a;n?c=(u=n.length)-f:u=f+(c=Math.min(d,l||d));var p=Math.min(d,c);return _t((l=l||p)<=p),n=n||new h(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,l),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=e.offset,a=void 0===o?0:o,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(_t(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=35345===n||35982===n;return o?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;_t(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);var i=It(e);return _t(i),this.setAccessor(new Ut(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;_t(e>=0),this._trackDeallocatedMemory();var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/Rt(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new Ut(this.accessor,{type:It(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return re.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return re.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ut(this.accessor,e),this}},{key:"type",get:function(){return re.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return re.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),o}(Dt),Xt=(m(jt={},6407,{dataFormat:6407,types:[5121,33635]}),m(jt,6408,{dataFormat:6408,types:[5121,32819,32820]}),m(jt,6406,{dataFormat:6406,types:[5121]}),m(jt,6409,{dataFormat:6409,types:[5121]}),m(jt,6410,{dataFormat:6410,types:[5121]}),m(jt,33326,{dataFormat:6403,types:[5126],gl2:!0}),m(jt,33328,{dataFormat:33319,types:[5126],gl2:!0}),m(jt,34837,{dataFormat:6407,types:[5126],gl2:!0}),m(jt,34836,{dataFormat:6408,types:[5126],gl2:!0}),jt),Yt=(m(Vt={},6403,1),m(Vt,36244,1),m(Vt,33319,2),m(Vt,33320,2),m(Vt,6407,3),m(Vt,36248,3),m(Vt,6408,4),m(Vt,36249,4),m(Vt,6402,1),m(Vt,34041,1),m(Vt,6406,1),m(Vt,6409,1),m(Vt,6410,2),Vt),$t=(m(Gt={},5126,4),m(Gt,5125,4),m(Gt,5124,4),m(Gt,5123,2),m(Gt,5122,2),m(Gt,5131,2),m(Gt,5120,1),m(Gt,5121,1),Gt);function Jt(e,t){var n=Xt[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=ae(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}function Kt(e,t){var n=Xt[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var en=[9729,9728],tn=ce.CO.WebGLBuffer||function(){},nn=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e,t){var n;i(this,o);var a=t.id,s=void 0===a?St("texture"):a,l=t.handle,c=t.target;return(n=r.call(this,e,{id:s,handle:l})).target=c,n.textureUnit=void 0,n.loaded=!1,n.width=void 0,n.height=void 0,n.depth=void 0,n.format=void 0,n.type=void 0,n.dataFormat=void 0,n.border=void 0,n.textureUnit=void 0,n.mipmaps=void 0,n}return a(o,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&Jt(e,n))&&(!r||Kt(e,n))),i}}]),a(o,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n instanceof Promise)return n.then((function(n){return e.initialize(Object.assign({},t,{pixels:n,data:n}))})),this;var r="undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",(function(){return e.initialize(t)})),this;var i=t.pixels,o=void 0===i?null:i,a=t.format,s=void 0===a?6408:a,l=t.border,c=void 0===l?0:l,u=t.recreate,h=void 0!==u&&u,d=t.parameters,f=void 0===d?{}:d,p=t.pixelStore,m=void 0===p?{}:p,g=t.textureUnit,y=void 0===g?void 0:g;n||(n=o);var v=t.width,_=t.height,b=t.dataFormat,x=t.type,w=t.compressed,S=void 0!==w&&w,A=t.mipmaps,E=void 0===A||A,M=t.depth,C=void 0===M?0:M,T=this._deduceParameters({format:s,type:x,dataFormat:b,compressed:S,data:n,width:v,height:_});return v=T.width,_=T.height,S=T.compressed,b=T.dataFormat,x=T.type,this.width=v,this.height=_,this.depth=C,this.format=s,this.type=x,this.dataFormat=b,this.border=c,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(re.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(f)),this.mipmaps=E,this.setImageData({data:n,width:v,height:_,depth:C,format:s,type:x,dataFormat:b,border:c,mipmaps:E,parameters:m,compressed:S}),E&&this.generateMipmap(),this.setParameters(f),h&&(this.data=n),r&&(this._video={video:n,parameters:f,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var e=this._video,t=e.video,n=e.parameters;if(e.lastTime===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}},{key:"resize",value:function(e){var t=e.height,n=e.width,r=e.mipmaps,i=void 0!==r&&r;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(re.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Je(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,o=e.level,a=void 0===o?0:o,s=e.format,l=void 0===s?this.format:s,c=e.border,u=void 0===c?this.border:c,h=e.offset,d=void 0===h?0:h,f=e.parameters,p=void 0===f?{}:f,m=e.data,g=void 0===m?null:m,y=e.type,_=void 0===y?this.type:y,b=e.width,x=void 0===b?this.width:b,w=e.height,S=void 0===w?this.height:w,A=e.dataFormat,E=void 0===A?this.dataFormat:A,M=e.compressed,C=void 0!==M&&M;g||(g=i);var T=this._deduceParameters({format:l,type:_,dataFormat:E,compressed:C,data:g,width:x,height:S});_=T.type,E=T.dataFormat,C=T.compressed,x=T.width,S=T.height;var P=this.gl;P.bindTexture(this.target,this.handle);var D,k,O=this._getDataType({data:g,compressed:C});if(g=O.data,D=O.dataType,Je(this.gl,p,(function(){switch(D){case"null":P.texImage2D(n,a,l,x,S,u,E,_,g);break;case"typed-array":P.texImage2D(n,a,l,x,S,u,E,_,g,d);break;case"buffer":(k=le(P)).bindBuffer(35052,g.handle||g),k.texImage2D(n,a,l,x,S,u,E,_,d),k.bindBuffer(35052,null);break;case"browser-object":ae(P)?P.texImage2D(n,a,l,x,S,u,E,_,g):P.texImage2D(n,a,l,E,_,g);break;case"compressed":var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(g.entries());try{for(t.s();!(e=t.n()).done;){var r=v(e.value,2),i=r[0],o=r[1];P.compressedTexImage2D(n,i,o.format,o.width,o.height,u,o.data)}}catch(e){t.e(e)}finally{t.f()}break;default:_t(!1,"Unknown image data type")}})),g&&g.byteLength)this._trackAllocatedMemory(g.byteLength,"Texture");else{var I=Yt[this.dataFormat]||4,R=$t[this.type]||1;this._trackAllocatedMemory(this.width*this.height*I*R,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,l=e.x,c=void 0===l?0:l,u=e.y,h=void 0===u?0:u,d=e.width,f=void 0===d?this.width:d,p=e.height,m=void 0===p?this.height:p,g=e.level,y=void 0===g?0:g,v=e.format,_=void 0===v?this.format:v,b=e.type,x=void 0===b?this.type:b,w=e.dataFormat,S=void 0===w?this.dataFormat:w,A=e.compressed,E=void 0!==A&&A,M=e.offset,C=void 0===M?0:M,T=(void 0===e.border&&this.border,e.parameters),P=void 0===T?{}:T,D=this._deduceParameters({format:_,type:x,dataFormat:S,compressed:E,data:s,width:f,height:m});if(x=D.type,S=D.dataFormat,E=D.compressed,f=D.width,m=D.height,_t(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=o),s&&s.data){var k=s;s=k.data,f=k.shape[0],m=k.shape[1]}s instanceof Zt&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Je(this.gl,P,(function(){if(E)t.gl.compressedTexSubImage2D(r,y,c,h,f,m,_,s);else if(null===s)t.gl.texSubImage2D(r,y,c,h,f,m,S,x,null);else if(ArrayBuffer.isView(s))t.gl.texSubImage2D(r,y,c,h,f,m,S,x,s,C);else if(s instanceof tn){var e=le(t.gl);e.bindBuffer(35052,s),e.texSubImage2D(r,y,c,h,f,m,S,x,C),e.bindBuffer(35052,null)}else ae(t.gl)?le(t.gl).texSubImage2D(r,y,c,h,f,m,S,x,s):t.gl.texSubImage2D(r,y,c,h,S,x,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return re.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Zt?{data:t.handle,dataType:"buffer"}:t instanceof tn?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,o=e.dataFormat,a=e.type,s=e.compressed,l=Xt[t];o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed;var c=this._deduceImageSize(n,r,i);return{dataFormat:o,type:a,compressed:s,width:r=c.width,height:i=c.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var r;return _t(r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},"Could not deduced texture size"),_t(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),_t(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:_t(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(ae(this.gl)||!this.width||!this.height||At(this.width)&&At(this.height))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===en.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),o}(Dt);function rn(e,t){return _t("string"==typeof e),e=""+e,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){r(e)}}))}var on,an=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),se(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:rn(n.data)})),(t=r.call(this,e,Object.assign({},n,{target:3553}))).initialize(n),Object.seal(s(t)),t}return a(o,null,[{key:"isSupported",value:function(e,t){return nn.isSupported(e,t)}}]),o}(nn),sn="EXT_color_buffer_float";const ln=(m(on={},33189,{bpp:2}),m(on,33190,{gl2:!0,bpp:3}),m(on,36012,{gl2:!0,bpp:4}),m(on,36168,{bpp:1}),m(on,34041,{bpp:4}),m(on,35056,{gl2:!0,bpp:4}),m(on,36013,{gl2:!0,bpp:5}),m(on,32854,{bpp:2}),m(on,36194,{bpp:2}),m(on,32855,{bpp:2}),m(on,33321,{gl2:!0,bpp:1}),m(on,33330,{gl2:!0,bpp:1}),m(on,33329,{gl2:!0,bpp:1}),m(on,33332,{gl2:!0,bpp:2}),m(on,33331,{gl2:!0,bpp:2}),m(on,33334,{gl2:!0,bpp:4}),m(on,33333,{gl2:!0,bpp:4}),m(on,33323,{gl2:!0,bpp:2}),m(on,33336,{gl2:!0,bpp:2}),m(on,33335,{gl2:!0,bpp:2}),m(on,33338,{gl2:!0,bpp:4}),m(on,33337,{gl2:!0,bpp:4}),m(on,33340,{gl2:!0,bpp:8}),m(on,33339,{gl2:!0,bpp:8}),m(on,32849,{gl2:!0,bpp:3}),m(on,32856,{gl2:!0,bpp:4}),m(on,32857,{gl2:!0,bpp:4}),m(on,36220,{gl2:!0,bpp:4}),m(on,36238,{gl2:!0,bpp:4}),m(on,36975,{gl2:!0,bpp:4}),m(on,36214,{gl2:!0,bpp:8}),m(on,36232,{gl2:!0,bpp:8}),m(on,36226,{gl2:!0,bpp:16}),m(on,36208,{gl2:!0,bpp:16}),m(on,33325,{gl2:sn,bpp:2}),m(on,33327,{gl2:sn,bpp:4}),m(on,34842,{gl2:sn,bpp:8}),m(on,33326,{gl2:sn,bpp:4}),m(on,33328,{gl2:sn,bpp:8}),m(on,34836,{gl2:sn,bpp:16}),m(on,35898,{gl2:sn,bpp:4}),on);function cn(e,t,n){var r=n[t];if(!r)return!1;var i=ae(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}var un=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),(t=r.call(this,e,n)).initialize(n),Object.seal(s(t)),t}return a(o,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null},n=t.format;return!n||cn(e,n,ln)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),a(o,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,o=void 0===i?1:i,a=e.samples,s=void 0===a?0:a;return _t(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&ae(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,o):this.gl.renderbufferStorage(36161,t,r,o),this.format=t,this.width=r,this.height=o,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*ln[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),o}(Dt),hn=6144,dn=6145,fn=6146,pn=34041,mn="clear: bad arguments";function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,o=void 0===i?null:i,a=t.depth,s=void 0===a?null:a,l=t.stencil,c=void 0===l?null:l,u={};r&&(u.framebuffer=r);var h=0;o&&(h|=16384,!0!==o&&(u.clearColor=o)),s&&(h|=256,!0!==s&&(u.clearDepth=s)),c&&(h|=1024,!0!==s&&(u.clearStencil=s)),_t(0!==h,mn),Je(e,u,(function(){e.clear(h)}))}function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,o=void 0===i?hn:i,a=t.drawBuffer,s=void 0===a?0:a,l=t.value,c=void 0===l?[0,0,0,0]:l;le(e),Je(e,{framebuffer:r},(function(){switch(o){case hn:switch(c.constructor){case Int32Array:e.clearBufferiv(o,s,c);break;case Uint32Array:e.clearBufferuiv(o,s,c);break;case Float32Array:default:e.clearBufferfv(o,s,c)}break;case dn:e.clearBufferfv(dn,0,[c]);break;case fn:e.clearBufferiv(fn,0,[c]);break;case pn:var t=v(c,2),n=t[0],r=t[1];e.clearBufferfi(pn,0,n,r);break;default:_t(!1,mn)}}))}var vn=n(7757),_n=n.n(vn);function bn(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function xn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bn(o,r,i,a,s,"next",e)}function s(e){bn(o,r,i,a,s,"throw",e)}a(void 0)}))}}var wn=[34069,34070,34071,34072,34073,34074],Sn=function(e){c(l,e);var t,n,r,o=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(r){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return h(this,e)});function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,l),se(e),(t=o.call(this,e,Object.assign({},n,{target:34067}))).initialize(n),Object.seal(s(t)),t}return a(l,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mipmaps,r=void 0===n||n,i=t.parameters,o=void 0===i?{}:i;return this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(o)})),this}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.mipmapLevel,l=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:a,mipmapLevel:l})}},{key:"setCubeMapImageData",value:(t=xn(_n().mark((function e(t){var n,r,i,o,a,s,l,c,u,h,d,f,p,m=this;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,i=t.pixels,o=t.data,a=t.border,s=void 0===a?0:a,l=t.format,c=void 0===l?6408:l,u=t.type,h=void 0===u?5121:u,d=this.gl,f=i||o,e.next=5,Promise.all(wn.map((function(e){var t=f[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:p=e.sent,this.bind(),wn.forEach((function(e,t){p[t].length>1&&!1!==m.opts.mipmaps&&re.warn("".concat(m.id," has mipmap and multiple LODs."))(),p[t].forEach((function(t,i){n&&r?d.texImage2D(e,i,c,n,r,s,c,h,t):d.texImage2D(e,i,c,c,h,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setImageDataForFace",value:function(e){var t=this,n=e.face,r=e.width,i=e.height,o=e.pixels,a=e.data,s=e.border,l=void 0===s?0:s,c=e.format,u=void 0===c?6408:c,h=e.type,d=void 0===h?5121:h,f=this.gl,p=o||a;return this.bind(),p instanceof Promise?p.then((function(r){return t.setImageDataForFace(Object.assign({},e,{face:n,data:r,pixels:r}))})):this.width||this.height?f.texImage2D(n,0,u,r,i,l,u,d,p):f.texImage2D(n,0,u,u,d,p),this}}]),l}(nn);Sn.FACES=wn;var An=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),le(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),(t=r.call(this,e,n)).initialize(n),Object.seal(s(t)),t}return a(o,null,[{key:"isSupported",value:function(e){return ae(e)}}]),a(o,[{key:"setImageData",value:function(e){var t=this,n=e.level,r=void 0===n?0:n,i=e.dataFormat,o=void 0===i?6408:i,a=e.width,s=e.height,l=e.depth,c=void 0===l?1:l,u=e.border,h=void 0===u?0:u,d=e.format,f=e.type,p=void 0===f?5121:f,m=e.offset,g=void 0===m?0:m,y=e.data,v=e.parameters,_=void 0===v?{}:v;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Je(this.gl,_,(function(){ArrayBuffer.isView(y)&&t.gl.texImage3D(t.target,r,o,a,s,c,h,d,p,y),y instanceof Zt&&(t.gl.bindBuffer(35052,y.handle),t.gl.texImage3D(t.target,r,o,a,s,c,h,d,p,g))})),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var b=Yt[this.dataFormat]||4,x=$t[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*b*x,"Texture")}return this.loaded=!0,this}}]),o}(nn);function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceX,r=void 0===n?0:n,i=t.sourceY,o=void 0===i?0:i,a=t.sourceFormat,s=void 0===a?6408:a,l=t.sourceAttachment,c=void 0===l?36064:l,u=t.target,h=void 0===u?null:u,d=t.sourceWidth,f=t.sourceHeight,p=t.sourceType,m=Cn(e),g=m.framebuffer,y=m.deleteFramebuffer;_t(g);var v=g.gl,_=g.handle,b=g.attachments;d=d||g.width,f=f||g.height,36064===c&&null===_&&(c=1028),_t(b[c]),h=Tn(h,p=p||b[c].type,s,d,f),p=p||It(h);var x=v.bindFramebuffer(36160,_);return v.readPixels(r,o,d,f,s,p,h),v.bindFramebuffer(36160,x||null),y&&g.delete(),h}function Mn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceAttachment,r=void 0===n?36064:n,i=t.targetMaxHeight,o=void 0===i?Number.MAX_SAFE_INTEGER:i,a=En(e,{sourceAttachment:r}),s=e.width,l=e.height;l>o;){var c=Bt({data:a,width:s,height:l});a=c.data,s=c.width,l=c.height}Lt({data:a,width:s,height:l});var u=document.createElement("canvas");u.width=s,u.height=l;var h=u.getContext("2d"),d=h.createImageData(s,l);return d.data.set(a),h.putImageData(d,0,0),u.toDataURL()}function Cn(e){return e instanceof In?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(t=e,n=t.gl,r=t.width,i=t.height,o=t.id,new In(n,Object.assign({},undefined,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:m({},36064,t)}))),deleteFramebuffer:!0};var t,n,r,i,o}function Tn(e,t,n,r,i){return e||new(Rt(t=t||5121,{clamped:!1}))(r*i*function(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return _t(!1),0}}(n))}function Pn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn,On="Multiple render targets not supported",In=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),(t=r.call(this,e,n)).width=null,t.height=null,t.attachments={},t.readBuffer=36064,t.drawBuffers=[36064],t.ownResources=[],t.initialize(n),Object.seal(s(t)),t}return a(o,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){var e=le(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var e=le(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new o(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),a(o,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,o=e.attachments,a=void 0===o?null:o,s=e.color,l=void 0===s||s,c=e.depth,u=void 0===c||c,h=e.stencil,d=void 0!==h&&h,f=e.check,p=void 0===f||f,m=e.readBuffer,g=void 0===m?void 0:m,y=e.drawBuffers,v=void 0===y?void 0:y;if(_t(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var _ in a){var b=a[_];(Array.isArray(b)?b[0]:b).resize({width:n,height:i})}else a=this._createDefaultAttachments(l,u,d,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:g,drawBuffers:v}),a&&p&&this.checkStatus()}},{key:"delete",value:function(){var e,t=Pn(this.ownResources);try{for(t.s();!(e=t.n()).done;)e.value.delete()}catch(e){t.e(e)}finally{t.f()}return ne(d(o.prototype),"delete",this).call(this),this}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,o=e.clearAttachments,a=void 0!==o&&o,s=e.resizeAttachments,l=void 0===s||s;this.attach(n,{clearAttachments:a,resizeAttachments:l});var c=this.gl,u=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,u||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return _t(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&re.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,o=n.resizeAttachments,a=void 0===o||o,s={};i&&Object.keys(this.attachments).forEach((function(e){s[e]=null})),Object.assign(s,e);var l=this.gl.bindFramebuffer(36160,this.handle);for(var c in s){_t(void 0!==c,"Misspelled framebuffer binding point?");var u=Number(c),h=s[u],d=h;if(d)if(d instanceof un)this._attachRenderbuffer({attachment:u,renderbuffer:d});else if(Array.isArray(h)){var f=v(h,3),p=f[0],m=f[1],g=void 0===m?0:m,y=f[2],_=void 0===y?0:y;d=p,this._attachTexture({attachment:u,texture:p,layer:g,level:_})}else this._attachTexture({attachment:u,texture:d,layer:0,level:0});else this._unattach(u);a&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,l||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(Rn(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&gn(this.gl,{color:t,depth:n,stencil:r}),o.forEach((function(e,t){yn({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,a||null),this}},{key:"readPixels",value:function(){return re.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return re.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return re.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return re.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return re.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return re.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,l=e.height,c=le(this.gl),u=c.bindFramebuffer(36008,this.handle);return 0===i&&0===a&&void 0===s&&void 0===l?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,a,s,l),c.bindFramebuffer(36008,u),this}},{key:"getAttachmentParameter",value:function(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=xt(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={},o=Pn(r);try{for(o.s();!(e=o.n()).done;){var a=e.value,s=n?xt(this.gl,a):a;i[s]=this.getAttachmentParameter(t,a,n)}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0,i=t;r<i.length;r++){var o=i[r],a=Number(o),s=e?xt(this.gl,a):a;n[s]=this.getAttachmentParameters(a,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(Mn(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>re.level||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=Mn(this,{targetMaxHeight:100});return re.image({logLevel:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,r,i){var o,a=null;return e&&((a=a||{})[36064]=new an(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(o={},m(o,10241,9729),m(o,10240,9729),m(o,10242,33071),m(o,10243,33071),o)}),this.ownResources.push(a[36064])),t&&n?((a=a||{})[33306]=new un(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(a[33306])):t?((a=a||{})[36096]=new un(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(a[36096])):n&&_t(!1),a}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof un?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,o=e.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:le(a).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:_t(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e){var t,n=ae(t=this.gl)?t:null;n?n.readBuffer(e):_t(36064===e||1029===e,On),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl,n=le(t);if(n)n.drawBuffers(e);else{var r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):_t(1===e.length&&(36064===e[0]||1029===e[0]),On)}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){for(var t in e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},zn)void 0===e.luma.caps[t]&&(e.luma.caps[t]=Un(e,t));return e.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),o}(Dt);function Rn(e){return(In.STATUS||{})[e]||"Framebuffer error ".concat(e)}In.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var Ln="TIMER_QUERY",Bn="ELEMENT_INDEX_UINT32";const zn=(m(kn={},"WEBGL2",[!1,!0]),m(kn,"VERTEX_ARRAY_OBJECT",["OES_vertex_array_object",!0]),m(kn,Ln,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),m(kn,"INSTANCED_RENDERING",["ANGLE_instanced_arrays",!0]),m(kn,"MULTIPLE_RENDER_TARGETS",["WEBGL_draw_buffers",!0]),m(kn,Bn,["OES_element_index_uint",!0]),m(kn,"BLEND_EQUATION_MINMAX",["EXT_blend_minmax",!0]),m(kn,"FLOAT_BLEND",["EXT_float_blend"]),m(kn,"COLOR_ENCODING_SRGB",["EXT_sRGB",!0]),m(kn,"TEXTURE_DEPTH",["WEBGL_depth_texture",!0]),m(kn,"TEXTURE_FLOAT",["OES_texture_float",!0]),m(kn,"TEXTURE_HALF_FLOAT",["OES_texture_half_float",!0]),m(kn,"TEXTURE_FILTER_LINEAR_FLOAT",["OES_texture_float_linear"]),m(kn,"TEXTURE_FILTER_LINEAR_HALF_FLOAT",["OES_texture_half_float_linear"]),m(kn,"TEXTURE_FILTER_ANISOTROPIC",["EXT_texture_filter_anisotropic"]),m(kn,"COLOR_ATTACHMENT_RGBA32F",[function(e){var t=new an(e,{format:6408,type:5126,dataFormat:6408}),n=new In(e,{id:"test-framebuffer",check:!1,attachments:m({},36064,t)}),r=n.getStatus();return t.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),m(kn,"COLOR_ATTACHMENT_FLOAT",[!1,"EXT_color_buffer_float"]),m(kn,"COLOR_ATTACHMENT_HALF_FLOAT",["EXT_color_buffer_half_float"]),m(kn,"GLSL_FRAG_DATA",["WEBGL_draw_buffers",!0]),m(kn,"GLSL_FRAG_DEPTH",["EXT_frag_depth",!0]),m(kn,"GLSL_DERIVATIVES",["OES_standard_derivatives",!0]),m(kn,"GLSL_TEXTURE_LOD",["EXT_shader_texture_lod",!0]),kn);function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nn(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return Un(e,t)}))}function Un(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){var n,r=zn[t];_t(r,t);var i=ae(e)&&r[1]||r[0];if("function"==typeof i)n=i(e);else if(Array.isArray(i)){n=!0;var o,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n=n&&Boolean(e.getExtension(s))}}catch(e){a.e(e)}finally{a.f()}}else"string"==typeof i?n=Boolean(e.getExtension(i)):"boolean"==typeof i?n=i:_t(!1);return n}(e,t)),e.luma.caps[t]||re.log(2,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn=function(){function e(t,n){i(this,e),this.opts=n,this.source=t}return a(e,[{key:"getValue",value:function(){var e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];var n=this.source.value,r=t.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var o=t.elementOffset||0,a=0;a<r;++a)i[a]=n[o+a]}return i}},{key:"getAccessor",value:function(){return Vn(Vn({},this.source.getAccessor()),this.opts)}},{key:"value",get:function(){return this.source.value}}]),e}();const Hn=new(function(){function e(t){i(this,e),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(t)}return a(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"allocate",value:function(e,t,n){var r,i=n.size,o=void 0===i?1:i,a=n.type,s=n.padding,l=void 0===s?0:s,c=n.copy,u=void 0!==c&&c,h=n.initialize,d=void 0!==h&&h,f=n.maxCount,p=a||e&&e.constructor||Float32Array,m=t*o+l;if(ArrayBuffer.isView(e)){if(m<=e.length)return e;if(m*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new p(e.buffer,0,m)}f&&(r=f*o+l);var g=this._allocate(p,m,d,r);return e&&u?g.set(e):d||g.fill(0,0,4),this._release(e),g}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,t,n,r){var i=Math.max(Math.ceil(t*this.props.overAlloc),1);i>r&&(i=r);var o=this._pool,a=e.BYTES_PER_ELEMENT*i,s=o.findIndex((function(e){return e.byteLength>=a}));if(s>=0){var l=new e(o.splice(s,1)[0],0,i);return n&&l.fill(0),l}return new e(i)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var t=this._pool,n=e.buffer,r=n.byteLength,i=t.findIndex((function(e){return e.byteLength>=r}));i<0?t.push(n):(i>0||t.length<this.props.poolSize)&&t.splice(i,0,n),t.length>this.props.poolSize&&t.shift()}}}]),e}());function Wn(e){var t="function"==typeof Map?new Map:void 0;return(Wn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ot(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}Math.PI,Math.PI;var qn={};function Zn(e){return Math.round(e/qn.EPSILON)*qn.EPSILON}function Xn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?qn.precision||4:n;return e=Zn(e),"".concat(parseFloat(e.toPrecision(r)))}function Yn(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $n(e,t,n){return function(e,t,n){if(Yn(e)){n=n||((i=e).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<e.length;++r)n[r]=t(e[r],r,n);return n}var i;return t(e)}(e,(function(e){return Math.max(t,Math.min(n,e))}))}function Jn(e,t,n){return Yn(e)?e.map((function(e,r){return Jn(e,t[r],n)})):n*t+(1-n)*e}function Kn(e,t,n){var r=qn.EPSILON;n&&(qn.EPSILON=n);try{if(e===t)return!0;if(Yn(e)&&Yn(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!Kn(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=qn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{qn.EPSILON=r}}function Qn(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}qn.EPSILON=1e-12,qn.debug=!1,qn.precision=4,qn.printTypes=!1,qn.printDegrees=!1,qn.printRowMajor=!0;var er=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"to",value:function(e){return e===this?this:Yn(e)?this.toArray(e):this.toObject(e)}},{key:"toTarget",value:function(e){return e?this.to(e):this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(qn)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Xn(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Kn(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]+=o[a];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]-=o[a];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}},{key:"multiplyByScalar",value:function(e){return this.scale(e)}},{key:"check",value:function(){if(qn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"ELEMENTS",get:function(){return Qn(!1),0}},{key:"RANK",get:function(){return Qn(!1),0}},{key:"elements",get:function(){return this}}]),o}(Wn(Array));function tr(e,t){if(e.length!==t)return!1;for(var n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function nr(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(qn.debug&&!tr(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}var ir={};function or(e,t){ir[e]||(ir[e]=!0,console.warn("".concat(e," has been removed in version ").concat(t,", see upgrade guide for more information")))}var ar=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"copy",value:function(e){return Qn(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return nr(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return nr(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]*=o[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]/=o[a];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return Qn(e>=0&&e<this.ELEMENTS,"index is out of range"),nr(this[e])}},{key:"setComponent",value:function(e,t){return Qn(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=nr(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=nr(e)}}]),o}(er),sr=1e-6,lr="undefined"!=typeof Float32Array?Float32Array:Array;function cr(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ur;function hr(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o||1;return e[0]=(n[0]*r+n[4]*i+n[8]*o)/a,e[1]=(n[1]*r+n[5]*i+n[9]*o)/a,e[2]=(n[2]*r+n[6]*i+n[10]*o)/a,e}ur=new lr(3),lr!=Float32Array&&(ur[0]=0,ur[1]=0,ur[2]=0);var dr,fr=[0,0,0],pr={},mr=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i(this,o),e=r.call(this,-0,-0,-0),1===arguments.length&&Yn(t)?e.copy(t):(qn.debug&&(nr(t),nr(n),nr(a)),e[0]=t,e[1]=n,e[2]=a),e}return a(o,null,[{key:"ZERO",get:function(){return pr.ZERO=pr.ZERO||Object.freeze(new o(0,0,0,0))}}]),a(o,[{key:"set",value:function(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return qn.debug&&(nr(e.x),nr(e.y),nr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"angle",value:function(e){return n=e,r=(t=this)[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=(c=Math.sqrt(r*r+i*i+o*o)*Math.sqrt(a*a+s*s+l*l))&&function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(t,n)/c,Math.acos(Math.min(Math.max(u,-1),1));var t,n,r,i,o,a,s,l,c,u}},{key:"cross",value:function(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a}(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,void 0===n?fr:n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,void 0===n?fr:n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,void 0===n?fr:n,t),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return cr(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return hr(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2];e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8]}(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2]}(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return function(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],l=t[1],c=t[2],u=i*c-o*l,h=o*s-r*c,d=r*l-i*s,f=i*d-o*h,p=o*u-r*d,m=r*h-i*u,g=2*a;u*=g,h*=g,d*=g,f*=2,p*=2,m*=2,e[0]=s+u+f,e[1]=l+h+p,e[2]=c+d+m}(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=nr(e)}}]),o}(ar),gr=new mr;function yr(e,t,n,r){gr.set(e,t,n);var i=gr.len();return{distance:r/i,normal:new mr(-e/i,-t/i,-n/i)}}function vr(e,t){var n=t.size,r=void 0===n?1:n,i=t.startIndex,o=void 0===i?0:i,a=t.endIndex;Number.isFinite(a)||(a=e.length);var s=(a-o)/r;dr=Hn.allocate(dr,s,{type:Float32Array,size:2*r});for(var l,c=o,u=0;c<a;){for(var h=0;h<r;h++){var d=e[c++];dr[u+h]=d,dr[u+h+r]=(l=d)-Math.fround(l)}u+=2*r}return dr.subarray(0,s*r*2)}function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xr(e){return e.stride||e.size*e.bytesPerElement}function wr(e,t){t.offset&&K.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=xr(e),r=("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return br(br({},t),{},{offset:r,stride:n})}var Sr=function(){function e(t,n){i(this,e),this.gl=t,this.id=n.id,this.size=n.size;var r=n.logicalType||n.type,o=5130===r,a=n.defaultValue;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),n.defaultValue=a;var s=r;o?s=5126:!s&&n.isIndexed?s=t&&function(e,t){return Nn(e,"ELEMENT_INDEX_UINT32")}(t)?5125:5123:s||(s=5126),n.logicalType=r,n.type=s;var l=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||s||5126);this.shaderAttributes={},this.doublePrecision=o,o&&!1===n.fp64&&(l=Float32Array),n.bytesPerElement=l.BYTES_PER_ELEMENT,this.defaultType=l,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,constant:!1},this._buffer=null,this.setData(n)}return a(e,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),Hn.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,t){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i={high:a=wr(o=this.getAccessor(),t||{}),low:br(br({},a),{},{offset:a.offset+4*o.size})};return n[e]=new Gn(this,i.high),n["".concat(e,"64Low")]=r?new Gn(this,i.low):new Float32Array(this.size),n}var o,a;if(t){var s=wr(this.getAccessor(),t);return m({},e,new Gn(this,s))}return m({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(e){var t=this.state;ArrayBuffer.isView(e)?e={value:e}:e instanceof Zt&&(e={buffer:e});var n=br(br({},this.settings),e);if(t.bufferAccessor=n,e.constant){var r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),t.constant&&this._areValuesEqual(r,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){var i=e.buffer;t.externalBuffer=i,t.constant=!1,this.value=e.value;var o=e.value instanceof Float64Array;n.type=e.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),n.stride=xr(n)}else if(e.value){this._checkExternalBuffer(e);var a=e.value;t.externalBuffer=null,t.constant=!1,this.value=a,n.bytesPerElement=a.BYTES_PER_ELEMENT,n.stride=xr(n);var s=this.buffer,l=this.byteOffset;this.doublePrecision&&a instanceof Float64Array&&(a=vr(a,n));var c=a.byteLength+l+2*n.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:a,offset:l}),n.type=e.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.value,n=e.startOffset,r=void 0===n?0:n,i=e.endOffset;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?vr(t,{size:this.size,startIndex:r,endIndex:i}):t.subarray(r,i),offset:r*t.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var t=e.numInstances,n=e.copy,r=void 0!==n&&n,i=this.state,o=i.allocatedValue,a=Hn.allocate(o,t+1,{size:this.size,type:this.defaultType,copy:r});this.value=a;var s=this.buffer,l=this.byteOffset;return s.byteLength<a.byteLength+l&&(s.reallocate(a.byteLength+l),r&&o&&s.subData({data:o instanceof Float64Array?vr(o,this):o,offset:l})),i.allocatedValue=a,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var t=e.value;if(!e.constant&&t){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||K.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((function(e){return(e+128)/255*2-1}));case 5122:return new Float32Array(e).map((function(e){return(e+32768)/65535*2-1}));case 5121:return new Float32Array(e).map((function(e){return e/255}));case 5123:return new Float32Array(e).map((function(e){return e/65535}));default:return e}}},{key:"_normalizeValue",value:function(e,t,n){var r=this.settings,i=r.defaultValue,o=r.size;if(Number.isFinite(e))return t[n]=e,t;if(!e)return t[n]=i[0],t;switch(o){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:for(var a=o;--a>=0;)t[n+a]=Number.isFinite(e[a])?e[a]:i[a]}return t}},{key:"_areValuesEqual",value:function(e,t){if(!e||!t)return!1;for(var n=this.size,r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings,t=e.isIndexed,n=e.type;this._buffer=new Zt(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*xr(e):0}}]),e}();function Ar(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}var Er=[],Mr=[];function Cr(e){return e&&e[Symbol.asyncIterator]}function Tr(e,t){var n=t.size,r=t.stride,i=t.offset,o=t.startIndices,a=t.nested,s=e.BYTES_PER_ELEMENT,l=r?r/s:n,c=i?i/s:0,u=Math.floor((e.length-c)/l);return function(t,r){var i=r.index,s=r.target;if(!o){for(var h=i*l+c,d=0;d<n;d++)s[d]=e[h+d];return s}var f,p=o[i],m=o[i+1]||u;if(a){f=new Array(m-p);for(var g=p;g<m;g++){var y=g*l+c;s=new Array(n);for(var v=0;v<n;v++)s[v]=e[y+v];f[g-p]=s}}else if(l===n)f=e.subarray(p*n+c,m*n+c);else{f=new e.constructor((m-p)*n);for(var _=0,b=p;b<m;b++)for(var x=b*l+c,w=0;w<n;w++)f[_++]=e[x+w]}return f}}function Pr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(e)?Dr(e,t,[]):t(e)?[e]:[]}function Dr(e,t,n){for(var r=-1;++r<e.length;){var i=e[r];Array.isArray(i)?Dr(i,t,n):t(i)&&n.push(i)}return n}function kr(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,l=a*s,c=0,u=i;c<s;c++)t[u++]=n[c];for(;c<l;)c<l-c?(t.copyWithin(i+c,i,i+c),c*=2):(t.copyWithin(i+c,i,i+l-c),c=l);return t}var Or=[],Ir=[[0,1/0]];function Rr(e,t){if(e===Ir)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;for(var n=[],r=e.length,i=0,o=0;o<r;o++){var a=e[o];a[1]<t[0]?(n.push(a),i=o+1):a[0]>t[1]?n.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return n.splice(i,0,t),n}function Lr(e){var t=e.source,n=e.target,r=e.start,i=void 0===r?0:r,o=e.end,a=e.size,s=e.getData;o=o||n.length;var l=t.length,c=o-i;if(l>c)n.set(t.subarray(0,c),i);else if(n.set(t,i),s)for(var u=l;u<c;)for(var h=s(u,t),d=0;d<a;d++)n[i+u]=h[d]||0,u++}var Br={interpolation:{duration:0,easing:function(e){return e}},spring:{stiffness:.05,damping:.5}};function zr(e,t){return e?(Number.isFinite(e)&&(e={duration:e}),e.type=e.type||"interpolation",Object.assign({},Br[e.type],t,e)):null}function Fr(e,t){return t.getBuffer()?[t.getBuffer(),{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function Nr(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function Ur(e){e.push(e.shift())}function jr(e,t){var n=e.doublePrecision,r=e.settings,i=e.value,o=e.size,a=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:t*o)*a}function Vr(e){var t=e.buffer,n=e.numInstances,r=e.attribute,i=e.fromLength,o=e.fromStartIndices,a=e.getData,s=void 0===a?function(e){return e}:a,l=r.doublePrecision&&r.value instanceof Float64Array?2:1,c=r.size*l,u=r.byteOffset,h=r.startIndices,d=o&&h,f=jr(r,n),p=r.state.constant;if(d||!(i>=f)){var m=p?r.value:r.getBuffer().getData({srcByteOffset:u});if(r.settings.normalized&&!p){var g=s;s=function(e,t){return r._normalizeConstant(g(e,t))}}var y=p?function(e,t){return s(m,t)}:function(e,t){return s(m.subarray(e,e+c),t)},v=t.getData({length:i}),_=new Float32Array(f);!function(e){var t=e.source,n=e.target,r=e.size,i=e.getData,o=e.sourceStartIndices,a=e.targetStartIndices;if(!Array.isArray(a))return Lr({source:t,target:n,size:r,getData:i}),n;for(var s=0,l=0,c=i&&function(e,t){return i(e+l,t)},u=Math.min(o.length,a.length),h=1;h<u;h++){var d=o[h]*r,f=a[h]*r;Lr({source:t.subarray(s,d),target:n,start:l,end:f,size:r,getData:c}),s=d,l=f}l<n.length&&Lr({source:[],target:n,start:l,size:r,getData:c})}({source:v,target:_,sourceStartIndices:o,targetStartIndices:h,size:c,getData:y}),t.byteLength<_.byteLength+u&&t.reallocate(_.byteLength+u),t.subData({data:_,offset:u})}}function Gr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wr=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,o),t=r.call(this,e,n);var a=n.transition,s=void 0!==a&&a,l=n.noAlloc,c=void 0!==l&&l,u=n.update,h=void 0===u?null:u,d=n.accessor,f=void 0===d?null:d,p=n.transform,m=void 0===p?null:p,g=n.startIndices,y=void 0===g?null:g;return Object.assign(t.settings,{transition:s,noAlloc:c,update:h||f&&t._autoUpdater,accessor:f,transform:m}),Object.assign(t.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Ir,startIndices:y}),Object.seal(t.settings),Object.seal(t.state),t._validateAttributeUpdaters(),t}return a(o,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearChangedFlags,n=void 0!==t&&t,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var e=this.settings.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(e){if(!e||!this.supportsTransition())return null;var t=this.settings.accessor,n=this.settings.transition;return zr(Array.isArray(t)?e[t.find((function(t){return e[t]}))]:e[t],n)}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){var n=t.startRow,r=void 0===n?0:n,i=t.endRow,o=void 0===i?1/0:i;this.state.updateRanges=Rr(this.state.updateRanges,[r,o])}else this.state.updateRanges=Ir}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=Or}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}},{key:"update",value:function(e){this.setData(e)}},{key:"allocate",value:function(e){var t=this.state,n=this.settings;return!n.noAlloc&&!!n.update&&(Ar(Number.isFinite(e)),ne(d(o.prototype),"allocate",this).call(this,{numInstances:e,copy:t.updateRanges!==Ir}),!0)}},{key:"updateBuffer",value:function(e){var t=e.numInstances,n=e.data,r=e.props,i=e.context;if(!this.needsUpdate())return!1;var a=this.state.updateRanges,s=this.settings,l=s.update,c=s.noAlloc,u=!0;if(l){var h,f=Gr(a);try{for(f.s();!(h=f.n()).done;){var p=v(h.value,2),m=p[0],g=p[1];l.call(i,this,{data:n,startRow:m,endRow:g,props:r,numInstances:t})}}catch(e){f.e(e)}finally{f.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var y,_=Gr(a);try{for(_.s();!(y=_.n()).done;){var b=v(y.value,2),x=b[0],w=b[1],S=Number.isFinite(x)?this.getVertexOffset(x):0,A=Number.isFinite(w)?this.getVertexOffset(w):c||!Number.isFinite(t)?this.value.length:t*this.size;ne(d(o.prototype),"updateSubBuffer",this).call(this,{startOffset:S,endOffset:A})}}catch(e){_.e(e)}finally{_.f()}}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}},{key:"setConstantValue",value:function(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(e){var t=this.state;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state,r=this.settings;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e});var i=r.transform||t!==this.startIndices;if(i){Ar(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor));var o=e.size&&e.size!==this.size;return n.binaryAccessor=Tr(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}},{key:"getVertexOffset",value:function(e){var t=this.startIndices;return(t?t[e]:e)*this.size}},{key:"getShaderAttributes",value:function(){var e=this.settings.shaderAttributes||m({},this.id,null),t={};for(var n in e)Object.assign(t,ne(d(o.prototype),"getShaderAttributes",this).call(this,n,e[n]));return t}},{key:"_autoUpdater",value:function(e,t){var n=t.data,r=t.startRow,i=t.endRow,o=t.props,a=t.numInstances;if(!e.constant){var s=e.settings,l=e.state,c=e.value,u=e.size,h=e.startIndices,d=s.accessor,f=s.transform,p=l.binaryAccessor||("function"==typeof d?d:o[d]);Ar("function"==typeof p,'accessor "'.concat(d,'" is not a function'));var m,g=e.getVertexOffset(r),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=Er,i={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?r=e:e.length>0&&(Mr.length=e.length,r=Mr):r=Er,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}(n,r,i),v=y.iterable,_=y.objectInfo,b=Gr(v);try{for(b.s();!(m=b.n()).done;){var x=m.value;_.index++;var w=p(x,_);if(f&&(w=f.call(this,w)),h){var S=(_.index<h.length-1?h[_.index+1]:a)-h[_.index];if(w&&Array.isArray(w[0])){var A,E=g,M=Gr(w);try{for(M.s();!(A=M.n()).done;){var C=A.value;e._normalizeValue(C,c,E),E+=u}}catch(e){M.e(e)}finally{M.f()}}else w&&w.length>u?c.set(w,g):(e._normalizeValue(w,_.target,0),kr({target:c,source:_.target,start:g,count:S}));g+=S*u}else e._normalizeValue(w,c,g),g+=u}}catch(e){b.e(e)}finally{b.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var e=this.settings;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value,t=Math.min(4,this.size);if(e&&e.length>=t){var n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(e){this.state.startIndices=e}}]),o}(Sr),qr={};function Zr(e){var t;K.level>0&&qr[e]&&(t=qr[e]).call.apply(t,arguments)}function Xr(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var Yr="void main() {gl_FragColor = vec4(0);}",$r="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Jr="#version 300 es\n".concat($r);function Kr(e,t){t=Array.isArray(t)?t:[t];var n=v(e.replace(/^\s+/,"").split(/\s+/),3),r=n[0],i=n[1],o=n[2];return t.includes(r)&&i&&o?{qualifier:r,type:i,name:o.split(";")[0]}:null}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,r=e.input,i=e.inputType,o=e.output;if(!r)return 300===n?Jr:n>300?"#version ".concat(n,"\n").concat($r):Yr;var a=ti(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function ei(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Xr(!1),null}}function ti(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Xr(!1),null}}var ni=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),le(e),(t=r.call(this,e,n)).initialize(n),t.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(s(t)),t}return a(o,null,[{key:"isSupported",value:function(e){return ae(e)}}]),a(o,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Et(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(e,t){var n=this,r=this._getVaryingIndex(e),i=this._getBufferParams(t),o=i.buffer,a=i.byteSize,s=i.byteOffset;return r<0?(this.unused[e]=o,re.warn((function(){return"".concat(n.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,o,s,a),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,r;return e instanceof Zt==0?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.byteSize,i=t.byteOffset;this._bindBuffer(e,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),o}(Dt);function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ii=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return a(e,[{key:"setupResources",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.bindings);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setupTransformFeedback(r,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.varyings;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceBuffers,r=t.transformFeedback,i=Object.assign({},n,e.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var t=this.bindings[this.currentIndex].feedbackBuffers,n=e?t[e]:null;return n?n instanceof Zt?n:n.buffer:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,n=this.getBuffer(t);return n?n.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&_t(ae(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var t=e.sourceBuffers,n=void 0===t?{}:t,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var o=this.feedbackMap[i];i in n&&(r[o]=i)}for(var a in Object.assign(r,e.feedbackBuffers),r){var s=r[a];if("string"==typeof s){var l=n[s],c=l.byteLength,u=l.usage,h=l.accessor;r[a]=this._createNewBuffer(a,{byteLength:c,usage:u,accessor:h})}}return r}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,n=void 0===t?null:t;Object.assign(this.feedbackMap,e.feedbackMap);var r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(e,t){var n=t.model.program;e.transformFeedback=new ni(this.gl,{program:n,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var t=this._swapBuffers(this.bindings[this.currentIndex]),n=t.sourceBuffers,r=t.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];t[r]=e.feedbackBuffers[i],n[i]=e.sourceBuffers[r],_t(n[i]instanceof Zt)}return{sourceBuffers:t,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(e,t){var n=new Zt(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),e}();function oi(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}var ai,si="vs",li="fs",ci=(m(ai={},si,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),m(ai,li,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),ai),ui="__LUMA_INJECT_DECLARATIONS__",hi=/void\s+main\s*\([^)]*\)\s*\{\n?/,di=/}\n?[^{}]*$/,fi=[];function pi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t===si,o=function(t){var r=n[t];r.sort((function(e,t){return e.order-t.order})),fi.length=r.length;for(var o=0,a=r.length;o<a;++o)fi[o]=r[o].injection;var s="".concat(fi.join("\n"),"\n");switch(t){case"vs:#decl":i&&(e=e.replace(ui,s));break;case"vs:#main-start":i&&(e=e.replace(hi,(function(e){return e+s})));break;case"vs:#main-end":i&&(e=e.replace(di,(function(e){return s+e})));break;case"fs:#decl":i||(e=e.replace(ui,s));break;case"fs:#main-start":i||(e=e.replace(hi,(function(e){return e+s})));break;case"fs:#main-end":i||(e=e.replace(di,(function(e){return s+e})));break;default:e=e.replace(t,(function(e){return e+s}))}};for(var a in n)o(a);return e=e.replace(ui,""),r&&(e=e.replace(/\}\s*$/,(function(e){return e+ci[t]}))),e}function mi(e){var t={};return Xr(Array.isArray(e)&&e.length>1),e.forEach((function(e){for(var n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]})),t}var gi,yi={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},vi="transform_uSize_",_i="transform_position";function bi(e){var t=e.vs,n=e.sourceTextureMap,r=e.targetTextureVarying,i=e.targetTexture,o=Object.keys(n).length,a=null,s={},l=t,c={};if(o>0||r){var u=l.split("\n"),h=u.slice();if(u.forEach((function(e,t,i){if(o>0){var l=function(e,t){var n={},r=function(e){return Kr(e,["attribute","in"])}(e);if(!r)return null;var i=r.type,o=r.name;if(o&&t[o]){var a="// ".concat(e," => Replaced by Transform with a sampler"),s=function(e){var t="".concat("transform_uSampler_").concat(e),n="".concat(vi).concat(e);return{samplerName:t,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";")}}(o),l=s.samplerName,c=s.sizeName,u=s.uniformDeclerations,h=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Xr(!1),null}}(i),d="  ".concat(i," ").concat(o," = transform_getInput(").concat(l,", ").concat(c,").").concat(h,";\n");return n[l]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":d},samplerTextureMap:n}}return null}(e,n);if(l){var u=l.updatedLine,d=l.inject;h[t]=u,c=mi([c,d]),Object.assign(s,l.samplerTextureMap),o--}}r&&!a&&(a=function(e,t){var n=Kr(e,["varying","out"]);return n&&n.name===t?n.type:null}(e,r))})),r){_t(i);var d="".concat(vi).concat(r),f="uniform vec2 ".concat(d,";\n"),p="     vec2 ".concat(_i," = transform_getPos(").concat(d,");\n     gl_Position = vec4(").concat(_i,", 0, 1.);\n");c=mi([c,{"vs:#decl":f,"vs:#main-start":p}])}l=h.join("\n")}return{vs:l,targetTextureType:a,inject:c,samplerTextureMap:s}}function xi(e){var t,n,r=e.sourceTextureMap,i=e.targetTextureVarying,o=e.targetTexture,a={};for(var s in i&&(t=o.width,n=o.height,a["".concat(vi).concat(i)]=[t,n]),r){var l=r[s];t=l.width,n=l.height,a["".concat(vi).concat(s)]=[t,n]}return a}var wi=(m(gi={},10241,9728),m(gi,10240,9728),m(gi,10242,33071),m(gi,10243,33071),gi),Si="transform_output",Ai=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return a(e,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e);return Object.assign({},e,t)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceBuffers,r=t.sourceTextures,i=t.framebuffer,o=t.targetTexture,a=Object.assign({},n,e.attributes),s=Object.assign({},e.uniforms),l=Object.assign({},e.parameters),c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var u in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var h=this.samplerTextureMap[u];s[u]=r[h]}this._setSourceTextureParameters();var d=xi({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,d)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:c,parameters:l}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packed,n=void 0!==t&&t,r=this.bindings[this.currentIndex].framebuffer,i=En(r);if(!n)return i;for(var o=i.constructor,a=ei(this.targetTextureType),s=new o(i.length*a/4),l=0,c=0;c<i.length;c+=4)for(var u=0;u<a;u++)s[l++]=i[c+u];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTextureVarying,n=e._swapTexture;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var t=e.sourceTextures,n=e.textureOrReference;if(n instanceof an)return n;var r=t[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,n=e._sourceTextures,r=void 0===n?{}:n,i=e._targetTexture,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!("number"!=typeof e||this.elementCount>=e)){var t=new Float32Array(e);t.forEach((function(e,t,n){n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Zt(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var t=this._swapTextures(this.bindings[this.currentIndex]),n=t.sourceTextures,r=t.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(e,t){var n=t.sourceBuffers,r=t.sourceTextures,i=t.targetTexture;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,n),i){e.targetTexture=i;var o=i.width,a=i.height,s=e.framebuffer;s?(s.update({attachments:m({},36064,i),resizeAttachments:!1}),s.resize({width:o,height:a})):e.framebuffer=new In(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:m({},36064,i)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,t=this.bindings[e].sourceTextures;for(var n in t)t[n].setParameters(wi)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(e){var t,n=function(e,t){_t(e instanceof an||e instanceof Sn||e instanceof An);var n=e.constructor,r=e.gl,i=e.width,o=e.height,a=e.format,s=e.type,l=e.dataFormat,c=e.border,u=e.mipmaps;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:c,mipmaps:u},t))}(e,{parameters:(t={},m(t,10241,9728),m(t,10240,9728),m(t,10242,33071),m(t,10243,33071),t),pixelStore:m({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceTextures,r=t.targetTexture,i=bi({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),o=i.vs,a=i.uniforms,s=i.targetTextureType,l=i.inject,c=i.samplerTextureMap,u=mi([e.inject||{},l]);this.targetTextureType=s,this.samplerTextureMap=c;var h=e._fs||Qr({version:oi(o),input:this.targetTextureVarying,inputType:s,output:Si}),d=this.hasSourceTextures||this.targetTextureVarying?[yi].concat(e.modules||[]):e.modules;return{vs:o,fs:h,modules:d,uniforms:a,inject:u}}}]),e}(),Ei={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function Mi(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":u(e)}var Ci=function(){function e(t){var n=t.name,r=t.vs,o=t.fs,a=t.dependencies,s=void 0===a?[]:a,l=t.uniforms,c=t.getUniforms,u=t.deprecations,h=void 0===u?[]:u,d=t.defines,f=void 0===d?{}:d,p=t.inject,m=void 0===p?{}:p,g=t.vertexShader,y=t.fragmentShader;i(this,e),Xr("string"==typeof n),this.name=n,this.vs=r||g,this.fs=o||y,this.getModuleUniforms=c,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=f,this.injections=function(e){var t={vs:{},fs:{}};for(var n in e){var r=e[n];"string"==typeof r&&(r={order:0,injection:r}),t[n.slice(0,2)][n]=r}return t}(m),l&&(this.uniforms=function(e){var t,n,r={};for(var i in e){var o=(t=e[i],n=void 0,"object"===(n=Mi(t))?t?"type"in t?Object.assign({},t,Ei[t.type]):"value"in t?(n=Mi(t.value),Object.assign({type:n},t,Ei[n])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:n,value:t},Ei[n]));r[i]=o}return r}(l))}return a(e,[{key:"getModuleSource",value:function(e){var t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Xr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=this.uniforms;for(var r in n){var i=n[r];r in e&&!i.private?(i.validate&&Xr(i.validate(e[r],i),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=i.value}return t}}]),e}();function Ti(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Di(e){return function(e){var t={},n={};return ki({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort((function(e,t){return n[t]-n[e]})).map((function(e){return t[e]}))}(Oi(e))}function ki(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o,a=Ti(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;r[s.name]=s,(void 0===i[s.name]||i[s.name]<n)&&(i[s.name]=n)}}catch(e){a.e(e)}finally{a.f()}var l,c=Ti(t);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.dependencies&&ki({modules:u.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(e){c.e(e)}finally{c.f()}}function Oi(e,t){return e.map((function(e){return e instanceof Ci||(Xr("string"!=typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),Xr(e.name,"shader module has no name"),(e=new Ci(e)).dependencies=Oi(e.dependencies)),e}))}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var Ri={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Li={};Object.keys(Ri).forEach((function(e){Li[e]=e}));var Bi={};function zi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Ri[t];if(Xr(r,t),!Ii(n))return!0;if(t in Bi)return Bi[t];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);var l=e.getShaderParameter(s,35713);return e.deleteShader(s),Bi[t]=l,l}function Fi(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return function(e,t){var n=Ri[t];Xr(n,t);var r=function(e){return Boolean(e&&2===e._version)}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return Xr(!1===i||!0===i),i}(e,t)}))}function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ui,ji=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Vi=[].concat(ji,[[/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1"],[/^[ \t]*varying[ \t]+(.+;)/gm,"out $1"]]),Gi=[].concat(ji,[[/^[ \t]*varying[ \t]+(.+;)/gm,"in $1"]]),Hi=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Wi=[].concat(Hi,[[/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1"],[/^[ \t]*out[ \t]+(.+;)/gm,"varying $1"]]),qi=[].concat(Hi,[[/^[ \t]*in[ \t]+/gm,"varying "]]),Zi=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;function Xi(e,t){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ni(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=v(n.value,2),o=i[0],a=i[1];e=e.replace(o,a)}}catch(e){r.e(e)}finally{r.f()}return e}function Yi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ji,Ki="\n\n".concat(ui,"\n\n"),Qi=(m(Ui={},si,"vertex"),m(Ui,li,"fragment"),Ui);function eo(e,t){var n=t.vs,r=t.fs,i=Di(t.modules||[]);return{gl:e,vs:to(e,Object.assign({},t,{source:n,type:si,modules:i})),fs:to(e,Object.assign({},t,{source:r,type:li,modules:i})),getUniforms:no(i)}}function to(e,t){var n=t.id,r=t.source,i=t.type,o=t.modules,a=t.defines,s=void 0===a?{}:a,l=t.hookFunctions,c=void 0===l?[]:l,u=t.inject,h=void 0===u?{}:u,d=t.transpileToGLSL100,f=void 0!==d&&d,p=t.prologue,m=void 0===p||p,g=t.log;Xr("string"==typeof r,"shader source must be a string");var y=i===si,_=r.split("\n"),b=100,x="",w=r;0===_[0].indexOf("#version ")?(b=300,x=_[0],w=_.slice(1).join("\n")):x="#version ".concat(b);var S={};o.forEach((function(e){Object.assign(S,e.getDefines())})),Object.assign(S,s);var A,E=m?"".concat(x,"\n").concat(function(e){var t=e.id,n=e.type;return t&&"string"==typeof t&&-1===e.source.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(Qi[n],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat((A={type:i},"\n#define SHADER_TYPE_".concat(Qi[A.type].toUpperCase(),"\n")),"\n").concat(function(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Fi(e,Li.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Fi(e,Li.GLSL_DERIVATIVES)&&zi(e,Li.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),Fi(e,Li.GLSL_FRAG_DATA)&&zi(e,Li.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),Fi(e,Li.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}return 0===t&&(n+="\n"),n}(S),"\n").concat(y?"":"precision highp float;\n\n","\n"):"".concat(x,"\n"),M=function(e){var t={vs:{},fs:{}};return e.forEach((function(e){var n;"string"!=typeof e?e=(n=e).hook:n={};var r=v((e=e.trim()).split(":"),2),i=r[0],o=r[1],a=e.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})})),t}(c),C={},T={},P={};for(var D in h){var k="string"==typeof h[D]?{injection:h[D],order:0}:h[D],O=D.match(/^(v|f)s:(#)?([\w-]+)$/);if(O){var I=O[2],R=O[3];I?"decl"===R?T[D]=[k]:P[D]=[k]:C[D]=[k]}else P[D]=[k]}var L,B=Yi(o);try{for(B.s();!(L=B.n()).done;){var z=L.value;g&&z.checkDeprecations(w,g),E+=z.getModuleSource(i,b);var F=z.injections[i];for(var N in F){var U=N.match(/^(v|f)s:#([\w-]+)$/);if(U){var j="decl"===U[2]?T:P;j[N]=j[N]||[],j[N].push(F[N])}else C[N]=C[N]||[],C[N].push(F[N])}}}catch(e){B.e(e)}finally{B.f()}return E=pi(E+=Ki,i,T),E+=function(e,t){var n="";for(var r in e){var i=e[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),t[r]){var o=t[r];o.sort((function(e,t){return e.order-t.order}));var a,s=Yi(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;n+="  ".concat(l.injection,"\n")}}catch(e){s.e(e)}finally{s.f()}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(M[i],C),function(e,t,n){switch(t){case 300:return Xi(e,n?Vi:Gi);case 100:return n?Xi(e,Wi):function(e){var t=(e=Xi(e,qi)).match(Zi);if(t){var n=t[1];e=e.replace(Zi,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),"gl_FragColor")}return e}(e);default:throw new Error("unknown GLSL version ".concat(t))}}(E=pi(E+=w,i,P),f?100:b,y)}function no(e){return function(t){var n,r={},i=Yi(e);try{for(i.s();!(n=i.n()).done;){var o=n.value.getUniforms(t,r);Object.assign(r,o)}}catch(e){i.e(e)}finally{i.f()}return r}}var ro=(m(Ji={},5126,_o.bind(null,"uniform1fv",co,1,bo)),m(Ji,35664,_o.bind(null,"uniform2fv",co,2,bo)),m(Ji,35665,_o.bind(null,"uniform3fv",co,3,bo)),m(Ji,35666,_o.bind(null,"uniform4fv",co,4,bo)),m(Ji,5124,_o.bind(null,"uniform1iv",uo,1,bo)),m(Ji,35667,_o.bind(null,"uniform2iv",uo,2,bo)),m(Ji,35668,_o.bind(null,"uniform3iv",uo,3,bo)),m(Ji,35669,_o.bind(null,"uniform4iv",uo,4,bo)),m(Ji,35670,_o.bind(null,"uniform1iv",uo,1,bo)),m(Ji,35671,_o.bind(null,"uniform2iv",uo,2,bo)),m(Ji,35672,_o.bind(null,"uniform3iv",uo,3,bo)),m(Ji,35673,_o.bind(null,"uniform4iv",uo,4,bo)),m(Ji,35674,_o.bind(null,"uniformMatrix2fv",co,4,xo)),m(Ji,35675,_o.bind(null,"uniformMatrix3fv",co,9,xo)),m(Ji,35676,_o.bind(null,"uniformMatrix4fv",co,16,xo)),m(Ji,35678,vo),m(Ji,35680,vo),m(Ji,5125,_o.bind(null,"uniform1uiv",ho,1,bo)),m(Ji,36294,_o.bind(null,"uniform2uiv",ho,2,bo)),m(Ji,36295,_o.bind(null,"uniform3uiv",ho,3,bo)),m(Ji,36296,_o.bind(null,"uniform4uiv",ho,4,bo)),m(Ji,35685,_o.bind(null,"uniformMatrix2x3fv",co,6,xo)),m(Ji,35686,_o.bind(null,"uniformMatrix2x4fv",co,8,xo)),m(Ji,35687,_o.bind(null,"uniformMatrix3x2fv",co,6,xo)),m(Ji,35688,_o.bind(null,"uniformMatrix3x4fv",co,12,xo)),m(Ji,35689,_o.bind(null,"uniformMatrix4x2fv",co,8,xo)),m(Ji,35690,_o.bind(null,"uniformMatrix4x3fv",co,12,xo)),m(Ji,35678,vo),m(Ji,35680,vo),m(Ji,35679,vo),m(Ji,35682,vo),m(Ji,36289,vo),m(Ji,36292,vo),m(Ji,36293,vo),m(Ji,36298,vo),m(Ji,36299,vo),m(Ji,36300,vo),m(Ji,36303,vo),m(Ji,36306,vo),m(Ji,36307,vo),m(Ji,36308,vo),m(Ji,36311,vo),Ji),io={},oo={},ao={},so=[0];function lo(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(so[0]=e,e=so);var i=e.length;if(i%t&&re.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=e[a];return o}function co(e,t){return lo(e,t,Float32Array,io)}function uo(e,t){return lo(e,t,Int32Array,oo)}function ho(e,t){return lo(e,t,Uint32Array,ao)}function fo(e,t,n){var r=ro[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,e,t)}function po(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function mo(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!go(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function go(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||!0===e||!1===e||e instanceof nn||e instanceof un||e instanceof In&&Boolean(e.texture)}function yo(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(e[t])for(var r=e[t],i=0,o=n.length;i<o;++i)r[i]=n[i];else e[t]=n.slice();else e[t]=n}function vo(){var e=null;return function(t,n,r){var i=e!==r;return i&&(t.uniform1i(n,r),e=r),i}}function _o(e,t,n,r){var i=null,o=null;return function(a,s,l){var c=t(l,n),u=c.length,h=!1;if(null===i)i=new Float32Array(u),o=u,h=!0;else{_t(o===u,"Uniform length cannot change.");for(var d=0;d<u;++d)if(c[d]!==i[d]){h=!0;break}}return h&&(r(a,e,s,c),i.set(c)),h}}function bo(e,t,n,r){e[t](n,r)}function xo(e,t,n,r){e[t](n,!1,r)}function wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=e.match(n);return r?r[1]:t}function So(e,t,n,r){for(var i=e.split(/\r?\n/),o={},a={},s=r||wo(t)||"(unnamed)",l="".concat(function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),c=0;c<i.length;c++){var u=i[c];if(!(u.length<=1)){var h=u.split(":"),d=h[0],f=parseInt(h[2],10);if(isNaN(f))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));"WARNING"!==d?o[f]=u:a[f]=u}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map((function(e,r){var o=String(r+t),a=o.length;return Eo(o,i-a)+n+e}))}(t);return{shaderName:l,errors:Ao(o,p),warnings:Ao(a,p)}}function Ao(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var o=e[r+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,c=o.substring(a.join(":").length+1).trim();n+=Eo("^^^ ".concat(s,": ").concat(c,"\n\n"),l)}}return n}function Eo(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}function Mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var Co,To=function(e){c(n,e);var t=Mo(n);function n(e,r){var o;i(this,n),se(e),_t("string"==typeof r.source,"Shader: GLSL source code must be a JavaScript string");var a=wo(r.source,null)||r.id||St("unnamed ".concat(n.getTypeName(r.shaderType)));return(o=t.call(this,e,{id:a})).shaderType=r.shaderType,o.source=r.source,o.initialize(r),o}return a(n,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return _t(!1),"unknown"}}}]),a(n,[{key:"initialize",value:function(e){var t=e.source,n=wo(t,null);n&&(this.id=St(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return wo(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var n=this.gl.getShaderInfoLog(this.handle),r=So(n,this.source,this.shaderType,this.id),i=r.shaderName,o=r.errors,a=r.warnings;throw re.error("GLSL compilation errors in ".concat(i,"\n").concat(o))(),re.warn("GLSL compilation warnings in ".concat(i,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),n}(Dt),Po=function(e){c(n,e);var t=Mo(n);function n(e,r){return i(this,n),"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:35633}))}return a(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(To),Do=function(e){c(n,e);var t=Mo(n);function n(e,r){return i(this,n),"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:35632}))}return a(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(To),ko=5126,Oo=5124,Io=5125,Ro=(m(Co={},ko,[ko,1,"float"]),m(Co,35664,[ko,2,"vec2"]),m(Co,35665,[ko,3,"vec3"]),m(Co,35666,[ko,4,"vec4"]),m(Co,Oo,[Oo,1,"int"]),m(Co,35667,[Oo,2,"ivec2"]),m(Co,35668,[Oo,3,"ivec3"]),m(Co,35669,[Oo,4,"ivec4"]),m(Co,Io,[Io,1,"uint"]),m(Co,36294,[Io,2,"uvec2"]),m(Co,36295,[Io,3,"uvec3"]),m(Co,36296,[Io,4,"uvec4"]),m(Co,35670,[ko,1,"bool"]),m(Co,35671,[ko,2,"bvec2"]),m(Co,35672,[ko,3,"bvec3"]),m(Co,35673,[ko,4,"bvec4"]),m(Co,35674,[ko,8,"mat2"]),m(Co,35685,[ko,8,"mat2x3"]),m(Co,35686,[ko,8,"mat2x4"]),m(Co,35675,[ko,12,"mat3"]),m(Co,35687,[ko,12,"mat3x2"]),m(Co,35688,[ko,12,"mat3x4"]),m(Co,35676,[ko,16,"mat4"]),m(Co,35689,[ko,16,"mat4x2"]),m(Co,35690,[ko,16,"mat4x3"]),Co);function Lo(e){var t=Ro[e];if(!t)return null;var n=v(t,2);return{type:n[0],components:n[1]}}function Bo(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=ko}for(var n in Ro){var r=v(Ro[n],3),i=r[0],o=r[1],a=r[2];if(i===e&&o===t)return{glType:n,name:a}}return null}var zo=function(){function e(t){i(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return a(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),o=i.name,a=i.type,s=i.size,l=t.getAttribLocation(e.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(ae(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var i=t.getTransformFeedbackVarying(e.handle,r),o=i.name,a=i.type,s=i.size;this._addVarying(r,o,a,s)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,n,r){var i=Lo(n),o={type:i.type,size:r*i.components};this._inferProperties(e,t,o);var a={location:e,name:t,accessor:new Ut(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[e]=a,this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var i=Lo(n),o=i.type,a=i.components,s={location:e,name:t,accessor:new Ut({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}();function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var No=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Uo=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),(t=r.call(this,e,n)).stubRemovedMethods("Program","v6.0",No),t._isCached=!1,t.initialize(n),Object.seal(s(t)),t._setId(n.id),t}return a(o,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,n=e.vs,r=e.fs,i=e.varyings,o=e.bufferMode,a=void 0===o?35981:o;return this.hash=t||"",this.vs="string"==typeof n?new Po(this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new Do(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,_t(this.vs instanceof Po),_t(this.fs instanceof Do),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(le(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new zo(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:ne(d(o.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,r=e.drawMode,i=void 0===r?4:r,o=e.vertexCount,a=e.offset,s=void 0===a?0:a,l=e.start,c=e.end,u=e.isIndexed,h=void 0!==u&&u,d=e.indexType,f=void 0===d?5123:d,p=e.instanceCount,m=void 0===p?0:p,g=e.isInstanced,y=void 0===g?m>0:g,v=e.vertexArray,_=void 0===v?null:v,b=e.transformFeedback,x=e.framebuffer,w=e.parameters,S=void 0===w?{}:w,A=e.uniforms,E=e.samplers;if((A||E)&&(re.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(A||{})),re.priority>=n){var M=x?x.id:"default",C="mode=".concat(xt(this.gl,i)," verts=").concat(o," ")+"instances=".concat(m," indexType=").concat(xt(this.gl,f)," ")+"isInstanced=".concat(y," isIndexed=").concat(h," ")+"Framebuffer=".concat(M);re.log(n,C)()}return _t(_),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===o||y&&0===m||(_.bindForDraw(o,m,(function(){if(void 0!==x&&(S=Object.assign({},S,{framebuffer:x})),b){var e=function(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return _t(!1),0}}(i);b.begin(e)}t._bindTextures(),Je(t.gl,S,(function(){h&&y?t.gl2.drawElementsInstanced(i,o,f,s,m):h&&ae(t.gl)&&!isNaN(l)&&!isNaN(c)?t.gl2.drawRangeElements(i,l,c,o,f,s):h?t.gl.drawElements(i,o,f,s):y?t.gl2.drawArraysInstanced(i,s,o,m):t.gl.drawArrays(i,s,o)})),b&&b.end()})),0))}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in re.priority>=2&&mo(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r){var i=n,o=!1;if(i instanceof In&&(i=i.texture),i instanceof nn)if(o=this.uniforms[t]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var a=i,s=r.textureIndex;a.bind(s),i=s,this._textureUniforms[t]=a}else i=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(i)||o)&&yo(this.uniforms,t,n)}}return this}},{key:"_areTexturesRenderable",value:function(){var e=!0;for(var t in this._textureUniforms){var n=this._textureUniforms[t];n.update(),e=e&&n.loaded}return e}},{key:"_bindTextures",value:function(){for(var e in this._textureUniforms){var t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t,n={},r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.gl.getAttachedShaders(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Po({handle:i});break;case 35632:n.fs=new Do({handle:i})}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=St(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),re.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),re.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||re.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=po(n.name).name,i=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=fo(e,i,n),n.size>1)for(var o=0;o<n.size;o++)i=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=fo(e,i,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl2.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}]),o}(Dt);function jo(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Go=function(){function e(t){i(this,e),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return a(e,null,[{key:"getDefaultProgramManager",value:function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager}}]),a(e,[{key:"addDefaultModule",value:function(e){this._defaultModules.find((function(t){return t.name===e.name}))||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((function(e){return e.name!==t})),this.stateHash++}},{key:"addShaderHook",value:function(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.vs,i=void 0===r?"":r,o=n.fs,a=void 0===o?"":o,s=n.defines,l=void 0===s?{}:s,c=n.inject,u=void 0===c?{}:c,h=n.varyings,d=void 0===h?[]:h,f=n.bufferMode,p=void 0===f?35981:f,m=n.transpileToGLSL100,g=void 0!==m&&m,y=this._getModuleList(n.modules),v=this._getHash(i),_=this._getHash(a),b=y.map((function(e){return t._getHash(e.name)})).sort(),x=d.map((function(e){return t._getHash(e)})),w=Object.keys(l).sort(),S=Object.keys(u).sort(),A=[],E=[],M=jo(w);try{for(M.s();!(e=M.n()).done;){var C=e.value;A.push(this._getHash(C)),A.push(this._getHash(l[C]))}}catch(e){M.e(e)}finally{M.f()}var T,P=jo(S);try{for(P.s();!(T=P.n()).done;){var D=T.value;E.push(this._getHash(D)),E.push(this._getHash(u[D]))}}catch(e){P.e(e)}finally{P.f()}var k="".concat(v,"/").concat(_,"D").concat(A.join("/"),"M").concat(b.join("/"),"I").concat(E.join("/"),"V").concat(x.join("/"),"H").concat(this.stateHash,"B").concat(p).concat(g?"T":"");if(!this._programCache[k]){var O=eo(this.gl,{vs:i,fs:a,modules:y,inject:u,defines:l,hookFunctions:this._hookFunctions,transpileToGLSL100:g});this._programCache[k]=new Uo(this.gl,{hash:k,vs:O.vs,fs:O.fs,varyings:d,bufferMode:p}),this._getUniforms[k]=O.getUniforms||function(e){},this._useCounts[k]=0}return this._useCounts[k]++,this._programCache[k]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),n={},r=0,i=0,o=this._defaultModules.length;i<o;++i){var a=this._defaultModules[i],s=a.name;t[r++]=a,n[s]=!0}for(var l=0,c=e.length;l<c;++l){var u=e[l],h=u.name;n[h]||(t[r++]=u,n[h]=!0)}return t.length=r,t}}]),e}(),Ho=null;function Wo(e){if(!e&&!M())return"Node";if(E(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":N.chrome?"Chrome":N.safari?"Safari":N.mozInnerScreenX?"Firefox":"Unknown"}var qo="elements must be GL.ELEMENT_ARRAY_BUFFER",Zo=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,o);var a=n.id||n.program&&n.program.id;return(t=r.call(this,e,Object.assign({},n,{id:a}))).buffer=null,t.bufferValue=null,t.isDefaultArray=n.isDefaultArray||!1,t.gl2=e,t.initialize(n),Object.seal(s(t)),t}return a(o,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t.constantAttributeZero||ae(e)||"Chrome"===Wo()}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new o(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return o.MAX_ATTRIBUTES=o.MAX_ATTRIBUTES||e.getParameter(34921),o.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,t,n){switch(n.constructor){case Float32Array:o._setConstantFloatArray(e,t,n);break;case Int32Array:o._setConstantIntArray(e,t,n);break;case Uint32Array:o._setConstantUintArray(e,t,n);break;default:_t(!1)}}}]),a(o,[{key:"delete",value:function(){return ne(d(o.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _t(!t||34963===t.target,qo),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,i=n.type,o=n.stride,a=n.offset,s=n.normalized,l=n.integer,c=n.divisor,u=this.gl,h=this.gl2;return e=Number(e),this.bind((function(){u.bindBuffer(34962,t.handle),l?(_t(ae(u)),h.vertexAttribIPointer(e,r,i,o,a)):u.vertexAttribPointer(e,r,i,s,o,a),u.enableVertexAttribArray(e),h.vertexAttribDivisor(e,c||0)})),this}},{key:"enable",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!n&&0===e&&!o.isSupported(this.gl,{constantAttributeZero:!0});return r||(e=Number(e),this.bind((function(){return n?t.gl.enableVertexAttribArray(e):t.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t){var n=this._normalizeConstantArrayValue(t),r=n.byteLength*e,i=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new Zt(this.gl,r),o=(o=o||this.buffer.reallocate(r))||!this._compareConstantArrayValues(n,this.bufferValue)){var a=function(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Ho||Ho.byteLength<n)&&(Ho=new ArrayBuffer(n)),Ho),0,t)}(t.constructor,i);!function(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,l=a*s,c=0,u=i;c<s;c++)t[u++]=n[c];for(;c<l;)c<l-c?(t.copyWithin(i+c,i,i+c),c*=2):(t.copyWithin(i+c,i,i+l-c),c=l)}({target:a,source:n,start:0,count:i}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.gl2.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.gl2.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return _t(Number.isFinite(r)),this.bind((function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return o.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:_t(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(_t(ae(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:_t(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(_t(ae(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:_t(!1)}}}]),o}(Dt),Xo=/^(.+)__LOCATION_([0-9]+)$/,Yo=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],$o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Zo(t),Mt(this,"VertexArray","v6.0",Yo),this.initialize(n),Object.seal(this)}return a(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var n in e){var r=e[n];t._setAttribute(n,r)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,o)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n)),i=r.location,o=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new Zt(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof Zt&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof Zt&&e.setBuffer(t,n)}})),this}},{key:"bindForDraw",value:function(e,t,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(e,t),r=n()})),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var i=this,o={location:-1,accessor:null},a=this._getAttributeIndex(e),s=a.location,l=a.name;if(!Number.isFinite(s)||s<0)return this.unused[e]=t,re.once(3,(function(){return"unused value ".concat(e," in ").concat(i.id)}))(),o;var c=this._getAttributeInfo(l||s);if(!c)return o;var u=this.accessors[s]||{},h=Ut.resolve(c.accessor,u,n,r),d=h.size,f=h.type;return _t(Number.isFinite(d)&&Number.isFinite(f)),{location:s,accessor:h}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var n=Xo.exec(e),r=n?n[1]:e,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof Zt)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Zt){var n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var i=t;this.setConstant(e,i)}else{if(!(t.buffer instanceof Zt))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var o=t;this.setBuffer(e,o.buffer,o)}}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(Zo.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){Zo.setConstant(this.gl,e,t)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof Zt){var o=n;if(i){var a=o.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,a)}else{var s=o.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return re.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}();function Jo(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,o=void 0===i?1:i,a="[",s=0;s<e.length&&s<r;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=Ko(e[s],t);var l=e.length>r?"...":"]";return"".concat(a).concat(l)}function Ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=t.isInteger,i=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return Jo(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<n)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var o=e.toPrecision(2),a=o.indexOf(".0");return a===o.length-2?o.slice(0,-1):o}function Qo(e,t,n,r){var i,o,a=e.gl;if(!t)return m(o={},r,"null"),m(o,"Format ","N/A"),o;var s,l,c,u="NOT PROVIDED",h=1,d=0,f=0;if(n&&(u=n.type,h=n.size,s=-1!==(u=String(u).replace("Array","")).indexOf("nt")),t instanceof Zt){var p,g,y=t,v=y.getDebugData(),_=v.data;if(l=v.changed?"*":"",c=_,d=(f=y.byteLength)/_.BYTES_PER_ELEMENT/h,n){var b=n.divisor>0;g="".concat(b?"I ":"P "," ").concat(d," (x").concat(h,"=").concat(f," bytes ").concat(xt(a,u),")")}else s=!0,g="".concat(f," bytes");return m(p={},r,"".concat(l).concat(Ko(c,{size:h,isInteger:s}))),m(p,"Format ",g),p}return c=t,h=t.length,s=-1!==(u=String(t.constructor.name).replace("Array","")).indexOf("nt"),m(i={},r,"".concat(Ko(c,{size:h,isInteger:s})," (constant)")),m(i,"Format ","".concat(h,"x").concat(u," (constant)")),i}function ea(e,t){var n=Bo(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function ta(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?na(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ra(e){var t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,o=e.undefinedOnly,a=void 0!==o&&o;_t(r);var s,l=".*Matrix",c=r._uniformSetters,u={},h=Object.keys(c).sort(),d=0,f=ta(h);try{for(f.s();!(s=f.n()).done;){var p=s.value;p.match(".*_.*")||p.match(l)||ia({table:u,header:n,uniforms:i,uniformName:p,undefinedOnly:a})&&d++}}catch(e){f.e(e)}finally{f.f()}var g,y=ta(h);try{for(y.s();!(g=y.n()).done;){var v=g.value;v.match(l)&&ia({table:u,header:n,uniforms:i,uniformName:v,undefinedOnly:a})&&d++}}catch(e){y.e(e)}finally{y.f()}var _,b=ta(h);try{for(b.s();!(_=b.n()).done;){var x=_.value;u[x]||ia({table:u,header:n,uniforms:i,uniformName:x,undefinedOnly:a})&&d++}}catch(e){b.e(e)}finally{b.f()}var w=0,S={};if(!a)for(var A in i){var E=i[A];u[A]||(w++,S[A]=m({Type:"NOT USED: ".concat(E)},n,Ko(E)))}return{table:u,count:d,unusedTable:S,unusedCount:w}}function ia(e){var t,n=e.table,r=e.header,i=e.uniforms,o=e.uniformName,a=e.undefinedOnly,s=i[o],l=function(e){return null!=e}(s);return!(a&&l||(n[o]=(m(t={},r,l?Ko(s):"N/A"),m(t,"Uniform Type",l?s:"NOT PROVIDED"),t),0))}function oa(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sa(e){var t=e.accessor,n=Bo(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ua={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function ha(e,t){var n=(t||{}).attributeMap,r=void 0===n?ua:n;return r&&r[e]||e}function da(e,t){var n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}_t(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}var fa=function(){},pa={},ma=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var r=n.id,o=void 0===r?St("model"):r;_t(oe(t)),this.id=o,this.gl=t,this.id=n.id||St("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}return a(e,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||Go.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,n=void 0===t?null:t,r=e.vs,i=e.fs,o=e.modules,a=e.defines,s=e.inject,l=e.varyings,c=e.bufferMode,u=e.transpileToGLSL100;this.programProps={program:n,vs:r,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},_t(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var t=e.program,n=e.vs,r=e.fs,i=e.modules,o=e.defines,a=e.inject,s=e.varyings,l=e.bufferMode,c=e.transpileToGLSL100;this.programProps={program:t,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return _t(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return _t(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){var r={},i=t.indices;for(var o in t.attributes){var a=t.attributes[o],s=ha(o,undefined);if("indices"===o)i=a;else if(a.constant)r[s]=a.value;else{var l=a.value,c=ca({},a);delete c.value,r[s]=[new Zt(e,l),c],da(o,c)}}if(i){var u=i.value||i;_t(u instanceof Uint16Array||u instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Zt(e,{data:u,target:34963}),h]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Et(e))return this;var t={};for(var n in e){var r=e[n];t[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return gn(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t,n=e.moduleSettings,r=void 0===n?null:n,i=e.framebuffer,o=e.uniforms,a=void 0===o?{}:o,s=e.attributes,l=void 0===s?{}:s,c=e.transformFeedback,u=void 0===c?this.transformFeedback:c,h=e.parameters,d=void 0===h?{}:h,f=e.vertexArray,p=void 0===f?this.vertexArray:f;this.setAttributes(l),this.updateModuleSettings(r),this.setUniforms(a),re.priority>=2&&(t=this._logDrawCallStart(2));var m=this.vertexArray.getDrawParams(),g=this.props,y=g.isIndexed,v=void 0===y?m.isIndexed:y,_=g.indexType,b=void 0===_?m.indexType:_,x=g.indexOffset,w=void 0===x?m.indexOffset:x,S=g.vertexArrayInstanced,A=void 0===S?m.isInstanced:S;A&&!this.isInstanced&&re.warn("Found instanced attributes on non-instanced model",this.id)();var E=this.isInstanced,M=this.instanceCount,C=this.props,T=C.onBeforeRender,P=void 0===T?fa:T,D=C.onAfterRender,k=void 0===D?fa:D;P(),this.program.setUniforms(this.uniforms);var O=this.program.draw(Object.assign(pa,e,{logPriority:t,uniforms:null,framebuffer:i,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:p,transformFeedback:u,isIndexed:v,indexType:b,isInstanced:E,instanceCount:M,offset:v?w:0}));return k(),re.priority>=2&&this._logDrawCallEnd(t,p,i),O}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,o=void 0===i?[]:i,a=e.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,m({},35977,n))),o.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:a}))}finally{o.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return re.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){if(this._programDirty||this.programManager.stateHash!==this._programManagerState){var e=this.programProps.program;if(e)this._managedProgram=!1;else{var t=this.programProps,n=t.vs,r=t.fs,i=t.modules,o=t.inject,a=t.defines,s=t.varyings,l=t.bufferMode,c=t.transpileToGLSL100;e=this.programManager.get({vs:n,fs:r,modules:i,inject:o,defines:a,varyings:s,bufferMode:l,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}_t(e instanceof Uo,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new $o(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Zt&&t.delete()}}},{key:"_setAnimationProps",value:function(e){this.animated&&_t(e,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Et(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new ni(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),re.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:re.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,r){if(void 0!==e){var i=function(e){var t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=Qo(t,t.elements,null,r));var o=t.values;for(var a in o){var s=t._getAttributeInfo(a);if(s){var l="".concat(a,": ").concat(s.name),c=t.accessors[s.location];c&&(l="".concat(a,": ").concat(ea(s.name,c))),i[l]=Qo(t,o[a],c,r)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=ra({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,l=o.unusedCount,c=ra({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),u=c.table;c.count>0&&re.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&re.log("UNUSED UNIFORMS",Object.keys(s))();var h=function(e){var t,n={},r="Accessors for ".concat(e.id),i=oa(e.attributeInfos);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o){var a=sa(o);n["in ".concat(a)]=m({},r,JSON.stringify(o.accessor))}}}catch(e){i.e(e)}finally{i.f()}var s,l=oa(e.varyingInfos);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c){var u=sa(c);n["out ".concat(u)]=m({},r,JSON.stringify(c.accessor))}}}catch(e){l.e(e)}finally{l.f()}return n}(this.vertexArray.configuration);re.table(e,i)(),re.table(e,a)(),re.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),re.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}();function ga(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ya(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var va=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return a(e,null,[{key:"isSupported",value:function(e){return ae(e)}}]),a(e,[{key:"delete",value:function(){var e=this.model,t=this.bufferTransform,n=this.textureTransform;e&&e.delete(),t&&t.delete(),n&&n.delete()}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRenderTarget,n=void 0===t||t,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var e,t=!1,n=ga([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t||r.swap()}}catch(e){n.e(e)}finally{n.f()}_t(t,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=ga(n);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.getData(t);if(o)return o}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var t,n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=ga(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.update(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new ma(t,Object.assign({},e,{fs:e.fs||Qr({version:oi(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var t,n=Object.assign({},e),r=ga([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(r.s();!(t=r.n()).done;)n=t.value.updateModelProps(n)}catch(e){r.e(e)}finally{r.f()}return n}},{key:"_buildResourceTransforms",value:function(e,t){(function(e){return!(Et(e.feedbackBuffers)&&Et(e.feedbackMap)&&!(e.varyings&&e.varyings.length>0))})(t)&&(this.bufferTransform=new ii(e,t)),function(e){return!(Et(e._sourceTextures)&&!e._targetTexture&&!e._targetTextureVarying)}(t)&&(this.textureTransform=new Ai(e,t)),_t(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var t,n=Object.assign({},e),r=ga([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(r.s();!(t=r.n()).done;){var i=t.value;n=Object.assign(n,i.getDrawOptions(n))}}catch(e){r.e(e)}finally{r.f()}return n}}]),e}();function _a(){}var ba={onStart:_a,onUpdate:_a,onInterrupt:_a,onEnd:_a},xa=function(){function e(t){i(this,e),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return a(e,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},ba,e),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var e=this.timeline,t=this.settings;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),e}();function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ea=function(){function e(t){var n=t.gl,r=t.attribute,o=t.timeline;i(this,e),this.gl=n,this.type="interpolation",this.transition=new xa(o),this.attribute=r,this.attributeInTransition=new Wr(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(e,t){var n=Nr(t.size);return new va(e,{vs:Ma,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var a={byteLength:0,usage:35050};this.buffers=[new Zt(n,a),new Zt(n,a)]}return a(e,[{key:"start",value:function(e,t){if(e.duration<=0)this.transition.cancel();else{this.gl;var n=this.buffers,r=this.attribute;Ur(n);var i,o={numInstances:t,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n);try{for(a.s();!(i=a.n()).done;)Vr(Sa({buffer:i.value},o))}catch(e){a.e(e)}finally{a.f()}this.currentStartIndices=r.startIndices,this.currentLength=jr(r,t),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:n[0],aTo:Fr(0,r)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var e=this.transition.update();if(e){var t=this.transition,n=t.time,r=t.settings,i=r.duration,o=(0,r.easing)(n/i);this.transform.run({uniforms:{time:o}})}return e}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}(),Ma="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Da={interpolation:Ea,spring:function(){function e(t){var n=t.gl,r=t.attribute,o=t.timeline;i(this,e),this.gl=n,this.type="spring",this.transition=new xa(o),this.attribute=r,this.attributeInTransition=new Wr(n,Object.assign({},r.settings,{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(e){return new an(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(e,t){return new In(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:m({},36064,t)})}(n,this.texture),this.transform=function(e,t,n){var r=Nr(t.size);return new va(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var a={byteLength:0,usage:35050};this.buffers=[new Zt(n,a),new Zt(n,a),new Zt(n,a)]}return a(e,[{key:"start",value:function(e,t){this.gl;var n,r=this.buffers,i=this.attribute,o={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(r);try{for(a.s();!(n=a.n()).done;)Vr(Ta({buffer:n.value},o))}catch(e){a.e(e)}finally{a.f()}this.currentStartIndices=i.startIndices,this.currentLength=jr(i,t),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Fr(0,i)}})}},{key:"update",value:function(){var e=this.buffers,t=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Ur(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),En(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}()},ka=function(){function e(t,n){var r=n.id,o=n.timeline;i(this,e),this.id=r,this.gl=t,this.timeline=o,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=va.isSupported(t)}return a(e,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var t=e.attributes,n=e.transitions,r=e.numInstances;for(var i in this.numInstances=r||1,t){var o=t[i],a=o.getTransitionSetting(n);a&&this._updateAttribute(i,o,a)}for(var s in this.transitions){var l=t[s];l&&l.getTransitionSetting(n)||this._removeTransition(s)}}},{key:"hasAttribute",value:function(e){var t=this.transitions[e];return t&&t.inProgress}},{key:"getAttributes",value:function(){var e={};for(var t in this.transitions){var n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var e in this.transitions)this.transitions[e].update()&&(this.needsRedraw=!0);var t=this.needsRedraw;return this.needsRedraw=!1,t}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,t,n){var r=this.transitions[e],i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void K.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);var o=Da[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(K.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}]),e}(),Oa="attributeManager.invalidate",Ia="attributeManager.updateStart",Ra="attributeManager.updateEnd",La=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,o=void 0===r?"attribute-manager":r,a=n.stats,s=n.timeline;i(this,e),this.id=o,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=a,this.attributeTransitionManager=new ka(t,{id:"".concat(o,"-transitions"),timeline:s}),Object.seal(this)}return a(e,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(e,t){this._add(e,t)}},{key:"addInstanced",value:function(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(e,t){var n=this._invalidateTrigger(e,t);Zr(Oa,this,e,n)}},{key:"invalidateAll",value:function(e){for(var t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Zr(Oa,this,"all")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.startIndices,i=void 0===r?null:r,o=e.transitions,a=e.props,s=void 0===a?{}:a,l=e.buffers,c=void 0===l?{}:l,u=e.context,h=void 0===u?{}:u,d=!1;for(var f in Zr(Ia,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var p=this.attributes[f],m=p.settings.accessor;p.startIndices=i,s[f]&&K.removed("props.".concat(f),"data.attributes.".concat(f))(),p.setExternalBuffer(c[f])||p.setBinaryValue(c[m],t.startIndices)||!c[m]&&p.setConstantValue(s[m])||p.needsUpdate()&&(d=!0,this._updateAttribute({attribute:p,numInstances:n,data:t,props:s,context:h})),this.needsRedraw|=p.needsRedraw()}d&&Zr(Ra,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:o})}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},t=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in t){var o=t[i];o.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=o)}return r}},{key:"getShaderAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=this.getAttributes());var n={};for(var r in e)t[r]||Object.assign(n,e[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&K.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var i in e){var o=e[i],a=this._createAttribute(i,o,n);r[i]=a}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,t,n){var r={id:e,constant:t.constant||!1,isIndexed:t.isIndexed||t.elements,size:t.elements?1:t.size,value:t.value||null,divisor:t.instanced||n.instanced?1:t.divisor};return new Wr(this.gl,Object.assign({},t,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={},n=function(n){e.attributes[n].getUpdateTriggers().forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function(e,t){var n=this.attributes,r=this.updateTriggers[e];return r&&r.forEach((function(e){var r=n[e];r&&r.setNeedsUpdate(r.id,t)})),r}},{key:"_updateAttribute",value:function(e){var t=e.attribute,n=e.numInstances;Zr("attribute.updateStart",t),t.allocate(n)&&Zr("attribute.allocate",t,n),t.updateBuffer(e)&&(this.needsRedraw=!0,Zr("attribute.updateEnd",t,n))}}]),e}();var Ba=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"_onUpdate",value:function(){var e=this.time,t=this.settings,n=t.fromValue,r=t.toValue,i=t.duration,o=(0,t.easing)(e/i);this._value=Jn(n,r,o)}},{key:"value",get:function(){return this._value}}]),o}(xa);var za=1e-5;function Fa(e,t,n,r,i){var o=t-e;return(n-t)*i+-o*r+o+t}function Na(e,t){if(Array.isArray(e)){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}function Ua(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ja(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ja(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ha={interpolation:Ba,spring:function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"_onUpdate",value:function(){var e=this.settings,t=e.fromValue,n=e.toValue,r=e.damping,i=e.stiffness,o=this._prevValue,a=void 0===o?t:o,s=this._currValue,l=void 0===s?t:s,c=function(e,t,n,r,i){if(Array.isArray(n)){for(var o=[],a=0;a<n.length;a++)o[a]=Fa(e[a],t[a],n[a],r,i);return o}return Fa(e,t,n,r,i)}(a,l,n,r,i),u=Na(c,n),h=Na(c,l);u<za&&h<za&&(c=n,this.end()),this._prevValue=l,this._currValue=c}},{key:"value",get:function(){return this._currValue}}]),o}(xa)},Wa=function(){function e(t){i(this,e),this.transitions=new Map,this.timeline=t}return a(e,[{key:"add",value:function(e,t,n,r){var i=this.transitions;if(i.has(e)){var o=i.get(e),a=o.value;t=void 0===a?o.settings.fromValue:a,this.remove(e)}if(r=zr(r)){var s=Ha[r.type];if(s){var l=new s(this.timeline);l.start(Ga(Ga({},r),{},{fromValue:t,toValue:n})),i.set(e,l)}else K.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(e){var t=this.transitions;t.has(e)&&(t.get(e).cancel(),t.delete(e))}},{key:"update",value:function(){var e,t={},n=Ua(this.transitions);try{for(n.s();!(e=n.n()).done;){var r=v(e.value,2),i=r[0],o=r[1];o.update(),t[i]=o.value,o.inProgress||this.remove(i)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"clear",value:function(){var e,t=Ua(this.transitions.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.remove(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"active",get:function(){return this.transitions.size>0}}]),e}(),qa="Awaiting state",Za={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},Xa=Za.COMPONENT;function Ya(e,t){if(!e.transitions)return null;var n={},r=es(e);for(var i in e.transitions){var o=r[i],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&Ja(e[i],t[i],o)&&(n[i]=!0)}return n}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,o=e.propTypes,a=void 0===o?{}:o,s=e.triggerName,l=void 0===s?"props":s;if(n===t)return null;if("object"!==u(t)||null===t)return"".concat(l," changed shallowly");if("object"!==u(n)||null===n)return"".concat(l," changed shallowly");for(var c=0,h=Object.keys(t);c<h.length;c++){var d=h[c];if(!(d in i)){if(!(d in n))return"".concat(l,".").concat(d," added");var f=Ja(t[d],n[d],a[d]);if(f)return"".concat(l,".").concat(d," ").concat(f)}}for(var p=0,m=Object.keys(n);p<m.length;p++){var g=m[p];if(!(g in i)){if(!(g in t))return"".concat(l,".").concat(g," dropped");if(!Object.hasOwnProperty.call(t,g)){var y=Ja(t[g],n[g],a[g]);if(y)return"".concat(l,".").concat(g," ").concat(y)}}}return null}function Ja(e,t,n){var r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||!(r=e&&t&&e.equals)||r.call(e,t)?r||t===e?null:"changed shallowly":"changed deeply"}function Ka(e,t){if(null===t)return"oldProps is null, initial diff";var n=t.extensions,r=e.extensions;if(r===n)return!1;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Qa(e,t,n){var r=e.updateTriggers[n];r=null==r?{}:r;var i=t.updateTriggers[n];return $a({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function es(e){var t=e[Xa],n=t&&t.constructor;return n?n._propTypes:{}}function ts(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function ns(e){var t,n={};return function(r){for(var i in r)if(!ts(r[i],n[i])){t=e(r),n=r;break}return t}}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function is(e,t){if(!t)return e;var n=Object.assign({},e,t);if("defines"in t&&(n.defines=Object.assign({},e.defines,t.defines)),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((function(e){return"project64"===e.name})))){var r=n.modules.findIndex((function(e){return"project32"===e.name}));r>=0&&n.modules.splice(r,1)}if("inject"in t)if(e.inject){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.inject);for(var o in t.inject)i[o]=(i[o]||"")+t.inject[o];n.inject=i}else n.inject=t.inject;return n}function os(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,S=i*c-o*l,A=u*m-h*p,E=u*g-d*p,M=u*y-f*p,C=h*g-d*m,T=h*y-f*m,P=d*y-f*g,D=v*P-_*T+b*C+x*M-w*E+S*A;return D?(D=1/D,e[0]=(s*P-l*T+c*C)*D,e[1]=(i*T-r*P-o*C)*D,e[2]=(m*S-g*w+y*x)*D,e[3]=(d*w-h*S-f*x)*D,e[4]=(l*M-a*P-c*E)*D,e[5]=(n*P-i*M+o*E)*D,e[6]=(g*b-p*S-y*_)*D,e[7]=(u*S-d*b+f*_)*D,e[8]=(a*T-s*M+c*A)*D,e[9]=(r*M-n*T-o*A)*D,e[10]=(p*w-m*b+y*v)*D,e[11]=(h*b-u*w-f*v)*D,e[12]=(s*E-a*C-l*A)*D,e[13]=(n*C-r*E+i*A)*D,e[14]=(m*_-p*x-g*v)*D,e[15]=(u*x-h*_+d*v)*D,e):null}function as(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*h+w*m,e[1]=_*i+b*l+x*d+w*g,e[2]=_*o+b*c+x*f+w*y,e[3]=_*a+b*u+x*p+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*h+w*m,e[5]=_*i+b*l+x*d+w*g,e[6]=_*o+b*c+x*f+w*y,e[7]=_*a+b*u+x*p+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*h+w*m,e[9]=_*i+b*l+x*d+w*g,e[10]=_*o+b*c+x*f+w*y,e[11]=_*a+b*u+x*p+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*h+w*m,e[13]=_*i+b*l+x*d+w*g,e[14]=_*o+b*c+x*f+w*y,e[15]=_*a+b*u+x*p+w*v,e}function ss(e,t,n){var r,i,o,a,s,l,c,u,h,d,f,p,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=o*m+c*g+f*y+t[14],e[15]=a*m+u*g+p*y+t[15]),e}function ls(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function cs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e}function us(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e}function hs(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function ds(e,t,n,r){var i,o,a,s,l,c,u,h,d,f,p=t[0],m=t[1],g=t[2],y=r[0],v=r[1],_=r[2],b=n[0],x=n[1],w=n[2];return Math.abs(p-b)<sr&&Math.abs(m-x)<sr&&Math.abs(g-w)<sr?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(u=p-b,h=m-x,d=g-w,i=v*(d*=f=1/Math.hypot(u,h,d))-_*(h*=f),o=_*(u*=f)-y*d,a=y*h-v*u,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=h*a-d*o,l=d*i-u*a,c=u*o-h*i,(f=Math.hypot(s,l,c))?(s*=f=1/f,l*=f,c*=f):(s=0,l=0,c=0),e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=h,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(i*p+o*m+a*g),e[13]=-(s*p+l*m+c*g),e[14]=-(u*p+h*m+d*g),e[15]=1,e)}function fs(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=t[0],_=t[1],b=t[2],x=t[3],w=t[4],S=t[5],A=t[6],E=t[7],M=t[8],C=t[9],T=t[10],P=t[11],D=t[12],k=t[13],O=t[14],I=t[15];return Math.abs(n-v)<=sr*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-_)<=sr*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=sr*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=sr*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=sr*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=sr*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-A)<=sr*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-E)<=sr*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-M)<=sr*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-C)<=sr*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-T)<=sr*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-P)<=sr*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-D)<=sr*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(m-k)<=sr*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(g-O)<=sr*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(y-I)<=sr*Math.max(1,Math.abs(y),Math.abs(I))}function ps(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}!function(){var e=new lr(4);lr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var ms=[0,0,0,0],gs=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ys=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],vs=[0,0,0],_s=[0,0,0],bs=ns((function(e){var t=e.viewport,n=e.devicePixelRatio,r=e.coordinateSystem,i=function(e,t,n){var r=e.viewMatrixUncentered,i=e.projectionMatrix,o=e.viewMatrix,a=e.viewProjectionMatrix,s=ms,l=e.cameraPosition,c=xs(e,t,n),u=c.geospatialOrigin,h=c.shaderCoordinateOrigin;if(c.offsetMode){var d=e.projectPosition(u||h);l=[l[0]-d[0],l[1]-d[1],l[2]-d[2]],d[3]=1,s=ps([],d,a),a=as([],i,o=r||o),a=as([],a,gs)}return{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(t,r,e.coordinateOrigin),o=i.projectionCenter,a=i.viewProjectionMatrix,s=i.cameraPosCommon,l=i.shaderCoordinateOrigin,c=i.geospatialOrigin,u=t.getDistanceScales(),h=[t.width*n,t.height*n],d={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCenter:o,project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:vs,project_uScale:t.scale,project_uViewProjectionMatrix:a,project_uCameraPosition:s};if(c){var f=t.getDistanceScales(c);switch(r){case Q.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=f.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=f.unitsPerMeter2;break;case Q.LNGLAT:case Q.LNGLAT_OFFSETS:d.project_uCommonUnitsPerWorldUnit=f.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=f.unitsPerDegree2;break;case Q.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,f.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,f.unitsPerMeter2[2]]}}return d}));function xs(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_s,i=r,o=!0;switch(n=t===Q.LNGLAT_OFFSETS||t===Q.METER_OFFSETS?r:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case ee.WEB_MERCATOR:t!==Q.LNGLAT&&t!==Q.CARTESIAN||(o=!1);break;case ee.WEB_MERCATOR_AUTO_OFFSET:t===Q.LNGLAT?i=n:t===Q.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],n=e.unprojectPosition(i),i[0]-=r[0],i[1]-=r[1],i[2]-=r[2]);break;case ee.IDENTITY:i=e.position.map(Math.fround);break;case ee.GLOBE:o=!1,n=null;break;default:o=!1}return i[2]=i[2]||0,{geospatialOrigin:n,shaderCoordinateOrigin:i,offsetMode:o}}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,r=void 0===n?1:n,i=e.modelMatrix,o=void 0===i?null:i,a=e.coordinateSystem,s=void 0===a?Q.DEFAULT:a,l=e.coordinateOrigin,c=e.autoWrapLongitude,u=void 0!==c&&c;e.projectionMode,e.positionOrigin,Ar(t),s===Q.DEFAULT&&(s=t.isGeospatial?Q.LNGLAT:Q.CARTESIAN);var h=bs({viewport:t,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:l});return h.project_uWrapLongitude=u,h.project_uModelMatrix=o||ys,h}var Ss=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"toString",value:function(){var e="[";if(qn.printRowMajor){e+="row-major:";for(var t=0;t<this.RANK;++t)for(var n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(var r=0;r<this.ELEMENTS;++r)e+=" ".concat(this[r])}return e+"]"}},{key:"getElementIndex",value:function(e,t){return t*this.RANK+e}},{key:"getElement",value:function(e,t){return this[t*this.RANK+e]}},{key:"setElement",value:function(e,t,n){return this[t*this.RANK+e]=nr(n),this}},{key:"getColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=e*this.RANK,r=0;r<this.RANK;++r)t[r]=this[n+r];return t}},{key:"setColumn",value:function(e,t){for(var n=e*this.RANK,r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}]),o}(er);function As(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Es(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Ms(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Cs(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}!function(){var e=new lr(2);lr!=Float32Array&&(e[0]=0,e[1]=0)}();var Ts=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Ps=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ds=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),ks={},Os=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t;return i(this,o),t=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?t.copy(e):t.identity(),t}return a(o,[{key:"INDICES",get:function(){return Ds}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return ks.IDENTITY=ks.IDENTITY||Object.freeze(new o(Ts)),ks.IDENTITY}},{key:"ZERO",get:function(){return ks.ZERO=ks.ZERO||Object.freeze(new o(Ps)),ks.ZERO}}]),a(o,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}},{key:"set",value:function(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=c,this[10]=u,this[11]=h,this[12]=d,this[13]=f,this[14]=p,this[15]=m,this.check()}},{key:"setRowMajor",value:function(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){return this[0]=e,this[1]=i,this[2]=l,this[3]=d,this[4]=t,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=a,this[10]=u,this[11]=p,this[12]=r,this[13]=s,this[14]=h,this[15]=m,this.check()}},{key:"toRowMajor",value:function(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}},{key:"identity",value:function(){return this.copy(Ts)}},{key:"fromQuaternion",value:function(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,m=o*a,g=o*s,y=o*l;e[0]=1-h-p,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=d+g,e[9]=f-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}},{key:"frustum",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,a=e.near,s=e.far;return s===1/0?o._computeInfinitePerspectiveOffCenter(this,t,n,r,i,a):function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),c=1/(o-a);e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0}(this,t,n,r,i,a,s),this.check()}},{key:"lookAt",value:function(e,t,n){if(1===arguments.length){var r=e;e=r.eye,t=r.center,n=r.up}return ds(this,e,t=t||[0,0,0],n=n||[0,1,0]),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far;return function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1}(this,t,n,r,i,a,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(e){var t=e.fovy,n=void 0===t?45*Math.PI/180:t,r=e.aspect,i=void 0===r?1:r,a=e.focalDistance,s=void 0===a?1:a,l=e.near,c=void 0===l?.1:l,u=e.far,h=void 0===u?500:u;if(n>2*Math.PI)throw Error("radians");var d=n/2,f=s*Math.tan(d),p=f*i;return(new o).ortho({left:-p,right:p,bottom:-f,top:f,near:c,far:h})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=void 0===t?void 0:t,r=e.fov,i=void 0===r?45*Math.PI/180:r,o=e.aspect,a=void 0===o?1:o,s=e.near,l=void 0===s?.1:s,c=e.far,u=void 0===c?500:c;if((n=n||i)>2*Math.PI)throw Error("radians");return hs(this,n,a,l,u),this.check()}},{key:"determinant",value:function(){return t=(e=this)[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],(t*a-n*o)*(h*(g=e[15])-d*m)-(t*s-r*o)*(u*g-d*p)+(t*l-i*o)*(u*m-h*p)+(n*s-r*a)*(c*g-d*f)-(n*l-i*a)*(c*m-h*f)+(r*l-i*s)*(c*p-u*f);var e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"getRotationMatrix3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*o,e}},{key:"transpose",value:function(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}},{key:"invert",value:function(){return os(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return as(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return as(this,this,e),this.check()}},{key:"rotateX",value:function(e){return cs(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=l*r+d*i}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return us(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=v(e,3),n=t[0],r=t[1],i=t[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(e,t){return function(e,t,n,r){var i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A,E,M,C,T=r[0],P=r[1],D=r[2],k=Math.hypot(T,P,D);k<sr||(T*=k=1/k,P*=k,D*=k,i=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],m=t[8],g=t[9],y=t[10],v=t[11],_=T*T*a+o,b=P*T*a+D*i,x=D*T*a-P*i,w=T*P*a-D*i,S=P*P*a+o,A=D*P*a+T*i,E=T*D*a+P*i,M=P*D*a-T*i,C=D*D*a+o,e[0]=s*_+h*b+m*x,e[1]=l*_+d*b+g*x,e[2]=c*_+f*b+y*x,e[3]=u*_+p*b+v*x,e[4]=s*w+h*S+m*A,e[5]=l*w+d*S+g*A,e[6]=c*w+f*S+y*A,e[7]=u*w+p*S+v*A,e[8]=s*E+h*M+m*C,e[9]=l*E+d*M+g*C,e[10]=c*E+f*M+y*C,e[11]=u*E+p*M+v*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?ls(this,this,e):ls(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return ss(this,this,e),this.check()}},{key:"transform",value:function(e,t){return 4===e.length?(rr(t=ps(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}},{key:"transformAsPoint",value:function(e,t){switch(e.length){case 2:t=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}(t||[-0,-0],e,this);break;case 3:t=cr(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return rr(t,e.length),t}},{key:"transformAsVector",value:function(e,t){switch(e.length){case 2:t=function(e,t,n){var r=t[0],i=t[1],o=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/o,e[1]=(n[1]*r+n[5]*i)/o,e}(t||[-0,-0],e,this);break;case 3:t=hr(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return rr(t,e.length),t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"transformPoint",value:function(e,t){return or("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}},{key:"transformVector",value:function(e,t){return or("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}},{key:"transformDirection",value:function(e,t){return or("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(e,t,n,r,i,o){var a=2*o/(n-t),s=2*o/(i-r),l=(n+t)/(n-t),c=(i+r)/(i-r),u=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=c,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=u,e[15]=0,e}}]),o}(Ss);function Is(e,t){var n=ps([],t,e);return function(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n}(n,n,1/n[3]),n}function Rs(e,t){var n=e%t;return n<0?t+n:n}function Ls(e,t,n){return n*t+(1-n)*e}function Bs(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}var zs=Math.PI,Fs=zs/4,Ns=zs/180,Us=180/zs,js=512;function Vs(e){return Math.pow(2,e)}function Gs(e){return Math.log2(e)}function Hs(e){var t=v(e,2),n=t[0],r=t[1];Bs(Number.isFinite(n)),Bs(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var i=r*Ns;return[js*(n*Ns+zs)/(2*zs),js*(zs+Math.log(Math.tan(Fs+.5*i)))/(2*zs)]}function Ws(e){var t=v(e,2),n=t[0],r=t[1],i=n/js*(2*zs)-zs,o=2*(Math.atan(Math.exp(r/js*(2*zs)-zs))-Fs);return[i*Us,o*Us]}function qs(e){var t=e.latitude,n=e.longitude,r=e.highPrecision,i=void 0!==r&&r;Bs(Number.isFinite(t)&&Number.isFinite(n));var o={},a=Math.cos(t*Ns),s=512/360,l=s/a,c=12790407194604047e-21/a;if(o.unitsPerMeter=[c,c,c],o.metersPerUnit=[1/c,1/c,1/c],o.unitsPerDegree=[s,l,c],o.degreesPerUnit=[.703125,1/l,1/c],i){var u=Ns*Math.tan(t*Ns)/a,h=s*u/2,d=12790407194604047e-21*u,f=d/l*c;o.unitsPerDegree2=[0,h,d],o.unitsPerMeter2=[f,0,f]}return o}function Zs(e,t){var n=v(e,3),r=n[0],i=n[1],o=n[2],a=v(t,3),s=a[0],l=a[1],c=a[2],u=qs({longitude:r,latitude:i,highPrecision:!0}),h=u.unitsPerMeter,d=u.unitsPerMeter2,f=Hs(e);f[0]+=s*(h[0]+d[0]*l),f[1]+=l*(h[1]+d[1]*l);var p=Ws(f),m=(o||0)+(c||0);return Number.isFinite(o)||Number.isFinite(c)?[p[0],p[1],m]:p}function Xs(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,o=e.scale,a=e.center,s=void 0===a?null:a,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return ss(l,l,[0,0,-i]),cs(l,l,-n*Ns),us(l,l,r*Ns),ls(l,l,[o/=t,o,o]),s&&ss(l,l,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],s)),l}function Ys(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?1.5:r,o=e.pitch,a=void 0===o?0:o,s=e.nearZMultiplier,l=void 0===s?1:s,c=e.farZMultiplier,u=void 0===c?1:c,h=a*Ns,d=Math.atan(.5/i),f=Math.sin(d)*i/Math.sin(Math.min(Math.max(Math.PI/2-h-d,.01),Math.PI-.01));return{fov:2*d,aspect:t/n,focalDistance:i,near:l,far:(Math.sin(h)*f+i)*u}}function $s(e){var t=e.width,n=e.height,r=e.pitch,i=Ys({width:t,height:n,altitude:e.altitude,pitch:r,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier});return hs([],i.fov,i.aspect,i.near,i.far)}function Js(e,t){var n=v(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return Bs(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),Is(t,[r,i,a,1])}function Ks(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=v(e,3),i=r[0],o=r[1],a=r[2];if(Bs(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){var s=Is(t,[i,o,a,1]);return s}var l=Is(t,[i,o,0,1]),c=Is(t,[i,o,1,1]),u=l[2],h=c[2],d=u===h?0:((n||0)-u)/(h-u);return Cs([],l,c,d)}function Qs(e){var t=e.width,n=e.height,r=e.bounds,i=e.minExtent,o=void 0===i?0:i,a=e.maxZoom,s=void 0===a?24:a,l=e.padding,c=void 0===l?0:l,u=e.offset,h=void 0===u?[0,0]:u,d=v(r,2),f=v(d[0],2),p=f[0],m=f[1],g=v(d[1],2),y=g[0],_=g[1];Number.isFinite(c)?c={top:c,bottom:c,left:c,right:c}:Bs(Number.isFinite(c.top)&&Number.isFinite(c.bottom)&&Number.isFinite(c.left)&&Number.isFinite(c.right));var b=new rl({width:t,height:n,longitude:0,latitude:0,zoom:0}),x=b.project([p,_]),w=b.project([y,m]),S=[Math.max(Math.abs(w[0]-x[0]),o),Math.max(Math.abs(w[1]-x[1]),o)],A=[t-c.left-c.right-2*Math.abs(h[0]),n-c.top-c.bottom-2*Math.abs(h[1])];Bs(A[0]>0&&A[1]>0);var E=A[0]/S[0],M=A[1]/S[1],C=(c.right-c.left)/2/E,T=(c.bottom-c.top)/2/M,P=[(w[0]+x[0])/2+C,(w[1]+x[1])/2+T],D=b.unproject(P),k=Math.min(s,b.zoom+Math.log2(Math.abs(Math.min(E,M))));return Bs(Number.isFinite(k)),{longitude:D[0],latitude:D[1],zoom:k}}var el=Math.PI/180;function tl(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.width,o=e.height,a=e.unproject,s={targetZ:r},l=a([0,o],s),c=a([i,o],s),u=Math.atan(.5/e.altitude),h=(90-e.pitch)*el;return u>h-.01?(t=nl(e,0,r),n=nl(e,i,r)):(t=a([0,0],s),n=a([i,0],s)),[l,c,n,t]}function nl(e,t,n){var r=e.pixelUnprojectionMatrix,i=Is(r,[t,0,1,1]),o=Is(r,[t,e.height,1,1]),a=Ws(Cs([],i,o,(n*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return a[2]=n,a}var rl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},n=t.width,r=t.height,o=t.latitude,a=void 0===o?0:o,s=t.longitude,l=void 0===s?0:s,c=t.zoom,u=void 0===c?0:c,h=t.pitch,d=void 0===h?0:h,f=t.bearing,p=void 0===f?0:f,m=t.altitude,g=void 0===m?1.5:m,y=t.nearZMultiplier,v=void 0===y?.02:y,_=t.farZMultiplier,b=void 0===_?1.01:_;i(this,e),n=n||1,r=r||1;var x=Vs(u);g=Math.max(.75,g);var w=Hs([l,a]);w[2]=0,this.projectionMatrix=$s({width:n,height:r,pitch:d,altitude:g,nearZMultiplier:v,farZMultiplier:b}),this.viewMatrix=Xs({height:r,scale:x,center:w,pitch:d,bearing:p,altitude:g}),this.width=n,this.height=r,this.scale=x,this.latitude=a,this.longitude=l,this.zoom=u,this.pitch=d,this.bearing=p,this.altitude=g,this.center=w,this.distanceScales=qs(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return a(e,[{key:"_initMatrices",value:function(){var e=this.width,t=this.height,n=this.projectionMatrix,r=this.viewMatrix,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];as(i,i,n),as(i,i,r),this.viewProjectionMatrix=i;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ls(o,o,[e/2,-t/2,1]),ss(o,o,[1,-1,0]),as(o,o,i);var a=os([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}},{key:"equals",value:function(t){return t instanceof e&&t.width===this.width&&t.height===this.height&&fs(t.projectionMatrix,this.projectionMatrix)&&fs(t.viewMatrix,this.viewMatrix)}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),o=Js(i,this.pixelProjectionMatrix),a=v(o,2),s=a[0],l=a[1],c=r?l:this.height-l;return 2===e.length?[s,c]:[s,c,o[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=void 0===i?void 0:i,a=v(e,3),s=a[0],l=a[1],c=a[2],u=r?l:this.height-l,h=o&&o*this.distanceScales.unitsPerMeter[2],d=Ks([s,u,c],this.pixelUnprojectionMatrix,h),f=this.unprojectPosition(d),p=v(f,3),m=p[0],g=p[1],y=p[2];return Number.isFinite(c)?[m,g,y]:Number.isFinite(o)?[m,g,o]:[m,g]}},{key:"projectPosition",value:function(e){var t=v(Hs(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=v(Ws(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return Hs(e)}},{key:"unprojectFlat",value:function(e){return Ws(e)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=Ks(e.pos,this.pixelUnprojectionMatrix),r=As([],Hs(t),Ms([],n));return Ws(As([],this.center,r))}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Qs(Object.assign({width:r,height:i,bounds:t},n)),a=o.longitude,s=o.latitude,l=o.zoom;return new e({width:r,height:i,longitude:a,latitude:s,zoom:l})}},{key:"getBounds",value:function(e){var t=this.getBoundingRegion(e),n=Math.min.apply(Math,A(t.map((function(e){return e[0]})))),r=Math.max.apply(Math,A(t.map((function(e){return e[0]}))));return[[n,Math.min.apply(Math,A(t.map((function(e){return e[1]}))))],[r,Math.max.apply(Math,A(t.map((function(e){return e[1]}))))]]}},{key:"getBoundingRegion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tl(this,e.z||0)}}]),e}(),il=85.05113,ol=-85.05113;function al(e){var t=e.width,n=e.height,r=e.longitude,i=e.latitude,o=e.zoom,a=e.pitch,s=void 0===a?0:a,l=e.bearing,c=void 0===l?0:l;(r<-180||r>180)&&(r=Rs(r+180,360)-180),(c<-180||c>180)&&(c=Rs(c+180,360)-180);var u=new rl({width:t,height:n,longitude:r,latitude:i,zoom:o}),h=u.project([r,il])[1],d=u.project([r,ol])[1],f=0;return d-h<n&&(o+=Math.log2(n/(d-h)),h=(u=new rl({width:t,height:n,longitude:r,latitude:i,zoom:o})).project([r,il])[1],d=u.project([r,ol])[1]),h>0?f=h:d<n&&(f=d-n),f&&(i=u.unproject([t/2,n/2+f])[1]),{width:t,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:c}}function sl(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ll(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cl=.01,ul=["longitude","latitude","zoom"],hl={curve:1.414,speed:1.2};function dl(e,t,n){var r,i,o,a=(n=Object.assign({},hl,n)).curve,s=e.zoom,l=[e.longitude,e.latitude],c=Vs(s),u=t.zoom,h=[t.longitude,t.latitude],d=Vs(u-s),f=Hs(l),p=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}([],Hs(h),f),m=Math.max(e.width,e.height),g=m/d,y=(i=(r=p)[0],o=r[1],Math.hypot(i,o)*c),v=Math.max(y,cl),_=a*a,b=(g*g-m*m+_*_*v*v)/(2*m*_*v),x=(g*g-m*m-_*_*v*v)/(2*g*_*v),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(x*x+1)-x);return{startZoom:s,startCenterXY:f,uDelta:p,w0:m,u1:y,S:(S-w)/a,rho:a,rho2:_,r0:w,r1:S}}var fl=Math.PI/180,pl=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ml=[0,0,0],gl={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},yl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.id,r=void 0===n?null:n,o=t.x,a=void 0===o?0:o,s=t.y,l=void 0===s?0:s,c=t.width,u=void 0===c?1:c,h=t.height,d=void 0===h?1:h;this.id=r||this.constructor.displayName||"viewport",this.x=a,this.y=l,this.width=u||1,this.height=d||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return a(e,[{key:"equals",value:function(t){return t instanceof e&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Kn(t.projectionMatrix,this.projectionMatrix)&&Kn(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),o=Js(i,this.pixelProjectionMatrix),a=v(o,2),s=a[0],l=a[1],c=r?l:this.height-l;return 2===e.length?[s,c]:[s,c,o[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=v(e,3),a=o[0],s=o[1],l=o[2],c=r?s:this.height-s,u=i&&i*this.distanceScales.unitsPerMeter[2],h=Ks([a,c,l],this.pixelUnprojectionMatrix,u),d=this.unprojectPosition(h),f=v(d,3),p=f[0],m=f[1],g=f[2];return Number.isFinite(l)?[p,m,g]:Number.isFinite(i)?[p,m,i]:[p,m]}},{key:"projectPosition",value:function(e){var t=v(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=v(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return this.isGeospatial?Hs(e):e}},{key:"unprojectFlat",value:function(e){return this.isGeospatial?Ws(e):e}},{key:"getBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={targetZ:e.z||0},n=this.unproject([0,0],t),r=this.unproject([this.width,0],t),i=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?qs({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o;return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+a}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(e=this.viewProjectionMatrix,(t={}).left=yr(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),t.right=yr(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),t.bottom=yr(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),t.top=yr(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),t.near=yr(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),t.far=yr(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14]),t)),this._frustumPlanes;var e,t}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(e){var t=e.orthographic,n=e.fovyRadians,r=e.aspect,i=e.focalDistance,o=e.near,a=e.far;return t?(new Os).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:a}):(new Os).perspective({fovy:n,aspect:r,near:o,far:a})}},{key:"_initViewMatrix",value:function(e){var t=e.viewMatrix,n=void 0===t?pl:t,r=e.longitude,i=void 0===r?null:r,o=e.latitude,a=void 0===o?null:o,s=e.zoom,l=void 0===s?null:s,c=e.position,u=void 0===c?null:c,h=e.modelMatrix,d=void 0===h?null:h,f=e.focalDistance,p=void 0===f?1:f,m=e.distanceScales,g=void 0===m?null:m;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=l,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function(e){var t=e.latitude;return Bs(Number.isFinite(t)),Gs(4003e4*Math.cos(t*Ns))-9}({latitude:a})+Math.log2(p):0);var y=Math.pow(2,this.zoom);this.scale=y,this.distanceScales=this.isGeospatial?qs({latitude:a,longitude:i}):g||gl,this.focalDistance=p,this.distanceScales.metersPerUnit=new mr(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new mr(this.distanceScales.unitsPerMeter),this.position=ml,this.meterOffset=ml,u&&(this.position=u,this.modelMatrix=d,this.meterOffset=d?d.transformVector(u):u),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a})):this.center=u?this.projectPosition(u):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new Os).multiplyRight(this.viewMatrixUncentered).translate(new mr(this.center||ml).negate())}},{key:"_getCenterInWorld",value:function(e){var t=e.longitude,n=e.latitude,r=this.meterOffset,i=this.distanceScales,o=new mr(this.projectPosition([t,n,0]));if(r){var a=new mr(r).scale(i.unitsPerMeter);o.add(a)}return o}},{key:"_initProjectionMatrix",value:function(e){var t=e.projectionMatrix,n=void 0===t?null:t,r=e.orthographic,i=void 0!==r&&r,o=e.fovyRadians,a=e.fovy,s=void 0===a?75:a,l=e.near,c=void 0===l?.1:l,u=e.far,h=void 0===u?1e3:u,d=e.focalDistance,f=void 0===d?1:d;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:o||s*fl,aspect:this.width/this.height,focalDistance:f,near:c,far:h})}},{key:"_initPixelMatrices",value:function(){var e,t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];as(t,t,this.projectionMatrix),as(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=os([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(e=this.viewMatrixInverse)[12],e[13],e[14]];var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ls(n,n,[this.width/2,-this.height/2,1]),ss(n,n,[1,-1,0]),as(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=os([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||K.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?ee.WEB_MERCATOR:ee.WEB_MERCATOR_AUTO_OFFSET:ee.IDENTITY}}]),e}();function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}yl.displayName="Viewport";var bl,xl=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,o);var n=t.latitude,a=void 0===n?0:n,l=t.longitude,c=void 0===l?0:l,u=t.zoom,h=void 0===u?11:u,d=t.pitch,f=void 0===d?0:d,p=t.bearing,m=void 0===p?0:p,g=t.nearZMultiplier,y=void 0===g?.1:g,v=t.farZMultiplier,_=void 0===v?1.01:v,b=t.orthographic,x=void 0!==b&&b,w=t.repeat,S=void 0!==w&&w,A=t.worldOffset,E=void 0===A?0:A,M=t.width,C=t.height,T=t.altitude,P=void 0===T?1.5:T,D=Math.pow(2,h),k=Ys({width:M=M||1,height:C=C||1,pitch:f,altitude:P=Math.max(.75,P),nearZMultiplier:y,farZMultiplier:_}),O=k.fov,I=k.aspect,R=k.focalDistance,L=k.near,B=k.far,z=Xs({height:C,pitch:f,bearing:m,scale:D,altitude:P});if(E){var F=(new Os).translate([512*E,0,0]);z=F.multiplyLeft(z)}var N=Object.assign({},t,{width:M,height:C,viewMatrix:z,longitude:c,latitude:a,zoom:h,orthographic:x,fovyRadians:O,aspect:I,focalDistance:x?R:1,near:L,far:B});return(e=r.call(this,N)).latitude=a,e.longitude=c,e.zoom=h,e.pitch=f,e.bearing=m,e.altitude=P,e.orthographic=x,e._subViewports=S?[]:null,Object.freeze(s(e)),e}return a(o,[{key:"addMetersToLngLat",value:function(e,t){return Zs(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=Ks(e.pos,this.pixelUnprojectionMatrix),r=As([],this.projectFlat(t),Ms([],n)),i=As([],this.center,r);return this.unprojectFlat(i)}},{key:"getBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=tl(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,r=this.height,i=Qs(Object.assign({width:n,height:r,bounds:e},t)),a=i.longitude,s=i.latitude,l=i.zoom;return new o({width:n,height:r,longitude:a,latitude:s,zoom:l})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360),r=t;r<=n;r++){var i=r?new o(_l(_l({},this),{},{worldOffset:r})):this;this._subViewports.push(i)}return this._subViewports}}]),o}(yl);function wl(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.projectPosition(e);if(n&&t instanceof xl){var i=v(e,3),o=i[0],a=i[1],s=i[2],l=void 0===s?0:s,c=t.getDistanceScales([o,a]);r[2]=l*c.unitsPerMeter[2]}return r}function Sl(e,t){var n=t.viewport,r=t.modelMatrix,i=t.coordinateSystem,o=t.coordinateOrigin,a=t.offsetMode,s=v(e,3),l=s[0],c=s[1],u=s[2],h=void 0===u?0:u;if(r){var d=v(ps([],[l,c,h,1],r),3);l=d[0],c=d[1],h=d[2]}switch(i){case Q.LNGLAT:return wl([l,c,h],n,a);case Q.LNGLAT_OFFSETS:return wl([l+o[0],c+o[1],h+(o[2]||0)],n,a);case Q.METER_OFFSETS:return wl(Zs(o,[l,c,h]),n,a);case Q.CARTESIAN:default:return n.isGeospatial?[l+o[0],c+o[1],h+o[2]]:n.projectPosition([l,c,h])}}function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}xl.displayName="WebMercatorViewport";var Ml=(m(bl={},10241,9987),m(bl,10240,9729),m(bl,10242,33071),m(bl,10243,33071),bl),Cl={},Tl={boolean:{validate:function(e,t){return!0},equal:function(e,t,n){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return t.optional&&!e||Ol(e)&&(3===e.length||4===e.length)},equal:function(e,t,n){return Pl(e,t)}},accessor:{validate:function(e,t){var n=Il(e);return"function"===n||n===Il(t.value)},equal:function(e,t,n){return"function"==typeof t||Pl(e,t)}},array:{validate:function(e,t){return t.optional&&!e||Ol(e)},equal:function(e,t,n){return n.compare?Pl(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"==typeof e},equal:function(e,t,n){return!n.compare||e===t}},data:{transform:function(e,t,n){var r=(n?n.props:{}).dataTransform;return r&&e?r(e):e}},image:{transform:function(e,t,n){return function(e,t){var n=e.context&&e.context.gl;if(!n||!t)return null;if(t instanceof an)return t;t.constructor&&"Object"!==t.constructor.name&&(t={data:t});var r=null;t.compressed&&(r=m({},10241,t.data.length>1?9985:9729));var i=new an(n,El(El({},t),{},{parameters:El(El(El({},Ml),r),e.props.textureParameters)}));return Cl[i.id]=!0,i}(n,e)},release:function(e){var t;(t=e)&&t instanceof an&&Cl[t.id]&&(t.delete(),delete Cl[t.id])}}};function Pl(e,t){if(e===t)return!0;if(!Ol(e)||!Ol(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Dl(e,t){switch(Il(t)){case"object":return kl(e,t);case"array":return kl(e,{type:"array",value:t,compare:!1});case"boolean":return kl(e,{type:"boolean",value:t});case"number":return kl(e,{type:"number",value:t});case"function":return kl(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function kl(e,t){return"type"in t?Object.assign({name:e},Tl[t.type],t):"value"in t?Object.assign({name:e,type:Il(t.value)},t):{name:e,type:"object",value:t}}function Ol(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Il(e){return Ol(e)?"array":null===e?"null":u(e)}function Rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ll=Za.COMPONENT,Bl=Za.ASYNC_ORIGINAL,zl=Za.ASYNC_RESOLVED,Fl=Za.ASYNC_DEFAULTS;function Nl(){var e=this,t=Ul(e.constructor),n=Object.create(t);n[Ll]=e,n[Bl]={},n[zl]={};for(var r=0;r<arguments.length;++r){var i=arguments[r];for(var o in i)n[o]=i[o]}return Object.freeze(n),n}function Ul(e){return Gl(e,"_mergedDefaultProps")||(function(e){if(e.prototype){var t=Object.getPrototypeOf(e),n=Ul(t),r=function(e){for(var t={},n={},r={},i=0,o=Object.entries(e);i<o.length;i++){var a=v(o[i],2),s=a[0],l=a[1];if(l&&l.deprecatedFor)r[s]=Array.isArray(l.deprecatedFor)?l.deprecatedFor:[l.deprecatedFor];else{var c=Dl(s,l);t[s]=c,n[s]=c.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(Gl(e,"defaultProps")||{}),i=function(e,t,n){var r=Object.create(null);Object.assign(r,t,e);var i=function(e){var t=Gl(e,"layerName")||Gl(e,"componentName");return t||K.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}(n);return delete e.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,e),o=Object.assign({},t._propTypes,r.propTypes);!function(e,t){var n={},r={};for(var i in t){var o=t[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=jl(a))}e[Fl]=n,e[Bl]={},Object.defineProperties(e,r)}(i,o);var a=Object.assign({},t._deprecatedProps,r.deprecatedProps);(function(e,t){var n=function(n){Object.defineProperty(e,n,{enumerable:!1,set:function(e){var r,i="".concat(this.id,": ").concat(n),o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t[n]);try{for(o.s();!(r=o.n()).done;){var a=r.value;Vl(this,a)||(this[a]=e)}}catch(e){o.e(e)}finally{o.f()}K.deprecated(i,t[n].join("/"))()}})};for(var r in t)n(r)})(i,a),e._mergedDefaultProps=i,e._propTypes=o,e._deprecatedProps=a}}(e),e._mergedDefaultProps)}function jl(e){return{enumerable:!0,set:function(t){"string"==typeof t||t instanceof Promise||Cr(t)?this[Bl][e]=t:this[zl][e]=t},get:function(){if(this[zl]){if(e in this[zl])return this[zl][e]||this[Fl][e];if(e in this[Bl]){var t=this[Ll]&&this[Ll].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Fl][e]}}return this[Fl][e]}}}function Vl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gl(e,t){return Vl(e,t)&&e[t]}function Hl(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var Wl=Za.ASYNC_ORIGINAL,ql=Za.ASYNC_RESOLVED,Zl=Za.ASYNC_DEFAULTS,Xl=Object.freeze({}),Yl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,e),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=Xl,this.oldAsyncProps=null}var t;return a(e,[{key:"finalize",value:function(){for(var e in this.asyncProps){var t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){if(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(var n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}},{key:"reloadAsyncProp",value:function(e,t){this._watchPromise(e,Promise.resolve(t))}},{key:"setAsyncProps",value:function(e){var t=e[ql]||{},n=e[Wl]||e,r=e[Zl]||{};for(var i in t){var o=t[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,o),t[i]=this.getAsyncProp(i)}for(var a in n){var s=n[a];this._createAsyncPropData(a,r[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var n=this.layer&&this.layer.props.fetch;n&&(t=n(t,{propName:e,layer:this.layer}))}t instanceof Promise?this._watchPromise(e,t):Cr(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function(e,t){var n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}},{key:"_setPropValue",value:function(e,t){var n=this.asyncProps[e];t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,t,n){var r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function(e,t){var n=this,r=this.asyncProps[e];r.pendingLoadCount++;var i=r.pendingLoadCount;t.then((function(t){t=n._postProcessValue(r,t),n._setAsyncPropValue(e,t,i);var o=n.layer&&n.layer.props.onDataLoad;"data"===e&&o&&o(t,{propName:e,layer:n.layer})})).catch((function(e){return K.error(e)()}))}},{key:"_resolveAsyncIterable",value:(t=xn(_n().mark((function e(t,n){var r,i,o,a,s,l,c,u,h,d,f,p,m,g;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,n),(r=this.asyncProps[t]).pendingLoadCount++,i=r.pendingLoadCount,o=[],a=0,s=!0,l=!1,e.prev=8,u=Hl(n);case 10:return e.next=12,u.next();case 12:return h=e.sent,s=h.done,e.next=16,h.value;case 16:if(d=e.sent,s){e.next=27;break}f=d,p=this.component?this.component.props:{},m=p.dataTransform,o=m?m(f,o):o.concat(f),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i);case 24:s=!0,e.next=10;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(8),l=!0,c=e.t0;case 33:if(e.prev=33,e.prev=34,s||null==u.return){e.next=38;break}return e.next=38,u.return();case 38:if(e.prev=38,!l){e.next=41;break}throw c;case 41:return e.finish(38);case 42:return e.finish(33);case 43:(g=this.layer&&this.layer.props.onDataLoad)&&g(o,{propName:t,layer:this.layer});case 45:case"end":return e.stop()}}),e,this,[[8,29,33,43],[34,,38,42]])}))),function(e,n){return t.apply(this,arguments)})},{key:"_postProcessValue",value:function(e,t){var n=e.type;return n&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}},{key:"_createAsyncPropData",value:function(e,t){if(!this.asyncProps[e]){var n=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}]),e}(),$l=Za.ASYNC_ORIGINAL,Jl=Za.ASYNC_RESOLVED,Kl=Za.ASYNC_DEFAULTS,Ql=0,ec=function(){function e(){i(this,e),this.props=Nl.apply(this,arguments),this.id=this.props.id,this.count=Ql++,this.lifecycle=qa,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return a(e,[{key:"clone",value:function(e){var t=this.props,n={};for(var r in t[Kl])r in t[Jl]?n[r]=t[Jl][r]:r in t[$l]&&(n[r]=t[$l][r]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function(){this.internalState=new Yl({})}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();ec.componentName="Component",ec.defaultProps={};var tc=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=e.attributeManager,a=e.layer;return i(this,o),(t=r.call(this,a)).attributeManager=n,t.model=null,t.needsRedraw=!0,t.subLayers=null,t}return a(o,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),o}(Yl),nc=function(e){return"function"==typeof e},rc=function(e){return null!==e&&"object"===u(e)},ic=function(e){return rc(e)&&e.constructor==={}.constructor},oc=function(e){return e&&"function"==typeof e[Symbol.iterator]},ac=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]},sc=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json},lc=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},cc=function(e){return function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||rc(e)&&nc(e.tee)&&nc(e.cancel)&&nc(e.getReader)}(e)||function(e){return rc(e)&&nc(e.read)&&nc(e.pipe)&&function(e){return"boolean"==typeof e}(e.readable)}(e)};function uc(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fc(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);var t=e.parseTextSync||e.parseSync||e.parse||e.parseStream||e.parseInBatches,n=e.options&&e.options[e.id];return t||n&&n.workerUrl}function pc(e){var t;return uc(e,"null loader"),uc(fc(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=dc(dc({},e=e[0]),{},{options:dc(dc({},e.options),t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),uc(e.extensions&&e.extensions.length>0&&e.extensions[0]),(e.parseTextSync||e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}var mc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n.g&&n.g,document:"undefined"!=typeof document&&document},gc=mc.global||mc.self||mc.window,yc="object"!==("undefined"==typeof process?"undefined":u(process))||"[object process]"!==String(process)||process.browser,vc="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),_c=vc&&parseFloat(vc[1])||0,bc={};function xc(e){for(var t in bc)if(e.startsWith(t)){var n=bc[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat("").concat(e)),e}var wc=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Sc=/^([-\w.]+\/[-\w.+]+)/;function Ac(e){if("string"!=typeof e)return"";var t=e.match(wc);return t?t[1]:""}var Ec=/\?.*/;function Mc(e){if(sc(e)){var t=function(e){if("string"!=typeof e)return"";var t=e.match(Sc);return t?t[1]:e}(e.headers.get("content-type")),n=Ac(e.url);return{url:Tc(e.url||""),type:t||n||null}}return lc(e)?{url:Tc(e.name||""),type:e.type||""}:"string"==typeof e?{url:Tc(e),type:Ac(e)}:{url:"",type:""}}function Cc(e){return sc(e)?e.headers["content-length"]||-1:lc(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function Tc(e){return e.replace(Ec,"")}function Pc(e){return Dc.apply(this,arguments)}function Dc(){return(Dc=xn(_n().mark((function e(t){var n,r,i,o,a,s,l;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sc(t)){e.next=2;break}return e.abrupt("return",t);case 2:return n={},(r=Cc(t))>=0&&(n["content-length"]=String(r)),i=Mc(t),o=i.url,(a=i.type)&&(n["content-type"]=a),e.next=9,Lc(t);case 9:return(s=e.sent)&&(n["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t)),l=new Response(t,{headers:n}),Object.defineProperty(l,"url",{value:o}),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kc(e){return Oc.apply(this,arguments)}function Oc(){return(Oc=xn(_n().mark((function e(t){var n;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,Ic(t);case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ic(e){return Rc.apply(this,arguments)}function Rc(){return(Rc=xn(_n().mark((function e(t){var n,r,i;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,r=t.headers.get("Content-Type"),i=t.statusText,!r.includes("application/json")){e.next=11;break}return e.t0=i,e.t1=" ",e.next=9,t.text();case 9:e.t2=e.sent,i=e.t0+=e.t1.concat.call(e.t1,e.t2);case 11:n=(n+=i).length>60?"".concat(n.slice(60),"..."):n,e.next=17;break;case 15:e.prev=15,e.t3=e.catch(1);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function Lc(e){return Bc.apply(this,arguments)}function Bc(){return(Bc=xn(_n().mark((function e(t){var n,r,i,o;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=5,"string"!=typeof t){e.next=3;break}return e.abrupt("return","data:,".concat(t.slice(0,n)));case 3:if(!(t instanceof Blob)){e.next=8;break}return r=t.slice(0,5),e.next=7,new Promise((function(e){var t=new FileReader;t.onload=function(t){return e(t.target&&t.target.result)},t.readAsDataURL(r)}));case 7:return e.abrupt("return",e.sent);case 8:if(!(t instanceof ArrayBuffer)){e.next=12;break}return i=t.slice(0,n),o=zc(i),e.abrupt("return","data:base64,".concat(o));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zc(e){for(var t="",n=new Uint8Array(e),r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function Fc(e){return Nc.apply(this,arguments)}function Nc(){return(Nc=xn(_n().mark((function e(t){var n;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,!t.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,t.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=t.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Uc(e){return jc.apply(this,arguments)}function jc(){return(jc=xn(_n().mark((function e(t){var n,r,i=arguments;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof t){e.next=5;break}return e.next=4,Pc(t);case 4:return e.abrupt("return",e.sent);case 5:return t=xc(t),e.next=8,fetch(t,n);case 8:if((r=e.sent).ok||!n.throws){e.next=15;break}return e.t0=Error,e.next=13,Fc(r);case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vc=function(){function e(){i(this,e)}return a(e,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),e}();function Gc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Hc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wc(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zc={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function e(){i(this,e),this.console=console}return a(e,[{key:"log",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.log).bind.apply(e,[this.console].concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.info).bind.apply(e,[this.console].concat(n))}},{key:"warn",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.warn).bind.apply(e,[this.console].concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.error).bind.apply(e,[this.console].concat(n))}}]),e}()),metadata:!1,transforms:[],reuseWorkers:!0},Xc={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},Yc=function(){gc.loaders=gc.loaders||{};var e=gc.loaders;return e._state=e._state||{},e._state},$c=function(){var e=Yc();return e.globalOptions=e.globalOptions||qc({},Zc),e.globalOptions};function Jc(e,t,n,r){return n=n||[],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;Qc(e,null,n,Zc,Xc,t);var r,i=Gc(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=e&&e[o.id]||{},s=o.options&&o.options[o.id]||{},l=o.defaultOptions&&o.defaultOptions[o.id]||{};Qc(a,o.id,n,s,l,t)}}catch(e){i.e(e)}finally{i.f()}}(e,n=Array.isArray(n)?n:[n]),function(e,t,n){var r=qc({},e.options||{});return null===r.log&&(r.log=new Vc),tu(r,$c()),tu(r,t),function(e,t){t&&!e.baseUri&&(e.baseUri=t)}(r,n),r}(t,e,r)}function Kc(e,t){var n=$c(),r=e.fetch||n.fetch;return"function"==typeof r?r:rc(r)?function(e){return Uc(e,r)}:t&&t.fetch?t.fetch:function(t){return Uc(t,e)}}function Qc(e,t,n,r,i,o){var a=t||"Top level",s=t?"".concat(t,"."):"";for(var l in e){var c=!t&&rc(e[l]);if(!(l in r))if(l in i)n.warn("".concat(a," loader option '").concat(s).concat(l,"' deprecated, use '").concat(i[l],"'"));else if(!c){var u=eu(l,o);n.warn("".concat(a," loader option '").concat(s).concat(l,"' not recognized. ").concat(u))}}}function eu(e,t){var n,r=e.toLowerCase(),i="",o=Gc(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;for(var s in a.options){if(e===s)return"Did you mean '".concat(a.id,".").concat(s,"'?");var l=s.toLowerCase();(r.startsWith(l)||l.startsWith(r))&&(i=i||"Did you mean '".concat(a.id,".").concat(s,"'?"))}}}catch(e){o.e(e)}finally{o.f()}return i}function tu(e,t){for(var n in t)if(n in t){var r=t[n];ic(r)&&ic(e[n])?e[n]=qc(qc({},e[n]),t[n]):e[n]=t[n]}}var nu="2.3.11";function ru(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nu;uc(e,"no loader provided");var n=e.version;t&&n&&(t=iu(t),n=iu(n))}function iu(e){var t=e.split(".").map(Number);return{major:t[0],minor:t[1]}}var ou=n(6561);function au(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return su(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?su(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function su(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lu(e){if(ou.toArrayBuffer&&(e=ou.toArrayBuffer(e)),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return e&&"object"===u(e)&&e._toArrayBuffer?e._toArrayBuffer():uc(!1)}function cu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t.map((function(e){return e instanceof ArrayBuffer?new Uint8Array(e):e})),o=i.reduce((function(e,t){return e+t.byteLength}),0),a=new Uint8Array(o),s=0,l=au(i);try{for(l.s();!(r=l.n()).done;){var c=r.value;a.set(c,s),s+=c.byteLength}}catch(e){l.e(e)}finally{l.f()}return a.buffer}function uu(e){return hu.apply(this,arguments)}function hu(){return(hu=xn(_n().mark((function e(t){var n,r,i,o,a,s,l,c,u;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],i=!0,o=!1,e.prev=4,s=Hl(t);case 6:return e.next=8,s.next();case 8:return l=e.sent,i=l.done,e.next=12,l.value;case 12:if(c=e.sent,i){e.next=19;break}"string"==typeof(u=c)?r.push(u):n.push(u);case 16:i=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),o=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,i||null==s.return){e.next=30;break}return e.next=30,s.return();case 30:if(e.prev=30,!o){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:if(!(r.length>0)){e.next=38;break}return uc(0===n.length),e.abrupt("return",r.join(""));case 38:return e.abrupt("return",cu.apply(void 0,n));case 39:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}var du=_n().mark(fu);function fu(e){var t,n,r,i,o,a,s,l=arguments;return _n().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:t=l.length>1&&void 0!==l[1]?l[1]:{},n=t.chunkSize,r=void 0===n?262144:n,i=0,o=new TextEncoder;case 4:if(!(i<e.length)){c.next=12;break}return a=Math.min(e.length-i,r),s=e.slice(i,i+a),i+=a,c.next=10,o.encode(s);case 10:c.next=4;break;case 12:case"end":return c.stop()}}),du)}var pu=_n().mark(mu);function mu(e){var t,n,r,i,o,a,s,l=arguments;return _n().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:t=l.length>1&&void 0!==l[1]?l[1]:{},n=t.chunkSize,r=void 0===n?262144:n,i=0;case 3:if(!(i<e.byteLength)){c.next=14;break}return o=Math.min(e.byteLength-i,r),a=new ArrayBuffer(o),s=new Uint8Array(e,i,o),new Uint8Array(a).set(s),i+=o,c.next=12,a;case 12:c.next=3;break;case 14:case"end":return c.stop()}}),pu)}function gu(e){this.wrapped=e}function yu(e){return new gu(e)}function vu(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof gu;Promise.resolve(s?a.wrapped:a).then((function(e){s?r("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function _u(e){return function(){return new vu(e.apply(this,arguments))}}"function"==typeof Symbol&&Symbol.asyncIterator&&(vu.prototype[Symbol.asyncIterator]=function(){return this}),vu.prototype.next=function(e){return this._invoke("next",e)},vu.prototype.throw=function(e){return this._invoke("throw",e)},vu.prototype.return=function(e){return this._invoke("return",e)};var bu=1048576;function xu(e){return wu.apply(this,arguments)}function wu(){return(wu=_u(_n().mark((function e(t){var n,r,i,o,a,s=arguments;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},r=n.chunkSize||bu,i=0;case 3:if(!(i<t.size)){e.next=13;break}return o=i+r,e.next=7,yu(Su(t,i,o));case 7:return a=e.sent,i=o,e.next=11,a;case 11:e.next=3;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t,n){return Au.apply(this,arguments)}function Au(){return(Au=xn(_n().mark((function e(t,n,r){return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){var o=t.slice(n,r),a=new FileReader;a.onload=function(t){return e(t.target&&t.target.result)},a.onerror=function(e){return i(e)},a.readAsArrayBuffer(o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eu(e){if(yc||_c>=10){if("function"==typeof e[Symbol.asyncIterator])return function(e){return Mu.apply(this,arguments)}(e);if("function"==typeof e.getIterator)return e.getIterator()}return yc?function(e){return Cu.apply(this,arguments)}(e):function(e){return Tu.apply(this,arguments)}(e)}function Mu(){return(Mu=_u(_n().mark((function e(t){var n,r,i,o,a,s,l;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,e.prev=2,o=Hl(t);case 4:return e.next=6,yu(o.next());case 6:return a=e.sent,n=a.done,e.next=10,yu(a.value);case 10:if(s=e.sent,n){e.next=18;break}return l=s,e.next=15,lu(l);case 15:n=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),r=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,n||null==o.return){e.next=29;break}return e.next=29,yu(o.return());case 29:if(e.prev=29,!r){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function Cu(){return(Cu=_u(_n().mark((function e(t){var n,r,i,o;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getReader(),e.prev=1;case 2:return e.next=5,yu(n.read());case 5:if(r=e.sent,i=r.done,o=r.value,!i){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,lu(o);case 12:e.next=2;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n.releaseLock();case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function Tu(){return(Tu=_u(_n().mark((function e(t){var n;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(t);case 2:t=e.sent;case 3:if(null===(n=t.read())){e.next=9;break}return e.next=8,lu(n);case 8:return e.abrupt("continue",3);case 9:if(!t._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,yu(Pu(t));case 13:e.next=3;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e){return Du.apply(this,arguments)}function Du(){return(Du=xn(_n().mark((function e(t){return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.once("readable",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?fu(e,t):e instanceof ArrayBuffer?mu(e,t):lc(e)?xu(e,t):cc(e)?Eu(e):sc(e)?Eu(e.body):uc(!1)}var Ou="Cannot convert supplied data type";function Iu(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer){var n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)||(o=e)&&"object"===u(o)&&o.isBuffer){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);var r=e.buffer,i=e.byteLength||e.length;return 0===e.byteOffset&&i===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+i)),r}var o;throw new Error(Ou)}function Ru(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=xn(_n().mark((function e(t,n){var r,i;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!r){e.next=3;break}return e.abrupt("return",Iu(t,n));case 3:if(!lc(t)){e.next=7;break}return e.next=6,Pc(t);case 6:t=e.sent;case 7:if(!sc(t)){e.next=21;break}return i=t,e.next=11,kc(i);case 11:if(!n.binary){e.next=17;break}return e.next=14,i.arrayBuffer();case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,i.text();case 19:e.t0=e.sent;case 20:return e.abrupt("return",e.t0);case 21:if(cc(t)&&(t=ku(t)),!oc(t)&&!ac(t)){e.next=24;break}return e.abrupt("return",uu(t));case 24:throw new Error(Ou);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n||(e=zu({fetch:Kc(t||{},e)},e),Array.isArray(e.loaders)||(e.loaders=null),e)}function Nu(e,t){if(!t&&e&&!Array.isArray(e))return e;var n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){var r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[].concat(A(n),A(r)):r}return n&&n.length?n:null}var Uu=new Map;function ju(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||new Set;if(e)if(Vu(e))r.add(e);else if(Vu(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===u(e))for(var i in e)ju(e[i],t,r);return void 0===n?Array.from(r):[]}function Vu(e){return!!e&&(e instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&e instanceof MessagePort||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)}var Gu=0;function Hu(e){var t=e.data;(0,e.resolve)(t)}var Wu=function(){function e(t){var n=t.source,r=t.name,o=void 0===r?"web-worker-".concat(Gu++):r,a=t.onMessage;i(this,e);var s=function(e){if(uc("string"==typeof e,"worker source"),e.startsWith("url(")&&e.endsWith(")")){var t=e.match(/^url\((.*)\)$/)[1];if(t&&!t.startsWith("http"))return t;e=function(e){return"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n}")}(t)}var n=Uu.get(e);if(!n){var r=new Blob([e],{type:"application/javascript"});n=URL.createObjectURL(r),Uu.set(e,n)}return n}(n);this.worker=new Worker(s,{name:o}),this.name=o,this.onMessage=a||Hu}var t;return a(e,[{key:"process",value:(t=xn(_n().mark((function e(t){var n=this;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.worker.onmessage=function(t){n.onMessage({worker:n.worker,data:t.data,resolve:e,reject:r})},n.worker.onerror=function(e){var t="".concat(n.name,": WorkerThread.process() failed");e.message&&(t+=" ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));var i=new Error(t);console.error(e),r(i)};var i=ju(t);n.worker.postMessage(t,i)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}(),qu=function(){function e(t){var n=t.source,r=t.name,o=void 0===r?"unnamed":r,a=t.maxConcurrency,s=void 0===a?1:a,l=t.onMessage,c=t.onDebug,u=void 0===c?function(){}:c,h=t.reuseWorkers,d=void 0===h||h;i(this,e),this.source=n,this.name=o,this.maxConcurrency=s,this.onMessage=l,this.onDebug=u,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=d}var t;return a(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(e,t){var n=this;return new Promise((function(r,i){n.jobQueue.push({data:e,jobName:t,resolve:r,reject:i}),n._startQueuedJob()}))}},{key:"_startQueuedJob",value:(t=xn(_n().mark((function e(){var t,n;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:return n=this.jobQueue.shift(),this.onDebug({message:"processing",worker:t.name,job:n.jobName,backlog:this.jobQueue.length}),e.prev=7,e.t0=n,e.next=11,t.process(n.data);case 11:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(7),n.reject(e.t2);case 18:return e.prev=18,this._onWorkerDone(t),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,15,18,21]])}))),function(){return t.apply(this,arguments)})},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.reuseWorkers?this.idleQueue.push(e):(e.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Wu({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),e}(),Zu=function(){function e(t){var n=t.maxConcurrency,r=void 0===n?5:n,o=t.onMessage,a=void 0===o?null:o,s=t.onDebug,l=void 0===s?function(){}:s,c=t.reuseWorkers,u=void 0===c||c;i(this,e),this.maxConcurrency=r,this.onMessage=a,this.onDebug=l,this.workerPools=new Map,this.reuseWorkers=u}var t;return a(e,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),a(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug),"reuseWorkers"in e&&(this.reuseWorkers=e.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach((function(e){return e.destroy()}))}},{key:"process",value:(t=xn(_n().mark((function e(t,n,r){var i;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._getWorkerPool(t,n),e.abrupt("return",i.process(r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_getWorkerPool",value:function(e,t){var n=this.workerPools.get(t);return n||(n=new qu({source:e,name:t,onMessage:Xu.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(t,n)),n}}]),e}();function Xu(e,t){var n=t.worker,r=t.data,i=t.resolve,o=t.reject;if(e)e({worker:n,data:r,resolve:i,reject:o});else switch(r.type){case"done":i(r.result);break;case"error":o(r.message)}}var Yu="2.3.11";function $u(e,t,n,r){if(!Zu.isSupported())return!1;var i=n&&n[e.id];return!!("local"===n.worker&&i&&i.localWorkerUrl||n.worker&&i&&i.workerUrl)&&(!e.useWorker||e.useWorker(n))}function Ju(e,t,n,r){var i=(n||{}).worker,o=n&&n[e.id]||{},a="local"===i?o.localWorkerUrl:o.workerUrl,s="url(".concat(a,")"),l=e.name,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return e.maxConcurrency&&(t.maxConcurrency=e.maxConcurrency),e.onDebug&&(t.onDebug=e.onDebug),"reuseWorkers"in e&&(t.reuseWorkers=e.reuseWorkers),Ku||(Ku=new Zu({onMessage:Qu})),Ku.setProps(t),Ku}(n);n=JSON.parse(JSON.stringify(n));var u=e.version!==Yu?"(core version ".concat(Yu,")"):"";return c.process(s,"".concat(l,"-worker@").concat(e.version).concat(u),{arraybuffer:lu(t),options:n,source:"loaders.gl@".concat(Yu),type:"parse"})}var Ku=null;function Qu(e){return eh.apply(this,arguments)}function eh(){return(eh=xn(_n().mark((function e(t){var n,r,i,o,a;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.worker,r=t.data,i=t.resolve,o=t.reject,e.t0=r.type,e.next="done"===e.t0?4:"parse"===e.t0?6:"error"===e.t0?17:19;break;case 4:return i(r.result),e.abrupt("break",19);case 6:return e.prev=6,e.next=9,bh(r.arraybuffer,r.options,r.url);case 9:a=e.sent,n.postMessage({type:"parse-done",id:r.id,result:a},ju(a)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),n.postMessage({type:"parse-error",id:r.id,message:e.t1.message});case 16:return e.abrupt("break",19);case 17:return o(r.message),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function th(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nh=function(){var e=Yc();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function rh(){return nh()}function ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ih(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ah(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lh=/\.([^.]+)$/;function ch(e){return uh.apply(this,arguments)}function uh(){return(uh=xn(_n().mark((function e(t){var n,r,i,o,a=arguments;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],r=a.length>2&&void 0!==a[2]?a[2]:{},i=a.length>3&&void 0!==a[3]?a[3]:{},!(o=hh(t,n,oh(oh({},r),{},{nothrow:!0}),i))){e.next=6;break}return e.abrupt("return",o);case 6:if(!lc(t)){e.next=11;break}return e.next=9,Su(t,0,10);case 9:t=e.sent,o=hh(t,n,r,i);case 11:if(o||r.nothrow){e.next=13;break}throw new Error(dh(t));case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&!Array.isArray(t))return pc(t);fh(t=[].concat(A(t||[]),A(rh())));var i=Mc(e),o=i.url,a=i.type,s=ph(t,o||r.url);if(!(s=(s=s||mh(t,a))||gh(t,e))&&!n.nothrow)throw new Error(dh(e));return s}function dh(e){var t=Mc(e),n=t.url,r=t.type,i="No valid loader found";return e&&(i+=' data: "'.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof e?e.slice(0,t):ArrayBuffer.isView(e)?_h(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?_h(e,0,t):""}(e),'", contentType: "').concat(r,'"')),n&&(i+=" url: ".concat(n)),i}function fh(e){var t,n=ah(e);try{for(n.s();!(t=n.n()).done;)pc(t.value)}catch(e){n.e(e)}finally{n.f()}}function ph(e,t){var n=t&&t.match(lh),r=n&&n[1];return r&&function(e,t){t=t.toLowerCase();var n,r=ah(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=ah(o.extensions);try{for(a.s();!(i=a.n()).done;)if(i.value.toLowerCase()===t)return o}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}return null}(e,r)}function mh(e,t){var n,r=ah(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(t))return i;if(t==="application/x.".concat(i.id))return i}}catch(e){r.e(e)}finally{r.f()}return null}function gh(e,t){if(!t)return null;var n,r=ah(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof t){if(yh(t,i))return i}else if(ArrayBuffer.isView(t)){if(vh(t.buffer,t.byteOffset,i))return i}else if(t instanceof ArrayBuffer&&vh(t,0,i))return i}}catch(e){r.e(e)}finally{r.f()}return null}function yh(e,t){return t.testText&&t.testText(e)}function vh(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;for(var r=new Uint8Array(e),i=new Uint8Array(t),o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,e,r.byteLength);switch(u(r)){case"function":return r(e,n);case"string":return r===_h(e,t,r.length);default:return!1}}(e,t,n,r)}))}function _h(e,t,n){if(e.byteLength<t+n)return"";for(var r=new DataView(e),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}function bh(e,t,n,r){return xh.apply(this,arguments)}function xh(){return(xh=xn(_n().mark((function e(t,n,r,i){var o,a,s,l;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uc(!i||"string"!=typeof i,"parse no longer accepts final url"),!n||Array.isArray(n)||fc(n)||(i=r,r=n,n=null),e.next=4,t;case 4:return t=e.sent,r=r||{},o=Mc(t),a=o.url,s=Nu(n,i),e.next=10,ch(t,s,r);case 10:if(l=e.sent){e.next=13;break}return e.abrupt("return",null);case 13:return r=Jc(r,l,s,a),i=Fu({url:a,parse:bh,loaders:s},r,i),e.next=17,wh(l,t,r,i);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wh(e,t,n,r){return Sh.apply(this,arguments)}function Sh(){return(Sh=xn(_n().mark((function e(t,n,r,i){return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ru(t),e.next=3,Ru(n,t);case 3:if(n=e.sent,!t.parseTextSync||"string"!=typeof n){e.next=7;break}return r.dataType="text",e.abrupt("return",t.parseTextSync(n,r,i,t));case 7:if(!$u(t,0,r)){e.next=11;break}return e.next=10,Ju(t,n,r);case 10:return e.abrupt("return",e.sent);case 11:if(!t.parseText||"string"!=typeof n){e.next=15;break}return e.next=14,t.parseText(n,r,i,t);case 14:return e.abrupt("return",e.sent);case 15:if(!t.parse){e.next=19;break}return e.next=18,t.parse(n,r,i,t);case 18:return e.abrupt("return",e.sent);case 19:return uc(!t.parseSync),e.abrupt("return",uc(!1));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ah(e,t,n){return Eh.apply(this,arguments)}function Eh(){return(Eh=xn(_n().mark((function e(t,n,r){var i,o;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||fc(n)||(r=n,n=null),i=Kc(r||{}),o=t,"string"!=typeof t){e.next=9;break}return e.next=6,i(t);case 6:o=e.sent,e.next=10;break;case 9:t=null;case 10:if(!lc(t)){e.next=15;break}return e.next=13,i(t);case 13:o=e.sent,t=null;case 15:return e.next=17,bh(o,n,r);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ch(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ch(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Th=Math.pow(2,24)-1,Ph=Object.freeze([]),Dh=ns((function(e){var t=e.oldViewport,n=e.viewport;return t.equals(n)})),kh=new Uint8ClampedArray(0),Oh={data:{type:"data",value:Ph,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(e){return e&&e.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(e,t){var n=t.propName,r=t.layer,i=r.context.resourceManager,o=r.getLoadOptions(),a=r.props.loaders,s=i.contains(e);return s||o||(i.add({resourceId:e,data:Ah(e,a),persistent:!1}),s=!0),s?i.subscribe({resourceId:e,onChange:function(e){return r.internalState.reloadAsyncProp(n,e)},consumerId:r.id,requestId:n}):Ah(e,a,o)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Q.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Ih=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"toString",value:function(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(e){var t=this.context.viewport,n=v(Js(Sl(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),3),r=n[0],i=n[1],o=n[2];return 2===e.length?[r,i]:[r,i,o]}},{key:"unproject",value:function(e){return this.context.viewport.unproject(e)}},{key:"projectPosition",value:function(e){return t=e,n={viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},r=function(e){var t=Object.assign({},e),n=e.coordinateSystem,r=e.viewport,i=e.coordinateOrigin,o=e.fromCoordinateSystem,a=e.fromCoordinateOrigin;return n===Q.DEFAULT&&(n=r.isGeospatial?Q.LNGLAT:Q.CARTESIAN),void 0===o&&(t.fromCoordinateSystem=n),void 0===a&&(t.fromCoordinateOrigin=i),t.coordinateSystem=n,t}(n),i=r.viewport,o=r.coordinateSystem,a=r.coordinateOrigin,s=r.modelMatrix,l=r.fromCoordinateSystem,c=r.fromCoordinateOrigin,u=xs(i,o,a),h=u.geospatialOrigin,d=u.shaderCoordinateOrigin,f=u.offsetMode,p=Sl(t,{viewport:i,modelMatrix:s,coordinateSystem:l,coordinateOrigin:c,offsetMode:f}),f&&function(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}(p,p,i.projectPosition(h||d)),p;var t,n,r,i,o,a,s,l,c,u,h,d,f,p}},{key:"use64bitPositions",value:function(){var e=this.props.coordinateSystem;return e===Q.DEFAULT||e===Q.LNGLAT||e===Q.CARTESIAN}},{key:"onHover",value:function(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}},{key:"onClick",value:function(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function(e){Ar(e instanceof Uint8Array);var t=v(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(e){var t,n=Mh(this.props.extensions);try{for(n.s();!(t=n.n()).done;){var r=t.value;e=is(e,r.getShaders.call(this,r))}}catch(e){n.e(e)}finally{n.f()}return e}},{key:"shouldUpdateState",value:function(e){return e.oldProps,e.props,e.context,e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){var t=e.oldProps,n=e.props,r=(e.context,e.changeFlags),i=this.getAttributeManager();if(r.dataChanged&&i){var o=r.dataChanged;if(Array.isArray(o)){var a,s=Mh(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;i.invalidateAll(l)}}catch(e){s.e(e)}finally{s.f()}}else i.invalidateAll()}var c=t.highlightedObjectIndex>=0||t.pickable,u=n.highlightedObjectIndex>=0||n.pickable;if(c!==u&&i){var h=i.attributes,d=h.pickingColors,f=h.instancePickingColors,p=d||f;p&&(u&&p.constant&&(p.constant=!1,i.invalidate(p.id)),p.value||u||(p.constant=!0,p.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var e,t=Mh(this.getModels());try{for(t.s();!(e=t.n()).done;)e.value.delete()}catch(e){t.e(e)}finally{t.f()}var n=this.getAttributeManager();n&&n.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(e){var t,n=Mh(this.getModels());try{for(n.s();!(t=n.n()).done;)t.value.draw(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"activateViewport",value:function(e){var t=this.internalState.viewport;this.internalState.viewport=e,t&&Dh({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}},{key:"updateAttributes",value:function(e){var t,n=Mh(this.getModels());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setModelAttributes(r,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e),r=this.getStartIndices(e);t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"_updateUniformTransition",value:function(){var e=this.internalState.uniformTransitions;if(e.active){var t=e.update(),n=Object.create(this.props);for(var r in t)Object.defineProperty(n,r,{value:t[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(e,t){var n=t.numInstances;if(!e.constant){var r=kh.length/3;if(r<n){n>Th&&K.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();for(var i=(kh=Hn.allocate(kh,n,{size:3,copy:!0,maxCount:Math.max(n,Th)})).length/3,o=[],a=r;a<i;a++)this.encodePickingColor(a,o),kh[3*a+0]=o[0],kh[3*a+1]=o[1],kh[3*a+2]=o[2]}e.value=kh.subarray(0,3*n)}}},{key:"_setModelAttributes",value:function(e,t){var n=this.getAttributeManager(),r=e.userData.excludeAttributes||{},i=n.getShaderAttributes(t,r);e.setAttributes(i)}},{key:"disablePickingIndex",value:function(e){this._disablePickingIndex(e)}},{key:"_disablePickingIndex",value:function(e){var t=this.getAttributeManager().attributes,n=t.pickingColors,r=t.instancePickingColors,i=n||r,o=i.getVertexOffset(e),a=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}},{key:"restorePickingColors",value:function(){var e=this.getAttributeManager().attributes,t=e.pickingColors,n=e.instancePickingColors;(t||n).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(e){if(null===(t=e)||"object"!==u(t))throw new Error("count(): argument not an object");var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===u(e)&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}(e.data)}},{key:"getStartIndices",value:function(e){return void 0!==(e=e||this.props).startIndices?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){Zr("layer.initialize",this),this._initState(),this.initializeState(this.context);var e,t=Mh(this.props.extensions);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.initializeState.call(this,this.context,n)}}catch(e){t.e(e)}finally{t.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var e=this.needsUpdate();Zr("layer.update",this,e),e&&this._updateState()}},{key:"_updateState",value:function(){var e=this.props,t=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||t,this.props=n;try{var r=this._getUpdateParams(),i=this.getModels();if(this.context.gl)this.updateState(r);else try{this.updateState(r)}catch(e){}var o,a=Mh(this.props.extensions);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateState.call(this,r,s)}}catch(e){a.e(e)}finally{a.f()}var l=this.getModels()[0]!==i[0];this._updateModules(r,l),this.isComposite?this._renderLayers(r):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=t,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}},{key:"_finalize",value:function(){Zr("layer.finalize",this),Ar(this.internalState&&this.state),this.finalizeState(this.context);var e,t=Mh(this.props.extensions);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.finalizeState.call(this,n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,o=void 0===i?{}:i,a=e.parameters,s=void 0===a?{}:a;this._updateAttributeTransition();var l=this.props;this.props=this.internalState.propsInTransition||l;var c=this.props.opacity;o.opacity=Math.pow(c,1/2.2);try{r&&this.setModuleParameters(r);var u=this.props.getPolygonOffset,h=u&&u(o)||[0,0];Ye(this.context.gl,{polygonOffset:h}),Je(this.context.gl,s,(function(){var e,n={moduleParameters:r,uniforms:o,parameters:s,context:t.context},i=Mh(t.props.extensions);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.draw.call(t,n,a)}}catch(e){i.e(e)}finally{i.f()}t.draw(n)}))}finally{this.props=l}}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this.internalState.changeFlags;for(var n in e)if(e[n]){var r=!1;switch(n){case"dataChanged":Array.isArray(t[n])&&(t[n]=Array.isArray(e[n])?t[n].concat(e[n]):e[n],r=!0);default:t[n]||(t[n]=e[n],r=!0)}r&&Zr("layer.changeFlag",this,n,e)}var i=t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged;t.propsOrDataChanged=i,t.somethingChanged=i||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(e,t){var n=function(e,t){var n=$a({newProps:e,oldProps:t,propTypes:es(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";var n=null,r=e.dataComparator,i=e._dataDiff;return r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied"),n&&i&&(n=i(e.data,t.data)||n),n}(e,t),i=!1;return r||(i=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers&&Qa(e,t,"all"))return{all:!0};var n={},r=!1;for(var i in e.updateTriggers)"all"!==i&&Qa(e,t,i)&&(n[i]=!0,r=n);return r}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Ka(e,t),transitionsChanged:Ya(e,t)}}(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,t[i],e[i],e.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(e){var t=es(e);for(var n in t){var r=t[n],i=r.validate;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}},{key:"setModuleParameters",value:function(e){var t,n=Mh(this.getModels());try{for(n.s();!(t=n.n()).done;)t.value.updateModuleSettings(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"_updateModules",value:function(e,t){var n=e.props,r=e.oldProps,i=n.autoHighlight,o=n.highlightedObjectIndex,a=n.highlightColor;if(t||r.autoHighlight!==i||r.highlightedObjectIndex!==o||r.highlightColor!==a){var s={};i||(s.pickingSelectedColor=null),Array.isArray(a)&&(s.pickingHighlightColor=a),Number.isInteger(o)&&(s.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(s)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(e);return t||r}},{key:"_getAttributeManager",value:function(){return new La(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){Ar(!this.internalState&&!this.state),Ar(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new tc({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return K.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e}}),this.internalState.layer=this,this.internalState.uniformTransitions=new Wa(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(e){Zr("layer.matched",this,this===e);var t=e.state,n=e.internalState;Ar(t&&n),this!==e&&(this.internalState=n,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]),o}(ec);function Rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ih.layerName="Layer",Ih.defaultProps=Oh;var Lh=function(){function e(t,n,r){i(this,e),this.id=t,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(n)}return a(e,[{key:"subscribe",value:function(e){this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var e=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((function(){return e.getData()}))}},{key:"setData",value:function(e,t){var n=this;if(e!==this._data||t){this._data=e;var r=++this._loadCount,i=e;"string"==typeof e&&(i=Ah(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((function(e){n._loadCount===r&&(n.isLoaded=!0,n._error=null,n._content=e)})).catch((function(e){n._loadCount===r&&(n.isLoaded=!0,n._error=e||!0)}))):(this.isLoaded=!0,this._error=null,this._content=e);var o,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._subscribers);try{for(a.s();!(o=a.n()).done;)o.value.onChange(this.getData())}catch(e){a.e(e)}finally{a.f()}}}}]),e}(),Bh=function(){function e(t){var n=t.gl,r=t.protocol;i(this,e),this.protocol=r||"resource://",this._context={gl:n,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return a(e,[{key:"contains",value:function(e){return!!e.startsWith(this.protocol)||e in this._resources}},{key:"add",value:function(e){var t=e.resourceId,n=e.data,r=e.forceUpdate,i=void 0!==r&&r,o=e.persistent,a=void 0===o||o,s=this._resources[t];s?s.setData(n,i):(s=new Lh(t,n,this._context),this._resources[t]=s),s.persistent=a}},{key:"remove",value:function(e){var t=this._resources[e];t&&(t.delete(),delete this._resources[e])}},{key:"unsubscribe",value:function(e){var t=e.consumerId,n=this._consumers[t];if(n){for(var r in n){var i=n[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[t],this.prune()}}},{key:"subscribe",value:function(e){var t=e.resourceId,n=e.onChange,r=e.consumerId,i=e.requestId,o=void 0===i?"default":i,a=this._resources,s=this.protocol;t.startsWith(s)&&(a[t=t.replace(s,"")]||this.add({resourceId:t,data:null,persistent:!1}));var l=a[t];if(this._track(r,o,l,n),l)return l.getData()}},{key:"prune",value:function(){var e=this;this._pruneRequest||(this._pruneRequest=setTimeout((function(){return e._prune()}),0))}},{key:"finalize",value:function(){for(var e in this._resources)this._resources[e].delete()}},{key:"_track",value:function(e,t,n,r){var i=this._consumers,o=i[e]=i[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[t]=a,a.onChange=r,a.resource=n,n.subscribe(a))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var e=0,t=Object.keys(this._resources);e<t.length;e++){var n=t[e],r=this._resources[n];r.persistent||r.inUse()||(r.delete(),delete this._resources[n])}}}]),e}();var zh=Object.keys(Q).map((function(e){return"const int COORDINATE_SYSTEM_".concat(e," = ").concat(Q[e],";")})).join(""),Fh=Object.keys(ee).map((function(e){return"const int PROJECTION_MODE_".concat(e," = ").concat(ee[e],";")})).join("");const Nh="".concat(zh,"\n").concat(Fh,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");var Uh={};const jh={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:Nh,getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uh;return e.viewport?ws(e):{}}};function Vh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hh=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},jh],Wh=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function qh(e){var t,n=Go.getDefaultProgramManager(e),r=Vh(Hh);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.addDefaultModule(i)}}catch(e){r.e(e)}finally{r.f()}var o,a=Vh(Wh);try{for(a.s();!(o=a.n()).done;){var s=o.value;n.addShaderHook(s)}}catch(e){a.e(e)}finally{a.f()}return n}function Zh(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yh="layerManager.setLayers",$h=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),Jh=function(e){return e instanceof Ih?"".concat(e):e?"invalid":"null"},Kh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,o=n.stats,a=n.viewport,s=n.timeline;i(this,e),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Bh({gl:t,protocol:"deck://"}),this.context=Object.assign({},$h,{layerManager:this,gl:t,deck:r,programManager:t&&qh(t),stats:o||new gt({id:"deck.gl"}),viewport:a||new yl({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new S,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return a(e,[{key:"finalize",value:function(){this.resourceManager.finalize();var e,t=Zh(this.layers);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._finalizeLayer(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n,r=Zh(this.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.getNeedsRedraw(e);t=t||o}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter((function(e){return n.find((function(t){return 0===e.id.indexOf(t)}))})):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers),"onError"in e&&(this._onError=e.onError)}},{key:"setLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||e!==this.lastRenderedLayers;if(Zr(Yh,this,n,e),!n)return this;this.lastRenderedLayers=e;var r,i=Zh(e=Pr(e,Boolean));try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context}}catch(e){i.e(e)}finally{i.f()}return this._updateLayers(this.layers,e),this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this.lastRenderedLayers,!0))}},{key:"activateViewport",value:function(e){return Zr("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}},{key:"_handleError",value:function(e,t,n){this._onError?this._onError(t,n):K.error("error during ".concat(e," of ").concat(Jh(n)),t)()}},{key:"_updateLayers",value:function(e,t){var n,r={},i=Zh(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.id]?K.warn("Multiple old layers with same id ".concat(Jh(o)))():r[o.id]=o}}catch(e){i.e(e)}finally{i.f()}var a=[];this._updateSublayersRecursively(t,r,a),this._finalizeOldLayers(r);for(var s=!1,l=0,c=a;l<c.length;l++)if(c[l].hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=a}},{key:"_updateSublayersRecursively",value:function(e,t,n){var r,i=Zh(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context;var a=t[o.id];null===a&&K.warn("Multiple new layers with same id ".concat(Jh(o)))(),t[o.id]=null;var s=null;try{this._debug&&a!==o&&o.validateProps(),a?(this._transferLayerState(a,o),this._updateLayer(o)):this._initializeLayer(o),n.push(o),s=o.isComposite&&o.getSubLayers()}catch(e){this._handleError("matching",e,o)}s&&this._updateSublayersRecursively(s,t,n)}}catch(e){i.e(e)}finally{i.f()}}},{key:"_finalizeOldLayers",value:function(e){for(var t in e){var n=e[t];n&&this._finalizeLayer(n)}}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}},{key:"_updateLayer",value:function(e){try{e._update()}catch(t){this._handleError("update",t,e)}}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(Jh(e)),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}]),e}();function Qh(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in e){var r=e[n],i=t[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Qh(r,i)))return!1}return!0}function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}return a(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var t=this.controllers[e];t&&t.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter((function(t){return t.containsPixel(e)})):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach((function(t){e[t.id]=t})),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find((function(t){return t.id===e})):e}},{key:"getViewState",value:function(e){var t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var n=this.getViewports(),r={x:e[0],y:e[1]},i=n.length-1;i>=0;--i){var o=n[i];if(o.containsPixel(r)){var a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){Ar(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=Pr(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!Qh(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):K.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e,t){return new(0,t.type)(td({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(t){return e._getViewport(t,{width:t.width,height:t.height})}},t))}},{key:"_updateController",value:function(e,t,n,r){var i=e.controller;return i?(i=td(td(td(td({},t),e.props),i),{},{id:e.id,x:n.x,y:n.y,width:n.width,height:n.height}),r?r.setProps(i):r=this._createController(e,i),r):null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var o=n[i],a=this.getViewState(o),s=o.makeViewport({width:e,height:t,viewState:a});this.controllers[o.id]=this._updateController(o,a,s,r[o.id]),this._viewports.unshift(s)}for(var l in r)r[l]&&!this.controllers[l]&&r[l].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach((function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)}))}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some((function(n,r){return!e[r].equals(t[r])}))}}]),e}(),rd=/([0-9]+\.?[0-9]*)(%|px)/;function id(e){switch(u(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(rd);if(t&&t.length>=3){var n="%"===t[2],r=parseFloat(t[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function od(e,t){return e.relative?Math.round(e.position*t):e.position}function ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ad(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ld=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.id,r=void 0===n?null:n,o=t.x,a=void 0===o?0:o,s=t.y,l=void 0===s?0:s,c=t.width,u=void 0===c?"100%":c,h=t.height,d=void 0===h?"100%":h,f=t.projectionMatrix,p=void 0===f?null:f,m=t.fovy,g=void 0===m?50:m,y=t.near,v=void 0===y?.1:y,_=t.far,b=void 0===_?1e3:_,x=t.modelMatrix,w=void 0===x?null:x,S=t.viewportInstance,A=void 0===S?null:S,E=t.type,M=void 0===E?yl:E;Ar(!A||A instanceof yl),this.viewportInstance=A,this.id=r||this.constructor.displayName||"view",this.type=M,this.props=Object.assign({},t,{id:this.id,projectionMatrix:p,fovy:g,near:v,far:b,modelMatrix:w}),this._parseDimensions({x:a,y:l,width:u,height:d}),this.equals=this.equals.bind(this),Object.seal(this)}return a(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Qh(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,n=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:t,height:n});return this._getViewport(r,i)}},{key:"getViewStateId",value:function(){switch(u(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===u(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var n in this.props.viewState)"id"!==n&&(t[n]=this.props.viewState[n]);return t}return e}},{key:"getDimensions",value:function(e){var t=e.width,n=e.height;return{x:od(this._x,t),y:od(this._y,n),width:od(this._width,t),height:od(this._height,n)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e,t){return new(0,this.type)(sd(sd(sd({},e),this.props),t))}},{key:"_parseDimensions",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._x=id(t),this._y=id(n),this._width=id(r),this._height=id(i)}}]),e}(),cd=function(){},ud={transitionEasing:function(e){return e},transitionInterruption:1,onTransitionStart:cd,onTransitionInterrupt:cd,onTransitionEnd:cd},hd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.ControllerState=t,this.props=Object.assign({},ud,n),this.propsInTransition=null,this.transition=new xa(n.timeline),this.onViewStateChange=n.onViewStateChange||cd,this.onStateChange=n.onStateChange||cd,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return a(e,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var t=!1,n=this.props;if(e=Object.assign({},ud,e),this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){var r=this.transition.settings,i=r.interruption,o=r.endProps,a=Object.assign({},n,2===i?o:this.propsInTransition||n);this._triggerTransition(a,e),t=!0}else this.transition.cancel();return t}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,n=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){var n=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator,o=i.getDuration?i.getDuration(e,t):t.transitionDuration;if(0!==o){var a=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(e){var t=this;return function(n){t.propsInTransition=null,t.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(n)}}},{key:"_onTransitionUpdate",value:function(e){var t=e.time,n=e.settings,r=n.interpolator,i=n.startProps,o=n.endProps,a=n.duration,s=(0,n.easing)(t/a),l=r.interpolateProps(i,o,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,l)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}]),e}();function dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dd(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pd={transitionDuration:0},md=function(e){return 1-(1-e)*(1-e)},gd=["wheel"],yd=["panstart","panmove","panend"],vd=["pinchstart","pinchmove","pinchend"],_d=["tripanstart","tripanmove","tripanend"],bd=["doubletap"],xd=["keydown"],wd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),Ar(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new hd(t,fd(fd({},n),{},{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return a(e,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){var t=this.ControllerState;this.controllerState=new t(fd(fd({makeViewport:this.makeViewport},this.controllerStateProps),this._state));var n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=this.controllerStateProps,n=t.x,r=t.y,i=e.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(e,t){var n=this.controllerStateProps,r=n.width,i=n.height;if(t&&t.handled)return!1;var o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&t&&t.stopPropagation(),o}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"blockEvents",value:function(e){var t=this,n=setTimeout((function(){t._eventStartBlocked===n&&(t._eventStartBlocked=null)}),e);this._eventStartBlocked=n}},{key:"setProps",value:function(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);var t=e.inertia;!0===t&&(t=300),this.inertia=t;var n=e.scrollZoom,r=void 0===n||n,i=e.dragPan,o=void 0===i||i,a=e.dragRotate,s=void 0===a||a,l=e.doubleClickZoom,c=void 0===l||l,u=e.touchZoom,h=void 0===u||u,d=e.touchRotate,f=void 0!==d&&d,p=e.keyboard,m=void 0===p||p,g=Boolean(this.onViewStateChange);this.toggleEvents(gd,g&&r),this.toggleEvents(yd,g&&(o||s)),this.toggleEvents(vd,g&&(h||f)),this.toggleEvents(_d,g&&f),this.toggleEvents(bd,g&&c),this.toggleEvents(xd,g&&m),this.scrollZoom=r,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=c,this.touchZoom=h,this.touchRotate=f,this.keyboard=m}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},e.getViewportProps(),t),i=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(n),i){var o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}},{key:"_onTransition",value:function(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}},{key:"_setInteractionState",value:function(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(n=!n);var r=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(r,pd,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}},{key:"_onPanEnd",value:function(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,pd,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(e){var t=this.inertia;if(this.dragPan&&t&&e.velocity){var n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,fd(fd({},this._getTransitionProps()),{},{transitionDuration:t,transitionEasing:md}),{isDragging:!1,isPanning:!0})}else{var o=this.controllerState.panEnd();this.updateViewport(o,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,pd,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(e){var t=this.inertia;if(this.dragRotate&&t&&e.velocity){var n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,fd(fd({},this._getTransitionProps()),{},{transitionDuration:t,transitionEasing:md}),{isDragging:!1,isRotating:!0})}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.scrollZoom,r=n.speed,i=void 0===r?.01:r,o=n.smooth,a=void 0!==o&&o,s=e.delta,l=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==l&&(l=1/l);var c=this.controllerState.zoom({pos:t,scale:l});return this.updateViewport(c,fd(fd({},this._getTransitionProps({around:t})),{},{transitionDuration:a?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,pd,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.getCenter(e);t[0]-=e.deltaX;var n=this.controllerState.rotate({pos:t});return this.updateViewport(n,pd,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(e){if(!this.isDragging())return!1;var t=this.inertia;if(this.touchRotate&&t&&e.velocityY){var n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*t/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,fd(fd({},this._getTransitionProps()),{},{transitionDuration:t,transitionEasing:md}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,pd,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.controllerState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,pd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}},{key:"_onPinchEnd",value:function(e){if(!this.isDragging())return!1;var t=this.inertia,n=this._lastPinchEvent;if(this.touchZoom&&t&&n&&e.scale!==n.scale){var r=this.getCenter(e),i=this.controllerState.rotateEnd(),o=Math.log2(e.scale),a=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),s=Math.pow(2,o+a*t/2);i=i.zoom({pos:r,scale:s}).zoomEnd(),this.updateViewport(i,fd(fd({},this._getTransitionProps({around:r})),{},{transitionDuration:t,transitionEasing:md}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{var l=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(l,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.keyboard,i=r.zoomSpeed,o=r.moveSpeed,a=r.rotateSpeedX,s=r.rotateSpeedY,l=this.controllerState,c={};switch(e.srcEvent.code){case"Minus":t=n?l.zoomOut(i).zoomOut(i):l.zoomOut(i),c.isZooming=!0;break;case"Equal":t=n?l.zoomIn(i).zoomIn(i):l.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":n?(t=l.rotateLeft(a),c.isRotating=!0):(t=l.moveLeft(o),c.isPanning=!0);break;case"ArrowRight":n?(t=l.rotateRight(a),c.isRotating=!0):(t=l.moveRight(o),c.isPanning=!0);break;case"ArrowUp":n?(t=l.rotateUp(s),c.isRotating=!0):(t=l.moveUp(o),c.isPanning=!0);break;case"ArrowDown":n?(t=l.rotateDown(s),c.isRotating=!0):(t=l.moveDown(o),c.isPanning=!0);break;default:return!1}return this.updateViewport(t,this._getTransitionProps(),c),!0}},{key:"_getTransitionProps",value:function(){return pd}},{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}}]),e}(),Sd=function(){function e(t){i(this,e),Ar(Number.isFinite(t.width),"`width` must be supplied"),Ar(Number.isFinite(t.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(t)}return a(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),e}();function Ad(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ed(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Md=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var n=t,r=n.compare,o=n.extract,a=n.required;this._propsToCompare=r,this._propsToExtract=o,this._requiredProps=a}return a(e,[{key:"arePropsEqual",value:function(e,t){var n,r=Ad(this._propsToCompare||Object.keys(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!(i in e)||!(i in t)||!Kn(e[i],t[i]))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}},{key:"initializeProps",value:function(e,t){var n;if(this._propsToExtract){var r,i={},o={},a=Ad(this._propsToExtract);try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s]=e[s],o[s]=t[s]}}catch(e){a.e(e)}finally{a.f()}n={start:i,end:o}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(e,t,n){return t}},{key:"getDuration",value:function(e,t){return t.transitionDuration}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach((function(t){var n=e[t];Ar(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}]),e}();function Cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cd(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dd=["longitude","latitude","zoom","bearing","pitch"],kd=["longitude","latitude","zoom"],Od=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,o);var n=Array.isArray(t)?t:t.transitionProps;return(e=r.call(this,n||{compare:Dd,extract:Dd,required:kd})).opts=t,e}return a(o,[{key:"initializeProps",value:function(e,t){var n=ne(d(o.prototype),"initializeProps",this).call(this,e,t),r=this.opts,i=r.makeViewport,a=r.around;if(i&&a){var s=i(e),l=i(t),c=s.unproject(a);n.start.around=a,Object.assign(n.end,{around:l.project(c),aroundLngLat:c,width:t.width,height:t.height})}return n}},{key:"interpolateProps",value:function(e,t,n){var r,i={},o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._propsToExtract);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=Jn(e[a]||0,t[a]||0,n)}}catch(e){o.e(e)}finally{o.f()}if(t.aroundLngLat){var s=v(this.opts.makeViewport(Td(Td({},t),i)).getMapCenterByLngLatPosition({lngLat:t.aroundLngLat,pos:Jn(e.around,t.around,n)}),2),l=s[0],c=s[1];i.longitude=l,i.latitude=c}return i}}]),o}(Md);function Id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ld(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var Bd={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new Od,transitionInterruption:1},zd=function(e){c(n,e);var t=Ld(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.makeViewport,a=r.width,s=r.height,l=r.latitude,c=r.longitude,u=r.zoom,h=r.bearing,d=void 0===h?0:h,f=r.pitch,p=void 0===f?0:f,m=r.altitude,g=void 0===m?1.5:m,y=r.maxZoom,v=void 0===y?20:y,_=r.minZoom,b=void 0===_?0:_,x=r.maxPitch,w=void 0===x?60:x,S=r.minPitch,A=void 0===S?0:S,E=r.startPanLngLat,M=r.startZoomLngLat,C=r.startRotatePos,T=r.startBearing,P=r.startPitch,D=r.startZoom;return i(this,n),Ar(Number.isFinite(c),"`longitude` must be supplied"),Ar(Number.isFinite(l),"`latitude` must be supplied"),Ar(Number.isFinite(u),"`zoom` must be supplied"),(e=t.call(this,{width:a,height:s,latitude:l,longitude:c,zoom:u,bearing:d,pitch:p,altitude:g,maxZoom:v,minZoom:b,maxPitch:w,minPitch:A}))._state={startPanLngLat:E,startZoomLngLat:M,startRotatePos:C,startBearing:T,startPitch:P,startZoom:D},e.makeViewport=o,e}return a(n,[{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=v(this._calculateNewLngLat({startPanLngLat:r,pos:t}),2),o=i[0],a=i[1];return this._getUpdatedState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){var t=e.pos;return this._getUpdatedState({startRotatePos:t,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t,n=e.pos,r=e.deltaAngleX,i=void 0===r?0:r,o=e.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,c=s.startBearing,u=s.startPitch;return l&&Number.isFinite(c)&&Number.isFinite(u)?(t=n?this._calculateNewPitchAndBearing(Rd(Rd({},this._getRotationParams(n,l)),{},{startBearing:c,startPitch:u})):{bearing:c+i,pitch:u+a},this._getUpdatedState(t)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._state,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(t));var s=this._calculateNewZoom({scale:r,startZoom:o}),l=v(this.makeViewport(Rd(Rd({},this._viewportProps),{},{zoom:s})).getMapCenterByLngLatPosition({lngLat:a,pos:t}),2),c=l[0],u=l[1];return this._getUpdatedState({zoom:s,longitude:c,latitude:u})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(e)}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/e)}},{key:"moveLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([e,0])}},{key:"moveRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-e,0])}},{key:"moveUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,e])}},{key:"moveDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-e])}},{key:"rotateLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}},{key:"rotateRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}},{key:"rotateUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}},{key:"rotateDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.zoom({pos:[n/2,r/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new this.constructor(Rd(Rd(Rd({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=$n(r,n,t);var i=e.maxPitch,o=e.minPitch,a=e.pitch;return e.pitch=$n(a,o,i),Object.assign(e,al(e)),e}},{key:"_unproject",value:function(e){var t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return $n(n+Math.log2(t),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=$n(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=i;return n>0?l=i+n*(s-i):n<0&&(l=i-n*(a-i)),{pitch:l,bearing:r+180*t}}},{key:"_getRotationParams",value:function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[1],o=t[1],a=this._viewportProps,s=a.width,l=a.height,c=n/s,u=0;return r>0?Math.abs(l-o)>5&&(u=r/(o-l)*1.2):r<0&&o>5&&(u=1-i/o),{deltaScaleX:c,deltaScaleY:u=Math.min(1,Math.max(-1,u))}}}]),n}(Sd),Fd=function(e){c(n,e);var t=Ld(n);function n(e){return i(this,n),e.dragMode=e.dragMode||"pan",t.call(this,zd,e)}return a(n,[{key:"_getTransitionProps",value:function(e){return e?Rd(Rd({},Bd),{},{transitionInterpolator:new Od(Rd(Rd({},e),{},{makeViewport:this.controllerState.makeViewport}))}):Bd}}]),n}(wd);var Nd=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){return i(this,o),r.call(this,Object.assign({},e,{type:xl}))}return a(o,[{key:"controller",get:function(){return this._getControllerProps({type:Fd})}}]),o}(ld);Nd.displayName="MapView";var Ud=[255,255,255],jd=0,Vd=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.color,r=void 0===n?Ud:n,o=t.intensity,a=void 0===o?1:o;this.id=t.id||"ambient-".concat(jd++),this.color=r,this.intensity=a,this.type="ambient"},Gd=[255,255,255],Hd=[0,0,-1],Wd=0,qd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.color,r=void 0===n?Gd:n,o=t.intensity,a=void 0===o?1:o,s=t.direction,l=void 0===s?Hd:s,c=t._shadow,u=void 0!==c&&c;this.id=t.id||"directional-".concat(Wd++),this.color=r,this.intensity=a,this.type="directional",this.direction=new mr(l).normalize().toArray(),this.shadow=u}return a(e,[{key:"getProjectedLight",value:function(){return this}}]),e}(),Zd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.id,r=void 0===n?"effect":n;this.id=r,this.props={},Object.assign(this.props,t)}return a(e,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),e}();function Xd(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $d=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"render",value:function(e){return Ye(this.gl,{framebuffer:e.target}),this._drawLayers(e)}},{key:"_drawLayers",value:function(e){var t=e.viewports,n=e.views,r=e.onViewportActive,i=e.clearCanvas,o=void 0===i||i,a=this.gl;o&&function(e){Ye(e,{viewport:[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}),e.clear(16640)}(a);var s,l=[],c=Xd(t);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=u.viewport||u,d=n&&n[h.id];r(h);var f=this._getDrawLayerParams(h,e);e.view=d;var p,m=Xd(h.subViewports||[h]);try{for(m.s();!(p=m.n()).done;){var g=p.value;e.viewport=g;var y=this._drawLayersInViewport(a,e,f);l.push(y)}}catch(e){m.e(e)}finally{m.f()}}}catch(e){c.e(e)}finally{c.f()}return l}},{key:"_getDrawLayerParams",value:function(e,t){for(var n=t.layers,r=t.pass,i=void 0===r?"unknown":r,o=t.layerFilter,a=t.effects,s=t.moduleParameters,l=[],c=Jd(),u=0;u<n.length;u++){var h=n[u],d=this._shouldDrawLayer(h,e,i,o),f={shouldDrawLayer:d,layerRenderIndex:c(h,d)};d&&(f.moduleParameters=this._getModuleParameters(h,a,i,s),f.layerParameters=this.getLayerParameters(h,u)),l[u]=f}return l}},{key:"_drawLayersInViewport",value:function(e,t,n){var r=t.layers,i=t.onError,o=t.viewport,a=t.view,s=function(e,t){var n=t.viewport,r=e.canvas?e.canvas.clientHeight||e.canvas.height:100,i=n,o=Ke(e);return[i.x*o,(r-i.y-i.height)*o,i.width*o,i.height*o]}(e,{viewport:o});if(a&&a.props.clear){var l=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Je(e,{scissorTest:!0,scissor:s},(function(){return gn(e,l)}))}var c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Ye(e,{viewport:s});for(var u=0;u<r.length;u++){var h=r[u],d=n[u],f=d.shouldDrawLayer,p=d.layerRenderIndex,m=d.moduleParameters,g=d.layerParameters;if(f&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(f){c.visibleCount++,m.viewport=o;try{h.drawLayer({moduleParameters:m,uniforms:{layerIndex:p},parameters:g})}catch(e){i?i(e,h):K.error("error during drawing of ".concat(h),e)()}}}return c}},{key:"shouldDrawLayer",value:function(e){return!0}},{key:"getModuleParameters",value:function(e,t){return null}},{key:"getLayerParameters",value:function(e,t){return e.props.parameters}},{key:"_shouldDrawLayer",value:function(e,t,n,r){var i=this.shouldDrawLayer(e)&&e.props.visible;return i&&r&&(i=r({layer:e,viewport:t,isPicking:n.startsWith("picking"),renderPass:n})),i&&e.activateViewport(t),i}},{key:"_getModuleParameters",value:function(e,t,n,r){var i=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Ke(this.gl)});if(t){var o,a=Xd(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;Object.assign(i,s.getModuleParameters(e))}}catch(e){a.e(e)}finally{a.f()}}return Object.assign(i,this.getModuleParameters(e,t),r)}}]),o}(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var r=n.id,o=void 0===r?"pass":r;this.id=o,this.gl=t,this.props={},Object.assign(this.props,n)}return a(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),e}());function Jd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=function r(i,o){var a,s=i.props._offset,l=i.id,c=i.parent&&i.parent.id;if(c&&!(c in t)&&r(i.parent,!1),c in n){var u=n[c]=n[c]||Jd(t[c],t);a=u(i,o),n[l]=u}else Number.isFinite(s)?(a=s+(t[c]||0),n[l]=null):a=e;return o&&a>=e&&(e=a+1),t[l]=a,a};return r}function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ef=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e,t){var n,a,s;return i(this,o),(s=r.call(this,e,t)).shadowMap=new an(e,{width:1,height:1,parameters:(n={},m(n,10241,9729),m(n,10240,9729),m(n,10242,33071),m(n,10243,33071),n)}),s.depthBuffer=new un(e,{format:33189,width:1,height:1}),s.fbo=new In(e,{id:"shadowmap",width:1,height:1,attachments:(a={},m(a,36064,s.shadowMap),m(a,36096,s.depthBuffer),a)}),s}return a(o,[{key:"render",value:function(e){var t=this,n=this.fbo;Je(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var r=e.viewports[0],i=Ke(t.gl),a=r.width*i,s=r.height*i;a===n.width&&s===n.height||n.resize({width:a,height:s}),ne(d(o.prototype),"render",t).call(t,Qd(Qd({},e),{},{target:n,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(e){return!1!==e.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),o}($d);function tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nf=ns((function(e){var t=e.viewport,n=e.center;return new Os(t.viewProjectionMatrix).invert().transform(n)})),rf=ns((function(e){var t,n=e.viewport,r=e.shadowMatrices,i=[],o=n.pixelUnprojectionMatrix,a=n.isGeospatial?void 0:1,s=[[0,0,a],[n.width,0,a],[0,n.height,a],[n.width,n.height,a],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map((function(e){return function(e,t){var n=v(e,3),r=n[0],i=n[1],o=n[2],a=Ks([r,i,o],t);return Number.isFinite(o)?a:[a[0],a[1],0]}(e,o)})),l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(r);try{var c=function(){var e=t.value,r=e.clone().translate(new mr(n.center).negate()),o=s.map((function(e){return r.transform(e)})),a=(new Os).ortho({left:Math.min.apply(Math,A(o.map((function(e){return e[0]})))),right:Math.max.apply(Math,A(o.map((function(e){return e[0]})))),bottom:Math.min.apply(Math,A(o.map((function(e){return e[1]})))),top:Math.max.apply(Math,A(o.map((function(e){return e[1]})))),near:Math.min.apply(Math,A(o.map((function(e){return-e[2]})))),far:Math.max.apply(Math,A(o.map((function(e){return-e[2]}))))});i.push(a.multiplyRight(e))};for(l.s();!(t=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}return i})),of=[0,0,0,1],af=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function sf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||of,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=nf({viewport:e.viewport,center:t.project_uCenter}),i=[],o=rf({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice(),a=0;a<e.shadowMatrices.length;a++){var s=o[a],l=s.clone().translate(new mr(e.viewport.center).negate());t.project_uCoordinateSystem===Q.LNGLAT&&t.project_uProjectionMode===ee.WEB_MERCATOR?(o[a]=l,i[a]=r):(o[a]=s.clone().multiplyRight(af),i[a]=l.transform(r))}for(var c=0;c<o.length;c++)n["shadow_uViewProjectionMatrices[".concat(c,"]")]=o[c],n["shadow_uProjectCenters[".concat(c,"]")]=i[c],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(c)]=e.shadowMaps[c]:n["shadow_uShadowMap".concat(c)]=e.dummyShadowMap;return n}const lf={name:"shadow",dependencies:[jh],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){var n={},r=e.shadowEnabled,i=void 0===r||r;return i&&e.shadowMatrices&&e.shadowMatrices.length>0?Object.assign(n,sf(e,t)):Object.assign(n,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),n}return{}}};function cf(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hf={color:[255,255,255],intensity:1},df=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],ff=[0,0,0,200/255],pf=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t;for(var n in i(this,o),(t=r.call(this,e)).ambientLight=null,t.directionalLights=[],t.pointLights=[],t.shadowColor=ff,t.shadowPasses=[],t.shadowMaps=[],t.dummyShadowMap=null,t.shadow=!1,t.programManager=null,e){var a=e[n];switch(a.type){case"ambient":t.ambientLight=a;break;case"directional":t.directionalLights.push(a);break;case"point":t.pointLights.push(a)}}return t._applyDefaultLights(),t.shadow=t.directionalLights.some((function(e){return e.shadow})),t}return a(o,[{key:"preRender",value:function(e,t){var n=t.layers,r=t.layerFilter,i=t.viewports,o=t.onViewportActive,a=t.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=Go.getDefaultProgramManager(e),lf&&this.programManager.addDefaultModule(lf)),this.dummyShadowMap||(this.dummyShadowMap=new an(e,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}},{key:"getModuleParameters",value:function(e){var t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(t){return t.getProjectedLight({layer:e})})),pointLights:this.pointLights.map((function(t){return t.getProjectedLight({layer:e})}))},t}},{key:"cleanup",value:function(){var e,t=cf(this.shadowPasses);try{for(t.s();!(e=t.n()).done;)e.value.delete()}catch(e){t.e(e)}finally{t.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(lf),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var e,t=[],n=cf(this.directionalLights);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=(new Os).lookAt({eye:new mr(r.direction).negate()});t.push(i)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"_createShadowPasses",value:function(e){for(var t=0;t<this.directionalLights.length;t++){var n=new ef(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,n=this.directionalLights;e||0!==t.length||0!==n.length||(this.ambientLight=new Vd(hf),this.directionalLights.push(new qd(df[0]),new qd(df[1])))}}]),o}(Zd);function mf(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yf=new pf,vf=function(){function e(){i(this,e),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return a(e,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&Qh(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e,t=mf(this.effects);try{for(t.s();!(e=t.n()).done;)e.value.cleanup()}catch(e){t.e(e)}finally{t.f()}var n,r=mf(this._internalEffects);try{for(r.s();!(n=r.n()).done;)n.value.cleanup()}catch(e){r.e(e)}finally{r.f()}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(e){return e instanceof pf}))||this._internalEffects.push(yf)}}]),e}();var _f=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return o}($d);function bf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bf(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wf={blendFunc:[1,0,32771,0],blendEquation:32774},Sf=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"render",value:function(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,ne(d(o.prototype),"render",this).call(this,e))}},{key:"_drawPickingBuffer",value:function(e){var t=this,n=e.layers,r=e.layerFilter,i=e.views,a=e.viewports,s=e.onViewportActive,l=e.pickingFBO,c=e.deviceRect,u=c.x,h=c.y,f=c.width,p=c.height,m=e.pass,g=void 0===m?"picking":m,y=e.redrawReason,v=e.pickZ,_=this.gl;return this.pickZ=v,Je(_,xf(xf({scissorTest:!0,scissor:[u,h,f,p],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},wf),{},{blend:!v}),(function(){ne(d(o.prototype),"render",t).call(t,{target:l,layers:n,layerFilter:r,views:i,viewports:a,onViewportActive:s,pass:g,redrawReason:y})}))}},{key:"shouldDrawLayer",value:function(e){return e.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(e,t){var n=this.pickZ?{blend:!1}:xf(xf({},wf),{},{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return Object.assign({},e.props.parameters,n)}}]),o}($d);function Af(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ef(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tf=function(){function e(t){i(this,e),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new _f(t),this.pickLayersPass=new Sf(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return a(e,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in e&&(this._onError=e.onError)}},{key:"renderLayers",value:function(e){var t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.onError=this._onError,e.effects=e.effects||[],e.target=e.target||In.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);var n=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(Cf(Cf({},e),{},{target:n}));this._postRender(e.effects,e),this.renderCount++,Zr("deckRenderer.renderLayers",this,r,e)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"finalize",value:function(){var e,t=this.renderBuffers,n=Af(t);try{for(n.s();!(e=n.n()).done;)e.value.delete()}catch(e){n.e(e)}finally{n.f()}t.length=0}},{key:"_preRender",value:function(e,t){var n,r=null,i=Af(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.preRender(this.gl,t),o.postRender&&(r=o)}}catch(e){i.e(e)}finally{i.f()}r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;0===e.length&&e.push(new In(this.gl),new In(this.gl));var t,n=Af(e);try{for(n.s();!(t=n.n()).done;)t.value.resize()}catch(e){n.e(e)}finally{n.f()}}},{key:"_postRender",value:function(e,t){var n,r=this.renderBuffers,i={inputBuffer:r[0],swapBuffer:r[1],target:null},o=Af(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.postRender){if(a===this.lastPostProcessEffect){i.target=t.target,a.postRender(this.gl,i);break}var s=a.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}}catch(e){o.e(e)}finally{o.f()}}}]),e}(),Pf={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Df(e){var t=e.pickedColors,n=e.layers,r=e.deviceX,i=e.deviceY,o=e.deviceRadius,a=e.deviceRect;if(t){for(var s=a.x,l=a.y,c=a.width,u=a.height,h=o*o,d=-1,f=0,p=0;p<u;p++){var m=p+l-i,g=m*m;if(g>h)f+=4*c;else for(var y=0;y<c;y++){if(t[f+3]-1>=0){var v=y+s-r,_=v*v+g;_<=h&&(h=_,d=f)}f+=4}}if(d>=0){var b=t[d+3]-1,x=t.slice(d,d+4),w=n[b];if(w){var S=w.decodePickingColor(x),A=Math.floor(d/4/c);return{pickedColor:x,pickedLayer:w,pickedObjectIndex:S,pickedX:s+(d/4-A*c),pickedY:l+A}}K.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Pf}function kf(e){var t=e.pickInfo,n=e.mode,r=e.viewports,i=e.layerFilter,o=e.pixelRatio,a=e.x,s=e.y,l=e.z,c=t&&t.pickedLayer,u=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.containsPixel(t)&&(!n||n(i)))return i}return e[0]}(r,{x:a,y:s},i&&c&&function(e){return i({layer:c,viewport:e,isPicking:!0,renderPass:"picking:".concat(n)})}),h=u&&u.unproject([a-u.x,s-u.y],{targetZ:l});return{color:null,layer:null,viewport:u,index:-1,picked:!1,x:a,y:s,pixel:[a,s],coordinate:h,devicePixel:t&&[t.pickedX,t.pickedY],pixelRatio:o}}function Of(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,o=t.pickedColor,a=t.pickedLayer,s=t.pickedObjectIndex,l=a?[a]:[];if("hover"===r){var c=n.index,u=n.layerId,h=a&&a.props.id;if(h!==u||s!==c){if(h!==u){var d=i.find((function(e){return e.props.id===u}));d&&l.unshift(d)}n.layerId=h,n.index=s,n.info=null}}var f=kf(e),p=new Map;return p.set(null,f),l.forEach((function(e){var t=Object.assign({},f);if(e===a&&(t.color=o,t.index=s,t.picked=!0),t=If({layer:e,info:t,mode:r}),e===a&&"hover"===r&&(n.info=t),t&&p.set(t.layer.id,t),"hover"===r&&e.props.autoHighlight){var i={pickingSelectedColor:a===e?o:null},l=e.props.highlightColor;a===e&&"function"==typeof l&&(i.pickingHighlightColor=l(t)),e.setModuleParameters(i),e.setNeedsRedraw()}})),p}function If(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.getPickingInfo({info:n,mode:r,sourceLayer:i}),t=t.parent}return n}function Rf(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Lf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bf=function(){function e(t){i(this,e),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new Sf(t),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return a(e,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"onError"in e&&(this._onError=e.onError),"_pickable"in e&&(this._pickable=e._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var t=e.x,n=e.y,r=e.layers,i=e.viewports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?r.find((function(e){return e.id===a})):null,c=s&&i.find((function(e){return e.id===s}))||i[0],u=c&&c.unproject([t-c.x,n-c.y]),h={x:t,y:n,viewport:c,coordinate:u,layer:l};return l?Object.assign({},o,h):Object.assign(h,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new In(e),In.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new In(e),this.depthFBO.attach(m({},36064,new an(e,{format:ae(e)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(e){if(!1===this._pickable)return null;var t=e.filter((function(e){return e.isPickable()&&!e.isComposite}));return t.length>255?(K.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}},{key:"_pickClosestObject",value:function(e){var t=e.layers,n=e.views,r=e.viewports,i=e.x,o=e.y,a=e.radius,s=void 0===a?0:a,l=e.depth,c=void 0===l?1:l,u=e.mode,h=void 0===u?"query":u,d=e.unproject3D,f=e.onViewportActive;if(!(t=this._getPickable(t)))return{result:[],emptyInfo:kf({viewports:r,x:i,y:o})};this._resizeBuffer();for(var p,m=Ke(this.gl),g=Qe(this.gl,[i,o],!0),y=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],v=Math.round(s*m),_=this.pickingFBO,b=_.width,x=_.height,w=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:v,deviceWidth:b,deviceHeight:x}),S=[],A={},E=0;E<c;E++){var M=Df({pickedColors:w&&this._drawAndSample({layers:t,views:n,viewports:r,onViewportActive:f,deviceRect:w,pass:"picking:".concat(h),redrawReason:h}),layers:t,deviceX:y[0],deviceY:y[1],deviceRadius:v,deviceRect:w}),C=void 0;if(M.pickedLayer&&d&&this.depthFBO&&(C=this._drawAndSample({layers:[M.pickedLayer],views:n,viewports:r,onViewportActive:f,deviceRect:{x:M.pickedX,y:M.pickedY,width:1,height:1},pass:"picking:".concat(h),redrawReason:"pick-z",pickZ:!0})[0]*r[0].distanceScales.metersPerUnit[2]+r[0].position[2]),M.pickedColor&&E+1<c){var T=M.pickedColor[3]-1;A[T]=!0,t[T].disablePickingIndex(M.pickedObjectIndex)}var P,D=Rf((p=Of({pickInfo:M,lastPickedInfo:this.lastPickedInfo,mode:h,layers:t,layerFilter:this.layerFilter,viewports:r,x:i,y:o,z:C,pixelRatio:m})).values());try{for(D.s();!(P=D.n()).done;){var k=P.value;k.layer&&S.push(k)}}catch(e){D.e(e)}finally{D.f()}if(!M.pickedColor)break}for(var O in A)t[O].restorePickingColors();return{result:S,emptyInfo:p&&p.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var t=e.layers,n=e.views,r=e.viewports,i=e.x,o=e.y,a=e.width,s=void 0===a?1:a,l=e.height,c=void 0===l?1:l,u=e.mode,h=void 0===u?"query":u,d=e.maxObjects,f=void 0===d?null:d,p=e.onViewportActive;if(!(t=this._getPickable(t)))return[];this._resizeBuffer();for(var m=Ke(this.gl),g=Qe(this.gl,[i,o],!0),y=g.x,v=g.y+g.height,_=Qe(this.gl,[i+s,o+c],!0),b=_.x+_.width,x=_.y,w={x:y,y:x,width:b-y,height:v-x},S=function(e){var t=e.pickedColors,n=e.layers,r=new Map;if(t)for(var i=0;i<t.length;i+=4){var o=t[i+3]-1;if(o>=0){var a=t.slice(i,i+4),s=a.join(",");if(!r.has(s)){var l=n[o];l?r.set(s,{pickedColor:a,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(a)}):K.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this._drawAndSample({layers:t,views:n,viewports:r,onViewportActive:p,deviceRect:w,pass:"picking:".concat(h),redrawReason:h}),layers:t}),A=new Map,E=Number.isFinite(f),M=0;M<S.length&&!(E&&A.size>=f);M++){var C=S[M],T={color:C.pickedColor,layer:null,index:C.pickedObjectIndex,picked:!0,x:i,y:o,width:s,height:c,pixelRatio:m};T=If({layer:C.pickedLayer,info:T,mode:h}),A.has(T.object)||A.set(T.object,T)}return Array.from(A.values())}},{key:"_drawAndSample",value:function(e){var t=e.layers,n=e.views,r=e.viewports,i=e.onViewportActive,o=e.deviceRect,a=e.pass,s=e.redrawReason,l=e.pickZ;if(Ar(o.width>0&&o.height>0),t.length<1)return null;var c=l?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,onError:this._onError,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:o,pass:a,redrawReason:s,pickZ:l});var u=o.x,h=o.y,d=o.width,f=o.height,p=new(l?Float32Array:Uint8Array)(d*f*4);return En(c,{sourceX:u,sourceY:h,sourceWidth:d,sourceHeight:f,target:p}),p}},{key:"_getPickingRect",value:function(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,o=e.deviceHeight,a=Math.max(0,t-r),s=Math.max(0,n-r),l=Math.min(i,t+r+1)-a,c=Math.min(o,n+r+1)-s;return l<=0||c<=0?null:{x:a,y:s,width:l,height:c}}}]),e}(),zf={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},Ff=function(){function e(t){i(this,e);var n=t.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,zf),n.appendChild(this.el))}return a(e,[{key:"setTooltip",value:function(e,t,n){var r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),e}();function Nf(e,t){if(!e)throw new Error(t)}var Uf={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n.g&&n.g,document:"undefined"!=typeof document&&document},jf=Uf.global||Uf.self||Uf.window,Vf="object"!==("undefined"==typeof process?"undefined":u(process))||"[object process]"!==String(process)||process.browser,Gf="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),Hf=(Gf&&parseFloat(Gf[1]),jf._parseImageNode),Wf="undefined"!=typeof Image,qf="undefined"!=typeof ImageBitmap,Zf=Boolean(Hf),Xf=!!Vf||Zf;function Yf(e){var t=function(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"===u(e)&&e.data&&e.width&&e.height?"data":null}(e);if(!t)throw new Error("Not an image");return t}function $f(e){switch(Yf(e)){case"data":return e;case"image":case"imagebitmap":var t=document.createElement("canvas"),n=t.getContext("2d");if(n)return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:return Nf(!1)}}var Jf=/^data:image\/svg\+xml/,Kf=/\.svg((\?|#).*)?$/;function Qf(e){return e&&(Jf.test(e)||Kf.test(e))}function ep(e,t){if(Qf(t)){var n=(new TextDecoder).decode(e);return"data:image/svg+xml;base64,".concat(btoa(n))}return tp(e,t)}function tp(e,t){if(Qf(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}function np(e,t,n){return rp.apply(this,arguments)}function rp(){return(rp=xn(_n().mark((function e(t,n,r){var i,o,a;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ep(t,r),o=self.URL||self.webkitURL,a="string"!=typeof i&&o.createObjectURL(i),e.prev=3,e.next=6,ip(a||i,n);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,a&&o.revokeObjectURL(a),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}function ip(e,t){return op.apply(this,arguments)}function op(){return(op=xn(_n().mark((function e(t,n){var r;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new Image).src=t,!(n.image&&n.image.decode&&r.decode)){e.next=6;break}return e.next=5,r.decode();case 5:return e.abrupt("return",r);case 6:return e.next=8,new Promise((function(e,n){try{r.onload=function(){return e(r)},r.onerror=function(e){return n(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(e){n(e)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ap={},sp=!0;function lp(e,t,n){return cp.apply(this,arguments)}function cp(){return(cp=xn(_n().mark((function e(t,n,r){var i,o,a;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qf(r)){e.next=7;break}return e.next=3,np(t,n,r);case 3:o=e.sent,i=o,e.next=8;break;case 7:i=tp(t,r);case 8:return a=n&&n.imagebitmap,e.next=11,up(i,a);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function up(e){return hp.apply(this,arguments)}function hp(){return(hp=xn(_n().mark((function e(t){var n,r=arguments;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dp(n=r.length>1&&void 0!==r[1]?r[1]:null)&&sp||(n=null),!n){e.next=13;break}return e.prev=3,e.next=6,createImageBitmap(t,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.warn(e.t0),sp=!1;case 13:return e.next=15,createImageBitmap(t);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function dp(e){for(var t in e||ap)return!1;return!0}var fp=!1,pp=!0;function mp(e){var t=gp(e);return function(e){var t=gp(e);return t.byteLength>=24&&2303741511===t.getUint32(0,fp)?{mimeType:"image/png",width:t.getUint32(16,fp),height:t.getUint32(20,fp)}:null}(t)||function(e){var t=gp(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,fp)&&255===t.getUint8(2)))return null;for(var n=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}(),r=n.tableMarkers,i=n.sofMarkers,o=2;o+9<t.byteLength;){var a=t.getUint16(o,fp);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,fp),width:t.getUint16(o+7,fp)};if(!r.has(a))return null;o+=2,o+=t.getUint16(o,fp)}return null}(t)||function(e){var t=gp(e);return t.byteLength>=10&&1195984440===t.getUint32(0,fp)?{mimeType:"image/gif",width:t.getUint16(6,pp),height:t.getUint16(8,pp)}:null}(t)||function(e){var t=gp(e);return t.byteLength>=14&&16973===t.getUint16(0,fp)&&t.getUint32(2,pp)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,pp),height:t.getUint32(22,pp)}:null}(t)}function gp(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}function yp(e,t){var n=(mp(e)||{}).mimeType,r=jf._parseImageNode;return Nf(r),r(e,n,t)}function vp(){return(vp=xn(_n().mark((function e(t,n,r){var i,o,a,s,l;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(n=n||{}).image||{},o=i.type||"auto",a=(r||{}).url,s=_p(o),e.t0=s,e.next="imagebitmap"===e.t0?8:"image"===e.t0?12:"data"===e.t0?16:20;break;case 8:return e.next=10,lp(t,n,a);case 10:return l=e.sent,e.abrupt("break",21);case 12:return e.next=14,np(t,n,a);case 14:return l=e.sent,e.abrupt("break",21);case 16:return e.next=18,yp(t,n);case 18:return l=e.sent,e.abrupt("break",21);case 20:Nf(!1);case 21:return"data"===o&&(l=$f(l)),e.abrupt("return",l);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _p(e){switch(e){case"auto":case"data":return function(){if(qf)return"imagebitmap";if(Wf)return"image";if(Xf)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return qf||Wf||Xf;case"imagebitmap":return qf;case"image":return Wf;case"data":return Xf;case"html":return Wf;case"ndarray":return Xf;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}const bp={id:"image",name:"Images",version:"2.3.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(e,t,n){return vp.apply(this,arguments)},tests:[function(e){return Boolean(mp(new DataView(e)))}],options:{image:{type:"auto",decode:!0}}},xp={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){var t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse};var wp="8.4.6",Sp=ce.CO.deck&&ce.CO.deck.VERSION;if(Sp&&Sp!==wp)throw new Error("deck.gl - multiple versions detected: ".concat(Sp," vs ").concat(wp));Sp||(ce.CO.deck=Object.assign(ce.CO.deck||{},{VERSION:wp,version:wp,log:K,_registerLoggers:function(e){qr=e}}),function(e){var t,n=nh(),r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return th(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?th(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e=Array.isArray(e)?e:[e]);try{var i=function(){var e=pc(t.value);n.find((function(t){return e===t}))||n.unshift(e)};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}([xp,[bp,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Ap=ce.CO.deck;function Ep(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cp=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,o),(t=r.call(this,e,n)).target=null,t._queryPending=!1,t._pollingPromise=null,Object.seal(s(t)),t}return a(o,null,[{key:"isSupported",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=ae(e),i=Nn(e,Ln),o=r||i,a=Ep(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;switch(s){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:_t(!1)}}}catch(e){a.e(e)}finally{a.f()}return o}}]),a(o,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl2.getParameter(36795)}},{key:"getResult",value:function(){return this.gl2.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function o(){e.isResultAvailable()?(r(e.getResult()),e._pollingPromise=null):n++>t?(i("Timed out"),e._pollingPromise=null):requestAnimationFrame(o)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return o.isSupported(this.gl)?this.gl2.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl2.deleteQuery(this.handle)}}]),o}(Dt);function Tp(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var Pp,Dp,kp=(0,ce.jU)()&&"undefined"!=typeof document,Op=0,Ip=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.onCreateContext,r=void 0===n?function(e){return st(e)}:n,o=t.onAddHTML,a=void 0===o?null:o,s=t.onInitialize,l=void 0===s?function(){}:s,c=t.onRender,u=void 0===c?function(){}:c,h=t.onFinalize,d=void 0===h?function(){}:h,f=t.onError,p=t.gl,m=void 0===p?null:p,g=t.glOptions,y=void 0===g?{}:g,v=t.debug,_=void 0!==v&&v,b=t.createFramebuffer,x=void 0!==b&&b,w=t.autoResizeViewport,S=void 0===w||w,A=t.autoResizeDrawingBuffer,E=void 0===A||A,M=t.stats,C=void 0===M?vt.get("animation-loop-".concat(Op++)):M,T=t.useDevicePixels,P=void 0===T||T;"useDevicePixelRatio"in t&&(re.deprecated("useDevicePixelRatio","useDevicePixels")(),P=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:a,onInitialize:l,onRender:u,onFinalize:d,onError:f,gl:m,glOptions:y,debug:_,createFramebuffer:x},this.gl=m,this.needsRedraw=null,this.timeline=null,this.stats=C,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:S,autoResizeDrawingBuffer:E,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var t;return a(e,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return _t("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var n=this._getPageLoadPromise().then((function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=Cp.isSupported(e.gl,["timers"])?new Cp(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}));return this.props.onError&&n.catch(this.props.onError),this}},{key:"redraw",value:function(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),Tp(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(t){e._resolveNextFrame=t}))),this._nextFramePromise}},{key:"toDataURL",value:(t=xn(_n().mark((function e(){return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isContextLost",value:function(){return this.gl.isContextLost()}},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return re.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;Tp(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=kp?new Promise((function(e,t){kp&&"complete"===document.readyState?e(document):window.addEventListener("load",(function(){e(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){var t;this.display&&this.display.requestAnimationFrame(e)||(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60))}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===u(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?lt(this.props.gl,e):this.onCreateContext(e),!oe(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Ye(this.gl,Pe),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas)ft(e,et(t.useDevicePixels),t);else{var n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new In(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}(),Rp=n(840),Lp=n.n(Rp),Bp={mousedown:1,mousemove:2,mouseup:4};Pp=Lp().PointerEventInput,Dp=Pp.prototype.handler,Pp.prototype.handler=function(e){var t=this.store;e.button>0&&(function(t,n){for(var r=0;r<t.length;r++)if(t[r].pointerId===e.pointerId)return!0;return!1}(t)||t.push(e)),Dp.call(this,e)},Lp().MouseInput.prototype.handler=function(e){var t=Bp[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};var zp=Lp().Manager;const Fp=Lp();var Np=Fp?[[Fp.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Fp.Rotate,{enable:!1}],[Fp.Pinch,{enable:!1}],[Fp.Swipe,{enable:!1}],[Fp.Pan,{threshold:0,enable:!1}],[Fp.Press,{enable:!1}],[Fp.Tap,{event:"doubletap",taps:2,enable:!1}],[Fp.Tap,{event:"anytap",enable:!1}],[Fp.Tap,{enable:!1}]]:null,Up={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},jp={doubletap:["tap"]},Vp={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Gp={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Hp={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Wp="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",qp="undefined"!=typeof window?window:n.g,Zp=(void 0!==n.g?n.g:window,"undefined"!=typeof document&&document,!1);try{var Xp={get passive(){return Zp=!0,!0}};qp.addEventListener("test",Xp,Xp),qp.removeEventListener("test",Xp,Xp)}catch(e){}var Yp=-1!==Wp.indexOf("firefox"),$p=["wheel","mousewheel","DOMMouseScroll"],Jp="wheel",Kp=4.000244140625,Qp=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},o),this.events=$p.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent,!!Zp&&{passive:!1})}))}return a(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){e===Jp&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;qp.WheelEvent&&(Yp&&e.deltaMode===qp.WheelEvent.DOM_DELTA_PIXEL&&(t/=qp.devicePixelRatio),e.deltaMode===qp.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%Kp==0&&(t=Math.floor(t/Kp)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:Jp,center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),em=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],tm="pointermove",nm="pointerover",rm="pointerout",im="pointerleave",om=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},o),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=em.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return a(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){e===tm&&(this.enableMoveEvent=t),e===nm&&(this.enableOverEvent=t),e===rm&&(this.enableOutEvent=t),e===im&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:nm,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:rm,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:im,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:tm,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),am=["keydown","keyup"],sm="keydown",lm="keyup",cm=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},o),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=am.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=o.tabIndex||0,t.style.outline="none",this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return a(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){e===sm&&(this.enableDownEvent=t),e===lm&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:sm,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:lm,srcEvent:e,key:e.key,target:e.target}))}}]),e}(),um="contextmenu",hm=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return a(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){e===um&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:um,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),dm={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},fm={srcElement:"root",priority:0},pm=function(){function e(t){i(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return a(e,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.handlers,a=this.handlersByElement;n&&("object"!==u(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},fm,n):fm;var s=a.get(n.srcElement);s||(s=[],a.set(n.srcElement,s));var l={type:e,handler:t,srcElement:n.srcElement,priority:n.priority};r&&(l.once=!0),i&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;for(var c=s.length-1;c>=0&&!(s[c].priority>=l.priority);)c--;s.splice(c+1,0,l)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===e&&o.handler===t){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=n.some((function(e){return!e.passive}))}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},o=function(){e.handled=!0,r=!0},a=[],s=0;s<n.length;s++){var l=n[s],c=l.type,u=l.handler,h=l.once;if(u(Object.assign({},e,{type:c,stopPropagation:i,stopImmediatePropagation:o})),h&&a.push(n[s]),r)break}for(var d=0;d<a.length;d++){var f=a[d],p=f.type,m=f.handler;this.remove(p,m)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=dm[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,l=!1;return 4===t||2===t&&!Number.isFinite(r)?(a=1===o,s=2===o,l=3===o):2===t?(a=Boolean(1&r),s=Boolean(4&r),l=Boolean(2&r)):1===t&&(a=0===i,s=1===i,l=2===i),{leftButton:a,middleButton:s,rightButton:l}}(e),function(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth,a=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/o,y:(r.y-i.top-t.clientTop)/a}}}(e,t),{handled:!1,rootElement:t})}}]),e}();function mm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ym={events:null,recognizers:null,recognizerOptions:{},Manager:zp,touchAction:"none",tabIndex:0},vm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.options=Object.assign({},ym,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var r=n.events;r&&this.on(r)}return a(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager;for(var i in this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Np}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Up).forEach((function(e){var n=t.manager.get(e);n&&Up[e].forEach((function(e){n.recognizeWith(e)}))})),n.recognizerOptions){var o=this.manager.get(i);if(o){var a=n.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new Qp(e,this._onOtherEvent,{enable:!1}),this.moveInput=new om(e,this._onOtherEvent,{enable:!1}),this.keyInput=new cm(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new hm(e,this._onOtherEvent,{enable:!1});var s,l=mm(this.events);try{for(l.s();!(s=l.n()).done;){var c=v(s.value,2),u=c[0],h=c[1];h.isEmpty()||(this._toggleRecognizer(h.recognizerName,!0),this.manager.on(u,h.handleEvent))}}catch(e){l.e(e)}finally{l.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=jp[e];i&&!this.options.recognizers&&i.forEach((function(i){var o=n.get(i);t?(o.requireFailure(e),r.dropRequireFailure(i)):o.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var o=this.manager,a=this.events,s=Hp[e]||e,l=a.get(s);l||(l=new pm(this),a.set(s,l),l.recognizerName=Gp[s]||s,o&&o.on(s,l.handleEvent)),l.add(e,t,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}else for(var c in n=t,e)this._addEventHandler(c,e[c],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=Hp[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var o,a=i.recognizerName,s=!1,l=mm(n.values());try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c.recognizerName===a&&!c.isEmpty()){s=!0;break}}}catch(e){l.e(e)}finally{l.f()}s||this._toggleRecognizer(a,!1)}}else for(var u in e)this._removeEventHandler(u,e[u])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=Vp[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();function _m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function wm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sm(){}var Am={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Sm,onResize:Sm,onViewStateChange:Sm,onInteractionStateChange:Sm,onBeforeRender:Sm,onAfterRender:Sm,onLoad:Sm,onError:null,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Em=function(){function e(t){i(this,e),t=Object.assign({},Am,t),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractionStateChange=this._onInteractionStateChange.bind(this),t.viewState&&t.initialViewState&&K.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,ce.qs)()&&K.warn("IE 11 support will be deprecated in v8.0")(),t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new gt({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Hn.setProps(t._typedArrayManagerProps),this.animationLoop.start()}return a(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&K.removed("onLayerHover","onHover")(),"onLayerClick"in e&&K.removed("onLayerClick","onClick")(),e.initialViewState&&!Qh(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);var t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t||n||r||i||o}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_addResources",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}},{key:"_removeResources",value:function(e){var t,n=xm(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.layerManager.resourceManager.remove(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_pick",value:function(e,t,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(t).timeStart();var i=this.deckPicker[e](Object.assign({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport},n));return r.get(t).timeEnd(),i}},{key:"_createCanvas",value:function(e){var t=e.canvas;"string"==typeof t&&Ar(t=document.getElementById(t)),t||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var n=e.id,r=e.style;return t.id=n,Object.assign(t.style,r),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,n=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,n=e.width,r=e.height,i=e.gl,o=e.glOptions,a=e.debug,s=e.useDevicePixels,l=e.autoResizeDrawingBuffer;return new Ip({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:l,autoResizeViewport:!1,gl:i,onCreateContext:function(e){return st(Object.assign({},o,e,{canvas:t.canvas,debug:a}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender,onError:e.onError})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var e=this.props.views||[new Nd({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.event){var t=this._pick("pickObject","pickObject Time",e),n=t.result,r=t.emptyInfo;this.interactiveState.isHovering=n.length>0;var i,o=r,a=!1,s=xm(n);try{for(s.s();!(i=s.n()).done;){var l=i.value;o=l,a=l.layer.onHover(l,e.event)}}catch(e){s.e(e)}finally{s.f()}if(!a&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip){var c=this.props.getTooltip(o);this.tooltip.setTooltip(c,o.x,o.y)}e.event=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,lt(e,{enable:!0,copyState:!0})),this.tooltip=new Ff(this.canvas),Ye(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var t=new S;for(var n in t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new vm(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),te)this.eventManager.on(n,this._onEvent);this.viewManager=new nd({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractionStateChange:this._onInteractionStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new Kh(e,{deck:this,stats:this.stats,viewport:r,timeline:t}),this.effectManager=new vf,this.deckRenderer=new Tf(e),this.deckPicker=new Bf(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var n=this.layerManager.context.gl;Ye(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),K.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=bm(bm({},this.viewState),{},m({},e.viewId,t)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}},{key:"_onEvent",value:function(e){var t=te[e.type],n=e.offsetCenter;if(t&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),o=i.layer,a=o&&(o[t.handler]||o.props[t.handler]),s=this.props[t.handler],l=!1;a&&(l=a.call(o,i,e)),!l&&s&&s(i,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var n=vt.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}]),e}();function Mm(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function Cm(e){return e?"function"==typeof e?(0,r.createElement)(ld,{},e):Array.isArray(e)?e.map(Cm):e.type===r.Fragment?Cm(e.props.children):(Mm(e.type,ld),e):e}function Tm(e){var t=e.children,n=e.layers,i=e.views,o=[],a=[],s={};return r.Children.forEach(Cm(t),(function(e){if(e){var t=e.type;if(Mm(t,Ih)){var n=function(e,t){var n={},r=e.defaultProps||{};for(var i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);a.push(n)}else o.push(e);if(t!==ld&&Mm(t,ld)&&e.props.id){var r=new t(e.props);s[r.id]=r}}})),Object.keys(s).length>0&&(Array.isArray(i)?i.forEach((function(e){s[e.id]=e})):i&&(s[i.id]=i),i=Object.values(s)),{layers:n=a.length>0?[].concat(a,A(n)):n,children:o,views:i}}Em.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(Zd)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,eventRecognizerOptions:e.object,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onInteractionStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,onError:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool,_pickable:e.bool,_typedArrayManagerProps:e.object}},Em.defaultProps=Am,Em.VERSION=Ap.VERSION;var Pm={position:"absolute",zIndex:-1};function Dm(e,t){return e?"function"==typeof e?e(t):Array.isArray(e)?e.map((function(e){return Dm(e,t)})):(o=(i=(n=e)&&n.type)&&i.defaultProps)&&o.mapStyle?(t.style=Pm,(0,r.cloneElement)(e,t)):function(e){var t=e&&e.type;return t&&t.deckGLViewProps}(e)?(0,r.cloneElement)(e,t):e:e;var n,i,o}function km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Om(e){var t=e.children,n=(e.viewports,e.deck),i=e.ContextProvider,o=(n||{}).viewManager;if(!o||!o.views.length)return[];var a,s={},l=o.views[0].id,c=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return km(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?km(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(c.s();!(a=c.n()).done;){var u=a.value,h=l,d=u;Mm(u.type,ld)&&(h=u.props.id||l,d=u.props.children);var f=o.getViewport(h),p=o.getViewState(h);f&&(d=Dm(d,{x:f.x,y:f.y,width:f.width,height:f.height,viewport:f,viewState:p}),s[h]||(s[h]={viewport:f,children:[]}),s[h].children.push(d))}}catch(e){c.e(e)}finally{c.f()}return Object.keys(s).map((function(e){var t=s[e],o=t.viewport,a=t.children,l={position:"absolute",left:o.x,top:o.y,width:o.width,height:o.height},c="view-".concat(e),u=r.createElement.apply(void 0,["div",{key:c,id:c,style:l}].concat(A(a)));if(i){var h={viewport:o,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:function(t){t.viewId=e,n._onViewStateChange(t)}};return(0,r.createElement)(i,{key:c,value:h},u)}return u}))}var Im={mixBlendMode:null};function Rm(e){var t=e.width,n=e.height,r=e.style,i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},o={left:0,top:0};if(r)for(var a in r)a in Im?o[a]=r[a]:i[a]=r[a];return{containerStyle:i,canvasStyle:o}}var Lm=Em.getPropTypes(p()),Bm=Em.defaultProps,zm=function(e){c(l,e);var t,n,o=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function l(e){var t;return i(this,l),(t=o.call(this,e)).viewports=null,t.children=null,t._needsRedraw=null,t._containerRef=r.createRef(),t._canvasRef=r.createRef(),t.pickObject=t.pickObject.bind(s(t)),t.pickMultipleObjects=t.pickMultipleObjects.bind(s(t)),t.pickObjects=t.pickObjects.bind(s(t)),t._extractJSXLayers=ns(Tm),t._positionChildrenUnderViews=ns(Om),t._extractStyles=ns(Rm),t}return a(l,[{key:"componentDidMount",value:function(){var e=this.props.Deck||Em;this.deck=this.deck||new e(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){return this.deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this.deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this.deck.pickObjects(e)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),n=t.layers,r=t.views,i=Object.assign({},e,{style:null,width:"100%",height:"100%",layers:n,views:r});this.deck.setProps(i)}},{key:"render",value:function(){var e=this.props,t=e.ContextProvider,n=e.width,i=e.height,o=e.style,a=(this.deck||{}).viewManager;this.viewports=a&&a.getViewports(),this.children=this._parseJSX(this.props).children;var s=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:t}),l=this._extractStyles({width:n,height:i,style:o}),c=l.containerStyle,u=l.canvasStyle,h=(0,r.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:u});return(0,r.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:c},[h,s])}}]),l}(r.Component);zm.propTypes=Lm,zm.defaultProps=Bm;const Fm={name:"project32",dependencies:[jh],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"};var Nm={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},Um={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm,t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){var n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;if(e.pickingHighlightColor){var r=Array.from(e.pickingHighlightColor,(function(e){return e/255}));Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}};const jm=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},Um);function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Gm={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Hm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.id,r=void 0===n?St("geometry"):n,o=t.drawMode,a=void 0===o?Gm.TRIANGLES:o,s=t.attributes,l=void 0===s?{}:s,c=t.indices,u=void 0===c?null:c,h=t.vertexCount,d=void 0===h?null:h;this.id=r,this.drawMode=0|a,this.attributes={},this.userData={},this._setAttributes(l,u),this.vertexCount=d||this._calculateVertexCount(this.attributes,this.indices)}return a(e,null,[{key:"DRAW_MODE",get:function(){return Gm}}]),a(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var r=e[n];r=ArrayBuffer.isView(r)?{value:r}:r,_t(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(_t(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var n=1/0;for(var r in e){var i=e[r],o=i.value,a=i.size;!i.constant&&o&&a>=1&&(n=Math.min(n,o.length/a))}return _t(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),e}();var Wm=[0,0,0,255],qm={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Wm},getLineColor:{type:"accessor",value:Wm},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},Zm=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"getShaders",value:function(){return ne(d(o.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Fm,jm]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(ne(d(o.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),r.extensionsChanged){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.radiusUnits,o=r.radiusScale,a=r.radiusMinPixels,s=r.radiusMaxPixels,l=r.stroked,c=r.filled,u=r.lineWidthUnits,h=r.lineWidthScale,d=r.lineWidthMinPixels,f=r.lineWidthMaxPixels,p="pixels"===i?n.metersPerPixel:1,m="pixels"===u?n.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({stroked:l?1:0,filled:c,radiusScale:o*p,radiusMinPixels:a,radiusMaxPixels:s,lineWidthScale:h*m,lineWidthMinPixels:d,lineWidthMaxPixels:f}).draw()}},{key:"_getModel",value:function(e){return new ma(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new Hm({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),o}(Ih);Zm.layerName="ScatterplotLayer",Zm.defaultProps=qm;var Xm=[0,0,0,255],Ym={getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getSourceColor:{type:"accessor",value:Xm},getTargetColor:{type:"accessor",value:Xm},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},$m=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){return i(this,o),r.apply(this,arguments)}return a(o,[{key:"getShaders",value:function(){return ne(d(o.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  float unitZ = dh == 0.0 ? 0.0 : deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Fm,jm]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:Xm},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:Xm},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(ne(d(o.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),r.extensionsChanged){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.widthUnits,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,l=r.greatCircle,c=r.wrapLongitude,u="pixels"===i?n.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({greatCircle:l,widthScale:o*u,widthMinPixels:a,widthMaxPixels:s,useShortestPath:c}).draw()}},{key:"_getModel",value:function(e){for(var t=[],n=0;n<50;n++)t=t.concat([n,1,0,n,-1,0]);var r=new ma(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Hm({drawMode:5,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}));return r.setUniforms({numSegments:50}),r}},{key:"wrapLongitude",get:function(){return!1}}]),o}(Ih);$m.layerName="ArcLayer",$m.defaultProps=Ym;var Jm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.opts=t}return a(e,[{key:"equals",value:function(e){return this===e||this.constructor===e.constructor&&Qh(this.opts,e.opts)}},{key:"getShaders",value:function(e){return null}},{key:"getSubLayerProps",value:function(e){var t=e.constructor.defaultProps,n=void 0===t?{}:t,r={updateTriggers:{}};for(var i in n)if(i in this.props){var o=n[i],a=this.props[i];r[i]=a,o&&"accessor"===o.type&&(r.updateTriggers[i]=this.props.updateTriggers[i],"function"==typeof a&&(r[i]=this.getSubLayerAccessor(a,!0)))}return r}},{key:"initializeState",value:function(e,t){}},{key:"updateState",value:function(e,t){}},{key:"draw",value:function(e,t){}},{key:"finalizeState",value:function(e){}}]),e}(),Km="\nuniform DATAFILTER_TYPE filter_min;\nuniform DATAFILTER_TYPE filter_softMin;\nuniform DATAFILTER_TYPE filter_softMax;\nuniform DATAFILTER_TYPE filter_max;\nuniform bool filter_useSoftMargin;\nuniform bool filter_enabled;\nuniform bool filter_transformSize;\n\n#ifdef NON_INSTANCED_MODEL\n  #define DATAFILTER_ATTRIB filterValues\n  #define DATAFILTER_ATTRIB_64LOW filterValues64Low\n#else\n  #define DATAFILTER_ATTRIB instanceFilterValues\n  #define DATAFILTER_ATTRIB_64LOW instanceFilterValues64Low\n#endif\n\nattribute DATAFILTER_TYPE DATAFILTER_ATTRIB;\n#ifdef DATAFILTER_DOUBLE\n  attribute DATAFILTER_TYPE DATAFILTER_ATTRIB_64LOW;\n\n  uniform DATAFILTER_TYPE filter_min64High;\n  uniform DATAFILTER_TYPE filter_max64High;\n#endif\n\nvarying float dataFilter_value;\n\nfloat dataFilter_reduceValue(float value) {\n  return value;\n}\nfloat dataFilter_reduceValue(vec2 value) {\n  return min(value.x, value.y);\n}\nfloat dataFilter_reduceValue(vec3 value) {\n  return min(min(value.x, value.y), value.z);\n}\nfloat dataFilter_reduceValue(vec4 value) {\n  return min(min(value.x, value.y), min(value.z, value.w));\n}\nvoid dataFilter_setValue(DATAFILTER_TYPE valueFromMin, DATAFILTER_TYPE valueFromMax) {\n  if (filter_enabled) {\n    if (filter_useSoftMargin) {\n      dataFilter_value = dataFilter_reduceValue(\n        smoothstep(filter_min, filter_softMin, valueFromMin) *\n        (1.0 - smoothstep(filter_softMax, filter_max, valueFromMax))\n      );\n    } else {\n      dataFilter_value = dataFilter_reduceValue(\n        step(filter_min, valueFromMin) * step(valueFromMax, filter_max)\n      );\n    }\n  } else {\n    dataFilter_value = 1.0;\n  }\n}\n",Qm="\nuniform bool filter_transformColor;\nvarying float dataFilter_value;\n",eg=function(e){if(!e||!e.extensions)return{};var t=e.filterRange,n=void 0===t?[-1,1]:t,r=e.filterEnabled,i=void 0===r||r,o=e.filterTransformSize,a=void 0===o||o,s=e.filterTransformColor,l=void 0===s||s,c=e.filterSoftRange||n,u=Number.isFinite(n[0])?{filter_min:n[0],filter_softMin:c[0],filter_softMax:c[1],filter_max:n[1]}:{filter_min:n.map((function(e){return e[0]})),filter_softMin:c.map((function(e){return e[0]})),filter_softMax:c.map((function(e){return e[1]})),filter_max:n.map((function(e){return e[1]}))};return u.filter_enabled=i,u.filter_useSoftMargin=Boolean(e.filterSoftRange),u.filter_transformSize=i&&a,u.filter_transformColor=i&&l,u},tg={"vs:#main-start":"\n    #ifdef DATAFILTER_DOUBLE\n      dataFilter_setValue(\n        DATAFILTER_ATTRIB - filter_min64High + DATAFILTER_ATTRIB_64LOW,\n        DATAFILTER_ATTRIB - filter_max64High + DATAFILTER_ATTRIB_64LOW\n      );\n    #else\n      dataFilter_setValue(DATAFILTER_ATTRIB, DATAFILTER_ATTRIB);\n    #endif\n  ","vs:DECKGL_FILTER_SIZE":"\n    if (filter_transformSize) {\n      size = size * dataFilter_value;\n    }\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (dataFilter_value == 0.0) discard;\n    if (filter_transformColor) {\n      color.a *= dataFilter_value;\n    }\n  "},ng={name:"data-filter",vs:Km,fs:Qm,inject:tg,getUniforms:eg},rg={name:"data-filter-fp64",vs:Km,fs:Qm,inject:tg,getUniforms:function(e){if(!e||!e.extensions)return{};var t=eg(e);if(Number.isFinite(t.filter_min)){var n=Math.fround(t.filter_min);t.filter_min-=n,t.filter_softMin-=n,t.filter_min64High=n;var r=Math.fround(t.filter_max);t.filter_max-=r,t.filter_softMax-=r,t.filter_max64High=r}else{var i=t.filter_min.map(Math.fround);t.filter_min=t.filter_min.map((function(e,t){return e-i[t]})),t.filter_softMin=t.filter_softMin.map((function(e,t){return e-i[t]})),t.filter_min64High=i;var o=t.filter_max.map(Math.fround);t.filter_max=t.filter_max.map((function(e,t){return e-o[t]})),t.filter_softMax=t.filter_softMax.map((function(e,t){return e-o[t]})),t.filter_max64High=o}return t}};function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var og={blend:!0,blendFunc:[1,1,1,1],blendEquation:[32774,32774],depthTest:!1};function ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ag(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ag(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lg={1:"float",2:"vec2",3:"vec3",4:"vec4"},cg=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterSize,n=void 0===t?1:t,a=e.fp64,s=void 0!==a&&a,l=e.countItems,c=void 0!==l&&l;if(i(this,o),!lg[n])throw new Error("filterSize out of range");return r.call(this,{filterSize:n,fp64:s,countItems:c})}return a(o,[{key:"getShaders",value:function(e){var t=e.opts,n=t.filterSize,r=t.fp64;return{modules:[r?rg:ng],defines:{DATAFILTER_TYPE:lg[n],DATAFILTER_DOUBLE:Boolean(r)}}}},{key:"initializeState",value:function(e,t){var n=this.getAttributeManager();n&&n.add({filterValues:{size:t.opts.filterSize,type:t.opts.fp64?5130:5126,accessor:"getFilterValue",shaderAttributes:{filterValues:{divisor:0},instanceFilterValues:{divisor:1}}}});var r=this.context.gl;if(n&&t.opts.countItems){var i=function(e){return e.getExtension("EXT_float_blend")&&(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float"))}(r);n.add({filterIndices:{size:i?1:2,vertexOffset:1,type:5121,normalized:!0,accessor:function(e,t){var n=t.index,r=e&&e.__source?e.__source.index:n;return i?(r+1)%255:[(r+1)%255,Math.floor(r/255)%255]},shaderAttributes:{filterPrevIndices:{vertexOffset:0},filterIndices:{vertexOffset:1}}}});var o=function(e,t){return new In(e,t?{width:1,height:1,attachments:m({},36064,new an(e,{format:ae(e)?34836:6408,type:5126,mipmaps:!1}))}:{width:256,height:64,depth:!1})}(r,i),a=function(e,t,n){return t.defines.NON_INSTANCED_MODEL=1,n&&(t.defines.FLOAT_TARGET=1),new ma(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:"data-filter-aggregation-model",vertexCount:1,isInstanced:!1,drawMode:0,vs:"#define SHADER_NAME data-filter-vertex-shader\n\n#ifdef FLOAT_TARGET\n  attribute float filterIndices;\n  attribute float filterPrevIndices;\n#else\n  attribute vec2 filterIndices;\n  attribute vec2 filterPrevIndices;\n#endif\n\nvarying vec4 vColor;\nconst float component = 1.0 / 255.0;\n\nvoid main() {\n  #ifdef FLOAT_TARGET\n    dataFilter_value *= float(filterIndices != filterPrevIndices);\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n    vColor = vec4(0.0, 0.0, 0.0, 1.0);\n  #else\n    // Float texture is not supported: pack result into 4 channels x 256 px x 64px\n    dataFilter_value *= float(filterIndices.x != filterPrevIndices.x);\n    float col = filterIndices.x;\n    float row = filterIndices.y * 4.0;\n    float channel = floor(row);\n    row = fract(row);\n    vColor = component * vec4(bvec4(channel == 0.0, channel == 1.0, channel == 2.0, channel == 3.0));\n    gl_Position = vec4(col * 2.0 - 1.0, row * 2.0 - 1.0, 0.0, 1.0);\n  #endif\n  gl_PointSize = 1.0;\n}\n",fs:"#define SHADER_NAME data-filter-fragment-shader\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main() {\n  if (dataFilter_value < 0.5) {\n    discard;\n  }\n  gl_FragColor = vColor;\n}\n"},t))}(r,t.getShaders(t),i);this.setState({filterFBO:o,filterModel:a})}}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps;if(this.state.filterModel){var r=this.getAttributeManager().attributes.filterValues.needsUpdate()||t.filterEnabled!==n.filterEnabled||t.filterRange!==n.filterRange||t.filterSoftRange!==n.filterSoftRange;r&&this.setState({filterNeedsUpdate:r})}}},{key:"draw",value:function(e,t){var n=this.state,r=n.filterFBO,i=n.filterModel,o=n.filterNeedsUpdate,a=this.props.onFilteredItemsChange;if(o&&a&&i){var s=this.getAttributeManager().attributes,l=s.filterValues,c=s.filterIndices;i.setVertexCount(this.getNumInstances()),gn(this.context.gl,{framebuffer:r,color:[0,0,0,0]}),i.updateModuleSettings(e.moduleParameters).setAttributes(sg(sg({},l.getShaderAttributes()),c&&c.getShaderAttributes())).draw({framebuffer:r,parameters:sg(sg({},og),{},{viewport:[0,0,r.width,r.height]})});for(var u=En(r),h=0,d=0;d<u.length;d++)h+=u[d];a({id:this.id,count:h}),this.state.filterNeedsUpdate=!1}}},{key:"finalizeState",value:function(){var e=this.state,t=e.filterFBO,n=e.filterModel;t&&(t.color.delete(),t.delete(),n.delete())}}]),o}(Jm);cg.extensionName="DataFilterExtension",cg.defaultProps={getFilterValue:{type:"accessor",value:0},onFilteredItemsChange:{type:"function",value:null,compare:!1},filterEnabled:!0,filterRange:[-1,1],filterSoftRange:null,filterTransformSize:!0,filterTransformColor:!0};var ug=n(2122),hg=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),dg="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,fg=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),pg="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(fg):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},mg=["top","right","bottom","left","width","height","size","weight"],gg="undefined"!=typeof MutationObserver,yg=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){pg(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,20);i=e}return s}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){dg&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),gg?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){dg&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;mg.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),vg=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},_g=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||fg},bg=Eg(0,0,0,0);function xg(e){return parseFloat(e)||0}function wg(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+xg(e["border-"+n+"-width"])}),0)}var Sg="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof _g(e).SVGGraphicsElement}:function(e){return e instanceof _g(e).SVGElement&&"function"==typeof e.getBBox};function Ag(e){return dg?Sg(e)?function(e){var t=e.getBBox();return Eg(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return bg;var r=_g(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=xg(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=xg(r.width),l=xg(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=wg(r,"left","right")+o),Math.round(l+a)!==n&&(l-=wg(r,"top","bottom")+a)),!function(e){return e===_g(e).document.documentElement}(e)){var c=Math.round(s+o)-t,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return Eg(i.left,i.top,s,l)}(e):bg}function Eg(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Mg=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Eg(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Ag(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Cg=function(e,t){var n,r,i,o,a,s,l,c=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),vg(l,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),l);vg(this,{target:e,contentRect:c})},Tg=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new hg,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof _g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Mg(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof _g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Cg(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Pg="undefined"!=typeof WeakMap?new WeakMap:new hg,Dg=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=yg.getInstance(),r=new Tg(t,n,this);Pg.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Dg.prototype[e]=function(){var t;return(t=Pg.get(this))[e].apply(t,arguments)}}));const kg=void 0!==fg.ResizeObserver?fg.ResizeObserver:Dg;"undefined"!=typeof window?window:n.g,void 0!==n.g?n.g:window;var Og="undefined"!=typeof document?document:{};function Ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ig(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Bg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zg=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fg(e){if(!e)return null;if("string"==typeof e)return e;e.toJS&&(e=e.toJS());var t,n={},r=Lg(e.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.id]=i}}catch(e){r.e(e)}finally{r.f()}var o=e.layers.map((function(e){var t=n[e.ref],r=null;if("interactive"in e&&delete(r=Rg({},e)).interactive,t){delete(r=r||Rg({},e)).ref;var i,o=Lg(zg);try{for(o.s();!(i=o.n()).done;){var a=i.value;a in t&&(r[a]=t[a])}}catch(e){o.e(e)}finally{o.f()}}return r||e}));return Rg(Rg({},e),{},{layers:o})}var Ng={container:f.object,gl:f.object,mapboxApiAccessToken:f.string,mapboxApiUrl:f.string,attributionControl:f.bool,preserveDrawingBuffer:f.bool,reuseMaps:f.bool,transformRequest:f.func,mapOptions:f.object,mapStyle:f.oneOfType([f.string,f.object]),preventStyleDiffing:f.bool,visible:f.bool,asyncRender:f.bool,onLoad:f.func,onError:f.func,width:f.number,height:f.number,viewState:f.object,longitude:f.number,latitude:f.number,zoom:f.number,bearing:f.number,pitch:f.number,altitude:f.number},Ug={container:Og.body,mapboxApiAccessToken:function(){var e=null;if("undefined"!=typeof window&&window.location){var t=window.location.search.match(/access_token=([^&\/]*)/);e=t&&t[1]}return e||"undefined"==typeof process||(e=e||{}.MapboxAccessToken||{}.REACT_APP_MAPBOX_ACCESS_TOKEN),e||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:function(){},onError:function(e){e&&console.error(e.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function jg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";e.debug&&f.checkPropTypes(Ng,e,"prop",t)}var Vg=function(){function e(t){var n=this;if(i(this,e),m(this,"props",Ug),m(this,"width",0),m(this,"height",0),m(this,"_fireLoadEvent",(function(){n.props.onLoad({type:"load",target:n._map})})),!t.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=t.mapboxgl,e.initialized||(e.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(t)}return a(e,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(e){return this._update(this.props,e),this}},{key:"redraw",value:function(){var e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(t){this._map=e.savedMap;var n=this._map.getContainer(),r=t.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,e.savedMap=null,t.mapStyle&&this._map.setStyle(Fg(t.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(t){if(t.reuseMaps&&e.savedMap)this._reuse(t);else{if(t.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,t.gl}}var r={container:t.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:Fg(t.mapStyle),interactive:!1,trackResize:!1,attributionControl:t.attributionControl,preserveDrawingBuffer:t.preserveDrawingBuffer};t.transformRequest&&(r.transformRequest=t.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},r,t.mapOptions)),this._map.once("load",t.onLoad),this._map.on("error",t.onError)}return this}},{key:"_destroy",value:function(){this._map&&(e.savedMap?this._map.remove():(e.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function(e){var t=this;jg(e=Object.assign({},Ug,e),"Mapbox"),this.mapboxgl.accessToken=e.mapboxApiAccessToken||Ug.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=e.mapboxApiUrl,this._create(e);var n=e.container;Object.defineProperty(n,"offsetWidth",{get:function(){return t.width}}),Object.defineProperty(n,"clientWidth",{get:function(){return t.width}}),Object.defineProperty(n,"offsetHeight",{get:function(){return t.height}}),Object.defineProperty(n,"clientHeight",{get:function(){return t.height}});var r=this._map.getCanvas();r&&(r.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,t){if(this._map){jg(t=Object.assign({},this.props,t),"Mapbox");var n=this._updateMapViewport(e,t),r=this._updateMapSize(e,t);this._updateMapStyle(e,t),t.asyncRender||!n&&!r||this.redraw(),this.props=t}}},{key:"_updateMapStyle",value:function(e,t){e.mapStyle!==t.mapStyle&&this._map.setStyle(Fg(t.mapStyle),{diff:!t.preventStyleDiffing})}},{key:"_updateMapSize",value:function(e,t){var n=e.width!==t.width||e.height!==t.height;return n&&(this.width=t.width,this.height=t.height,this._map.resize()),n}},{key:"_updateMapViewport",value:function(e,t){var n=this._getViewState(e),r=this._getViewState(t),i=r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude;return i&&(this._map.jumpTo(this._viewStateToMapboxProps(r)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude)),i}},{key:"_getViewState",value:function(e){var t=e.viewState||e,n=t.longitude,r=t.latitude,i=t.zoom,o=t.pitch,a=void 0===o?0:o,s=t.bearing,l=void 0===s?0:s,c=t.altitude;return{longitude:n,latitude:r,zoom:i,pitch:a,bearing:l,altitude:void 0===c?1.5:c}}},{key:"_checkStyleSheet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==Og)try{var t=Og.createElement("div");t.className="mapboxgl-map",t.style.display="none",Og.body.appendChild(t);var n="static"!==window.getComputedStyle(t).position;if(!n){var r=Og.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(e,"/mapbox-gl.css")),Og.head.appendChild(r)}}catch(e){}}},{key:"_viewStateToMapboxProps",value:function(e){return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}}}]),e}();m(Vg,"initialized",!1),m(Vg,"propTypes",Ng),m(Vg,"defaultProps",Ug),m(Vg,"savedMap",null);var Gg=n(6158),Hg=n.n(Gg);function Wg(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function qg(e,t){if(e===t)return!0;if(Wg(e)&&Wg(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!qg(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=1e-7}function Zg(e,t,n){return Math.max(t,Math.min(n,e))}function Xg(e,t,n){return Wg(e)?e.map((function(e,r){return Xg(e,t[r],n)})):n*t+(1-n)*e}function Yg(e,t){if(!e)throw new Error(t||"react-map-gl: assertion failed.")}function $g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$g(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kg={minZoom:0,maxZoom:24,minPitch:0,maxPitch:85},Qg=function(){function e(t){var n=t.width,r=t.height,o=t.latitude,a=t.longitude,s=t.zoom,l=t.bearing,c=void 0===l?0:l,u=t.pitch,h=void 0===u?0:u,d=t.altitude,f=void 0===d?1.5:d,p=t.maxZoom,m=void 0===p?Kg.maxZoom:p,g=t.minZoom,y=void 0===g?Kg.minZoom:g,v=t.maxPitch,_=void 0===v?Kg.maxPitch:v,b=t.minPitch,x=void 0===b?Kg.minPitch:b,w=t.transitionDuration,S=t.transitionEasing,A=t.transitionInterpolator,E=t.transitionInterruption,M=t.startPanLngLat,C=t.startZoomLngLat,T=t.startRotatePos,P=t.startBearing,D=t.startPitch,k=t.startZoom;i(this,e),Yg(Number.isFinite(n),"`width` must be supplied"),Yg(Number.isFinite(r),"`height` must be supplied"),Yg(Number.isFinite(a),"`longitude` must be supplied"),Yg(Number.isFinite(o),"`latitude` must be supplied"),Yg(Number.isFinite(s),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:o,longitude:a,zoom:s,bearing:c,pitch:h,altitude:f,maxZoom:m,minZoom:y,maxPitch:_,minPitch:x,transitionDuration:w,transitionEasing:S,transitionInterpolator:A,transitionInterruption:E}),this._state={startPanLngLat:M,startZoomLngLat:C,startRotatePos:T,startBearing:P,startPitch:D,startZoom:k}}return a(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=v(this._calculateNewLngLat({startPanLngLat:r,pos:t}),2),o=i[0],a=i[1];return this._getUpdatedMapState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startRotatePos:t,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t,n=e.pos,r=e.deltaAngleX,i=void 0===r?0:r,o=e.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,c=s.startBearing,u=s.startPitch;return Number.isFinite(c)&&Number.isFinite(u)?(t=n?this._calculateNewPitchAndBearing(Jg(Jg({},this._getRotationParams(n,l)),{},{startBearing:c,startPitch:u})):{bearing:c+i,pitch:u+a},this._getUpdatedMapState(t)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;Yg(r>0,"`scale` must be a positive number");var i=this._state,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(t)),Yg(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:o||0}),l=v(new rl(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:a,pos:t}),2),c=l[0],u=l[1];return this._getUpdatedMapState({zoom:s,longitude:c,latitude:u})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(t){return new e(Object.assign({},this._viewportProps,this._state,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=Zg(r,n,t);var i=e.maxPitch,o=e.minPitch,a=e.pitch;return e.pitch=Zg(a,o,i),Object.assign(e,al(e)),e}},{key:"_unproject",value:function(e){var t=new rl(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new rl(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return Zg(n+Math.log2(t),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=Zg(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=i;return n>0?l=i+n*(s-i):n<0&&(l=i-n*(a-i)),{pitch:l,bearing:r+180*t}}},{key:"_getRotationParams",value:function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[1],o=t[1],a=this._viewportProps,s=a.width,l=a.height,c=n/s,u=0;return r>0?Math.abs(l-o)>5&&(u=r/(o-l)*1.2):r<0&&o>5&&(u=1-i/o),{deltaScaleX:c,deltaScaleY:u=Math.min(1,Math.max(-1,u))}}}]),e}();function ey(e){return e[0].toLowerCase()+e.slice(1)}function ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ty(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ty(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ry=(0,r.createContext)({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),iy=ry.Provider;ry.Provider=function(e){var t=e.value,n=e.children,i=v((0,r.useState)(null),2),o=i[0],a=i[1],s=(0,r.useContext)(ry);return t=ny(ny({setMap:a},s),{},{map:s&&s.map||o},t),r.createElement(iy,{value:t},n)};const oy=ry,ay="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ly(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cy="A valid API access token is required to use Mapbox data",uy={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},hy=Object.assign({},Vg.propTypes,{width:f.oneOfType([f.number,f.string]),height:f.oneOfType([f.number,f.string]),onResize:f.func,disableTokenWarning:f.bool,visible:f.bool,className:f.string,style:f.object,visibilityConstraints:f.object}),dy=Object.assign({},Vg.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:Kg});function fy(){return r.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},r.createElement("h3",{key:"header"},cy),r.createElement("div",{key:"text"},"For information on setting up your basemap, read"),r.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}function py(e){e.target.scrollTo(0,0)}var my=(0,r.forwardRef)((function(e,t){var n=v((0,r.useState)(!0),2),i=n[0],o=n[1],a=v((0,r.useState)([0,0]),2),s=a[0],l=a[1],c=(0,r.useRef)(null),u=(0,r.useRef)(null),h=(0,r.useRef)(null),d=(0,r.useContext)(oy);ay((function(){if(my.supported()){var t=new Vg(ly(ly({},e),{},{mapboxgl:Hg(),width:s[0],height:s[1],container:u.current,onError:function(t){401===(t.error&&t.error.status||t.status)&&i&&(console.error(cy),o(!1)),e.onError(t)}}));c.current=t,d&&d.setMap&&d.setMap(t.getMap());var n=new kg((function(t){if(t[0].contentRect){var n=t[0].contentRect,r=n.width,i=n.height;l([r,i]),e.onResize({width:r,height:i})}}));return n.observe(h.current),function(){t.finalize(),c.current=null,n.disconnect()}}}),[]),ay((function(){c.current&&c.current.setProps(Object.assign({},e,{width:s[0],height:s[1]}))}));var f=c.current&&c.current.getMap();(0,r.useImperativeHandle)(t,(function(){return function(e){return{getMap:function(){return e.current&&e.current.getMap()},queryRenderedFeatures:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.current&&e.current.getMap();return r&&r.queryRenderedFeatures(t,n)}}}(c)}),[]);var p=f&&r.createElement(iy,{value:ly(ly({},d),{},{viewport:d.viewport||new rl(ly(ly(ly({},e),e.viewState),{},{width:s[0],height:s[1]})),map:f,container:d.container||h.current})},r.createElement("div",{key:"map-overlays",className:"overlays",style:uy,onScroll:py},e.children)),m=e.className,g=e.width,y=e.height,_=e.style,b=e.visibilityConstraints,x=Object.assign({position:"relative"},_,{width:g,height:y}),w=e.visible&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kg;for(var n in t){var r=n.slice(0,3),i=ey(n.slice(3));if("min"===r&&e[i]<t[n])return!1;if("max"===r&&e[i]>t[n])return!1}return!0}(e.viewState||e,b),S=Object.assign({},uy,{visibility:w?"inherit":"hidden"});return r.createElement("div",{key:"map-container",ref:h,style:x},r.createElement("div",{key:"map-mapbox",ref:u,style:S,className:m}),p,!i&&!e.disableTokenWarning&&r.createElement(fy,null))}));my.supported=function(){return Hg()&&Hg().supported()},my.propTypes=hy,my.defaultProps=dy;const gy=my;function yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vy=function(){function e(){i(this,e),m(this,"propNames",[])}return a(e,[{key:"arePropsEqual",value:function(e,t){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.propNames||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!qg(e[i],t[i]))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){Yg(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(e,t){return t.transitionDuration}}]),e}(),_y={longitude:1,bearing:1};function by(e){return Number.isFinite(e)||Array.isArray(e)}function xy(e,t,n){return function(e){return e in _y}(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}function wy(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Sy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ay=["longitude","latitude","zoom","bearing","pitch"],Ey=["latitude","longitude","zoom","width","height"],My=["bearing","pitch"],Cy={speed:1.2,curve:1.414};function Ty(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Py(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,o),m(s(e=r.call(this)),"propNames",Ay),e.props=Object.assign({},Cy,t),e}a(o,[{key:"initializeProps",value:function(e,t){var n,r={},i={},o=wy(Ey);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e[a],l=t[a];Yg(by(s)&&by(l),"".concat(a," must be supplied for transition")),r[a]=s,i[a]=xy(a,s,l)}}catch(e){o.e(e)}finally{o.f()}var c,u=wy(My);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=e[h]||0,f=t[h]||0;r[h]=d,i[h]=xy(h,d,f)}}catch(e){u.e(e)}finally{u.f()}return{start:r,end:i}}},{key:"interpolateProps",value:function(e,t,n){var r,i=function(e,t,n){var r={},i=dl(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),o=i.startZoom,a=i.startCenterXY,s=i.uDelta,l=i.w0,c=i.u1,u=i.S,h=i.rho,d=i.rho2,f=i.r0;if(c<cl){var p,m=sl(ul);try{for(m.s();!(p=m.n()).done;){var g=p.value,y=e[g],v=t[g];r[g]=Ls(y,v,n)}}catch(e){m.e(e)}finally{m.f()}return r}var _=n*u,b=Math.cosh(f)/Math.cosh(f+h*_),x=l*((Math.cosh(f)*Math.tanh(f+h*_)-Math.sinh(f))/d)/c,w=o+Gs(1/b),S=Es([],s,x);As(S,S,a);var A=Ws(S);return r.longitude=A[0],r.latitude=A[1],r.zoom=w,r}(e,t,n,this.props),o=wy(My);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=Xg(e[a],t[a],n)}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"getDuration",value:function(e,t){var n=t.transitionDuration;return"auto"===n&&(n=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=Object.assign({},hl,r),o=i.screenSpeed,a=i.speed,s=i.maxDuration,l=dl(e,t,r),c=l.S,u=l.rho,h=1e3*c;return n=Number.isFinite(o)?h/(o/u):h/a,Number.isFinite(s)&&n>s?0:n}(e,t,this.props)),n}}])}(vy);var Dy=["longitude","latitude","zoom","bearing","pitch"],ky=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,o),e=r.call(this),Array.isArray(t)&&(t={transitionProps:t}),e.propNames=t.transitionProps||Dy,t.around&&(e.around=t.around),e}return a(o,[{key:"initializeProps",value:function(e,t){var n={},r={};if(this.around){n.around=this.around;var i=new rl(e).unproject(this.around);Object.assign(r,t,{around:new rl(t).project(i),aroundLngLat:i})}var o,a=Ty(this.propNames);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=e[s],c=t[s];Yg(by(l)&&by(c),"".concat(s," must be supplied for transition")),n[s]=l,r[s]=xy(s,l,c)}}catch(e){a.e(e)}finally{a.f()}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r,i={},o=Ty(this.propNames);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=Xg(e[a],t[a],n)}}catch(e){o.e(e)}finally{o.f()}if(t.around){var s=v(new rl(Object.assign({},t,i)).getMapCenterByLngLatPosition({lngLat:t.aroundLngLat,pos:Xg(e.around,t.around,n)}),2),l=s[0],c=s[1];i.longitude=l,i.latitude=c}return i}}]),o}(vy),Oy=function(){},Iy={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new ky,transitionInterruption:1,onTransitionStart:Oy,onTransitionInterrupt:Oy,onTransitionEnd:Oy,onViewportChange:Oy,onStateChange:Oy},Ry=function(){function e(t,n){var r=this;i(this,e),m(this,"_animationFrame",null),m(this,"_onTransitionFrame",(function(){r._animationFrame=requestAnimationFrame(r._onTransitionFrame),r._updateViewport()})),this.props=t,this.onViewportChange=t.onViewportChange||Oy,this.onStateChange=t.onStateChange||Oy,this.time=n||Date.now}return a(e,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(e){var t=this.props;if(this.props=e,this._shouldIgnoreViewportChange(t,e))return!1;if(this._isTransitionEnabled(e)){var n=Object.assign({},t),r=Object.assign({},e);if(this._isTransitionInProgress()&&(t.onTransitionInterrupt(),2===this.state.interruption?Object.assign(n,this.state.endProps):Object.assign(n,this.state.propsInTransition),4===this.state.interruption)){var i=this.time(),o=(i-this.state.startTime)/this.state.duration;r.transitionDuration=this.state.duration-(i-this.state.startTime),r.transitionEasing=function(e,t){var n=e(t);return function(r){return 1/(1-n)*(e(r*(1-t)+t)-n)}}(this.state.easing,o),r.transitionInterpolator=n.transitionInterpolator}return r.onTransitionStart(),this._triggerTransition(n,r),!0}return this._isTransitionInProgress()&&(t.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,n=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return!e||(this._isTransitionInProgress()?3===this.state.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t))}},{key:"_triggerTransition",value:function(e,t){Yg(this._isTransitionEnabled(t)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var n=t.transitionInterpolator,r=n.getDuration?n.getDuration(e,t):t.transitionDuration;if(0!==r){var i=t.transitionInterpolator.initializeProps(e,t),o={inTransition:!0,isZooming:e.zoom!==t.zoom,isPanning:e.longitude!==t.longitude||e.latitude!==t.latitude,isRotating:e.bearing!==t.bearing||e.pitch!==t.pitch};this.state={duration:r,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:this.time(),startProps:i.start,endProps:i.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(o)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var e=this.time(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,o=t.interpolator,a=t.startProps,s=t.endProps,l=!1,c=(e-n)/r;c>=1&&(c=1,l=!0),c=i(c);var u=o.interpolateProps(a,s,c),h=new Qg(Object.assign({},this.props,u));this.state.propsInTransition=h.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),l&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();function Ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ly(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}m(Ry,"defaultProps",Iy);var zy={transitionDuration:0},Fy={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new ky,transitionInterruption:1},Ny=300,Uy=function(e){return 1-(1-e)*(1-e)},jy=["wheel"],Vy=["panstart","panmove","panend"],Gy=["pinchstart","pinchmove","pinchend"],Hy=["tripanstart","tripanmove","tripanend"],Wy=["doubletap"],qy=["keydown"],Zy=function(){function e(){var t=this;i(this,e),m(this,"events",[]),m(this,"scrollZoom",!0),m(this,"dragPan",!0),m(this,"dragRotate",!0),m(this,"doubleClickZoom",!0),m(this,"touchZoom",!0),m(this,"touchRotate",!1),m(this,"keyboard",!0),m(this,"_interactionState",{isDragging:!1}),m(this,"_events",{}),m(this,"_setInteractionState",(function(e){Object.assign(t._interactionState,e),t.onStateChange&&t.onStateChange(t._interactionState)})),m(this,"_onTransition",(function(e,n){t.onViewportChange(e,t._interactionState,n)})),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new Ry({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return a(e,[{key:"handleEvent",value:function(e){this.mapState=this.getMapState();var t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"blockEvents",value:function(e){var t=this,n=setTimeout((function(){t._eventStartBlocked===n&&(t._eventStartBlocked=null)}),e);this._eventStartBlocked=n}},{key:"updateViewport",value:function(e,t,n){var r=this.mapState instanceof Qg?this.mapState.getViewportProps():this.mapState,i=By(By({},e.getViewportProps()),t),o=Object.keys(i).some((function(e){return r[e]!==i[e]}));this._state=e.getState(),this._setInteractionState(n),o&&this.onViewportChange(i,this._interactionState,r)}},{key:"getMapState",value:function(e){return new Qg(By(By(By({},this.mapStateProps),this._state),e))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(e){var t=e.onViewportChange,n=e.onStateChange,r=e.eventManager,i=void 0===r?this.eventManager:r,o=e.isInteractive,a=void 0===o||o,s=e.scrollZoom,l=void 0===s?this.scrollZoom:s,c=e.dragPan,u=void 0===c?this.dragPan:c,h=e.dragRotate,d=void 0===h?this.dragRotate:h,f=e.doubleClickZoom,p=void 0===f?this.doubleClickZoom:f,m=e.touchZoom,g=void 0===m?this.touchZoom:m,y=e.touchRotate,v=void 0===y?this.touchRotate:y,_=e.keyboard,b=void 0===_?this.keyboard:_;this.onViewportChange=t,this.onStateChange=n;var x=this.mapStateProps||{},w=x.height!==e.height||x.width!==e.width;this.mapStateProps=e,w&&(this.mapState=x,this.updateViewport(new Qg(e))),this._transitionManager.processViewportChange(e),this.eventManager!==i&&(this.eventManager=i,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(jy,a&&Boolean(l)),this.toggleEvents(Vy,a&&Boolean(u||d)),this.toggleEvents(Gy,a&&Boolean(g||v)),this.toggleEvents(Hy,a&&Boolean(v)),this.toggleEvents(Wy,a&&Boolean(p)),this.toggleEvents(qy,a&&Boolean(b)),this.scrollZoom=l,this.dragPan=u,this.dragRotate=d,this.doubleClickZoom=p,this.touchZoom=g,this.touchRotate=v,this.keyboard=b}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);this._panRotate=this.isFunctionKeyPressed(e)||e.rightButton;var n=this._panRotate?this.mapState.rotateStart({pos:t}):this.mapState.panStart({pos:t});return this.updateViewport(n,zy,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return!!this.isDragging()&&(this._panRotate?this._onPanRotate(e):this._onPanMove(e))}},{key:"_onPanEnd",value:function(e){return!!this.isDragging()&&(this._panRotate?this._onPanRotateEnd(e):this._onPanMoveEnd(e))}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.mapState.pan({pos:t});return this.updateViewport(n,zy,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(e){if(this.dragPan){var t=this.dragPan.inertia,n=void 0===t?Ny:t;if(n&&e.velocity){var r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.mapState.pan({pos:i}).panEnd();return this.updateViewport(o,By(By({},Fy),{},{transitionDuration:n,transitionEasing:Uy}),{isDragging:!1,isPanning:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=this.getCenter(e),n=this.mapState.rotate({pos:t});return this.updateViewport(n,zy,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(e){if(this.dragRotate){var t=this.dragRotate.inertia,n=void 0===t?Ny:t;if(n&&e.velocity){var r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.mapState.rotate({pos:i}).rotateEnd();return this.updateViewport(o,By(By({},Fy),{},{transitionDuration:n,transitionEasing:Uy}),{isDragging:!1,isRotating:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;var t=this.scrollZoom,n=t.speed,r=void 0===n?.01:n,i=t.smooth,o=void 0!==i&&i;e.preventDefault();var a=this.getCenter(e),s=e.delta,l=2/(1+Math.exp(-Math.abs(s*r)));s<0&&0!==l&&(l=1/l);var c=this.mapState.zoom({pos:a,scale:l});return this.updateViewport(c,By(By({},Fy),{},{transitionInterpolator:new ky({around:a}),transitionDuration:o?250:1}),{isPanning:!0,isZooming:!0}),!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.mapState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,zy,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.isDragging())return!1;if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.mapState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,zy,{isDragging:!0,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:Boolean(this.touchRotate)}),this._lastPinchEvent=e,!0}},{key:"_onPinchEnd",value:function(e){if(!this.isDragging())return!1;if(this.touchZoom){var t=this.touchZoom.inertia,n=void 0===t?Ny:t,r=this._lastPinchEvent;if(n&&r&&e.scale!==r.scale){var i=this.getCenter(e),o=this.mapState.rotateEnd(),a=Math.log2(e.scale),s=(a-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,a+s*n/2);return o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,By(By({},Fy),{},{transitionInterpolator:new ky({around:i}),transitionDuration:n,transitionEasing:Uy}),{isDragging:!1,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:!1}),this.blockEvents(n),!0}}var c=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(c,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(e){var t=this.getCenter(e),n=this.mapState.rotateStart({pos:t});return this.updateViewport(n,zy,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(e){if(!this.isDragging())return!1;if(!this.touchRotate)return!1;var t=this.getCenter(e);t[0]-=e.deltaX;var n=this.mapState.rotate({pos:t});return this.updateViewport(n,zy,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(e){if(!this.isDragging())return!1;if(this.touchRotate){var t=this.touchRotate.inertia,n=void 0===t?Ny:t;if(n&&e.velocityY){var r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],o=this.mapState.rotate({pos:i});return this.updateViewport(o,By(By({},Fy),{},{transitionDuration:n,transitionEasing:Uy}),{isDragging:!1,isRotating:!0}),this.blockEvents(n),!1}}var a=this.mapState.rotateEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.mapState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,Object.assign({},Fy,{transitionInterpolator:new ky({around:t})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.keyboard,i=r.zoomSpeed,o=void 0===i?2:i,a=r.moveSpeed,s=void 0===a?100:a,l=r.rotateSpeedX,c=void 0===l?15:l,u=r.rotateSpeedY,h=void 0===u?10:u,d=this.mapStateProps;switch(e.srcEvent.keyCode){case 189:t=n?this.getMapState({zoom:d.zoom-Math.log2(o)-1}):this.getMapState({zoom:d.zoom-Math.log2(o)});break;case 187:t=n?this.getMapState({zoom:d.zoom+Math.log2(o)+1}):this.getMapState({zoom:d.zoom+Math.log2(o)});break;case 37:t=n?this.getMapState({bearing:d.bearing-c}):this.mapState.pan({pos:[s,0],startPos:[0,0]});break;case 39:t=n?this.getMapState({bearing:d.bearing+c}):this.mapState.pan({pos:[-s,0],startPos:[0,0]});break;case 38:t=n?this.getMapState({pitch:d.pitch+h}):this.mapState.pan({pos:[0,s],startPos:[0,0]});break;case 40:t=n?this.getMapState({pitch:d.pitch-h}):this.mapState.pan({pos:[0,-s],startPos:[0,0]});break;default:return!1}return this.updateViewport(t,Fy)}}]),e}();function Xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xy(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $y=Object.assign({},gy.propTypes,{maxZoom:f.number,minZoom:f.number,maxPitch:f.number,minPitch:f.number,onViewStateChange:f.func,onViewportChange:f.func,onInteractionStateChange:f.func,transitionDuration:f.oneOfType([f.number,f.string]),transitionInterpolator:f.object,transitionInterruption:f.number,transitionEasing:f.func,onTransitionStart:f.func,onTransitionInterrupt:f.func,onTransitionEnd:f.func,scrollZoom:f.oneOfType([f.bool,f.object]),dragPan:f.oneOfType([f.bool,f.object]),dragRotate:f.oneOfType([f.bool,f.object]),doubleClickZoom:f.bool,touchZoom:f.oneOfType([f.bool,f.object]),touchRotate:f.oneOfType([f.bool,f.object]),keyboard:f.oneOfType([f.bool,f.object]),onHover:f.func,onClick:f.func,onDblClick:f.func,onContextMenu:f.func,onMouseDown:f.func,onMouseMove:f.func,onMouseUp:f.func,onTouchStart:f.func,onTouchMove:f.func,onTouchEnd:f.func,onMouseEnter:f.func,onMouseLeave:f.func,onMouseOut:f.func,onWheel:f.func,touchAction:f.string,eventRecognizerOptions:f.object,clickRadius:f.number,interactiveLayerIds:f.array,getCursor:f.func,controller:f.instanceOf(Zy)}),Jy=Object.assign({},gy.defaultProps,Kg,Ry.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(e){return e.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:function(e){var t=e.isDragging,n=e.isHovering;return t?"grabbing":n?"pointer":"grab"}});function Ky(e){if(e.lngLat||!e.offsetCenter)return e;var t=e.offsetCenter,n=[t.x,t.y],r=new rl(Object.assign({},this.props,this.props.viewState,{width:this.width,height:this.height}));return e.point=n,e.lngLat=r.unproject(n),e}function Qy(e){var t=this.map;if(!t||!e)return null;var n={},r=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return t.queryRenderedFeatures(r?[[e[0]-r,e[1]+r],[e[0]+r,e[1]-r]]:e,n)}catch(e){return null}}function ev(e,t){var n=this.props[e];n&&n(Ky.call(this,t))}function tv(e){ev.call(this,"touch"===e.pointerType?"onTouchStart":"onMouseDown",e)}function nv(e){ev.call(this,"touch"===e.pointerType?"onTouchEnd":"onMouseUp",e)}function rv(e){if(ev.call(this,"touch"===e.pointerType?"onTouchMove":"onMouseMove",e),!this.state.isDragging){var t,n=this.props,r=n.onHover,i=n.interactiveLayerIds;e=Ky.call(this,e),(i||r)&&(t=Qy.call(this,e.point)),r&&(e.features=t,r(e));var o=Boolean(i&&t&&t.length>0),a=o&&!this.state.isHovering,s=!o&&this.state.isHovering;a&&ev.call(this,"onMouseEnter",e),s&&ev.call(this,"onMouseLeave",e),(a||s)&&this.setState({isHovering:o})}}function iv(e){var t=this.props,n=t.onClick,r=t.onNativeClick,i=t.onDblClick,o=t.doubleClickZoom,a=[],s=i||o;switch(e.type){case"anyclick":a.push(r),s||a.push(n);break;case"click":s&&a.push(n)}(a=a.filter(Boolean)).length&&((e=Ky.call(this,e)).features=Qy.call(this,e.point),a.forEach((function(t){return t(e)})))}var ov=(0,r.forwardRef)((function(e,t){var n=(0,r.useContext)(oy),i=(0,r.useMemo)((function(){return e.controller||new Zy}),[]),o=(0,r.useMemo)((function(){return new vm(null,{touchAction:e.touchAction,recognizerOptions:e.eventRecognizerOptions})}),[]),a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)({width:0,height:0,state:{isHovering:!1,isDragging:!1}}).current;l.props=e,l.map=s.current&&s.current.getMap(),l.setState=function(t){l.state=Yy(Yy({},l.state),t),a.current.style.cursor=e.getCursor(l.state)};var c,u,h=!0,d=function(e,t,n){if(h)c=[e,t,n];else{var r=l.props,i=r.onViewStateChange,o=r.onViewportChange;i&&i({viewState:e,interactionState:t,oldViewState:n}),o&&o(e,t,n)}};(0,r.useImperativeHandle)(t,(function(){return function(e){return{getMap:e.current&&e.current.getMap,queryRenderedFeatures:e.current&&e.current.queryRenderedFeatures}}(s)}),[]);var f=(0,r.useMemo)((function(){return Yy(Yy({},n),{},{eventManager:o,container:n.container||a.current})}),[n,a.current]);f.onViewportChange=d;var p=function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==l.state.isDragging&&l.setState({isDragging:n}),h)u=e;else{var r=l.props.onInteractionStateChange;r&&r(e)}},m=function(){l.width&&l.height&&i.setOptions(Yy(Yy(Yy({},l.props),l.props.viewState),{},{isInteractive:Boolean(l.props.onViewStateChange||l.props.onViewportChange),onViewportChange:d,onStateChange:p,eventManager:o,width:l.width,height:l.height}))};(0,r.useEffect)((function(){return o.setElement(a.current),o.on({pointerdown:tv.bind(l),pointermove:rv.bind(l),pointerup:nv.bind(l),pointerleave:ev.bind(l,"onMouseOut"),click:iv.bind(l),anyclick:iv.bind(l),dblclick:ev.bind(l,"onDblClick"),wheel:ev.bind(l,"onWheel"),contextmenu:ev.bind(l,"onContextMenu")}),function(){o.destroy()}}),[]),ay((function(){c&&d.apply(void 0,A(c)),u&&p(u)})),m();var g=e.width,y=e.height,v=e.style,_=e.getCursor,b=(0,r.useMemo)((function(){return Yy(Yy({position:"relative"},v),{},{width:g,height:y,cursor:_(l.state)})}),[v,g,y,_,l.state]);return c&&l._child||(l._child=r.createElement(iy,{value:f},r.createElement("div",{key:"event-canvas",ref:a,style:b},r.createElement(gy,(0,ug.Z)({},e,{width:"100%",height:"100%",style:null,onResize:function(e){var t=e.width,n=e.height;l.width=t,l.height=n,m(),l.props.onResize({width:t,height:n})},ref:s}))))),h=!1,l._child}));ov.supported=gy.supported,ov.propTypes=$y,ov.defaultProps=Jy;f.string.isRequired,f.string;n(9756);f.oneOf(["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade","sky"]).isRequired,f.string,f.string,f.string;var av={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},sv={captureScroll:f.bool,captureDrag:f.bool,captureClick:f.bool,captureDoubleClick:f.bool,capturePointerMove:f.bool};function lv(e){var t=e.containerRef.current,n=e.context.eventManager;if(t&&n){var r={wheel:function(t){var n=e.props;n.captureScroll&&t.stopPropagation(),n.onScroll&&n.onScroll(t,e)},panstart:function(t){var n=e.props;n.captureDrag&&t.stopPropagation(),n.onDragStart&&n.onDragStart(t,e)},anyclick:function(t){var n=e.props;n.captureClick&&t.stopPropagation(),n.onClick&&n.onClick(t,e)},click:function(t){var n=e.props;n.captureClick&&t.stopPropagation(),n.onClick&&n.onClick(t,e)},dblclick:function(t){var n=e.props;n.captureDoubleClick&&t.stopPropagation(),n.onDoubleClick&&n.onDoubleClick(t,e)},pointermove:function(t){var n=e.props;n.capturePointerMove&&t.stopPropagation(),n.onPointerMove&&n.onPointerMove(t,e)}};return n.watch(r,t),function(){n.off(r)}}}function cv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useContext)(oy),n=(0,r.useRef)(null),i=(0,r.useRef)({props:e,state:{},context:t,containerRef:n}),o=i.current;return o.props=e,o.context=t,(0,r.useEffect)((function(){return lv(o)}),[t.eventManager]),o}function uv(e){var t=e.instance,n=cv(e),r=n.context,i=n.containerRef;return t._context=r,t._containerRef=i,t._render()}var hv=function(e){c(l,e);var t,n,o=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)});function l(){var e;i(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return m(s(e=o.call.apply(o,[this].concat(n))),"_context",{}),m(s(e),"_containerRef",(0,r.createRef)()),m(s(e),"_onScroll",(function(e){})),m(s(e),"_onDragStart",(function(e){})),m(s(e),"_onDblClick",(function(e){})),m(s(e),"_onClick",(function(e){})),m(s(e),"_onPointerMove",(function(e){})),e}return a(l,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return r.createElement(uv,(0,ug.Z)({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),l}(r.PureComponent);function dv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dv(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}m(hv,"propTypes",sv),m(hv,"defaultProps",av);var pv=Object.assign({},sv,{draggable:f.bool,onDrag:f.func,onDragEnd:f.func,onDragStart:f.func,offsetLeft:f.number,offsetTop:f.number}),mv=Object.assign({},av,{draggable:!1,offsetLeft:0,offsetTop:0});function gv(e){var t=e.offsetCenter;return[t.x,t.y]}function yv(e,t,n,r){var i=e[0]+t[0]-n.offsetLeft,o=e[1]+t[1]-n.offsetTop;return r.viewport.unproject([i,o])}function vv(e,t){var n=t.props,r=t.callbacks,i=t.state,o=t.context,a=t.containerRef;if(n.draggable){e.stopPropagation();var s=gv(e),l=function(e,t){var n=e.center,r=n.x,i=n.y;if(t){var o=t.getBoundingClientRect();return[o.left-r,o.top-i]}return null}(e,a.current);if(i.setDragPos(s),i.setDragOffset(l),r.onDragStart&&l){var c=Object.assign({},e);c.lngLat=yv(s,l,n,o),r.onDragStart(c)}}}var _v="undefined"!=typeof window&&window.devicePixelRatio||1,bv=function(e){return Math.round(e*_v)/_v},xv=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===e)return t;var r="x"===n?e.offsetWidth:e.offsetHeight;return bv(t/100*r)/r*100},wv=Object.assign({},pv,{className:f.string,longitude:f.number.isRequired,latitude:f.number.isRequired}),Sv=Object.assign({},mv,{className:""});function Av(e){var t=function(e){var t=v((0,r.useState)(null),2),n=t[0],i=t[1],o=v((0,r.useState)(null),2),a=o[0],s=o[1],l=cv(fv(fv({},e),{},{onDragStart:vv}));return l.callbacks=e,l.state.dragPos=n,l.state.setDragPos=i,l.state.dragOffset=a,l.state.setDragOffset=s,(0,r.useEffect)((function(){return function(e){var t=e.context.eventManager;if(t&&e.state.dragPos){var n={panmove:function(t){return function(e,t){var n=t.props,r=t.callbacks,i=t.state,o=t.context;e.stopPropagation();var a=gv(e);i.setDragPos(a);var s=i.dragOffset;if(r.onDrag&&s){var l=Object.assign({},e);l.lngLat=yv(a,s,n,o),r.onDrag(l)}}(t,e)},panend:function(t){return function(e,t){var n=t.props,r=t.callbacks,i=t.state,o=t.context;e.stopPropagation();var a=i.dragPos,s=i.dragOffset;if(i.setDragPos(null),i.setDragOffset(null),r.onDragEnd&&a&&s){var l=Object.assign({},e);l.lngLat=yv(a,s,n,o),r.onDragEnd(l)}}(t,e)},pancancel:function(t){return n=t,r=e.state,n.stopPropagation(),r.setDragPos(null),void r.setDragOffset(null);var n,r}};return t.watch(n),function(){t.off(n)}}}(l)}),[l.context.eventManager,Boolean(n)]),l}(e),n=t.state,i=t.containerRef,o=e.children,a=e.className,s=e.draggable,l=n.dragPos,c=function(e){var t=e.props,n=e.state,r=e.context,i=t.longitude,o=t.latitude,a=t.offsetLeft,s=t.offsetTop,l=n.dragPos,c=n.dragOffset;if(l&&c)return[l[0]+c[0],l[1]+c[1]];var u=v(r.viewport.project([i,o]),2),h=u[0],d=u[1];return[h+=a,d+=s]}(t),u=v(c,2),h=u[0],d=u[1],f="translate(".concat(bv(h),"px, ").concat(bv(d),"px)"),p=s?l?"grabbing":"grab":"auto",m=(0,r.useMemo)((function(){var e={position:"absolute",left:0,top:0,transform:f,cursor:p};return r.createElement("div",{className:"mapboxgl-marker ".concat(a),ref:t.containerRef,style:e},o)}),[o,a]),g=i.current;return g&&(g.style.transform=f,g.style.cursor=p),m}Av.defaultProps=Sv,Av.propTypes=wv,r.memo(Av);var Ev={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},Mv=Object.keys(Ev);function Cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cv(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pv=Object.assign({},sv,{className:f.string,longitude:f.number.isRequired,latitude:f.number.isRequired,altitude:f.number,offsetLeft:f.number,offsetTop:f.number,tipSize:f.number,closeButton:f.bool,closeOnClick:f.bool,anchor:f.oneOf(Object.keys(Ev)),dynamicPosition:f.bool,sortByDepth:f.bool,onClose:f.func}),Dv=Object.assign({},av,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function kv(e,t){var n=t.props,r=t.context;(n.closeOnClick||"mapboxgl-popup-close-button"===e.target.className)&&(n.onClose(),r.eventManager&&r.eventManager.once("click",(function(e){return e.stopPropagation()}),e.target))}function Ov(e){var t=(0,r.useRef)(null),n=cv(Tv(Tv({},e),{},{onClick:kv})),i=n.context,o=n.containerRef,a=v((0,r.useState)(!1),2)[1];(0,r.useEffect)((function(){a(!0)}),[t.current]);var s=i.viewport,l=e.className,c=e.longitude,u=e.latitude,h=e.altitude,d=e.tipSize,f=e.closeButton,p=e.children,m=s.project([c,u,h]),g=function(e,t,n,r){var i=v(r,2),o=i[0],a=i[1],s=e.anchor,l=e.dynamicPosition,c=e.tipSize;return n&&l?function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.selfWidth,a=e.selfHeight,s=e.anchor,l=e.padding,c=void 0===l?0:l,u=Ev[s],h=u.x,d=u.y,f=n-d*a,p=f+a,m=Math.max(0,c-f)+Math.max(0,p-i+c);if(m>0){var g=d,y=m;for(d=0;d<=1;d+=.5)p=(f=n-d*a)+a,(m=Math.max(0,c-f)+Math.max(0,p-i+c))<y&&(y=m,g=d);d=g}var v=.5;.5===d&&(h=Math.floor(h),v=1);var _=t-h*o,b=_+o,x=Math.max(0,c-_)+Math.max(0,b-r+c);if(x>0){var w=h,S=x;for(h=0;h<=1;h+=v)b=(_=t-h*o)+o,(x=Math.max(0,c-_)+Math.max(0,b-r+c))<S&&(S=x,w=h);h=w}return Mv.find((function(e){var t=Ev[e];return t.x===h&&t.y===d}))||s}({x:o,y:a,anchor:s,padding:c,width:t.width,height:t.height,selfWidth:n.clientWidth,selfHeight:n.clientHeight}):s}(e,s,t.current,m),y=function(e,t,n,r,i){var o=v(r,3),a=o[0],s=o[1],l=o[2],c=e.offsetLeft,u=e.offsetTop,h=e.sortByDepth,d=Ev[i],f=a+c,p=s+u,m=xv(n,100*-d.x),g=xv(n,100*-d.y,"y"),y={position:"absolute",transform:"\n      translate(".concat(m,"%, ").concat(g,"%)\n      translate(").concat(bv(f),"px, ").concat(bv(p),"px)\n    "),display:void 0,zIndex:void 0};return h?(l>1||l<-1||a<0||a>t.width||s<0||s>t.height?y.display="none":y.zIndex=Math.floor((1-l)/2*1e5),y):y}(e,s,o.current,m,g),_=(0,r.useCallback)((function(e){return!i.eventManager&&kv(e,n)}),[i.eventManager]);return r.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(g," ").concat(l),style:y,ref:o},r.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:d}}),r.createElement("div",{key:"content",ref:t,className:"mapboxgl-popup-content",onClick:_},f&&r.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},"×"),p))}function Iv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Ov.propTypes=Pv,Ov.defaultProps=Dv,r.memo(Ov);var Rv=Object.assign({},sv,{toggleLabel:f.string,className:f.string,style:f.object,compact:f.bool,customAttribution:f.oneOfType([f.string,f.arrayOf(f.string)])}),Lv=Object.assign({},av,{className:"",toggleLabel:"Toggle Attribution"});function Bv(e){var t=cv(e),n=t.context,i=t.containerRef,o=(0,r.useRef)(null),a=v((0,r.useState)(!1),2),s=a[0],l=a[1];(0,r.useEffect)((function(){var t;return n.map&&(t=function(e,t,n,r){var i=new(Hg().AttributionControl)(e);return i._map=t,i._container=n,i._innerContainer=r,i._updateAttributions(),i._updateEditLink(),t.on("styledata",i._updateData),t.on("sourcedata",i._updateData),i}({customAttribution:e.customAttribution},n.map,i.current,o.current)),function(){return t&&function(e){e._map.off("styledata",e._updateData),e._map.off("sourcedata",e._updateData)}(t)}}),[n.map]);var c=void 0===e.compact?n.viewport.width<=640:e.compact;(0,r.useEffect)((function(){!c&&s&&l(!1)}),[c]);var u=(0,r.useCallback)((function(){return l((function(e){return!e}))}),[]),h=(0,r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:h,className:e.className},r.createElement("div",{ref:i,"aria-pressed":s,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(c?"mapboxgl-compact":""," ").concat(s?"mapboxgl-compact-show":"")},r.createElement("button",{className:"mapboxgl-ctrl-attrib-button",title:e.toggleLabel,onClick:u}),r.createElement("div",{ref:o,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}function zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Bv.propTypes=Rv,Bv.defaultProps=Lv,r.memo(Bv);var Fv,Nv=Object.assign({},sv,{className:f.string,style:f.object,container:f.object,label:f.string}),Uv=Object.assign({},av,{className:"",container:null,label:"Toggle fullscreen"});function jv(e){var t=cv(e),n=t.context,i=t.containerRef,o=v((0,r.useState)(!1),2),a=o[0],s=o[1],l=v((0,r.useState)(!1),2),c=l[0],u=l[1],h=v((0,r.useState)(null),2),d=h[0],f=h[1];(0,r.useEffect)((function(){var t=e.container||n.container,r=new(Hg().FullscreenControl)({container:t});f(r),u(r._checkFullscreenSupport());var i=function(){var e=!r._fullscreen;r._fullscreen=e,s(e)};return Og.addEventListener(r._fullscreenchange,i),function(){Og.removeEventListener(r._fullscreenchange,i)}}),[]);var p=(0,r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zv(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);if(!c)return null;var g=e.className,y=e.label,_=a?"shrink":"fullscreen";return r.createElement("div",{style:p,className:g},r.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},r.createElement("button",{key:_,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(_),type:"button",title:y,onClick:function(){d&&d._onClickFullscreen()}},r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}function Vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}jv.propTypes=Nv,jv.defaultProps=Uv,r.memo(jv);var Gv=Object.assign({},Ry.defaultProps,{transitionDuration:500}),Hv=function(){},Wv=Object.assign({},sv,{className:f.string,style:f.object,label:f.string,disabledLabel:f.string,auto:f.bool,positionOptions:f.object,fitBoundsOptions:f.object,trackUserLocation:f.bool,showUserLocation:f.bool,showAccuracyCircle:f.bool,onViewStateChange:f.func,onViewportChange:f.func,onGeolocate:f.func}),qv=Object.assign({},av,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showAccuracyCircle:!0,onGeolocate:function(){}});function Zv(e){var t=cv(e),n=t.context,i=t.containerRef,o=(0,r.useRef)(null),a=v((0,r.useState)(null),2),s=a[0],l=a[1],c=v((0,r.useState)(!1),2),u=c[0],h=c[1];(0,r.useEffect)((function(){var r;return n.map&&(void 0!==Fv?Promise.resolve(Fv):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(e){return Fv="denied"!==e.state})):(Fv=Boolean(window.navigator.geolocation),Promise.resolve(Fv))).then((function(i){h(i),o.current&&((r=function(e,t,n){var r=new(Hg().GeolocateControl)(t);r._container=Og.createElement("div"),r._map={on:function(){},_getUIString:function(){return""}},r._setupUI(!0),r._map=e.map,r._geolocateButton=n;var i=e.eventManager;return r.options.trackUserLocation&&i&&i.on("panstart",(function(){"ACTIVE_LOCK"===r._watchState&&(r._watchState="BACKGROUND",n.classList.add("mapboxgl-ctrl-geolocate-background"),n.classList.remove("mapboxgl-ctrl-geolocate-active"))})),r.on("geolocate",t.onGeolocate),r}(n,e,o.current))._updateCamera=function(e){return function(e,t){var n=t.context,r=t.props,i=function(e){var t=new(Hg().LngLat)(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=t.toBounds(n);return[[r._ne.lng,r._ne.lat],[r._sw.lng,r._sw.lat]]}(e),o=n.viewport.fitBounds(i,r.fitBoundsOptions),a=o.longitude,s=o.latitude,l=o.zoom,c=Object.assign({},n.viewport,{longitude:a,latitude:s,zoom:l}),u=new Qg(c),h=Object.assign({},u.getViewportProps(),Gv),d=r.onViewportChange||n.onViewportChange||Hv;(r.onViewStateChange||n.onViewStateChange||Hv)({viewState:h}),d(h)}(e,t)},l(r))})),function(){r&&r._clearWatch()}}),[n.map]);var d=(0,r.useCallback)((function(){s&&(s.options=t.props,s.trigger())}),[s]);(0,r.useEffect)((function(){e.auto&&d()}),[s,e.auto]),(0,r.useEffect)((function(){s&&s._onZoom()}),[n.viewport.zoom]);var f=e.className,p=e.label,g=e.disabledLabel,y=e.trackUserLocation,_=(0,r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vv(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:_,className:f},r.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},r.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:o,disabled:!u,"aria-pressed":!y,type:"button",title:u?p:g,"aria-label":u?p:g,onClick:d},r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}function Xv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Zv.propTypes=Wv,Zv.defaultProps=qv,r.memo(Zv);var Yv=function(){},$v=Object.assign({},sv,{className:f.string,style:f.object,onViewStateChange:f.func,onViewportChange:f.func,showCompass:f.bool,showZoom:f.bool,zoomInLabel:f.string,zoomOutLabel:f.string,compassLabel:f.string}),Jv=Object.assign({},av,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function Kv(e,t,n){var r=e.viewport,i=new Qg(Object.assign({},r,n)),o=Object.assign({},i.getViewportProps(),Fy),a=t.onViewportChange||e.onViewportChange||Yv;(t.onViewStateChange||e.onViewStateChange||Yv)({viewState:o}),a(o)}function Qv(e,t,n,i){return r.createElement("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(e),type:"button",title:t,onClick:n},i||r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function e_(e){var t=cv(e),n=t.context,i=t.containerRef,o=e.className,a=e.showCompass,s=e.showZoom,l=e.zoomInLabel,c=e.zoomOutLabel,u=e.compassLabel,h=(0,r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xv(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:h,className:o},r.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},s&&Qv("zoom-in",l,(function(){Kv(n,e,{zoom:n.viewport.zoom+1})})),s&&Qv("zoom-out",c,(function(){Kv(n,e,{zoom:n.viewport.zoom-1})})),a&&Qv("compass",u,(function(){Kv(n,e,{bearing:0,pitch:0})}),function(e){var t=(0,r.useMemo)((function(){return e.map?function(e,t){for(var n=(e||"").split(".").map(Number),r="1.6.0".split(".").map(Number),i=0;i<3;i++){var o=n[i]||0,a=r[i]||0;if(o<a)return-1;if(o>a)return 1}return 0}(e.map.version)>=0?2:1:2}),[e.map]),n=e.viewport.bearing,i={transform:"rotate(".concat(-n,"deg)")};return 2===t?r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:i}):r.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:i})}(n))))}function t_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e_.propTypes=$v,e_.defaultProps=Jv,r.memo(e_);var n_=Object.assign({},sv,{className:f.string,style:f.object,maxWidth:f.number,unit:f.oneOf(["imperial","metric","nautical"])}),r_=Object.assign({},av,{className:"",maxWidth:100,unit:"metric"});function i_(e){var t=cv(e),n=t.context,i=t.containerRef,o=v((0,r.useState)(null),2),a=o[0],s=o[1];(0,r.useEffect)((function(){if(n.map){var e=new(Hg().ScaleControl);e._map=n.map,e._container=i.current,s(e)}}),[n.map]),a&&(a.options=e,a._onMove());var l=(0,r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:l,className:e.className},r.createElement("div",{ref:i,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}i_.propTypes=n_,i_.defaultProps=r_,r.memo(i_);var o_="undefined"!=typeof window&&window.devicePixelRatio||1,a_=Object.assign({},sv,{redraw:f.func.isRequired});function s_(e){var t=cv(e),n=t.context,i=t.containerRef,o=v((0,r.useState)(null),2),a=o[0],s=o[1];(0,r.useEffect)((function(){s(i.current.getContext("2d"))}),[]);var l=n.viewport,c=n.isDragging;return a&&(a.save(),a.scale(o_,o_),e.redraw({width:l.width,height:l.height,ctx:a,isDragging:c,project:l.project,unproject:l.unproject}),a.restore()),r.createElement("canvas",{ref:i,width:l.width*o_,height:l.height*o_,style:{width:"".concat(l.width,"px"),height:"".concat(l.height,"px"),position:"absolute",left:0,top:0}})}function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}s_.propTypes=a_,s_.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};var c_=Object.assign({},sv,{redraw:f.func.isRequired,style:f.object});function u_(e){var t=cv(e),n=t.context,i=t.containerRef,o=n.viewport,a=n.isDragging,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l_(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute",left:0,top:0,width:o.width,height:o.height},e.style);return r.createElement("div",{ref:i,style:s},e.redraw({width:o.width,height:o.height,isDragging:a,project:o.project,unproject:o.unproject}))}function h_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}u_.propTypes=c_,u_.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};var d_=Object.assign({},sv,{redraw:f.func.isRequired,style:f.object});function f_(e){var t=cv(e),n=t.context,i=t.containerRef,o=n.viewport,a=n.isDragging,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h_(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute",left:0,top:0},e.style);return r.createElement("svg",{width:o.width,height:o.height,ref:i,style:s},e.redraw({width:o.width,height:o.height,isDragging:a,project:o.project,unproject:o.unproject}))}f_.propTypes=d_,f_.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1},Hg()&&Hg().setRTLTextPlugin;var p_=n(7484),m_=n.n(p_),g_=n(2997),y_=n.n(g_),v_=n(5611);class __ extends Map{constructor(e=[],t=x_){super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}});for(const[t,n]of e)this.set(t,n)}get(e){return super.get(b_(this,e))}has(e){return super.has(b_(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}(this,e))}}function b_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function x_(e){return null!==e&&"object"==typeof e?e.valueOf():e}function w_(e){return e}Set;var S_,A_=n(4880),E_=n(7460),M_=n(5792),C_=n.n(M_),T_=n(8339),P_=n(8952),D_=n.n(P_);function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k_(Object(n),!0).forEach((function(t){I_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R_(e){return function(e){if(Array.isArray(e))return z_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||B_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||B_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B_(e,t){if(e){if("string"==typeof e)return z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z_(e,t):void 0}}function z_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(S_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&S_(e);var F_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};m_().extend(y_());var N_={longitude:15.98,latitude:0,zoom:1,pitch:20,bearing:0},U_={scrollZoom:!1,dragPan:window.innerWidth<480,dragRotate:!1,doubleClickZoom:!1},j_="mapbox://styles/jeffmacinnes/cklwszium5oap17mghpar2f18",V_=D_().slice(1).map((function(e){return{idx:+e[0],lat:+e[1],lng:+e[2]}})),G_=(0,v_.Z1)("%Y-%m-%d"),H_=(0,v_.i$)("%Y-%m-%d"),W_=function(e){var t=L_((0,r.useState)([]),2),n=t[0],i=t[1],o=L_((0,r.useState)(null),2),a=o[0],s=o[1],l=m_()(e.currentDate),c={start:l.subtract(e.intervalWin/2,"days"),end:l.add(e.intervalWin/2,"days")},u=[new Zm({id:"scatterplot-layer",data:V_,getPosition:function(e){return[e.lng,e.lat]},getRadius:6e4,getFillColor:[].concat(R_(C_()(T_.Z.textColor).rgb()),[250]),getFilterValue:function(e){return a&&1===a[e.idx][l.dayOfYear()-1]?1:-999},filterRange:[0,2],extensions:[new cg({filterSize:1})],updateTriggers:{getFilterValue:l}}),new $m({id:"arc-layer",data:n,getSourcePosition:function(e){return[V_[e.srcIdx].lng,V_[e.srcIdx].lat]},getTargetPosition:function(e){return[V_[e.dstIdx].lng,V_[e.dstIdx].lat]},getSourceColor:[].concat(R_(C_()(T_.Z.accent3).rgb()),[30]),getTargetColor:[].concat(R_(C_()(T_.Z.accent3).rgb()),[30]),getTilt:function(e){return 120*Math.random()-60},getFilterValue:function(e){return e.pubDate.valueOf()/1e3},filterRange:[c.start.unix(),c.end.unix()],filterSoftRange:[l.unix(),l.unix()],extensions:[new cg({filterSize:1})]})];return(0,r.useEffect)((function(){E_.parse("https://raw.githubusercontent.com/jeffmacinnes/COVID_vis/master/websiteData/collabsByDate.csv",{download:!0,header:!0,worker:!0,fastMode:!0,complete:function(e){var t=e.data.map((function(e,t){return{pubDate:G_("2020-".concat(e.pubDate)),srcIdx:+e.srcIdx,dstIdx:+e.dstIdx}}));i(t);for(var n=[],r=0;r<V_.length;r++)n.push(new Array(366).fill(0));(function(e,...t){return function(e,t,n,r){return function e(i,o){if(o>=r.length)return n(i);const a=new __,s=r[o++];let l=-1;for(const e of i){const t=s(e,++l,i),n=a.get(t);n?n.push(e):a.set(t,[e])}for(const[t,n]of a)a.set(t,e(n,o));return t(a)}(e,0)}(e,Array.from,w_,t)})(t,(function(e){return e.pubDate})).forEach((function(e){var t,r=m_()(H_(e[0])).dayOfYear()-1,i=e[1],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=B_(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(new Set(i.flatMap((function(e){return[e.srcIdx,e.dstIdx]}))));try{for(o.s();!(t=o.n()).done;){var a=t.value;n[a][r]=1}}catch(e){o.e(e)}finally{o.f()}})),s(n)}})}),[]),r.createElement(zm,{initialViewState:O_(O_({},N_),{},{bearing:A_.c.map(l.dayOfYear(),0,366,350,360),pitch:A_.c.map(l.dayOfYear(),0,366,45,10)}),controller:U_,layers:u,style:{zIndex:-10}},r.createElement(gy,{reuseMaps:!0,mapStyle:j_,mapboxApiAccessToken:"pk.eyJ1IjoiamVmZm1hY2lubmVzIiwiYSI6ImNqa2J4YzFodTBmanczcW55eHpja2swajMifQ.7fId2nnniqWGQiMPqIEv_g",attributionControl:!1}))};F_(W_,"useState{[collabs, setCollabs]([])}\nuseState{[geoIDsByDate, setGeoIDsByDate](null)}\nuseEffect{}");var q_=W_;const Z_=q_;var X_,Y_;(X_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(X_.register(N_,"VIEW_STATE","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(U_,"MAP_CONTROLS","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(j_,"MB_STYLE","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(V_,"geoIDs","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(G_,"parseDateStr","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(H_,"formatDateStr","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(W_,"CollabMap","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx"),X_.register(q_,"default","/Users/jeff/codeRepos/covid-science/src/components/Section2/CollabMap.jsx")),(Y_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Y_(e)},9484:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Section2});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),papaparse__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7460),papaparse__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(papaparse__WEBPACK_IMPORTED_MODULE_1__),d3_scale__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3775),d3_time_format__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5611),gsap__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5716),gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7082),_TimelineScrubber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3937),_CollabMap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(490),_BigNumber__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5631),_assets_statsByDay_csv__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7808),_assets_statsByDay_csv__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_assets_statsByDay_csv__WEBPACK_IMPORTED_MODULE_5__),_assets_mapKeySkewed_png__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7539),_assets_authorCollabsKey_png__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7867),_Section2_scoped_scss_scopeId_5be94f5e__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4839),_TimelineScrubber_scss__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4288),enterModule;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};gsap__WEBPACK_IMPORTED_MODULE_10__.p8.registerPlugin(gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_11__.i);var parseDateStr=(0,d3_time_format__WEBPACK_IMPORTED_MODULE_12__.Z1)("%Y-%m-%d"),formatDate=(0,d3_time_format__WEBPACK_IMPORTED_MODULE_12__.i$)("%Y-%m-%d"),intervalWin=10,Section2=function(_Component){_inherits(Section2,_Component);var _super=_createSuper(Section2);function Section2(e){var t;return _classCallCheck(this,Section2),(t=_super.call(this,e)).handleScrollTrigger=function(e){var n=t.state,r=n.scrubber,i=n.statsByDay,o=t.tlScale.invert(e);if(t.setState({currentDate:o}),r&&r.updatePlot(o),i){var a=formatDate(o),s=i.filter((function(e){return e.pubDate===a}));"2020-12-31"===a&&(s[0].nArts=93593),t.setState({totalArticles:s[0].nArts,totalCollabs:s[0].nCollabs})}},t.containerRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),t.state={scrubber:null,currentDate:parseDateStr("2020-01-01"),totalArticles:0,totalCollabs:0,statsByDay:null},t.tlScale=(0,d3_scale__WEBPACK_IMPORTED_MODULE_13__.Z)().domain([parseDateStr("2020-01-01"),parseDateStr("2020-12-31")]).range([0,1]),t}return _createClass(Section2,[{key:"componentDidMount",value:function(){var e=this;gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_11__.i.create({trigger:".section2-scroll-container",start:"top top",end:"bottom-=500 bottom",scrub:3,onUpdate:function(t){e.handleScrollTrigger(t.progress)}}),setTimeout((function(){gsap_ScrollTrigger__WEBPACK_IMPORTED_MODULE_11__.i.refresh()}),2e3);var t=_assets_statsByDay_csv__WEBPACK_IMPORTED_MODULE_5___default().slice(1).map((function(e){return{pubDate:"2020-".concat(e[0]),nArts:+e[1],nCollabs:+e[2],nGeoCollabs:+e[3]}}));this.setState({statsByDay:t});var n=this.state.currentDate,r=new _TimelineScrubber__WEBPACK_IMPORTED_MODULE_2__.Z(this.containerRef.current,intervalWin);r.updatePlot(n),this.setState({scrubber:r})}},{key:"render",value:function(){var e=this.state,t=e.currentDate,n=e.totalArticles,r=e.totalCollabs;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("section",{className:this.props.rootClassName,"data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"narrative-text","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"section-break","data-v-5be94f5e":""}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-5be94f5e":""},"This body of literature not only reflects the sheer volume of COVID-19 related research that occurred, but also the manner in which that work took place. While the rest of the world was shutting down — nations closing borders, states closing schools, cities shuttering businesses — the science and medical communities were expanding outward, and forming collaborations that spanned institutions and borders."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-5be94f5e":""},"The extent of these collaborations is reflected in the list of authors contributing to each research article. For instance, the article"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7836404/",target:"_blank","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{"data-v-5be94f5e":""},"Characterizing Wuhan residents' mask-wearing intention at early stages of the COVID-19 pandemic"))," ","has 4 authors:"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"author-list-container","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:"author-list","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{"data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-5be94f5e":""},"Min Zhou")," -"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{"data-v-5be94f5e":""},"Hunan University of Technology and Business, Changsha, China")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{"data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-5be94f5e":""},"Piao Long")," -"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{"data-v-5be94f5e":""},"Hunan University of Technology and Business, Changsha, China")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{"data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-5be94f5e":""},"Nan Kong")," -"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{"data-v-5be94f5e":""},"Purdue University, West Lafayette, Indiana, USA")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{"data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-5be94f5e":""},"Kathryn S. Campy")," -"," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{"data-v-5be94f5e":""},"University of Pennsylvania, Philadelphia, Pennsylvania, USA")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"short-text","data-v-5be94f5e":""},"Which represents ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-5be94f5e":""},"6")," collaborations between pairs of researchers."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"key-container","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{alt:"Illustration depicting 4 authors with links connecting each pair of authors",className:"collab-key-image",src:_assets_authorCollabsKey_png__WEBPACK_IMPORTED_MODULE_7__,"data-v-5be94f5e":""})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:"short-text","data-v-5be94f5e":""},"These collaborations link institutions spanning ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("mark",{"data-v-5be94f5e":""},"3")," ","cities around the world."),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"key-container","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{alt:"World map with arcs connecting West Lafayette, Philadelphia, and Changsha",className:"map-key-image",src:_assets_mapKeySkewed_png__WEBPACK_IMPORTED_MODULE_6__,"data-v-5be94f5e":""})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{"data-v-5be94f5e":""},"Using this same approach on the entire collection of articles, we can look at how these collaborations unfolded throughout the year around the globe.")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"section2-scroll-container","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"map-container","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"scrubber-container",ref:this.containerRef,"data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"scrubber-overlay","data-v-5be94f5e":""})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"big-number-container","data-v-5be94f5e":""},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BigNumber__WEBPACK_IMPORTED_MODULE_4__.Z,{align:"left",value:n,units:"total articles","data-v-5be94f5e":""}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BigNumber__WEBPACK_IMPORTED_MODULE_4__.Z,{align:"right",value:r,units:"total collaborations","data-v-5be94f5e":""})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CollabMap__WEBPACK_IMPORTED_MODULE_3__.Z,{currentDate:t,intervalWin,"data-v-5be94f5e":""}))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Section2}(react__WEBPACK_IMPORTED_MODULE_0__.Component),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(parseDateStr,"parseDateStr","/Users/jeff/codeRepos/covid-science/src/components/Section2/Section2.jsx"),reactHotLoader.register(formatDate,"formatDate","/Users/jeff/codeRepos/covid-science/src/components/Section2/Section2.jsx"),reactHotLoader.register(intervalWin,"intervalWin","/Users/jeff/codeRepos/covid-science/src/components/Section2/Section2.jsx"),reactHotLoader.register(Section2,"Section2","/Users/jeff/codeRepos/covid-science/src/components/Section2/Section2.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},3937:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>TimelineScrubber});var d3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7560),d3_axis__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(604),d3_scale__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5128),d3_scale__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3775),d3_time_format__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5611),d3_time__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2776),d3_time__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9478),_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8339),enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},formatMonth=(0,d3_time_format__WEBPACK_IMPORTED_MODULE_2__.i$)("%b"),formatDay=(0,d3_time_format__WEBPACK_IMPORTED_MODULE_2__.i$)("%d"),TimelineScrubber=function(){function TimelineScrubber(e,t){_classCallCheck(this,TimelineScrubber),this.container=e,this.containerRect=e.getBoundingClientRect(),this.height=this.containerRect.height,this.width=this.containerRect.width,this.intervalWin=t,this.setupPlot()}return _createClass(TimelineScrubber,[{key:"setupPlot",value:function(){var e=this;this.svg=(0,d3__WEBPACK_IMPORTED_MODULE_0__.Ys)(this.container).append("svg").attr("class","timeline-scrubber-svg").attr("viewBox","0,0,".concat(Math.floor(this.width),",").concat(Math.floor(this.height))),this.plotG=this.svg.append("g");var t=Math.min(.2*this.width,200);this.fontSizeScale=(new d3_scale__WEBPACK_IMPORTED_MODULE_3__.ZP).exponent(1.25).domain([0,t]).range([16,12]).clamp(!0),this.fontOpacityScale=(new d3_scale__WEBPACK_IMPORTED_MODULE_3__.ZP).exponent(1.25).domain([0,t]).range([.9,.2]).clamp(!0),this.tlScale=(new d3_scale__WEBPACK_IMPORTED_MODULE_4__.Z).domain([new Date("2019-01-01"),new Date("2022-01-01")]).range([0,20*this.width]),this.svg.append("g").call((function(t){return e.draw_intervalWindow(t)})),this.svg.append("g").call((function(t){return e.draw_tlAxis_major(t)})),this.svg.append("g").call((function(t){return e.draw_tlAxis_minor(t)})),this.svg.select(".tl-axis").selectAll("text").each((function(e,t,n){var r=n[t].innerHTML;(0,d3__WEBPACK_IMPORTED_MODULE_0__.Ys)(n[t]).html(r.toUpperCase())})),this.updatePlot(new Date(["01-01-2020"]))}},{key:"updatePlot",value:function(e){var t=this,n=this.tlScale(e),r=this.svg.node().getBoundingClientRect();this.svg.selectAll(".tl-axis").attr("transform","translate(".concat(window.innerWidth/2-n-r.x,", ").concat(this.height/2,")")),this.svg.selectAll(".tl-axis .tick").each((function(e,n,r){var i=r[n].getBoundingClientRect(),o=i.x+i.width/2,a=Math.abs(o-window.innerWidth/2);(0,d3__WEBPACK_IMPORTED_MODULE_0__.Ys)(r[n]).select("text").attr("font-size","".concat(t.fontSizeScale(a),"px")).attr("opacity","".concat(t.fontOpacityScale(a)))})),this.svg.select(".current-date-label").text("".concat(formatMonth(e).toUpperCase(),"\n").concat(formatDay(e)))}},{key:"draw_intervalWindow",value:function(e){var t=this.tlScale(new Date("2020-01-".concat(this.intervalWin+1)))-this.tlScale(new Date("2020-01-01"));e.attr("class","interval-window-group").attr("transform","translate(".concat(this.width/2-t/2,", ").concat(this.height/2,")")),e.append("path").attr("d","M 0 0 L ".concat(t," 0 L ").concat(t/2," ").concat(20," L 0 0")).attr("height",20).style("fill",_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_1__.Z.accent1).style("opacity",1),e.append("line").attr("x1",t/2).attr("y1",0).attr("x2",t/2).attr("y2",30).attr("stroke",_styles_exports_module_scss__WEBPACK_IMPORTED_MODULE_1__.Z.textColor).attr("stroke-width",1.5),e.append("text").attr("class","current-date-label").attr("x",t/2).attr("y",40).attr("text-anchor","middle").attr("dominant-baseline","hanging"),e.append("text").attr("class","year-label").attr("x",t/2).attr("y",67).attr("text-anchor","middle").attr("dominant-baseline","baseline").text("2020")}},{key:"draw_tlAxis_major",value:function(e){e.attr("transform","translate(0, ".concat(this.height/2,")")).attr("class","tl-axis").call((0,d3_axis__WEBPACK_IMPORTED_MODULE_5__.F5)(this.tlScale).ticks(d3_time__WEBPACK_IMPORTED_MODULE_6__.OM.every(2)).tickFormat((0,d3_time_format__WEBPACK_IMPORTED_MODULE_2__.i$)("%b %d")))}},{key:"draw_tlAxis_minor",value:function(e){e.attr("transform","translate(0, ".concat(this.height/2,")")).attr("class","tl-axis").call((0,d3_axis__WEBPACK_IMPORTED_MODULE_5__.LL)(this.tlScale).ticks(d3_time__WEBPACK_IMPORTED_MODULE_7__.Z.every(2)).tickFormat((0,d3_time_format__WEBPACK_IMPORTED_MODULE_2__.i$)("")))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),TimelineScrubber}(),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(formatMonth,"formatMonth","/Users/jeff/codeRepos/covid-science/src/components/Section2/TimelineScrubber.js"),reactHotLoader.register(formatDay,"formatDay","/Users/jeff/codeRepos/covid-science/src/components/Section2/TimelineScrubber.js"),reactHotLoader.register(TimelineScrubber,"TimelineScrubber","/Users/jeff/codeRepos/covid-science/src/components/Section2/TimelineScrubber.js")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},6355:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r,i=n(7294);n(848),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o=function(e){return i.createElement("div",{className:"annotation-container ".concat(e.visible&&"visible"," ").concat("Moderna"===e.content.vaccine&&"baseline-bottom"),style:{left:e.coords.x,top:e.coords.y},"data-v-cd68c52d":""},i.createElement("div",{className:"vaccine","data-v-cd68c52d":""},i.createElement("mark",{"data-v-cd68c52d":""},e.content.vaccine)),i.createElement("div",{className:"title","data-v-cd68c52d":""},e.content.title),i.createElement("div",{className:"journal","data-v-cd68c52d":""},e.content.journal),i.createElement("div",{className:"date","data-v-cd68c52d":""},e.content.date))},a=o;const s=a;var l,c;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(o,"ArticleAnnotation","/Users/jeff/codeRepos/covid-science/src/components/Section3/ArticleAnnotation.jsx"),l.register(a,"default","/Users/jeff/codeRepos/covid-science/src/components/Section3/ArticleAnnotation.jsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},2518:(e,n,r)=>{"use strict";r.d(n,{Z:()=>vn});var i=r(7294),o=r(6355);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=function(e,t){var n,r=new Set(t);return Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(n=Object.entries(e).filter((function(e){var t=a(e,1)[0];return!r.has(t)})).map((function(e){var t=a(e,2);return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t[0],t[1])})))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()))},l=r(3405),c=r.n(l);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=r(4017),g=r(8507),y=r(2626),v=r(3641),_=r(72),b=r(4299);const x=e=>()=>e;function w(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function S(e){return!e.ctrlKey&&!e.button}function A(){return this.parentNode}function E(e,t){return null==t?{x:e.x,y:e.y}:t}function M(){return navigator.maxTouchPoints||"ontouchstart"in this}w.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var C=r(7622);function T(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}var P,D=r(3096),k=r.n(D),O={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-O.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*O.Bounce.In(2*e):.5*O.Bounce.Out(2*e-1)+.5}}},I="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},R=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=I()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!t;i&&!1===i.update(e,o)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),L={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=L.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[n],e[n-1],n-r):o(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,o=L.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-t,r-a)*i(t,a)*e[a]*o(r,a);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=L.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=L.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(P=[1],function(e){var t=1;if(P[e])return P[e];for(var n=e;n>1;n--)t*=n;return P[e]=t,t}),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},B=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),z=new R,F=function(){function e(e,t){void 0===t&&(t=z),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=O.Linear.None,this._interpolationFunction=L.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=B.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?I()+parseFloat(e):e:I(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var o=e[i],a=Array.isArray(o),s=a?"array":typeof o,l=!a&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(l){var c=n[i];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(c)}if("object"!==s&&!a||!o||l)void 0===t[i]&&(t[i]=o),a||(t[i]*=1),r[i]=l?n[i].slice().reverse():t[i]||0;else{for(var u in t[i]=a?[]:{},o)t[i][u]=o[u];r[i]=a?[]:{},this._setupProperties(o,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=I()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=I()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=I()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var o=t[i]||0,a=n[i],s=Array.isArray(e[i]),l=Array.isArray(a);!s&&l?e[i]=this._interpolationFunction(a,r):"object"==typeof a&&a?this._updateProperties(e[i],o,a,r):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[i]=o+(a-o)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),N=B.nextId,U=z,j=U.getAll.bind(U),V=U.removeAll.bind(U),G=U.add.bind(U),H=U.remove.bind(U),W=U.update.bind(U);const q={Easing:O,Group:R,Interpolation:L,now:I,Sequence:B,nextId:N,Tween:F,VERSION:"18.6.4",getAll:j,removeAll:V,add:G,remove:H,update:W};var Z=r(296),X=r.n(Z);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $=function e(t,n){var r=n.default,i=void 0===r?null:r,o=n.triggerUpdate,a=void 0===o||o,s=n.onChange,l=void 0===s?function(e,t){}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=a,this.onChange=l};const J=function(e){var t=e.stateInit,n=void 0===t?function(){return{}}:t,r=e.props,i=void 0===r?{}:r,o=e.methods,a=void 0===o?{}:o,s=e.aliases,l=void 0===s?{}:s,c=e.init,u=void 0===c?function(){}:c,h=e.update,d=void 0===h?function(){}:h,f=Object.keys(i).map((function(e){return new $(e,i[e])}));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},n instanceof Function?n(e):n,{initialised:!1}),r={};function i(t){return o(t,e),s(),i}var o=function(e,n){u.call(i,e,t,n),t.initialised=!0},s=X()((function(){t.initialised&&(d.call(i,t,r),r={})}),1);return f.forEach((function(e){i[e.name]=function(e){var n=e.name,o=e.triggerUpdate,a=void 0!==o&&o,l=e.onChange,c=void 0===l?function(e,t){}:l,u=e.defaultVal,h=void 0===u?null:u;return function(e){var o=t[n];if(!arguments.length)return o;var l=void 0===e?h:e;return t[n]=l,c.call(i,l,t,o),!r.hasOwnProperty(n)&&(r[n]=o),a&&s(),i}}(e)})),Object.keys(a).forEach((function(e){i[e]=function(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=a[e]).call.apply(n,[i,t].concat(o))}})),Object.entries(l).forEach((function(e){var t=Y(e,2),n=t[0],r=t[1];return i[n]=i[r]})),i.resetProps=function(){return f.forEach((function(e){i[e.name](e.defaultVal)})),i},i.resetProps(),t._rerender=s,i}},K=function(e){return e instanceof Function?e:"string"==typeof e?function(t){return t[e]}:function(t){return e}};var Q=r(7621),ee=r.n(Q);function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e,t,n){return(e<<16)+(t<<8)+n},oe=function(e,t){return 123*e%Math.pow(2,t)};const ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;te(this,e),this.csBits=t,this.registry=["__reserved for background__"]}var t,n;return t=e,(n=[{key:"register",value:function(e){if(this.registry.length>=Math.pow(2,24-this.csBits))return null;var t,n=this.registry.length,r=(t=n+(oe(n,this.csBits)<<24-this.csBits),"#".concat(Math.min(t,Math.pow(2,24)).toString(16).padStart(6,"0")));return this.registry.push(e),r}},{key:"lookup",value:function(e){var t,n,r,i,o,a,s="string"==typeof e?(t=e,r=(n=ee()(t).toRgb()).r,i=n.g,o=n.b,ie(r,i,o)):ie.apply(void 0,function(e){if(Array.isArray(e))return re(e)}(a=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if(!s)return null;var l=s&Math.pow(2,24-this.csBits)-1,c=s>>24-this.csBits&Math.pow(2,this.csBits)-1;return oe(l,this.csBits)!==c||l>=this.registry.length?null:this.registry[l]}}])&&ne(t.prototype,n),e}();var se=r(5374);const le=4294967296;function ce(e){return e.x}function ue(e){return e.y}function he(e){return e.z}var de=Math.PI*(3-Math.sqrt(5)),fe=20*Math.PI/(9+Math.sqrt(221));function pe(e,t){t=t||2;var n,r=Math.min(3,Math.max(1,Math.round(t))),i=1,o=.001,a=1-Math.pow(o,1/300),s=0,l=.6,c=new Map,u=(0,se.HT)(f),h=(0,y.Z)("tick","end"),d=function(){let e=1;return()=>(e=(1664525*e+1013904223)%le)/le}();function f(){p(),h.call("tick",n),i<o&&(u.stop(),h.call("end",n))}function p(t){var o,u,h=e.length;void 0===t&&(t=1);for(var d=0;d<t;++d)for(i+=(s-i)*a,c.forEach((function(e){e(i)})),o=0;o<h;++o)null==(u=e[o]).fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return n}function m(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var o=10*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),a=n*de,s=n*fe;1===r?t.x=o:2===r?(t.x=o*Math.cos(a),t.y=o*Math.sin(a)):(t.x=o*Math.sin(a)*Math.cos(s),t.y=o*Math.cos(a),t.z=o*Math.sin(a)*Math.sin(s))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function g(t){return t.initialize&&t.initialize(e,r,d),t}return null==e&&(e=[]),m(),n={tick:p,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(e){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(e))),c.forEach(g),n):r},nodes:function(t){return arguments.length?(e=t,m(),c.forEach(g),n):e},alpha:function(e){return arguments.length?(i=+e,n):i},alphaMin:function(e){return arguments.length?(o=+e,n):o},alphaDecay:function(e){return arguments.length?(a=+e,n):+a},alphaTarget:function(e){return arguments.length?(s=+e,n):s},velocityDecay:function(e){return arguments.length?(l=1-e,n):1-l},randomSource:function(e){return arguments.length?(d=e,c.forEach(g),n):d},force:function(e,t){return arguments.length>1?(null==t?c.delete(e):c.set(e,g(t)),n):c.get(e)},find:function(){var t,n,i,o,a,s,l=Array.prototype.slice.call(arguments),c=l.shift()||0,u=(r>1?l.shift():null)||0,h=(r>2?l.shift():null)||0,d=l.shift()||1/0,f=0,p=e.length;for(d*=d,f=0;f<p;++f)(o=(t=c-(a=e[f]).x)*t+(n=u-(a.y||0))*n+(i=h-(a.z||0))*i)<d&&(s=a,d=o);return s},on:function(e,t){return arguments.length>1?(h.on(e,t),n):h.on(e)}}}function me(e){return function(){return e}}function ge(e){return 1e-6*(e()-.5)}function ye(e){return e.index}function ve(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function _e(e){var t,n,r,i,o,a,s,l=ye,c=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},u=me(30),h=1;function d(r){for(var o=0,l=e.length;o<h;++o)for(var c,u,d,f,p,m=0,g=0,y=0,v=0;m<l;++m)u=(c=e[m]).source,g=(d=c.target).x+d.vx-u.x-u.vx||ge(s),i>1&&(y=d.y+d.vy-u.y-u.vy||ge(s)),i>2&&(v=d.z+d.vz-u.z-u.vz||ge(s)),g*=f=((f=Math.sqrt(g*g+y*y+v*v))-n[m])/f*r*t[m],y*=f,v*=f,d.vx-=g*(p=a[m]),i>1&&(d.vy-=y*p),i>2&&(d.vz-=v*p),u.vx+=g*(p=1-p),i>1&&(u.vy+=y*p),i>2&&(u.vz+=v*p)}function f(){if(r){var i,s,c=r.length,u=e.length,h=new Map(r.map(((e,t)=>[l(e,t,r),e])));for(i=0,o=new Array(c);i<u;++i)(s=e[i]).index=i,"object"!=typeof s.source&&(s.source=ve(h,s.source)),"object"!=typeof s.target&&(s.target=ve(h,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(i=0,a=new Array(u);i<u;++i)s=e[i],a[i]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(u),p(),n=new Array(u),m()}}function p(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+c(e[n],n,e)}function m(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e,t,n){r=e,i=t,s=n,f()},d.links=function(t){return arguments.length?(e=t,f(),d):e},d.id=function(e){return arguments.length?(l=e,d):l},d.iterations=function(e){return arguments.length?(h=+e,d):h},d.strength=function(e){return arguments.length?(c="function"==typeof e?e:me(+e),p(),d):c},d.distance=function(e){return arguments.length?(u="function"==typeof e?e:me(+e),m(),d):u},d}function be(e,t,n){if(isNaN(t))return e;var r,i,o,a,s,l,c=e._root,u={data:n},h=e._x0,d=e._x1;if(!c)return e._root=u,e;for(;c.length;)if((a=t>=(i=(h+d)/2))?h=i:d=i,r=c,!(c=c[s=+a]))return r[s]=u,e;if(t===(o=+e._x.call(null,c.data)))return u.next=c,r?r[s]=u:e._root=u,e;do{r=r?r[s]=new Array(2):e._root=new Array(2),(a=t>=(i=(h+d)/2))?h=i:d=i}while((s=+a)==(l=+(o>=i)));return r[l]=c,r[s]=u,e}function xe(e,t,n){this.node=e,this.x0=t,this.x1=n}function we(e){return e[0]}function Se(e,t){var n=new Ae(null==t?we:t,NaN,NaN);return null==e?n:n.addAll(e)}function Ae(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function Ee(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Me=Se.prototype=Ae.prototype;Me.copy=function(){var e,t,n=new Ae(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=Ee(r),n;for(e=[{source:r,target:n._root=new Array(2)}];r=e.pop();)for(var i=0;i<2;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(2)}):r.target[i]=Ee(t));return n},Me.add=function(e){var t=+this._x.call(null,e);return be(this.cover(t),t,e)},Me.addAll=function(e){var t,n,r=e.length,i=new Array(r),o=1/0,a=-1/0;for(t=0;t<r;++t)isNaN(n=+this._x.call(null,e[t]))||(i[t]=n,n<o&&(o=n),n>a&&(a=n));for(a<o&&(o=this._x0,a=this._x1),this.cover(o).cover(a),t=0;t<r;++t)be(this,i[t],e[t]);return this},Me.cover=function(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{if(!(t>e||e>n))return this;var r,i,o=n-t,a=this._root;switch(i=+(e<(t+n)/2)){case 0:do{(r=new Array(2))[i]=a,a=r}while(e>(n=t+(o*=2)));break;case 1:do{(r=new Array(2))[i]=a,a=r}while((t=n-(o*=2))>e)}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._x1=n,this},Me.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Me.extent=function(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},Me.find=function(e,t){var n,r,i,o,a,s=this._x0,l=this._x1,c=[],u=this._root;for(u&&c.push(new xe(u,s,l)),null==t?t=1/0:(s=e-t,l=e+t);o=c.pop();)if(!(!(u=o.node)||(r=o.x0)>l||(i=o.x1)<s))if(u.length){var h=(r+i)/2;c.push(new xe(u[1],h,i),new xe(u[0],r,h)),(a=+(e>=h))&&(o=c[c.length-1],c[c.length-1]=c[c.length-1-a],c[c.length-1-a]=o)}else{var d=Math.abs(e-+this._x.call(null,u.data));d<t&&(t=d,s=e-d,l=e+d,n=u.data)}return n},Me.remove=function(e){if(isNaN(o=+this._x.call(null,e)))return this;var t,n,r,i,o,a,s,l,c,u=this._root,h=this._x0,d=this._x1;if(!u)return this;if(u.length)for(;;){if((s=o>=(a=(h+d)/2))?h=a:d=a,t=u,!(u=u[l=+s]))return this;if(!u.length)break;t[l+1&1]&&(n=t,c=l)}for(;u.data!==e;)if(r=u,!(u=u.next))return this;return(i=u.next)&&delete u.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(u=t[0]||t[1])&&u===(t[1]||t[0])&&!u.length&&(n?n[c]=u:this._root=u),this):(this._root=i,this)},Me.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Me.root=function(){return this._root},Me.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Me.visit=function(e){var t,n,r,i,o=[],a=this._root;for(a&&o.push(new xe(a,this._x0,this._x1));t=o.pop();)if(!e(a=t.node,r=t.x0,i=t.x1)&&a.length){var s=(r+i)/2;(n=a[1])&&o.push(new xe(n,s,i)),(n=a[0])&&o.push(new xe(n,r,s))}return this},Me.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new xe(this._root,this._x0,this._x1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.x1,l=(a+s)/2;(o=i[0])&&n.push(new xe(o,a,l)),(o=i[1])&&n.push(new xe(o,l,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.x1);return this},Me.x=function(e){return arguments.length?(this._x=e,this):this._x};var Ce=r(8833);function Te(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var o,a,s,l,c,u,h,d,f,p,m,g,y=e._root,v={data:i},_=e._x0,b=e._y0,x=e._z0,w=e._x1,S=e._y1,A=e._z1;if(!y)return e._root=v,e;for(;y.length;)if((d=t>=(a=(_+w)/2))?_=a:w=a,(f=n>=(s=(b+S)/2))?b=s:S=s,(p=r>=(l=(x+A)/2))?x=l:A=l,o=y,!(y=y[m=p<<2|f<<1|d]))return o[m]=v,e;if(c=+e._x.call(null,y.data),u=+e._y.call(null,y.data),h=+e._z.call(null,y.data),t===c&&n===u&&r===h)return v.next=y,o?o[m]=v:e._root=v,e;do{o=o?o[m]=new Array(8):e._root=new Array(8),(d=t>=(a=(_+w)/2))?_=a:w=a,(f=n>=(s=(b+S)/2))?b=s:S=s,(p=r>=(l=(x+A)/2))?x=l:A=l}while((m=p<<2|f<<1|d)==(g=(h>=l)<<2|(u>=s)<<1|c>=a));return o[g]=y,o[m]=v,e}function Pe(e,t,n,r,i,o,a){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}function De(e){return e[0]}function ke(e){return e[1]}function Oe(e){return e[2]}function Ie(e,t,n,r){var i=new Re(null==t?De:t,null==n?ke:n,null==r?Oe:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function Re(e,t,n,r,i,o,a,s,l){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this._root=void 0}function Le(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Be=Ie.prototype=Re.prototype;function ze(){var e,t,n,r,i,o,a=me(-30),s=1,l=1/0,c=.81;function u(r){var o,a=e.length,s=(1===t?Se(e,ce):2===t?(0,Ce.Z)(e,ce,ue):3===t?Ie(e,ce,ue,he):null).visitAfter(d);for(i=r,o=0;o<a;++o)n=e[o],s.visit(f)}function h(){if(e){var t,n,r=e.length;for(o=new Array(r),t=0;t<r;++t)n=e[t],o[n.index]=+a(n,t,e)}}function d(e){var n,r,i,a,s,l,c=0,u=0,h=e.length;if(h){for(i=a=s=l=0;l<h;++l)(n=e[l])&&(r=Math.abs(n.value))&&(c+=n.value,u+=r,i+=r*(n.x||0),a+=r*(n.y||0),s+=r*(n.z||0));c*=Math.sqrt(4/h),e.x=i/u,t>1&&(e.y=a/u),t>2&&(e.z=s/u)}else{(n=e).x=n.data.x,t>1&&(n.y=n.data.y),t>2&&(n.z=n.data.z);do{c+=o[n.data.index]}while(n=n.next)}e.value=c}function f(e,a,u,h,d){if(!e.value)return!0;var f=[u,h,d][t-1],p=e.x-n.x,m=t>1?e.y-n.y:0,g=t>2?e.z-n.z:0,y=f-a,v=p*p+m*m+g*g;if(y*y/c<v)return v<l&&(0===p&&(v+=(p=ge(r))*p),t>1&&0===m&&(v+=(m=ge(r))*m),t>2&&0===g&&(v+=(g=ge(r))*g),v<s&&(v=Math.sqrt(s*v)),n.vx+=p*e.value*i/v,t>1&&(n.vy+=m*e.value*i/v),t>2&&(n.vz+=g*e.value*i/v)),!0;if(!(e.length||v>=l)){(e.data!==n||e.next)&&(0===p&&(v+=(p=ge(r))*p),t>1&&0===m&&(v+=(m=ge(r))*m),t>2&&0===g&&(v+=(g=ge(r))*g),v<s&&(v=Math.sqrt(s*v)));do{e.data!==n&&(y=o[e.data.index]*i/v,n.vx+=p*y,t>1&&(n.vy+=m*y),t>2&&(n.vz+=g*y))}while(e=e.next)}}return u.initialize=function(n,i,o){e=n,t=i,r=o,h()},u.strength=function(e){return arguments.length?(a="function"==typeof e?e:me(+e),h(),u):a},u.distanceMin=function(e){return arguments.length?(s=e*e,u):Math.sqrt(s)},u.distanceMax=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u.theta=function(e){return arguments.length?(c=e*e,u):Math.sqrt(c)},u}function Fe(e,t,n){var r,i=1;function o(){var o,a,s=r.length,l=0,c=0,u=0;for(o=0;o<s;++o)l+=(a=r[o]).x||0,c+=a.y||0,u+=a.z||0;for(l=(l/s-e)*i,c=(c/s-t)*i,u=(u/s-n)*i,o=0;o<s;++o)a=r[o],l&&(a.x-=l),c&&(a.y-=c),u&&(a.z-=u)}return null==e&&(e=0),null==t&&(t=0),null==n&&(n=0),o.initialize=function(e){r=e},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(e){return arguments.length?(t=+e,o):t},o.z=function(e){return arguments.length?(n=+e,o):n},o.strength=function(e){return arguments.length?(i=+e,o):i},o}Be.copy=function(){var e,t,n=new Re(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=Le(r),n;for(e=[{source:r,target:n._root=new Array(8)}];r=e.pop();)for(var i=0;i<8;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(8)}):r.target[i]=Le(t));return n},Be.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return Te(this.cover(t,n,r),t,n,r,e)},Be.addAll=function(e){var t,n,r,i,o,a=e.length,s=new Array(a),l=new Array(a),c=new Array(a),u=1/0,h=1/0,d=1/0,f=-1/0,p=-1/0,m=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||isNaN(o=+this._z.call(null,t))||(s[n]=r,l[n]=i,c[n]=o,r<u&&(u=r),r>f&&(f=r),i<h&&(h=i),i>p&&(p=i),o<d&&(d=o),o>m&&(m=o));for(f<u&&(u=this._x0,f=this._x1),p<h&&(h=this._y0,p=this._y1),m<d&&(d=this._z0,m=this._z1),this.cover(u,h,d).cover(f,p,m),n=0;n<a;++n)Te(this,s[n],l[n],c[n],e[n]);return this},Be.cover=function(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,l=(o=Math.floor(n))+1;else{if(!(r>e||e>a||i>t||t>s||o>n||n>l))return this;var c,u,h=a-r,d=this._root;switch(u=(n<(o+l)/2)<<2|(t<(i+s)/2)<<1|e<(r+a)/2){case 0:do{(c=new Array(8))[u]=d,d=c}while(s=i+(h*=2),l=o+h,e>(a=r+h)||t>s||n>l);break;case 1:do{(c=new Array(8))[u]=d,d=c}while(s=i+(h*=2),l=o+h,(r=a-h)>e||t>s||n>l);break;case 2:do{(c=new Array(8))[u]=d,d=c}while(i=s-(h*=2),l=o+h,e>(a=r+h)||i>t||n>l);break;case 3:do{(c=new Array(8))[u]=d,d=c}while(i=s-(h*=2),l=o+h,(r=a-h)>e||i>t||n>l);break;case 4:do{(c=new Array(8))[u]=d,d=c}while(s=i+(h*=2),o=l-h,e>(a=r+h)||t>s||o>n);break;case 5:do{(c=new Array(8))[u]=d,d=c}while(s=i+(h*=2),o=l-h,(r=a-h)>e||t>s||o>n);break;case 6:do{(c=new Array(8))[u]=d,d=c}while(i=s-(h*=2),o=l-h,e>(a=r+h)||i>t||o>n);break;case 7:do{(c=new Array(8))[u]=d,d=c}while(i=s-(h*=2),o=l-h,(r=a-h)>e||i>t||o>n)}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this},Be.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Be.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},Be.find=function(e,t,n,r){var i,o,a,s,l,c,u,h,d,f=this._x0,p=this._y0,m=this._z0,g=this._x1,y=this._y1,v=this._z1,_=[],b=this._root;for(b&&_.push(new Pe(b,f,p,m,g,y,v)),null==r?r=1/0:(f=e-r,p=t-r,m=n-r,g=e+r,y=t+r,v=n+r,r*=r);h=_.pop();)if(!(!(b=h.node)||(o=h.x0)>g||(a=h.y0)>y||(s=h.z0)>v||(l=h.x1)<f||(c=h.y1)<p||(u=h.z1)<m))if(b.length){var x=(o+l)/2,w=(a+c)/2,S=(s+u)/2;_.push(new Pe(b[7],x,w,S,l,c,u),new Pe(b[6],o,w,S,x,c,u),new Pe(b[5],x,a,S,l,w,u),new Pe(b[4],o,a,S,x,w,u),new Pe(b[3],x,w,s,l,c,S),new Pe(b[2],o,w,s,x,c,S),new Pe(b[1],x,a,s,l,w,S),new Pe(b[0],o,a,s,x,w,S)),(d=(n>=S)<<2|(t>=w)<<1|e>=x)&&(h=_[_.length-1],_[_.length-1]=_[_.length-1-d],_[_.length-1-d]=h)}else{var A=e-+this._x.call(null,b.data),E=t-+this._y.call(null,b.data),M=n-+this._z.call(null,b.data),C=A*A+E*E+M*M;if(C<r){var T=Math.sqrt(r=C);f=e-T,p=t-T,m=n-T,g=e+T,y=t+T,v=n+T,i=b.data}}return i},Be.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e))||isNaN(s=+this._z.call(null,e)))return this;var t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g=this._root,y=this._x0,v=this._y0,_=this._z0,b=this._x1,x=this._y1,w=this._z1;if(!g)return this;if(g.length)for(;;){if((h=o>=(l=(y+b)/2))?y=l:b=l,(d=a>=(c=(v+x)/2))?v=c:x=c,(f=s>=(u=(_+w)/2))?_=u:w=u,t=g,!(g=g[p=f<<2|d<<1|h]))return this;if(!g.length)break;(t[p+1&7]||t[p+2&7]||t[p+3&7]||t[p+4&7]||t[p+5&7]||t[p+6&7]||t[p+7&7])&&(n=t,m=p)}for(;g.data!==e;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):t?(i?t[p]=i:delete t[p],(g=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&g===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!g.length&&(n?n[m]=g:this._root=g),this):(this._root=i,this)},Be.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Be.root=function(){return this._root},Be.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Be.visit=function(e){var t,n,r,i,o,a,s,l,c=[],u=this._root;for(u&&c.push(new Pe(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=c.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.z0,a=t.x1,s=t.y1,l=t.z1)&&u.length){var h=(r+a)/2,d=(i+s)/2,f=(o+l)/2;(n=u[7])&&c.push(new Pe(n,h,d,f,a,s,l)),(n=u[6])&&c.push(new Pe(n,r,d,f,h,s,l)),(n=u[5])&&c.push(new Pe(n,h,i,f,a,d,l)),(n=u[4])&&c.push(new Pe(n,r,i,f,h,d,l)),(n=u[3])&&c.push(new Pe(n,h,d,o,a,s,f)),(n=u[2])&&c.push(new Pe(n,r,d,o,h,s,f)),(n=u[1])&&c.push(new Pe(n,h,i,o,a,d,f)),(n=u[0])&&c.push(new Pe(n,r,i,o,h,d,f))}return this},Be.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Pe(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.z0,c=t.x1,u=t.y1,h=t.z1,d=(a+c)/2,f=(s+u)/2,p=(l+h)/2;(o=i[0])&&n.push(new Pe(o,a,s,l,d,f,p)),(o=i[1])&&n.push(new Pe(o,d,s,l,c,f,p)),(o=i[2])&&n.push(new Pe(o,a,f,l,d,u,p)),(o=i[3])&&n.push(new Pe(o,d,f,l,c,u,p)),(o=i[4])&&n.push(new Pe(o,a,s,p,d,f,h)),(o=i[5])&&n.push(new Pe(o,d,s,p,c,f,h)),(o=i[6])&&n.push(new Pe(o,a,f,p,d,u,h)),(o=i[7])&&n.push(new Pe(o,d,f,p,c,u,h))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this},Be.x=function(e){return arguments.length?(this._x=e,this):this._x},Be.y=function(e){return arguments.length?(this._y=e,this):this._y},Be.z=function(e){return arguments.length?(this._z=e,this):this._z};const{abs:Ne,cos:Ue,sin:je,acos:Ve,atan2:Ge,sqrt:He,pow:We}=Math;function qe(e){return e<0?-We(-e,1/3):We(e,1/3)}const Ze=Math.PI,Xe=2*Ze,Ye=Ze/2,$e=Number.MAX_SAFE_INTEGER||9007199254740991,Je=Number.MIN_SAFE_INTEGER||-9007199254740991,Ke={x:0,y:0,z:0},Qe={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){const n=t(e);let r=n.x*n.x+n.y*n.y;return void 0!==n.z&&(r+=n.z*n.z),He(r)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];const r=t.length-1;if(1===e)return t[r].t=1,t[r];const i=1-e;let o=t;if(0===r)return t[0].t=e,t[0];if(1===r){const t={x:i*o[0].x+e*o[1].x,y:i*o[0].y+e*o[1].y,t:e};return n&&(t.z=i*o[0].z+e*o[1].z),t}if(r<4){let t,a,s,l=i*i,c=e*e,u=0;2===r?(o=[o[0],o[1],o[2],Ke],t=l,a=i*e*2,s=c):3===r&&(t=l*i,a=l*e*3,s=i*c*3,u=e*c);const h={x:t*o[0].x+a*o[1].x+s*o[2].x+u*o[3].x,y:t*o[0].y+a*o[1].y+s*o[2].y+u*o[3].y,t:e};return n&&(h.z=t*o[0].z+a*o[1].z+s*o[2].z+u*o[3].z),h}const a=JSON.parse(JSON.stringify(t));for(;a.length>1;){for(let t=0;t<a.length-1;t++)a[t]={x:a[t].x+(a[t+1].x-a[t].x)*e,y:a[t].y+(a[t+1].y-a[t].y)*e},void 0!==a[t].z&&(a[t]=a[t].z+(a[t+1].z-a[t].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,t,n,r){const i=1-e,o=n,a=t;let s,l=o[0],c=o[1],u=o[2],h=o[3];return l*=i,c*=e,2===a.length?(s=l+c,{x:(l*a[0].x+c*a[1].x)/s,y:(l*a[0].y+c*a[1].y)/s,z:!!r&&(l*a[0].z+c*a[1].z)/s,t:e}):(l*=i,c*=2*i,u*=e*e,3===a.length?(s=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/s,y:(l*a[0].y+c*a[1].y+u*a[2].y)/s,z:!!r&&(l*a[0].z+c*a[1].z+u*a[2].z)/s,t:e}):(l*=i,c*=1.5*i,u*=3*i,h*=e*e*e,4===a.length?(s=l+c+u+h,{x:(l*a[0].x+c*a[1].x+u*a[2].x+h*a[3].x)/s,y:(l*a[0].y+c*a[1].y+u*a[2].y+h*a[3].y)/s,z:!!r&&(l*a[0].z+c*a[1].z+u*a[2].z+h*a[3].z)/s,t:e}):void 0))},derive:function(e,t){const n=[];for(let r=e,i=r.length,o=i-1;i>1;i--,o--){const e=[];for(let n,i=0;i<o;i++)n={x:o*(r[i+1].x-r[i].x),y:o*(r[i+1].y-r[i].y)},t&&(n.z=o*(r[i+1].z-r[i].z)),e.push(n);n.push(e),r=e}return n},between:function(e,t,n){return t<=e&&e<=n||Qe.approximately(e,t)||Qe.approximately(e,n)},approximately:function(e,t,n){return Ne(e-t)<=(n||1e-6)},length:function(e){const t=Qe.Tvalues.length;let n=0;for(let r,i=0;i<t;i++)r=.5*Qe.Tvalues[i]+.5,n+=Qe.Cvalues[i]*Qe.arcfn(r,e);return.5*n},map:function(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)},lerp:function(e,t,n){const r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return t.z&&n.z&&(r.z=t.z+e*(n.z-t.z)),r},pointToString:function(e){let t=e.x+"/"+e.y;return void 0!==e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(Qe.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y;return Ge(r*a-i*o,r*o+i*a)},round:function(e,t){const n=""+e,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+t))},dist:function(e,t){const n=e.x-t.x,r=e.y-t.y;return He(n*n+r*r)},closest:function(e,t){let n,r,i=We(2,63);return e.forEach((function(e,o){r=Qe.dist(t,e),r<i&&(i=r,n=o)})),{mdist:i,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=We(e,t)+We(1-e,t);return Ne((n-1)/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=We(1-e,t);return n/(We(e,t)+n)},lli8:function(e,t,n,r,i,o,a,s){const l=(e-n)*(o-s)-(t-r)*(i-a);return 0!=l&&{x:((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/l,y:((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/l}},lli4:function(e,t,n,r){const i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,c=n.y,u=r.x,h=r.y;return Qe.lli8(i,o,a,s,l,c,u,h)},lli:function(e,t){return Qe.lli4(e,e.c,t,t.c)},makeline:function(e,t){const n=e.x,r=e.y,i=t.x,o=t.y,a=(i-n)/3,s=(o-r)/3;return new ct(n,r,n+a,r+s,n+2*a,r+2*s,i,o)},findbbox:function(e){let t=$e,n=$e,r=Je,i=Je;return e.forEach((function(e){const o=e.bbox();t>o.x.min&&(t=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),i<o.y.max&&(i=o.y.max)})),{x:{min:t,mid:(t+r)/2,max:r,size:r-t},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(e,t,n,r,i){if(!Qe.bboxoverlap(t,r))return[];const o=[],a=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(t){t.virtual||s.forEach((function(r){if(r.virtual)return;const a=t.intersects(r,i);a.length>0&&(a.c1=t,a.c2=r,a.s1=e,a.s2=n,o.push(a))}))})),o},makeshape:function(e,t,n){const r=t.points.length,i=e.points.length,o=Qe.makeline(t.points[r-1],e.points[0]),a=Qe.makeline(e.points[i-1],t.points[0]),s={startcap:o,forward:e,back:t,endcap:a,bbox:Qe.findbbox([o,e,t,a]),intersections:function(e){return Qe.shapeintersections(s,s.bbox,e,e.bbox,n)}};return s},getminmax:function(e,t,n){if(!n)return{min:0,max:0};let r,i,o=$e,a=Je;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let s=0,l=n.length;s<l;s++)r=n[s],i=e.get(r),i[t]<o&&(o=i[t]),i[t]>a&&(a=i[t]);return{min:o,mid:(o+a)/2,max:a,size:a-o}},align:function(e,t){const n=t.p1.x,r=t.p1.y,i=-Ge(t.p2.y-r,t.p2.x-n);return e.map((function(e){return{x:(e.x-n)*Ue(i)-(e.y-r)*je(i),y:(e.x-n)*je(i)+(e.y-r)*Ue(i)}}))},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,r=Qe.align(e,t),i=function(e){return 0<=e&&e<=1};if(2===n){const e=r[0].y,t=r[1].y,n=r[2].y,o=e-2*t+n;if(0!==o){const r=-He(t*t-e*n),a=-e+t;return[-(r+a)/o,-(-r+a)/o].filter(i)}return t!==n&&0===o?[(2*t-n)/(2*t-2*n)].filter(i):[]}const o=r[0].y,a=r[1].y,s=r[2].y;let l=3*a-o-3*s+r[3].y,c=3*o-6*a+3*s,u=-3*o+3*a,h=o;if(Qe.approximately(l,0)){if(Qe.approximately(c,0))return Qe.approximately(u,0)?[]:[-h/u].filter(i);const e=He(u*u-4*c*h),t=2*c;return[(e-u)/t,(-u-e)/t].filter(i)}c/=l,u/=l,h/=l;const d=(3*u-c*c)/3,f=d/3,p=(2*c*c*c-9*c*u+27*h)/27,m=p/2,g=m*m+f*f*f;let y,v,_,b,x;if(g<0){const e=-d/3,t=He(e*e*e),n=-p/(2*t),r=Ve(n<-1?-1:n>1?1:n),o=2*qe(t);return _=o*Ue(r/3)-c/3,b=o*Ue((r+Xe)/3)-c/3,x=o*Ue((r+2*Xe)/3)-c/3,[_,b,x].filter(i)}if(0===g)return y=m<0?qe(-m):-qe(m),_=2*y-c/3,b=-y-c/3,[_,b].filter(i);{const e=He(g);return y=qe(-m+e),v=qe(m+e),[y-v-c/3].filter(i)}},droots:function(e){if(3===e.length){const t=e[0],n=e[1],r=e[2],i=t-2*n+r;if(0!==i){const e=-He(n*n-t*r),o=-t+n;return[-(e+o)/i,-(-e+o)/i]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===e.length){const t=e[0],n=e[1];return t!==n?[t/(t-n)]:[]}return[]},curvature:function(e,t,n,r,i){let o,a,s,l,c=0,u=0;const h=Qe.compute(e,t),d=Qe.compute(e,n),f=h.x*h.x+h.y*h.y;if(r?(o=He(We(h.y*d.z-d.y*h.z,2)+We(h.z*d.x-d.z*h.x,2)+We(h.x*d.y-d.x*h.y,2)),a=We(f+h.z*h.z,1.5)):(o=h.x*d.y-h.y*d.x,a=We(f,1.5)),0===o||0===a)return{k:0,r:0};if(c=o/a,u=a/o,!i){const i=Qe.curvature(e-.001,t,n,r,!0).k,o=Qe.curvature(e+.001,t,n,r,!0).k;l=(o-c+(c-i))/2,s=(Ne(o-c)+Ne(c-i))/2}return{k:c,r:u,dk:l,adk:s}},inflections:function(e){if(e.length<4)return[];const t=Qe.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,r=t[3].x*t[1].y,i=t[1].x*t[2].y,o=18*(-3*n+2*r+3*i-t[3].x*t[2].y),a=18*(3*n-r-3*i),s=18*(i-n);if(Qe.approximately(o,0)){if(!Qe.approximately(a,0)){let e=-s/a;if(0<=e&&e<=1)return[e]}return[]}const l=a*a-4*o*s,c=Math.sqrt(l),u=2*o;return Qe.approximately(u,0)?[]:[(c-a)/u,-(a+c)/u].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){const n=["x","y"],r=n.length;for(let i,o,a,s,l=0;l<r;l++)if(i=n[l],o=e[i].mid,a=t[i].mid,s=(e[i].size+t[i].size)/2,Ne(o-a)>=s)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){const r=e.bbox(),i=t.bbox(),o=1e5,a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(t._t1+t._t2)/2|0)/o];let s=e.split(.5),l=t.split(.5),c=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];c=c.filter((function(e){return Qe.bboxoverlap(e.left.bbox(),e.right.bbox())}));let u=[];return 0===c.length||(c.forEach((function(e){u=u.concat(Qe.pairiteration(e.left,e.right,a))})),u=u.filter((function(e,t){return u.indexOf(e)===t}))),u},getccenter:function(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,a=n.y-t.y,s=r*Ue(Ye)-i*je(Ye),l=r*je(Ye)+i*Ue(Ye),c=o*Ue(Ye)-a*je(Ye),u=o*je(Ye)+a*Ue(Ye),h=(e.x+t.x)/2,d=(e.y+t.y)/2,f=(t.x+n.x)/2,p=(t.y+n.y)/2,m=h+s,g=d+l,y=f+c,v=p+u,_=Qe.lli8(h,d,m,g,f,p,y,v),b=Qe.dist(_,e);let x,w=Ge(e.y-_.y,e.x-_.x),S=Ge(t.y-_.y,t.x-_.x),A=Ge(n.y-_.y,n.x-_.x);return w<A?((w>S||S>A)&&(w+=Xe),w>A&&(x=A,A=w,w=x)):A<S&&S<w?(x=A,A=w,w=x):A+=Xe,_.s=w,_.e=A,_.r=b,_},numberSort:function(e,t){return e-t}};class et{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(e){return Qe.pointsToString(e.points)})).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var t=e[0].bbox(),n=1;n<e.length;n++)Qe.expandbox(t,e[n].bbox());return t}offset(e){const t=[];return this.curves.forEach((function(n){t.push(...n.offset(e))})),new et(t)}}const{abs:tt,min:nt,max:rt,cos:it,sin:ot,acos:at,sqrt:st}=Math,lt=Math.PI;class ct{constructor(e){let t=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if("object"==typeof t[0]){n=t.length;const e=[];t.forEach((function(t){["x","y","z"].forEach((function(n){void 0!==t[n]&&e.push(t[n])}))})),t=e}let r=!1;const i=t.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");r=!0}}else if(6!==i&&8!==i&&9!==i&&12!==i&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!r&&(9===i||12===i)||e&&e[0]&&void 0!==e[0].z,a=this.points=[];for(let e=0,n=o?3:2;e<i;e+=n){var s={x:t[e],y:t[e+1]};o&&(s.z=t[e+2]),a.push(s)}const l=this.order=a.length-1,c=this.dims=["x","y"];o&&c.push("z"),this.dimlen=c.length;const u=Qe.align(a,{p1:a[0],p2:a[l]});this._linear=!u.some((e=>tt(e.y)>1e-4)),this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,t,n,r){if(void 0===r&&(r=.5),0===r)return new ct(t,t,n);if(1===r)return new ct(e,t,t);const i=ct.getABC(2,e,t,n,r);return new ct(e,i.A,n)}static cubicFromPoints(e,t,n,r,i){void 0===r&&(r=.5);const o=ct.getABC(3,e,t,n,r);void 0===i&&(i=Qe.dist(t,o.C));const a=i*(1-r)/r,s=Qe.dist(e,n),l=(n.x-e.x)/s,c=(n.y-e.y)/s,u=i*l,h=i*c,d=a*l,f=a*c,p=t.x-u,m=t.y-h,g=t.x+d,y=t.y+f,v=o.A,_=v.x+(p-v.x)/(1-r),b=v.y+(m-v.y)/(1-r),x=v.x+(g-v.x)/r,w=v.y+(y-v.y)/r,S={x:e.x+(_-e.x)/r,y:e.y+(b-e.y)/r},A={x:n.x+(x-n.x)/(1-r),y:n.y+(w-n.y)/(1-r)};return new ct(e,S,A,n)}static getUtils(){return Qe}getUtils(){return ct.getUtils()}static get PolyBezier(){return et}valueOf(){return this.toString()}toString(){return Qe.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,t=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let n=1,r=e.length;n<r;n++)t.push(e[n].x),t.push(e[n].y);return t.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}update(){this._lut=[],this.dpoints=Qe.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,t=Qe.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}length(){return Qe.length(this.derivative.bind(this))}static getABC(e=2,t,n,r,i=.5){const o=Qe.projectionratio(i,e),a=1-o,s={x:o*t.x+a*r.x,y:o*t.y+a*r.y},l=Qe.abcratio(i,e);return{A:{x:n.x+(n.x-s.x)/l,y:n.y+(n.y-s.y)/l},B:n,C:s,S:t,E:r}}getABC(e,t){t=t||this.get(e);let n=this.points[0],r=this.points[this.order];return ct.getABC(this.order,n,t,r,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e--;for(let t,n,r=0;r<e;r++)n=r/(e-1),t=this.compute(n),t.t=n,this._lut.push(t);return this._lut}on(e,n){n=n||5;const r=this.getLUT(),i=[];for(let t,o=0,a=0;o<r.length;o++)t=r[o],Qe.dist(t,e)<n&&(i.push(t),a+=o/r.length);return!!i.length&&(t/=i.length)}project(e){const t=this.getLUT(),n=t.length-1,r=Qe.closest(t,e),i=r.mpos,o=(i-1)/n,a=(i+1)/n,s=.1/n;let l,c,u=r.mdist,h=o,d=h;for(u+=1;h<a+s;h+=s)l=this.compute(h),c=Qe.dist(e,l),c<u&&(u=c,d=h);return d=d<0?0:d>1?1:d,l=this.compute(d),l.t=d,l.d=u,l}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Qe.computeWithRatios(e,this.points,this.ratios,this._3d):Qe.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,t=[e[0]],n=e.length;for(let r,i,o=1;o<n;o++)r=e[o],i=e[o-1],t[o]={x:(n-o)/n*r.x+o/n*i.x,y:(n-o)/n*r.y+o/n*i.y};return t[n]=e[n-1],new ct(t)}derivative(e){return Qe.compute(e,this.dpoints[0])}dderivative(e){return Qe.compute(e,this.dpoints[1])}align(){let e=this.points;return new ct(Qe.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Qe.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Qe.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const t=this.derivative(e),n=st(t.x*t.x+t.y*t.y);return{x:-t.y/n,y:t.x/n}}__normal3(e){const t=this.derivative(e),n=this.derivative(e+.01),r=st(t.x*t.x+t.y*t.y+t.z*t.z),i=st(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=r,t.y/=r,t.z/=r,n.x/=i,n.y/=i,n.z/=i;const o={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},a=st(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;const s=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:s[0]*t.x+s[1]*t.y+s[2]*t.z,y:s[3]*t.x+s[4]*t.y+s[5]*t.z,z:s[6]*t.x+s[7]*t.y+s[8]*t.z}}hull(e){let t=this.points,n=[],r=[],i=0;for(r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],3===this.order&&(r[i++]=t[3]);t.length>1;){n=[];for(let o,a=0,s=t.length-1;a<s;a++)o=Qe.lerp(e,t[a],t[a+1]),r[i++]=o,n.push(o);t=n}return r}split(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;const n=this.hull(e),r={left:2===this.order?new ct([n[0],n[3],n[5]]):new ct([n[0],n[4],n[7],n[9]]),right:2===this.order?new ct([n[5],n[4],n[2]]):new ct([n[9],n[8],n[6],n[3]]),span:n};return r.left._t1=Qe.map(0,0,1,this._t1,this._t2),r.left._t2=Qe.map(e,0,1,this._t1,this._t2),r.right._t1=Qe.map(e,0,1,this._t1,this._t2),r.right._t2=Qe.map(1,0,1,this._t1,this._t2),t?(t=Qe.map(t,e,1,0,1),r.right.split(t).left):r}extrema(){const e={};let t=[];return this.dims.forEach(function(n){let r=function(e){return e[n]},i=this.dpoints[0].map(r);e[n]=Qe.droots(i),3===this.order&&(i=this.dpoints[1].map(r),e[n]=e[n].concat(Qe.droots(i))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(Qe.numberSort))}.bind(this)),e.values=t.sort(Qe.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}bbox(){const e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=Qe.getminmax(this,n,e[n])}.bind(this)),t}overlaps(e){const t=this.bbox(),n=e.bbox();return Qe.bboxoverlap(t,n)}offset(e,t){if(void 0!==t){const n=this.get(e),r=this.normal(e),i={c:n,n:r,x:n.x+r.x*t,y:n.y+r.y*t};return this._3d&&(i.z=n.z+r.z*t),i}if(this._linear){const t=this.normal(0),n=this.points.map((function(n){const r={x:n.x+e*t.x,y:n.y+e*t.y};return n.z&&t.z&&(r.z=n.z+e*t.z),r}));return[new ct(n)]}return this.reduce().map((function(t){return t._linear?t.offset(e)[0]:t.scale(e)}))}simple(){if(3===this.order){const e=Qe.angle(this.points[0],this.points[3],this.points[1]),t=Qe.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}const e=this.normal(0),t=this.normal(1);let n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),tt(at(n))<lt/3}reduce(){let e,t,n=0,r=0,i=.01,o=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)r=s[e],t=this.split(n,r),t._t1=n,t._t2=r,o.push(t),n=r;return o.forEach((function(e){for(n=0,r=0;r<=1;)for(r=n+i;r<=1.01;r+=i)if(t=e.split(n,r),!t.simple()){if(r-=i,tt(n-r)<i)return[];t=e.split(n,r),t._t1=Qe.map(n,0,1,e._t1,e._t2),t._t2=Qe.map(r,0,1,e._t1,e._t2),a.push(t),n=r;break}n<1&&(t=e.split(n,1),t._t1=Qe.map(n,0,1,e._t1,e._t2),t._t2=e._t2,a.push(t))})),a}scale(e){const t=this.order;let n=!1;if("function"==typeof e&&(n=e),n&&2===t)return this.raise().scale(n);const r=this.clockwise,i=n?n(0):e,o=n?n(1):e,a=[this.offset(0,10),this.offset(1,10)],s=this.points,l=[],c=Qe.lli4(a[0],a[0].c,a[1],a[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){const n=l[e*t]=Qe.copy(s[e*t]);n.x+=(e?o:i)*a[e].n.x,n.y+=(e?o:i)*a[e].n.y})),n?([0,1].forEach((function(i){if(2!==t||!i){var o=s[i+1],a={x:o.x-c.x,y:o.y-c.y},u=n?n((i+1)/t):e;n&&!r&&(u=-u);var h=st(a.x*a.x+a.y*a.y);a.x/=h,a.y/=h,l[i+1]={x:o.x+u*a.x,y:o.y+u*a.y}}})),new ct(l)):([0,1].forEach((e=>{if(2===t&&e)return;const n=l[e*t],r=this.derivative(e),i={x:n.x+r.x,y:n.y+r.y};l[e+1]=Qe.lli4(n,i,c,s[e+1])})),new ct(l))}outline(e,t,n,r){t=void 0===t?e:t;const i=this.reduce(),o=i.length,a=[];let s,l=[],c=0,u=this.length();const h=void 0!==n&&void 0!==r;function d(e,t,n,r,i){return function(o){const a=r/n,s=(r+i)/n,l=t-e;return Qe.map(o,0,1,e+a*l,e+s*l)}}i.forEach((function(i){const o=i.length();h?(a.push(i.scale(d(e,n,u,c,o))),l.push(i.scale(d(-t,-r,u,c,o)))):(a.push(i.scale(e)),l.push(i.scale(-t))),c+=o})),l=l.map((function(e){return s=e.points,s[3]?e.points=[s[3],s[2],s[1],s[0]]:e.points=[s[2],s[1],s[0]],e})).reverse();const f=a[0].points[0],p=a[o-1].points[a[o-1].points.length-1],m=l[o-1].points[l[o-1].points.length-1],g=l[0].points[0],y=Qe.makeline(m,f),v=Qe.makeline(p,g),_=[y].concat(a).concat([v]).concat(l);return _.length,new et(_)}outlineshapes(e,t,n){t=t||e;const r=this.outline(e,t).curves,i=[];for(let e=1,t=r.length;e<t/2;e++){const o=Qe.makeshape(r[e],r[t-e],n);o.startcap.virtual=e>1,o.endcap.virtual=e<t/2-1,i.push(o)}return i}intersects(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof ct&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)}lineIntersects(e){const t=nt(e.p1.x,e.p2.x),n=nt(e.p1.y,e.p2.y),r=rt(e.p1.x,e.p2.x),i=rt(e.p1.y,e.p2.y);return Qe.roots(this.points,e).filter((e=>{var o=this.get(e);return Qe.between(o.x,t,r)&&Qe.between(o.y,n,i)}))}selfintersects(e){const t=this.reduce(),n=t.length-2,r=[];for(let i,o,a,s=0;s<n;s++)o=t.slice(s,s+1),a=t.slice(s+2),i=this.curveintersects(o,a,e),r.push(...i);return r}curveintersects(e,t,n){const r=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&r.push({left:e,right:t})}))}));let i=[];return r.forEach((function(e){const t=Qe.pairiteration(e.left,e.right,n);t.length>0&&(i=i.concat(t))})),i}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,t,n,r){const i=(r-n)/4,o=this.get(n+i),a=this.get(r-i),s=Qe.dist(e,t),l=Qe.dist(e,o),c=Qe.dist(e,a);return tt(l-s)+tt(c-s)}_iterate(e,t){let n,r=0,i=1;do{n=0,i=1;let o,a,s,l,c,u=this.get(r),h=!1,d=!1,f=i,p=1,m=0;do{if(d=h,l=s,f=(r+i)/2,m++,o=this.get(f),a=this.get(i),s=Qe.getccenter(u,o,a),s.interval={start:r,end:i},h=this._error(s,u,r,i)<=e,c=d&&!h,c||(p=i),h){if(i>=1){if(s.interval.end=p=1,l=s,i>1){let e={x:s.x+s.r*it(s.e),y:s.y+s.r*ot(s.e)};s.e+=Qe.angle({x:s.x,y:s.y},e,this.get(1))}break}i+=(i-r)/2}else i=f}while(!c&&n++<100);if(n>=100)break;l=l||s,t.push(l),r=p}while(i<1);return t}}function ut(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ft(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var pt=r(8348);const mt=Symbol("implicit"),gt=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function St(e,t,n){return(St=wt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&xt(i,n.prototype),i}).apply(null,arguments)}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .graph-tooltip {\n  position: absolute;\n  transform: translate(-50%, 25px);\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(0,0,0,0.65);\n  visibility: hidden; /* by default */\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");var Tt=function e(){var t=new Map,n=[],r=[],i=mt;function o(e){var o=e+"",a=t.get(o);if(!a){if(i!==mt)return i;t.set(o,a=n.push(e))}return r[(a-1)%r.length]}return o.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;for(const r of e){const e=r+"";t.has(e)||t.set(e,n.push(r))}return o},o.range=function(e){return arguments.length?(r=Array.from(e),o):r.slice()},o.unknown=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return e(n,r).unknown(i)},pt.o.apply(o,arguments),o}(gt);function Pt(e,t,n){t&&"string"==typeof n&&e.filter((function(e){return!e[n]})).forEach((function(e){e[n]=Tt(t(e))}))}var Dt=J({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},dagMode:{onChange:function(e,t){!e&&(t.graphData.nodes||[]).forEach((function(e){return e.fx=e.fy=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1},nodeColor:{default:"color",triggerUpdate:!1},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1},nodeVisibility:{default:!0,triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1},linkColor:{default:"color",triggerUpdate:!1},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1},linkWidth:{default:1,triggerUpdate:!1},linkCurvature:{default:0,triggerUpdate:!1},linkCanvasObject:{triggerUpdate:!1},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1},linkDirectionalArrowLength:{default:0,triggerUpdate:!1},linkDirectionalArrowColor:{triggerUpdate:!1},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,t,n){return void 0===n?e.forceLayout.force(t):(e.forceLayout.force(t,n),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t,n,r,i,o,a;return!e.isShadow&&e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick())),function(){var t=K(e.linkVisibility),n=K(e.linkColor),r=K(e.linkWidth),i=K(e.linkLineDash),o=K(e.linkCurvature),a=K(e.linkCanvasObjectMode),s=e.ctx,l=2*e.isShadow,c=e.graphData.links.filter(t);c.forEach((function(e){var t=o(e);if(t){var n=e.source,r=e.target;if(n&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")){var i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));if(i>0){var a=Math.atan2(r.y-n.y,r.x-n.x),s=i*t,l={x:(n.x+r.x)/2+s*Math.cos(a-Math.PI/2),y:(n.y+r.y)/2+s*Math.sin(a-Math.PI/2)};e.__controlPoints=[l.x,l.y]}else{var c=70*t;e.__controlPoints=[r.x,r.y-c,r.x+c,r.y]}}}else e.__controlPoints=null}));var u=[],h=[],d=c;if(e.linkCanvasObject){var f=[],p=[];c.forEach((function(e){return({before:u,after:h,replace:f}[a(e)]||p).push(e)})),d=[].concat(Et(u),h,p),u=u.concat(f)}s.save(),u.forEach((function(t){return e.linkCanvasObject(t,s,e.globalScale)})),s.restore();var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(t instanceof Array?t.length?t:[void 0]:[t]).map((function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}})),o=e.reduce((function(e,t){var r=e,o=t;return i.forEach((function(e,t){var a,s=e.keyAccessor;if(e.isProp){var l=o,c=l[s],u=ut(l,[s].map(ft));a=c,o=u}else a=s(o,t);t+1<i.length?(r.hasOwnProperty(a)||(r[a]={}),r=r[a]):n?(r.hasOwnProperty(a)||(r[a]=[]),r[a].push(o)):r[a]=o})),e}),{});n instanceof Function&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(t).forEach((function(e){return t[e]=n(t[e])})):Object.values(t).forEach((function(t){return e(t,r+1)}))}(o);var a=o;return r&&(a=[],function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?a.push({keys:n,vals:t}):Object.entries(t).forEach((function(t){var r=ht(t,2),i=r[0],o=r[1];return e(o,[].concat(dt(n),[i]))}))}(o),t instanceof Array&&0===t.length&&1===a.length&&(a[0].keys=[])),a}(d,[n,r,i]);s.save(),Object.entries(m).forEach((function(t){var n=At(t,2),r=n[0],o=n[1],a=r&&"undefined"!==r?r:"rgba(0,0,0,0.15)";Object.entries(o).forEach((function(t){var n=At(t,2),r=n[0],o=n[1],c=(r||1)/e.globalScale+l;Object.entries(o).forEach((function(e){var t=At(e,2);t[0];var n=t[1],r=i(n[0]);s.beginPath(),n.forEach((function(e){var t=e.source,n=e.target;if(t&&n&&t.hasOwnProperty("x")&&n.hasOwnProperty("x")){s.moveTo(t.x,t.y);var r=e.__controlPoints;r?s[2===r.length?"quadraticCurveTo":"bezierCurveTo"].apply(s,Et(r).concat([n.x,n.y])):s.lineTo(n.x,n.y)}})),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r||[]),s.stroke()}))}))})),s.restore(),s.save(),h.forEach((function(t){return e.linkCanvasObject(t,s,e.globalScale)})),s.restore()}(),!e.isShadow&&(t=K(e.linkDirectionalArrowLength),n=K(e.linkDirectionalArrowRelPos),r=K(e.linkVisibility),i=K(e.linkDirectionalArrowColor||e.linkColor),o=K(e.nodeVal),(a=e.ctx).save(),e.graphData.links.filter(r).forEach((function(r){var s=t(r);if(s&&!(s<0)){var l=r.source,c=r.target;if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){var u=Math.sqrt(Math.max(0,o(l)||1))*e.nodeRelSize,h=Math.sqrt(Math.max(0,o(c)||1))*e.nodeRelSize,d=Math.min(1,Math.max(0,n(r))),f=i(r)||"rgba(0,0,0,0.28)",p=s/1.6/2,m=r.__controlPoints&&St(ct,[l.x,l.y].concat(Et(r.__controlPoints),[c.x,c.y])),g=m?function(e){return m.get(e)}:function(e){return{x:l.x+(c.x-l.x)*e||0,y:l.y+(c.y-l.y)*e||0}},y=m?m.length():Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2)),v=u+s+(y-u-h-s)*d,_=g(v/y),b=g((v-s)/y),x=g((v-.8*s)/y),w=Math.atan2(_.y-b.y,_.x-b.x)-Math.PI/2;a.beginPath(),a.moveTo(_.x,_.y),a.lineTo(b.x+p*Math.cos(w),b.y+p*Math.sin(w)),a.lineTo(x.x,x.y),a.lineTo(b.x-p*Math.cos(w),b.y-p*Math.sin(w)),a.fillStyle=f,a.fill()}}})),a.restore()),!e.isShadow&&function(){var t=K(e.linkDirectionalParticles),n=K(e.linkDirectionalParticleSpeed),r=K(e.linkDirectionalParticleWidth),i=K(e.linkVisibility),o=K(e.linkDirectionalParticleColor||e.linkColor),a=e.ctx;a.save(),e.graphData.links.filter(i).forEach((function(i){var s=t(i);if(i.hasOwnProperty("__photons")&&i.__photons.length){var l=i.source,c=i.target;if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){var u=n(i),h=i.__photons||[],d=Math.max(0,r(i)/2)/Math.sqrt(e.globalScale),f=o(i)||"rgba(0,0,0,0.28)";a.fillStyle=f;var p=i.__controlPoints?St(ct,[l.x,l.y].concat(Et(i.__controlPoints),[c.x,c.y])):null,m=0,g=!1;h.forEach((function(e){var t=!!e.__singleHop;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=t?0:m/s),!t&&m++,e.__progressRatio+=u,e.__progressRatio>=1){if(t)return void(g=!0);e.__progressRatio=e.__progressRatio%1}var n=e.__progressRatio,r=p?p.get(n):{x:l.x+(c.x-l.x)*n||0,y:l.y+(c.y-l.y)*n||0};a.beginPath(),a.arc(r.x,r.y,d,0,2*Math.PI,!1),a.fill()})),g&&(i.__photons=i.__photons.filter((function(e){return!e.__singleHop||e.__progressRatio<=1})))}}})),a.restore()}(),function(){var t=K(e.nodeVisibility),n=K(e.nodeVal),r=K(e.nodeColor),i=K(e.nodeCanvasObjectMode),o=e.ctx,a=e.isShadow/e.globalScale,s=e.graphData.nodes.filter(t);o.save(),s.forEach((function(t){var s=i(t);if(!e.nodeCanvasObject||"before"!==s&&"replace"!==s||(e.nodeCanvasObject(t,o,e.globalScale),"replace"!==s)){var l=Math.sqrt(Math.max(0,n(t)||1))*e.nodeRelSize+a;o.beginPath(),o.arc(t.x,t.y,l,0,2*Math.PI,!1),o.fillStyle=r(t)||"rgba(31, 120, 180, 0.92)",o.fill(),e.nodeCanvasObject&&"after"===s&&e.nodeCanvasObject(t,e.ctx,e.globalScale)}else o.restore()})),o.restore()}(),this},emitParticle:function(e,t){return t&&(!t.__photons&&(t.__photons=[]),t.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:pe().force("link",_e()).force("charge",ze()).force("center",Fe()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.ctx=e},update:function(e){if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&Pt(e.graphData.nodes,K(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&Pt(e.graphData.links,K(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach((function(t){t.source=t[e.linkSource],t.target=t[e.linkTarget]})),!e.isShadow){var t=K(e.linkDirectionalParticles);e.graphData.links.forEach((function(e){var n=Math.round(Math.abs(t(e)));n?e.__photons=Et(Array(n)).map((function(){return{}})):delete e.__photons}))}e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var n=e.forceLayout.force("link");n&&n.id((function(t){return t[e.nodeId]})).links(e.graphData.links);var r=e.dagMode&&function(e,t){var n=e.nodes,r=e.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,a=void 0===o?function(){return!0}:o,s=i.onLoopError,l=void 0===s?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:s,c={};n.forEach((function(e){return c[t(e)]={data:e,out:[],depth:-1,skip:!a(e)}})),r.forEach((function(e){var n=e.source,r=e.target,i=l(n),o=l(r);if(!c.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!c.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var a=c[i],s=c[o];function l(e){return"object"===yt(e)?t(e):e}a.out.push(s)}));var u=[];return h(Object.values(c)),Object.assign.apply(Object,[{}].concat(Et(Object.entries(c).filter((function(e){return!At(e,2)[1].skip})).map((function(e){var t=At(e,2);return vt({},t[0],t[1].depth)})))));function h(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,o=e.length;i<o;i++){var a=e[i];-1!==n.indexOf(a)&&"continue"===function(){var e=[].concat(Et(n.slice(n.indexOf(a))),[a]).map((function(e){return t(e.data)}));return u.some((function(t){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}))||(u.push(e),l(e)),"continue"}()||r>a.depth&&(a.depth=r,h(a.out,[].concat(Et(n),[a]),r+(a.skip?0:1)))}}}(e.graphData,(function(t){return t[e.nodeId]}),{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),i=Math.max.apply(Math,Et(Object.values(r||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(i||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var a=function(t,n){return function(a){return t?(r[a[e.nodeId]]-i/2)*o*(n?-1:1):void 0}},s=a(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),l=a(-1!==["td","bu"].indexOf(e.dagMode),"bu"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach((function(e){e.fx=s(e),e.fy=l(e)}))}e.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?function(e,t,n,r){var i,o,a,s,l=me(.1);function c(e){for(var l=0,c=i.length;l<c;++l){var u=i[l],h=u.x-t||1e-6,d=(u.y||0)-n||1e-6,f=(u.z||0)-r||1e-6,p=Math.sqrt(h*h+d*d+f*f),m=(s[l]-p)*a[l]*e/p;u.vx+=h*m,o>1&&(u.vy+=d*m),o>2&&(u.vz+=f*m)}}function u(){if(i){var t,n=i.length;for(a=new Array(n),s=new Array(n),t=0;t<n;++t)s[t]=+e(i[t],t,i),a[t]=isNaN(s[t])?0:+l(i[t],t,i)}}return"function"!=typeof e&&(e=me(+e)),null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),c.initialize=function(e,t){i=e,o=t,u()},c.strength=function(e){return arguments.length?(l="function"==typeof e?e:me(+e),u(),c):l},c.radius=function(t){return arguments.length?(e="function"==typeof t?t:me(+t),u(),c):e},c.x=function(e){return arguments.length?(t=+e,c):t},c.y=function(e){return arguments.length?(n=+e,c):n},c.z=function(e){return arguments.length?(r=+e,c):r},c}((function(t){var n=r[t[e.nodeId]]||-1;return("radialin"===e.dagMode?i-n:n)*o})).strength((function(t){return e.dagNodeFilter(t)?1:0})):null);for(var c=0;c<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);c++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function kt(e,t){var n=e instanceof Array?e:[e],r=new t;return{linkProp:function(e){return{default:r[e](),onChange:function(t,r){n.forEach((function(n){return r[n][e](t)}))},triggerUpdate:!1}},linkMethod:function(e){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=[];return n.forEach((function(n){var r=t[n],o=r[e].apply(r,i);o!==r&&a.push(o)})),a.length?a[0]:this}}}}var Ot=kt("forceGraph",Dt),It=kt(["forceGraph","shadowGraph"],Dt),Rt=Object.assign.apply(Object,Et(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(e){return vt({},e,Ot.linkProp(e))}))).concat(Et(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map((function(e){return vt({},e,It.linkProp(e))}))))),Lt=Object.assign.apply(Object,Et(["d3Force","d3ReheatSimulation","emitParticle"].map((function(e){return vt({},e,Ot.linkMethod(e))}))));function Bt(e){if(e.canvas){var t=e.canvas.width,n=e.canvas.height;300===t&&150===n&&(t=n=0);var r=window.devicePixelRatio;t/=r,n/=r,[e.canvas,e.shadowCanvas].forEach((function(i){i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),i.width=e.width*r,i.height=e.height*r,t||n||i.getContext("2d").scale(r,r)}));var i=(0,g.P2)(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-t)/2/i,(e.height-n)/2/i)}}function zt(e){var t=window.devicePixelRatio;e.setTransform(t,0,0,t,0,0)}function Ft(e,t,n){e.save(),zt(e),e.clearRect(0,0,t,n),e.restore()}const Nt=J({props:bt({width:{default:window.innerWidth,onChange:function(e,t){return Bt(t)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,t){return Bt(t)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){(e.nodes.length||e.links.length)&&console.info("force-graph loading",e.nodes.length+" nodes",e.links.length+" links"),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach((function(e){var n=e.type;e.objs.filter((function(e){if(!e.hasOwnProperty("__indexColor"))return!0;var n=t.colorTracker.lookup(e.__indexColor);return!n||!n.hasOwnProperty("d")||n.d!==e})).forEach((function(e){e.__indexColor=t.colorTracker.register({type:n,d:e})}))})),t.forceGraph.graphData(e),t.shadowGraph.graphData(e)},triggerUpdate:!1},backgroundColor:{onChange:function(e,t){t.canvas&&e&&(t.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,t){t.shadowGraph.nodeCanvasObject(e?function(t,n,r){return e(t,t.__indexColor,n,r)}:null)},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null},triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{default:function(){},triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{default:function(){},triggerUpdate:!1},onLinkClick:{default:function(){},triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{default:function(){},triggerUpdate:!1},onBackgroundClick:{default:function(){},triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{default:function(){},triggerUpdate:!1},onZoomEnd:{default:function(){},triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Rt),aliases:{stopAnimation:"pauseAnimation"},methods:bt({graph2ScreenCoords:function(e,t,n){var r=(0,g.P2)(e.canvas);return{x:t*r.k+r.x,y:n*r.k+r.y}},screen2GraphCoords:function(e,t,n){var r=(0,g.P2)(e.canvas);return{x:(t-r.x)/r.k,y:(n-r.y)/r.k}},centerAt:function(e,t,n,r){if(!e.canvas)return null;if(void 0!==t||void 0!==n){var i=Object.assign({},void 0!==t?{x:t}:{},void 0!==n?{y:n}:{});return r?new q.Tween(o()).to(i,r).easing(q.Easing.Quadratic.Out).onUpdate(a).start():a(i),this}return o();function o(){var t=(0,g.P2)(e.canvas);return{x:(e.width/2-t.x)/t.k,y:(e.height/2-t.y)/t.k}}function a(t){var n=t.x,r=t.y;e.zoom.translateTo(e.zoom.__baseElem,void 0===n?o().x:n,void 0===r?o().y:r)}},zoom:function(e,t,n){return e.canvas?void 0!==t?(n?new q.Tween({k:r()}).to({k:t},n).easing(q.Easing.Quadratic.Out).onUpdate((function(e){return i(e.k)})).start():i(t),this):r():null;function r(){return(0,g.P2)(e.canvas).k}function i(t){e.zoom.scaleTo(e.zoom.__baseElem,t)}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=this.getGraphBbox.apply(this,i);if(a){var s={x:(a.x[0]+a.x[1])/2,y:(a.y[0]+a.y[1])/2},l=Math.max(1e-12,Math.min(1e12,(e.width-2*n)/(a.x[1]-a.x[0]),(e.height-2*n)/(a.y[1]-a.y[0])));this.centerAt(s.x,s.y,t),this.zoom(l,t)}return this},getGraphBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=K(e.nodeVal),r=function(t){return Math.sqrt(Math.max(0,n(t)||1))*e.nodeRelSize},i=e.graphData.nodes.filter(t).map((function(e){return{x:e.x,y:e.y,r:r(e)}}));return i.length?{x:[(0,C.Z)(i,(function(e){return e.x-e.r})),T(i,(function(e){return e.x+e.r}))],y:[(0,C.Z)(i,(function(e){return e.y-e.r})),T(i,(function(e){return e.y+e.r}))]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Lt),stateInit:function(){return{lastSetZoom:1,forceGraph:new Dt,shadowGraph:(new Dt).cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new ae}},init:function(e,t){e.innerHTML="";var n=document.createElement("div");n.classList.add("force-graph-container"),n.style.position="relative",e.appendChild(n),t.canvas=document.createElement("canvas"),t.backgroundColor&&(t.canvas.style.background=t.backgroundColor),n.appendChild(t.canvas),t.shadowCanvas=document.createElement("canvas");var r=t.canvas.getContext("2d"),i=t.shadowCanvas.getContext("2d");(0,m.Z)(t.canvas).call(function(){var e,t,n,r,i=S,o=A,a=E,s=M,l={},c=(0,y.Z)("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",C).on("touchmove.drag",T).on("touchend.drag touchcancel.drag",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!r&&i.call(this,a,s)){var l=D(this,o.call(this,a,s),a,s,"mouse");l&&((0,m.Z)(a.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),(0,_.Z)(a.view),(0,b.r)(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(r){if((0,b.Z)(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}l.mouse("drag",r)}function g(e){(0,m.Z)(e.view).on("mousemove.drag mouseup.drag",null),(0,_.D)(e.view,n),(0,b.Z)(e),l.mouse("end",e)}function C(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=D(this,s,e,t,a[n].identifier,a[n]))&&((0,b.r)(e),r("start",e,a[n]))}}function T(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&((0,b.Z)(e),n("drag",e,r[t]))}function P(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<o;++t)(n=l[i[t].identifier])&&((0,b.r)(e),n("end",e,i[t]))}function D(e,t,n,r,i,o){var s,h,f,p=c.copy(),m=(0,v.Z)(o||n,t);if(null!=(f=a.call(e,new w("beforestart",{sourceEvent:n,target:d,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-m[0]||0,h=f.y-m[1]||0,function n(o,a,c){var g,y=m;switch(o){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=(0,v.Z)(c||a,t),g=u}p.call(o,e,new w(o,{sourceEvent:a,subject:f,target:d,identifier:i,active:g,x:m[0]+s,y:m[1]+h,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return d.filter=function(e){return arguments.length?(i="function"==typeof e?e:x(!!e),d):i},d.container=function(e){return arguments.length?(o="function"==typeof e?e:x(e),d):o},d.subject=function(e){return arguments.length?(a="function"==typeof e?e:x(e),d):a},d.touchable=function(e){return arguments.length?(s="function"==typeof e?e:x(!!e),d):s},d.on=function(){var e=c.on.apply(c,arguments);return e===c?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}().subject((function(){if(!t.enableNodeDrag)return null;var e=t.hoverObj;return e&&"Node"===e.type?e.d:null})).on("start",(function(e){var n=e.subject;n.__initialDragPos={x:n.x,y:n.y,fx:n.fx,fy:n.fy},e.active||(n.fx=n.x,n.fy=n.y),t.canvas.classList.add("grabbable")})).on("drag",(function(e){var n=e.subject,r=n.__initialDragPos,i=e,o=(0,g.P2)(t.canvas).k,a={x:r.x+(i.x-r.x)/o-n.x,y:r.y+(i.y-r.y)/o-n.y};["x","y"].forEach((function(e){return n["f".concat(e)]=n[e]=r[e]+(i[e]-r[e])/o})),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.__dragged=!0,t.onNodeDrag(n,a)})).on("end",(function(e){var n=e.subject,r=n.__initialDragPos,i={x:n.x-r.x,y:n.y-r.y};void 0===r.fx&&(n.fx=void 0),void 0===r.fy&&(n.fy=void 0),delete n.__initialDragPos,t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.canvas.classList.remove("grabbable"),t.isPointerDragging=!1,n.__dragged&&(delete n.__dragged,t.onNodeDragEnd(n,i))}))),t.zoom=(0,g.sP)(),t.zoom(t.zoom.__baseElem=(0,m.Z)(t.canvas)),t.zoom.__baseElem.on("dblclick.zoom",null),t.zoom.filter((function(e){return!!t.enableZoomPanInteraction&&!e.button})).scaleExtent([.01,1e3]).on("zoom",(function(){var e=(0,g.P2)(this);[r,i].forEach((function(t){zt(t),t.translate(e.x,e.y),t.scale(e.k,e.k)})),t.onZoom(bt({},e))})).on("end",(function(){var e=(0,g.P2)(this);t.onZoomEnd(bt({},e))})),Bt(t),t.forceGraph.onFinishUpdate((function(){(0,g.P2)(t.canvas).k===t.lastSetZoom&&t.graphData.nodes.length&&t.zoom.scaleTo(t.zoom.__baseElem,t.lastSetZoom=4/Math.cbrt(t.graphData.nodes.length))}));var o=document.createElement("div");o.classList.add("graph-tooltip"),n.appendChild(o);var a={x:-1e12,y:-1e12};["pointermove","pointerdown"].forEach((function(e){return n.addEventListener(e,(function(e){!t.isPointerDragging&&"pointermove"===e.type&&e.pressure>0&&[e.movementX,e.movementY].some((function(t){return Math.abs(t)>("touch"===e.pointerType?1:0)}))&&(t.isPointerDragging=!0);var r,i,s,l=(r=n.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop,{top:r.top+s,left:r.left+i});a.x=e.pageX-l.left,a.y=e.pageY-l.top,o.style.top="".concat(a.y,"px"),o.style.left="".concat(a.x,"px")}),{passive:!0})})),n.addEventListener("pointerup",(function(e){t.isPointerDragging?t.isPointerDragging=!1:requestAnimationFrame((function(){if(0===e.button&&(t.hoverObj?t["on".concat(t.hoverObj.type,"Click")](t.hoverObj.d,e):t.onBackgroundClick(e)),2===e.button)if(t.hoverObj){var n=t["on".concat(t.hoverObj.type,"RightClick")];n&&n(t.hoverObj.d,e)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(e)}))}),{passive:!0}),n.addEventListener("contextmenu",(function(e){return!(t.onBackgroundRightClick||t.onNodeRightClick||t.onLinkRightClick)||(e.preventDefault(),!1)})),t.forceGraph(r),t.shadowGraph(i);var s=k()((function(){Ft(i,t.width,t.height),t.shadowGraph.linkWidth((function(e){return K(t.linkWidth)(e)+t.linkHoverPrecision}));var e=(0,g.P2)(t.canvas);t.shadowGraph.globalScale(e.k).tickFrame()}),800);(this._animationCycle=function e(){if(t.enablePointerInteraction){var n=null;if(!t.isPointerDragging){var l=window.devicePixelRatio,c=a.x>0&&a.y>0?i.getImageData(a.x*l,a.y*l,1,1):null;c&&(n=t.colorTracker.lookup(c.data))}if(n!==t.hoverObj){var u=t.hoverObj,h=u?u.type:null,d=n?n.type:null;h&&h!==d&&t["on".concat(h,"Hover")](null,u.d),d&&t["on".concat(d,"Hover")](n.d,h===d?u.d:null);var f=n&&K(t["".concat(n.type.toLowerCase(),"Label")])(n.d)||"";o.style.visibility=f?"visible":"hidden",o.innerHTML=f,t.hoverObj=n}s()}Ft(r,t.width,t.height);var p=(0,g.P2)(t.canvas).k;t.onRenderFramePre&&t.onRenderFramePre(r,p),t.forceGraph.globalScale(p).tickFrame(),t.onRenderFramePost&&t.onRenderFramePost(r,p),q.update(),t.animationFrameRequestId=requestAnimationFrame(e)})()},update:function(e){}});var Ut=r(5697),jt=r.n(Ut);const Vt={width:jt().number,height:jt().number,graphData:jt().shape({nodes:jt().arrayOf(jt().object).isRequired,links:jt().arrayOf(jt().object).isRequired}),backgroundColor:jt().string,nodeRelSize:jt().number,nodeId:jt().string,nodeLabel:jt().oneOfType([jt().string,jt().func]),nodeVal:jt().oneOfType([jt().number,jt().string,jt().func]),nodeVisibility:jt().oneOfType([jt().bool,jt().string,jt().func]),nodeColor:jt().oneOfType([jt().string,jt().func]),nodeAutoColorBy:jt().oneOfType([jt().string,jt().func]),linkSource:jt().string,linkTarget:jt().string,linkLabel:jt().oneOfType([jt().string,jt().func]),linkVisibility:jt().oneOfType([jt().bool,jt().string,jt().func]),linkHoverPrecision:jt().number,linkColor:jt().oneOfType([jt().string,jt().func]),linkAutoColorBy:jt().oneOfType([jt().string,jt().func]),linkWidth:jt().oneOfType([jt().number,jt().string,jt().func]),linkCurvature:jt().oneOfType([jt().number,jt().string,jt().func]),linkDirectionalArrowLength:jt().oneOfType([jt().number,jt().string,jt().func]),linkDirectionalArrowColor:jt().oneOfType([jt().string,jt().func]),linkDirectionalArrowRelPos:jt().oneOfType([jt().number,jt().string,jt().func]),linkDirectionalParticles:jt().oneOfType([jt().number,jt().string,jt().func]),linkDirectionalParticleSpeed:jt().oneOfType([jt().number,jt().string,jt().func]),linkDirectionalParticleWidth:jt().oneOfType([jt().number,jt().string,jt().func]),linkDirectionalParticleColor:jt().oneOfType([jt().string,jt().func]),dagMode:jt().oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:jt().number,dagNodeFilter:jt().func,onDagError:jt().func,d3AlphaMin:jt().number,d3AlphaDecay:jt().number,d3VelocityDecay:jt().number,warmupTicks:jt().number,cooldownTicks:jt().number,cooldownTime:jt().number,onEngineTick:jt().func,onEngineStop:jt().func,getGraphBbox:jt().func},Gt={zoomToFit:jt().func,onNodeClick:jt().func,onNodeRightClick:jt().func,onNodeHover:jt().func,onNodeDrag:jt().func,onNodeDragEnd:jt().func,onLinkClick:jt().func,onLinkRightClick:jt().func,onLinkHover:jt().func,onBackgroundClick:jt().func,onBackgroundRightClick:jt().func,enablePointerInteraction:jt().bool,enableNodeDrag:jt().bool},Ht={showNavInfo:jt().bool,nodeOpacity:jt().number,nodeResolution:jt().number,nodeThreeObject:jt().oneOfType([jt().object,jt().string,jt().func]),nodeThreeObjectExtend:jt().oneOfType([jt().bool,jt().string,jt().func]),linkOpacity:jt().number,linkResolution:jt().number,linkCurveRotation:jt().oneOfType([jt().number,jt().string,jt().func]),linkMaterial:jt().oneOfType([jt().object,jt().string,jt().func]),linkThreeObject:jt().oneOfType([jt().object,jt().string,jt().func]),linkThreeObjectExtend:jt().oneOfType([jt().bool,jt().string,jt().func]),linkPositionUpdate:jt().func,linkDirectionalArrowResolution:jt().number,linkDirectionalParticleResolution:jt().number,forceEngine:jt().oneOf(["d3","ngraph"]),ngraphPhysics:jt().object,numDimensions:jt().oneOf([1,2,3])},Wt=Object.assign({},Vt,Gt,{linkLineDash:jt().oneOfType([jt().arrayOf(jt().number),jt().string,jt().func]),nodeCanvasObjectMode:jt().oneOfType([jt().string,jt().func]),nodeCanvasObject:jt().func,nodePointerAreaPaint:jt().func,linkCanvasObject:jt().func,linkCanvasObjectMode:jt().oneOfType([jt().string,jt().func]),enableZoomPanInteraction:jt().bool,onZoom:jt().func,onZoomEnd:jt().func,onRenderFramePre:jt().func,onRenderFramePost:jt().func});Object.assign({},Vt,Gt,Ht,{enableNavigationControls:jt().bool,controlType:jt().oneOf(["trackball","orbit","fly"]),rendererConfig:jt().object}),Object.assign({},Vt,Ht,{nodeDesc:jt().oneOfType([jt().string,jt().func]),linkDesc:jt().oneOfType([jt().string,jt().func]),onNodeCenterHover:jt().func,onLinkCenterHover:jt().func}),Object.assign({},Vt,Ht,{markerAttrs:jt().object,yOffset:jt().number,glScale:jt().number,onNodeCenterHover:jt().func,onLinkCenterHover:jt().func});const qt=function(e,t){var n="object"===u(t)?t:{wrapperElementType:t,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},r=n.wrapperElementType,o=void 0===r?"div":r,a=n.nodeMapper,l=void 0===a?function(e){return e}:a,f=n.methodNames,p=void 0===f?[]:f,m=n.initPropNames,g=void 0===m?[]:m;return(0,i.forwardRef)((function(t,n){var r=(0,i.useRef)(),a=h((0,i.useState)({}),2),u=a[0],f=a[1];(0,i.useEffect)((function(){return f(t)}));var m=(0,i.useMemo)((function(){var n=c()(g.filter((function(e){return t.hasOwnProperty(e)})).map((function(e){return[e,t[e]]})));return e(n)}),[]);(0,i.useLayoutEffect)((function(){m(l(r.current))}),[]),(0,i.useEffect)((function(){return m._destructor instanceof Function?m._destructor:void 0}),[]);var y=(0,i.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m[e]instanceof Function?m[e].apply(m,n):void 0}),[m]),v=s(t,[].concat(d(p),d(g)));return Object.keys(v).filter((function(e){return u[e]!==t[e]})).forEach((function(e){return y(e,t[e])})),(0,i.useImperativeHandle)(n,(function(){return c()(p.map((function(e){return[e,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y.apply(void 0,[e].concat(n))}]})))})),i.createElement(o,{ref:r})}))}(Nt,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});qt.displayName="ForceGraph2D",qt.propTypes=Wt;const Zt=qt;var Xt,Yt=r(1960),$t=r(5128),Jt=r(5935),Kt=r(6129),Qt=r(9831),en=r(4991),tn=r.n(en),nn=r(317),rn=r.n(nn);function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||an(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){if(e){if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(e,t):void 0}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r(1530),e=r.hmd(e),(Xt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&Xt(e);var ln="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},cn=(0,Yt.Z)().domain([0,2]).range([1e3,0]),un=(0,$t._b)().domain([0,14e3]).range([1,40]),hn={nodes:rn().slice(1).map((function(e){return{id:e[0],title:e[1],journal:e[2],pubYear:+e[3],nodeGroup:e[4],nCitedBy:+e[5],r:un(+e[5])}})),links:tn().slice(1).map((function(e,t){return{source:e[0],target:e[1],deg:e[2],idx:t}}))},dn="33378609",fn="33301246",pn={vaccine:"Moderna",title:"Efficacy and Safety of the mRNA-1273 SARS-CoV-2 Vaccine",journal:"New England Journal of Medicine",date:"Dec 30 2020"},mn={vaccine:"Pfizer",title:"Safety and Efficacy of the BNT162b2 mRNA Covid-19 Vaccine",journal:"New England Journal of Medicine",date:"Dec 10 2020"},gn=function(e){var t=(0,i.useRef)(),n=(0,i.useRef)(),r=on((0,i.useState)(!1),2),a=r[0],s=(r[1],on((0,i.useState)({x:0,y:0}),2)),l=s[0],c=s[1],u=on((0,i.useState)({x:0,y:0}),2),h=u[0],d=u[1],f=on((0,i.useState)(!1),2),p=f[0],m=f[1],g=on((0,i.useState)(null),2),y=g[0],v=g[1];return(0,i.useEffect)((function(){var r=t.current,i=(0,Jt.W)(e.visState,cn),o=i.centerAt,s=i.zoom,l=i.forcesArr;r.d3Force("center",null),r.d3Force("charge",null),r.d3Force("link",null);var c,u=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=an(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(l);try{for(u.s();!(c=u.n()).done;){var h=c.value;r.d3Force(h.name,h.force)}}catch(e){u.e(e)}finally{u.f()}a||(0,Qt.Bt)(hn,e.visState,n.current),r.d3ReheatSimulation(),r.centerAt(o[0],o[1],2e3),r.zoom(s,2e3),n.current=e.visState}),[e.visState]),i.createElement("div",{style:{cursor:p?"pointer":"auto"}},i.createElement(o.Z,{coords:l,visible:"state1"==e.visState,content:pn}),i.createElement(o.Z,{coords:h,visible:"state1"==e.visState,content:mn}),i.createElement(Zt,{ref:t,graphData:hn,linkColor:function(){return"rgba(255, 255, 255, .1)"},linkVisibility:(0,Qt.s3)(e.visState),linkCurvature:function(e){return e.source.y>e.target.y?-.2:.2},nodeColor:(0,Kt.y)(e.visState,y),nodeVisibility:(0,Qt.ai)(e.visState),nodeVal:(0,Qt.Ur)(e.visState),nodeCanvasObject:(0,Qt.YH)(e.visState,y),nodeCanvasObjectMode:function(){return"after"},nodeRelSize:1,onNodeHover:function(e){null!=e?(m(!0),v(e)):(m(!1),v(null))},nodeLabel:(0,Qt.gz)(e.visState),enableZoomPanInteraction:!1,enablePointerInteraction:!0,onNodeClick:function(e){window.open("https://pubmed.ncbi.nlm.nih.gov/".concat(e.id),"_blank")},onLinkClick:function(e){console.log(e)},onEngineTick:function(n){if("state1"==e.visState|"state2"==e.visState){var r=t.current;hn.nodes.filter((function(e){return"0"==e.nodeGroup})).forEach((function(e){var t=r.graph2ScreenCoords(e.x,e.y);e.id===dn?(t.x+=25,t.y-=110,c(t)):e.id===fn&&(t.x+=25,t.y+=40,d(t))}))}},d3AlphaDecay:.06,d3VelocityDecay:.15}))};ln(gn,"useRef{fgRef}\nuseRef{visStateRef}\nuseState{[engineIsRunning, setEngineIsRunning](false)}\nuseState{[modernaCoords, setModernaCoords]({ x: 0, y: 0 })}\nuseState{[pfizerCoords, setPfizerCoords]({ x: 0, y: 0 })}\nuseState{[isHovered, setIsHovered](false)}\nuseState{[hoveredNode, setHoveredNode](null)}\nuseEffect{}");var yn=gn;const vn=yn;var _n,bn;(_n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_n.register(cn,"xScale","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(un,"rScale","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(hn,"graphData","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(dn,"modernaPMID","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(fn,"pfizerPMID","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(pn,"modernaAnnot","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(mn,"pfizerAnnot","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(gn,"CiteGraph","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx"),_n.register(yn,"default","/Users/jeff/codeRepos/covid-science/src/components/Section3/CiteGraph.jsx")),(bn="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&bn(e)},9083:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var r=n(7294);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n(5697);var o=n(9756),a=n(3935);const s=r.createContext(null);var l="unmounted",c="exited",u="entering",h="entered",d="exiting",f=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=c,r.appearStatus=u):i=h:i=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:i},r.nextCallback=null,r}i(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==u&&n!==h&&(t=u):n!==u&&n!==h||(t=d)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===u?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[a.findDOMNode(this),r],o=i[0],s=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;e||n?(this.props.onEnter(o,s),this.safeSetState({status:u},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(o,s)}))}))}))):this.safeSetState({status:h},(function(){t.props.onEntered(o)}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:d},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:c},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:c},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(s.Provider,{value:null},"function"==typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function p(){}f.contextType=s,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},f.UNMOUNTED=l,f.EXITED=c,f.ENTERING=u,f.ENTERED=h,f.EXITING=d;const m=f;var g,y,v="out-in",_="in-out",b=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},x=((g={})["out-in"]=function(e){var t=e.current,n=e.changeState;return r.cloneElement(t,{in:!1,onExited:b(t,"onExited",(function(){n(u,null)}))})},g[_]=function(e){var t=e.current,n=e.changeState,i=e.children;return[t,r.cloneElement(i,{in:!0,onEntered:b(i,"onEntered",(function(){n(u)}))})]},g),w=((y={})["out-in"]=function(e){var t=e.children,n=e.changeState;return r.cloneElement(t,{in:!0,onEntered:b(t,"onEntered",(function(){n(h,r.cloneElement(t,{in:!0}))}))})},y[_]=function(e){var t=e.current,n=e.children,i=e.changeState;return[r.cloneElement(t,{in:!1,onExited:b(t,"onExited",(function(){i(h,r.cloneElement(n,{in:!0}))}))}),r.cloneElement(n,{in:!0})]},y),S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={status:h,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===u&&e.mode===_?{status:u}:!t.current||((n=t.current)===(i=e.children)||r.isValidElement(n)&&r.isValidElement(i)&&null!=n.key&&n.key===i.key)?{current:r.cloneElement(e.children,{in:!0})}:{status:d};var n,i},n.render=function(){var e,t=this.props,n=t.children,i=t.mode,o=this.state,a=o.status,l=o.current,c={children:n,current:l,changeState:this.changeState,status:a};switch(a){case u:e=w[i](c);break;case d:e=x[i](c);break;case h:e=l}return r.createElement(s.Provider,{value:{isMounting:!this.appeared}},e)},t}(r.Component);S.propTypes={},S.defaultProps={mode:v};const A=S;var E=n(2122);function M(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var C=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=M(n.className,r):n.setAttribute("class",M(n.className&&n.className.baseVal||"",r)));var n,r}))},T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}i(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&C(e,r),i&&C(e,i),o&&C(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,o.Z)(e,["classNames"]));return r.createElement(m,(0,E.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(r.Component);T.defaultProps={classNames:""},T.propTypes={};const P=T;var D;function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(6030),e=n.hmd(e),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&D(e);var O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},I={state1:"For instance, in December 2020, both Pfizer and Moderna published articles reporting the success of their phase 3 vaccine clinical trials, officially paving the way for approval and wide scale distribution.",state2:"Each of these articles cited some of the key prior work supporting the vaccine development (including earlier phase 1 & 2 trials, and non-human animal results).",state3:"And each of those supporting articles, in turn, cited prior work, including articles on the structural biology of SARS-CoV-2 virus, early candidate mRNA vaccines, and key insights from the previous SARS and MERS outbreaks. ",state4:"But these previous articles were not just important to the development of vaccines. Most of these articles went on to be cited by tens (or hundreds, or thousands) of subsequent articles, and collectively make up a tiny portion of the web of research surrounding coronaviruses and COVID-19."},R=function(e){var t,n,i=(t=(0,r.useState)(I.state1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return(0,r.useEffect)((function(){Object.keys(I).includes(e.visState)?a(I[e.visState]):console.log("no corresponding narrative for state: ".concat(e.visState))}),[e.visState]),r.createElement("div",{className:"graph-narrative-container","data-v-fa093fa4":""},r.createElement(A,{mode:"out-in","data-v-fa093fa4":""},r.createElement(P,{classNames:"fade",addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},key:o,"data-v-fa093fa4":""},r.createElement("div",{className:"graph-narrative-text","data-v-fa093fa4":""},r.createElement("p",{"data-v-fa093fa4":""},o)))))};O(R,"useState{[text, setText](narrative['state1'])}\nuseEffect{}");var L=R;const B=L;var z,F;(z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(z.register(I,"narrative","/Users/jeff/codeRepos/covid-science/src/components/Section3/GraphNarrative.jsx"),z.register(R,"GraphNarrative","/Users/jeff/codeRepos/covid-science/src/components/Section3/GraphNarrative.jsx"),z.register(L,"default","/Users/jeff/codeRepos/covid-science/src/components/Section3/GraphNarrative.jsx")),(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&F(e)},8766:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r,i=n(7294),o=n(2518),a=n(9083),s=n(5716),l=n(7082);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(1938),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};s.p8.registerPlugin(l.i);var h=["state1","state2","state3","state4"],d=function(e){var t,n,r=(t=(0,i.useState)("state1"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=r[0],u=r[1],d=h.map((function(e,t){return i.createElement("div",{key:t,className:"visState ".concat(e),"data-v-840b4078":""})}));(0,i.useEffect)((function(){h.forEach((function(e,t){l.i.create({trigger:".".concat(e),start:"top center",end:"bottom center",onEnter:function(){return f(t)},onLeaveBack:function(){return f(t-1)}})}))}),[]),(0,i.useEffect)((function(){setTimeout((function(){l.i.refresh()}),3e3)}),[]);var f=function(e){e>=0&&u(h[e])};return i.createElement("section",{className:e.rootClassName,"data-v-840b4078":""},i.createElement("div",{className:"narrative-text","data-v-840b4078":""},i.createElement("div",{className:"section-break","data-v-840b4078":""}),i.createElement("p",{"data-v-840b4078":""},"Science is incremental, and the major headline-grabbing findings always stand on the shoulders of years of discoveries that came before. The time it took to develop vaccines for COVID-19 obliterated previous records — not because it was rushed, but because of the head start afforded by decades of prior research on other coronaviruses. By mid-March 2020, before most US cities had even announced their first lock downs, the first vaccine candidate was already"," ",i.createElement("a",{href:"https://www.nih.gov/news-events/news-releases/nih-clinical-trial-investigational-vaccine-covid-19-begins","data-v-840b4078":""},"entering clinical trial."," ")),i.createElement("p",{"data-v-840b4078":""},"Research articles formally acknowledge previous work via citations, which, when tracked, can establish the lineage of a scientific discovery. By tracing the lineage of an article's citations, you can begin to reveal the contours of the mountains of research that came before.")),i.createElement("div",{className:"section3-scroll-container","data-v-840b4078":""},i.createElement("div",{className:"graph-container","data-v-840b4078":""},i.createElement(a.Z,{visState:s,"data-v-840b4078":""}),i.createElement(o.Z,{visState:s,"data-v-840b4078":""})),d),i.createElement("div",{className:"narrative-text","data-v-840b4078":""},i.createElement("div",{className:"section-break","data-v-840b4078":""}),i.createElement("p",{"data-v-840b4078":""},"Confronted with the challenges of fighting an unknown virus, the scientific and medical communities dug in and armed themselves with the tool that's gotten us through similar challenges in the past: empirical research. New viruses prompt new questions, and the only way to answer these questions is by collecting the data, analyzing results, sharing findings, and debating the implications. The process is demanding, laborious, and meticulously methodical (read: slow). The volumes of information learned about COVID-19 in such a short time span are a testament to the scale of the research effort throughout 2020 and continuing today. The foundational research on earlier coronaviruses, coupled with the shift in resources and focus at the start of 2020, has enabled us to begin imagining a time beyond COVID-19. And will better prepare us for whatever comes next.")))};u(d,"useState{[currentVisState, setVisState]('state1')}\nuseEffect{}\nuseEffect{}");var f=d;const p=f;var m,g;(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(h,"visStates","/Users/jeff/codeRepos/covid-science/src/components/Section3/Section3.jsx"),m.register(d,"Section3","/Users/jeff/codeRepos/covid-science/src/components/Section3/Section3.jsx"),m.register(f,"default","/Users/jeff/codeRepos/covid-science/src/components/Section3/Section3.jsx")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},6129:(e,t,n)=>{"use strict";n.d(t,{y:()=>h});var r,i=n(5128),o=n(8339);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,s,l="33378609",c="33301246",u=(0,i._b)().domain([0,13e3]).range([o.Z.accent2,o.Z.accent1]),h=function(e,t){var n;switch(e){case"state1":n=function(e){return o.Z.accent1};break;case"state2":n=function(e){return e===t?"gray":[l,c].includes(e.id)?o.Z.accent1:o.Z.textColor};break;case"state3":n=function(e){return e===t?"gray":[l,c].includes(e.id)?o.Z.accent1:"2"===e.nodeGroup?o.Z.textColor:"rgba(255, 255, 255, .25)"};break;case"state4":n=function(e){return e===t?o.Z.textColor:u(e.nCitedBy)};break;default:n=function(e){return"rgba(255, 0, 0, 1)"}}return n};(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(l,"modernaPMID","/Users/jeff/codeRepos/covid-science/src/components/Section3/colors.js"),a.register(c,"pfizerPMID","/Users/jeff/codeRepos/covid-science/src/components/Section3/colors.js"),a.register(u,"colorScale","/Users/jeff/codeRepos/covid-science/src/components/Section3/colors.js"),a.register(h,"getNodeColorByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/colors.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},8294:(e,t,n)=>{"use strict";n.d(t,{z:()=>P});var r=n(8833);function i(e){return function(){return e}}function o(e){return 1e-6*(e()-.5)}function a(e){return e.x}function s(e){return e.y}function l(){var e,t,n,l,c,u=i(-30),h=1,d=1/0,f=.81;function p(n){var i,o=e.length,c=(0,r.Z)(e,a,s).visitAfter(g);for(l=n,i=0;i<o;++i)t=e[i],c.visit(y)}function m(){if(e){var t,n,r=e.length;for(c=new Array(r),t=0;t<r;++t)n=e[t],c[n.index]=+u(n,t,e)}}function g(e){var t,n,r,i,o,a=0,s=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(a+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=c[t.data.index]}while(t=t.next)}e.value=a}function y(e,r,i,a){if(!e.value)return!0;var s=e.x-t.x,u=e.y-t.y,p=a-r,m=s*s+u*u;if(p*p/f<m)return m<d&&(0===s&&(m+=(s=o(n))*s),0===u&&(m+=(u=o(n))*u),m<h&&(m=Math.sqrt(h*m)),t.vx+=s*e.value*l/m,t.vy+=u*e.value*l/m),!0;if(!(e.length||m>=d)){(e.data!==t||e.next)&&(0===s&&(m+=(s=o(n))*s),0===u&&(m+=(u=o(n))*u),m<h&&(m=Math.sqrt(h*m)));do{e.data!==t&&(p=c[e.data.index]*l/m,t.vx+=s*p,t.vy+=u*p)}while(e=e.next)}}return p.initialize=function(t,r){e=t,n=r,m()},p.strength=function(e){return arguments.length?(u="function"==typeof e?e:i(+e),m(),p):u},p.distanceMin=function(e){return arguments.length?(h=e*e,p):Math.sqrt(h)},p.distanceMax=function(e){return arguments.length?(d=e*e,p):Math.sqrt(d)},p.theta=function(e){return arguments.length?(f=e*e,p):Math.sqrt(f)},p}function c(e){return e.x+e.vx}function u(e){return e.y+e.vy}function h(e){var t,n,a,s=1,l=1;function h(){for(var e,i,h,f,p,m,g,y=t.length,v=0;v<l;++v)for(i=(0,r.Z)(t,c,u).visitAfter(d),e=0;e<y;++e)h=t[e],m=n[h.index],g=m*m,f=h.x+h.vx,p=h.y+h.vy,i.visit(_);function _(e,t,n,r,i){var l=e.data,c=e.r,u=m+c;if(!l)return t>f+u||r<f-u||n>p+u||i<p-u;if(l.index>h.index){var d=f-l.x-l.vx,y=p-l.y-l.vy,v=d*d+y*y;v<u*u&&(0===d&&(v+=(d=o(a))*d),0===y&&(v+=(y=o(a))*y),v=(u-(v=Math.sqrt(v)))/v*s,h.vx+=(d*=v)*(u=(c*=c)/(g+c)),h.vy+=(y*=v)*u,l.vx-=d*(u=1-u),l.vy-=y*u)}}}function d(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function f(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=i(null==e?1:+e)),h.initialize=function(e,n){t=e,a=n,f()},h.iterations=function(e){return arguments.length?(l=+e,h):l},h.strength=function(e){return arguments.length?(s=+e,h):s},h.radius=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),f(),h):e},h}function d(e){var t,n,r,o=i(.1);function a(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function s(){if(t){var i,a=t.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+o(t[i],i,t)}}return"function"!=typeof e&&(e=i(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(o="function"==typeof e?e:i(+e),s(),a):o},a.x=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s(),a):e},a}function f(e){var t,n,r,o=i(.1);function a(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function s(){if(t){var i,a=t.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+o(t[i],i,t)}}return"function"!=typeof e&&(e=i(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(o="function"==typeof e?e:i(+e),s(),a):o},a.y=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s(),a):e},a}function p(e){return function(){return e}}function m(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,c,u,h,d,f=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=t>=(o=(m+y)/2))?m=o:y=o,(u=n>=(a=(g+v)/2))?g=a:v=a,i=f,!(f=f[h=u<<1|c]))return i[h]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return p.next=f,i?i[h]=p:e._root=p,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+y)/2))?m=o:y=o,(u=n>=(a=(g+v)/2))?g=a:v=a}while((h=u<<1|c)==(d=(l>=a)<<1|s>=o));return i[d]=f,i[h]=p,e}function g(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function y(e){return e[0]}function v(e){return e[1]}function _(e,t,n){var r=new b(null==t?y:t,null==n?v:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function b(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function x(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}Math.PI,Math.sqrt(5);var w,S=_.prototype=b.prototype;function A(){var e,t,n,r,i,o,a,s=0,l=p(-30),c=1,u=1/0,h=.81;function d(){return 1e-6*(Math.random()-.5)}function f(e){return e.x}function m(e){return e.y}function g(i){var a,l=e.length;for(r&&!o(s,e)||(r=_(e,f,m).visitAfter(v),e.update.push(s)),n=i,a=0;a<l;++a)t=e[a],r.visit(b);++s}function y(){if(e){s=0,e.update=[],o=i(),r=null;var t,n,c=e.length;for(a=new Array(c),t=0;t<c;++t)n=e[t],a[n.index]=+l(n,t,e)}}function v(e){var t,n,r,i,o,s=0,l=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,i+=n*t.y);e.x=r/l,e.y=i/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=a[t.data.index]}while(t=t.next)}e.value=s}function b(e,r,i,o){if(!e.value)return!0;var s=e.x-t.x,l=e.y-t.y,f=o-r,p=s*s+l*l;if(f*f/h<p)return p<u&&(0===s&&(p+=(s=d())*s),0===l&&(p+=(l=d())*l),p<c&&(p=Math.sqrt(c*p)),t.vx+=s*e.value*n/p,t.vy+=l*e.value*n/p),!0;if(!(e.length||p>=u)){(e.data!==t||e.next)&&(0===s&&(p+=(s=d())*s),0===l&&(p+=(l=d())*l),p<c&&(p=Math.sqrt(c*p)));do{e.data!==t&&(p=(s=e.data.x-t.x)*s+(l=e.data.y-t.y)*l,0===s&&(p+=(s=d())*s),0===l&&(p+=(l=d())*l),p<c&&(p=Math.sqrt(c*p)),f=a[e.data.index]*n/p,t.vx+=s*f,t.vy+=l*f)}while(e=e.next)}}return i=function(){return function(e){return e%13==0}},g.initialize=function(t){e=t,y()},g.strength=function(e){return arguments.length?(l="function"==typeof e?e:p(+e),y(),g):l},g.distanceMin=function(e){return arguments.length?(c=e*e,g):Math.sqrt(c)},g.distanceMax=function(e){return arguments.length?(u=e*e,g):Math.sqrt(u)},g.theta=function(e){return arguments.length?(h=e*e,g):Math.sqrt(h)},g.update=function(e){return arguments.length?(o=(i=e)(),g):i},g}S.copy=function(){var e,t,n=new b(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=x(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=x(t));return n},S.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return m(this.cover(t,n),t,n,e)},S.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<o;++n)m(this,a[n],s[n],e[n]);return this},S.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n,c=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},S.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},S.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},S.find=function(e,t,n){var r,i,o,a,s,l,c,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new g(m,u,h,d,f)),null==n?n=1/0:(u=e-n,h=t-n,d=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>f||(a=l.x1)<u||(s=l.y1)<h))if(m.length){var y=(i+a)/2,v=(o+s)/2;p.push(new g(m[3],y,v,a,s),new g(m[2],i,v,y,s),new g(m[1],y,o,a,v),new g(m[0],i,o,y,v)),(c=(t>=v)<<1|e>=y)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var _=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=_*_+b*b;if(x<n){var w=Math.sqrt(n=x);u=e-w,h=t-w,d=e+w,f=t+w,r=m.data}}return r},S.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,c,u,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(u=a>=(l=(m+y)/2))?m=l:y=l,t=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},S.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},S.root=function(){return this._root},S.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},S.visit=function(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new g(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var c=(r+o)/2,u=(i+a)/2;(n=l[3])&&s.push(new g(n,c,u,o,a)),(n=l[2])&&s.push(new g(n,r,u,c,a)),(n=l[1])&&s.push(new g(n,c,i,o,u)),(n=l[0])&&s.push(new g(n,r,i,c,u))}return this},S.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new g(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,c=t.y1,u=(a+l)/2,h=(s+c)/2;(o=i[0])&&n.push(new g(o,a,s,u,h)),(o=i[1])&&n.push(new g(o,u,s,l,h)),(o=i[2])&&n.push(new g(o,a,h,u,c)),(o=i[3])&&n.push(new g(o,u,h,l,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},S.x=function(e){return arguments.length?(this._x=e,this):this._x},S.y=function(e){return arguments.length?(this._y=e,this):this._y},n(4880),e=n.hmd(e),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&w(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var E,M,C="33378609",T="33301246",P=function(e,t){switch(e){case"state1":return[{name:"charge",force:l().strength(-15).distanceMax(500)},{name:"collide",force:h().radius(5).strength(1)},{name:"x",force:d().x((function(e){return t(e.nodeGroup)})).strength(.5)},{name:"y",force:f().y((function(e){return e.id===C?-10:e.id===T?10:0})).strength(.13)}];case"state2":case"state3":return[{name:"charge",force:A().strength(-10).distanceMax(500)},{name:"collide",force:h().radius(5).strength(1)},{name:"x",force:d().x((function(e){return t(e.nodeGroup)})).strength(.5)},{name:"y",force:f().y(0).strength(.13)}];case"state4":return[{name:"charge",force:A().strength(-5).distanceMax(500).distanceMin(5)},{name:"x",force:d().x((function(e){return t(e.nodeGroup)})).strength(.5)},{name:"y",force:f().y(0).strength(.15)},{name:"collide",force:h().radius((function(e){return 2*e.r})).strength(.4)}];case"state5":return[]}};(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(C,"modernaPMID","/Users/jeff/codeRepos/covid-science/src/components/Section3/forces.js"),E.register(T,"pfizerPMID","/Users/jeff/codeRepos/covid-science/src/components/Section3/forces.js"),E.register(P,"getForcesByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/forces.js")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},9831:(e,t,n)=>{"use strict";n.d(t,{ai:()=>s,s3:()=>l,Ur:()=>c,YH:()=>p,gz:()=>g,Bt:()=>y});var r,i=n(8602),o=n(1960),a=n(8339);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var s=function(e){var t;switch(e){case"state1":t=function(e){return["0","9"].includes(e.nodeGroup)};break;case"state2":t=function(e){return["0","1"].includes(e.nodeGroup)};break;case"state3":case"state4":t=function(e){return["0","1","2"].includes(e.nodeGroup)};break;default:t=function(e){return!0}}return t},l=function(e){var t;switch(e){case"state1":t=function(e){return!1};break;case"state2":t=function(e){return"1"==e.deg};break;case"state3":case"state4":t=function(e){return["1","2"].includes(e.deg)};break;default:t=function(e){return!0}}return t},c=function(e){var t;switch(e){case"state1":t=function(e){return 25};case"state2":case"state3":t=function(e){return 25};break;case"state4":t=function(e){return Math.PI*Math.pow(e.r,2)};break;default:t=function(e){return e.r}}return t},u=(0,o.Z)().domain([1e3,14e3]).range([10,20]);window.innerWidth<768&&u.range([8,16]);var h,d,f=window.innerWidth>=768?1e3:3e3,p=function(e,t){var n;switch(e){case"state4":n=function(e,n,r){var o=e.nCitedBy,s=e.x,l=e.y;if(o<f)return null;var c=u(o)/r;n.font="".concat(c,"px Theinhardt-Med"),n.textAlign="center",n.textBaseline="middle",n.fillStyle=e===t?a.Z.bgColor:a.Z.textColor;var h=o<1e3?o:(0,i.WU)(".2s")(o);n.fillText(h,s,l)};break;default:n=function(){return null}}return n},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?'\n    <div class="cite-graph-tooltip-container '.concat("0"===e.nodeGroup?"left":"",'">\n      <div class="title">').concat(e.title,'</div>\n      <div class="journal">').concat(e.journal," <span>(").concat(e.pubYear,')</span></div>\n      <div class="break"></div>\n      <div class="cited-by">cited by <span>').concat(e.nCitedBy.toLocaleString(),"</span> articles</div>\n    </div>"):'\n        <div class="cite-graph-tooltip-container '.concat("0"===e.nodeGroup?"left":"",'">\n          <div class="title">').concat(e.title,'</div>\n          <div class="journal">').concat(e.journal," <span>(").concat(e.pubYear,")</span></div>\n        </div>")},g=function(e){var t;switch(e){case"state1":case"state2":case"state3":t=function(e){return m(e,!1)};break;case"state4":t=function(e){return m(e,!0)};break;default:t=function(){return null}}return t},y=function(e,t,n){var r=n>t?"up":"down";e.nodes.forEach((function(e){e.fx=void 0,e.fy=void 0})),e.nodes.filter((function(e){return"9"==e.nodeGroup})).forEach((function(e,t){switch(t){case 0:e.fx=0,e.fy=-500;break;case 1:e.fx=1e3,e.fy=-500;break;case 2:e.fx=1e3,e.fy=500;break;case 3:e.fx=0,e.fy=500}})),"state2"==t&&"up"==r&&e.nodes.filter((function(e){return"1"===e.nodeGroup})).forEach((function(e){e.fx=e.x,e.fy=e.y}))};(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(s,"getNodeVisibilityByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(l,"getLinkVisibilityByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(c,"getNodeSizeByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(u,"fontScale","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(f,"labelThresh","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(p,"getNodeObjByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(m,"generateToolTip","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(g,"getNodeTooltipByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js"),h.register(y,"fixNodesByState","/Users/jeff/codeRepos/covid-science/src/components/Section3/graphUtils.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},5935:(e,t,n)=>{"use strict";n.d(t,{W:()=>l});var r,i=n(8294);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,a,s=function(e){var t=window.innerWidth;switch(e){case"state1":if(t>=960)return 5;if(t>=480&t<960)return 4;if(t<480)return 3;break;case"state2":if(t>=960)return 1.5;if(t>=480&t<960)return 1.25;if(t<480)return.65;break;case"state3":if(t>=960)return.8;if(t>=480&t<960)return.6;if(t<480)return.35;break;case"state4":if(t>=960)return.65;if(t>=480&t<960)return.5;if(t<480)return.3}},l=function(e,t){switch(e){case"state1":return{centerAt:[t(-.1),0],zoom:s(e),forcesArr:(0,i.z)(e,t)};case"state2":return{centerAt:[t(.5),0],zoom:s(e),forcesArr:(0,i.z)("state2",t)};case"state3":return{centerAt:[t(1),0],zoom:s(e),forcesArr:(0,i.z)("state3",t)};case"state4":return{centerAt:[t(1.3),0],zoom:s(e),forcesArr:(0,i.z)("state4",t)};default:return{centerAt:[t(1),0],zoom:.65,forcesArr:(0,i.z)("state1",t)}}};(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(o.register(s,"getZoom","/Users/jeff/codeRepos/covid-science/src/components/Section3/visStates.js"),o.register(l,"getVisStateProps","/Users/jeff/codeRepos/covid-science/src/components/Section3/visStates.js")),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},50:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Hero});var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2212),_js_Utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4880),_js_THREE_Utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8021),_bmfonts_Georgia_json__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6607),_assets_heroDataFiltered_csv__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(636),_assets_heroDataFiltered_csv__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_assets_heroDataFiltered_csv__WEBPACK_IMPORTED_MODULE_4__),_assets_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6048),_assets_shaders_covidFrag_glsl__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5882),_assets_shaders_covidVert_glsl__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3380),_assets_shaders_titleFrag_glsl__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6479),_assets_textures_covid_outline_jpg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5851),_assets_bmfonts_Georgia_png__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4802);module=__webpack_require__.hmd(module);var THREE=__webpack_require__(2212),enterModule;function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},createGeometry=__webpack_require__(1385),MSDFShader=__webpack_require__(2299),Hero=function(){function Hero(e){var t=this;_classCallCheck(this,Hero),this.articles=_assets_heroDataFiltered_csv__WEBPACK_IMPORTED_MODULE_4___default().slice(1).map((function(e){return{title:"".concat(e[0]),journal:e[1]}})),this.cam=e.camera||null,this.renderer=e.renderer,this.titleTexture=null,this.titleMat=null,this.activeTitles=[],this.currentArtIdx=0,this.nRows=0,this.rowSpeeds={},this.titleScale=.005,this.padding={x:.1,y:.01},this.mouse=new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(0,0),this.obj=new three__WEBPACK_IMPORTED_MODULE_0__.Group,this.vHeight=(0,_js_THREE_Utils__WEBPACK_IMPORTED_MODULE_2__.j)(0,this.cam),this.vWidth=(0,_js_THREE_Utils__WEBPACK_IMPORTED_MODULE_2__.Q)(0,this.cam),this.bufferResolution=this.renderer.getDrawingBufferSize(new three__WEBPACK_IMPORTED_MODULE_0__.Vector2),window.addEventListener("scroll",(function(e){t.mouse=new three__WEBPACK_IMPORTED_MODULE_0__.Vector2(0,window.scrollY/window.innerHeight)}),{passive:!0}),this.initScene()}return _createClass(Hero,[{key:"addDebugMoving",value:function(){var e=(new three__WEBPACK_IMPORTED_MODULE_0__.TextureLoader).load(_assets_textures_covid_outline_jpg__WEBPACK_IMPORTED_MODULE_5__),t=new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(2,2,10,10),n=new three__WEBPACK_IMPORTED_MODULE_0__.RawShaderMaterial({vertexShader:_assets_shaders_covidVert_glsl__WEBPACK_IMPORTED_MODULE_7__.Z,fragmentShader:_assets_shaders_covidFrag_glsl__WEBPACK_IMPORTED_MODULE_8__.Z,transparent:!0});n.uniforms.u_time={value:0},n.uniforms.u_resolution={value:this.bufferResolution.clone()},n.uniforms.u_overlay={value:e},this.debugMoving=new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(t,n),this.debugMoving.position.set(.5*-this.vWidth,1,0),this.obj.add(this.debugMoving)}},{key:"addDebugStatic",value:function(){var e=(new three__WEBPACK_IMPORTED_MODULE_0__.TextureLoader).load("/textures/covid_outline.jpg"),t=new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(9,7,10,10),n=new three__WEBPACK_IMPORTED_MODULE_0__.RawShaderMaterial({vertexShader:_assets_shaders_covidVert_glsl__WEBPACK_IMPORTED_MODULE_7__.Z,fragmentShader:_assets_shaders_covidFrag_glsl__WEBPACK_IMPORTED_MODULE_8__.Z,transparent:!0});n.uniforms.u_time={value:0},n.uniforms.u_resolution={value:this.bufferResolution.clone()},n.uniforms.u_overlay={value:e},this.debugStatic=new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(t,n),this.obj.add(this.debugStatic)}},{key:"initScene",value:function(){var e=this,t=new three__WEBPACK_IMPORTED_MODULE_0__.TextureLoader,n=t.load(_assets_textures_covid_outline_jpg__WEBPACK_IMPORTED_MODULE_5__);t.load(_assets_bmfonts_Georgia_png__WEBPACK_IMPORTED_MODULE_6__,(function(t){e.titleTexture=t,e.titleMat=new three__WEBPACK_IMPORTED_MODULE_0__.RawShaderMaterial(MSDFShader({vertexShader:_assets_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_9__.Z,fragmentShader:_assets_shaders_titleFrag_glsl__WEBPACK_IMPORTED_MODULE_10__.Z,map:e.titleTexture,side:THREE.DoubleSide,transparent:!1,negate:!1})),e.titleMat.uniforms.u_time={value:0},e.titleMat.uniforms.u_resolution={value:e.bufferResolution.clone()},e.titleMat.uniforms.u_overlay={value:n},e.titleMat.uniforms.u_mouse={value:e.mouse.clone()};var r=!1,i=.5*e.vHeight,o=-1*e.vWidth,a=0;for(e.rowSpeeds[a]=_js_Utils_js__WEBPACK_IMPORTED_MODULE_1__.c.randBw(.012,.003);!r;){var s=e.createArtTitle();s.obj.position.set(o,i,0),s.rowIdx=a,(o+=s.width+e.padding.x)>e.vWidth&&(o=-1*e.vWidth,s.isLastInRow=!0,i-=s.height+e.padding.y,a++,e.rowSpeeds[a]=_js_Utils_js__WEBPACK_IMPORTED_MODULE_1__.c.randBw(.012,.003)),i<-.5*e.vHeight&&(r=!0),e.activeTitles.push(s)}var l,c=_createForOfIteratorHelper(e.activeTitles);try{for(c.s();!(l=c.n()).done;){var u=l.value;e.obj.add(u.obj)}}catch(e){c.e(e)}finally{c.f()}e.nRows=new Set(e.activeTitles.map((function(e){return e.rowIdx}))).size}))}},{key:"createArtTitle",value:function(){var e=this.articles[this.currentArtIdx].title,t=createGeometry({font:_bmfonts_Georgia_json__WEBPACK_IMPORTED_MODULE_3__,text:e}),n="title-".concat(this.currentArtIdx),r=new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(t,this.titleMat);r.name=n,r.rotation.set(Math.PI,0,0),r.scale.set(this.titleScale,this.titleScale,this.titleScale);var i=new three__WEBPACK_IMPORTED_MODULE_0__.Box3;return i.setFromObject(r),this.currentArtIdx++,this.currentArtIdx=this.currentArtIdx===this.articles.length?0:this.currentArtIdx,{obj:r,meshName:n,title:e,width:i.max.x-i.min.x,height:i.max.y-i.min.y,keepAlive:!0,isLastInRow:!1}}},{key:"resize",value:function(){var e=this;this.vHeight=(0,_js_THREE_Utils__WEBPACK_IMPORTED_MODULE_2__.j)(0,this.cam),this.vWidth=(0,_js_THREE_Utils__WEBPACK_IMPORTED_MODULE_2__.Q)(0,this.cam),this.bufferResolution=this.renderer.getDrawingBufferSize(new three__WEBPACK_IMPORTED_MODULE_0__.Vector2),this.activeTitles.forEach((function(t){t.obj.material.uniforms.u_resolution.value=e.bufferResolution.clone(),t.obj.material.uniformsNeedUpdate=!0})),this.showDebugMoving&&(this.debugMoving.material.uniforms.u_resolution.value=this.bufferResolution.clone(),this.debugMoving.material.uniformsNeedUpdate=!0),this.showDebugStatic&&(this.debugStatic.material.uniforms.u_resolution.value=this.bufferResolution.clone(),this.debugStatic.material.uniformsNeedUpdate=!0)}},{key:"removeDeadTitles",value:function(){if(0!==this.activeTitles.length)for(var e=this.activeTitles.length-1;e>=0;e--){var t=this.activeTitles[e];if(!t.keepAlive){var n=t.meshName;this.obj.remove(this.obj.getObjectByName(n)),this.activeTitles.splice(e,1)}}}},{key:"update",value:function(e){var t=this;this.showDebugMoving&&(this.debugMoving.position.x+=.05,this.debugMoving.position.x>.5*this.vWidth&&(this.debugMoving.position.x=.5*-this.vWidth));var n=[];this.activeTitles.forEach((function(n,r){n.obj.position.x-=t.rowSpeeds[n.rowIdx],n.obj.material.uniforms.u_time.value+=e,n.obj.material.uniforms.u_mouse.value=t.mouse.clone(),n.obj.material.uniformsNeedUpdate=!0,n.obj.position.x+n.width<-.5*t.vWidth&&(n.keepAlive=!1)})),this.activeTitles.filter((function(e){return e.isLastInRow})).forEach((function(e){if(e.obj.position.x+e.width<.5*t.vWidth){var r=t.createArtTitle();r.obj.position.set(e.obj.position.x+e.width+t.padding.x,e.obj.position.y,e.obj.position.z),r.rowIdx=e.rowIdx,r.isLastInRow=!0,n.push(r),e.isLastInRow=!1}})),this.removeDeadTitles();for(var r=0,i=n;r<i.length;r++){var o=i[r];this.activeTitles.push(o),this.obj.add(o.obj)}}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Hero}(),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(Hero,"Hero","/Users/jeff/codeRepos/covid-science/src/components/SectionHero/Hero.js"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},4938:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r,i=n(7294);n(9418),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o=function(e){return i.createElement("section",{className:e.rootClassName,"data-v-e1839179":""},i.createElement("div",{className:"title-container","data-v-e1839179":""},i.createElement("h1",{className:"title","data-v-e1839179":""},"Following the Science"),i.createElement("div",{className:"subtitle","data-v-e1839179":""},"A look at the global research effort to know and defeat COVID-19"),i.createElement("div",{className:"byline","data-v-e1839179":""},"By"," ",i.createElement("a",{href:"https://jeffmacinnes.com",target:"_blank","data-v-e1839179":""},"Jeff MacInnes"))))},a=o;const s=a;var l,c;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(o,"SectionHero","/Users/jeff/codeRepos/covid-science/src/components/SectionHero/SectionHero.jsx"),l.register(a,"default","/Users/jeff/codeRepos/covid-science/src/components/SectionHero/SectionHero.jsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},4109:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r,i=n(7294);n(621),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o="https://www.ncbi.nlm.nih.gov/pmc/?term=%22coronavirus%22%5BMeSH+Terms%5D+OR+%22coronavirus%22%5BAll+Fields%5D+OR+%22COV%22%5BAll+Fields%5D",a="https://www.ncbi.nlm.nih.gov/pmc/?term=%22COVID-19%22%5BAll%20Fields%5D%20OR%20%22COVID-19%22%5BMeSH%20Terms%5D%20OR%20%22COVID-19%20Vaccines%22%5BAll%20Fields%5D%20OR%20%22COVID-19%20Vaccines%22%5BMeSH%20Terms%5D%20OR%20%22COVID-19%20serotherapy%22%5BAll%20Fields%5D%20OR%20%22COVID-19%20Nucleic%20Acid%20Testing%22%5BAll%20Fields%5D%20OR%20%22covid-19%20nucleic%20acid%20testing%22%5BMeSH%20Terms%5D%20OR%20%22COVID-19%20Serological%20Testing%22%5BAll%20Fields%5D%20OR%20%22covid-19%20serological%20testing%22%5BMeSH%20Terms%5D%20OR%20%22COVID-19%20Testing%22%5BAll%20Fields%5D%20OR%20%22covid-19%20testing%22%5BMeSH%20Terms%5D%20OR%20%22SARS-CoV-2%22%5BAll%20Fields%5D%20OR%20%22sars-cov-2%22%5BMeSH%20Terms%5D%20OR%20%22Severe%20Acute%20Respiratory%20Syndrome%20Coronavirus%202%22%5BAll%20Fields%5D%20OR%20%22NCOV%22%5BAll%20Fields%5D%20OR%20%222019%20NCOV%22%5BAll%20Fields%5D%20OR%20((%22coronavirus%22%5BMeSH%20Terms%5D%20OR%20%22coronavirus%22%5BAll%20Fields%5D%20OR%20%22COV%22%5BAll%20Fields%5D)%20AND%202019%2F11%2F01%5BPubDate%5D%20%3A%203000%2F12%2F31%5BPubDate%5D)",s=function(e){return i.createElement("section",{className:e.rootClassName,"data-v-5e3491b7":""},i.createElement("div",{className:"methods-container","data-v-5e3491b7":""},i.createElement("h1",{"data-v-5e3491b7":""},"Methodology"),i.createElement("div",{className:"col-container","data-v-5e3491b7":""},i.createElement("div",{className:"col","data-v-5e3491b7":""},i.createElement("p",{"data-v-5e3491b7":""},"The set of coronavirus and COVID-19 related research articles came from"," ",i.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/",target:"_blank","data-v-5e3491b7":""},"PubMed Central (PMC)"),". The Coronavirus related articles per year were obtained by returning articles matching"," ",i.createElement("a",{href:o,target:"_blank","data-v-5e3491b7":""},"these search terms")," ","and filtering by publication date. Total PMC articles per year was estimated from The National Library of Medicine's"," ",i.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/about/intro/",target:"_blank","data-v-5e3491b7":""},"PMC overview"),". COVID-19 related articles were obtained by returning articles matching a"," ",i.createElement("a",{href:a,target:"_blank","data-v-5e3491b7":""},"broader set of search terms")," ","designed by PubMed Central to collect in one place relevant ongoing research throughout the pandemic."),i.createElement("p",{"data-v-5e3491b7":""},"Metadata for each of the 2020 COVID-19 related articles, including title, journal name, authors, author affiliations, and publication date, was downloaded using PubMed APIs. Author affiliations were converted to addresses and geocoded at the resolution of cities using Google GeoCoding API.")),i.createElement("div",{className:"col","data-v-5e3491b7":""},i.createElement("p",{"data-v-5e3491b7":""}," ","Despite wide variation in how affiliations were reported, in random samples of the data, this approach correctly matched an affiliation string to the correct location in ~80% of cases, and the incorrect location in ~1% of cases. Affiliations without a corresponding geocoded location were removed from the dataset."),i.createElement("p",{"data-v-5e3491b7":""},"The citation data were obtained using PubMed Citation APIs. For each article, we obtained 1) all of the articles cited by the current article, and 2) the number of subsequent articles that cite the current article. These citations came from the PubMed database, which is broader than PMC and includes closed access articles, and is thus more representative of the full set of citations on a given article.")))))},l=s;const c=l;var u,h;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(o,"coronavirusSearch","/Users/jeff/codeRepos/covid-science/src/components/SectionMethods/SectionMethods.jsx"),u.register(a,"COVID19Search","/Users/jeff/codeRepos/covid-science/src/components/SectionMethods/SectionMethods.jsx"),u.register(s,"SectionMethods","/Users/jeff/codeRepos/covid-science/src/components/SectionMethods/SectionMethods.jsx"),u.register(l,"default","/Users/jeff/codeRepos/covid-science/src/components/SectionMethods/SectionMethods.jsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},1016:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>World});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),gsap__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5716),three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2212),_SectionHero_Hero_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50),_Section1_Scene1_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9285),enterModule;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},World=function(_Component){_inherits(World,_Component);var _super=_createSuper(World);function World(e){var t;return _classCallCheck(this,World),(t=_super.call(this,e)).initScene=function(){t.camera.position.z=5,t.renderer=new three__WEBPACK_IMPORTED_MODULE_1__.WebGL1Renderer({canvas:t.canvasRef.current,antialias:!0,alpha:!0}),t.renderer.setSize(t.winSize.w,t.winSize.h),t.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));var e=new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(new three__WEBPACK_IMPORTED_MODULE_1__.PlaneGeometry(150,150,40,40),new three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial({color:new three__WEBPACK_IMPORTED_MODULE_1__.Color("#666"),wireframe:!0}));e.rotateX(.5*Math.PI),e.position.y=-6,t.sceneHero=new _SectionHero_Hero_js__WEBPACK_IMPORTED_MODULE_2__.Z({camera:t.camera,renderer:t.renderer}),t.sceneHero.obj.position.set(0,0,0),t.scene.add(t.sceneHero.obj),t.scene1=new _Section1_Scene1_js__WEBPACK_IMPORTED_MODULE_3__.Z,t.scene1.obj.position.set(0,-50,0),t.scene.add(t.scene1.obj),t.sceneMapping={"section-hero":t.sceneHero,"section-1":t.scene1,"section-2":t.scene1,"section-3":t.scene1,"section-methods":t.scene1},t.currentScene=t.sceneHero,t.tick()},t.handleResize=function(){t.winSize.w=window.innerWidth,t.winSize.h=window.innerHeight,t.camera.aspect=t.winSize.w/t.winSize.h,t.camera.updateProjectionMatrix(),t.renderer.setSize(t.winSize.w,t.winSize.h),t.sceneHero.resize()},t.tick=function(){var e=t.clock.getDelta();t.currentScene.update(e),t.renderer.render(t.scene,t.camera),requestAnimationFrame(t.tick)},t.winSize={w:window.innerWidth,h:window.innerHeight},t.currentSection=null,t.canvasRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),t.scene=new three__WEBPACK_IMPORTED_MODULE_1__.Scene,t.clock=new three__WEBPACK_IMPORTED_MODULE_1__.Clock,t.camera=new three__WEBPACK_IMPORTED_MODULE_1__.PerspectiveCamera(75,t.winSize.w/t.winSize.h,.1,50),t}return _createClass(World,[{key:"componentDidMount",value:function(){var e=this;this.initScene(),window.onresize=function(){return e.handleResize()}}},{key:"componentDidUpdate",value:function(e){var t=this.props.currentSection;if(t!==e.currentSection){var n=this.sceneMapping[t];n!==this.currentScene&&(gsap__WEBPACK_IMPORTED_MODULE_4__.p8.to(this.currentScene.obj.position,{duration:3,x:-30}),gsap__WEBPACK_IMPORTED_MODULE_4__.p8.to(n.obj.position,{duration:3,y:0,x:0,z:0})),this.currentScene=n}}},{key:"render",value:function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"World"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("canvas",{className:"three-canvas",ref:this.canvasRef}))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),World}(react__WEBPACK_IMPORTED_MODULE_0__.Component),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(World,"World","/Users/jeff/codeRepos/covid-science/src/components/World.jsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},9506:(e,t,n)=>{"use strict";var r=n(7294),i=n(3935),o=n(1653);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,i.render(r.createElement(o.Z,null),document.getElementById("root"))},8021:(e,t,n)=>{"use strict";var r;n.d(t,{j:()=>a,Q:()=>s}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,o,a=function(e,t){var n=t.position.z;e<n?e-=n:e+=n;var r=t.fov*Math.PI/180;return 2*Math.tan(r/2)*Math.abs(e)},s=function(e,t){return a(e,t)*t.aspect};(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(a,"visibleHeightAtZDepth","/Users/jeff/codeRepos/covid-science/src/js/THREE_Utils.js"),i.register(s,"visibleWidthAtZDepth","/Users/jeff/codeRepos/covid-science/src/js/THREE_Utils.js")),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},4880:(e,t,n)=>{"use strict";var r;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{c:()=>s}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,a,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"randBw",value:function(e,t){return Math.random()*(t-e)+e}},{key:"randIntBw",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"randFromArr",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"map",value:function(e,t,n,r,i){return(e-t)/(n-t)*(i-r)+r}},{key:"lerp",value:function(e,t,n){return e*(1-n)+t*n}},{key:"cosineInterpolate",value:function(e,t,n){var r=(1-Math.cos(n*Math.PI))/2;return e*(1-r)+t*r}},{key:"clamp",value:function(e,t,n){return Math.max(Math.min(e,n),t)}},{key:"idx2D",value:function(e,t,n){return{x:e%t,y:Math.floor(e/n)}}},{key:"idx1D",value:function(e,t,n){return e+n*t}},{key:"deg2rad",value:function(e){return e*(Math.PI/180)}},{key:"rad2deg",value:function(e){return e*(180/Math.PI)}},{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"isBetween",value:function(e,t,n){return e>=t&&e<=n}},{key:"shuffle",value:function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}}],null&&i(t.prototype,null),n&&i(t,n),e}();(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(s,"Utils","/Users/jeff/codeRepos/covid-science/src/js/Utils.js"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},5792:function(e){e.exports=function(){"use strict";for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var i=r[n];t["[object "+i+"]"]=i.toLowerCase()}var o=function(e){return t[Object.prototype.toString.call(e)]||"object"},a=Math.PI,s={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},limit:e,type:o,unpack:function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==o(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==o(e[t])?e[t].toLowerCase():null},PI:a,TWOPI:2*a,PITHIRD:a/3,DEG2RAD:a/180,RAD2DEG:180/a},l={format:{},autodetect:[]},c=s.last,u=s.clip_rgb,h=s.type,d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if("object"===h(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=c(e),i=!1;if(!r){i=!0,l.sorted||(l.autodetect=l.autodetect.sort((function(e,t){return t.p-e.p})),l.sorted=!0);for(var o=0,a=l.autodetect;o<a.length;o+=1){var s=a[o];if(r=s.test.apply(s,e))break}}if(!l.format[r])throw new Error("unknown format: "+e);var d=l.format[r].apply(null,i?e:e.slice(0,-1));n._rgb=u(d),3===n._rgb.length&&n._rgb.push(1)};d.prototype.toString=function(){return"function"==h(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var f=d,p=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p.Color,[null].concat(e)))};p.Color=f,p.version="2.1.1";var m=p,g=s.unpack,y=Math.max,v=s.unpack,_=s.unpack,b=s.type;f.prototype.cmyk=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=g(e,"rgb"),r=n[0],i=n[1],o=n[2],a=1-y(r/=255,y(i/=255,o/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-i-a)*s,(1-o-a)*s,a]}(this._rgb)},m.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["cmyk"])))},l.format.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=v(e,"cmyk"))[0],r=e[1],i=e[2],o=e[3],a=e.length>4?e[4]:1;return 1===o?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),i>=1?0:255*(1-i)*(1-o),a]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=_(e,"cmyk"),"array"===b(e)&&4===e.length)return"cmyk"}});var x=s.unpack,w=s.last,S=function(e){return Math.round(100*e)/100},A=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=x(e,"hsla"),r=w(e)||"lsa";return n[0]=S(n[0]||0),n[1]=S(100*n[1])+"%",n[2]=S(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},E=s.unpack,M=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=E(e,"rgba"))[0],r=e[1],i=e[2];n/=255,r/=255,i/=255;var o,a,s=Math.min(n,r,i),l=Math.max(n,r,i),c=(l+s)/2;return l===s?(o=0,a=Number.NaN):o=c<.5?(l-s)/(l+s):(l-s)/(2-l-s),n==l?a=(r-i)/(l-s):r==l?a=2+(i-n)/(l-s):i==l&&(a=4+(n-r)/(l-s)),(a*=60)<0&&(a+=360),e.length>3&&void 0!==e[3]?[a,o,c,e[3]]:[a,o,c]},C=s.unpack,T=s.last,P=Math.round,D=s.unpack,k=Math.round,O=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,i,o,a=(t=D(t,"hsl"))[0],s=t[1],l=t[2];if(0===s)r=i=o=255*l;else{var c=[0,0,0],u=[0,0,0],h=l<.5?l*(1+s):l+s-l*s,d=2*l-h,f=a/360;c[0]=f+1/3,c[1]=f,c[2]=f-1/3;for(var p=0;p<3;p++)c[p]<0&&(c[p]+=1),c[p]>1&&(c[p]-=1),6*c[p]<1?u[p]=d+6*(h-d)*c[p]:2*c[p]<1?u[p]=h:3*c[p]<2?u[p]=d+(h-d)*(2/3-c[p])*6:u[p]=d;r=(e=[k(255*u[0]),k(255*u[1]),k(255*u[2])])[0],i=e[1],o=e[2]}return t.length>3?[r,i,o,t[3]]:[r,i,o,1]},I=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,R=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,L=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,B=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,z=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,F=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,N=Math.round,U=function(e){var t;if(e=e.toLowerCase().trim(),l.format.named)try{return l.format.named(e)}catch(e){}if(t=e.match(I)){for(var n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(t=e.match(R)){for(var i=t.slice(1,5),o=0;o<4;o++)i[o]=+i[o];return i}if(t=e.match(L)){for(var a=t.slice(1,4),s=0;s<3;s++)a[s]=N(2.55*a[s]);return a[3]=1,a}if(t=e.match(B)){for(var c=t.slice(1,5),u=0;u<3;u++)c[u]=N(2.55*c[u]);return c[3]=+c[3],c}if(t=e.match(z)){var h=t.slice(1,4);h[1]*=.01,h[2]*=.01;var d=O(h);return d[3]=1,d}if(t=e.match(F)){var f=t.slice(1,4);f[1]*=.01,f[2]*=.01;var p=O(f);return p[3]=+t[4],p}};U.test=function(e){return I.test(e)||R.test(e)||L.test(e)||B.test(e)||z.test(e)||F.test(e)};var j=U,V=s.type;f.prototype.css=function(e){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=C(e,"rgba"),r=T(e)||"rgb";return"hsl"==r.substr(0,3)?A(M(n),r):(n[0]=P(n[0]),n[1]=P(n[1]),n[2]=P(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")}(this._rgb,e)},m.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["css"])))},l.format.css=j,l.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===V(e)&&j.test(e))return"css"}});var G=s.unpack;l.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=G(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},m.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["gl"])))},f.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var H=s.unpack,W=s.unpack,q=Math.floor,Z=s.unpack,X=s.type;f.prototype.hcg=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=H(e,"rgb"),i=r[0],o=r[1],a=r[2],s=Math.min(i,o,a),l=Math.max(i,o,a),c=l-s,u=100*c/255,h=s/(255-c)*100;return 0===c?n=Number.NaN:(i===l&&(n=(o-a)/c),o===l&&(n=2+(a-i)/c),a===l&&(n=4+(i-o)/c),(n*=60)<0&&(n+=360)),[n,u,h]}(this._rgb)},m.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["hcg"])))},l.format.hcg=function(){for(var e,t,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=W(a,"hcg"))[0],d=a[1],f=a[2];f*=255;var p=255*d;if(0===d)l=c=u=f;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var m=q(h/=60),g=h-m,y=f*(1-d),v=y+p*(1-g),_=y+p*g,b=y+p;switch(m){case 0:l=(e=[b,_,y])[0],c=e[1],u=e[2];break;case 1:l=(t=[v,b,y])[0],c=t[1],u=t[2];break;case 2:l=(n=[y,b,_])[0],c=n[1],u=n[2];break;case 3:l=(r=[y,v,b])[0],c=r[1],u=r[2];break;case 4:l=(i=[_,y,b])[0],c=i[1],u=i[2];break;case 5:l=(o=[b,y,v])[0],c=o[1],u=o[2]}}return[l,c,u,a.length>3?a[3]:1]},l.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Z(e,"hcg"),"array"===X(e)&&3===e.length)return"hcg"}});var Y=s.unpack,$=s.last,J=Math.round,K=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Y(e,"rgba"),r=n[0],i=n[1],o=n[2],a=n[3],s=$(e)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var l="000000"+((r=J(r))<<16|(i=J(i))<<8|(o=J(o))).toString(16);l=l.substr(l.length-6);var c="0"+J(255*a).toString(16);switch(c=c.substr(c.length-2),s.toLowerCase()){case"rgba":return"#"+l+c;case"argb":return"#"+c+l;default:return"#"+l}},Q=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ee=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,te=function(e){if(e.match(Q)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(ee)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+e)},ne=s.type;f.prototype.hex=function(e){return K(this._rgb,e)},m.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["hex"])))},l.format.hex=te,l.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ne(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var re=s.unpack,ie=s.TWOPI,oe=Math.min,ae=Math.sqrt,se=Math.acos,le=s.unpack,ce=s.limit,ue=s.TWOPI,he=s.PITHIRD,de=Math.cos,fe=s.unpack,pe=s.type;f.prototype.hsi=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=re(e,"rgb"),i=r[0],o=r[1],a=r[2],s=oe(i/=255,o/=255,a/=255),l=(i+o+a)/3,c=l>0?1-s/l:0;return 0===c?n=NaN:(n=(i-o+(i-a))/2,n/=ae((i-o)*(i-o)+(i-a)*(o-a)),n=se(n),a>o&&(n=ie-n),n/=ie),[360*n,c,l]}(this._rgb)},m.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["hsi"])))},l.format.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=le(e,"hsi"))[0],a=e[1],s=e[2];return isNaN(o)&&(o=0),isNaN(a)&&(a=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((i=(1-a)/3)+(n=(1+a*de(ue*o)/de(he-ue*o))/3)):o<2/3?i=1-((n=(1-a)/3)+(r=(1+a*de(ue*(o-=1/3))/de(he-ue*o))/3)):n=1-((r=(1-a)/3)+(i=(1+a*de(ue*(o-=2/3))/de(he-ue*o))/3)),[255*(n=ce(s*n*3)),255*(r=ce(s*r*3)),255*(i=ce(s*i*3)),e.length>3?e[3]:1]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=fe(e,"hsi"),"array"===pe(e)&&3===e.length)return"hsi"}});var me=s.unpack,ge=s.type;f.prototype.hsl=function(){return M(this._rgb)},m.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["hsl"])))},l.format.hsl=O,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=me(e,"hsl"),"array"===ge(e)&&3===e.length)return"hsl"}});var ye=s.unpack,ve=Math.min,_e=Math.max,be=s.unpack,xe=Math.floor,we=s.unpack,Se=s.type;f.prototype.hsv=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=ye(e,"rgb"))[0],a=e[1],s=e[2],l=ve(o,a,s),c=_e(o,a,s),u=c-l;return i=c/255,0===c?(n=Number.NaN,r=0):(r=u/c,o===c&&(n=(a-s)/u),a===c&&(n=2+(s-o)/u),s===c&&(n=4+(o-a)/u),(n*=60)<0&&(n+=360)),[n,r,i]}(this._rgb)},m.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["hsv"])))},l.format.hsv=function(){for(var e,t,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=be(a,"hsv"))[0],d=a[1],f=a[2];if(f*=255,0===d)l=c=u=f;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var p=xe(h/=60),m=h-p,g=f*(1-d),y=f*(1-d*m),v=f*(1-d*(1-m));switch(p){case 0:l=(e=[f,v,g])[0],c=e[1],u=e[2];break;case 1:l=(t=[y,f,g])[0],c=t[1],u=t[2];break;case 2:l=(n=[g,f,v])[0],c=n[1],u=n[2];break;case 3:l=(r=[g,y,f])[0],c=r[1],u=r[2];break;case 4:l=(i=[v,g,f])[0],c=i[1],u=i[2];break;case 5:l=(o=[f,g,y])[0],c=o[1],u=o[2]}}return[l,c,u,a.length>3?a[3]:1]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=we(e,"hsv"),"array"===Se(e)&&3===e.length)return"hsv"}});var Ae=18,Ee=.95047,Me=1,Ce=1.08883,Te=.137931034,Pe=.206896552,De=.12841855,ke=.008856452,Oe=s.unpack,Ie=Math.pow,Re=function(e){return(e/=255)<=.04045?e/12.92:Ie((e+.055)/1.055,2.4)},Le=function(e){return e>ke?Ie(e,1/3):e/De+Te},Be=function(e,t,n){return e=Re(e),t=Re(t),n=Re(n),[Le((.4124564*e+.3575761*t+.1804375*n)/Ee),Le((.2126729*e+.7151522*t+.072175*n)/Me),Le((.0193339*e+.119192*t+.9503041*n)/Ce)]},ze=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Oe(e,"rgb"),r=n[0],i=n[1],o=n[2],a=Be(r,i,o),s=a[0],l=a[1],c=116*l-16;return[c<0?0:c,500*(s-l),200*(l-a[2])]},Fe=s.unpack,Ne=Math.pow,Ue=function(e){return 255*(e<=.00304?12.92*e:1.055*Ne(e,1/2.4)-.055)},je=function(e){return e>Pe?e*e*e:De*(e-Te)},Ve=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=Fe(e,"lab"))[0],a=e[1],s=e[2];return r=(o+16)/116,n=isNaN(a)?r:r+a/500,i=isNaN(s)?r:r-s/200,r=Me*je(r),n=Ee*je(n),i=Ce*je(i),[Ue(3.2404542*n-1.5371385*r-.4985314*i),Ue(-.969266*n+1.8760108*r+.041556*i),Ue(.0556434*n-.2040259*r+1.0572252*i),e.length>3?e[3]:1]},Ge=s.unpack,He=s.type;f.prototype.lab=function(){return ze(this._rgb)},m.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["lab"])))},l.format.lab=Ve,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ge(e,"lab"),"array"===He(e)&&3===e.length)return"lab"}});var We=s.unpack,qe=s.RAD2DEG,Ze=Math.sqrt,Xe=Math.atan2,Ye=Math.round,$e=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=We(e,"lab"),r=n[0],i=n[1],o=n[2],a=Ze(i*i+o*o),s=(Xe(o,i)*qe+360)%360;return 0===Ye(1e4*a)&&(s=Number.NaN),[r,a,s]},Je=s.unpack,Ke=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Je(e,"rgb"),r=n[0],i=n[1],o=n[2],a=ze(r,i,o),s=a[0],l=a[1],c=a[2];return $e(s,l,c)},Qe=s.unpack,et=s.DEG2RAD,tt=Math.sin,nt=Math.cos,rt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Qe(e,"lch"),r=n[0],i=n[1],o=n[2];return isNaN(o)&&(o=0),[r,nt(o*=et)*i,tt(o)*i]},it=s.unpack,ot=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=it(e,"lch"))[0],r=e[1],i=e[2],o=rt(n,r,i),a=o[0],s=o[1],l=o[2],c=Ve(a,s,l);return[c[0],c[1],c[2],e.length>3?e[3]:1]},at=s.unpack,st=s.unpack,lt=s.type;f.prototype.lch=function(){return Ke(this._rgb)},f.prototype.hcl=function(){return Ke(this._rgb).reverse()},m.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["lch"])))},m.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["hcl"])))},l.format.lch=ot,l.format.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=at(e,"hcl").reverse();return ot.apply(void 0,n)},["lch","hcl"].forEach((function(e){return l.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=st(t,e),"array"===lt(t)&&3===t.length)return e}})}));var ct={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ut=s.type;f.prototype.name=function(){for(var e=K(this._rgb,"rgb"),t=0,n=Object.keys(ct);t<n.length;t+=1){var r=n[t];if(ct[r]===e)return r.toLowerCase()}return e},l.format.named=function(e){if(e=e.toLowerCase(),ct[e])return te(ct[e]);throw new Error("unknown color name: "+e)},l.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ut(e)&&ct[e.toLowerCase()])return"named"}});var ht=s.unpack,dt=s.type,ft=s.type;f.prototype.num=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ht(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]}(this._rgb)},m.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["num"])))},l.format.num=function(e){if("number"==dt(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},l.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===ft(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var pt=s.unpack,mt=s.type,gt=Math.round;f.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(gt)},f.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,n){return n<3?!1===e?t:gt(t):t}))},m.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["rgb"])))},l.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=pt(e,"rgba");return void 0===n[3]&&(n[3]=1),n},l.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=pt(e,"rgba"),"array"===mt(e)&&(3===e.length||4===e.length&&"number"==mt(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var yt=Math.log,vt=function(e){var t,n,r,i=e/100;return i<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*yt(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*yt(r)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*yt(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*yt(n),r=255),[t,n,r,1]},_t=s.unpack,bt=Math.round;f.prototype.temp=f.prototype.kelvin=f.prototype.temperature=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,r=_t(e,"rgb"),i=r[0],o=r[2],a=1e3,s=4e4,l=.4;s-a>l;){var c=vt(n=.5*(s+a));c[2]/c[0]>=o/i?s=n:a=n}return bt(n)}(this._rgb)},m.temp=m.kelvin=m.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(f,[null].concat(e,["temp"])))},l.format.temp=l.format.kelvin=l.format.temperature=vt;var xt=s.type;f.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===xt(e)?t?(this._rgb[3]=e,this):new f([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},f.prototype.clipped=function(){return this._rgb._clipped||!1},f.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Ae*e,new f(t,"lab").alpha(this.alpha(),!0)},f.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},f.prototype.darker=f.prototype.darken,f.prototype.brighter=f.prototype.brighten,f.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],i=this[n]();if(r){var o=n.indexOf(r);if(o>-1)return i[o];throw new Error("unknown channel "+r+" in mode "+n)}return i};var wt=s.type,St=Math.pow;f.prototype.luminance=function(e){if(void 0!==e&&"number"===wt(e)){if(0===e)return new f([0,0,0,this._rgb[3]],"rgb");if(1===e)return new f([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n=20,r=function(t,i){var o=t.interpolate(i,.5,"rgb"),a=o.luminance();return Math.abs(e-a)<1e-7||!n--?o:a>e?r(t,o):r(o,i)},i=(t>e?r(new f([0,0,0]),this):r(this,new f([255,255,255]))).rgb();return new f(i.concat([this._rgb[3]]))}return At.apply(void 0,this._rgb.slice(0,3))};var At=function(e,t,n){return.2126*(e=Et(e))+.7152*(t=Et(t))+.0722*Et(n)},Et=function(e){return(e/=255)<=.03928?e/12.92:St((e+.055)/1.055,2.4)},Mt={},Ct=s.type,Tt=function(e,t,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var o=r[0]||"lrgb";if(Mt[o]||r.length||(o=Object.keys(Mt)[0]),!Mt[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==Ct(e)&&(e=new f(e)),"object"!==Ct(t)&&(t=new f(t)),Mt[o](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};f.prototype.mix=f.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Tt.apply(void 0,[this,e,t].concat(n))},f.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new f([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},f.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=Ae*e,t[1]<0&&(t[1]=0),new f(t,"lch").alpha(this.alpha(),!0)},f.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var Pt=s.type;f.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),i=r[0],o=r[1],a=this[i]();if(o){var s=i.indexOf(o);if(s>-1){if("string"==Pt(t))switch(t.charAt(0)){case"+":case"-":a[s]+=+t;break;case"*":a[s]*=+t.substr(1);break;case"/":a[s]/=+t.substr(1);break;default:a[s]=+t}else{if("number"!==Pt(t))throw new Error("unsupported value for Color.set");a[s]=t}var l=new f(a,i);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+o+" in mode "+i)}return a};Mt.rgb=function(e,t,n){var r=e._rgb,i=t._rgb;return new f(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};var Dt=Math.sqrt,kt=Math.pow;Mt.lrgb=function(e,t,n){var r=e._rgb,i=r[0],o=r[1],a=r[2],s=t._rgb,l=s[0],c=s[1],u=s[2];return new f(Dt(kt(i,2)*(1-n)+kt(l,2)*n),Dt(kt(o,2)*(1-n)+kt(c,2)*n),Dt(kt(a,2)*(1-n)+kt(u,2)*n),"rgb")};Mt.lab=function(e,t,n){var r=e.lab(),i=t.lab();return new f(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};var Ot=function(e,t,n,r){var i,o,a,s,l,c,u,h,d,p,m,g;return"hsl"===r?(a=e.hsl(),s=t.hsl()):"hsv"===r?(a=e.hsv(),s=t.hsv()):"hcg"===r?(a=e.hcg(),s=t.hcg()):"hsi"===r?(a=e.hsi(),s=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",a=e.hcl(),s=t.hcl()),"h"===r.substr(0,1)&&(l=(i=a)[0],u=i[1],d=i[2],c=(o=s)[0],h=o[1],p=o[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?g=Number.NaN:(g=c,1!=d&&0!=d||"hsv"==r||(m=h)):(g=l,1!=p&&0!=p||"hsv"==r||(m=u)):g=l+n*(c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l),void 0===m&&(m=u+n*(h-u)),new f([g,m,d+n*(p-d)],r)},It=function(e,t,n){return Ot(e,t,n,"lch")};Mt.lch=It,Mt.hcl=It;Mt.num=function(e,t,n){var r=e.num(),i=t.num();return new f(r+n*(i-r),"num")};Mt.hcg=function(e,t,n){return Ot(e,t,n,"hcg")};Mt.hsi=function(e,t,n){return Ot(e,t,n,"hsi")};Mt.hsl=function(e,t,n){return Ot(e,t,n,"hsl")};Mt.hsv=function(e,t,n){return Ot(e,t,n,"hsv")};var Rt=s.clip_rgb,Lt=Math.pow,Bt=Math.sqrt,zt=Math.PI,Ft=Math.cos,Nt=Math.sin,Ut=Math.atan2,jt=function(e,t){for(var n=e.length,r=[0,0,0,0],i=0;i<e.length;i++){var o=e[i],a=t[i]/n,s=o._rgb;r[0]+=Lt(s[0],2)*a,r[1]+=Lt(s[1],2)*a,r[2]+=Lt(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Bt(r[0]),r[1]=Bt(r[1]),r[2]=Bt(r[2]),r[3]>.9999999&&(r[3]=1),new f(Rt(r))},Vt=s.type,Gt=Math.pow,Ht=function(e){var t="rgb",n=m("#ccc"),r=0,i=[0,1],o=[],a=[0,0],s=!1,l=[],c=!1,u=0,h=1,d=!1,f={},p=!0,g=1,y=function(e){if((e=e||["#fff","#000"])&&"string"===Vt(e)&&m.brewer&&m.brewer[e.toLowerCase()]&&(e=m.brewer[e.toLowerCase()]),"array"===Vt(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=m(e[t]);o.length=0;for(var n=0;n<e.length;n++)o.push(n/(e.length-1))}return x(),l=e},v=function(e){return e},_=function(e){return e},b=function(e,r){var i,c;if(null==r&&(r=!1),isNaN(e)||null===e)return n;c=r?e:s&&s.length>2?function(e){if(null!=s){for(var t=s.length-1,n=0;n<t&&e>=s[n];)n++;return n-1}return 0}(e)/(s.length-2):h!==u?(e-u)/(h-u):1,c=_(c),r||(c=v(c)),1!==g&&(c=Gt(c,g)),c=a[0]+c*(1-a[0]-a[1]),c=Math.min(1,Math.max(0,c));var d=Math.floor(1e4*c);if(p&&f[d])i=f[d];else{if("array"===Vt(l))for(var y=0;y<o.length;y++){var b=o[y];if(c<=b){i=l[y];break}if(c>=b&&y===o.length-1){i=l[y];break}if(c>b&&c<o[y+1]){c=(c-b)/(o[y+1]-b),i=m.interpolate(l[y],l[y+1],c,t);break}}else"function"===Vt(l)&&(i=l(c));p&&(f[d]=i)}return i},x=function(){return f={}};y(e);var w=function(e){var t=m(b(e));return c&&t[c]?t[c]():t};return w.classes=function(e){if(null!=e){if("array"===Vt(e))s=e,i=[e[0],e[e.length-1]];else{var t=m.analyze(i);s=0===e?[t.min,t.max]:m.limits(t,"e",e)}return w}return s},w.domain=function(e){if(!arguments.length)return i;u=e[0],h=e[e.length-1],o=[];var t=l.length;if(e.length===t&&u!==h)for(var n=0,r=Array.from(e);n<r.length;n+=1){var a=r[n];o.push((a-u)/(h-u))}else{for(var s=0;s<t;s++)o.push(s/(t-1));if(e.length>2){var c=e.map((function(t,n){return n/(e.length-1)})),d=e.map((function(e){return(e-u)/(h-u)}));d.every((function(e,t){return c[t]===e}))||(_=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=d[t+1];)t++;var n=(e-d[t])/(d[t+1]-d[t]);return c[t]+n*(c[t+1]-c[t])})}}return i=[u,h],w},w.mode=function(e){return arguments.length?(t=e,x(),w):t},w.range=function(e,t){return y(e),w},w.out=function(e){return c=e,w},w.spread=function(e){return arguments.length?(r=e,w):r},w.correctLightness=function(e){return null==e&&(e=!0),d=e,x(),v=d?function(e){for(var t=b(0,!0).lab()[0],n=b(1,!0).lab()[0],r=t>n,i=b(e,!0).lab()[0],o=t+(n-t)*e,a=i-o,s=0,l=1,c=20;Math.abs(a)>.01&&c-- >0;)r&&(a*=-1),a<0?(s=e,e+=.5*(l-e)):(l=e,e+=.5*(s-e)),a=(i=b(e,!0).lab()[0])-o;return e}:function(e){return e},w},w.padding=function(e){return null!=e?("number"===Vt(e)&&(e=[e,e]),a=e,w):a},w.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===t)r=[w(.5)];else if(t>1){var o=i[0],a=i[1]-o;r=Wt(0,t,!1).map((function(e){return w(o+e/(t-1)*a)}))}else{e=[];var c=[];if(s&&s.length>2)for(var u=1,h=s.length,d=1<=h;d?u<h:u>h;d?u++:u--)c.push(.5*(s[u-1]+s[u]));else c=i;r=c.map((function(e){return w(e)}))}return m[n]&&(r=r.map((function(e){return e[n]()}))),r},w.cache=function(e){return null!=e?(p=e,w):p},w.gamma=function(e){return null!=e?(g=e,w):g},w.nodata=function(e){return null!=e?(n=m(e),w):n},w};function Wt(e,t,n){for(var r=[],i=e<t,o=n?i?t+1:t-1:t,a=e;i?a<o:a>o;i?a++:a--)r.push(a);return r}var qt=function(e){var t,n,r,i,o,a,s;if(2===(e=e.map((function(e){return new f(e)}))).length)t=e.map((function(e){return e.lab()})),o=t[0],a=t[1],i=function(e){var t=[0,1,2].map((function(t){return o[t]+e*(a[t]-o[t])}));return new f(t,"lab")};else if(3===e.length)n=e.map((function(e){return e.lab()})),o=n[0],a=n[1],s=n[2],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*s[t]}));return new f(t,"lab")};else if(4===e.length){var l;r=e.map((function(e){return e.lab()})),o=r[0],a=r[1],s=r[2],l=r[3],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]}));return new f(t,"lab")}}else if(5===e.length){var c=qt(e.slice(0,3)),u=qt(e.slice(2,5));i=function(e){return e<.5?c(2*e):u(2*(e-.5))}}return i},Zt=function(e,t,n){if(!Zt[n])throw new Error("unknown blend mode "+n);return Zt[n](e,t)},Xt=function(e){return function(t,n){var r=m(n).rgb(),i=m(t).rgb();return m.rgb(e(r,i))}},Yt=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}};Zt.normal=Xt(Yt((function(e){return e}))),Zt.multiply=Xt(Yt((function(e,t){return e*t/255}))),Zt.screen=Xt(Yt((function(e,t){return 255*(1-(1-e/255)*(1-t/255))}))),Zt.overlay=Xt(Yt((function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))}))),Zt.darken=Xt(Yt((function(e,t){return e>t?t:e}))),Zt.lighten=Xt(Yt((function(e,t){return e>t?e:t}))),Zt.dodge=Xt(Yt((function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e}))),Zt.burn=Xt(Yt((function(e,t){return 255*(1-(1-t/255)/(e/255))})));for(var $t=Zt,Jt=s.type,Kt=s.clip_rgb,Qt=s.TWOPI,en=Math.pow,tn=Math.sin,nn=Math.cos,rn=Math.floor,on=Math.random,an=Math.log,sn=Math.pow,ln=Math.floor,cn=Math.abs,un=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===o(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===o(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(e,t){return hn(n,e,t)},n},hn=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==o(e)&&(e=un(e));var r=e.min,i=e.max,a=e.values.sort((function(e,t){return e-t}));if(1===n)return[r,i];var s=[];if("c"===t.substr(0,1)&&(s.push(r),s.push(i)),"e"===t.substr(0,1)){s.push(r);for(var l=1;l<n;l++)s.push(r+l/n*(i-r));s.push(i)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*an(r),u=Math.LOG10E*an(i);s.push(r);for(var h=1;h<n;h++)s.push(sn(10,c+h/n*(u-c)));s.push(i)}else if("q"===t.substr(0,1)){s.push(r);for(var d=1;d<n;d++){var f=(a.length-1)*d/n,p=ln(f);if(p===f)s.push(a[p]);else{var m=f-p;s.push(a[p]*(1-m)+a[p+1]*m)}}s.push(i)}else if("k"===t.substr(0,1)){var g,y=a.length,v=new Array(y),_=new Array(n),b=!0,x=0,w=null;(w=[]).push(r);for(var S=1;S<n;S++)w.push(r+S/n*(i-r));for(w.push(i);b;){for(var A=0;A<n;A++)_[A]=0;for(var E=0;E<y;E++)for(var M=a[E],C=Number.MAX_VALUE,T=void 0,P=0;P<n;P++){var D=cn(w[P]-M);D<C&&(C=D,T=P),_[T]++,v[E]=T}for(var k=new Array(n),O=0;O<n;O++)k[O]=null;for(var I=0;I<y;I++)null===k[g=v[I]]?k[g]=a[I]:k[g]+=a[I];for(var R=0;R<n;R++)k[R]*=1/_[R];b=!1;for(var L=0;L<n;L++)if(k[L]!==w[L]){b=!0;break}w=k,++x>200&&(b=!1)}for(var B={},z=0;z<n;z++)B[z]=[];for(var F=0;F<y;F++)B[g=v[F]].push(a[F]);for(var N=[],U=0;U<n;U++)N.push(B[U][0]),N.push(B[U][B[U].length-1]);N=N.sort((function(e,t){return e-t})),s.push(N[0]);for(var j=1;j<N.length;j+=2){var V=N[j];isNaN(V)||-1!==s.indexOf(V)||s.push(V)}}return s},dn={analyze:un,limits:hn},fn=Math.sqrt,pn=Math.atan2,mn=Math.abs,gn=Math.cos,yn=Math.PI,vn={cool:function(){return Ht([m.hsl(180,1,.9),m.hsl(250,.7,.4)])},hot:function(){return Ht(["#000","#f00","#ff0","#fff"]).mode("rgb")}},_n={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},bn=0,xn=Object.keys(_n);bn<xn.length;bn+=1){var wn=xn[bn];_n[wn.toLowerCase()]=_n[wn]}var Sn=_n;return m.average=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(e,t){return e+t}));if(n.forEach((function(e,t){n[t]*=i})),e=e.map((function(e){return new f(e)})),"lrgb"===t)return jt(e,n);for(var o=e.shift(),a=o.get(t),s=[],l=0,c=0,u=0;u<a.length;u++)if(a[u]=(a[u]||0)*n[0],s.push(isNaN(a[u])?0:n[0]),"h"===t.charAt(u)&&!isNaN(a[u])){var h=a[u]/180*zt;l+=Ft(h)*n[0],c+=Nt(h)*n[0]}var d=o.alpha()*n[0];e.forEach((function(e,r){var i=e.get(t);d+=e.alpha()*n[r+1];for(var o=0;o<a.length;o++)if(!isNaN(i[o]))if(s[o]+=n[r+1],"h"===t.charAt(o)){var u=i[o]/180*zt;l+=Ft(u)*n[r+1],c+=Nt(u)*n[r+1]}else a[o]+=i[o]*n[r+1]}));for(var p=0;p<a.length;p++)if("h"===t.charAt(p)){for(var m=Ut(c/s[p],l/s[p])/zt*180;m<0;)m+=360;for(;m>=360;)m-=360;a[p]=m}else a[p]=a[p]/s[p];return d/=r,new f(a,t).alpha(d>.99999?1:d,!0)},m.bezier=function(e){var t=qt(e);return t.scale=function(){return Ht(t)},t},m.blend=$t,m.cubehelix=function(e,t,n,r,i){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var o,a=0;"array"===Jt(i)?o=i[1]-i[0]:(o=0,i=[i,i]);var s=function(s){var l=Qt*((e+120)/360+t*s),c=en(i[0]+o*s,r),u=(0!==a?n[0]+s*a:n)*c*(1-c)/2,h=nn(l),d=tn(l);return m(Kt([255*(c+u*(-.14861*h+1.78277*d)),255*(c+u*(-.29227*h-.90649*d)),255*(c+u*(1.97294*h)),1]))};return s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===Jt(n=e)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(e){return null==e?i:("array"===Jt(e)?(i=e,o=e[1]-e[0]):(i=[e,e],o=0),s)},s.scale=function(){return m.scale(s)},s.hue(n),s},m.mix=m.interpolate=Tt,m.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(rn(16*on()));return new f(e,"hex")},m.scale=Ht,m.analyze=dn.analyze,m.contrast=function(e,t){e=new f(e),t=new f(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},m.deltaE=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1),e=new f(e),t=new f(t);for(var i=Array.from(e.lab()),o=i[0],a=i[1],s=i[2],l=Array.from(t.lab()),c=l[0],u=l[1],h=l[2],d=fn(a*a+s*s),p=fn(u*u+h*h),m=o<16?.511:.040975*o/(1+.01765*o),g=.0638*d/(1+.0131*d)+.638,y=d<1e-6?0:180*pn(s,a)/yn;y<0;)y+=360;for(;y>=360;)y-=360;var v=y>=164&&y<=345?.56+mn(.2*gn(yn*(y+168)/180)):.36+mn(.4*gn(yn*(y+35)/180)),_=d*d*d*d,b=fn(_/(_+1900)),x=g*(b*v+1-b),w=d-p,S=a-u,A=s-h,E=(o-c)/(n*m),M=w/(r*g);return fn(E*E+M*M+(S*S+A*A-w*w)/(x*x))},m.distance=function(e,t,n){void 0===n&&(n="lab"),e=new f(e),t=new f(t);var r=e.get(n),i=t.get(n),o=0;for(var a in r){var s=(r[a]||0)-(i[a]||0);o+=s*s}return Math.sqrt(o)},m.limits=dn.limits,m.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(f,[null].concat(e))),!0}catch(e){return!1}},m.scales=vn,m.colors=ct,m.brewer=Sn,m}()},178:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.pudding-footer[data-v-bf22f72c]{padding:6rem 1rem;border-top:4px solid #036063;font-family:"National 2 Web",Helvetica,Arial,sans-serif;margin-top:6rem;background-color:#fffde8}.pudding-footer .footer-recirc[data-v-bf22f72c]{margin:0 auto;padding:0px 6rem}.pudding-footer .footer-recirc .story-links-container[data-v-bf22f72c]{display:flex;flex-wrap:wrap}.pudding-footer .footer-recirc .story-links-container .story-link[data-v-bf22f72c]{width:25%;padding:0 1em}.pudding-footer .footer-recirc .story-links-container .story-link a[data-v-bf22f72c]{text-decoration:none;font-weight:700;font-size:1.8rem;color:#1d253b;display:block}.pudding-footer .footer-recirc .story-links-container .story-link .story-link-image[data-v-bf22f72c]{max-width:100%;height:auto}@media(min-width: 320px)and (max-width: 479px){.pudding-footer .footer-recirc .story-links-container .story-link[data-v-bf22f72c]{width:50%}}.pudding-footer .footer-company[data-v-bf22f72c]{margin:0 auto;margin-top:3rem;max-width:65rem}.pudding-footer .footer-company .about-container[data-v-bf22f72c]{display:flex;flex-direction:column;font-family:"National 2 Narrow Web",Helvetica,Arial,sans-serif;justify-content:center;text-align:center}.pudding-footer .footer-company .about-container p[data-v-bf22f72c]{font-size:1.8rem;margin:1rem 0;color:#1d253b}.pudding-footer .footer-company .about-container a[data-v-bf22f72c]{font-weight:bold}.pudding-footer .footer-company .about-container .pudding-logo[data-v-bf22f72c]{max-width:180px;max-height:47px;width:auto;height:auto;margin:2rem auto}.pudding-footer .links-container .link-list[data-v-bf22f72c]{display:flex;flex-wrap:wrap;justify-content:center;font-size:1.8rem}.pudding-footer .links-container .link-list li[data-v-bf22f72c]{display:flex;padding:.5em 1em}.pudding-footer .links-container .link-list li a[data-v-bf22f72c]{text-decoration:none;color:#1d253b}@media(min-width: 320px)and (max-width: 479px){.pudding-footer .links-container .link-list li[data-v-bf22f72c]{padding:.3em}.pudding-footer .links-container .link-list li p[data-v-bf22f72c]{margin:0}}',"",{version:3,sources:["webpack://./src/components/Footer/Footer.scoped.scss"],names:[],mappings:"AAAA,iCAAiC,iBAAiB,CAAC,4BAA4B,CAAC,uDAAuD,CAAC,eAAe,CAAC,wBAAwB,CAAC,gDAAgD,aAAa,CAAC,gBAAgB,CAAC,uEAAuE,YAAY,CAAC,cAAc,CAAC,mFAAmF,SAAS,CAAC,aAAa,CAAC,qFAAqF,oBAAoB,CAAC,eAAe,CAAC,gBAAgB,CAAC,aAAa,CAAC,aAAa,CAAC,qGAAqG,cAAc,CAAC,WAAW,CAAC,+CAA+C,mFAAmF,SAAS,CAAC,CAAC,iDAAiD,aAAa,CAAC,eAAe,CAAC,eAAe,CAAC,kEAAkE,YAAY,CAAC,qBAAqB,CAAC,8DAA8D,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,oEAAoE,gBAAgB,CAAC,aAAa,CAAC,aAAa,CAAC,oEAAoE,gBAAgB,CAAC,gFAAgF,eAAe,CAAC,eAAe,CAAC,UAAU,CAAC,WAAW,CAAC,gBAAgB,CAAC,6DAA6D,YAAY,CAAC,cAAc,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,gEAAgE,YAAY,CAAC,gBAAgB,CAAC,kEAAkE,oBAAoB,CAAC,aAAa,CAAC,+CAA+C,gEAAgE,YAAY,CAAC,kEAAkE,QAAQ,CAAC",sourcesContent:['.pudding-footer[data-v-bf22f72c]{padding:6rem 1rem;border-top:4px solid #036063;font-family:"National 2 Web",Helvetica,Arial,sans-serif;margin-top:6rem;background-color:#fffde8}.pudding-footer .footer-recirc[data-v-bf22f72c]{margin:0 auto;padding:0px 6rem}.pudding-footer .footer-recirc .story-links-container[data-v-bf22f72c]{display:flex;flex-wrap:wrap}.pudding-footer .footer-recirc .story-links-container .story-link[data-v-bf22f72c]{width:25%;padding:0 1em}.pudding-footer .footer-recirc .story-links-container .story-link a[data-v-bf22f72c]{text-decoration:none;font-weight:700;font-size:1.8rem;color:#1d253b;display:block}.pudding-footer .footer-recirc .story-links-container .story-link .story-link-image[data-v-bf22f72c]{max-width:100%;height:auto}@media(min-width: 320px)and (max-width: 479px){.pudding-footer .footer-recirc .story-links-container .story-link[data-v-bf22f72c]{width:50%}}.pudding-footer .footer-company[data-v-bf22f72c]{margin:0 auto;margin-top:3rem;max-width:65rem}.pudding-footer .footer-company .about-container[data-v-bf22f72c]{display:flex;flex-direction:column;font-family:"National 2 Narrow Web",Helvetica,Arial,sans-serif;justify-content:center;text-align:center}.pudding-footer .footer-company .about-container p[data-v-bf22f72c]{font-size:1.8rem;margin:1rem 0;color:#1d253b}.pudding-footer .footer-company .about-container a[data-v-bf22f72c]{font-weight:bold}.pudding-footer .footer-company .about-container .pudding-logo[data-v-bf22f72c]{max-width:180px;max-height:47px;width:auto;height:auto;margin:2rem auto}.pudding-footer .links-container .link-list[data-v-bf22f72c]{display:flex;flex-wrap:wrap;justify-content:center;font-size:1.8rem}.pudding-footer .links-container .link-list li[data-v-bf22f72c]{display:flex;padding:.5em 1em}.pudding-footer .links-container .link-list li a[data-v-bf22f72c]{text-decoration:none;color:#1d253b}@media(min-width: 320px)and (max-width: 479px){.pudding-footer .links-container .link-list li[data-v-bf22f72c]{padding:.3em}.pudding-footer .links-container .link-list li p[data-v-bf22f72c]{margin:0}}'],sourceRoot:""}]);const s=a},7442:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.article-generator-container[data-v-db438fd8]{display:flex;flex-direction:column;align-items:center}.article-generator-container .title[data-v-db438fd8]{color:#fffde8;font-family:"Theinhardt-Med";font-size:1.4rem;margin:1rem}@media(min-width: 320px)and (max-width: 479px){.article-generator-container[data-v-db438fd8]{flex-direction:column;padding-bottom:2rem}.article-generator-container .title[data-v-db438fd8]{margin:.6rem}}.article-generator-container span[data-v-db438fd8]{color:#ff9466}',"",{version:3,sources:["webpack://./src/components/Section1/ArticleGenerator.scoped.scss"],names:[],mappings:"AAAA,8CAA8C,YAAY,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,qDAAqD,aAAa,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,WAAW,CAAC,+CAA+C,8CAA8C,qBAAqB,CAAC,mBAAmB,CAAC,qDAAqD,YAAY,CAAC,CAAC,mDAAmD,aAAa",sourcesContent:['.article-generator-container[data-v-db438fd8]{display:flex;flex-direction:column;align-items:center}.article-generator-container .title[data-v-db438fd8]{color:#fffde8;font-family:"Theinhardt-Med";font-size:1.4rem;margin:1rem}@media(min-width: 320px)and (max-width: 479px){.article-generator-container[data-v-db438fd8]{flex-direction:column;padding-bottom:2rem}.article-generator-container .title[data-v-db438fd8]{margin:.6rem}}.article-generator-container span[data-v-db438fd8]{color:#ff9466}'],sourceRoot:""}]);const s=a},6449:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.container[data-v-f72b7cae]{width:200px;display:flex;flex-direction:column;font-family:"Theinhardt-Med";align-items:flex-start}.container.left[data-v-f72b7cae]{align-items:flex-start}.container.center[data-v-f72b7cae]{align-items:center}.container.right[data-v-f72b7cae]{align-items:flex-end}@media(min-width: 320px)and (max-width: 479px){.container[data-v-f72b7cae]{margin-bottom:4rem}.container.left[data-v-f72b7cae],.container.right[data-v-f72b7cae]{align-items:center}}.title[data-v-f72b7cae]{font-size:1.5rem;line-height:.5}.value[data-v-f72b7cae]{font-size:6.8rem;font-family:"Theinhardt-Black";color:#ff9466}.units[data-v-f72b7cae]{font-size:1.8rem;transform:translate(0px, -2rem)}',"",{version:3,sources:["webpack://./src/components/Section1/ArticleStat.scoped.scss"],names:[],mappings:"AAAA,4BAA4B,WAAW,CAAC,YAAY,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,sBAAsB,CAAC,iCAAiC,sBAAsB,CAAC,mCAAmC,kBAAkB,CAAC,kCAAkC,oBAAoB,CAAC,+CAA+C,4BAA4B,kBAAkB,CAAC,mEAAmE,kBAAkB,CAAC,CAAC,wBAAwB,gBAAgB,CAAC,cAAc,CAAC,wBAAwB,gBAAgB,CAAC,8BAA8B,CAAC,aAAa,CAAC,wBAAwB,gBAAgB,CAAC,+BAA+B",sourcesContent:['.container[data-v-f72b7cae]{width:200px;display:flex;flex-direction:column;font-family:"Theinhardt-Med";align-items:flex-start}.container.left[data-v-f72b7cae]{align-items:flex-start}.container.center[data-v-f72b7cae]{align-items:center}.container.right[data-v-f72b7cae]{align-items:flex-end}@media(min-width: 320px)and (max-width: 479px){.container[data-v-f72b7cae]{margin-bottom:4rem}.container.left[data-v-f72b7cae],.container.right[data-v-f72b7cae]{align-items:center}}.title[data-v-f72b7cae]{font-size:1.5rem;line-height:.5}.value[data-v-f72b7cae]{font-size:6.8rem;font-family:"Theinhardt-Black";color:#ff9466}.units[data-v-f72b7cae]{font-size:1.8rem;transform:translate(0px, -2rem)}'],sourceRoot:""}]);const s=a},5132:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.section1-scroll-container[data-v-d3b129c0]{width:100%;height:120vh;margin:auto}.content-container[data-v-d3b129c0]{position:sticky;position:-webkit-sticky;top:200px;width:100%;margin:2rem auto}.plot-container[data-v-d3b129c0]{width:90%;margin:0 auto 4rem}.text-overlay-container[data-v-d3b129c0]{position:absolute;top:0;left:0;right:0;margin:4rem auto;width:90%;max-width:720px;display:flex;flex-direction:column;align-items:flex-start}.plot-text[data-v-d3b129c0]{width:90%;font-size:1.9rem;line-height:1.55}#revealed-text[data-v-d3b129c0]{align-self:flex-end;margin-right:5%;margin-top:6rem;margin-bottom:6rem;height:5rem;font-size:2.8rem;font-family:"Musee-Bold";color:#f7f573}.middle-section[data-v-d3b129c0]{margin-top:13rem;margin-bottom:10rem}.article-generators-container[data-v-d3b129c0]{width:90%;margin:2rem auto;display:flex;justify-content:space-between}.stats-container[data-v-d3b129c0]{width:90%;margin:4rem auto;display:flex;justify-content:space-between}@media(min-width: 480px)and (max-width: 959px){#revealed-text[data-v-d3b129c0]{margin-right:7%;margin-top:3rem;margin-bottom:3rem}}@media(min-width: 320px)and (max-width: 479px){.content-container[data-v-d3b129c0]{margin-bottom:6rem}.middle-section[data-v-d3b129c0]{margin-top:6rem;margin-bottom:3rem}.article-generators-container[data-v-d3b129c0]{flex-direction:column}.stats-container[data-v-d3b129c0]{margin:1rem auto;flex-direction:column;align-items:center}.text-overlay-container[data-v-d3b129c0]{margin:0rem auto 2rem}.text-overlay-container .plot-text[data-v-d3b129c0]{width:100%}.text-overlay-container .text-2[data-v-d3b129c0]{margin-top:22rem;margin-bottom:4rem}#revealed-text[data-v-d3b129c0]{margin-right:23%;margin-top:3rem;margin-bottom:3rem;font-size:2.3rem}.plot-container[data-v-d3b129c0]{margin-top:40px;width:100%;height:100%}}',"",{version:3,sources:["webpack://./src/components/Section1/Section1.scoped.scss"],names:[],mappings:"AAAA,4CAA4C,UAAU,CAAC,YAAY,CAAC,WAAW,CAAC,oCAAoC,eAAe,CAAC,uBAAuB,CAAC,SAAS,CAAC,UAAU,CAAC,gBAAgB,CAAC,iCAAiC,SAAS,CAAC,kBAAkB,CAAC,yCAAyC,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC,eAAe,CAAC,YAAY,CAAC,qBAAqB,CAAC,sBAAsB,CAAC,4BAA4B,SAAS,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,gCAAgC,mBAAmB,CAAC,eAAe,CAAC,eAAe,CAAC,kBAAkB,CAAC,WAAW,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,aAAa,CAAC,iCAAiC,gBAAgB,CAAC,mBAAmB,CAAC,+CAA+C,SAAS,CAAC,gBAAgB,CAAC,YAAY,CAAC,6BAA6B,CAAC,kCAAkC,SAAS,CAAC,gBAAgB,CAAC,YAAY,CAAC,6BAA6B,CAAC,+CAA+C,gCAAgC,eAAe,CAAC,eAAe,CAAC,kBAAkB,CAAC,CAAC,+CAA+C,oCAAoC,kBAAkB,CAAC,iCAAiC,eAAe,CAAC,kBAAkB,CAAC,+CAA+C,qBAAqB,CAAC,kCAAkC,gBAAgB,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,yCAAyC,qBAAqB,CAAC,oDAAoD,UAAU,CAAC,iDAAiD,gBAAgB,CAAC,kBAAkB,CAAC,gCAAgC,gBAAgB,CAAC,eAAe,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,iCAAiC,eAAe,CAAC,UAAU,CAAC,WAAW,CAAC",sourcesContent:['.section1-scroll-container[data-v-d3b129c0]{width:100%;height:120vh;margin:auto}.content-container[data-v-d3b129c0]{position:sticky;position:-webkit-sticky;top:200px;width:100%;margin:2rem auto}.plot-container[data-v-d3b129c0]{width:90%;margin:0 auto 4rem}.text-overlay-container[data-v-d3b129c0]{position:absolute;top:0;left:0;right:0;margin:4rem auto;width:90%;max-width:720px;display:flex;flex-direction:column;align-items:flex-start}.plot-text[data-v-d3b129c0]{width:90%;font-size:1.9rem;line-height:1.55}#revealed-text[data-v-d3b129c0]{align-self:flex-end;margin-right:5%;margin-top:6rem;margin-bottom:6rem;height:5rem;font-size:2.8rem;font-family:"Musee-Bold";color:#f7f573}.middle-section[data-v-d3b129c0]{margin-top:13rem;margin-bottom:10rem}.article-generators-container[data-v-d3b129c0]{width:90%;margin:2rem auto;display:flex;justify-content:space-between}.stats-container[data-v-d3b129c0]{width:90%;margin:4rem auto;display:flex;justify-content:space-between}@media(min-width: 480px)and (max-width: 959px){#revealed-text[data-v-d3b129c0]{margin-right:7%;margin-top:3rem;margin-bottom:3rem}}@media(min-width: 320px)and (max-width: 479px){.content-container[data-v-d3b129c0]{margin-bottom:6rem}.middle-section[data-v-d3b129c0]{margin-top:6rem;margin-bottom:3rem}.article-generators-container[data-v-d3b129c0]{flex-direction:column}.stats-container[data-v-d3b129c0]{margin:1rem auto;flex-direction:column;align-items:center}.text-overlay-container[data-v-d3b129c0]{margin:0rem auto 2rem}.text-overlay-container .plot-text[data-v-d3b129c0]{width:100%}.text-overlay-container .text-2[data-v-d3b129c0]{margin-top:22rem;margin-bottom:4rem}#revealed-text[data-v-d3b129c0]{margin-right:23%;margin-top:3rem;margin-bottom:3rem;font-size:2.3rem}.plot-container[data-v-d3b129c0]{margin-top:40px;width:100%;height:100%}}'],sourceRoot:""}]);const s=a},6790:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.papers-per-year-plot{font-family:"Theinhardt-Med"}.papers-per-year-plot .annotation-group{font-family:"Theinhardt-Med";font-size:1.6rem}.papers-per-year-plot .annotation-group text{fill:#fffde8}.papers-per-year-plot .title-group{font-family:"Theinhardt-Med";fill:#fffde8;font-size:1.6rem}.papers-per-year-plot .tick text{fill:gray}.papers-per-year-plot .y.axis{font-size:1.8rem;opacity:.6}.papers-per-year-plot .tick{transition:font-size 1s;font-size:1.6rem}.papers-per-year-plot .tick.minimized{transition:font-size 1s;font-size:1.4rem}@media(min-width: 320px)and (max-width: 479px){.annotation-group{font-size:1.4rem}.title-group{font-size:1.4rem}.y.axis{font-size:1.4rem}.tick{font-size:1.2rem}.tick.minimized{font-size:1rem}}',"",{version:3,sources:["webpack://./src/components/Section1/plot.scss"],names:[],mappings:"AAAA,sBAAsB,4BAA4B,CAAC,wCAAwC,4BAA4B,CAAC,gBAAgB,CAAC,6CAA6C,YAAY,CAAC,mCAAmC,4BAA4B,CAAC,YAAY,CAAC,gBAAgB,CAAC,iCAAiC,SAAS,CAAC,8BAA8B,gBAAgB,CAAC,UAAU,CAAC,4BAA4B,uBAAuB,CAAC,gBAAgB,CAAC,sCAAsC,uBAAuB,CAAC,gBAAgB,CAAC,+CAA+C,kBAAkB,gBAAgB,CAAC,aAAa,gBAAgB,CAAC,QAAQ,gBAAgB,CAAC,MAAM,gBAAgB,CAAC,gBAAgB,cAAc,CAAC",sourcesContent:['.papers-per-year-plot{font-family:"Theinhardt-Med"}.papers-per-year-plot .annotation-group{font-family:"Theinhardt-Med";font-size:1.6rem}.papers-per-year-plot .annotation-group text{fill:#fffde8}.papers-per-year-plot .title-group{font-family:"Theinhardt-Med";fill:#fffde8;font-size:1.6rem}.papers-per-year-plot .tick text{fill:gray}.papers-per-year-plot .y.axis{font-size:1.8rem;opacity:.6}.papers-per-year-plot .tick{transition:font-size 1s;font-size:1.6rem}.papers-per-year-plot .tick.minimized{transition:font-size 1s;font-size:1.4rem}@media(min-width: 320px)and (max-width: 479px){.annotation-group{font-size:1.4rem}.title-group{font-size:1.4rem}.y.axis{font-size:1.4rem}.tick{font-size:1.2rem}.tick.minimized{font-size:1rem}}'],sourceRoot:""}]);const s=a},8877:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.container[data-v-300514c7]{width:200px;display:flex;flex-direction:column;font-family:"Theinhardt-Med"}.container.left[data-v-300514c7]{align-items:flex-start}.container.right[data-v-300514c7]{align-items:flex-end}.value[data-v-300514c7]{font-size:5.8rem;font-family:"Theinhardt-Black";color:#ff9466}.units[data-v-300514c7]{font-size:1.5rem;transform:translate(0px, -1rem)}@media(min-width: 320px)and (max-width: 479px){.value[data-v-300514c7]{font-size:3.5rem}.units[data-v-300514c7]{font-size:1.5rem}}',"",{version:3,sources:["webpack://./src/components/Section2/BigNumber.scoped.scss"],names:[],mappings:"AAAA,4BAA4B,WAAW,CAAC,YAAY,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,iCAAiC,sBAAsB,CAAC,kCAAkC,oBAAoB,CAAC,wBAAwB,gBAAgB,CAAC,8BAA8B,CAAC,aAAa,CAAC,wBAAwB,gBAAgB,CAAC,+BAA+B,CAAC,+CAA+C,wBAAwB,gBAAgB,CAAC,wBAAwB,gBAAgB,CAAC",sourcesContent:['.container[data-v-300514c7]{width:200px;display:flex;flex-direction:column;font-family:"Theinhardt-Med"}.container.left[data-v-300514c7]{align-items:flex-start}.container.right[data-v-300514c7]{align-items:flex-end}.value[data-v-300514c7]{font-size:5.8rem;font-family:"Theinhardt-Black";color:#ff9466}.units[data-v-300514c7]{font-size:1.5rem;transform:translate(0px, -1rem)}@media(min-width: 320px)and (max-width: 479px){.value[data-v-300514c7]{font-size:3.5rem}.units[data-v-300514c7]{font-size:1.5rem}}'],sourceRoot:""}]);const s=a},2995:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.section-2[data-v-5be94f5e]{width:100vw;padding:0px;position:relative;max-width:none}.section-2 .short-text[data-v-5be94f5e]{margin:10rem auto}.author-list-container[data-v-5be94f5e]{width:100%;margin:auto;display:flex;flex-direction:column;align-items:center;font-family:"Theinhardt-Med"}.author-list[data-v-5be94f5e]{margin:2rem;font-size:1.6rem}.author-list span[data-v-5be94f5e]{color:#fffde8}.author-list li[data-v-5be94f5e]{margin:.5rem;display:inline-block}.key-container[data-v-5be94f5e]{display:flex;justify-content:center;margin-top:4rem;margin-bottom:6rem}.key-container .collab-key-image[data-v-5be94f5e]{max-width:45rem;max-height:22rem;width:auto;height:auto}.key-container .map-key-image[data-v-5be94f5e]{max-width:72rem;max-height:38rem;width:auto;height:auto}.map-container[data-v-5be94f5e]{position:sticky;z-index:0;top:10rem;height:100vh}.section2-scroll-container[data-v-5be94f5e]{width:100%;height:250vh;margin:auto}.scrubber-container[data-v-5be94f5e]{height:140px;width:100%}.scrubber-container .scrubber-overlay[data-v-5be94f5e]{position:absolute;height:100px;width:100%}.big-number-container[data-v-5be94f5e]{margin:50px auto;display:flex;width:70%;justify-content:space-between}@media(min-width: 480px)and (max-width: 959px){.short-text[data-v-5be94f5e]{margin:7rem auto}}@media(min-width: 320px)and (max-width: 479px){.key-container .collab-key-image[data-v-5be94f5e]{max-width:100%}.key-container .map-key-image[data-v-5be94f5e]{max-width:100%}.big-number-container[data-v-5be94f5e]{width:90%;margin:10px auto}.map-container[data-v-5be94f5e]{top:0;width:100vw}}',"",{version:3,sources:["webpack://./src/components/Section2/Section2.scoped.scss"],names:[],mappings:"AAAA,4BAA4B,WAAW,CAAC,WAAW,CAAC,iBAAiB,CAAC,cAAc,CAAC,wCAAwC,iBAAiB,CAAC,wCAAwC,UAAU,CAAC,WAAW,CAAC,YAAY,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,4BAA4B,CAAC,8BAA8B,WAAW,CAAC,gBAAgB,CAAC,mCAAmC,aAAa,CAAC,iCAAiC,YAAY,CAAC,oBAAoB,CAAC,gCAAgC,YAAY,CAAC,sBAAsB,CAAC,eAAe,CAAC,kBAAkB,CAAC,kDAAkD,eAAe,CAAC,gBAAgB,CAAC,UAAU,CAAC,WAAW,CAAC,+CAA+C,eAAe,CAAC,gBAAgB,CAAC,UAAU,CAAC,WAAW,CAAC,gCAAgC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,4CAA4C,UAAU,CAAC,YAAY,CAAC,WAAW,CAAC,qCAAqC,YAAY,CAAC,UAAU,CAAC,uDAAuD,iBAAiB,CAAC,YAAY,CAAC,UAAU,CAAC,uCAAuC,gBAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,6BAA6B,CAAC,+CAA+C,6BAA6B,gBAAgB,CAAC,CAAC,+CAA+C,kDAAkD,cAAc,CAAC,+CAA+C,cAAc,CAAC,uCAAuC,SAAS,CAAC,gBAAgB,CAAC,gCAAgC,KAAK,CAAC,WAAW,CAAC",sourcesContent:['.section-2[data-v-5be94f5e]{width:100vw;padding:0px;position:relative;max-width:none}.section-2 .short-text[data-v-5be94f5e]{margin:10rem auto}.author-list-container[data-v-5be94f5e]{width:100%;margin:auto;display:flex;flex-direction:column;align-items:center;font-family:"Theinhardt-Med"}.author-list[data-v-5be94f5e]{margin:2rem;font-size:1.6rem}.author-list span[data-v-5be94f5e]{color:#fffde8}.author-list li[data-v-5be94f5e]{margin:.5rem;display:inline-block}.key-container[data-v-5be94f5e]{display:flex;justify-content:center;margin-top:4rem;margin-bottom:6rem}.key-container .collab-key-image[data-v-5be94f5e]{max-width:45rem;max-height:22rem;width:auto;height:auto}.key-container .map-key-image[data-v-5be94f5e]{max-width:72rem;max-height:38rem;width:auto;height:auto}.map-container[data-v-5be94f5e]{position:sticky;z-index:0;top:10rem;height:100vh}.section2-scroll-container[data-v-5be94f5e]{width:100%;height:250vh;margin:auto}.scrubber-container[data-v-5be94f5e]{height:140px;width:100%}.scrubber-container .scrubber-overlay[data-v-5be94f5e]{position:absolute;height:100px;width:100%}.big-number-container[data-v-5be94f5e]{margin:50px auto;display:flex;width:70%;justify-content:space-between}@media(min-width: 480px)and (max-width: 959px){.short-text[data-v-5be94f5e]{margin:7rem auto}}@media(min-width: 320px)and (max-width: 479px){.key-container .collab-key-image[data-v-5be94f5e]{max-width:100%}.key-container .map-key-image[data-v-5be94f5e]{max-width:100%}.big-number-container[data-v-5be94f5e]{width:90%;margin:10px auto}.map-container[data-v-5be94f5e]{top:0;width:100vw}}'],sourceRoot:""}]);const s=a},2736:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.scrubber-container svg{font-family:"Theinhardt-Med"}.scrubber-container .year-label{font-size:1.4rem;font-family:"Theinhardt-Thin";fill:#fffde8}.scrubber-container .current-date-label{text-transform:capitalize;font-size:1.8rem;fill:#fffde8}',"",{version:3,sources:["webpack://./src/components/Section2/TimelineScrubber.scss"],names:[],mappings:"AAAA,wBAAwB,4BAA4B,CAAC,gCAAgC,gBAAgB,CAAC,6BAA6B,CAAC,YAAY,CAAC,wCAAwC,yBAAyB,CAAC,gBAAgB,CAAC,YAAY",sourcesContent:['.scrubber-container svg{font-family:"Theinhardt-Med"}.scrubber-container .year-label{font-size:1.4rem;font-family:"Theinhardt-Thin";fill:#fffde8}.scrubber-container .current-date-label{text-transform:capitalize;font-size:1.8rem;fill:#fffde8}'],sourceRoot:""}]);const s=a},6752:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.annotation-container[data-v-cd68c52d]{position:absolute;display:flex;flex-direction:column;opacity:0;height:100px;width:100%;transition:opacity .5s;transition-delay:.7s}.annotation-container.visible[data-v-cd68c52d]{opacity:1}.annotation-container.baseline-bottom[data-v-cd68c52d]{justify-content:flex-end}.annotation-container .vaccine[data-v-cd68c52d]{text-transform:capitalize;font-family:"Theinhardt-Med";font-size:1.2rem}.annotation-container .title[data-v-cd68c52d]{font-family:"Musee-Bold";font-size:1.6rem}.annotation-container .journal[data-v-cd68c52d]{font-family:"Musee-Regular";font-size:1.4rem}.annotation-container .date[data-v-cd68c52d]{font-family:"Theinhardt-Thin";font-size:1.2rem}@media(min-width: 320px)and (max-width: 479px){.annotation-container[data-v-cd68c52d]{width:250px}}',"",{version:3,sources:["webpack://./src/components/Section3/ArticleAnnotation.scoped.scss"],names:[],mappings:"AAAA,uCAAuC,iBAAiB,CAAC,YAAY,CAAC,qBAAqB,CAAC,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,+CAA+C,SAAS,CAAC,uDAAuD,wBAAwB,CAAC,gDAAgD,yBAAyB,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,8CAA8C,wBAAwB,CAAC,gBAAgB,CAAC,gDAAgD,2BAA2B,CAAC,gBAAgB,CAAC,6CAA6C,6BAA6B,CAAC,gBAAgB,CAAC,+CAA+C,uCAAuC,WAAW,CAAC",sourcesContent:['.annotation-container[data-v-cd68c52d]{position:absolute;display:flex;flex-direction:column;opacity:0;height:100px;width:100%;transition:opacity .5s;transition-delay:.7s}.annotation-container.visible[data-v-cd68c52d]{opacity:1}.annotation-container.baseline-bottom[data-v-cd68c52d]{justify-content:flex-end}.annotation-container .vaccine[data-v-cd68c52d]{text-transform:capitalize;font-family:"Theinhardt-Med";font-size:1.2rem}.annotation-container .title[data-v-cd68c52d]{font-family:"Musee-Bold";font-size:1.6rem}.annotation-container .journal[data-v-cd68c52d]{font-family:"Musee-Regular";font-size:1.4rem}.annotation-container .date[data-v-cd68c52d]{font-family:"Theinhardt-Thin";font-size:1.2rem}@media(min-width: 320px)and (max-width: 479px){.annotation-container[data-v-cd68c52d]{width:250px}}'],sourceRoot:""}]);const s=a},4214:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.force-graph-container .graph-tooltip{position:absolute;background:rgba(0,0,0,0);visibility:hidden}.cite-graph-tooltip-container{position:absolute;width:300px;transform:translate(0%, 0%);background-color:rgba(255,253,232,.95);box-shadow:7px 7px 10px rgba(0,0,0,.2);padding:.8rem;border-radius:5px;border:solid 1px #1d253b;font-family:"Musee-Bold";color:#1d253b}.cite-graph-tooltip-container.left{transform:translate(-100%, 0px)}.cite-graph-tooltip-container .title{font-size:1.5rem;margin-bottom:.2rem}.cite-graph-tooltip-container .journal{font-size:1.3rem}.cite-graph-tooltip-container .break{width:100%;height:5px;border-bottom:solid 1px #1d253b}.cite-graph-tooltip-container .cited-by{color:#036063;font-family:"Theinhardt-Reg";font-size:1.3rem;margin-top:.3rem}.cite-graph-tooltip-container .cited-by span{font-family:"Theinhardt-Black";font-size:1.5rem;color:#036063}',"",{version:3,sources:["webpack://./src/components/Section3/CiteGraph.scss"],names:[],mappings:"AAAA,sCAAsC,iBAAiB,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,8BAA8B,iBAAiB,CAAC,WAAW,CAAC,2BAA2B,CAAC,sCAAsC,CAAC,sCAAsC,CAAC,aAAa,CAAC,iBAAiB,CAAC,wBAAwB,CAAC,wBAAwB,CAAC,aAAa,CAAC,mCAAmC,+BAA+B,CAAC,qCAAqC,gBAAgB,CAAC,mBAAmB,CAAC,uCAAuC,gBAAgB,CAAC,qCAAqC,UAAU,CAAC,UAAU,CAAC,+BAA+B,CAAC,wCAAwC,aAAa,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,6CAA6C,8BAA8B,CAAC,gBAAgB,CAAC,aAAa",sourcesContent:['.force-graph-container .graph-tooltip{position:absolute;background:rgba(0,0,0,0);visibility:hidden}.cite-graph-tooltip-container{position:absolute;width:300px;transform:translate(0%, 0%);background-color:rgba(255,253,232,.95);box-shadow:7px 7px 10px rgba(0,0,0,.2);padding:.8rem;border-radius:5px;border:solid 1px #1d253b;font-family:"Musee-Bold";color:#1d253b}.cite-graph-tooltip-container.left{transform:translate(-100%, 0px)}.cite-graph-tooltip-container .title{font-size:1.5rem;margin-bottom:.2rem}.cite-graph-tooltip-container .journal{font-size:1.3rem}.cite-graph-tooltip-container .break{width:100%;height:5px;border-bottom:solid 1px #1d253b}.cite-graph-tooltip-container .cited-by{color:#036063;font-family:"Theinhardt-Reg";font-size:1.3rem;margin-top:.3rem}.cite-graph-tooltip-container .cited-by span{font-family:"Theinhardt-Black";font-size:1.5rem;color:#036063}'],sourceRoot:""}]);const s=a},7463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".graph-narrative-container[data-v-fa093fa4]{width:100%;position:absolute;min-height:200px;display:flex;justify-content:center;align-items:center;margin:4rem auto;z-index:1}.graph-narrative-container .graph-narrative-text[data-v-fa093fa4]{width:75%;max-width:720px;font-size:1.9rem;line-height:1.65;text-align:left}.fade-enter[data-v-fa093fa4]{opacity:0}.fade-enter-active[data-v-fa093fa4]{opacity:1;transition:opacity 300ms cubic-bezier(0.55, 0.085, 0.68, 0.53)}.fade-exit[data-v-fa093fa4]{opacity:1}.fade-exit-active[data-v-fa093fa4]{opacity:0;transition:opacity 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94)}","",{version:3,sources:["webpack://./src/components/Section3/GraphNarrative.scoped.scss"],names:[],mappings:"AAAA,4CAA4C,UAAU,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,YAAY,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,SAAS,CAAC,kEAAkE,SAAS,CAAC,eAAe,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,eAAe,CAAC,6BAA6B,SAAS,CAAC,oCAAoC,SAAS,CAAC,8DAA8D,CAAC,4BAA4B,SAAS,CAAC,mCAAmC,SAAS,CAAC,6DAA6D",sourcesContent:[".graph-narrative-container[data-v-fa093fa4]{width:100%;position:absolute;min-height:200px;display:flex;justify-content:center;align-items:center;margin:4rem auto;z-index:1}.graph-narrative-container .graph-narrative-text[data-v-fa093fa4]{width:75%;max-width:720px;font-size:1.9rem;line-height:1.65;text-align:left}.fade-enter[data-v-fa093fa4]{opacity:0}.fade-enter-active[data-v-fa093fa4]{opacity:1;transition:opacity 300ms cubic-bezier(0.55, 0.085, 0.68, 0.53)}.fade-exit[data-v-fa093fa4]{opacity:1}.fade-exit-active[data-v-fa093fa4]{opacity:0;transition:opacity 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94)}"],sourceRoot:""}]);const s=a},2646:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".section-3[data-v-840b4078]{width:100vw;margin:0;max-width:none;padding:0px;position:relative}.graph-container[data-v-840b4078]{position:sticky;overflow:hidden;z-index:0;top:0px;height:100vh}.section3-scroll-container[data-v-840b4078]{width:100%;height:100%;margin:auto}.visState[data-v-840b4078]{width:100%;height:100vh;margin-bottom:20px}.visState.state1[data-v-840b4078]{height:25vh}","",{version:3,sources:["webpack://./src/components/Section3/Section3.scoped.scss"],names:[],mappings:"AAAA,4BAA4B,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,iBAAiB,CAAC,kCAAkC,eAAe,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,4CAA4C,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,2BAA2B,UAAU,CAAC,YAAY,CAAC,kBAAkB,CAAC,kCAAkC,WAAW",sourcesContent:[".section-3[data-v-840b4078]{width:100vw;margin:0;max-width:none;padding:0px;position:relative}.graph-container[data-v-840b4078]{position:sticky;overflow:hidden;z-index:0;top:0px;height:100vh}.section3-scroll-container[data-v-840b4078]{width:100%;height:100%;margin:auto}.visState[data-v-840b4078]{width:100%;height:100vh;margin-bottom:20px}.visState.state1[data-v-840b4078]{height:25vh}"],sourceRoot:""}]);const s=a},7237:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.section-hero[data-v-e1839179]{box-sizing:content-box;height:100vh;margin:0 auto;padding-bottom:20vh;display:flex;flex-direction:column;justify-content:center}.title-container[data-v-e1839179]{display:flex;justify-content:center;align-items:center;width:60vw;max-width:720px;margin:auto;flex-direction:column}.title-container *[data-v-e1839179]{margin:2rem auto}.title[data-v-e1839179]{width:80%;text-align:center;display:block;font-size:7.2rem}.subtitle[data-v-e1839179]{text-align:center;font-size:2.4rem;line-height:1.5}.byline[data-v-e1839179]{padding:.9rem;font-family:"Theinhardt-Med";font-size:1.9rem;background-color:#036063;color:#fffde8;padding:.7rem .7rem .2rem}.byline a[data-v-e1839179]{color:#fffde8}@media(min-width: 320px)and (max-width: 479px){.title-container[data-v-e1839179]{width:80vw}.title[data-v-e1839179]{width:90%;font-size:5rem}.subtitle[data-v-e1839179]{font-size:2rem}.byline[data-v-e1839179]{padding:.5rem .5rem .3rem;font-size:1.6rem}}',"",{version:3,sources:["webpack://./src/components/SectionHero/SectionHero.scoped.scss"],names:[],mappings:"AAAA,+BAA+B,sBAAsB,CAAC,YAAY,CAAC,aAAa,CAAC,mBAAmB,CAAC,YAAY,CAAC,qBAAqB,CAAC,sBAAsB,CAAC,kCAAkC,YAAY,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,UAAU,CAAC,eAAe,CAAC,WAAW,CAAC,qBAAqB,CAAC,oCAAoC,gBAAgB,CAAC,wBAAwB,SAAS,CAAC,iBAAiB,CAAC,aAAa,CAAC,gBAAgB,CAAC,2BAA2B,iBAAiB,CAAC,gBAAgB,CAAC,eAAe,CAAC,yBAAyB,aAAa,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,aAAa,CAAC,yBAAyB,CAAC,2BAA2B,aAAa,CAAC,+CAA+C,kCAAkC,UAAU,CAAC,wBAAwB,SAAS,CAAC,cAAc,CAAC,2BAA2B,cAAc,CAAC,yBAAyB,yBAAyB,CAAC,gBAAgB,CAAC",sourcesContent:['.section-hero[data-v-e1839179]{box-sizing:content-box;height:100vh;margin:0 auto;padding-bottom:20vh;display:flex;flex-direction:column;justify-content:center}.title-container[data-v-e1839179]{display:flex;justify-content:center;align-items:center;width:60vw;max-width:720px;margin:auto;flex-direction:column}.title-container *[data-v-e1839179]{margin:2rem auto}.title[data-v-e1839179]{width:80%;text-align:center;display:block;font-size:7.2rem}.subtitle[data-v-e1839179]{text-align:center;font-size:2.4rem;line-height:1.5}.byline[data-v-e1839179]{padding:.9rem;font-family:"Theinhardt-Med";font-size:1.9rem;background-color:#036063;color:#fffde8;padding:.7rem .7rem .2rem}.byline a[data-v-e1839179]{color:#fffde8}@media(min-width: 320px)and (max-width: 479px){.title-container[data-v-e1839179]{width:80vw}.title[data-v-e1839179]{width:90%;font-size:5rem}.subtitle[data-v-e1839179]{font-size:2rem}.byline[data-v-e1839179]{padding:.5rem .5rem .3rem;font-size:1.6rem}}'],sourceRoot:""}]);const s=a},6433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.section-methods[data-v-5e3491b7]{min-height:100%;font-family:"Theinhardt-Reg";font-size:1.5rem}.methods-container[data-v-5e3491b7]{width:90%;margin:0 auto}.methods-container h1[data-v-5e3491b7]{color:#ff9466;font-size:2rem;margin-bottom:2rem;padding-bottom:2rem;border-bottom:solid 1px #fffde8}.methods-container .col-container[data-v-5e3491b7]{display:flex;justify-content:space-between;flex-wrap:wrap}.methods-container .col[data-v-5e3491b7]{width:45%;line-height:1.65}.methods-container p[data-v-5e3491b7]{margin-top:0px}@media(min-width: 320px)and (max-width: 479px){.methods-container[data-v-5e3491b7]{width:100%}.methods-container .col-container[data-v-5e3491b7]{flex-direction:column}.methods-container .col-container .col[data-v-5e3491b7]{width:100%}}',"",{version:3,sources:["webpack://./src/components/SectionMethods/SectionMethods.scoped.scss"],names:[],mappings:"AAAA,kCAAkC,eAAe,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,oCAAoC,SAAS,CAAC,aAAa,CAAC,uCAAuC,aAAa,CAAC,cAAc,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,+BAA+B,CAAC,mDAAmD,YAAY,CAAC,6BAA6B,CAAC,cAAc,CAAC,yCAAyC,SAAS,CAAC,gBAAgB,CAAC,sCAAsC,cAAc,CAAC,+CAA+C,oCAAoC,UAAU,CAAC,mDAAmD,qBAAqB,CAAC,wDAAwD,UAAU,CAAC",sourcesContent:['.section-methods[data-v-5e3491b7]{min-height:100%;font-family:"Theinhardt-Reg";font-size:1.5rem}.methods-container[data-v-5e3491b7]{width:90%;margin:0 auto}.methods-container h1[data-v-5e3491b7]{color:#ff9466;font-size:2rem;margin-bottom:2rem;padding-bottom:2rem;border-bottom:solid 1px #fffde8}.methods-container .col-container[data-v-5e3491b7]{display:flex;justify-content:space-between;flex-wrap:wrap}.methods-container .col[data-v-5e3491b7]{width:45%;line-height:1.65}.methods-container p[data-v-5e3491b7]{margin-top:0px}@media(min-width: 320px)and (max-width: 479px){.methods-container[data-v-5e3491b7]{width:100%}.methods-container .col-container[data-v-5e3491b7]{flex-direction:column}.methods-container .col-container .col[data-v-5e3491b7]{width:100%}}'],sourceRoot:""}]);const s=a},212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),a.locals={textColor:"#fffde8",accent1:"#ff9466",accent2:"#036063",accent3:"#f7f573",bgColor:"#1d253b"};const s=a},6545:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),l=n.n(s),c=n(6237),u=n(2259),h=n(6706),d=n(5105),f=n(7071),p=n(2271),m=a()(i()),g=l()(c),y=l()(u),v=l()(h),_=l()(d),b=l()(f),x=l()(p);m.push([e.id,'@font-face{font-family:"Musee-Bold";font-weight:700;font-style:bold;src:url('+g+') format("opentype");font-display:swap}@font-face{font-family:"Musee-Regular";src:url('+y+') format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Black";src:url('+v+') format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Med";src:url('+_+') format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Reg";src:url('+b+') format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Thin";src:url('+x+') format("opentype");font-display:swap}@font-face{font-family:"National 2 Web";src:url("https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2Web-Regular.woff") format("woff");font-weight:500;font-style:normal;font-stretch:normal;font-display:swap}@font-face{font-family:"National 2 Web";src:url("https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2Web-Bold.woff") format("woff");font-weight:700;font-style:normal;font-stretch:normal;font-display:swap}@font-face{font-family:"National 2 Narrow Web";src:url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Regular.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Regular.woff") format("woff");font-weight:500;font-style:normal;font-stretch:normal;font-display:swap}@font-face{font-family:"National 2 Narrow Web";src:url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Bold.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Bold.woff") format("woff");font-weight:700;font-style:normal;font-stretch:normal;font-display:swap}*{box-sizing:border-box}html{font-size:10px}@media(min-width: 480px)and (max-width: 959px){html{font-size:8px}}@media(min-width: 320px)and (max-width: 479px){html{font-size:8px}}mark{-webkit-box-decoration-break:clone;box-decoration-break:clone;padding:.5rem .1rem .1rem;background-color:#036063;color:#fffde8}body{margin:0px;background-color:#1d253b;color:#fffde8;font-family:"Musee-Regular";line-height:1.33}h1{font-family:"Musee-Bold";font-size:4.2rem;line-height:1.1;color:#ff9466}a{color:#ff9466}a:hover{color:#ffb899}.logo-container{position:absolute;width:100%;top:0;margin:1rem auto 2rem;text-align:center}.logo-container .logo-full{position:relative;width:144px;max-height:38px;height:auto}section{width:90vw;max-width:1000px;margin:100px auto}.narrative-text{width:75%;max-width:720px;margin:0px auto 4rem;font-size:1.9rem;line-height:1.65}.narrative-text .section-break{width:50%;height:5px;margin:0 auto 4rem;border-bottom:solid 1px #fffde8}.narrative-text p{margin-bottom:4rem}.narrative-text span{color:#036063}@media(min-width: 320px)and (max-width: 479px){.narrative-text{width:90%}}.World{position:fixed;top:0px;left:0px;margin:0px;z-index:-1}',"",{version:3,sources:["webpack://./src/styles/style.scss"],names:[],mappings:"AAAA,WAAW,wBAAwB,CAAC,eAAe,CAAC,eAAe,CAAC,8DAAqD,CAAC,iBAAiB,CAAC,WAAW,2BAA2B,CAAC,8DAAwD,CAAC,iBAAiB,CAAC,WAAW,8BAA8B,CAAC,8DAA0D,CAAC,iBAAiB,CAAC,WAAW,4BAA4B,CAAC,8DAAwD,CAAC,iBAAiB,CAAC,WAAW,4BAA4B,CAAC,8DAAwD,CAAC,iBAAiB,CAAC,WAAW,6BAA6B,CAAC,8DAAyD,CAAC,iBAAiB,CAAC,WAAW,4BAA4B,CAAC,2LAA2L,CAAC,eAAe,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,WAAW,4BAA4B,CAAC,qLAAqL,CAAC,eAAe,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,WAAW,mCAAmC,CAAC,uMAAuM,CAAC,eAAe,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,WAAW,mCAAmC,CAAC,iMAAiM,CAAC,eAAe,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,EAAE,qBAAqB,CAAC,KAAK,cAAc,CAAC,+CAA+C,KAAK,aAAa,CAAC,CAAC,+CAA+C,KAAK,aAAa,CAAC,CAAC,KAAK,kCAAkC,CAAC,0BAA0B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,aAAa,CAAC,KAAK,UAAU,CAAC,wBAAwB,CAAC,aAAa,CAAC,2BAA2B,CAAC,gBAAgB,CAAC,GAAG,wBAAwB,CAAC,gBAAgB,CAAC,eAAe,CAAC,aAAa,CAAC,EAAE,aAAa,CAAC,QAAQ,aAAa,CAAC,gBAAgB,iBAAiB,CAAC,UAAU,CAAC,KAAK,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,2BAA2B,iBAAiB,CAAC,WAAW,CAAC,eAAe,CAAC,WAAW,CAAC,QAAQ,UAAU,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,gBAAgB,SAAS,CAAC,eAAe,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,+BAA+B,SAAS,CAAC,UAAU,CAAC,kBAAkB,CAAC,+BAA+B,CAAC,kBAAkB,kBAAkB,CAAC,qBAAqB,aAAa,CAAC,+CAA+C,gBAAgB,SAAS,CAAC,CAAC,OAAO,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU",sourcesContent:['@font-face{font-family:"Musee-Bold";font-weight:700;font-style:bold;src:url("../fonts/Musee-Bold.otf") format("opentype");font-display:swap}@font-face{font-family:"Musee-Regular";src:url("../fonts/Musee-Regular.otf") format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Black";src:url("../fonts/TheinhardtBlack.otf") format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Med";src:url("../fonts/TheinhardtMed.otf") format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Reg";src:url("../fonts/TheinhardtReg.otf") format("opentype");font-display:swap}@font-face{font-family:"Theinhardt-Thin";src:url("../fonts/TheinhardtThin.otf") format("opentype");font-display:swap}@font-face{font-family:"National 2 Web";src:url("https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2Web-Regular.woff") format("woff");font-weight:500;font-style:normal;font-stretch:normal;font-display:swap}@font-face{font-family:"National 2 Web";src:url("https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2Web-Bold.woff") format("woff");font-weight:700;font-style:normal;font-stretch:normal;font-display:swap}@font-face{font-family:"National 2 Narrow Web";src:url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Regular.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Regular.woff") format("woff");font-weight:500;font-style:normal;font-stretch:normal;font-display:swap}@font-face{font-family:"National 2 Narrow Web";src:url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Bold.woff2") format("woff2"),url("https://pudding.cool/assets/fonts/national/National2NarrowWeb-Bold.woff") format("woff");font-weight:700;font-style:normal;font-stretch:normal;font-display:swap}*{box-sizing:border-box}html{font-size:10px}@media(min-width: 480px)and (max-width: 959px){html{font-size:8px}}@media(min-width: 320px)and (max-width: 479px){html{font-size:8px}}mark{-webkit-box-decoration-break:clone;box-decoration-break:clone;padding:.5rem .1rem .1rem;background-color:#036063;color:#fffde8}body{margin:0px;background-color:#1d253b;color:#fffde8;font-family:"Musee-Regular";line-height:1.33}h1{font-family:"Musee-Bold";font-size:4.2rem;line-height:1.1;color:#ff9466}a{color:#ff9466}a:hover{color:#ffb899}.logo-container{position:absolute;width:100%;top:0;margin:1rem auto 2rem;text-align:center}.logo-container .logo-full{position:relative;width:144px;max-height:38px;height:auto}section{width:90vw;max-width:1000px;margin:100px auto}.narrative-text{width:75%;max-width:720px;margin:0px auto 4rem;font-size:1.9rem;line-height:1.65}.narrative-text .section-break{width:50%;height:5px;margin:0 auto 4rem;border-bottom:solid 1px #fffde8}.narrative-text p{margin-bottom:4rem}.narrative-text span{color:#036063}@media(min-width: 320px)and (max-width: 479px){.narrative-text{width:90%}}.World{position:fixed;top:0px;left:0px;margin:0px;z-index:-1}'],sourceRoot:""}]);const w=m},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},4015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,i=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[1],a=i[3];if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),c="/*# ".concat(l," */"),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([c]).join("\n")}return[o].join("\n")}},1667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},3192:e=>{e.exports=[["year","nPapers_PMC","nPapers_pubMed"],["1980","107","100"],["1981","132","149"],["1982","110","112"],["1983","123","109"],["1984","123","149"],["1985","138","122"],["1986","176","125"],["1987","168","212"],["1988","201","127"],["1989","220","162"],["1990","234","253"],["1991","250","177"],["1992","260","158"],["1993","249","230"],["1994","254","161"],["1995","281","259"],["1996","248","158"],["1997","242","171"],["1998","305","239"],["1999","308","150"],["2000","311","164"],["2001","294","232"],["2002","295","149"],["2003","855","673"],["2004","1367","841"],["2005","1345","789"],["2006","1559","804"],["2007","1496","609"],["2008","1768","557"],["2009","2081","517"],["2010","2123","503"],["2011","2319","493"],["2012","2619","559"],["2013","3061","752"],["2014","3488","916"],["2015","3885","1030"],["2016","4032","1006"],["2017","4151","942"],["2018","4314","928"],["2019","4782","1016"],["2020","79433","72785"]]},8952:e=>{e.exports=[["idx","lat","lng"],["0","37.77","-122.42"],["1","41.81","123.43"],["2","44.65","10.93"],["3","48.57","7.75"],["4","51.51","-0.13"],["5","42.28","-83.74"],["6","46.52","6.63"],["7","41.98","2.82"],["8","14.63","-90.51"],["9","44.95","-93.09"],["10","41.88","-87.63"],["11","-37.91","145.13"],["12","48.05","11.62"],["13","48.86","2.35"],["14","56.95","24.11"],["15","39.08","-77.15"],["16","38.92","-78.19"],["17","40.71","-74.01"],["18","-23.55","-46.63"],["19","42.36","-71.06"],["20","31.82","117.23"],["21","39.53","-119.81"],["22","28.61","77.21"],["23","42.04","-88.28"],["24","41.16","-8.63"],["25","52.09","5.12"],["26","53.35","-6.26"],["27","46.81","-71.21"],["28","48.92","2.45"],["29","45.73","4.91"],["30","56.34","-2.80"],["31","39.95","-75.17"],["32","38.63","-90.20"],["33","34.05","-118.24"],["34","51.75","-1.26"],["35","21.03","105.83"],["36","36.16","-86.78"],["37","30.59","114.31"],["38","31.23","121.47"],["39","23.00","120.23"],["40","46.49","-80.99"],["41","41.50","-81.69"],["42","28.23","112.94"],["43","4.81","-75.69"],["44","37.98","23.73"],["45","14.30","121.08"],["46","59.86","17.64"],["47","45.82","8.83"],["48","38.42","-82.45"],["49","-35.28","149.13"],["50","47.56","7.59"],["51","42.65","-73.76"],["52","19.08","72.88"],["53","55.76","37.62"],["54","52.41","16.93"],["55","47.24","6.02"],["56","41.90","12.50"],["57","34.11","-117.29"],["58","42.10","-72.59"],["59","32.72","-117.16"],["60","59.91","10.75"],["61","17.39","78.49"],["62","39.01","-76.78"],["63","48.43","-123.37"],["64","39.29","-76.61"],["65","36.65","117.12"],["66","52.52","13.40"],["67","40.44","-80.00"],["68","30.04","31.24"],["69","52.16","4.50"],["70","40.20","-8.41"],["71","29.30","-94.80"],["72","42.37","-72.52"],["73","-33.87","151.21"],["74","40.42","-3.70"],["75","43.32","-1.98"],["76","4.71","-74.07"],["77","47.38","8.54"],["78","54.35","18.65"],["79","33.49","-111.93"],["80","45.50","-73.57"],["81","42.26","-71.80"],["82","32.06","118.80"],["83","28.06","95.33"],["84","47.22","-1.55"],["85","55.40","10.40"],["86","37.23","-80.41"],["87","50.29","18.67"],["88","53.48","-2.24"],["89","48.91","2.44"],["90","42.89","-78.88"],["91","25.76","-80.19"],["92","52.21","0.12"],["93","34.69","135.20"],["94","32.32","-106.76"],["95","43.65","-79.38"],["96","39.17","-86.53"],["97","37.42","-122.17"],["98","41.75","1.87"],["99","48.62","2.42"],["100","41.01","28.98"],["101","49.90","-97.14"],["102","27.99","120.70"],["103","-31.95","115.86"],["104","53.22","6.57"],["105","29.87","121.54"],["106","41.31","-72.93"],["107","44.56","-123.26"],["108","40.04","-76.31"],["109","-40.36","175.61"],["110","42.81","-1.65"],["111","43.60","1.44"],["112","53.23","-0.54"],["113","47.50","19.04"],["114","42.37","-71.11"],["115","50.88","4.70"],["116","39.90","116.41"],["117","-25.43","-49.27"],["118","45.41","11.88"],["119","52.41","-1.52"],["120","26.45","80.33"],["121","24.86","67.00"],["122","12.97","77.59"],["123","44.98","-93.27"],["124","51.04","-114.07"],["125","30.84","106.11"],["126","30.28","57.08"],["127","38.98","-77.09"],["128","33.68","-117.83"],["129","50.84","-0.77"],["130","48.79","2.36"],["131","38.91","-77.04"],["132","53.41","-2.99"],["133","49.28","-123.12"],["134","-37.81","144.96"],["135","39.10","-84.51"],["136","29.47","77.71"],["137","29.76","-95.37"],["138","37.66","-121.88"],["139","48.01","0.20"],["140","24.88","102.83"],["141","52.23","21.01"],["142","25.03","121.57"],["143","51.48","-3.18"],["144","46.07","13.23"],["145","53.12","18.01"],["146","13.08","80.27"],["147","45.42","-75.70"],["148","22.27","113.58"],["149","37.18","-3.60"],["150","43.72","10.40"],["151","34.10","-118.13"],["152","35.69","51.39"],["153","45.81","9.09"],["154","26.85","80.95"],["155","33.83","-116.55"],["156","52.37","4.90"],["157","32.65","51.67"],["158","23.13","113.26"],["159","38.04","-84.50"],["160","51.90","-8.48"],["161","32.74","-97.11"],["162","49.40","8.67"],["163","44.48","-73.21"],["164","45.54","10.21"],["165","13.76","100.50"],["166","30.33","-81.66"],["167","-18.91","-48.28"],["168","24.71","46.68"],["169","49.45","11.08"],["170","28.46","-16.25"],["171","3.14","101.69"],["172","34.73","-86.59"],["173","0.35","32.58"],["174","22.54","114.06"],["175","30.27","120.16"],["176","38.58","-121.49"],["177","47.27","11.40"],["178","51.52","14.00"],["179","-33.45","-70.67"],["180","29.43","106.91"],["181","37.87","-122.27"],["182","40.63","-75.37"],["183","44.41","8.95"],["184","30.57","104.07"],["185","42.24","-8.72"],["186","18.52","73.86"],["187","44.93","2.44"],["188","48.52","9.06"],["189","38.72","-9.14"],["190","45.46","9.19"],["191","38.54","-121.74"],["192","55.95","-3.19"],["193","52.95","-1.16"],["194","53.57","-2.89"],["195","52.24","12.97"],["196","51.36","-0.19"],["197","43.61","3.88"],["198","37.89","-4.78"],["199","51.22","4.40"],["200","40.64","-8.65"],["201","17.69","83.22"],["202","44.49","11.34"],["203","52.63","4.75"],["204","35.99","-78.90"],["205","39.65","-104.99"],["206","50.61","10.69"],["207","44.84","11.62"],["208","43.07","-89.40"],["209","45.65","13.78"],["210","26.59","104.83"],["211","59.33","18.07"],["212","42.44","-76.50"],["213","-34.60","-58.38"],["214","51.31","9.48"],["215","39.73","-104.83"],["216","36.46","115.99"],["217","48.90","2.30"],["218","-35.28","149.12"],["219","32.49","74.52"],["220","30.45","-91.19"],["221","43.30","5.37"],["222","35.79","139.90"],["223","50.80","8.77"],["224","32.56","35.85"],["225","51.07","-1.79"],["226","-3.12","-60.02"],["227","45.71","9.50"],["228","38.35","-0.49"],["229","45.76","4.84"],["230","48.00","7.84"],["231","-41.28","174.77"],["232","50.63","5.58"],["233","41.39","2.17"],["234","39.64","22.42"],["235","39.96","-83.00"],["236","40.73","8.56"],["237","25.20","55.27"],["238","48.88","2.24"],["239","34.14","-117.98"],["240","31.95","35.91"],["241","39.70","-105.08"],["242","-11.90","-77.11"],["243","55.70","13.19"],["244","37.01","127.28"],["245","44.01","-92.48"],["246","40.25","18.44"],["247","36.57","53.06"],["248","46.19","9.02"],["249","39.12","-94.63"],["250","12.37","-1.52"],["251","51.38","-2.36"],["252","50.91","-1.40"],["253","49.42","8.39"],["254","36.15","-95.99"],["255","26.01","-80.15"],["256","40.85","14.27"],["257","37.47","57.31"],["258","45.38","9.14"],["259","34.10","-117.72"],["260","39.47","-0.38"],["261","28.41","77.32"],["262","41.03","40.52"],["263","38.42","27.14"],["264","40.60","-75.47"],["265","47.61","-122.33"],["266","43.04","-87.91"],["267","47.07","15.44"],["268","38.10","46.27"],["269","40.80","-74.48"],["270","45.80","126.53"],["271","39.63","-79.96"],["272","51.51","7.47"],["273","42.49","-71.28"],["274","-6.17","106.64"],["275","32.76","-97.33"],["276","48.14","11.58"],["277","48.40","9.99"],["278","44.02","-73.17"],["279","33.75","-84.39"],["280","50.94","6.96"],["281","33.95","-83.36"],["282","32.51","-117.04"],["283","39.00","-76.88"],["284","28.90","76.61"],["285","30.90","75.86"],["286","19.43","-99.13"],["287","-30.03","-51.22"],["288","48.79","2.46"],["289","41.65","-0.89"],["290","38.25","-85.76"],["291","45.51","-122.68"],["292","44.43","26.10"],["293","-37.78","144.94"],["294","-33.46","-70.70"],["295","36.71","119.16"],["296","-34.43","150.89"],["297","40.76","-111.89"],["298","39.34","117.36"],["299","45.45","8.62"],["300","53.55","9.99"],["301","45.21","5.74"],["302","29.84","31.30"],["303","-22.91","-43.17"],["304","47.42","9.38"],["305","30.16","71.52"],["306","45.44","10.99"],["307","31.49","120.31"],["308","41.45","2.25"],["309","41.74","-72.80"],["310","39.41","-77.41"],["311","38.80","-77.61"],["312","60.45","22.27"],["313","43.77","11.26"],["314","36.26","59.62"],["315","40.70","17.34"],["316","50.85","5.69"],["317","33.52","-86.81"],["318","45.44","12.32"],["319","5.45","10.05"],["320","50.91","6.18"],["321","52.49","-1.89"],["322","60.17","24.94"],["323","43.12","5.93"],["324","53.80","-1.55"],["325","51.90","8.39"],["326","50.36","3.52"],["327","45.56","9.21"],["328","29.95","-90.07"],["329","50.63","3.06"],["330","36.31","-82.35"],["331","36.99","35.33"],["332","41.84","-4.40"],["333","16.67","33.45"],["334","41.82","-71.41"],["335","38.87","115.46"],["336","50.62","3.14"],["337","45.18","9.16"],["338","-27.47","153.03"],["339","36.87","140.02"],["340","41.46","15.54"],["341","-13.96","33.77"],["342","51.45","-2.59"],["343","37.44","-122.14"],["344","18.25","42.51"],["345","37.99","-1.13"],["346","45.40","-71.89"],["347","51.24","-0.57"],["348","19.28","-99.66"],["349","34.66","133.92"],["350","34.80","48.52"],["351","42.25","-71.07"],["352","32.09","34.78"],["353","50.82","-1.09"],["354","43.86","18.41"],["355","17.44","78.50"],["356","43.73","12.64"],["357","-1.29","36.82"],["358","46.26","11.80"],["359","38.12","13.36"],["360","30.01","31.21"],["361","38.67","16.48"],["362","33.21","-87.57"],["363","54.60","-5.93"],["364","-8.81","13.23"],["365","46.67","5.55"],["366","3.02","101.71"],["367","51.62","-0.32"],["368","23.34","85.31"],["369","38.99","-76.94"],["370","45.13","10.02"],["371","48.21","16.37"],["372","41.88","-87.84"],["373","52.59","-1.98"],["374","50.11","8.68"],["375","36.53","-6.29"],["376","34.77","137.39"],["377","55.16","61.44"],["378","54.98","-1.62"],["379","34.75","-92.29"],["380","33.99","51.41"],["381","26.21","81.25"],["382","51.81","5.84"],["383","42.34","-72.59"],["384","30.79","31.00"],["385","34.23","135.17"],["386","46.77","23.62"],["387","55.85","-4.44"],["388","57.71","11.97"],["389","37.46","126.71"],["390","49.24","7.00"],["391","33.89","35.50"],["392","46.55","15.65"],["393","43.25","-89.34"],["394","41.67","-88.00"],["395","50.90","-1.54"],["396","36.07","120.38"],["397","31.52","74.36"],["398","42.35","14.16"],["399","44.05","-123.09"],["400","38.91","16.59"],["401","42.70","23.32"],["402","41.27","-72.95"],["403","50.93","11.59"],["404","42.98","-81.25"],["405","39.93","32.86"],["406","35.44","139.64"],["407","44.23","-76.49"],["408","35.91","-79.06"],["409","37.27","-79.94"],["410","-8.56","125.56"],["411","51.92","4.48"],["412","35.15","-90.05"],["413","38.04","114.51"],["414","-36.85","174.76"],["415","34.33","47.08"],["416","37.51","15.08"],["417","35.47","-97.52"],["418","42.70","-71.14"],["419","22.57","88.36"],["420","45.70","9.68"],["421","37.87","112.55"],["422","31.33","75.58"],["423","32.78","-79.93"],["424","43.83","87.62"],["425","46.20","6.14"],["426","35.08","-106.65"],["427","43.05","-76.15"],["428","35.90","14.49"],["429","18.89","-99.06"],["430","-34.92","-57.95"],["431","35.34","25.14"],["432","40.11","-88.21"],["433","50.72","-3.53"],["434","-18.88","47.51"],["435","38.72","-77.15"],["436","35.57","139.37"],["437","41.66","-91.53"],["438","-32.00","115.90"],["439","32.35","-95.30"],["440","-16.69","-49.26"],["441","53.87","10.69"],["442","32.22","-110.97"],["443","35.95","126.96"],["444","45.42","-122.79"],["445","-33.05","-71.61"],["446","52.64","-1.14"],["447","41.04","16.88"],["448","-28.73","24.75"],["449","38.43","-82.02"],["450","47.64","6.86"],["451","52.07","4.30"],["452","35.17","-80.66"],["453","32.73","35.53"],["454","23.26","77.41"],["455","42.40","12.86"],["456","23.11","-82.37"],["457","-33.92","18.42"],["458","42.33","-83.05"],["459","43.82","125.32"],["460","32.07","72.69"],["461","42.74","-84.48"],["462","26.14","91.74"],["463","33.63","46.42"],["464","-21.17","-47.81"],["465","50.74","7.10"],["466","60.39","5.32"],["467","52.37","-1.27"],["468","49.01","12.10"],["469","45.36","9.68"],["470","33.02","-96.70"],["471","31.77","35.21"],["472","-25.97","32.57"],["473","38.64","-9.23"],["474","41.20","-8.44"],["475","29.59","52.58"],["476","52.87","-1.09"],["477","39.74","-104.99"],["478","-17.81","-63.16"],["479","-26.20","28.05"],["480","33.21","-97.13"],["481","56.02","92.89"],["482","-32.93","151.78"],["483","30.75","120.76"],["484","-7.80","110.37"],["485","52.40","-0.73"],["486","16.51","80.65"],["487","37.39","-5.98"],["488","37.50","126.77"],["489","50.26","-5.05"],["490","34.10","49.70"],["491","39.94","-77.66"],["492","35.22","-97.44"],["493","-37.79","175.26"],["494","35.87","128.60"],["495","22.28","39.11"],["496","32.92","117.39"],["497","8.98","38.76"],["498","52.19","-2.22"],["499","45.44","4.39"],["500","39.37","22.95"],["501","55.64","12.48"],["502","33.68","73.05"],["503","49.59","11.01"],["504","-20.30","-40.30"],["505","41.65","-4.72"],["506","44.80","10.33"],["507","30.60","32.27"],["508","32.80","130.71"],["509","51.74","0.47"],["510","32.78","-96.80"],["511","46.07","12.59"],["512","37.54","-77.44"],["513","47.81","13.06"],["514","31.25","34.79"],["515","30.32","78.03"],["516","52.38","9.73"],["517","38.03","-78.48"],["518","40.28","-7.50"],["519","43.06","141.35"],["520","52.34","4.96"],["521","50.06","19.94"],["522","21.28","40.42"],["523","5.41","100.33"],["524","48.85","2.19"],["525","51.11","17.04"],["526","57.48","-4.22"],["527","61.50","23.76"],["528","55.94","9.13"],["529","14.48","98.85"],["530","34.75","113.63"],["531","50.85","4.35"],["532","41.08","-81.52"],["533","-38.74","-72.59"],["534","34.34","108.94"],["535","22.56","72.93"],["536","39.77","-86.16"],["537","43.36","-8.41"],["538","-16.73","-43.86"],["539","16.05","108.20"],["540","48.88","2.27"],["541","49.79","9.95"],["542","50.88","8.02"],["543","-19.92","-43.93"],["544","57.15","-2.09"],["545","27.18","56.27"],["546","52.66","-8.63"],["547","27.95","-82.46"],["548","46.16","-1.15"],["549","50.15","8.50"],["550","51.58","0.18"],["551","42.10","-75.92"],["552","-28.02","153.40"],["553","42.46","14.22"],["554","42.88","-8.54"],["555","27.72","85.32"],["556","40.15","26.41"],["557","51.05","3.72"],["558","50.45","3.96"],["559","36.97","-122.03"],["560","43.84","126.55"],["561","45.69","5.32"],["562","49.25","-122.98"],["563","47.12","-88.57"],["564","52.01","4.36"],["565","-2.09","-79.87"],["566","46.67","-1.43"],["567","-0.09","34.77"],["568","47.56","-52.71"],["569","-23.67","-46.54"],["570","36.64","127.49"],["571","40.81","14.34"],["572","49.33","7.34"],["573","34.69","135.50"],["574","18.79","98.99"],["575","37.49","14.06"],["576","20.46","85.88"],["577","54.09","13.39"],["578","47.32","5.04"],["579","30.20","115.04"],["580","41.37","2.12"],["581","41.46","-81.92"],["582","31.89","34.81"],["583","32.79","34.99"],["584","49.18","-0.37"],["585","46.25","-114.15"],["586","40.64","22.94"],["587","21.49","39.19"],["588","-6.79","39.21"],["589","38.58","-121.53"],["590","33.59","130.40"],["591","33.43","-111.94"],["592","43.53","5.45"],["593","48.12","-122.76"],["594","56.84","60.65"],["595","30.63","-97.68"],["596","38.03","14.02"],["597","51.23","6.77"],["598","29.42","-98.49"],["599","12.92","79.13"],["600","26.76","83.37"],["601","28.37","79.43"],["602","16.22","77.36"],["603","23.02","113.12"],["604","51.99","5.90"],["605","22.36","91.78"],["606","54.05","-2.80"],["607","44.81","-0.63"],["608","-6.21","106.85"],["609","30.73","76.78"],["610","55.86","-4.25"],["611","40.70","-99.08"],["612","-22.76","-43.46"],["613","-0.18","-78.47"],["614","15.50","32.56"],["615","38.35","-81.63"],["616","48.87","2.22"],["617","41.51","14.06"],["618","40.08","113.30"],["619","25.63","88.13"],["620","26.07","119.30"],["621","37.69","112.75"],["622","28.54","-81.38"],["623","49.49","0.11"],["624","41.32","16.28"],["625","31.63","-7.98"],["626","22.82","108.37"],["627","25.29","51.53"],["628","54.57","-1.33"],["629","47.61","-122.20"],["630","33.77","-84.30"],["631","35.05","137.01"],["632","52.27","-113.81"],["633","-23.22","-45.90"],["634","38.27","-0.71"],["635","13.45","-16.58"],["636","-1.05","-80.45"],["637","31.93","34.80"],["638","50.99","3.75"],["639","37.74","127.03"],["640","-2.45","-54.70"],["641","28.54","77.39"],["642","32.06","36.09"],["643","44.84","-0.58"],["644","28.68","115.86"],["645","30.71","76.22"],["646","45.69","9.72"],["647","40.55","-74.46"],["648","9.64","-13.58"],["649","40.72","-74.04"],["650","48.70","2.13"],["651","30.63","-96.33"],["652","35.92","-82.06"],["653","45.14","5.72"],["654","27.90","78.09"],["655","36.06","103.83"],["656","38.51","-0.23"],["657","50.08","14.44"],["658","32.47","44.43"],["659","23.00","91.06"],["660","48.25","11.65"],["661","53.82","-3.04"],["662","-20.47","-54.62"],["663","52.21","8.80"],["664","25.43","68.28"],["665","24.83","92.78"],["666","38.25","21.73"],["667","-11.69","27.50"],["668","44.91","25.46"],["669","38.95","-92.33"],["670","37.65","-122.41"],["671","6.93","79.86"],["672","49.70","-112.85"],["673","33.35","120.16"],["674","47.14","8.14"],["675","31.20","29.92"],["676","49.20","16.61"],["677","45.66","4.77"],["678","35.54","129.31"],["679","52.14","5.21"],["680","31.30","120.59"],["681","36.01","-84.27"],["682","22.42","-79.94"],["683","36.65","138.20"],["684","26.65","106.63"],["685","33.69","-78.89"],["686","9.93","78.12"],["687","41.12","1.24"],["688","32.18","34.91"],["689","24.14","-110.31"],["690","42.97","-85.95"],["691","47.21","-1.65"],["692","8.48","4.54"],["693","51.34","12.37"],["694","51.46","7.01"],["695","40.47","-3.87"],["696","59.93","30.36"],["697","41.12","16.87"],["698","51.26","7.15"],["699","50.38","-4.14"],["700","-6.92","107.62"],["701","44.79","20.45"],["702","46.25","20.14"],["703","37.76","30.55"],["704","40.29","-76.65"],["705","46.17","8.79"],["706","43.62","13.52"],["707","41.15","-81.36"],["708","32.01","112.12"],["709","50.98","11.03"],["710","32.30","-90.18"],["711","51.13","4.57"],["712","37.91","-122.69"],["713","40.93","-73.14"],["714","51.05","13.74"],["715","38.88","-6.97"],["716","33.45","-112.07"],["717","49.12","6.18"],["718","40.12","-88.24"],["719","-29.86","31.02"],["720","37.55","45.08"],["721","43.46","-80.52"],["722","-25.87","29.26"],["723","36.07","-79.79"],["724","26.30","-98.16"],["725","48.61","2.31"],["726","32.00","34.83"],["727","43.84","4.36"],["728","37.63","-1.00"],["729","34.00","-81.03"],["730","51.29","7.29"],["731","3.06","101.59"],["732","43.11","12.39"],["733","-34.93","138.60"],["734","40.79","30.41"],["735","10.82","106.63"],["736","50.67","4.59"],["737","44.42","12.20"],["738","50.08","8.24"],["739","48.69","6.18"],["740","33.62","-117.93"],["741","40.67","-111.89"],["742","47.39","0.68"],["743","32.39","119.41"],["744","45.16","10.79"],["745","53.80","-1.76"],["746","51.54","9.92"],["747","37.78","-3.78"],["748","24.45","54.38"],["749","25.79","-80.13"],["750","42.27","-89.09"],["751","32.38","48.42"],["752","-29.60","30.38"],["753","52.52","6.08"],["754","49.89","2.30"],["755","28.92","50.82"],["756","-6.08","145.39"],["757","40.74","-74.17"],["758","43.34","-1.79"],["759","29.19","-82.14"],["760","48.42","1.50"],["761","-7.12","-34.85"],["762","55.68","12.57"],["763","25.01","88.14"],["764","30.09","78.27"],["765","43.26","-79.87"],["766","11.34","77.72"],["767","43.30","-2.99"],["768","40.80","-73.70"],["769","41.54","-4.70"],["770","49.99","8.25"],["771","10.02","-69.25"],["772","38.36","-75.60"],["773","50.41","4.44"],["774","40.35","-3.83"],["775","38.98","-76.49"],["776","51.06","-1.31"],["777","-42.88","147.33"],["778","51.44","5.47"],["779","36.08","140.08"],["780","3.85","11.50"],["781","40.31","-75.13"],["782","33.16","-117.35"],["783","14.60","120.98"],["784","25.69","-100.32"],["785","37.30","-120.48"],["786","-22.79","-43.31"],["787","52.77","-1.21"],["788","45.56","-94.16"],["789","45.07","11.79"],["790","45.52","9.60"],["791","51.76","19.46"],["792","36.83","-2.46"],["793","44.50","-84.59"],["794","44.90","8.21"],["795","47.25","-122.44"],["796","46.58","0.34"],["797","33.57","73.02"],["798","51.54","7.20"],["799","48.94","2.36"],["800","41.70","-86.24"],["801","32.08","34.84"],["802","31.90","54.36"],["803","53.55","-113.49"],["804","45.78","-122.55"],["805","14.17","121.24"],["806","13.58","44.02"],["807","-32.93","-68.86"],["808","35.32","46.99"],["809","15.83","78.04"],["810","46.87","-113.99"],["811","37.44","127.14"],["812","42.87","74.57"],["813","52.09","20.81"],["814","50.40","8.81"],["815","-23.42","-51.93"],["816","46.81","7.16"],["817","-29.90","-71.25"],["818","41.55","2.11"],["819","26.93","-80.09"],["820","50.93","5.33"],["821","40.01","-105.27"],["822","47.47","-0.55"],["823","11.02","76.96"],["824","54.91","9.79"],["825","14.72","-17.47"],["826","32.75","129.88"],["827","-39.83","-73.22"],["828","41.13","14.78"],["829","25.32","82.97"],["830","33.57","-7.59"],["831","-33.91","151.22"],["832","6.52","3.38"],["833","43.84","13.02"],["834","44.14","12.25"],["835","-33.75","150.69"],["836","21.02","-101.26"],["837","-4.26","15.24"],["838","54.32","10.12"],["839","53.36","-8.85"],["840","19.04","-98.21"],["841","45.78","3.09"],["842","23.81","90.41"],["843","44.91","8.61"],["844","48.85","2.21"],["845","34.05","-117.26"],["846","-33.93","18.86"],["847","49.44","1.10"],["848","24.48","118.09"],["849","51.90","0.89"],["850","40.64","-73.64"],["851","53.43","14.55"],["852","47.16","27.60"],["853","37.26","127.03"],["854","26.12","-80.14"],["855","35.18","137.05"],["856","37.92","40.21"],["857","49.59","17.25"],["858","16.84","96.17"],["859","33.51","36.28"],["860","38.11","-122.57"],["861","43.16","-77.61"],["862","48.78","9.18"],["863","25.59","85.14"],["864","5.60","-0.19"],["865","32.33","50.88"],["866","41.55","-8.43"],["867","34.02","71.52"],["868","37.48","-122.23"],["869","40.56","-111.93"],["870","43.21","-71.54"],["871","43.70","7.31"],["872","30.27","-97.74"],["873","45.82","15.98"],["874","35.18","136.91"],["875","36.56","-121.92"],["876","39.68","-75.75"],["877","63.43","10.40"],["878","64.15","-21.94"],["879","5.36","-4.01"],["880","41.72","44.83"],["881","40.71","-73.62"],["882","43.53","-5.66"],["883","53.38","-1.47"],["884","32.94","-97.13"],["885","26.42","50.09"],["886","22.35","87.23"],["887","23.59","72.37"],["888","41.50","2.09"],["889","21.39","39.86"],["890","33.12","-117.09"],["891","37.80","-122.27"],["892","33.84","-117.91"],["893","47.66","-2.76"],["894","7.12","-73.12"],["895","-27.78","-64.26"],["896","46.38","6.92"],["897","34.21","117.28"],["898","21.43","92.01"],["899","39.48","-6.37"],["900","53.96","-1.09"],["901","46.00","8.95"],["902","-34.58","-58.54"],["903","48.91","2.24"],["904","-26.71","27.10"],["905","19.03","73.03"],["906","39.22","9.12"],["907","7.26","5.21"],["908","40.48","-3.36"],["909","39.50","-0.44"],["910","42.05","-87.69"],["911","51.26","6.40"],["912","56.46","-2.97"],["913","38.62","34.71"],["914","31.13","104.40"],["915","27.18","31.19"],["916","33.98","-117.38"],["917","48.93","2.05"],["918","55.76","12.49"],["919","31.80","34.66"],["920","41.81","-88.01"],["921","37.75","128.88"],["922","40.79","-77.86"],["923","36.68","48.51"],["924","51.46","-0.30"],["925","-26.92","-49.07"],["926","52.26","-7.11"],["927","10.32","123.89"],["928","45.55","18.70"],["929","43.36","-5.85"],["930","34.80","114.31"],["931","45.58","9.27"],["932","41.62","0.62"],["933","53.42","-7.94"],["934","40.56","-3.63"],["935","39.57","2.65"],["936","38.98","-3.93"],["937","41.47","12.90"],["938","-5.78","-35.20"],["939","45.32","8.42"],["940","49.60","6.13"],["941","25.41","55.51"],["942","35.61","-77.37"],["943","20.04","110.20"],["944","48.12","-1.68"],["945","38.27","140.87"],["946","41.29","-8.41"],["947","14.52","121.05"],["948","37.22","28.36"],["949","52.63","13.20"],["950","41.07","-73.78"],["951","51.45","-0.98"],["952","50.82","-0.14"],["953","7.38","3.95"],["954","-23.70","133.88"],["955","61.22","-149.90"],["956","40.49","-74.45"],["957","39.96","-86.01"],["958","29.90","-81.31"],["959","29.07","31.10"],["960","13.81","100.04"],["961","43.26","-2.93"],["962","40.35","18.18"],["963","51.55","-0.48"],["964","38.70","-9.31"],["965","37.72","30.28"],["966","38.19","15.55"],["967","37.34","-121.89"],["968","51.96","7.63"],["969","53.49","-2.29"],["970","45.64","25.59"],["971","33.97","-6.85"],["972","8.52","76.94"],["973","45.83","1.26"],["974","37.04","-95.62"],["975","39.84","-105.04"],["976","-11.01","-37.21"],["977","31.35","-97.64"],["978","48.75","-122.48"],["979","7.15","0.47"],["980","40.96","-76.61"],["981","-23.30","-51.17"],["982","28.47","119.92"],["983","25.75","-80.37"],["984","40.80","-73.73"],["985","32.05","44.37"],["986","48.37","10.90"],["987","42.36","-73.28"],["988","38.70","-0.48"],["989","31.32","48.67"],["990","52.16","5.39"],["991","44.77","12.14"],["992","20.30","85.82"],["993","37.46","121.45"],["994","36.81","10.18"],["995","-27.47","-58.83"],["996","56.01","38.38"],["997","42.03","-93.63"],["998","40.95","117.96"],["999","43.14","5.85"],["1000","49.42","2.83"],["1001","52.52","1.02"],["1002","3.45","-76.53"],["1003","50.36","7.59"],["1004","35.12","138.92"],["1005","51.34","6.59"],["1006","42.06","-88.12"],["1007","36.62","138.60"],["1008","38.11","15.65"],["1009","51.48","7.22"],["1010","59.44","24.75"],["1011","29.65","-82.32"],["1012","32.98","-96.89"],["1013","37.26","-6.94"],["1014","36.35","127.38"],["1015","46.59","125.10"],["1016","33.27","-7.58"],["1017","37.56","-122.27"],["1018","51.82","11.29"],["1019","49.46","1.08"],["1020","14.68","121.04"],["1021","44.39","-79.69"],["1022","33.54","-112.19"],["1023","50.78","6.08"],["1024","26.10","-80.40"],["1025","27.67","84.44"],["1026","48.41","15.60"],["1027","38.88","-94.82"],["1028","50.58","8.68"],["1029","8.89","7.19"],["1030","25.82","-80.36"],["1031","40.36","-74.67"],["1032","37.84","27.85"],["1033","7.49","4.55"],["1034","-25.75","28.23"],["1035","42.49","-83.14"],["1036","-29.09","26.16"],["1037","51.13","5.08"],["1038","-23.19","-46.90"],["1039","43.32","11.33"],["1040","-5.18","-80.65"],["1041","42.43","-8.64"],["1042","22.72","75.86"],["1043","29.84","114.32"],["1044","36.93","14.73"],["1045","48.76","2.17"],["1046","-2.19","-79.89"],["1047","37.42","25.32"],["1048","-33.93","150.92"],["1049","45.67","12.24"],["1050","46.32","7.99"],["1051","30.48","-90.10"],["1052","51.24","-0.17"],["1053","33.58","-101.86"],["1054","25.38","49.59"],["1055","-38.95","-68.06"],["1056","31.91","131.42"],["1057","39.63","118.18"],["1058","10.48","-66.90"],["1059","21.25","81.63"],["1060","-13.53","-71.97"],["1061","26.24","-80.21"],["1062","50.21","15.83"],["1063","46.95","7.45"],["1064","42.66","-83.15"],["1065","55.99","-4.58"],["1066","16.71","98.57"],["1067","42.83","-75.54"],["1068","44.70","10.63"],["1069","25.44","81.85"],["1070","39.52","-104.76"],["1071","41.68","-86.25"],["1072","32.07","34.82"],["1073","63.83","20.26"],["1074","28.47","77.50"],["1075","28.49","-16.32"],["1076","40.84","-74.48"],["1077","37.87","32.49"],["1078","31.98","120.89"],["1079","26.22","50.59"],["1080","33.47","-82.01"],["1081","49.26","4.03"],["1082","3.76","103.22"],["1083","35.19","33.38"],["1084","30.82","75.17"],["1085","35.87","139.98"],["1086","54.78","-1.58"],["1087","51.69","-0.23"],["1088","40.74","-73.69"],["1089","45.75","21.21"],["1090","11.56","104.93"],["1091","51.19","5.12"],["1092","6.43","2.89"],["1093","42.66","13.70"],["1094","41.26","-95.93"],["1095","35.34","129.04"],["1096","53.17","6.61"],["1097","52.03","8.53"],["1098","30.70","76.72"],["1099","-33.78","151.12"],["1100","52.98","-0.03"],["1101","52.02","5.09"],["1102","30.83","-83.28"],["1103","51.62","-3.94"],["1104","38.30","116.84"],["1105","48.78","1.86"],["1106","51.66","5.62"],["1107","4.91","114.92"],["1108","48.49","-2.79"],["1109","44.80","-0.59"],["1110","19.98","42.59"],["1111","35.71","139.75"],["1112","40.77","-73.02"],["1113","44.16","-94.00"],["1114","30.92","113.96"],["1115","51.60","-1.29"],["1116","-18.12","178.45"],["1117","42.37","-71.18"],["1118","47.75","7.34"],["1119","25.83","114.93"],["1120","50.69","3.18"],["1121","34.33","108.71"],["1122","52.27","10.53"],["1123","18.57","84.19"],["1124","43.71","7.26"],["1125","40.97","-5.66"],["1126","34.17","-118.84"],["1127","32.63","36.10"],["1128","55.74","12.57"],["1129","39.30","16.25"],["1130","42.53","-83.78"],["1131","48.25","11.56"],["1132","48.07","16.36"],["1133","56.06","-2.72"],["1134","41.28","36.34"],["1135","52.52","5.47"],["1136","42.50","-83.37"],["1137","27.63","85.56"],["1138","42.34","-3.70"],["1139","48.70","2.19"],["1140","17.45","78.39"],["1141","35.66","138.57"],["1142","23.02","72.57"],["1143","41.26","-96.13"],["1144","42.96","-85.67"],["1145","52.63","1.30"],["1146","41.10","121.13"],["1147","-1.94","30.06"],["1148","41.79","-72.23"],["1149","28.84","78.77"],["1150","29.16","76.79"],["1151","-1.37","-48.37"],["1152","48.15","17.11"],["1153","53.14","8.21"],["1154","11.12","76.12"],["1155","22.52","113.39"],["1156","46.34","-72.54"],["1157","37.27","49.59"],["1158","51.40","7.43"],["1159","57.05","9.92"],["1160","51.43","6.76"],["1161","54.98","82.90"],["1162","31.81","119.97"],["1163","43.23","-2.84"],["1164","50.45","30.52"],["1165","53.19","-2.89"],["1166","38.99","-77.03"],["1167","35.84","50.94"],["1168","38.93","-77.18"],["1169","-7.30","-39.30"],["1170","54.57","-1.23"],["1171","30.28","77.05"],["1172","29.98","103.01"],["1173","43.55","-96.73"],["1174","50.91","13.34"],["1175","50.91","34.80"],["1176","27.73","109.19"],["1177","39.10","-94.58"],["1178","36.59","109.49"],["1179","38.99","-1.86"],["1180","34.07","-117.31"],["1181","-6.83","37.66"],["1182","35.86","139.65"],["1183","49.01","8.40"],["1184","-30.10","-51.65"],["1185","43.41","-3.43"],["1186","47.47","8.31"],["1187","51.25","22.57"],["1188","51.41","-0.30"],["1189","30.08","-94.13"],["1190","32.51","-92.12"],["1191","48.84","2.24"],["1192","42.31","-83.04"],["1193","51.70","5.30"],["1194","50.94","4.04"],["1195","37.78","29.10"],["1196","37.98","-122.03"],["1197","40.68","14.77"],["1198","49.14","9.21"],["1199","43.54","-80.25"],["1200","35.96","-83.92"],["1201","48.66","6.17"],["1202","41.85","-72.83"],["1203","43.14","13.07"],["1204","53.01","18.60"],["1205","-24.96","-53.46"],["1206","44.45","11.47"],["1207","35.61","140.11"],["1208","38.47","27.22"],["1209","45.56","5.92"],["1210","-27.45","-58.99"],["1211","39.14","-77.20"],["1212","-25.26","-57.58"],["1213","38.72","35.48"],["1214","46.73","-117.00"],["1215","-12.82","28.22"],["1216","41.05","-73.54"],["1217","48.89","2.29"],["1218","55.86","-3.16"],["1219","6.60","3.35"],["1220","40.87","-73.46"],["1221","39.15","-77.07"],["1222","34.10","-117.77"],["1223","4.90","114.94"],["1224","41.74","-111.83"],["1225","12.00","8.59"],["1226","25.58","91.89"],["1227","45.70","4.82"],["1228","26.89","112.57"],["1229","25.35","55.42"],["1230","-16.92","145.78"],["1231","26.91","75.79"],["1232","-0.95","100.42"],["1233","52.32","10.24"],["1234","40.90","-73.34"],["1235","44.90","8.44"],["1236","-15.56","-54.30"],["1237","21.27","110.36"],["1238","42.22","-70.94"],["1239","40.81","-96.70"],["1240","-22.51","-43.18"],["1241","42.34","-7.86"],["1242","35.56","45.44"],["1243","32.37","-112.86"],["1244","43.70","-72.29"],["1245","42.68","-83.13"],["1246","36.04","-79.03"],["1247","42.87","-77.89"],["1248","54.59","-5.79"],["1249","50.58","4.07"],["1250","48.53","7.71"],["1251","52.12","11.63"],["1252","48.77","2.04"],["1253","34.02","-5.01"],["1254","42.26","-72.57"],["1255","50.26","19.02"],["1256","11.57","37.36"],["1257","35.01","135.77"],["1258","52.64","-8.65"],["1259","-10.95","-37.07"],["1260","42.50","-71.20"],["1261","45.89","11.04"],["1262","10.79","-0.86"],["1263","24.00","90.42"],["1264","32.89","115.81"],["1265","-0.55","30.14"],["1266","-34.82","-56.21"],["1267","25.61","100.27"],["1268","40.59","-105.08"],["1269","29.88","-97.94"],["1270","50.92","6.36"],["1271","-38.72","-62.27"],["1272","43.05","-88.01"],["1273","-43.53","172.64"],["1274","31.58","-84.16"],["1275","21.19","81.28"],["1276","4.92","6.27"],["1277","50.87","20.63"],["1278","22.60","88.26"],["1279","35.18","129.08"],["1280","55.76","-4.18"],["1281","47.66","9.48"],["1282","40.32","36.55"],["1283","28.66","121.42"],["1284","45.96","-66.64"],["1285","35.42","136.76"],["1286","11.94","79.81"],["1287","36.56","136.66"],["1288","28.52","53.57"],["1289","32.62","-115.45"],["1290","16.46","107.59"],["1291","38.85","-77.31"],["1292","37.02","-7.93"],["1293","-0.61","30.65"],["1294","44.84","-0.66"],["1295","35.88","-106.30"],["1296","-38.15","144.36"],["1297","-7.26","112.75"],["1298","47.53","21.63"],["1299","41.75","-87.92"],["1300","55.70","21.14"],["1301","55.13","-6.66"],["1302","23.35","116.68"],["1303","41.77","-72.67"],["1304","48.74","9.32"],["1305","42.14","24.75"],["1306","43.66","-70.26"],["1307","35.76","-5.83"],["1308","38.67","39.22"],["1309","48.81","2.36"],["1310","42.61","-5.62"],["1311","34.85","-82.39"],["1312","35.20","-111.65"],["1313","53.01","-2.23"],["1314","44.36","26.04"],["1315","-1.04","37.08"],["1316","41.00","39.72"],["1317","48.38","-89.25"],["1318","17.55","-99.50"],["1319","52.11","5.18"],["1320","43.30","-2.88"],["1321","-21.76","-43.34"],["1322","53.13","23.17"],["1323","34.15","-118.14"],["1324","51.50","-0.47"],["1325","40.77","-73.71"],["1326","-36.23","-66.94"],["1327","34.08","74.80"],["1328","-7.97","112.63"],["1329","50.81","6.26"],["1330","52.81","-1.64"],["1331","45.31","9.50"],["1332","36.32","139.00"],["1333","1.78","33.63"],["1334","40.16","-83.08"],["1335","43.59","-79.64"],["1336","-22.65","14.60"],["1337","36.85","-76.29"],["1338","48.94","2.50"],["1339","32.11","76.54"],["1340","34.21","-77.89"],["1341","24.52","39.57"],["1342","50.61","-2.45"],["1343","47.66","-117.43"],["1344","51.50","11.97"],["1345","15.37","44.19"],["1346","27.52","-97.86"],["1347","42.34","-71.21"],["1348","40.52","-74.41"],["1349","34.74","10.76"],["1350","26.20","-98.23"],["1351","16.27","-61.50"],["1352","33.75","-117.87"],["1353","48.54","2.66"],["1354","30.01","31.49"],["1355","35.11","33.92"],["1356","41.22","14.53"],["1357","36.10","-80.24"],["1358","43.30","13.45"],["1359","23.59","58.38"],["1360","51.77","0.09"],["1361","51.43","-0.33"],["1362","40.77","14.80"],["1363","39.20","-76.86"],["1364","4.92","-52.31"],["1365","53.08","8.80"],["1366","-35.42","-71.65"],["1367","48.96","2.89"],["1368","38.68","16.10"],["1369","6.12","102.25"],["1370","-27.60","-48.52"],["1371","39.28","-80.34"],["1372","22.29","87.92"],["1373","21.15","79.09"],["1374","48.73","2.45"],["1375","-15.77","35.02"],["1376","23.11","114.42"],["1377","38.49","106.23"],["1378","37.53","-122.04"],["1379","35.58","104.63"],["1380","42.39","-71.10"],["1381","0.47","35.98"],["1382","35.78","-78.64"],["1383","42.40","-71.18"],["1384","-28.47","-65.78"],["1385","54.28","-8.48"],["1386","31.45","73.13"],["1387","42.18","2.49"],["1388","34.33","73.20"],["1389","13.86","100.52"],["1390","23.22","72.64"],["1391","44.84","-93.30"],["1392","45.53","4.87"],["1393","33.55","119.11"],["1394","26.73","88.40"],["1395","41.33","-89.13"],["1396","50.47","4.87"],["1397","25.45","119.01"],["1398","39.51","-0.41"],["1399","33.45","-88.82"],["1400","22.43","87.32"],["1401","12.91","74.86"],["1402","6.67","-1.62"],["1403","42.91","143.05"],["1404","33.20","-96.64"],["1405","60.21","24.66"],["1406","16.70","74.24"],["1407","18.86","-99.24"],["1408","27.09","114.96"],["1409","6.79","79.89"],["1410","41.72","-87.75"],["1411","27.83","112.94"],["1412","-12.05","-77.13"],["1413","45.19","5.72"],["1414","45.35","11.96"],["1415","-23.38","150.51"],["1416","38.52","-77.29"],["1417","-17.62","177.45"],["1418","55.09","-1.58"],["1419","35.61","139.73"],["1420","47.34","-1.26"],["1421","30.34","112.24"],["1422","35.85","-86.39"],["1423","35.28","139.67"],["1424","19.88","75.34"],["1425","50.91","4.51"],["1426","52.14","-8.28"],["1427","35.60","138.52"],["1428","34.71","137.73"],["1429","40.81","0.52"],["1430","43.49","-70.45"],["1431","53.39","-3.02"],["1432","13.45","-16.69"],["1433","39.82","-75.16"],["1434","56.16","10.20"],["1435","-8.11","-79.03"],["1436","26.13","-80.23"],["1437","53.39","-2.60"],["1438","41.85","-87.79"],["1439","-41.14","174.86"],["1440","13.35","74.79"],["1441","39.26","9.15"],["1442","8.71","77.76"],["1443","46.73","-117.18"],["1444","26.17","-80.26"],["1445","22.01","100.80"],["1446","43.49","-112.04"],["1447","51.16","4.43"],["1448","47.57","6.87"],["1449","18.47","-66.11"],["1450","40.90","16.85"],["1451","28.46","77.03"],["1452","45.05","9.69"],["1453","51.56","0.08"],["1454","42.35","13.40"],["1455","32.08","34.89"],["1456","9.93","76.27"],["1457","24.09","32.90"],["1458","23.71","120.54"],["1459","48.08","7.36"],["1460","42.25","-84.40"],["1461","-1.67","-78.66"],["1462","65.01","25.47"],["1463","48.71","2.15"],["1464","37.59","15.12"],["1465","51.02","-3.11"],["1466","36.54","52.68"],["1467","30.01","-97.16"],["1468","37.69","-97.33"],["1469","48.07","11.67"],["1470","-31.73","115.77"],["1471","62.90","27.68"],["1472","34.02","-118.49"],["1473","40.81","-73.57"],["1474","55.10","14.71"],["1475","48.90","2.09"],["1476","39.86","-4.03"],["1477","36.24","137.19"],["1478","37.41","13.62"],["1479","34.25","132.57"],["1480","47.32","-122.31"],["1481","40.84","-73.29"],["1482","51.58","0.49"],["1483","50.77","7.19"],["1484","26.16","43.66"],["1485","26.24","68.39"],["1486","51.44","7.35"],["1487","45.27","19.83"],["1488","41.68","26.56"],["1489","-9.92","-76.24"],["1490","43.42","-83.95"],["1491","39.03","1.56"],["1492","47.01","8.34"],["1493","36.75","-95.98"],["1494","40.10","-75.15"],["1495","37.38","117.97"],["1496","34.06","-106.89"],["1497","47.39","8.05"],["1498","42.96","-78.74"],["1499","-27.39","153.03"],["1500","32.19","119.43"],["1501","39.76","-84.19"],["1502","8.98","-79.52"],["1503","39.33","16.18"],["1504","51.57","4.77"],["1505","20.97","-89.59"],["1506","22.26","84.85"],["1507","48.98","14.48"],["1508","6.33","5.60"],["1509","46.14","-122.94"],["1510","50.72","-1.88"],["1511","-15.39","28.32"],["1512","41.61","2.29"],["1513","18.92","-99.22"],["1514","42.33","-72.64"],["1515","30.56","76.70"],["1516","41.79","-73.69"],["1517","39.93","-75.12"],["1518","45.53","9.23"],["1519","30.69","111.29"],["1520","43.64","-72.25"],["1521","26.14","-81.79"],["1522","46.02","11.90"],["1523","51.63","-0.58"],["1524","36.74","10.31"],["1525","38.13","-121.27"],["1526","27.67","85.43"],["1527","30.13","77.27"],["1528","42.33","-71.12"],["1529","54.91","-1.38"],["1530","51.83","12.24"],["1531","38.90","22.43"],["1532","37.55","-121.99"],["1533","31.63","74.87"],["1534","-33.97","151.05"],["1535","43.10","-75.23"],["1536","-14.79","-39.05"],["1537","48.06","8.46"],["1538","37.38","-122.14"],["1539","34.17","73.22"],["1540","46.07","11.12"],["1541","45.61","8.89"],["1542","48.80","2.13"],["1543","39.40","-76.60"],["1544","11.09","7.72"],["1545","12.64","-8.00"],["1546","47.26","-0.08"],["1547","40.40","-105.07"],["1548","36.69","-6.13"],["1549","39.25","20.78"],["1550","25.75","-100.29"],["1551","36.17","-115.14"],["1552","51.02","4.55"],["1553","52.16","-106.67"],["1554","31.33","-89.29"],["1555","45.41","10.39"],["1556","41.65","-83.54"],["1557","-22.31","-49.06"],["1558","50.05","8.70"],["1559","-41.43","147.14"],["1560","29.88","40.10"],["1561","24.70","84.99"],["1562","38.83","-9.17"],["1563","40.20","-74.03"],["1564","4.16","9.26"],["1565","50.67","3.13"],["1566","50.83","4.43"],["1567","12.60","37.45"],["1568","26.15","85.89"],["1569","44.22","12.04"],["1570","44.96","7.60"],["1571","48.27","2.69"],["1572","51.56","-1.78"],["1573","50.85","4.43"],["1574","13.51","2.13"],["1575","45.77","4.89"],["1576","19.54","-96.91"],["1577","51.76","14.33"],["1578","45.35","10.14"],["1579","41.98","-76.52"],["1580","43.01","-7.56"],["1581","24.81","120.97"],["1582","41.54","2.44"],["1583","25.66","-100.40"],["1584","30.05","70.65"],["1585","28.94","53.63"],["1586","40.12","-82.01"],["1587","43.05","-75.38"],["1588","41.93","2.25"],["1589","51.87","-1.48"],["1590","37.51","122.12"],["1591","-33.02","-71.55"],["1592","-25.84","25.59"],["1593","57.78","14.16"],["1594","40.89","-74.01"],["1595","31.55","-97.15"],["1596","51.77","18.09"],["1597","34.05","-84.07"],["1598","38.88","-77.11"],["1599","55.68","12.51"],["1600","39.81","-77.01"],["1601","36.12","-97.06"],["1602","18.29","83.89"],["1603","41.59","-93.62"],["1604","48.84","12.96"],["1605","40.11","-104.94"],["1606","51.29","-0.65"],["1607","31.04","112.20"],["1608","50.33","4.88"],["1609","40.85","14.09"],["1610","48.08","16.35"],["1611","39.83","-75.02"],["1612","42.00","-71.51"],["1613","23.23","87.86"],["1614","22.08","82.14"],["1615","32.46","119.92"],["1616","-7.16","-78.51"],["1617","37.43","116.36"],["1618","43.38","-3.74"],["1619","40.43","-86.91"],["1620","35.69","139.75"],["1621","37.35","-121.96"],["1622","20.26","-97.45"],["1623","41.41","15.01"],["1624","54.38","10.21"],["1625","51.97","5.67"],["1626","60.29","25.04"],["1627","20.76","-104.85"],["1628","47.13","15.32"],["1629","-8.28","-35.98"],["1630","27.66","85.32"],["1631","41.80","-87.94"],["1632","40.68","-74.29"],["1633","43.16","-79.25"],["1634","45.16","9.70"],["1635","48.76","2.39"],["1636","41.53","-88.08"],["1637","52.75","0.40"],["1638","-37.81","144.99"],["1639","48.92","2.25"],["1640","55.79","49.12"],["1641","34.07","-118.40"],["1642","50.57","4.69"],["1643","-29.46","-51.96"],["1644","38.01","23.65"],["1645","52.35","5.26"],["1646","28.67","77.45"],["1647","-35.52","-71.69"],["1648","42.12","-75.96"],["1649","33.79","-117.85"],["1650","42.85","-2.67"],["1651","43.32","21.90"],["1652","49.24","-98.54"],["1653","48.31","11.92"],["1654","23.33","86.36"],["1655","-33.77","150.91"],["1656","42.63","-71.32"],["1657","32.63","110.80"],["1658","48.79","2.29"],["1659","10.33","37.73"],["1660","50.72","4.61"],["1661","45.78","4.71"],["1662","35.53","139.70"],["1663","44.02","-88.54"],["1664","48.17","9.98"],["1665","56.33","44.01"],["1666","40.89","-74.04"],["1667","31.91","-109.14"],["1668","35.23","-80.84"],["1669","-33.91","151.24"],["1670","59.46","9.03"],["1671","-5.22","145.79"],["1672","49.21","-122.91"],["1673","35.28","-120.66"],["1674","47.05","8.31"],["1675","35.89","127.25"],["1676","54.20","9.10"],["1677","26.64","118.18"],["1678","49.02","2.06"],["1679","40.10","-75.27"],["1680","41.52","-81.56"],["1681","55.93","12.30"],["1682","40.82","-74.16"],["1683","10.79","78.70"],["1684","37.67","-122.08"],["1685","40.88","-75.73"],["1686","49.49","8.47"],["1687","42.57","-83.37"],["1688","38.92","-77.23"],["1689","52.64","9.21"],["1690","35.37","1.32"],["1691","29.85","77.89"],["1692","51.06","6.12"],["1693","49.84","7.87"],["1694","29.63","51.65"],["1695","29.69","76.99"],["1696","55.44","11.56"],["1697","35.75","139.39"],["1698","-38.01","-57.54"],["1699","25.88","45.37"],["1700","42.31","1.04"],["1701","36.35","43.16"],["1702","51.88","-0.42"],["1703","36.20","117.09"],["1704","38.97","-95.24"],["1705","-39.06","174.06"],["1706","22.80","86.20"],["1707","35.66","139.75"],["1708","50.82","-0.37"],["1709","45.49","-122.80"],["1710","42.33","-88.27"],["1711","46.79","-92.10"],["1712","49.89","-119.50"],["1713","43.33","-79.80"],["1714","37.58","36.92"],["1715","20.66","-103.35"],["1716","10.00","-84.12"],["1717","46.99","6.93"],["1718","-34.48","-58.91"],["1719","42.13","-80.09"],["1720","54.09","12.10"],["1721","64.75","20.95"],["1722","47.10","17.91"],["1723","37.91","-122.07"],["1724","48.80","2.26"],["1725","6.86","79.90"],["1726","42.06","-1.61"],["1727","16.89","42.57"],["1728","46.25","6.20"],["1729","33.94","-117.23"],["1730","40.62","-79.15"],["1731","21.47","83.98"],["1732","40.93","-74.28"],["1733","3.13","101.59"],["1734","58.41","15.62"],["1735","48.39","-4.49"],["1736","39.04","-77.49"],["1737","48.96","2.35"],["1738","37.94","23.65"],["1739","33.76","-117.99"],["1740","34.39","132.46"],["1741","6.28","80.04"],["1742","24.13","55.80"],["1743","17.50","-88.20"],["1744","56.67","-5.13"],["1745","-12.15","-45.00"],["1746","47.16","10.59"],["1747","46.88","-96.79"],["1748","56.88","14.81"],["1749","52.29","104.29"],["1750","41.38","-72.90"],["1751","50.83","4.37"],["1752","36.27","-95.85"],["1753","14.46","75.92"],["1754","45.68","-111.04"],["1755","48.31","14.29"],["1756","6.15","-75.38"],["1757","44.26","-88.42"],["1758","45.66","9.15"],["1759","-34.05","150.70"],["1760","49.98","9.14"],["1761","35.41","116.59"],["1762","54.69","25.28"],["1763","48.94","2.46"],["1764","32.12","20.09"],["1765","43.51","16.44"],["1766","42.24","-83.61"],["1767","31.22","75.77"],["1768","47.69","7.19"],["1769","4.02","9.20"],["1770","49.75","6.64"],["1771","38.20","-84.87"],["1772","48.73","7.71"],["1773","42.00","21.43"],["1774","-29.60","30.27"],["1775","42.50","-96.40"],["1776","48.07","11.38"],["1777","40.75","14.77"],["1778","53.00","-2.18"],["1779","31.10","-97.34"],["1780","-26.81","-65.22"],["1781","49.44","7.75"],["1782","44.67","-74.98"],["1783","45.56","8.06"],["1784","50.26","10.96"],["1785","31.47","104.68"],["1786","39.76","-105.22"],["1787","34.20","72.02"],["1788","34.43","70.46"],["1789","54.90","23.90"],["1790","47.19","8.85"],["1791","31.35","118.43"],["1792","35.82","127.15"],["1793","53.52","-1.13"],["1794","47.86","3.97"],["1795","60.67","17.14"],["1796","27.73","106.93"],["1797","1.71","33.61"],["1798","29.36","113.13"],["1799","36.68","-121.80"],["1800","17.57","44.23"],["1801","36.19","43.99"],["1802","36.84","-76.30"],["1803","30.89","120.09"],["1804","29.07","-110.96"],["1805","15.31","-61.38"],["1806","47.48","-122.21"],["1807","38.10","-122.86"],["1808","49.50","5.99"],["1809","30.17","-95.46"],["1810","44.07","12.57"],["1811","9.67","76.56"],["1812","52.34","-6.46"],["1813","42.33","42.60"],["1814","53.77","-0.33"],["1815","1.49","103.74"],["1816","56.21","-3.42"],["1817","35.40","136.85"],["1818","34.02","-118.40"],["1819","10.08","78.78"],["1820","-37.80","144.95"],["1821","-14.79","-39.28"],["1822","42.43","19.26"],["1823","19.20","-103.81"],["1824","-19.75","-47.94"],["1825","40.71","-73.56"],["1826","6.61","0.48"],["1827","29.38","47.98"],["1828","-3.51","39.91"],["1829","37.75","39.32"],["1830","49.08","1.63"],["1831","45.55","11.54"],["1832","55.62","9.31"],["1833","21.84","87.42"],["1834","35.30","113.93"],["1835","-30.50","151.67"],["1836","51.58","-0.34"],["1837","18.49","-69.93"],["1838","51.11","4.33"],["1839","48.47","7.95"],["1840","52.08","0.18"],["1841","46.14","12.22"],["1842","42.92","143.20"],["1843","8.47","-13.23"],["1844","41.93","-88.75"],["1845","47.55","8.90"],["1846","43.13","131.91"],["1847","42.51","-83.01"],["1848","37.02","10.91"],["1849","35.73","139.48"],["1850","35.82","-78.83"],["1851","32.16","34.84"],["1852","46.03","8.92"],["1853","37.93","102.64"],["1854","42.76","11.11"],["1855","30.43","-9.60"],["1856","42.21","-83.15"],["1857","46.67","11.15"],["1858","4.54","-75.68"],["1859","9.93","-84.09"],["1860","45.94","6.09"],["1861","51.90","-2.08"],["1862","14.84","-91.52"],["1863","-37.33","-59.14"],["1864","43.46","1.61"],["1865","50.92","9.26"],["1866","39.75","-8.81"],["1867","51.25","6.69"],["1868","38.40","-0.44"],["1869","46.64","14.31"],["1870","8.75","-75.88"],["1871","34.22","-119.04"],["1872","47.55","7.54"],["1873","-33.75","151.23"],["1874","41.71","15.73"],["1875","10.53","76.21"],["1876","-5.04","-42.77"],["1877","53.78","20.48"],["1878","-4.62","55.45"],["1879","48.94","12.05"],["1880","34.58","133.77"],["1881","36.90","30.71"],["1882","29.97","-90.15"],["1883","41.05","-73.95"],["1884","19.83","75.88"],["1885","37.21","-93.29"],["1886","39.84","33.51"],["1887","5.13","-1.28"],["1888","9.30","-75.39"],["1889","48.19","11.65"],["1890","-6.77","-79.85"],["1891","50.45","-104.62"],["1892","6.32","-10.81"],["1893","5.95","80.55"],["1894","1.55","110.36"],["1895","26.24","73.02"],["1896","41.37","-83.65"],["1897","25.75","-80.26"],["1898","45.59","9.61"],["1899","55.61","-4.50"],["1900","36.34","6.66"],["1901","-17.73","168.33"],["1902","44.13","12.06"],["1903","44.12","15.23"],["1904","-32.89","151.70"],["1905","50.98","-1.38"],["1906","41.63","-71.51"],["1907","42.46","-2.44"],["1908","6.41","38.30"],["1909","2.82","-60.68"],["1910","45.99","4.72"],["1911","45.44","10.69"],["1912","39.02","-94.28"],["1913","14.58","121.09"],["1914","24.37","88.60"],["1915","32.61","-85.48"],["1916","39.33","-82.10"],["1917","-4.22","-38.73"],["1918","26.64","84.90"],["1919","48.63","-112.33"],["1920","32.02","34.79"],["1921","52.04","-0.76"],["1922","50.82","6.13"],["1923","39.18","-96.57"],["1924","19.91","83.16"],["1925","6.84","7.37"],["1926","28.87","105.44"],["1927","37.56","-122.33"],["1928","40.79","-74.01"],["1929","53.65","-3.01"],["1930","30.44","-84.28"],["1931","22.97","88.43"],["1932","51.00","5.89"],["1933","45.46","-73.86"],["1934","37.58","-122.35"],["1935","41.77","-73.90"],["1936","37.92","139.04"],["1937","36.85","54.44"],["1938","6.25","-75.57"],["1939","28.61","76.65"],["1940","55.40","11.36"],["1941","56.12","-3.94"],["1942","44.51","26.14"],["1943","-12.25","-38.96"],["1944","48.73","-3.99"],["1945","51.72","8.76"],["1946","-45.87","170.49"],["1947","50.95","3.13"],["1948","41.30","-7.74"],["1949","34.90","35.89"],["1950","4.36","100.98"],["1951","11.83","13.15"],["1952","-33.91","151.02"],["1953","37.39","-122.08"],["1954","52.59","-2.13"],["1955","52.23","5.17"],["1956","37.07","37.38"],["1957","45.93","10.25"],["1958","26.22","50.20"],["1959","10.79","76.65"],["1960","55.46","12.18"],["1961","52.22","6.89"],["1962","9.92","-84.15"],["1963","36.18","139.76"],["1964","53.45","-2.31"],["1965","43.46","11.88"],["1966","48.88","18.03"],["1967","43.46","-3.81"],["1968","51.86","-2.24"],["1969","41.74","27.22"],["1970","50.79","-1.12"],["1971","41.56","2.01"],["1972","40.56","-7.96"],["1973","49.99","36.23"],["1974","-37.85","145.11"],["1975","51.52","-3.23"],["1976","51.29","4.49"],["1977","40.69","-89.59"],["1978","32.15","34.88"],["1979","46.80","9.84"],["1980","18.25","109.51"],["1981","19.25","-103.72"],["1982","50.72","-1.99"],["1983","31.76","-106.49"],["1984","40.63","-3.16"],["1985","35.69","-105.94"],["1986","36.70","137.21"],["1987","6.74","6.22"],["1988","-17.82","31.05"],["1989","37.01","-95.94"],["1990","51.77","55.10"],["1991","50.08","8.44"],["1992","43.18","3.00"],["1993","48.59","2.25"],["1994","30.47","31.18"],["1995","59.58","30.13"],["1996","39.54","116.68"],["1997","31.69","76.52"],["1998","27.72","68.82"],["1999","42.98","47.51"],["2000","32.48","-97.01"],["2001","40.60","43.10"],["2002","53.90","27.56"],["2003","48.31","18.08"],["2004","55.22","11.76"],["2005","42.30","-71.71"],["2006","38.80","-77.05"],["2007","53.38","-6.59"],["2008","50.20","9.19"],["2009","48.80","2.43"],["2010","39.04","125.76"],["2011","17.97","79.59"],["2012","16.43","102.82"],["2013","45.16","1.53"],["2014","40.71","-73.31"],["2015","48.61","2.47"],["2016","18.41","76.56"],["2017","48.90","2.26"],["2018","49.87","8.65"],["2019","6.89","79.92"],["2020","42.63","-2.44"],["2021","51.15","8.29"],["2022","41.66","-72.78"],["2023","33.04","-117.29"],["2024","41.76","-72.74"],["2025","49.19","-122.85"],["2026","51.28","1.08"],["2027","44.33","23.79"],["2028","46.13","6.34"],["2029","46.17","9.88"],["2030","26.24","50.04"],["2031","47.52","12.43"],["2032","6.51","100.42"],["2033","-34.17","-70.74"],["2034","39.42","29.99"],["2035","34.07","134.55"],["2036","39.67","20.85"],["2037","42.31","9.15"],["2038","47.14","9.52"],["2039","37.72","-121.91"],["2040","49.64","8.67"],["2041","36.59","127.29"],["2042","35.69","139.98"],["2043","34.64","50.87"],["2044","39.99","-75.40"],["2045","29.15","75.72"],["2046","36.58","-83.66"],["2047","12.06","-61.75"],["2048","24.59","73.71"],["2049","39.96","-4.83"],["2050","30.00","120.59"],["2051","42.77","-71.47"],["2052","44.38","11.94"],["2053","53.93","9.51"],["2054","45.74","4.80"],["2055","-31.77","-52.34"],["2056","35.81","139.72"],["2057","51.18","6.44"],["2058","40.92","9.50"],["2059","52.92","-1.47"],["2060","34.03","-84.20"],["2061","7.15","3.36"],["2062","39.74","-75.55"],["2063","-27.97","153.42"],["2064","-23.55","-51.46"],["2065","48.68","9.01"],["2066","28.09","30.76"],["2067","43.41","-84.61"],["2068","45.47","4.38"],["2069","7.86","-11.20"],["2070","-33.88","151.22"],["2071","26.22","127.76"],["2072","19.71","-101.19"],["2073","51.61","-0.43"],["2074","6.22","7.08"],["2075","30.18","66.97"],["2076","47.24","39.70"],["2077","38.36","38.33"],["2078","30.54","75.96"],["2079","33.99","72.91"],["2080","40.66","-4.68"],["2081","37.24","127.18"],["2082","36.08","-94.17"],["2083","-32.89","-68.85"],["2084","47.52","8.54"],["2085","50.90","15.72"],["2086","1.53","103.66"],["2087","53.92","-122.75"],["2088","42.92","25.32"],["2089","38.48","-82.64"],["2090","38.68","43.24"],["2091","20.62","-103.24"],["2092","48.84","2.42"],["2093","45.62","9.37"],["2094","45.63","-122.68"],["2095","40.28","-74.73"],["2096","64.07","24.53"],["2097","10.39","-75.48"],["2098","46.07","11.15"],["2099","12.30","76.64"],["2100","40.79","-73.60"],["2101","30.67","-96.37"],["2102","36.16","-85.50"],["2103","46.07","18.23"],["2104","40.39","-111.85"],["2105","35.96","-80.01"],["2106","42.46","-71.07"],["2107","44.46","10.96"],["2108","36.24","137.97"],["2109","40.87","-74.42"],["2110","53.57","-0.08"],["2111","22.58","113.08"],["2112","5.37","100.31"],["2113","6.80","-58.16"],["2114","-27.47","153.03"],["2115","49.00","14.77"],["2116","48.84","2.75"],["2117","53.11","6.10"],["2118","39.81","-98.56"],["2119","51.48","5.66"],["2120","44.55","4.68"],["2121","39.15","-0.43"],["2122","48.83","2.13"],["2123","41.46","-81.51"],["2124","15.85","74.50"],["2125","-35.02","138.57"],["2126","38.25","48.30"],["2127","40.32","-3.87"],["2128","13.49","39.47"],["2129","59.74","10.20"],["2130","-34.48","150.42"],["2131","36.21","58.80"],["2132","8.41","48.48"],["2133","-33.30","-66.34"],["2134","46.43","6.22"],["2135","34.95","137.17"],["2136","30.22","78.80"],["2137","14.13","38.75"],["2138","31.60","-94.66"],["2139","0.42","-78.19"],["2140","4.82","7.05"],["2141","42.33","-87.84"],["2142","49.48","8.45"],["2143","43.84","10.50"],["2144","-20.90","55.50"],["2145","26.96","49.57"],["2146","49.21","-0.40"],["2147","41.37","-8.20"],["2148","29.08","119.65"],["2149","40.93","-73.90"],["2150","38.96","-77.36"],["2151","21.31","-157.86"],["2152","34.04","113.85"],["2153","48.77","2.27"],["2154","47.50","8.72"],["2155","-38.15","145.14"],["2156","38.88","-77.17"],["2157","50.97","5.50"],["2158","39.07","-76.55"],["2159","16.24","-61.54"],["2160","45.00","7.68"],["2161","30.97","76.52"],["2162","32.53","-93.75"],["2163","-25.40","-57.37"],["2164","34.42","-119.70"],["2165","39.78","-89.65"],["2166","40.79","-74.33"],["2167","40.32","-75.61"],["2168","50.57","10.42"],["2169","40.81","-74.20"],["2170","52.20","8.05"],["2171","25.71","-80.29"],["2172","36.81","10.09"],["2173","-17.41","-66.17"],["2174","41.29","-72.67"],["2175","25.47","-80.48"],["2176","50.61","3.39"],["2177","47.76","-122.21"],["2178","32.77","-117.02"],["2179","41.14","-73.26"],["2180","37.49","-120.85"],["2181","8.14","5.10"],["2182","10.99","106.66"],["2183","42.28","-71.42"],["2184","43.07","-70.76"],["2185","41.06","-80.06"],["2186","41.44","-8.29"],["2187","40.54","-80.18"],["2188","49.63","-1.62"],["2189","37.95","-122.06"],["2190","-21.78","-48.18"],["2191","27.04","84.87"],["2192","26.64","-81.87"],["2193","40.60","-75.40"],["2194","5.55","95.32"],["2195","45.61","-73.71"],["2196","-20.39","-43.50"],["2197","40.54","-3.64"],["2198","30.22","-92.02"],["2199","45.19","12.02"],["2200","59.42","10.48"],["2201","35.69","139.70"],["2202","39.46","-77.96"],["2203","38.98","-94.67"],["2204","5.41","100.41"],["2205","27.24","111.47"],["2206","51.69","-1.37"],["2207","51.55","0.71"],["2208","48.80","2.29"],["2209","-7.23","-39.31"],["2210","-22.53","-41.95"],["2211","-29.69","-51.13"],["2212","19.65","-99.22"],["2213","33.11","-96.51"],["2214","36.39","139.06"],["2215","42.98","-78.79"],["2216","42.42","-71.11"],["2217","36.76","3.06"],["2218","39.56","-76.25"],["2219","49.85","-99.95"],["2220","-12.46","130.85"],["2221","14.62","-61.06"],["2222","45.63","-72.96"],["2223","48.76","2.08"],["2224","41.75","-88.15"],["2225","43.73","3.31"],["2226","33.01","35.10"],["2227","48.19","-114.32"],["2228","21.03","-89.74"],["2229","52.51","-2.08"],["2230","-33.96","25.60"],["2231","9.98","76.30"],["2232","43.21","27.91"],["2233","41.77","-2.48"],["2234","26.05","-80.14"],["2235","55.71","9.54"],["2236","26.07","83.19"],["2237","51.29","-0.75"],["2238","45.86","9.40"],["2239","51.15","0.88"],["2240","37.96","-121.29"],["2241","36.46","7.43"],["2242","51.27","-1.09"],["2243","33.92","-80.34"],["2244","41.41","-95.90"],["2245","50.67","-120.33"],["2246","-34.56","-59.12"],["2247","46.50","11.35"],["2248","20.70","-100.45"],["2249","38.83","-104.82"],["2250","34.68","-82.84"],["2251","24.89","91.87"],["2252","52.18","7.03"],["2253","22.31","73.18"],["2254","42.32","-83.18"],["2255","28.98","77.71"],["2256","39.16","-76.62"],["2257","-3.36","29.36"],["2258","15.14","120.59"],["2259","37.27","-76.71"],["2260","35.80","139.47"],["2261","40.23","-111.66"],["2262","-22.22","-54.81"],["2263","58.16","8.02"],["2264","47.37","7.35"],["2265","36.60","-121.89"],["2266","23.02","113.75"],["2267","-6.60","106.81"],["2268","25.75","82.68"],["2269","52.31","4.69"],["2270","-34.91","138.59"],["2271","47.62","16.12"],["2272","31.10","77.17"],["2273","40.31","-3.73"],["2274","38.40","-122.82"],["2275","50.89","12.08"],["2276","4.58","13.68"],["2277","30.50","-90.75"],["2278","41.51","-87.69"],["2279","52.39","4.65"],["2280","45.78","-74.00"],["2281","45.70","9.41"],["2282","47.59","7.56"],["2283","48.73","9.26"],["2284","52.39","13.06"],["2285","49.03","10.97"],["2286","51.03","4.48"],["2287","-25.33","-57.55"],["2288","10.16","-68.00"],["2289","54.59","-5.69"],["2290","52.41","12.53"],["2291","40.07","-75.13"],["2292","45.01","7.54"],["2293","32.84","130.05"],["2294","48.91","2.48"],["2295","52.28","8.05"],["2296","51.41","-0.95"],["2297","-37.82","145.00"],["2298","9.93","-84.15"],["2299","6.46","7.55"],["2300","42.10","-111.88"],["2301","52.37","6.67"],["2302","19.24","-98.23"],["2303","44.39","-68.20"],["2304","51.81","4.69"],["2305","42.37","-83.35"],["2306","31.04","31.38"],["2307","36.81","118.06"],["2308","34.06","-117.75"],["2309","3.07","101.52"],["2310","41.87","-88.11"],["2311","34.37","-89.52"],["2312","43.34","12.91"],["2313","39.93","3.84"],["2314","34.85","135.62"],["2315","32.45","-81.78"],["2316","32.01","34.75"],["2317","-13.06","-55.92"],["2318","46.52","6.46"],["2319","-1.20","36.77"],["2320","46.93","7.42"],["2321","36.65","138.31"],["2322","40.92","-74.17"],["2323","32.89","13.19"],["2324","41.05","-0.89"],["2325","42.38","-71.24"],["2326","-2.51","28.85"],["2327","50.63","3.78"],["2328","64.84","-147.72"],["2329","-4.04","39.67"],["2330","25.77","113.01"],["2331","-26.70","27.81"],["2332","32.18","34.87"],["2333","44.36","11.71"],["2334","40.91","14.79"],["2335","47.86","12.12"],["2336","4.44","-75.24"],["2337","42.50","27.46"],["2338","62.39","17.31"],["2339","41.52","-81.46"],["2340","-24.63","25.92"],["2341","30.45","77.60"],["2342","11.41","76.70"],["2343","30.95","117.81"],["2344","5.36","-0.63"],["2345","51.19","6.51"],["2346","-37.82","144.95"],["2347","51.30","6.84"],["2348","31.21","107.47"],["2349","41.12","-87.86"],["2350","15.50","73.91"],["2351","-31.98","115.88"],["2352","48.71","2.25"],["2353","7.73","4.44"],["2354","45.66","8.79"],["2355","33.32","44.37"],["2356","43.09","-71.73"],["2357","51.42","21.97"],["2358","23.18","79.99"],["2359","-37.80","144.89"],["2360","42.03","-88.08"],["2361","33.66","-117.90"],["2362","40.22","-74.76"],["2363","51.37","6.17"],["2364","32.84","-97.14"],["2365","40.89","-74.58"],["2366","-0.72","36.43"],["2367","7.33","-2.31"],["2368","47.89","106.91"],["2369","58.38","26.73"],["2370","51.16","13.39"],["2371","55.60","13.00"],["2372","13.46","79.17"],["2373","40.27","-76.89"],["2374","47.88","10.63"],["2375","29.60","-90.72"],["2376","42.60","-70.89"],["2377","19.17","-96.13"],["2378","48.86","2.60"],["2379","0.42","9.47"],["2380","-1.24","29.99"],["2381","51.66","-0.39"],["2382","33.98","-118.03"],["2383","-6.17","106.76"],["2384","45.49","9.30"],["2385","34.34","58.70"],["2386","28.24","-82.72"],["2387","6.85","37.76"],["2388","13.63","79.42"],["2389","42.47","-83.22"],["2390","26.37","-80.13"],["2391","53.65","10.27"],["2392","40.84","111.75"],["2393","41.74","-92.72"],["2394","48.77","11.43"],["2395","51.00","-0.11"],["2396","-22.88","-48.44"],["2397","51.67","-1.29"],["2398","10.89","-1.09"],["2399","50.34","3.55"],["2400","33.92","-118.42"],["2401","50.97","5.83"],["2402","-37.83","144.96"],["2403","48.45","13.20"],["2404","-22.56","17.07"],["2405","46.26","6.15"],["2406","2.05","45.32"],["2407","51.29","-114.01"],["2408","52.04","5.66"],["2409","43.55","7.02"],["2410","40.66","-74.35"],["2411","43.01","-83.69"],["2412","51.60","-1.13"],["2413","-22.01","-47.89"],["2414","33.84","-118.34"],["2415","48.40","11.74"],["2416","8.43","99.96"],["2417","36.82","127.11"],["2418","12.67","108.04"],["2419","-12.08","-76.93"],["2420","53.00","-2.29"],["2421","27.49","77.67"],["2422","42.17","-87.84"],["2423","42.13","-0.41"],["2424","38.91","-94.38"],["2425","51.41","-0.03"],["2426","35.67","139.40"],["2427","29.14","-81.00"],["2428","-3.36","-39.83"],["2429","49.26","2.48"],["2430","40.81","-81.94"],["2431","39.85","-75.71"],["2432","-37.75","145.07"],["2433","33.74","-90.72"],["2434","45.61","11.18"],["2435","48.89","9.20"],["2436","8.96","77.32"],["2437","-34.72","143.14"],["2438","35.38","-81.38"],["2439","-20.10","-44.97"],["2440","45.42","-122.72"],["2441","53.65","-1.79"],["2442","36.02","129.34"],["2443","52.04","4.32"],["2444","53.54","8.58"],["2445","-23.62","-46.56"],["2446","45.61","8.85"],["2447","34.68","-1.90"],["2448","41.33","19.82"],["2449","59.67","9.65"],["2450","42.73","-84.56"],["2451","8.85","7.88"],["2452","33.63","114.70"],["2453","39.39","-3.21"],["2454","33.50","73.90"],["2455","56.49","84.95"],["2456","40.34","-74.82"],["2457","50.71","-2.44"],["2458","45.95","4.73"],["2459","31.69","113.38"],["2460","41.86","-87.84"],["2461","48.95","2.25"],["2462","36.40","139.85"],["2463","47.75","-3.37"],["2464","36.73","-91.85"],["2465","33.81","2.86"],["2466","33.50","-117.66"],["2467","17.14","-61.80"],["2468","32.96","35.50"],["2469","37.88","127.73"],["2470","40.36","-74.95"],["2471","42.73","-73.69"],["2472","51.00","-1.35"],["2473","37.97","-122.53"],["2474","47.68","9.17"],["2475","51.58","-3.00"],["2476","33.94","-118.13"],["2477","39.70","-75.11"],["2478","-33.66","115.32"],["2479","-34.05","150.97"],["2480","11.13","39.64"],["2481","50.10","-91.92"],["2482","25.55","87.56"],["2483","46.65","0.37"],["2484","48.68","9.22"],["2485","48.85","-1.58"],["2486","41.09","-75.33"],["2487","46.28","-119.28"],["2488","-34.56","-58.71"],["2489","47.90","1.91"],["2490","46.80","130.32"],["2491","44.29","11.88"],["2492","38.75","-77.48"],["2493","51.48","-0.86"],["2494","35.39","-94.40"],["2495","12.12","-68.88"],["2496","40.03","-74.96"],["2497","-33.87","151.04"],["2498","41.41","-75.66"],["2499","52.67","8.97"],["2500","43.35","-4.05"],["2501","40.41","49.87"],["2502","25.08","117.02"],["2503","51.51","-0.60"],["2504","50.93","4.43"],["2505","45.21","5.78"],["2506","35.91","139.34"],["2507","45.80","4.84"],["2508","41.00","-76.45"],["2509","0.82","-77.72"],["2510","41.23","-8.62"],["2511","27.80","-97.40"],["2512","30.70","-88.04"],["2513","1.85","102.93"],["2514","14.68","77.60"],["2515","23.84","78.74"],["2516","-7.88","112.53"],["2517","50.94","4.33"],["2518","29.35","71.69"],["2519","41.55","-70.61"],["2520","-7.01","110.44"],["2521","43.30","5.63"],["2522","40.99","37.88"],["2523","15.46","75.01"],["2524","52.23","-0.54"],["2525","7.29","80.63"],["2526","69.65","18.96"],["2527","34.60","119.22"],["2528","43.90","-78.87"],["2529","30.27","109.49"],["2530","-9.98","-67.82"],["2531","53.59","-2.30"],["2532","48.82","2.42"],["2533","50.85","-1.14"],["2534","42.64","-83.29"],["2535","21.19","81.35"],["2536","37.95","23.73"],["2537","15.81","79.97"],["2538","50.32","19.19"],["2539","27.48","-109.93"],["2540","47.32","13.14"],["2541","20.75","78.60"],["2542","40.19","-75.23"],["2543","56.67","12.86"],["2544","10.79","79.14"],["2545","35.68","139.77"],["2546","-21.20","-50.45"],["2547","36.27","50.00"],["2548","38.26","140.34"],["2549","36.81","34.64"],["2550","26.35","89.45"],["2551","48.65","2.84"],["2552","40.18","-75.13"],["2553","-4.55","136.88"],["2554","53.52","10.24"],["2555","33.98","-118.45"],["2556","14.59","-88.58"],["2557","44.40","7.82"],["2558","22.47","70.06"],["2559","41.39","-73.96"],["2560","49.46","6.17"],["2561","30.36","30.53"],["2562","39.03","-76.91"],["2563","-9.76","-36.66"],["2564","6.69","3.24"],["2565","52.79","4.85"],["2566","53.58","-2.43"],["2567","0.45","33.20"],["2568","49.19","-98.10"],["2569","40.36","-7.86"],["2570","54.77","-101.88"],["2571","53.28","-3.83"],["2572","-25.48","28.11"],["2573","48.33","16.06"],["2574","3.68","101.52"],["2575","41.08","-73.86"],["2576","31.46","-100.44"],["2577","43.58","1.55"],["2578","52.24","-0.90"],["2579","52.28","-1.58"],["2580","47.19","-1.57"],["2581","48.20","15.64"],["2582","32.56","36.01"],["2583","46.49","7.26"],["2584","34.18","131.47"],["2585","41.45","-74.42"],["2586","6.13","100.37"],["2587","42.07","-91.80"],["2588","48.89","2.22"],["2589","41.52","-72.08"],["2590","7.19","100.60"],["2591","35.34","139.49"],["2592","-1.10","37.01"],["2593","38.25","-122.04"],["2594","49.22","18.74"],["2595","54.78","-5.71"],["2596","36.41","55.02"],["2597","52.33","-0.18"],["2598","4.09","-76.19"],["2599","35.16","126.85"],["2600","30.45","114.87"],["2601","39.99","-0.05"],["2602","42.65","18.09"],["2603","-21.99","-47.42"],["2604","50.03","8.12"],["2605","49.97","5.93"],["2606","53.04","-2.99"],["2607","1.35","103.82"],["2608","28.99","77.02"],["2609","39.58","16.63"],["2610","36.15","139.39"],["2611","53.95","-1.05"],["2612","5.06","-75.50"],["2613","0.04","-51.07"],["2614","31.42","31.81"],["2615","36.19","5.41"],["2616","50.75","3.60"],["2617","32.86","59.23"],["2618","47.68","11.20"],["2619","6.45","2.35"],["2620","46.32","6.97"],["2621","-37.69","145.06"],["2622","-2.98","104.78"],["2623","24.10","88.27"],["2624","61.66","50.82"],["2625","2.99","101.79"],["2626","33.53","130.47"],["2627","34.06","-117.18"],["2628","37.80","-0.81"],["2629","-33.03","27.85"],["2630","30.38","76.78"],["2631","-32.05","115.76"],["2632","8.12","4.24"],["2633","32.84","-83.63"],["2634","-1.09","35.88"],["2635","20.56","74.51"],["2636","4.31","101.15"],["2637","37.05","140.89"],["2638","43.97","-75.91"],["2639","37.57","-84.30"],["2640","-31.89","138.42"],["2641","49.07","4.05"],["2642","32.89","-6.92"],["2643","41.70","-73.92"],["2644","36.47","52.35"],["2645","50.18","14.41"],["2646","36.09","136.30"],["2647","35.40","-78.82"],["2648","-2.52","32.92"],["2649","34.01","71.99"],["2650","35.54","35.80"],["2651","52.03","-0.74"],["2652","34.80","-87.68"],["2653","43.88","11.10"],["2654","47.86","12.01"],["2655","35.72","139.57"],["2656","36.08","-87.39"],["2657","6.01","6.91"],["2658","48.61","7.69"],["2659","43.93","10.91"],["2660","46.85","9.53"],["2661","-22.27","166.45"],["2662","43.34","-3.01"],["2663","39.51","-84.75"],["2664","40.63","17.94"],["2665","35.05","-85.05"],["2666","-2.53","-44.26"],["2667","59.40","13.51"],["2668","11.67","10.20"],["2669","43.38","11.17"],["2670","15.36","75.12"],["2671","45.03","5.33"],["2672","36.09","111.52"],["2673","45.93","8.56"],["2674","27.70","111.99"],["2675","-21.42","-45.95"],["2676","27.96","-82.21"],["2677","30.91","77.10"],["2678","22.76","-102.59"],["2679","34.02","-84.62"],["2680","38.06","-97.93"],["2681","5.98","116.07"],["2682","2.95","101.85"],["2683","53.76","-2.70"],["2684","9.59","76.52"],["2685","50.89","5.98"],["2686","36.08","-79.10"],["2687","51.58","6.25"],["2688","51.66","-0.90"],["2689","33.83","-118.28"],["2690","42.62","-70.66"],["2691","-33.89","151.21"],["2692","40.19","29.06"],["2693","61.49","21.80"],["2694","-33.89","151.18"],["2695","44.73","11.29"],["2696","47.07","-0.64"],["2697","32.22","35.26"],["2698","45.71","8.91"],["2699","51.61","-1.24"],["2700","-24.33","-50.62"],["2701","42.78","-96.93"],["2702","41.03","-73.76"],["2703","47.05","8.55"],["2704","26.13","50.54"],["2705","21.16","-86.85"],["2706","33.23","-8.50"],["2707","51.82","-0.81"],["2708","23.60","120.45"],["2709","42.89","-77.28"],["2710","45.43","4.07"],["2711","39.77","30.53"],["2712","19.13","-98.16"],["2713","44.74","-87.62"],["2714","8.09","-63.55"],["2715","14.44","79.99"],["2716","37.66","126.83"],["2717","38.91","121.61"],["2718","53.84","-0.44"],["2719","2.92","101.78"],["2720","-22.88","30.48"],["2721","52.14","-0.47"],["2722","13.80","8.99"],["2723","50.37","8.74"],["2724","31.93","-4.43"],["2725","40.80","-124.16"],["2726","51.63","15.22"],["2727","51.66","-3.93"],["2728","46.02","4.71"],["2729","43.66","-72.37"],["2730","27.34","-82.53"],["2731","48.65","9.45"],["2732","-33.84","151.21"],["2733","40.91","-73.78"],["2734","12.68","79.99"],["2735","33.45","51.17"],["2736","53.75","-2.49"],["2737","11.00","-74.81"],["2738","36.10","114.39"],["2739","54.83","37.62"],["2740","52.32","13.14"],["2741","41.97","-71.19"],["2742","47.07","10.85"],["2743","41.60","14.23"],["2744","44.76","-85.62"],["2745","30.90","76.96"],["2746","24.18","88.28"],["2747","50.77","0.29"],["2748","-36.82","-73.04"],["2749","23.24","56.49"],["2750","18.07","-15.96"],["2751","51.75","36.19"],["2752","58.25","22.49"],["2753","37.54","15.13"],["2754","-12.46","130.85"],["2755","37.20","126.83"],["2756","38.20","-75.69"],["2757","25.23","110.18"],["2758","50.31","9.79"],["2759","11.70","75.54"],["2760","41.61","-73.12"],["2761","34.17","-84.80"],["2762","43.63","7.10"],["2763","-19.26","146.82"],["2764","48.82","2.27"],["2765","-15.60","-56.10"],["2766","50.04","22.00"],["2767","33.92","-118.01"],["2768","48.12","-1.60"],["2769","45.56","4.62"],["2770","37.45","-122.18"],["2771","44.78","10.88"],["2772","41.56","14.66"],["2773","14.07","-87.17"],["2774","32.63","117.00"],["2775","31.22","-85.39"],["2776","48.73","2.27"],["2777","39.04","-77.12"],["2778","39.98","-86.12"],["2779","-25.59","27.99"],["2780","-29.78","30.77"],["2781","48.72","21.26"],["2782","42.64","-73.74"],["2783","-0.54","30.20"],["2784","4.98","8.34"],["2785","25.91","93.73"],["2786","48.76","2.30"],["2787","35.41","-78.74"],["2788","48.11","11.42"],["2789","35.82","10.63"],["2790","46.95","5.99"],["2791","37.09","-76.47"],["2792","42.42","12.11"],["2793","-28.81","153.29"],["2794","39.93","18.36"],["2795","-27.56","151.95"],["2796","47.38","15.09"],["2797","51.24","0.07"],["2798","33.87","-117.92"],["2799","34.03","-118.78"],["2800","40.95","17.30"],["2801","33.99","-81.07"],["2802","41.76","-88.32"],["2803","39.35","-76.90"],["2804","40.12","-105.39"],["2805","35.67","139.82"],["2806","41.33","-8.67"],["2807","45.60","9.89"],["2808","48.82","9.27"],["2809","13.11","-59.61"],["2810","7.07","-73.11"],["2811","22.23","-97.86"],["2812","32.11","76.30"],["2813","34.03","-6.77"],["2814","45.65","10.27"],["2815","-4.44","15.27"],["2816","46.36","48.06"],["2817","27.51","41.72"],["2818","37.91","-122.54"],["2819","13.48","-88.18"],["2820","37.13","-96.19"],["2821","62.24","25.75"],["2822","45.90","-64.37"],["2823","42.03","-87.74"],["2824","-20.81","-49.38"],["2825","52.17","22.29"],["2826","51.05","7.02"],["2827","24.82","93.94"],["2828","47.86","11.28"],["2829","19.31","84.79"],["2830","43.34","-5.81"],["2831","40.83","-73.20"],["2832","49.06","18.92"],["2833","24.45","89.68"],["2834","41.85","-86.67"],["2835","47.28","11.51"],["2836","-21.25","-48.33"],["2837","28.69","77.22"],["2838","32.61","35.29"],["2839","35.18","128.11"],["2840","27.33","88.61"],["2841","43.21","-77.94"],["2842","28.10","76.99"],["2843","29.34","104.78"],["2844","51.42","-0.75"],["2845","34.57","135.48"],["2846","24.87","118.68"],["2847","35.76","10.81"],["2848","-28.26","-52.41"],["2849","15.22","79.90"],["2850","51.76","-0.22"],["2851","40.72","-73.16"],["2852","41.89","-87.78"],["2853","39.22","-76.07"],["2854","11.66","78.15"],["2855","38.30","-85.76"],["2856","13.00","80.12"],["2857","43.59","-83.89"],["2858","23.62","90.50"],["2859","40.77","-74.23"],["2860","45.91","13.31"],["2861","20.78","-100.05"],["2862","26.52","88.72"],["2863","26.45","74.64"],["2864","35.68","140.03"],["2865","51.89","5.43"],["2866","47.49","-117.58"],["2867","25.08","89.79"],["2868","41.08","14.25"],["2869","20.73","78.66"],["2870","58.59","16.19"],["2871","42.56","12.64"],["2872","35.22","-101.83"],["2873","53.41","-2.16"],["2874","37.53","-94.10"],["2875","55.71","11.72"],["2876","9.13","99.33"],["2877","36.51","-4.88"],["2878","37.95","-122.56"],["2879","38.68","-9.17"],["2880","-26.65","153.10"],["2881","30.34","76.39"],["2882","21.96","96.09"],["2883","47.53","8.21"],["2884","42.10","-87.78"],["2885","-1.30","-47.92"],["2886","43.97","10.27"],["2887","40.58","-74.41"],["2888","7.67","36.84"],["2889","49.99","6.89"],["2890","44.51","-88.01"],["2891","38.02","12.54"],["2892","53.05","8.64"],["2893","48.90","2.57"],["2894","41.39","-73.45"],["2895","41.32","-73.09"],["2896","35.89","14.48"],["2897","32.99","112.53"],["2898","28.84","78.38"],["2899","51.75","-0.34"],["2900","41.09","-73.92"],["2901","-29.79","30.83"],["2902","48.61","7.69"],["2903","52.29","-6.50"],["2904","40.93","15.67"],["2905","40.73","-8.37"],["2906","19.31","-98.24"],["2907","35.75","139.71"],["2908","45.90","6.13"],["2909","14.39","33.54"],["2910","48.27","10.89"],["2911","58.39","13.44"],["2912","9.31","42.12"],["2913","-20.89","55.46"],["2914","29.03","111.70"],["2915","31.98","74.22"],["2916","43.52","1.50"],["2917","44.85","-123.23"],["2918","33.85","35.90"],["2919","48.81","2.39"],["2920","55.87","-3.96"],["2921","54.73","55.96"],["2922","30.53","47.77"],["2923","40.30","14.95"],["2924","26.21","-80.25"],["2925","45.27","-66.06"],["2926","9.74","8.81"],["2927","30.51","-97.68"],["2928","36.47","2.83"],["2929","14.47","78.82"],["2930","-33.89","151.20"],["2931","2.88","101.50"],["2932","26.45","87.27"],["2933","29.99","122.21"],["2934","-16.34","-71.54"],["2935","40.88","17.16"],["2936","35.09","137.07"],["2937","39.08","17.13"],["2938","40.61","141.21"],["2939","8.30","35.58"],["2940","-3.28","-45.65"],["2941","35.06","126.99"],["2942","-29.82","27.24"],["2943","-16.49","-68.12"],["2944","63.10","21.62"],["2945","57.16","65.56"],["2946","40.75","-73.64"],["2947","52.21","5.97"],["2948","-6.16","35.75"],["2949","39.61","109.78"],["2950","48.89","2.44"],["2951","-1.66","29.22"],["2952","10.10","76.36"],["2953","35.94","-77.79"],["2954","49.36","11.24"],["2955","43.49","-8.22"],["2956","-34.17","22.08"],["2957","43.53","1.48"],["2958","48.91","12.69"],["2959","29.21","78.96"],["2960","16.48","120.59"],["2961","-37.90","144.66"],["2962","52.84","-6.93"],["2963","-5.15","119.43"],["2964","52.06","-2.72"],["2965","55.64","12.09"],["2966","31.51","75.91"],["2967","42.20","-73.36"],["2968","48.10","-0.79"],["2969","50.35","4.87"],["2970","53.48","-6.73"],["2971","51.50","-3.58"],["2972","-22.91","-47.06"],["2973","22.41","-83.69"],["2974","39.94","-91.41"],["2975","51.15","11.81"],["2976","40.04","-75.51"],["2977","46.97","0.70"],["2978","-31.98","115.80"],["2979","19.25","-99.60"],["2980","46.17","6.11"],["2981","49.03","12.21"],["2982","-12.79","45.26"],["2983","-9.65","-35.71"],["2984","11.79","8.84"],["2985","37.41","57.93"],["2986","24.05","84.08"],["2987","47.49","8.90"],["2988","39.81","-75.21"],["2989","5.49","7.02"],["2990","22.26","88.19"],["2991","11.97","-86.09"],["2992","40.49","-74.52"],["2993","48.18","9.09"],["2994","45.13","8.45"],["2995","35.20","71.87"],["2996","49.90","8.84"],["2997","7.03","79.92"],["2998","45.07","-75.36"],["2999","-28.94","-49.49"],["3000","38.74","-9.12"],["3001","35.02","136.00"],["3002","3.60","98.67"],["3003","46.76","7.63"],["3004","-2.90","-79.01"],["3005","50.26","18.86"],["3006","37.07","114.50"],["3007","38.93","100.45"],["3008","42.75","-82.49"],["3009","26.72","-80.05"],["3010","29.80","-91.50"],["3011","35.91","-79.08"],["3012","52.28","7.44"],["3013","33.71","-117.95"],["3014","43.89","-0.50"],["3015","46.02","7.75"],["3016","42.60","-71.37"],["3017","28.97","118.86"],["3018","33.03","-111.39"],["3019","-31.42","-64.19"],["3020","30.82","75.10"],["3021","52.21","0.01"],["3022","40.82","140.75"],["3023","11.00","-74.95"],["3024","32.83","-117.27"],["3025","-22.95","-46.54"],["3026","37.76","38.28"],["3027","53.50","-2.97"],["3028","-18.85","-41.96"],["3029","47.63","9.23"],["3030","44.80","-93.17"],["3031","50.64","7.23"],["3032","39.91","41.27"],["3033","-10.73","25.51"],["3034","50.45","3.82"],["3035","29.97","32.55"],["3036","44.54","10.78"],["3037","62.01","-6.77"],["3038","50.43","3.80"],["3039","36.55","104.14"],["3040","40.94","-4.11"],["3041","-14.86","-40.84"],["3042","2.77","32.29"],["3043","48.77","8.23"],["3044","52.42","-4.08"],["3045","44.80","-68.76"],["3046","3.75","8.78"],["3047","47.49","12.06"],["3048","30.53","117.12"],["3049","50.86","0.55"],["3050","43.32","-2.99"],["3051","45.48","10.87"],["3052","42.12","-71.18"],["3053","-31.39","-57.96"],["3054","37.84","-94.35"],["3055","32.69","-114.63"],["3056","26.09","43.99"],["3057","48.30","4.07"],["3058","50.29","2.78"],["3059","40.95","-73.07"],["3060","51.50","3.61"],["3061","49.99","8.66"],["3062","-33.53","-71.60"],["3063","51.84","12.23"],["3064","42.30","-71.29"],["3065","45.02","78.38"],["3066","49.73","10.15"],["3067","53.68","-1.51"],["3068","39.30","-7.43"],["3069","22.85","89.54"],["3070","2.44","-76.61"],["3071","-26.23","-52.67"],["3072","42.29","-87.90"],["3073","42.33","-122.88"],["3074","42.19","-122.71"],["3075","39.17","-77.27"],["3076","-12.55","-38.71"],["3077","45.79","24.12"],["3078","45.65","0.16"],["3079","23.43","85.41"],["3080","27.97","-82.80"],["3081","36.33","-119.65"],["3082","48.57","13.43"],["3083","5.52","100.43"],["3084","40.66","-73.71"],["3085","26.19","-97.70"],["3086","42.68","-70.84"],["3087","39.68","-0.28"],["3088","32.19","74.19"],["3089","41.15","1.11"],["3090","42.93","-83.63"],["3091","41.75","-74.09"],["3092","48.77","8.93"],["3093","-7.42","109.24"],["3094","32.27","75.65"],["3095","31.04","30.47"],["3096","42.29","-85.59"],["3097","33.85","-84.22"],["3098","51.65","7.33"],["3099","49.25","11.09"],["3100","48.75","2.21"],["3101","41.50","-5.75"],["3102","19.81","105.79"],["3103","44.31","-73.26"],["3104","34.78","136.91"],["3105","9.40","-0.84"],["3106","34.30","-83.82"],["3107","10.05","105.75"],["3108","4.42","100.99"],["3109","43.91","12.92"],["3110","55.78","-4.05"],["3111","36.85","-75.98"],["3112","46.91","17.89"],["3113","36.74","-119.79"],["3114","40.00","-75.27"],["3115","7.56","99.62"],["3116","41.56","-73.05"],["3117","33.46","48.34"],["3118","39.98","0.02"],["3119","42.28","-71.24"],["3120","52.86","-3.06"],["3121","5.37","10.42"],["3122","28.53","78.06"],["3123","15.50","-88.01"],["3124","55.73","12.42"],["3125","7.55","37.86"],["3126","42.43","-71.07"],["3127","52.57","-0.24"],["3128","48.79","10.70"],["3129","50.66","6.79"],["3130","44.46","-93.16"],["3131","38.93","-76.89"],["3132","42.01","-4.53"],["3133","26.50","127.85"],["3134","35.67","139.32"],["3135","54.01","12.23"],["3136","46.33","6.06"],["3137","39.67","-76.38"],["3138","60.88","10.94"],["3139","37.94","22.93"],["3140","43.08","-73.78"],["3141","50.36","-4.74"],["3142","32.57","74.10"],["3143","44.38","7.54"],["3144","38.57","-7.91"],["3145","37.37","-6.07"],["3146","-9.44","147.18"],["3147","43.12","5.80"],["3148","43.62","-116.20"],["3149","48.80","2.49"],["3150","33.85","35.53"],["3151","32.39","-96.85"],["3152","42.20","-85.58"],["3153","34.02","-117.87"],["3154","37.07","22.43"],["3155","42.08","-71.02"],["3156","48.71","44.51"],["3157","39.96","-76.73"],["3158","46.26","6.11"],["3159","43.89","20.35"],["3160","34.00","-117.49"],["3161","40.94","24.41"],["3162","42.08","-87.82"],["3163","45.89","12.30"],["3164","36.21","-86.29"],["3165","49.78","22.77"],["3166","51.39","0.55"],["3167","40.60","140.46"],["3168","18.02","-76.81"],["3169","48.68","6.15"],["3170","38.01","-92.74"],["3171","50.32","3.51"],["3172","-33.87","151.20"],["3173","40.45","-74.48"],["3174","-15.84","-70.02"],["3175","38.67","29.41"],["3176","50.83","12.92"],["3177","26.25","107.52"],["3178","34.62","112.45"],["3179","39.55","-107.32"],["3180","37.04","22.11"],["3181","47.67","-122.12"],["3182","39.20","-76.72"],["3183","40.57","-74.63"],["3184","14.41","121.04"],["3185","30.21","-95.75"],["3186","39.44","-76.61"],["3187","44.87","-0.68"],["3188","40.76","-82.59"],["3189","29.59","79.65"],["3190","29.99","-90.24"],["3191","8.87","-12.04"],["3192","29.39","79.45"],["3193","36.29","-76.25"],["3194","45.66","9.27"],["3195","16.18","81.13"],["3196","50.29","19.10"],["3197","51.92","4.40"],["3198","42.83","-88.73"],["3199","52.09","12.87"],["3200","53.23","-4.13"],["3201","32.58","131.67"],["3202","51.06","-0.33"],["3203","44.98","9.68"],["3204","46.14","-60.19"],["3205","41.28","16.42"],["3206","3.32","101.58"],["3207","48.84","1.70"],["3208","35.86","129.22"],["3209","41.39","2.16"],["3210","6.13","1.23"],["3211","29.93","30.92"],["3212","6.83","79.88"],["3213","50.89","4.47"],["3214","49.90","10.90"],["3215","42.49","-92.34"],["3216","46.48","6.46"],["3217","51.38","7.77"],["3218","-37.80","144.98"],["3219","23.99","85.36"],["3220","36.80","-121.79"],["3221","51.99","11.30"],["3222","41.81","12.68"],["3223","11.26","75.78"],["3224","34.69","135.80"],["3225","50.20","10.08"],["3226","25.25","45.25"],["3227","36.31","139.58"],["3228","45.38","-63.25"],["3229","34.10","-84.52"],["3230","48.66","2.64"],["3231","41.04","-83.65"],["3232","40.79","-74.39"],["3233","39.19","-78.16"],["3234","44.94","-123.04"],["3235","41.35","2.04"],["3236","44.93","11.72"],["3237","45.80","9.04"],["3238","47.54","0.74"],["3239","41.80","12.60"],["3240","56.05","12.69"],["3241","-8.28","-35.03"],["3242","52.21","9.55"],["3243","30.35","48.29"],["3244","44.58","11.36"],["3245","20.62","-103.32"],["3246","38.10","-122.26"],["3247","5.16","-52.65"],["3248","45.81","8.61"],["3249","52.01","4.71"],["3250","54.44","18.56"],["3251","33.77","-118.19"],["3252","41.18","-73.19"],["3253","48.96","8.29"],["3254","32.15","114.09"],["3255","52.52","-2.00"],["3256","38.95","-5.86"],["3257","59.28","15.21"],["3258","40.74","-74.03"],["3259","9.90","8.86"],["3260","-32.07","115.84"],["3261","33.65","130.50"],["3262","51.54","4.47"],["3263","45.60","8.91"],["3264","54.14","-0.80"],["3265","34.50","135.56"],["3266","34.17","71.75"],["3267","31.69","-106.42"],["3268","44.88","-68.67"],["3269","38.99","-0.52"],["3270","22.24","68.97"],["3271","9.36","-79.90"],["3272","-5.52","-47.47"],["3273","47.40","8.62"],["3274","58.30","-134.42"],["3275","51.80","-0.21"],["3276","5.04","7.91"],["3277","48.40","2.70"],["3278","40.52","-111.86"],["3279","41.31","-105.59"],["3280","46.29","7.53"],["3281","35.10","138.90"],["3282","34.76","135.52"],["3283","48.99","2.45"],["3284","51.17","7.07"],["3285","27.83","113.13"],["3286","18.59","-72.31"],["3287","39.56","21.77"],["3288","-3.74","-73.25"],["3289","42.53","-92.45"],["3290","47.75","11.84"],["3291","40.35","-1.11"],["3292","37.34","127.92"],["3293","36.68","-97.31"],["3294","47.67","9.59"],["3295","8.64","76.85"],["3296","35.92","-94.97"],["3297","36.85","-121.40"],["3298","38.52","102.19"],["3299","58.97","5.73"],["3300","47.30","8.69"],["3301","22.70","90.35"],["3302","37.02","-7.93"],["3303","27.04","88.27"],["3304","47.78","12.14"],["3305","41.22","1.73"],["3306","51.45","0.22"],["3307","48.91","2.38"],["3308","37.75","-84.29"],["3309","52.35","14.55"],["3310","49.05","2.10"],["3311","-1.95","30.52"],["3312","47.69","-2.74"],["3313","38.43","141.30"],["3314","35.51","24.02"],["3315","53.79","-2.24"],["3316","52.84","8.05"],["3317","7.78","4.54"],["3318","28.08","-80.61"],["3319","40.99","14.42"],["3320","38.28","-85.74"],["3321","29.71","116.00"],["3322","42.45","-71.23"],["3323","42.70","9.45"],["3324","40.13","-75.51"],["3325","-33.31","26.53"],["3326","19.72","-155.09"],["3327","35.96","-78.88"],["3328","34.56","69.21"],["3329","47.76","-122.35"],["3330","44.89","-93.35"],["3331","6.99","81.05"],["3332","42.95","12.70"],["3333","33.79","132.87"],["3334","-33.40","19.30"],["3335","53.59","-0.65"],["3336","4.86","31.57"],["3337","-9.45","159.97"],["3338","40.61","14.98"],["3339","35.24","58.47"],["3340","0.05","32.46"],["3341","39.70","-74.26"],["3342","40.79","-74.06"],["3343","38.95","-94.73"],["3344","42.67","-2.03"],["3345","6.55","3.40"],["3346","46.35","-124.05"],["3347","-33.81","151.00"],["3348","44.65","-63.58"],["3349","37.32","126.83"],["3350","18.43","-68.97"],["3351","20.67","-103.42"],["3352","40.66","35.84"],["3353","35.28","72.00"],["3354","24.16","47.32"],["3355","30.19","35.72"],["3356","46.23","7.36"],["3357","40.35","-74.06"],["3358","46.56","4.91"],["3359","1.46","110.49"],["3360","38.05","23.81"],["3361","43.17","124.35"],["3362","45.67","15.65"],["3363","35.24","-3.93"],["3364","26.36","43.98"],["3365","24.92","86.22"],["3366","45.77","-1.14"],["3367","-1.25","-78.62"],["3368","47.80","16.23"],["3369","47.72","-3.00"],["3370","8.14","4.72"],["3371","45.83","3.08"],["3372","30.96","76.79"],["3373","20.84","106.69"],["3374","35.30","-1.14"],["3375","27.57","110.00"],["3376","43.15","6.07"],["3377","16.31","80.44"],["3378","53.20","5.80"],["3379","2.93","101.70"],["3380","20.59","-100.39"],["3381","45.45","9.09"],["3382","47.68","-122.21"],["3383","42.56","-70.88"],["3384","51.16","4.99"],["3385","51.98","5.80"],["3386","51.06","3.10"],["3387","42.59","-82.92"],["3388","21.48","109.12"],["3389","3.21","101.56"],["3390","33.24","131.61"],["3391","53.64","11.40"],["3392","-12.78","45.23"],["3393","51.13","-0.01"],["3394","28.60","-81.34"],["3395","37.70","-92.47"],["3396","30.69","76.86"],["3397","18.61","84.23"],["3398","52.15","4.53"],["3399","49.95","11.57"],["3400","62.04","129.74"],["3401","50.48","7.67"],["3402","34.36","73.48"],["3403","-26.25","-69.63"],["3404","40.46","-3.48"],["3405","33.14","-117.17"],["3406","45.89","-0.36"],["3407","-37.80","144.97"],["3408","46.47","6.85"],["3409","40.89","-73.97"],["3410","-25.39","32.80"],["3411","9.93","-84.05"],["3412","21.66","110.93"],["3413","23.52","87.31"],["3414","6.99","-73.05"],["3415","33.87","-5.54"],["3416","26.35","86.07"],["3417","51.42","5.41"],["3418","51.63","-0.75"],["3419","51.89","11.05"],["3420","39.79","-85.77"],["3421","41.52","0.59"],["3422","33.89","48.77"],["3423","-46.29","-71.94"],["3424","49.82","18.26"],["3425","39.06","-108.55"],["3426","35.38","-77.99"],["3427","51.12","9.12"],["3428","41.69","-72.55"],["3429","38.50","43.37"],["3430","29.12","110.48"],["3431","38.78","-90.79"],["3432","54.66","-2.75"],["3433","-7.97","110.60"],["3434","52.26","6.79"],["3435","47.17","8.52"],["3436","39.10","-76.85"],["3437","6.94","3.92"],["3438","38.90","-77.27"],["3439","35.73","139.72"],["3440","43.39","6.31"],["3441","30.35","56.00"],["3442","-27.23","-52.03"],["3443","54.66","-1.68"],["3444","37.21","50.00"],["3445","24.75","90.42"],["3446","50.90","14.80"],["3447","56.66","16.36"],["3448","34.47","-81.88"],["3449","7.61","5.24"],["3450","36.54","32.00"],["3451","39.00","-76.97"],["3452","39.92","-105.09"],["3453","45.33","14.44"],["3454","43.61","1.34"],["3455","40.95","-73.03"],["3456","35.83","128.74"],["3457","35.89","139.79"],["3458","39.02","-77.21"],["3459","40.19","-85.39"],["3460","10.24","77.49"],["3461","49.32","12.11"],["3462","24.20","82.66"],["3463","60.80","10.69"],["3464","37.95","-91.77"],["3465","35.11","140.10"],["3466","47.89","13.12"],["3467","40.73","-73.25"],["3468","42.48","-83.48"],["3469","37.97","34.68"],["3470","10.94","78.76"],["3471","44.34","-66.11"],["3472","53.25","10.41"],["3473","53.36","-6.37"],["3474","41.37","2.06"],["3475","48.03","12.56"],["3476","37.76","140.47"],["3477","41.14","24.89"],["3478","42.22","-121.78"],["3479","47.27","1.37"],["3480","-25.34","-57.50"],["3481","55.67","12.40"],["3482","52.27","-9.70"],["3483","34.77","-92.27"],["3484","5.11","6.12"],["3485","6.17","-75.58"],["3486","22.19","88.19"],["3487","66.50","25.73"],["3488","39.98","-75.31"],["3489","39.70","141.15"],["3490","42.58","-87.82"],["3491","51.90","-0.20"],["3492","10.65","-61.45"],["3493","24.49","86.69"],["3494","40.46","-80.60"],["3495","40.09","9.16"],["3496","11.86","38.02"],["3497","2.29","111.83"],["3498","43.81","11.29"],["3499","24.29","116.12"],["3500","2.80","101.80"],["3501","37.39","126.96"],["3502","49.49","9.77"],["3503","6.05","102.39"],["3504","43.94","10.30"],["3505","39.72","140.10"],["3506","37.68","-121.77"],["3507","48.84","2.48"],["3508","15.40","74.01"],["3509","47.31","11.07"],["3510","40.38","-82.40"],["3511","45.48","-75.70"],["3512","51.82","-0.36"],["3513","43.25","0.13"],["3514","37.31","13.59"],["3515","32.81","-96.95"],["3516","44.87","10.06"],["3517","29.14","76.69"],["3518","45.82","4.90"],["3519","26.16","32.72"],["3520","51.39","1.39"],["3521","5.33","103.14"],["3522","9.45","76.54"],["3523","-31.98","115.96"],["3524","50.34","7.71"],["3525","42.24","-87.97"],["3526","19.51","-98.88"],["3527","44.01","-97.11"],["3528","-33.43","-70.61"],["3529","50.82","4.43"],["3530","18.44","79.13"],["3531","37.58","43.74"],["3532","32.34","-90.32"],["3533","26.44","91.44"],["3534","50.68","-2.23"],["3535","51.39","-0.42"],["3536","33.96","-83.99"],["3537","20.00","73.79"],["3538","38.97","-76.86"],["3539","34.97","136.62"],["3540","32.45","-99.73"],["3541","-12.52","-40.31"],["3542","39.54","-104.90"],["3543","41.28","-72.81"],["3544","26.65","92.79"],["3545","39.04","-94.62"],["3546","49.87","2.25"],["3547","51.43","-0.55"],["3548","53.43","-2.80"],["3549","11.62","92.73"],["3550","41.81","-72.25"],["3551","52.09","5.23"],["3552","32.48","-91.75"],["3553","52.92","12.80"],["3554","32.93","-96.46"],["3555","36.62","101.78"],["3556","42.73","-84.42"],["3557","46.04","8.96"],["3558","33.95","-84.55"],["3559","45.94","13.62"],["3560","24.51","117.65"],["3561","14.97","102.08"],["3562","54.16","10.43"],["3563","40.83","-74.21"],["3564","6.66","100.32"],["3565","51.21","3.22"],["3566","4.60","101.09"],["3567","45.78","-108.50"],["3568","37.34","46.06"],["3569","44.31","-96.80"],["3570","-36.55","145.96"],["3571","-11.44","34.01"],["3572","55.34","86.06"],["3573","41.39","-72.86"],["3574","54.52","18.53"],["3575","38.07","-120.54"],["3576","36.96","46.11"],["3577","40.46","39.48"],["3578","32.35","-90.88"],["3579","7.95","4.79"],["3580","58.75","17.01"],["3581","48.88","12.58"],["3582","21.89","-102.29"],["3583","55.93","23.31"],["3584","32.67","-16.92"],["3585","35.49","-80.62"],["3586","46.38","6.23"],["3587","38.76","30.54"],["3588","41.28","-73.03"],["3589","34.14","-118.66"],["3590","7.80","5.33"],["3591","-41.47","-72.94"],["3592","42.50","-83.31"],["3593","44.06","-121.32"],["3594","48.07","11.62"],["3595","41.42","-4.91"],["3596","53.68","-7.49"],["3597","18.74","73.67"],["3598","38.18","-83.43"],["3599","45.69","4.79"],["3600","46.06","-118.34"],["3601","37.70","-5.28"],["3602","2.69","101.75"],["3603","27.98","76.40"],["3604","42.26","-71.46"],["3605","51.57","-0.78"],["3606","-25.09","-50.15"],["3607","48.86","2.53"],["3608","34.41","115.66"],["3609","23.08","70.13"],["3610","65.58","22.16"],["3611","51.93","4.58"],["3612","-31.98","115.82"],["3613","48.00","11.34"],["3614","11.70","9.33"],["3615","35.22","128.68"],["3616","43.86","-79.34"],["3617","44.75","7.95"],["3618","35.29","-2.94"],["3619","33.91","35.58"],["3620","38.84","-97.61"],["3621","30.66","117.49"],["3622","40.84","31.16"],["3623","30.09","-95.99"],["3624","39.64","-86.86"],["3625","10.67","122.20"],["3626","55.47","9.08"],["3627","51.16","4.15"],["3628","36.79","-108.69"],["3629","43.66","10.64"],["3630","37.98","-0.68"],["3631","-23.42","-51.43"],["3632","10.28","11.17"],["3633","40.07","-74.92"],["3634","40.97","14.21"],["3635","13.07","74.99"],["3636","43.65","122.24"],["3637","48.81","7.79"],["3638","26.10","87.95"],["3639","35.47","133.05"],["3640","44.86","11.65"],["3641","-11.12","-77.61"],["3642","40.77","-74.15"],["3643","37.40","-1.94"],["3644","10.59","14.32"],["3645","44.48","11.28"],["3646","33.98","35.63"],["3647","40.46","17.25"],["3648","56.86","35.92"],["3649","40.27","-74.54"],["3650","53.60","7.20"],["3651","41.01","-73.91"],["3652","43.23","0.08"],["3653","4.39","18.56"],["3654","43.60","-84.77"],["3655","43.88","-69.63"],["3656","38.54","-0.12"],["3657","38.76","-9.22"],["3658","34.56","-111.85"],["3659","51.35","-2.32"],["3660","28.38","36.57"],["3661","-13.86","-40.08"],["3662","37.08","15.29"],["3663","41.00","-75.18"],["3664","26.33","127.81"],["3665","40.93","-73.10"],["3666","-6.18","106.83"],["3667","41.91","-88.13"],["3668","35.86","14.49"],["3669","37.37","-122.04"],["3670","41.15","-74.05"],["3671","32.96","-117.04"],["3672","57.01","40.98"],["3673","56.02","-3.84"],["3674","42.75","13.97"],["3675","44.35","2.58"],["3676","42.02","-71.13"],["3677","45.38","11.77"],["3678","-31.61","-60.70"],["3679","45.47","7.88"],["3680","36.34","139.45"],["3681","38.97","-77.08"],["3682","-41.30","173.24"],["3683","45.65","9.14"],["3684","43.13","-70.93"],["3685","45.61","6.85"],["3686","23.01","82.05"],["3687","47.86","12.35"],["3688","40.63","-80.05"],["3689","44.01","20.91"],["3690","-33.90","151.15"],["3691","52.69","6.19"],["3692","49.47","8.61"],["3693","35.05","-85.31"],["3694","28.32","-81.54"],["3695","40.33","-3.77"],["3696","44.31","-78.32"],["3697","49.04","2.11"],["3698","40.04","-75.35"],["3699","34.37","-89.54"],["3700","-42.76","-65.03"],["3701","48.09","11.47"],["3702","32.54","-94.37"],["3703","53.20","50.16"],["3704","31.60","130.56"],["3705","39.63","-0.60"],["3706","37.24","-121.96"],["3707","39.91","-75.37"],["3708","-14.86","-66.75"],["3709","-7.23","-35.88"],["3710","29.95","78.16"],["3711","19.46","-99.25"],["3712","47.95","8.50"],["3713","34.28","-119.29"],["3714","49.55","5.93"],["3715","36.22","-81.67"],["3716","36.63","114.54"],["3717","45.37","11.92"],["3718","43.59","-110.83"],["3719","51.57","-1.30"],["3720","-31.54","-68.54"],["3721","36.74","-4.10"],["3722","52.15","9.96"],["3723","8.23","124.25"],["3724","8.89","76.61"],["3725","-27.50","153.00"],["3726","35.37","-119.02"],["3727","43.95","4.81"],["3728","59.37","16.51"],["3729","23.69","86.97"],["3730","-27.56","152.28"],["3731","46.48","6.06"],["3732","39.77","-105.08"],["3733","40.02","-75.32"],["3734","42.32","-71.64"],["3735","26.81","87.28"],["3736","52.57","1.12"],["3737","29.45","60.88"],["3738","35.59","-80.81"],["3739","36.97","-86.48"],["3740","29.29","-81.06"],["3741","36.33","-119.29"],["3742","55.01","-1.45"],["3743","37.78","14.60"],["3744","44.16","4.62"],["3745","32.60","44.02"],["3746","46.69","7.68"],["3747","43.56","-5.92"],["3748","45.94","4.77"],["3749","12.51","-70.01"],["3750","-42.91","-71.31"],["3751","39.72","2.91"],["3752","51.24","-1.66"],["3753","41.09","-74.14"],["3754","47.92","7.70"],["3755","34.78","135.47"],["3756","45.58","84.89"],["3757","40.26","-74.79"],["3758","-20.27","57.48"],["3759","58.22","68.28"],["3760","46.09","-64.78"],["3761","46.08","10.35"],["3762","1.08","34.18"],["3763","12.19","77.03"],["3764","48.26","11.43"],["3765","-7.58","110.82"],["3766","15.32","38.93"],["3767","7.63","4.19"],["3768","26.27","-80.27"],["3769","36.22","57.67"],["3770","-1.87","11.05"],["3771","51.66","7.11"],["3772","42.66","21.17"],["3773","38.75","-121.29"],["3774","31.97","44.90"],["3775","0.05","37.65"],["3776","45.40","8.92"],["3777","35.71","139.41"],["3778","37.74","115.67"],["3779","36.70","10.49"],["3780","40.76","-82.52"],["3781","44.54","18.67"],["3782","47.28","7.37"],["3783","43.82","7.78"],["3784","41.96","-70.67"],["3785","35.28","-93.13"],["3786","56.14","8.97"],["3787","41.01","-91.96"],["3788","23.54","91.49"],["3789","48.79","2.33"],["3790","40.80","-81.38"],["3791","35.03","138.93"],["3792","-33.81","150.99"],["3793","51.22","7.63"],["3794","40.21","-74.68"],["3795","47.01","28.86"],["3796","42.48","-71.15"],["3797","60.09","24.39"],["3798","45.55","13.73"],["3799","40.38","-111.80"],["3800","40.65","-80.08"],["3801","47.77","8.87"],["3802","38.38","-4.85"],["3803","-8.14","36.68"],["3804","33.88","130.88"],["3805","47.93","-97.03"],["3806","31.86","70.90"],["3807","7.56","79.80"],["3808","50.72","3.16"],["3809","44.88","-0.61"],["3810","35.65","-97.48"],["3811","33.65","-97.38"],["3812","28.38","45.96"],["3813","39.20","-85.92"],["3814","37.94","-122.35"],["3815","38.20","-1.40"],["3816","37.34","126.97"],["3817","53.33","-2.23"],["3818","27.47","89.63"],["3819","23.24","69.67"],["3820","41.18","-8.70"],["3821","44.87","13.85"],["3822","41.60","-72.88"],["3823","33.56","-81.72"],["3824","47.72","-116.95"],["3825","45.24","11.75"],["3826","47.73","10.32"],["3827","11.16","-4.31"],["3828","44.08","10.10"],["3829","29.26","48.06"],["3830","35.68","139.56"],["3831","55.92","21.07"],["3832","52.39","7.29"],["3833","12.05","24.88"],["3834","-12.07","-77.02"],["3835","28.31","76.71"],["3836","45.54","8.05"],["3837","40.79","-73.42"],["3838","-21.25","-45.00"],["3839","48.71","6.18"],["3840","12.13","15.06"],["3841","45.04","3.88"],["3842","48.74","2.18"],["3843","49.41","1.09"],["3844","64.18","-51.69"],["3845","52.00","5.19"],["3846","40.64","15.81"],["3847","40.90","9.10"],["3848","41.15","15.09"],["3849","38.83","-76.61"],["3850","41.12","-8.61"],["3851","52.11","8.16"],["3852","18.52","73.72"],["3853","43.30","-91.79"],["3854","-33.43","151.34"],["3855","46.83","12.76"],["3856","51.21","-0.80"],["3857","41.01","-8.64"],["3858","32.76","35.05"],["3859","36.39","139.28"],["3860","61.05","28.19"],["3861","49.62","6.07"],["3862","41.81","-6.76"],["3863","52.19","4.47"],["3864","36.72","-4.42"],["3865","40.32","9.33"],["3866","-29.16","-51.18"],["3867","28.77","-81.37"],["3868","51.56","5.09"],["3869","33.42","-111.83"],["3870","41.51","-83.15"],["3871","-23.69","-46.56"],["3872","39.45","-76.49"],["3873","45.75","5.16"],["3874","44.52","-89.57"],["3875","41.02","-74.21"],["3876","37.27","-76.02"],["3877","29.10","58.34"],["3878","53.99","-1.54"],["3879","16.99","73.31"],["3880","46.21","6.11"],["3881","39.82","16.20"],["3882","52.41","-1.78"],["3883","50.85","0.57"],["3884","34.05","72.42"],["3885","40.42","-104.71"],["3886","-21.22","-43.77"],["3887","-26.11","28.06"],["3888","46.16","13.01"],["3889","50.03","8.69"],["3890","53.35","83.78"],["3891","16.83","75.71"],["3892","47.05","21.92"],["3893","11.86","-15.58"],["3894","41.85","-88.31"],["3895","33.22","-117.03"],["3896","39.73","141.08"],["3897","46.78","-56.18"],["3898","32.55","-83.89"],["3899","41.06","-74.02"],["3900","41.11","20.09"],["3901","-9.39","-40.50"],["3902","39.55","-104.97"],["3903","29.71","118.34"],["3904","42.76","-1.63"],["3905","-24.78","-65.42"],["3906","40.73","31.61"],["3907","35.65","-78.83"],["3908","-37.56","143.85"],["3909","44.60","-75.17"],["3910","45.62","9.21"],["3911","51.66","-0.27"],["3912","47.08","2.40"],["3913","47.55","7.79"],["3914","53.65","-2.63"],["3915","27.66","85.28"],["3916","39.42","-0.79"],["3917","-26.08","-53.05"],["3918","52.30","8.89"],["3919","31.85","-102.37"],["3920","43.68","-70.37"],["3921","25.95","83.56"],["3922","-21.13","-48.98"],["3923","14.48","-90.62"],["3924","26.78","79.03"],["3925","48.31","16.32"],["3926","24.25","89.92"],["3927","32.10","74.88"],["3928","42.69","-83.23"],["3929","50.00","14.56"],["3930","33.96","118.28"],["3931","6.05","80.22"],["3932","41.12","-73.41"],["3933","43.06","-2.49"],["3934","48.34","8.03"],["3935","47.35","8.44"],["3936","21.49","86.91"],["3937","44.62","10.60"],["3938","39.93","-74.89"],["3939","53.28","-7.49"],["3940","42.27","-71.62"],["3941","-0.74","-90.32"],["3942","51.66","-3.84"],["3943","36.60","-4.52"],["3944","43.97","-70.80"],["3945","39.82","34.81"],["3946","42.66","-71.14"],["3947","39.25","-87.38"],["3948","30.50","-90.46"],["3949","33.32","130.51"],["3950","22.16","-100.99"],["3951","42.10","1.84"],["3952","35.42","119.53"],["3953","51.94","15.51"],["3954","38.05","23.87"],["3955","50.56","9.68"],["3956","51.34","-0.74"],["3957","35.27","136.26"],["3958","-29.75","-51.15"],["3959","35.47","44.38"],["3960","45.86","3.55"],["3961","50.95","13.35"],["3962","54.28","-0.40"],["3963","38.73","139.83"],["3964","25.82","-108.22"],["3965","32.63","51.37"],["3966","35.67","139.77"],["3967","45.53","-123.12"],["3968","24.02","38.19"],["3969","49.26","6.86"],["3970","45.74","11.38"],["3971","49.88","12.33"],["3972","51.78","8.82"],["3973","-28.67","-49.37"],["3974","25.21","75.86"],["3975","20.70","77.01"],["3976","41.98","-91.67"],["3977","51.09","6.59"],["3978","46.32","-0.46"],["3979","40.19","-75.45"],["3980","39.81","-84.05"],["3981","44.33","-74.13"],["3982","50.91","5.41"],["3983","35.98","-114.83"],["3984","22.54","75.91"],["3985","48.89","8.69"],["3986","43.53","13.25"],["3987","-35.11","147.36"],["3988","51.91","-8.26"],["3989","-29.76","-57.09"],["3990","31.71","-98.99"],["3991","11.24","-74.21"],["3992","34.43","132.74"],["3993","43.15","6.34"],["3994","35.79","139.53"],["3995","32.43","34.92"],["3996","33.07","107.02"],["3997","48.84","-1.60"],["3998","-16.81","27.00"],["3999","49.05","-122.30"],["4000","33.78","-116.47"],["4001","37.97","-87.57"],["4002","38.45","-78.87"],["4003","37.32","-4.01"],["4004","45.03","9.28"],["4005","30.21","74.95"],["4006","37.24","-5.10"],["4007","-25.86","28.09"],["4008","51.68","-0.61"],["4009","51.21","5.95"],["4010","40.83","-74.42"],["4011","30.46","106.63"],["4012","17.07","-96.73"],["4013","50.23","8.62"],["4014","-26.00","28.13"],["4015","29.22","79.51"],["4016","-27.10","-52.62"],["4017","49.15","0.23"],["4018","41.19","0.78"],["4019","26.46","-80.07"],["4020","26.80","84.52"],["4021","20.68","-101.35"],["4022","7.47","5.74"],["4023","45.00","11.11"],["4024","45.70","9.71"],["4025","-28.39","-53.92"],["4026","39.61","-8.40"],["4027","47.35","8.72"],["4028","40.55","-75.61"],["4029","26.75","94.20"],["4030","28.24","76.81"],["4031","57.63","39.88"],["4032","51.32","4.94"],["4033","30.83","-90.67"],["4034","32.79","-115.56"],["4035","40.74","14.61"],["4036","53.36","-113.72"],["4037","27.47","94.91"],["4038","-3.59","-79.66"],["4039","40.67","16.60"],["4040","52.81","9.96"],["4041","49.62","11.33"],["4042","49.09","6.27"],["4043","35.89","14.49"],["4044","44.95","34.10"],["4045","54.10","10.82"],["4046","47.78","9.61"],["4047","50.45","4.19"],["4048","40.34","-76.41"],["4049","44.04","0.84"],["4050","42.86","-112.45"],["4051","20.02","41.47"],["4052","51.91","-2.58"],["4053","50.76","-1.30"],["4054","48.53","-2.77"],["4055","35.50","-80.85"],["4056","45.81","9.85"],["4057","55.48","8.46"],["4058","40.19","44.52"],["4059","38.61","27.43"],["4060","-5.18","-37.35"],["4061","29.32","48.03"],["4062","37.40","140.36"],["4063","12.79","45.02"],["4064","44.55","2.67"],["4065","38.24","-1.42"],["4066","42.52","-70.90"],["4067","44.15","-72.66"],["4068","39.37","-76.97"],["4069","33.91","73.39"],["4070","35.10","118.36"],["4071","-12.08","-77.09"],["4072","55.89","37.44"],["4073","50.60","3.09"],["4074","36.83","-81.51"],["4075","41.14","-100.76"],["4076","40.73","-73.63"],["4077","49.47","1.11"],["4078","47.40","8.45"],["4079","43.22","76.85"],["4080","32.47","34.97"],["4081","37.72","-89.86"],["4082","26.40","90.27"],["4083","-7.37","109.90"],["4084","47.28","8.92"],["4085","3.24","101.68"],["4086","50.46","-3.53"],["4087","50.32","18.79"],["4088","41.36","-96.16"],["4089","-26.25","27.85"],["4090","60.17","10.26"],["4091","9.45","77.80"],["4092","45.73","7.31"],["4093","48.39","-122.50"],["4094","9.60","41.85"],["4095","30.31","-95.46"],["4096","48.78","2.27"],["4097","54.67","18.22"],["4098","51.30","-0.33"],["4099","18.66","75.41"],["4100","44.64","-0.32"],["4101","41.35","-72.08"],["4102","50.30","5.10"],["4103","-34.42","-58.74"],["4104","64.55","40.55"],["4105","49.00","8.53"],["4106","47.85","16.53"],["4107","35.44","139.36"],["4108","53.32","-6.27"],["4109","38.72","-9.24"],["4110","51.32","4.85"],["4111","33.31","-111.84"],["4112","46.05","-73.46"],["4113","34.17","-97.14"],["4114","51.80","11.33"],["4115","45.78","12.04"],["4116","39.52","-84.40"],["4117","-33.94","150.98"],["4118","23.74","-99.14"],["4119","16.35","81.05"],["4120","-34.46","-58.55"],["4121","-22.75","-43.70"],["4122","52.30","-1.08"],["4123","24.43","98.58"],["4124","53.61","-2.16"],["4125","35.01","135.96"],["4126","9.26","76.79"],["4127","-15.38","35.34"],["4128","37.99","23.68"],["4129","44.61","10.86"],["4130","50.56","8.51"],["4131","54.95","-1.60"],["4132","35.71","139.80"],["4133","38.95","-0.40"],["4134","29.55","103.77"],["4135","48.34","7.88"],["4136","2.93","-75.28"],["4137","7.69","-5.04"],["4138","-0.76","34.60"],["4139","29.32","47.84"],["4140","45.37","-63.29"],["4141","10.96","78.08"],["4142","40.75","14.65"],["4143","37.74","-25.67"],["4144","53.49","-112.05"],["4145","17.98","102.63"],["4146","3.71","103.10"],["4147","50.17","-5.11"],["4148","51.12","-1.70"],["4149","51.39","-0.51"],["4150","41.64","13.35"],["4151","32.03","35.73"],["4152","42.55","-71.61"],["4153","46.72","-122.95"],["4154","37.39","-122.11"],["4155","44.64","11.42"],["4156","-6.78","-43.02"],["4157","24.81","113.60"],["4158","-8.13","-35.30"],["4159","41.81","-80.95"],["4160","42.45","-73.25"],["4161","-3.46","114.81"],["4162","14.76","121.04"],["4163","20.25","86.17"],["4164","40.69","-75.22"],["4165","-28.55","28.82"],["4166","-22.29","-42.53"],["4167","-2.91","-41.77"],["4168","33.49","-117.15"],["4169","46.61","13.85"],["4170","32.33","35.75"],["4171","-43.92","171.72"],["4172","45.72","3.02"],["4173","48.15","-1.68"],["4174","10.02","76.34"],["4175","50.38","4.38"],["4176","50.85","-1.19"],["4177","32.95","-96.73"],["4178","49.17","-123.13"],["4179","49.84","24.03"],["4180","39.48","-86.05"],["4181","49.35","8.15"],["4182","31.97","34.79"],["4183","52.94","-9.29"],["4184","47.35","11.71"],["4185","45.22","11.61"],["4186","50.93","4.46"],["4187","40.31","-79.82"],["4188","55.90","-4.40"],["4189","-32.96","-60.69"],["4190","36.54","140.41"],["4191","44.10","-70.21"],["4192","22.79","39.02"],["4193","41.25","-75.88"],["4194","50.86","6.09"],["4195","36.59","-79.40"],["4196","4.05","9.77"],["4197","52.08","0.44"],["4198","44.47","-73.17"],["4199","48.76","2.33"],["4200","33.84","-79.05"],["4201","47.24","9.60"],["4202","53.29","-3.07"],["4203","34.73","135.41"],["4204","34.93","-88.52"],["4205","40.25","-74.85"],["4206","52.21","5.29"],["4207","-37.80","145.00"],["4208","36.31","-78.59"],["4209","38.29","-85.82"],["4210","11.05","76.07"],["4211","50.67","17.92"],["4212","43.57","12.14"],["4213","9.25","76.54"],["4214","44.06","1.95"],["4215","29.34","48.02"],["4216","52.48","-2.12"],["4217","52.64","16.81"],["4218","49.36","6.17"],["4219","33.74","-117.82"],["4220","36.69","-79.87"],["4221","4.85","100.74"],["4222","39.85","-74.89"],["4223","51.66","8.14"],["4224","53.55","-2.63"],["4225","45.70","9.12"],["4226","35.01","136.96"],["4227","36.59","-94.77"],["4228","51.41","-0.37"],["4229","24.35","56.71"],["4230","40.04","-75.37"],["4231","47.54","7.73"],["4232","34.81","135.77"],["4233","60.09","5.23"],["4234","26.05","-98.30"],["4235","-36.76","144.28"],["4236","-13.85","-171.75"],["4237","28.04","-81.95"],["4238","40.96","-76.88"],["4239","49.18","-2.10"],["4240","35.93","139.49"],["4241","-6.45","38.90"],["4242","51.79","6.13"],["4243","6.85","79.92"],["4244","15.70","100.12"],["4245","36.96","-120.06"],["4246","35.28","59.22"],["4247","45.08","-93.15"],["4248","63.18","14.64"],["4249","14.28","39.46"],["4250","43.49","-1.47"],["4251","45.59","-73.44"],["4252","42.48","-76.48"],["4253","51.32","-0.56"],["4254","-33.41","-70.63"],["4255","41.95","-86.34"],["4256","18.63","73.80"],["4257","36.45","10.74"],["4258","52.03","0.04"],["4259","51.86","-4.31"],["4260","36.78","126.45"],["4261","24.35","102.53"],["4262","51.60","-0.48"],["4263","-19.47","29.81"],["4264","48.85","10.49"],["4265","2.59","102.09"],["4266","-8.91","33.46"],["4267","38.59","-90.36"],["4268","59.50","13.32"],["4269","52.57","-1.82"],["4270","35.50","134.24"],["4271","41.71","-72.66"],["4272","19.61","-99.04"],["4273","32.38","-86.31"],["4274","-22.73","-45.12"],["4275","33.96","116.80"],["4276","37.39","46.25"],["4277","50.00","8.02"],["4278","33.18","131.43"],["4279","35.38","136.28"],["4280","37.07","14.24"],["4281","-14.08","-75.73"],["4282","41.70","-71.42"],["4283","39.51","-76.16"],["4284","45.52","11.33"],["4285","40.51","-74.27"],["4286","56.31","9.17"],["4287","40.14","29.98"],["4288","-27.61","-48.64"],["4289","41.47","-81.54"],["4290","33.21","35.57"],["4291","53.36","-6.45"],["4292","41.18","-8.57"],["4293","35.53","44.82"],["4294","44.63","8.50"],["4295","23.80","86.43"],["4296","36.99","127.11"],["4297","51.84","4.98"],["4298","40.57","-74.61"],["4299","53.78","-0.41"],["4300","12.16","6.67"],["4301","50.87","-0.09"],["4302","34.14","-118.00"],["4303","39.12","-77.56"],["4304","40.52","-98.06"],["4305","39.02","-94.63"],["4306","48.96","2.38"],["4307","-9.06","-78.59"],["4308","33.99","-96.40"],["4309","32.24","-7.95"],["4310","41.05","-74.02"],["4311","48.07","11.25"],["4312","51.70","7.47"],["4313","52.27","6.16"],["4314","-23.54","-46.22"],["4315","40.77","14.46"],["4316","45.30","10.48"],["4317","41.37","-81.85"],["4318","41.79","-89.70"],["4319","43.48","-1.56"],["4320","29.28","76.85"],["4321","39.27","-76.80"],["4322","30.36","-103.66"],["4323","43.61","-5.79"],["4324","34.02","-117.96"],["4325","28.31","109.74"],["4326","40.30","-73.99"],["4327","4.40","113.99"],["4328","26.42","111.61"],["4329","25.89","-80.19"],["4330","51.12","6.95"],["4331","30.85","34.78"],["4332","21.84","-78.76"],["4333","26.08","-80.25"],["4334","9.55","-13.29"],["4335","39.92","-75.07"],["4336","31.83","-81.61"],["4337","22.65","110.18"],["4338","48.81","2.24"],["4339","53.35","-6.49"],["4340","52.38","20.92"],["4341","53.65","-6.70"],["4342","33.47","-86.80"],["4343","51.75","5.63"],["4344","40.55","34.95"],["4345","45.78","12.99"],["4346","37.76","-121.95"],["4347","36.58","10.86"],["4348","52.12","8.68"],["4349","10.64","-71.61"],["4350","32.80","35.53"],["4351","51.52","-0.72"],["4352","34.77","72.36"],["4353","44.06","-79.46"],["4354","17.61","78.08"],["4355","40.17","-105.10"],["4356","42.00","15.00"],["4357","32.08","-81.09"],["4358","34.54","-112.47"],["4359","37.68","-95.46"],["4360","32.83","-79.83"],["4361","42.50","24.19"],["4362","34.25","-6.59"],["4363","44.85","-93.47"],["4364","3.12","35.60"],["4365","42.68","14.02"],["4366","45.06","12.06"],["4367","33.75","72.84"],["4368","40.78","-73.47"],["4369","28.93","-82.00"],["4370","50.66","14.05"],["4371","45.18","9.66"],["4372","47.21","7.79"],["4373","34.69","135.70"],["4374","50.37","3.08"],["4375","35.25","136.78"],["4376","13.14","78.13"],["4377","40.64","-8.70"],["4378","-33.99","22.45"],["4379","25.90","-97.50"],["4380","51.56","21.87"],["4381","27.52","-82.57"],["4382","35.72","4.52"],["4383","-25.52","-54.59"],["4384","-34.13","150.74"],["4385","47.57","10.70"],["4386","55.95","37.50"],["4387","21.13","-101.69"],["4388","41.67","-93.71"],["4389","39.69","-84.17"],["4390","27.91","-82.79"],["4391","42.89","12.36"],["4392","42.62","-73.83"],["4393","43.72","10.95"],["4394","48.17","11.24"],["4395","41.56","-72.65"],["4396","-27.37","-70.33"],["4397","50.88","4.32"],["4398","9.43","-13.09"],["4399","44.16","28.63"],["4400","44.67","-63.57"],["4401","34.43","35.84"],["4402","50.96","3.60"],["4403","47.18","-1.62"],["4404","38.34","-122.70"],["4405","51.20","0.28"],["4406","52.08","8.76"],["4407","44.99","7.47"],["4408","51.59","9.93"],["4409","30.25","-85.65"],["4410","54.30","8.65"],["4411","41.66","-70.82"],["4412","43.48","1.39"],["4413","37.62","48.53"],["4414","56.86","53.23"],["4415","43.48","-1.51"],["4416","48.75","2.51"],["4417","36.53","-6.18"],["4418","36.49","-79.77"],["4419","27.64","-80.40"],["4420","35.23","115.48"],["4421","3.34","101.25"],["4422","46.31","-124.04"],["4423","5.02","-73.99"],["4424","41.14","-81.86"],["4425","6.04","7.09"],["4426","7.01","39.98"],["4427","48.62","2.12"],["4428","7.84","98.35"],["4429","-26.74","153.12"],["4430","53.32","-3.49"],["4431","-33.28","149.10"],["4432","46.15","-0.40"],["4433","40.93","15.18"],["4434","10.94","76.93"],["4435","34.90","33.62"],["4436","30.40","-88.89"],["4437","40.01","-75.29"],["4438","-53.16","-70.92"],["4439","45.53","9.04"],["4440","21.49","83.88"],["4441","39.32","-76.73"],["4442","35.43","133.33"],["4443","-22.49","-44.08"],["4444","42.87","-76.99"],["4445","43.84","-79.09"],["4446","31.67","34.57"],["4447","49.98","19.83"],["4448","51.84","10.78"],["4449","6.37","2.39"],["4450","14.64","-90.68"],["4451","46.60","-120.51"],["4452","9.35","2.61"],["4453","44.81","-91.50"],["4454","43.34","3.22"],["4455","60.72","-135.06"],["4456","-37.49","140.01"],["4457","13.76","121.06"],["4458","34.71","33.02"],["4459","41.89","-70.91"],["4460","35.73","-78.85"],["4461","-8.67","115.21"],["4462","30.97","70.94"],["4463","47.41","11.83"],["4464","31.53","-92.41"],["4465","12.19","75.80"],["4466","57.65","12.02"],["4467","52.49","4.59"],["4468","41.27","-73.78"],["4469","52.47","-8.43"],["4470","3.89","-76.31"],["4471","-23.68","-46.62"],["4472","40.51","-74.86"],["4473","37.03","-76.35"],["4474","24.74","80.87"],["4475","52.00","-0.99"],["4476","-33.41","-70.55"],["4477","51.67","16.54"],["4478","53.38","-2.34"],["4479","-3.26","-79.96"],["4480","-34.60","-58.37"],["4481","49.07","-0.69"],["4482","-34.98","-71.25"],["4483","-33.42","149.58"],["4484","25.93","14.42"],["4485","29.33","75.63"],["4486","23.22","72.70"],["4487","45.78","12.84"],["4488","42.25","-77.79"],["4489","47.27","11.24"],["4490","41.45","-71.52"],["4491","10.07","-69.35"],["4492","27.05","79.91"],["4493","43.60","39.73"],["4494","48.77","2.49"],["4495","35.45","2.91"],["4496","41.45","-71.45"],["4497","6.83","-5.29"],["4498","46.59","-112.04"],["4499","34.81","117.32"],["4500","52.51","14.13"],["4501","-28.30","-54.27"],["4502","40.73","-73.60"],["4503","45.80","9.15"],["4504","36.61","-88.31"],["4505","51.47","-0.33"],["4506","25.74","89.28"],["4507","49.32","8.44"],["4508","47.64","9.17"],["4509","39.36","16.21"],["4510","45.05","-93.16"],["4511","43.81","-91.25"],["4512","45.52","9.76"],["4513","-25.59","-49.41"],["4514","41.20","-73.73"],["4515","41.61","-93.77"],["4516","-25.61","27.80"],["4517","47.23","16.62"],["4518","2.19","102.25"],["4519","33.95","131.25"],["4520","-28.78","32.04"],["4521","48.86","8.21"],["4522","17.66","75.91"],["4523","61.78","34.36"],["4524","49.66","8.01"],["4525","35.32","-82.46"],["4526","46.11","8.29"],["4527","49.98","8.06"],["4528","33.87","-118.00"],["4529","38.88","-76.83"],["4530","26.58","107.98"],["4531","40.75","14.45"],["4532","53.44","6.84"],["4533","46.05","13.19"],["4534","16.45","80.60"],["4535","55.94","-3.41"],["4536","7.87","80.65"],["4537","29.35","79.55"],["4538","44.23","2.04"],["4539","43.63","3.90"],["4540","37.38","-122.24"],["4541","50.52","2.68"],["4542","-12.98","-44.05"],["4543","51.57","4.83"],["4544","43.16","13.72"],["4545","28.27","76.14"],["4546","37.68","12.79"],["4547","44.04","10.14"],["4548","45.62","-61.99"],["4549","36.40","-97.88"],["4550","37.99","-84.18"],["4551","45.97","-89.89"],["4552","56.64","9.80"],["4553","42.69","2.89"],["4554","54.83","11.14"],["4555","54.94","83.18"],["4556","43.25","13.01"],["4557","52.83","8.31"],["4558","52.26","-2.15"],["4559","51.83","-3.02"],["4560","40.60","33.62"],["4561","24.14","82.64"],["4562","36.08","140.20"],["4563","26.24","-80.12"],["4564","50.62","3.02"],["4565","20.40","-99.99"],["4566","60.98","25.66"],["4567","47.49","7.73"],["4568","38.77","-0.61"],["4569","38.68","16.41"],["4570","23.83","91.29"],["4571","-23.65","-70.40"],["4572","35.93","36.64"],["4573","41.81","-88.33"],["4574","41.30","-72.38"],["4575","35.41","-80.58"],["4576","47.84","16.46"],["4577","50.35","18.92"],["4578","32.32","34.85"],["4579","-33.60","150.75"],["4580","46.55","6.67"],["4581","32.84","-116.77"],["4582","33.43","-94.05"],["4583","50.90","11.28"],["4584","40.62","-74.24"],["4585","-34.07","150.82"],["4586","40.77","114.89"],["4587","51.86","0.07"],["4588","31.42","75.10"],["4589","12.24","109.20"],["4590","40.18","-75.54"],["4591","23.55","116.37"],["4592","21.86","111.98"],["4593","41.40","-82.56"],["4594","46.41","-70.35"],["4595","35.88","14.51"],["4596","41.45","31.79"],["4597","25.86","-80.28"],["4598","31.03","61.49"],["4599","50.47","4.18"],["4600","51.80","-4.97"],["4601","53.44","-3.00"],["4602","40.58","15.68"],["4603","38.85","-76.92"],["4604","41.04","14.34"],["4605","-33.67","18.58"],["4606","50.82","5.19"],["4607","23.73","92.72"],["4608","25.78","-100.19"],["4609","34.92","-1.30"],["4610","40.71","-74.55"],["4611","62.74","7.16"],["4612","39.85","-75.36"],["4613","24.46","72.77"],["4614","48.38","-4.62"],["4615","46.18","6.14"],["4616","40.59","-98.39"],["4617","41.12","122.07"],["4618","48.86","2.45"],["4619","42.21","-71.69"],["4620","53.83","-1.95"],["4621","52.42","10.79"],["4622","48.23","-79.02"],["4623","37.41","-79.14"],["4624","40.84","14.36"],["4625","9.17","76.50"],["4626","-13.28","-176.18"],["4627","28.81","-97.00"],["4628","46.89","-103.20"],["4629","43.89","8.04"],["4630","30.67","73.11"],["4631","36.41","136.45"],["4632","28.63","-106.07"],["4633","41.42","-87.37"],["4634","51.55","46.02"],["4635","51.48","-0.61"],["4636","28.38","75.61"],["4637","40.17","-74.92"],["4638","40.10","-83.11"],["4639","50.94","-2.63"],["4640","-20.55","-48.57"],["4641","37.57","126.98"],["4642","51.72","5.36"],["4643","32.34","-6.38"],["4644","30.39","114.89"],["4645","48.23","8.21"],["4646","32.68","109.03"],["4647","41.97","2.79"],["4648","37.98","23.77"],["4649","47.11","13.13"],["4650","-38.14","176.24"],["4651","35.34","139.35"],["4652","40.43","-79.70"],["4653","51.60","-3.34"],["4654","44.31","-69.78"],["4655","51.20","6.69"],["4656","7.01","100.47"],["4657","-16.41","-71.54"],["4658","43.47","11.04"],["4659","46.38","6.21"],["4660","41.52","-90.58"],["4661","36.14","-96.11"],["4662","47.98","-122.20"],["4663","36.58","36.18"],["4664","53.39","-2.35"],["4665","-20.35","-40.29"],["4666","-40.58","-73.11"],["4667","42.66","13.92"],["4668","28.55","112.36"],["4669","35.25","136.97"],["4670","12.79","80.22"],["4671","52.23","-0.27"],["4672","37.91","-89.82"],["4673","29.80","76.40"],["4674","34.34","134.05"],["4675","32.05","34.86"],["4676","46.50","-84.35"],["4677","3.97","11.60"],["4678","45.93","13.52"],["4679","49.78","7.34"],["4680","13.01","5.25"],["4681","41.75","22.20"],["4682","45.49","15.56"],["4683","52.07","-0.61"],["4684","35.21","33.43"],["4685","25.55","84.67"],["4686","53.36","-2.04"],["4687","41.42","-87.74"],["4688","45.40","-73.95"],["4689","28.29","-81.41"],["4690","59.29","11.07"],["4691","27.94","-82.29"],["4692","40.63","-4.01"],["4693","49.67","12.15"],["4694","-37.74","144.80"],["4695","36.87","10.16"],["4696","38.48","-107.88"],["4697","36.73","137.08"],["4698","19.91","99.84"],["4699","38.52","-75.05"],["4700","35.54","106.67"],["4701","-12.06","-77.11"],["4702","26.66","87.27"],["4703","42.44","-2.96"],["4704","40.41","-79.91"],["4705","46.23","6.07"],["4706","23.18","75.79"],["4707","48.87","2.71"],["4708","40.66","-74.21"],["4709","40.79","-105.22"],["4710","40.87","-72.88"],["4711","35.56","6.19"],["4712","41.51","-72.91"],["4713","34.68","135.60"],["4714","45.70","8.46"],["4715","53.76","87.12"],["4716","-41.22","174.88"],["4717","48.38","7.47"],["4718","48.51","-2.77"],["4719","18.88","-96.92"],["4720","32.43","-90.13"],["4721","42.49","-71.43"],["4722","-29.96","-71.34"],["4723","24.58","90.39"],["4724","46.51","6.68"],["4725","0.51","35.27"],["4726","8.53","39.26"],["4727","56.07","-3.45"],["4728","47.58","10.53"],["4729","50.43","2.83"],["4730","35.33","139.40"],["4731","53.22","63.64"],["4732","34.07","133.00"],["4733","9.41","76.35"],["4734","33.20","-117.24"],["4735","41.67","-76.43"],["4736","50.91","4.68"],["4737","-35.03","117.88"],["4738","49.52","-1.59"],["4739","41.77","-111.80"],["4740","42.85","13.57"],["4741","46.39","-63.79"],["4742","55.50","9.47"],["4743","-6.84","107.93"],["4744","53.29","-2.15"],["4745","52.06","1.15"],["4746","-9.48","-35.84"],["4747","5.14","10.52"],["4748","7.84","5.18"],["4749","30.59","76.85"],["4750","7.54","4.40"],["4751","32.69","-117.18"],["4752","38.92","-97.21"],["4753","37.42","127.26"],["4754","35.49","112.85"],["4755","42.56","-114.47"],["4756","14.58","121.04"],["4757","51.50","6.53"],["4758","54.72","-6.21"],["4759","42.91","-85.71"],["4760","28.80","79.02"],["4761","51.43","-2.76"],["4762","51.59","-3.78"],["4763","33.83","35.54"],["4764","65.68","-18.09"],["4765","42.48","-72.19"],["4766","40.85","25.87"],["4767","33.59","71.44"],["4768","35.70","-0.63"],["4769","13.97","44.16"],["4770","40.75","-74.26"],["4771","48.28","11.57"],["4772","37.74","-121.14"],["4773","42.02","121.67"],["4774","50.63","6.95"],["4775","43.64","7.01"],["4776","-20.07","30.83"],["4777","34.80","135.36"],["4778","37.61","15.17"],["4779","42.07","-87.94"],["4780","38.69","-9.34"],["4781","48.77","2.12"],["4782","5.85","-55.20"],["4783","36.41","139.33"],["4784","47.71","19.24"],["4785","-7.23","-39.41"],["4786","49.71","6.25"],["4787","42.50","13.81"],["4788","-18.65","-48.20"],["4789","43.18","-73.74"],["4790","53.70","-0.88"],["4791","36.71","-81.98"],["4792","27.50","-99.51"],["4793","11.83","39.60"],["4794","38.21","-84.56"],["4795","40.77","-83.82"],["4796","47.96","7.96"],["4797","48.43","-71.07"],["4798","27.57","80.68"],["4799","-7.72","110.34"],["4800","53.05","4.80"],["4801","55.75","12.32"],["4802","-31.74","-60.51"],["4803","-21.60","-46.90"],["4804","28.91","78.47"],["4805","5.10","6.82"],["4806","34.95","-81.93"],["4807","18.21","-63.06"],["4808","40.51","21.68"],["4809","17.74","78.28"],["4810","28.81","-81.88"],["4811","47.73","12.88"],["4812","45.17","5.77"],["4813","33.68","-7.38"],["4814","40.40","-91.34"],["4815","38.32","-76.45"],["4816","51.36","6.42"],["4817","34.41","135.33"],["4818","49.98","14.50"],["4819","44.67","7.93"],["4820","49.21","7.97"],["4821","45.45","7.84"],["4822","19.76","96.08"],["4823","28.03","-80.59"],["4824","41.58","-73.50"],["4825","50.95","1.86"],["4826","51.69","5.06"],["4827","51.16","13.50"],["4828","-33.77","150.70"],["4829","34.09","-117.96"],["4830","12.82","79.69"],["4831","55.72","12.35"],["4832","47.76","-122.25"],["4833","25.04","-77.35"],["4834","40.04","-75.38"],["4835","41.36","-81.81"],["4836","42.79","-1.62"],["4837","47.54","7.57"],["4838","41.18","-8.65"],["4839","39.11","39.55"],["4840","52.71","-2.76"],["4841","-23.90","29.45"],["4842","52.24","0.71"],["4843","-18.48","-70.31"],["4844","38.01","-3.37"],["4845","45.82","11.27"],["4846","38.01","-1.16"],["4847","41.49","2.14"],["4848","43.71","-1.05"],["4849","37.22","-95.71"],["4850","38.41","-122.95"],["4851","44.80","-106.96"],["4852","41.02","-74.07"],["4853","33.65","-117.69"],["4854","49.82","19.06"],["4855","-34.88","138.53"],["4856","46.24","5.63"],["4857","43.55","10.31"],["4858","56.12","-3.16"],["4859","43.34","17.81"],["4860","39.72","43.05"],["4861","19.05","-98.28"],["4862","-37.83","145.06"],["4863","47.23","8.67"],["4864","10.77","79.63"],["4865","34.11","-117.59"],["4866","-41.13","-71.31"],["4867","40.33","-75.95"],["4868","55.66","13.08"],["4869","41.21","13.57"],["4870","41.28","-73.50"],["4871","39.55","-76.09"],["4872","4.59","-74.08"],["4873","62.79","22.85"],["4874","41.93","12.18"],["4875","51.36","-0.67"],["4876","32.76","12.74"],["4877","33.23","-97.59"],["4878","22.18","-100.94"],["4879","35.98","139.59"],["4880","39.01","-77.43"],["4881","-15.44","49.74"],["4882","26.22","78.18"],["4883","35.02","50.36"],["4884","49.23","28.47"],["4885","48.39","10.01"],["4886","-24.19","-65.30"],["4887","40.33","-78.92"],["4888","43.47","-79.69"],["4889","33.93","-84.37"],["4890","51.45","8.36"],["4891","38.40","-96.18"],["4892","41.28","1.98"],["4893","23.85","72.12"],["4894","51.41","0.01"],["4895","38.62","-121.33"],["4896","51.62","5.43"],["4897","42.32","-85.18"],["4898","42.47","-72.58"],["4899","43.45","-80.49"],["4900","-0.70","10.24"],["4901","53.43","-1.36"],["4902","41.34","-75.96"],["4903","12.32","76.78"],["4904","35.71","139.78"],["4905","51.66","9.39"],["4906","42.74","-83.42"],["4907","51.31","13.27"],["4908","-27.65","152.90"],["4909","-27.45","153.02"],["4910","47.67","-117.24"],["4911","8.51","8.52"],["4912","38.67","-90.33"],["4913","52.16","10.54"],["4914","50.73","1.61"],["4915","26.88","-80.05"],["4916","42.46","59.62"],["4917","10.24","-67.61"],["4918","46.21","5.23"],["4919","35.56","139.72"],["4920","36.14","-5.46"],["4921","52.14","7.33"],["4922","49.87","2.52"],["4923","-8.17","113.70"],["4924","38.08","23.52"],["4925","43.84","25.97"],["4926","8.53","34.80"],["4927","50.87","4.40"],["4928","54.91","8.32"],["4929","45.04","0.36"],["4930","40.52","21.27"],["4931","43.01","-78.64"],["4932","53.84","-2.22"],["4933","42.81","-73.94"],["4934","46.24","-63.13"],["4935","6.02","37.56"],["4936","51.49","-0.31"],["4937","30.67","51.59"],["4938","48.61","7.75"],["4939","37.91","-76.28"],["4940","37.47","-4.44"],["4941","40.90","-80.86"],["4942","62.35","17.03"],["4943","33.86","-84.02"],["4944","52.68","-2.47"],["4945","50.03","-110.70"],["4946","43.91","10.23"],["4947","20.93","85.26"],["4948","45.60","5.27"],["4949","-26.40","153.09"],["4950","-36.07","146.91"],["4951","37.13","58.47"],["4952","-22.20","166.44"],["4953","36.70","52.65"],["4954","41.70","-70.75"],["4955","45.83","9.34"],["4956","19.22","72.98"],["4957","54.72","-113.29"],["4958","-26.65","153.07"],["4959","-21.52","-64.73"],["4960","36.04","138.11"],["4961","4.86","-74.05"],["4962","36.91","15.13"],["4963","6.20","-1.69"],["4964","9.39","42.01"],["4965","24.33","109.43"],["4966","49.80","8.82"],["4967","60.79","-161.76"],["4968","52.02","-0.77"],["4969","45.67","11.93"],["4970","50.42","80.25"],["4971","49.92","1.08"],["4972","50.82","3.26"],["4973","6.01","10.26"],["4974","12.82","77.70"],["4975","42.10","-70.95"],["4976","11.87","75.37"],["4977","30.25","75.84"],["4978","40.98","-74.03"],["4979","43.46","-76.51"],["4980","-31.36","141.68"],["4981","42.85","-106.33"],["4982","50.45","-3.71"],["4983","54.60","-1.08"],["4984","32.34","-90.09"],["4985","37.09","-84.60"],["4986","48.85","2.44"],["4987","44.92","-93.47"],["4988","28.48","-16.41"],["4989","-21.84","-47.47"],["4990","33.81","-84.17"],["4991","54.00","-6.41"],["4992","0.68","34.19"],["4993","31.78","77.00"],["4994","49.00","2.38"],["4995","46.22","6.20"],["4996","12.82","80.04"],["4997","43.67","-92.97"],["4998","25.11","99.16"],["4999","41.02","-73.80"],["5000","32.72","35.13"],["5001","-35.58","-58.01"],["5002","-32.23","148.63"],["5003","35.90","14.51"],["5004","51.81","5.75"],["5005","-32.79","26.83"],["5006","45.49","11.66"],["5007","51.83","107.58"],["5008","51.40","21.15"],["5009","49.17","-123.94"],["5010","47.77","9.17"],["5011","15.54","73.83"],["5012","47.51","6.80"],["5013","51.09","-0.83"],["5014","50.82","7.04"],["5015","52.27","14.05"],["5016","51.16","71.47"],["5017","53.34","-2.63"],["5018","38.95","-76.58"],["5019","46.35","18.71"],["5020","34.02","-118.17"],["5021","42.43","25.63"],["5022","46.23","6.12"],["5023","39.75","39.49"],["5024","28.21","83.99"],["5025","52.60","1.73"],["5026","32.81","-115.38"],["5027","40.25","-75.65"],["5028","48.35","-1.20"],["5029","42.16","-71.14"],["5030","-54.80","-68.30"],["5031","49.28","-122.79"],["5032","54.07","9.98"],["5033","52.15","20.92"],["5034","10.66","-61.52"],["5035","46.93","7.42"],["5036","8.31","80.40"],["5037","51.45","6.64"],["5038","-37.80","144.99"],["5039","51.06","-0.45"],["5040","49.05","8.53"],["5041","45.64","9.00"],["5042","-28.32","32.11"],["5043","52.31","17.06"],["5044","40.93","-8.55"],["5045","48.70","9.14"],["5046","31.98","51.29"],["5047","29.02","79.49"],["5048","41.88","-88.01"],["5049","33.68","135.35"],["5050","40.18","-74.02"],["5051","49.22","17.66"],["5052","47.01","10.29"],["5053","35.60","-82.55"],["5054","48.73","11.19"],["5055","39.94","119.60"],["5056","42.60","-114.76"],["5057","51.08","-4.06"],["5058","40.76","14.54"],["5059","52.54","-3.94"],["5060","51.81","-0.03"],["5061","40.66","109.84"],["5062","34.60","43.68"],["5063","40.24","-76.92"],["5064","-33.86","151.20"],["5065","43.64","5.10"],["5066","45.54","-73.51"],["5067","42.01","-87.84"],["5068","39.95","-74.20"],["5069","46.11","12.52"],["5070","-11.73","-49.07"],["5071","41.18","41.82"],["5072","13.16","-61.22"],["5073","6.32","8.11"],["5074","35.64","139.70"],["5075","53.47","7.48"],["5076","37.98","-122.30"],["5077","49.71","7.31"],["5078","32.52","45.82"],["5079","60.10","-149.44"],["5080","-33.38","-56.53"],["5081","38.89","16.58"],["5082","32.74","35.08"],["5083","17.47","78.80"],["5084","43.23","11.42"],["5085","54.96","-7.73"],["5086","44.83","-0.53"],["5087","39.47","-76.83"],["5088","52.37","-1.43"],["5089","43.00","-89.42"],["5090","8.89","11.38"],["5091","33.25","-84.26"],["5092","50.21","6.97"],["5093","-27.49","153.03"],["5094","16.03","-16.48"],["5095","41.82","-87.85"],["5096","39.70","-120.92"],["5097","35.83","-82.55"],["5098","48.05","10.87"],["5099","38.44","-122.71"],["5100","50.94","13.76"],["5101","51.79","-0.79"],["5102","36.68","-121.66"],["5103","40.94","14.37"],["5104","-37.49","144.59"],["5105","52.08","6.45"],["5106","40.68","-73.51"],["5107","43.46","-3.93"],["5108","52.19","8.72"],["5109","22.76","121.14"],["5110","41.51","-90.58"],["5111","48.89","2.41"],["5112","-7.04","-34.84"],["5113","-34.71","149.14"],["5114","53.55","-1.48"],["5115","39.80","-7.46"],["5116","55.75","48.75"],["5117","55.90","-3.52"],["5118","26.39","75.87"],["5119","50.94","0.25"],["5120","52.06","-1.34"],["5121","-1.62","13.60"],["5122","62.32","27.90"],["5123","22.69","72.86"],["5124","41.82","12.72"],["5125","29.74","-94.98"],["5126","58.28","12.29"],["5127","-24.04","-52.38"],["5128","50.44","7.83"],["5129","43.54","-83.98"],["5130","41.14","16.23"],["5131","11.38","7.88"],["5132","48.17","6.45"],["5133","49.08","8.39"],["5134","-33.49","-70.60"],["5135","28.84","52.56"],["5136","46.54","24.55"],["5137","47.41","15.27"],["5138","34.67","3.25"],["5139","40.42","-86.88"],["5140","35.05","-78.88"],["5141","7.20","35.43"],["5142","-34.58","-58.44"],["5143","48.71","9.00"],["5144","42.72","-3.75"],["5145","49.00","2.52"],["5146","48.77","2.83"],["5147","12.29","4.47"],["5148","55.46","-4.63"],["5149","49.90","8.60"],["5150","46.67","4.36"],["5151","33.58","-85.08"],["5152","50.65","11.37"],["5153","47.35","123.92"],["5154","53.72","-6.36"],["5155","50.72","10.45"],["5156","38.70","-9.42"],["5157","43.42","5.22"],["5158","51.38","-0.10"],["5159","28.67","-81.21"],["5160","49.48","10.99"],["5161","40.61","-74.28"],["5162","48.67","15.66"],["5163","37.82","-122.00"],["5164","53.36","-6.23"],["5165","6.50","4.78"],["5166","-32.88","-71.25"],["5167","42.98","-70.95"],["5168","56.19","10.23"],["5169","42.29","12.41"],["5170","45.20","12.02"],["5171","36.04","-114.98"],["5172","30.63","-81.61"],["5173","42.49","2.75"],["5174","39.02","-84.58"],["5175","40.27","-76.71"],["5176","42.39","-82.91"],["5177","41.46","-72.82"],["5178","36.98","-82.58"],["5179","51.15","-0.97"],["5180","61.13","21.51"],["5181","51.67","7.82"],["5182","30.94","118.76"],["5183","27.48","94.56"],["5184","47.24","7.82"],["5185","51.50","10.79"],["5186","6.83","3.63"],["5187","38.70","-9.29"],["5188","42.07","-71.25"],["5189","9.39","76.57"],["5190","-12.10","-76.99"],["5191","39.64","-106.59"],["5192","40.19","-3.67"],["5193","52.55","9.73"],["5194","37.41","-94.70"],["5195","49.38","1.11"],["5196","48.14","11.20"],["5197","51.00","3.80"],["5198","45.53","9.28"],["5199","37.26","9.88"],["5200","36.70","53.54"],["5201","51.08","6.32"],["5202","29.97","76.88"],["5203","53.39","-2.21"],["5204","34.36","107.24"],["5205","33.75","44.61"],["5206","46.03","0.20"],["5207","10.51","7.42"],["5208","41.08","-85.14"],["5209","-9.11","-75.85"],["5210","50.14","-97.33"],["5211","38.99","-74.81"],["5212","43.48","-0.80"],["5213","41.14","-72.30"],["5214","51.64","4.86"],["5215","36.13","-111.24"],["5216","-34.68","-58.37"],["5217","36.62","-121.92"],["5218","34.98","138.38"],["5219","14.79","42.97"],["5220","7.96","-11.74"],["5221","43.68","10.56"],["5222","39.96","-84.17"],["5223","23.36","103.37"],["5224","28.69","76.93"],["5225","30.91","-94.42"],["5226","36.29","140.42"],["5227","41.11","-112.03"],["5228","16.85","74.58"],["5229","-34.65","-58.55"],["5230","38.89","-77.43"],["5231","60.18","15.45"],["5232","35.65","139.65"],["5233","41.13","-81.48"],["5234","51.39","7.39"],["5235","55.50","9.75"],["5236","45.84","9.67"],["5237","48.69","10.16"],["5238","38.99","-119.16"],["5239","43.37","3.25"],["5240","42.71","-71.16"],["5241","51.65","-0.36"],["5242","62.60","29.76"],["5243","44.81","11.71"],["5244","40.81","-74.12"],["5245","40.71","120.84"],["5246","44.54","10.83"],["5247","43.07","12.62"],["5248","51.82","-1.29"],["5249","53.15","-6.08"],["5250","39.34","-83.31"],["5251","40.97","-73.72"],["5252","44.79","8.25"],["5253","34.50","71.90"],["5254","41.10","-81.24"],["5255","40.34","-75.93"],["5256","37.94","-1.16"],["5257","46.81","1.69"],["5258","40.07","-79.89"],["5259","42.79","-86.11"],["5260","38.96","-77.44"],["5261","31.80","12.30"],["5262","36.74","10.23"],["5263","47.97","11.30"],["5264","7.43","4.95"],["5265","29.75","78.53"],["5266","-29.72","-52.43"],["5267","26.54","82.66"],["5268","41.13","15.51"],["5269","36.53","-87.36"],["5270","44.88","-0.52"],["5271","-14.49","35.25"],["5272","44.33","-93.96"],["5273","40.59","23.03"],["5274","52.19","4.44"],["5275","44.80","-68.77"],["5276","41.90","-87.94"],["5277","45.90","16.84"],["5278","45.79","9.17"],["5279","-31.97","115.91"],["5280","47.66","26.27"],["5281","40.00","-74.99"],["5282","42.35","-71.55"],["5283","38.51","-122.47"],["5284","50.83","-0.17"],["5285","22.09","70.78"],["5286","34.50","109.50"],["5287","35.73","139.54"],["5288","33.84","115.78"],["5289","37.73","15.18"],["5290","45.07","4.85"],["5291","40.89","-74.43"],["5292","49.01","1.38"],["5293","47.42","7.08"],["5294","37.06","-95.71"],["5295","13.37","80.14"],["5296","44.96","-93.37"],["5297","-34.41","150.90"],["5298","51.72","-1.97"],["5299","44.77","17.19"],["5300","39.11","-75.54"],["5301","41.66","-86.16"],["5302","30.36","-87.16"],["5303","51.37","-0.46"],["5304","21.63","73.02"],["5305","42.55","-6.60"],["5306","50.68","10.93"],["5307","48.44","-68.53"],["5308","40.48","-88.99"],["5309","58.06","38.24"],["5310","13.36","103.86"],["5311","44.08","-103.23"],["5312","39.42","-76.29"],["5313","48.90","2.87"],["5314","44.77","-0.62"],["5315","-6.49","106.83"],["5316","36.75","5.06"],["5317","-3.39","36.68"],["5318","35.30","136.80"],["5319","48.51","9.20"],["5320","-33.83","151.24"],["5321","33.78","76.58"],["5322","42.72","-70.88"],["5323","46.56","-72.74"],["5324","41.24","-73.20"],["5325","34.74","-82.25"],["5326","49.76","10.62"],["5327","-12.84","45.19"],["5328","12.56","-12.17"],["5329","42.04","-71.93"],["5330","42.61","-83.15"],["5331","5.96","10.16"],["5332","8.64","-10.97"],["5333","14.01","-60.99"],["5334","36.07","4.76"],["5335","47.18","9.44"],["5336","33.69","-86.68"],["5337","52.99","6.56"],["5338","21.78","87.75"],["5339","42.62","-6.42"],["5340","11.71","-70.18"],["5341","22.74","77.44"],["5342","40.76","-73.59"],["5343","43.48","5.62"],["5344","35.78","140.32"],["5345","55.50","10.65"],["5346","48.79","2.40"],["5347","47.58","12.16"],["5348","5.52","7.49"],["5349","-37.84","144.96"],["5350","46.74","-71.25"],["5351","13.34","77.12"],["5352","36.21","-5.38"],["5353","26.56","-81.95"],["5354","48.34","16.33"],["5355","47.21","7.53"],["5356","30.86","77.10"],["5357","33.78","130.98"],["5358","26.84","-80.10"],["5359","45.71","4.80"],["5360","30.36","73.38"],["5361","42.13","-87.83"],["5362","-34.72","135.86"],["5363","47.45","9.76"],["5364","37.45","138.85"],["5365","43.58","7.13"],["5366","33.92","75.01"],["5367","41.24","-81.35"],["5368","-20.16","57.50"],["5369","51.85","8.30"],["5370","46.98","7.48"],["5371","41.31","13.92"],["5372","25.57","-108.47"],["5373","14.78","-88.78"],["5374","40.06","-81.53"],["5375","49.30","8.70"],["5376","48.00","-4.10"],["5377","40.97","17.12"],["5378","48.82","44.77"],["5379","51.17","6.94"],["5380","32.91","-111.77"],["5381","50.81","4.23"],["5382","51.15","1.27"],["5383","51.99","5.98"],["5384","-34.60","-58.38"],["5385","37.28","15.00"],["5386","38.52","-89.98"],["5387","44.96","-89.63"],["5388","53.09","-2.53"],["5389","8.70","76.81"],["5390","-19.83","34.84"],["5391","55.81","-4.07"],["5392","44.00","-96.31"],["5393","52.60","11.85"],["5394","37.73","-89.22"],["5395","15.48","120.60"],["5396","47.10","2.37"],["5397","38.30","-122.29"],["5398","40.21","-75.28"],["5399","11.83","10.17"],["5400","52.73","8.28"],["5401","53.37","-2.32"],["5402","31.81","75.66"],["5403","51.31","4.43"],["5404","40.92","-72.66"],["5405","-29.85","30.99"],["5406","36.56","139.88"],["5407","51.98","7.78"],["5408","51.14","4.45"],["5409","40.94","-73.83"],["5410","40.59","9.00"],["5411","-26.62","152.96"],["5412","-26.76","152.85"],["5413","38.42","-6.42"],["5414","53.53","-7.34"],["5415","34.73","-86.97"],["5416","40.93","-98.34"],["5417","41.76","-72.61"],["5418","34.26","-88.70"],["5419","28.68","57.74"],["5420","42.20","-72.62"],["5421","40.56","17.81"],["5422","58.39","13.85"],["5423","41.17","80.26"],["5424","39.95","-82.81"],["5425","36.78","2.98"],["5426","-31.89","116.77"],["5427","57.46","10.00"],["5428","42.48","142.07"],["5429","43.04","-77.66"],["5430","52.49","-0.68"],["5431","23.18","-102.87"],["5432","51.96","5.24"],["5433","47.00","7.45"],["5434","44.54","11.54"],["5435","-33.82","151.10"],["5436","56.82","-5.11"],["5437","10.19","76.39"],["5438","34.74","135.34"],["5439","50.75","8.50"],["5440","41.24","-77.00"],["5441","52.17","20.81"],["5442","27.20","-80.25"],["5443","34.20","-119.18"],["5444","42.71","-73.20"],["5445","59.87","10.66"],["5446","35.14","-79.01"],["5447","43.59","-70.33"],["5448","3.15","101.76"],["5449","49.21","8.37"],["5450","32.52","-92.64"],["5451","34.76","134.84"],["5452","-12.07","-75.21"],["5453","30.72","-95.55"],["5454","-20.15","28.59"],["5455","36.02","-95.97"],["5456","39.36","2.74"],["5457","26.75","128.18"],["5458","51.40","-0.11"],["5459","54.07","-2.28"],["5460","42.99","-89.53"],["5461","51.38","10.14"],["5462","40.86","-73.19"],["5463","48.99","2.23"],["5464","20.88","-76.26"],["5465","50.15","7.17"],["5466","-46.42","168.36"],["5467","27.90","-81.84"],["5468","52.20","4.63"],["5469","40.65","29.28"],["5470","41.02","-80.66"],["5471","44.30","8.46"],["5472","47.17","-1.47"],["5473","40.52","-75.78"],["5474","12.85","79.73"],["5475","47.34","0.70"],["5476","9.36","42.80"],["5477","39.03","-84.45"],["5478","50.46","7.79"],["5479","36.86","42.99"],["5480","42.25","12.80"],["5481","46.19","-1.12"],["5482","35.74","51.78"],["5483","49.44","11.86"],["5484","0.51","101.45"],["5485","51.84","6.62"],["5486","32.01","44.33"],["5487","46.53","8.61"],["5488","-37.86","145.03"],["5489","55.60","-2.72"],["5490","37.43","118.67"],["5491","33.66","-118.00"],["5492","-37.82","145.12"],["5493","54.31","13.08"],["5494","-17.36","30.20"],["5495","37.17","-4.15"],["5496","45.41","-73.68"],["5497","28.08","-82.76"],["5498","37.31","-89.52"],["5499","51.59","-1.43"],["5500","33.10","-96.67"],["5501","35.65","139.90"],["5502","39.99","-105.09"],["5503","26.01","-80.30"],["5504","41.60","-87.74"],["5505","47.74","12.10"],["5506","33.86","73.77"],["5507","50.63","6.03"],["5508","47.53","-122.03"],["5509","11.71","11.08"],["5510","-22.79","-43.37"],["5511","59.71","14.54"],["5512","52.05","5.28"],["5513","-12.99","28.65"],["5514","42.31","-75.39"],["5515","5.67","-0.17"],["5516","32.93","35.08"],["5517","33.89","-84.14"],["5518","37.17","38.80"],["5519","21.17","72.83"],["5520","-25.39","-51.46"],["5521","34.43","8.78"],["5522","14.06","100.62"],["5523","46.33","10.33"],["5524","40.98","27.51"],["5525","46.43","11.34"],["5526","34.68","-79.20"],["5527","-51.70","-57.85"],["5528","16.99","82.25"],["5529","-0.97","-80.71"],["5530","-36.61","-72.10"],["5531","42.26","-87.84"],["5532","41.70","-72.72"],["5533","12.12","78.16"],["5534","50.84","-1.86"],["5535","48.88","9.40"],["5536","51.18","7.19"],["5537","51.76","-0.57"],["5538","52.11","9.36"],["5539","17.88","75.02"],["5540","46.65","126.97"],["5541","-27.28","-50.58"],["5542","39.27","-2.60"],["5543","53.15","16.74"],["5544","46.25","6.00"],["5545","9.66","80.03"],["5546","48.05","8.20"],["5547","-1.17","36.83"],["5548","38.81","-77.64"],["5549","34.00","-118.23"],["5550","35.40","139.31"],["5551","36.56","127.53"],["5552","30.49","-95.99"],["5553","13.93","75.57"],["5554","47.23","11.37"],["5555","40.45","-4.00"],["5556","50.41","1.59"],["5557","35.73","-81.34"],["5558","42.97","-75.50"],["5559","37.89","-122.30"],["5560","45.17","-93.30"],["5561","-11.98","-77.10"],["5562","42.45","-73.79"],["5563","14.55","44.41"],["5564","33.73","135.38"],["5565","-16.82","-49.25"],["5566","39.49","-75.03"],["5567","39.89","-83.45"],["5568","51.38","0.52"],["5569","5.54","-73.36"],["5570","49.48","6.09"],["5571","20.90","74.77"],["5572","49.04","2.06"],["5573","48.83","2.52"],["5574","17.30","-62.72"],["5575","45.77","11.73"],["5576","40.58","-8.45"],["5577","44.10","9.82"],["5578","49.68","6.12"],["5579","38.85","-6.68"],["5580","38.02","-122.13"],["5581","35.84","14.52"],["5582","26.28","50.59"],["5583","52.67","-0.73"],["5584","45.50","12.12"],["5585","38.23","-85.01"],["5586","31.27","32.30"],["5587","45.44","28.01"],["5588","31.89","35.01"],["5589","45.31","-73.25"],["5590","4.97","6.11"],["5591","46.46","6.84"],["5592","18.39","77.11"],["5593","50.75","8.08"],["5594","42.48","-1.65"],["5595","34.77","32.43"],["5596","50.82","12.55"],["5597","37.84","-122.29"],["5598","37.83","23.81"],["5599","51.20","8.70"],["5600","10.23","76.20"],["5601","46.19","6.23"],["5602","-37.68","176.22"],["5603","40.47","19.49"],["5604","47.17","-122.52"],["5605","48.91","2.33"],["5606","50.78","16.28"],["5607","33.99","-118.19"],["5608","41.93","-74.00"],["5609","-26.12","27.90"],["5610","48.08","11.72"],["5611","25.13","56.33"],["5612","-17.88","-51.73"],["5613","41.92","8.74"],["5614","45.24","8.01"],["5615","34.00","-84.14"],["5616","51.39","-2.36"],["5617","37.08","-94.51"],["5618","51.36","-0.70"],["5619","25.48","80.34"],["5620","31.37","75.40"],["5621","33.01","-97.10"],["5622","35.11","-77.04"],["5623","49.00","21.24"],["5624","37.23","-77.40"],["5625","44.64","8.64"],["5626","50.05","9.71"],["5627","41.15","24.15"],["5628","42.96","1.09"],["5629","37.43","-122.25"],["5630","43.51","18.78"],["5631","44.15","8.28"],["5632","5.55","5.79"],["5633","34.73","36.71"],["5634","50.10","8.78"],["5635","43.26","-70.87"],["5636","47.47","-0.62"],["5637","39.55","-0.39"],["5638","-19.97","-44.20"],["5639","40.99","-74.03"],["5640","39.22","-121.06"],["5641","41.92","-72.56"],["5642","53.87","10.25"],["5643","47.10","6.83"],["5644","47.76","11.37"],["5645","10.45","105.63"],["5646","4.23","103.43"],["5647","8.57","-71.18"],["5648","43.21","2.35"],["5649","33.78","72.72"],["5650","45.14","1.07"],["5651","30.51","-97.82"],["5652","40.62","15.06"],["5653","37.59","127.13"],["5654","-33.88","151.20"],["5655","54.01","-0.44"],["5656","14.65","-61.10"],["5657","-9.11","-78.45"],["5658","-17.53","-149.55"],["5659","-33.32","115.64"],["5660","48.74","19.15"],["5661","41.64","-80.15"],["5662","39.33","-4.65"],["5663","41.90","-71.09"],["5664","43.08","-0.89"],["5665","40.06","-74.14"],["5666","53.49","-2.10"],["5667","49.54","10.23"],["5668","2.17","102.71"],["5669","43.10","-79.04"],["5670","32.29","-64.79"],["5671","44.69","7.86"],["5672","46.84","7.54"],["5673","56.45","9.40"],["5674","43.81","-72.16"],["5675","25.87","-97.50"],["5676","37.29","-5.92"],["5677","22.61","77.76"],["5678","20.88","76.20"],["5679","45.74","4.47"],["5680","53.40","-2.27"],["5681","-21.31","25.40"],["5682","55.07","-3.61"],["5683","40.98","-74.12"],["5684","-29.83","30.84"],["5685","47.77","12.01"],["5686","41.88","-87.90"],["5687","41.91","-88.31"],["5688","41.04","-74.64"],["5689","40.63","-74.50"],["5690","47.14","8.43"],["5691","35.79","-78.78"],["5692","40.79","-74.58"],["5693","43.30","-0.37"],["5694","41.12","-73.96"],["5695","40.92","14.74"],["5696","52.48","9.80"],["5697","39.16","-75.52"],["5698","9.20","12.50"],["5699","47.01","8.48"],["5700","-31.28","-64.46"],["5701","40.77","-74.20"],["5702","45.22","12.28"],["5703","42.72","-75.13"],["5704","26.56","31.70"],["5705","50.12","19.02"],["5706","39.96","-75.61"],["5707","42.56","-71.27"],["5708","51.19","-0.61"],["5709","51.19","5.99"],["5710","35.71","139.93"],["5711","44.21","-70.54"],["5712","40.93","-8.25"],["5713","48.65","-2.03"],["5714","41.54","-86.90"],["5715","37.57","-122.38"],["5716","50.35","18.23"],["5717","29.65","91.14"],["5718","43.80","143.90"],["5719","26.67","119.55"],["5720","49.57","10.88"],["5721","-23.50","-47.45"],["5722","50.33","3.40"],["5723","55.00","-7.31"],["5724","37.27","-95.55"],["5725","44.86","24.87"],["5726","30.64","76.40"],["5727","25.86","85.79"],["5728","41.69","-8.83"],["5729","6.96","79.91"],["5730","47.60","12.99"],["5731","40.51","-88.99"],["5732","35.23","128.89"],["5733","7.10","4.84"],["5734","41.99","-87.87"],["5735","42.45","-71.14"],["5736","-27.57","153.04"],["5737","25.45","78.57"],["5738","45.85","5.34"],["5739","23.68","113.06"],["5740","54.89","-2.93"],["5741","36.64","2.70"],["5742","25.40","68.36"],["5743","42.05","13.93"],["5744","39.50","-88.18"],["5745","56.51","9.61"],["5746","6.43","100.43"],["5747","33.37","74.32"],["5748","42.81","10.32"],["5749","48.96","4.36"],["5750","40.28","-86.51"],["5751","16.24","80.05"],["5752","45.04","41.96"],["5753","-27.63","-52.27"],["5754","45.75","9.27"],["5755","35.23","-106.66"],["5756","45.04","38.97"],["5757","5.87","7.95"],["5758","34.80","134.99"],["5759","45.95","13.65"],["5760","45.73","9.40"],["5761","30.16","-85.66"],["5762","50.70","2.24"],["5763","53.17","-3.14"],["5764","16.75","78.00"],["5765","37.59","-4.64"],["5766","47.35","8.60"],["5767","29.37","78.14"],["5768","55.73","24.36"],["5769","46.10","13.21"],["5770","41.41","-73.30"],["5771","36.47","-6.20"],["5772","-27.55","153.05"],["5773","47.47","-122.27"],["5774","53.44","10.36"],["5775","7.34","13.57"],["5776","36.16","1.34"],["5777","-33.80","151.18"],["5778","2.00","112.93"],["5779","48.97","3.33"],["5780","25.78","73.33"],["5781","37.19","-3.72"],["5782","-37.77","145.00"],["5783","42.21","-71.22"],["5784","-6.26","106.81"],["5785","39.16","16.78"],["5786","32.17","34.89"],["5787","52.11","21.26"],["5788","48.56","16.08"],["5789","13.41","80.12"],["5790","27.27","-80.36"],["5791","34.21","-118.20"],["5792","45.33","8.00"],["5793","32.25","118.33"],["5794","40.01","-75.23"],["5795","55.69","37.34"],["5796","-23.51","-46.87"],["5797","48.14","11.46"],["5798","51.43","0.10"],["5799","34.88","-1.32"],["5800","34.26","-85.16"],["5801","33.44","43.27"],["5802","47.95","21.72"],["5803","26.17","80.97"],["5804","30.67","-81.46"],["5805","32.70","35.30"],["5806","43.73","-79.76"],["5807","37.81","-85.47"],["5808","40.14","-79.90"],["5809","53.23","-0.55"],["5810","45.66","-110.56"],["5811","43.22","-88.03"],["5812","41.73","12.66"],["5813","44.64","7.49"],["5814","55.00","82.70"],["5815","46.79","7.12"],["5816","49.61","19.97"],["5817","41.24","-80.82"],["5818","34.45","-119.24"],["5819","43.04","-88.08"],["5820","35.22","113.24"],["5821","-32.90","151.67"],["5822","-6.72","-79.91"],["5823","17.96","-76.89"],["5824","40.36","-111.74"],["5825","50.59","12.70"],["5826","41.65","-88.09"],["5827","53.33","-8.23"],["5828","10.59","76.04"],["5829","54.52","-1.56"],["5830","16.68","80.79"],["5831","45.11","10.16"],["5832","-0.30","36.08"],["5833","-22.55","27.11"],["5834","41.99","-72.70"],["5835","36.14","128.11"],["5836","39.45","-5.33"],["5837","48.90","2.52"],["5838","35.89","-5.32"],["5839","52.13","13.62"],["5840","33.65","116.96"],["5841","1.86","103.11"],["5842","68.44","17.43"],["5843","-11.97","-76.99"],["5844","7.89","-72.50"],["5845","22.43","87.29"],["5846","32.83","-109.71"],["5847","62.45","-114.37"],["5848","37.25","-76.50"],["5849","51.50","6.86"],["5850","35.26","-77.58"],["5851","-31.79","115.83"],["5852","18.01","-66.61"],["5853","33.97","-84.22"],["5854","47.48","8.22"],["5855","40.20","-77.20"],["5856","47.79","-122.31"],["5857","57.04","34.97"],["5858","12.43","4.20"],["5859","41.16","-81.24"],["5860","33.89","-118.35"],["5861","11.25","124.96"],["5862","19.09","74.75"],["5863","51.60","-0.21"],["5864","49.94","-56.19"],["5865","12.06","0.37"],["5866","43.07","-73.15"],["5867","42.20","-83.49"],["5868","66.55","66.60"],["5869","48.89","11.19"],["5870","35.84","14.54"],["5871","53.65","9.79"],["5872","-26.91","-48.67"],["5873","37.10","-113.57"],["5874","28.07","-82.44"],["5875","39.77","-94.85"],["5876","48.50","9.39"],["5877","28.95","-95.36"],["5878","52.35","4.62"],["5879","41.48","-87.33"],["5880","51.37","-0.49"],["5881","41.47","-84.55"],["5882","-20.25","-43.80"],["5883","50.43","7.41"],["5884","48.75","2.49"],["5885","51.67","8.60"],["5886","45.38","7.88"],["5887","48.68","2.96"],["5888","49.73","12.20"],["5889","42.81","-87.92"],["5890","34.83","135.47"],["5891","-32.75","-70.72"],["5892","44.45","1.44"],["5893","7.12","3.75"],["5894","40.81","-73.63"],["5895","48.69","2.29"],["5896","35.16","33.32"],["5897","32.99","74.93"],["5898","26.58","101.72"],["5899","35.68","139.44"],["5900","48.23","10.10"],["5901","55.86","9.85"],["5902","-34.71","-58.28"],["5903","9.58","6.55"],["5904","36.76","-2.11"],["5905","47.54","14.89"],["5906","-20.00","23.42"],["5907","28.09","-80.57"],["5908","14.55","121.02"],["5909","42.24","-84.75"],["5910","49.40","15.59"],["5911","51.79","11.14"],["5912","48.39","16.22"],["5913","-29.14","-49.72"],["5914","40.33","-74.79"],["5915","-17.54","-39.74"],["5916","48.91","2.50"],["5917","41.22","-111.97"],["5918","41.03","-73.63"],["5919","40.79","-74.51"],["5920","-35.24","149.08"],["5921","-29.32","27.49"],["5922","37.14","-3.63"],["5923","45.66","9.13"],["5924","42.99","-76.07"],["5925","39.16","-119.77"],["5926","-22.41","-47.57"],["5927","46.04","8.92"],["5928","32.28","52.15"],["5929","38.98","-77.01"],["5930","43.54","-1.46"],["5931","33.15","73.75"],["5932","50.99","12.97"],["5933","44.88","7.33"],["5934","26.38","127.86"],["5935","13.12","32.65"],["5936","49.20","8.12"],["5937","47.31","-122.23"],["5938","38.79","-90.50"],["5939","36.04","14.24"],["5940","43.00","-81.91"],["5941","36.20","113.12"],["5942","-32.83","151.73"],["5943","64.10","-21.88"],["5944","-4.97","-39.02"],["5945","35.04","33.99"],["5946","47.69","17.65"],["5947","30.89","77.06"],["5948","43.99","3.61"],["5949","41.98","-88.01"],["5950","47.78","12.32"],["5951","34.81","135.65"],["5952","52.70","21.09"],["5953","43.87","10.25"],["5954","47.76","18.13"],["5955","29.80","-90.82"],["5956","33.58","-112.24"],["5957","42.39","-71.03"],["5958","35.02","126.71"],["5959","51.67","39.19"],["5960","42.77","-73.45"],["5961","38.41","24.04"],["5962","44.77","-79.93"],["5963","53.11","-3.31"],["5964","6.43","100.27"],["5965","40.51","15.49"],["5966","42.18","-87.80"],["5967","46.16","16.83"],["5968","36.26","6.70"],["5969","52.49","4.66"],["5970","-13.16","-74.22"],["5971","50.80","4.34"],["5972","36.10","-79.51"],["5973","39.59","-3.04"],["5974","-17.53","-149.57"],["5975","19.21","73.09"],["5976","36.47","52.86"],["5977","2.92","101.66"],["5978","30.42","-87.22"],["5979","46.31","16.34"],["5980","-23.08","-52.46"],["5981","-15.13","23.15"],["5982","48.99","2.28"],["5983","11.53","42.85"],["5984","50.58","5.50"],["5985","-33.82","151.19"],["5986","12.79","80.03"],["5987","40.85","-74.57"],["5988","47.31","8.55"],["5989","28.25","80.25"],["5990","51.53","13.13"],["5991","17.92","-87.96"],["5992","30.88","73.60"],["5993","-5.86","144.24"],["5994","48.08","16.29"],["5995","46.49","6.32"],["5996","35.37","132.75"],["5997","33.49","-80.86"],["5998","53.60","9.84"],["5999","44.69","7.90"],["6000","23.67","87.69"],["6001","13.50","144.80"],["6002","49.54","8.66"],["6003","-39.92","144.10"],["6004","47.14","7.25"],["6005","-18.95","-45.49"],["6006","49.21","2.58"],["6007","39.74","-83.81"],["6008","52.68","7.95"],["6009","48.88","2.18"],["6010","48.99","1.71"],["6011","17.28","74.18"],["6012","3.70","8.91"],["6013","35.27","139.59"],["6014","48.72","10.78"],["6015","44.88","-91.92"],["6016","37.51","22.37"],["6017","-32.75","-70.66"],["6018","52.02","0.24"],["6019","50.44","7.47"],["6020","19.26","76.77"],["6021","52.31","-1.94"],["6022","42.91","-78.75"],["6023","40.80","-74.01"],["6024","46.45","6.86"],["6025","-33.79","151.12"],["6026","48.43","0.09"],["6027","48.87","9.19"],["6028","49.94","17.89"],["6029","50.09","7.49"],["6030","42.75","-74.19"],["6031","-9.30","-76.00"],["6032","43.74","7.42"],["6033","-1.52","37.26"],["6034","42.70","-74.92"],["6035","33.83","-4.84"],["6036","28.75","104.64"],["6037","21.19","81.65"],["6038","13.14","-59.63"],["6039","13.05","74.78"],["6040","18.46","83.65"],["6041","24.81","-107.39"],["6042","48.54","7.71"],["6043","23.35","72.95"],["6044","-19.47","-42.55"],["6045","55.83","-3.22"],["6046","51.09","6.89"],["6047","40.02","-74.96"],["6048","48.44","1.49"],["6049","47.72","-1.38"],["6050","10.93","79.84"],["6051","40.34","-104.91"],["6052","44.35","-121.18"],["6053","-33.85","150.94"],["6054","44.00","12.66"],["6055","40.94","-74.08"],["6056","10.82","79.61"],["6057","33.54","-117.79"],["6058","36.99","127.93"],["6059","35.57","126.86"],["6060","6.07","8.20"],["6061","53.26","-2.12"],["6062","40.28","-75.30"],["6063","45.57","9.16"],["6064","42.63","-78.74"],["6065","35.38","139.92"],["6066","47.92","13.80"],["6067","44.76","8.79"],["6068","-33.76","150.72"],["6069","42.93","11.27"],["6070","44.70","8.04"],["6071","50.08","7.39"],["6072","35.73","51.91"],["6073","35.75","114.30"],["6074","-28.03","153.43"],["6075","38.66","-90.58"],["6076","37.43","-121.90"],["6077","45.53","-122.94"],["6078","48.82","2.32"],["6079","41.06","-74.10"],["6080","17.00","81.80"],["6081","49.20","7.60"],["6082","33.75","-116.97"],["6083","40.14","18.49"],["6084","21.63","-98.08"],["6085","12.50","74.99"],["6086","50.64","2.64"],["6087","50.05","10.22"],["6088","39.08","-84.18"],["6089","44.75","-78.09"],["6090","19.08","83.81"],["6091","50.40","7.62"],["6092","49.31","6.75"],["6093","54.25","-6.97"],["6094","50.81","4.32"],["6095","41.92","-84.63"],["6096","38.84","0.11"],["6097","35.31","-83.18"],["6098","-34.56","-58.69"],["6099","-4.01","-79.21"],["6100","48.46","8.42"],["6101","34.77","-84.97"],["6102","45.47","8.89"],["6103","42.46","-71.35"],["6104","-42.12","171.86"],["6105","10.72","122.56"],["6106","48.33","2.37"],["6107","40.05","-86.47"],["6108","54.11","-3.22"],["6109","20.69","77.83"],["6110","34.15","77.58"],["6111","48.17","14.04"],["6112","46.70","12.35"],["6113","36.06","136.22"],["6114","11.41","79.69"],["6115","40.07","-2.14"],["6116","30.00","-91.82"],["6117","50.43","-3.69"],["6118","39.47","75.99"],["6119","53.94","10.31"],["6120","-27.59","152.93"],["6121","42.52","-83.27"],["6122","45.62","10.55"],["6123","40.63","14.38"],["6124","37.85","15.29"],["6125","51.20","-3.48"],["6126","-34.80","-58.28"],["6127","48.06","9.61"],["6128","17.36","102.82"],["6129","-37.88","145.03"],["6130","52.22","4.49"],["6131","40.34","-74.43"],["6132","42.05","3.11"],["6133","23.05","112.47"],["6134","-33.86","151.11"],["6135","33.59","-117.70"],["6136","16.40","120.60"],["6137","37.13","-80.58"],["6138","36.47","-5.41"],["6139","44.31","9.34"],["6140","46.45","-120.42"],["6141","51.21","-0.63"],["6142","59.78","10.50"],["6143","11.54","-72.92"],["6144","49.87","8.93"],["6145","39.08","-84.45"],["6146","33.38","-84.80"],["6147","51.05","-0.08"],["6148","39.75","37.02"],["6149","49.28","11.47"],["6150","40.15","-76.60"],["6151","38.05","-122.02"],["6152","38.36","-121.99"],["6153","42.08","-71.63"],["6154","32.10","76.27"],["6155","19.86","41.58"],["6156","45.60","-97.83"],["6157","37.38","126.80"],["6158","41.79","-69.99"],["6159","18.86","82.55"],["6160","40.73","-73.45"],["6161","51.00","2.23"],["6162","45.50","11.54"],["6163","56.00","-3.78"],["6164","35.62","-5.28"],["6165","42.96","13.87"],["6166","40.74","-84.11"],["6167","45.19","7.89"],["6168","-25.70","-48.48"],["6169","43.67","3.86"],["6170","46.42","6.27"],["6171","53.87","-1.91"],["6172","-34.10","-61.14"],["6173","42.41","13.51"],["6174","41.61","-87.65"],["6175","42.34","69.59"],["6176","48.70","2.16"],["6177","49.72","11.07"],["6178","48.66","2.30"],["6179","49.22","3.99"],["6180","40.55","23.02"],["6181","48.59","2.19"],["6182","44.45","-88.06"],["6183","32.68","35.24"],["6184","49.46","8.17"],["6185","39.86","-75.43"],["6186","43.66","6.93"],["6187","51.56","-3.27"],["6188","45.70","9.21"],["6189","45.51","10.33"],["6190","51.68","-9.45"],["6191","11.55","122.74"],["6192","48.23","9.88"],["6193","46.81","-100.78"],["6194","37.31","40.73"],["6195","14.20","79.16"],["6196","25.13","82.56"],["6197","55.61","-4.55"],["6198","29.44","-107.39"],["6199","41.48","-81.92"],["6200","25.92","86.79"],["6201","29.97","77.56"],["6202","-31.42","-62.08"],["6203","-19.99","-43.85"],["6204","34.32","133.86"],["6205","52.65","-0.48"],["6206","1.21","-77.29"],["6207","37.12","14.94"],["6208","21.21","41.62"],["6209","29.34","48.07"],["6210","45.09","-64.36"],["6211","36.37","-94.21"],["6212","49.45","10.32"],["6213","34.60","-98.40"],["6214","-8.36","-36.70"],["6215","36.49","-4.99"],["6216","38.59","-89.91"],["6217","39.46","-76.12"],["6218","42.96","-88.01"],["6219","41.61","-70.97"],["6220","21.98","108.65"],["6221","36.20","37.13"],["6222","43.29","-89.72"],["6223","59.97","23.44"],["6224","40.10","-75.38"],["6225","21.01","75.56"],["6226","24.94","84.10"],["6227","42.54","-71.05"],["6228","51.94","8.87"],["6229","42.83","-78.82"],["6230","11.23","78.88"],["6231","51.02","4.01"],["6232","27.82","114.42"],["6233","-21.26","47.45"],["6234","37.79","127.05"],["6235","49.74","13.37"],["6236","37.55","-97.27"],["6237","-17.47","-48.20"],["6238","47.11","9.52"],["6239","51.44","-3.17"],["6240","50.74","2.74"],["6241","45.35","9.97"],["6242","50.14","8.15"],["6243","46.98","15.37"],["6244","3.38","101.41"],["6245","26.62","-80.07"],["6246","40.85","-73.97"],["6247","-2.74","-78.85"],["6248","41.74","-70.19"],["6249","42.50","-71.07"],["6250","47.66","23.58"],["6251","36.75","3.06"],["6252","34.83","135.42"],["6253","-6.46","-37.09"],["6254","-8.17","-34.92"],["6255","14.08","-60.95"],["6256","35.13","136.10"],["6257","33.54","-84.23"],["6258","25.93","-80.16"],["6259","45.54","9.19"],["6260","34.75","134.91"],["6261","40.30","-79.54"],["6262","44.41","8.69"],["6263","48.91","2.29"],["6264","50.75","3.12"],["6265","-32.56","-53.38"],["6266","7.77","-72.23"],["6267","48.47","11.94"],["6268","37.18","-1.82"],["6269","43.14","5.99"],["6270","48.70","8.14"],["6271","10.02","-84.21"],["6272","35.65","139.54"],["6273","41.30","-89.06"],["6274","53.46","-2.74"],["6275","33.89","-118.31"],["6276","6.91","79.97"],["6277","51.15","14.97"],["6278","-26.41","153.05"],["6279","48.78","2.30"],["6280","52.17","9.25"],["6281","38.94","-76.56"],["6282","12.96","79.95"],["6283","8.75","-11.84"],["6284","55.21","-119.43"],["6285","47.49","8.21"],["6286","5.89","7.95"],["6287","27.42","77.10"],["6288","43.96","10.23"],["6289","42.96","1.61"],["6290","12.00","-61.77"],["6291","44.73","10.40"],["6292","24.60","80.83"],["6293","36.69","2.97"],["6294","52.41","-1.92"],["6295","45.77","3.20"],["6296","27.08","93.61"],["6297","-39.93","175.05"],["6298","49.22","-0.10"],["6299","49.11","9.74"],["6300","41.65","2.14"],["6301","-25.81","-48.54"],["6302","10.98","-63.88"],["6303","12.81","74.89"],["6304","29.88","52.82"],["6305","36.64","-6.35"],["6306","8.88","-75.71"],["6307","20.93","77.75"],["6308","17.58","78.11"],["6309","52.77","-0.10"],["6310","44.88","-93.14"],["6311","18.31","42.77"],["6312","39.73","98.49"],["6313","37.18","33.22"],["6314","38.37","21.43"],["6315","47.84","12.97"],["6316","52.34","5.64"],["6317","37.64","140.96"],["6318","35.18","135.04"],["6319","53.92","9.88"],["6320","57.72","12.08"],["6321","44.05","8.22"],["6322","46.31","4.83"],["6323","27.95","116.36"],["6324","46.78","4.85"],["6325","51.82","9.46"],["6326","37.47","-122.14"],["6327","51.84","5.90"],["6328","48.67","-98.83"],["6329","29.56","-95.29"],["6330","47.33","16.23"],["6331","38.02","-122.29"],["6332","43.35","12.58"],["6333","48.99","2.26"],["6334","54.71","20.45"],["6335","49.31","8.64"],["6336","-33.78","151.17"],["6337","41.10","-72.36"],["6338","20.53","-100.81"],["6339","36.71","-97.09"],["6340","35.67","139.48"],["6341","50.83","6.97"],["6342","43.31","68.23"],["6343","45.70","9.84"],["6344","32.86","-96.80"],["6345","49.62","6.22"],["6346","34.60","-120.14"],["6347","48.36","10.84"],["6348","41.58","-4.47"],["6349","45.77","4.78"],["6350","51.20","11.97"],["6351","51.50","3.89"],["6352","41.80","-88.07"],["6353","45.16","10.43"],["6354","44.19","-88.46"],["6355","45.41","-92.64"],["6356","48.09","9.23"],["6357","45.75","-94.22"],["6358","39.78","-74.74"],["6359","51.14","7.22"],["6360","36.43","139.80"],["6361","29.03","-81.30"],["6362","41.45","-87.47"],["6363","39.09","-94.42"],["6364","8.54","-80.78"],["6365","47.87","12.64"],["6366","44.99","-93.36"],["6367","30.55","31.01"],["6368","42.73","-90.48"],["6369","33.81","73.53"],["6370","50.45","2.54"],["6371","40.83","16.55"],["6372","52.27","5.17"],["6373","-24.30","28.12"],["6374","28.36","76.15"],["6375","-25.44","-49.19"],["6376","30.27","-87.59"],["6377","14.70","120.98"],["6378","33.21","130.38"],["6379","47.44","18.91"],["6380","40.68","-80.11"],["6381","9.10","76.49"],["6382","36.26","2.76"],["6383","47.06","7.63"],["6384","40.67","-0.70"],["6385","40.93","14.53"],["6386","51.41","-0.68"],["6387","22.83","88.33"],["6388","45.07","-93.46"],["6389","35.09","-92.44"],["6390","50.85","4.49"],["6391","50.60","36.60"],["6392","49.97","7.90"],["6393","50.63","5.48"],["6394","40.67","122.24"],["6395","32.43","-85.71"],["6396","-10.69","-37.43"],["6397","40.09","-75.25"],["6398","35.04","-89.66"],["6399","45.19","11.30"],["6400","47.60","19.36"],["6401","40.82","-74.36"],["6402","31.98","35.20"],["6403","55.04","9.42"],["6404","13.82","75.03"],["6405","46.33","14.33"],["6406","45.75","3.09"],["6407","53.34","-6.54"],["6408","17.41","73.54"],["6409","44.64","-124.05"],["6410","32.17","13.02"],["6411","35.22","137.08"],["6412","41.21","-8.29"],["6413","47.06","-0.88"],["6414","45.49","-73.50"],["6415","48.71","1.98"],["6416","51.70","-3.05"],["6417","47.00","7.41"],["6418","-31.43","152.90"],["6419","46.52","6.53"],["6420","48.84","10.10"],["6421","52.22","-1.87"],["6422","-37.77","144.96"],["6423","40.88","-81.40"],["6424","45.73","11.91"],["6425","52.01","8.70"],["6426","38.69","-4.11"],["6427","65.19","-123.42"],["6428","50.95","6.66"],["6429","34.14","-118.26"],["6430","42.78","-78.63"],["6431","45.14","26.82"],["6432","16.82","100.27"],["6433","41.68","-91.60"],["6434","48.80","9.80"],["6435","53.59","9.47"],["6436","7.19","125.46"],["6437","-7.56","-35.01"],["6438","13.69","-89.22"],["6439","45.40","-73.57"],["6440","41.64","-87.45"],["6441","-6.48","-36.15"],["6442","47.98","10.18"],["6443","38.53","22.38"],["6444","40.84","-73.62"],["6445","40.58","-75.34"],["6446","8.66","99.89"],["6447","30.42","76.78"],["6448","48.64","1.83"],["6449","27.81","-82.78"],["6450","41.44","-87.68"],["6451","27.04","14.43"],["6452","51.22","6.91"],["6453","17.61","121.73"],["6454","35.91","-81.54"],["6455","49.54","0.19"],["6456","46.32","6.19"],["6457","-31.98","115.78"],["6458","38.53","-8.89"],["6459","49.61","-119.68"],["6460","43.23","13.17"],["6461","37.93","23.70"],["6462","45.18","0.72"],["6463","42.51","1.54"],["6464","52.96","5.92"],["6465","44.62","7.49"],["6466","30.53","105.59"],["6467","37.86","-122.49"],["6468","46.38","7.63"],["6469","52.43","0.24"],["6470","36.10","-83.55"],["6471","31.67","118.51"],["6472","41.88","-71.38"],["6473","53.31","-6.61"],["6474","56.12","47.26"],["6475","39.87","-104.97"],["6476","11.75","11.97"],["6477","26.60","75.04"],["6478","51.21","-1.49"],["6479","35.20","52.33"],["6480","-20.31","57.73"],["6481","42.28","-71.35"],["6482","51.58","-3.22"],["6483","59.97","10.00"],["6484","35.78","139.61"],["6485","-20.29","57.66"],["6486","22.68","81.75"],["6487","48.85","2.55"],["6488","63.84","23.13"],["6489","17.13","79.63"],["6490","7.80","6.73"],["6491","48.79","14.78"],["6492","43.93","2.15"],["6493","14.42","-16.97"],["6494","53.61","-2.70"],["6495","17.99","-92.95"],["6496","18.67","78.09"],["6497","40.21","-75.30"],["6498","5.73","100.51"],["6499","37.07","57.50"],["6500","50.25","8.64"],["6501","46.51","-84.34"],["6502","-21.68","-51.07"],["6503","51.37","-0.37"],["6504","-11.86","-55.51"],["6505","-33.90","151.18"],["6506","35.26","-81.19"],["6507","43.70","0.42"],["6508","41.10","-80.65"],["6509","50.88","6.89"],["6510","49.76","9.51"],["6511","50.20","8.58"],["6512","49.08","19.31"],["6513","44.78","-0.57"],["6514","38.88","-77.30"],["6515","59.32","24.55"],["6516","15.06","120.66"],["6517","50.01","8.45"],["6518","39.20","-94.68"],["6519","36.12","128.34"],["6520","42.44","-91.01"],["6521","33.86","-83.41"],["6522","46.79","12.43"],["6523","44.71","-0.40"],["6524","45.45","-73.46"],["6525","41.14","-104.82"],["6526","35.60","103.21"],["6527","-23.45","-46.53"],["6528","37.83","-122.13"],["6529","40.37","-80.63"],["6530","39.31","-94.92"],["6531","48.67","6.15"],["6532","45.15","5.84"],["6533","50.81","4.94"],["6534","31.73","116.52"],["6535","25.09","104.91"],["6536","54.53","-2.68"],["6537","41.96","-78.65"],["6538","45.48","-74.28"],["6539","48.23","11.67"],["6540","51.12","12.02"],["6541","15.39","73.86"],["6542","35.12","-80.72"],["6543","39.65","27.89"],["6544","33.26","130.30"],["6545","-39.64","176.84"],["6546","15.49","120.97"],["6547","17.17","104.15"],["6548","26.65","74.94"],["6549","40.60","22.99"],["6550","40.58","9.78"],["6551","43.11","-76.22"],["6552","18.90","-99.17"],["6553","35.84","-90.70"],["6554","45.07","7.47"],["6555","50.99","12.44"],["6556","43.97","-79.24"],["6557","35.40","0.14"],["6558","50.44","18.85"],["6559","0.06","34.29"],["6560","33.01","114.02"],["6561","45.10","24.37"],["6562","51.18","14.02"],["6563","27.97","34.36"],["6564","36.60","140.65"],["6565","28.99","79.41"],["6566","29.57","-98.71"],["6567","-26.86","26.63"],["6568","37.07","36.25"],["6569","40.56","8.32"],["6570","57.65","-3.32"],["6571","40.93","-74.04"],["6572","34.72","-76.73"],["6573","61.69","27.27"],["6574","49.85","3.29"],["6575","36.49","139.00"],["6576","44.21","-69.06"],["6577","30.48","76.59"],["6578","48.97","12.16"],["6579","50.63","9.04"],["6580","34.20","-82.16"],["6581","41.04","-111.94"],["6582","39.12","-77.16"],["6583","50.66","3.05"],["6584","40.71","-73.37"],["6585","4.81","114.66"],["6586","38.37","34.03"],["6587","10.87","0.20"],["6588","-7.68","110.83"],["6589","39.41","-76.39"],["6590","32.22","-98.20"],["6591","45.82","-1.10"],["6592","12.52","80.16"],["6593","51.13","4.38"],["6594","48.99","1.91"],["6595","2.73","101.94"],["6596","45.66","25.51"],["6597","46.31","6.04"],["6598","40.12","-75.34"],["6599","23.88","100.09"],["6600","24.48","77.16"],["6601","46.19","6.20"],["6602","42.82","-77.10"],["6603","20.10","-98.76"],["6604","2.53","34.66"],["6605","47.37","-68.33"],["6606","-34.91","138.57"],["6607","32.55","51.51"],["6608","43.19","-79.56"],["6609","51.27","0.52"],["6610","38.17","140.89"],["6611","40.35","-74.18"],["6612","30.38","-89.75"],["6613","51.66","6.63"],["6614","-37.98","145.21"],["6615","45.89","9.34"],["6616","39.35","-76.77"],["6617","44.55","129.63"],["6618","40.30","21.79"],["6619","50.74","-4.00"],["6620","38.01","23.82"],["6621","54.79","32.05"],["6622","43.10","-72.78"],["6623","-3.32","114.59"],["6624","32.52","34.96"],["6625","51.34","7.04"],["6626","45.07","-67.05"],["6627","38.71","-9.39"],["6628","39.90","-7.20"],["6629","8.40","77.09"],["6630","31.28","72.33"],["6631","44.45","-95.79"],["6632","-3.37","29.14"],["6633","39.21","-76.65"],["6634","45.17","28.79"],["6635","54.60","18.23"],["6636","40.63","-74.31"],["6637","5.90","0.99"],["6638","-29.97","30.88"],["6639","53.53","8.11"],["6640","33.89","10.10"],["6641","15.65","32.48"],["6642","35.54","51.23"],["6643","53.80","10.23"],["6644","47.04","-122.90"],["6645","53.70","10.00"],["6646","38.05","-97.35"],["6647","5.53","6.07"],["6648","31.53","35.10"],["6649","40.66","-3.77"],["6650","51.74","-2.28"],["6651","-20.22","57.50"],["6652","33.77","113.19"],["6653","-43.18","147.84"],["6654","46.57","26.91"],["6655","38.61","-1.11"],["6656","47.37","8.79"],["6657","41.92","-71.55"],["6658","47.38","-122.23"],["6659","52.31","9.81"],["6660","45.32","10.94"],["6661","26.59","74.85"],["6662","35.90","-78.57"],["6663","52.52","7.13"],["6664","-31.95","115.83"],["6665","46.25","6.95"],["6666","52.28","9.57"],["6667","39.00","-104.86"],["6668","40.92","38.39"],["6669","-17.30","31.33"],["6670","45.78","12.61"],["6671","3.54","-76.30"],["6672","46.77","14.36"],["6673","9.57","76.64"],["6674","53.74","-1.60"],["6675","45.53","9.11"],["6676","35.03","111.01"],["6677","32.04","75.40"],["6678","44.31","-81.27"],["6679","38.56","-76.08"],["6680","43.36","13.35"],["6681","48.02","-1.75"],["6682","49.12","4.23"],["6683","47.02","8.31"],["6684","40.05","-86.01"],["6685","53.09","-3.80"],["6686","34.23","-83.88"],["6687","38.89","40.50"],["6688","37.69","-122.47"],["6689","40.15","-75.27"],["6690","45.51","12.65"],["6691","15.14","76.92"],["6692","39.47","-87.41"],["6693","42.00","12.10"],["6694","45.46","-98.49"],["6695","50.80","6.48"],["6696","49.58","5.90"],["6697","60.99","24.46"],["6698","41.68","2.79"],["6699","-29.07","-51.60"],["6700","38.10","-1.86"],["6701","37.80","-95.95"],["6702","46.98","-0.44"],["6703","40.89","-73.95"],["6704","30.18","78.12"],["6705","44.94","26.01"],["6706","43.86","-79.51"],["6707","46.44","-71.02"],["6708","5.35","10.11"],["6709","51.18","-115.57"],["6710","-32.98","-68.88"],["6711","44.81","-74.77"],["6712","49.16","-121.95"],["6713","1.49","33.93"],["6714","45.42","11.16"],["6715","35.66","139.70"],["6716","45.49","16.37"],["6717","29.21","-81.02"],["6718","30.42","-86.62"],["6719","36.71","4.05"],["6720","10.76","76.12"],["6721","48.43","2.16"],["6722","26.28","127.78"],["6723","37.46","-122.20"],["6724","36.72","37.11"],["6725","41.24","13.93"],["6726","42.50","-82.90"],["6727","34.18","-118.31"],["6728","29.45","79.56"],["6729","18.13","-94.46"],["6730","41.59","-87.84"],["6731","32.65","14.27"],["6732","18.62","98.78"],["6733","45.64","8.97"],["6734","32.99","70.65"],["6735","36.98","-121.90"],["6736","48.88","2.14"],["6737","26.53","-80.09"],["6738","22.30","70.80"],["6739","-34.76","138.64"],["6740","44.56","-0.25"],["6741","39.26","-1.25"],["6742","35.04","9.48"],["6743","38.66","-9.08"],["6744","49.74","9.01"],["6745","-37.90","145.15"],["6746","39.36","21.92"],["6747","48.78","2.00"],["6748","10.63","-61.28"],["6749","24.52","83.02"],["6750","47.15","7.00"],["6751","23.64","85.51"],["6752","28.73","77.78"],["6753","22.68","88.03"],["6754","-25.75","27.89"],["6755","32.46","35.29"],["6756","50.22","8.27"],["6757","33.62","-114.59"],["6758","19.45","-98.91"],["6759","44.81","-0.54"],["6760","58.94","5.57"],["6761","29.91","-90.20"],["6762","40.31","23.06"],["6763","41.85","-72.57"],["6764","40.66","-73.64"],["6765","15.66","32.55"],["6766","-21.97","-46.80"],["6767","23.23","87.08"],["6768","39.80","-105.09"],["6769","-3.56","-80.43"],["6770","57.38","-6.47"],["6771","33.89","35.56"],["6772","38.72","1.46"],["6773","48.10","20.78"],["6774","34.10","-117.65"],["6775","27.18","78.01"],["6776","34.67","72.03"],["6777","39.54","-76.35"],["6778","40.19","-92.58"],["6779","36.26","2.23"],["6780","52.48","13.84"],["6781","-33.91","151.10"],["6782","25.72","76.11"],["6783","36.59","2.44"],["6784","51.37","7.46"],["6785","34.88","135.80"],["6786","52.05","-0.27"],["6787","-35.49","-62.98"],["6788","40.77","-73.12"],["6789","40.36","-3.91"],["6790","51.29","-0.24"],["6791","41.85","3.13"],["6792","58.85","5.73"],["6793","51.42","-1.73"],["6794","40.06","-75.13"],["6795","41.11","122.99"],["6796","46.99","8.53"],["6797","-18.01","-70.25"],["6798","33.65","-84.45"],["6799","-26.97","152.32"],["6800","50.59","5.87"],["6801","50.26","4.91"],["6802","35.71","139.66"],["6803","52.45","9.74"],["6804","33.89","-117.81"],["6805","51.03","2.38"],["6806","43.33","-8.32"],["6807","3.51","34.13"],["6808","-34.53","138.75"],["6809","45.70","9.31"],["6810","-31.02","151.07"],["6811","52.72","14.13"],["6812","39.83","-77.23"],["6813","22.58","88.02"],["6814","-10.25","-48.32"],["6815","37.68","-122.40"],["6816","36.73","-76.58"],["6817","42.00","-87.97"],["6818","29.63","43.52"],["6819","34.09","-117.44"],["6820","38.73","-9.41"],["6821","35.13","33.36"],["6822","15.56","-61.46"],["6823","39.90","-75.35"],["6824","50.75","25.33"],["6825","35.38","136.94"],["6826","23.85","90.26"],["6827","33.25","-95.90"],["6828","40.06","-82.40"],["6829","24.03","-104.65"],["6830","9.57","77.96"],["6831","46.80","13.49"],["6832","41.58","-85.83"],["6833","17.33","76.83"],["6834","37.47","-121.13"],["6835","28.56","-82.39"],["6836","50.75","8.28"],["6837","51.65","5.96"],["6838","33.74","-118.39"],["6839","34.38","-92.16"],["6840","40.80","-73.65"],["6841","26.15","79.33"],["6842","50.68","-3.24"],["6843","39.58","-77.00"],["6844","51.46","-112.71"],["6845","35.02","135.86"],["6846","-35.03","138.59"],["6847","41.11","-74.15"],["6848","29.71","-95.46"],["6849","42.42","-72.11"],["6850","47.53","7.65"],["6851","50.39","12.34"],["6852","49.24","9.10"],["6853","45.23","5.80"],["6854","47.94","12.94"],["6855","48.12","7.85"],["6856","50.13","8.93"],["6857","49.53","11.15"],["6858","15.49","73.83"],["6859","-27.48","153.02"],["6860","39.06","-76.65"],["6861","34.67","132.54"],["6862","32.48","35.88"],["6863","4.18","73.51"],["6864","43.15","-80.17"],["6865","41.36","-72.10"],["6866","7.76","-12.17"],["6867","51.47","-1.19"],["6868","39.03","-76.60"],["6869","32.46","-84.99"],["6870","51.65","-3.33"],["6871","-5.59","-50.18"],["6872","5.25","-73.77"],["6873","-43.25","-65.31"],["6874","42.03","-87.88"],["6875","29.59","32.72"],["6876","52.84","13.79"],["6877","28.10","-15.47"],["6878","55.17","-118.79"],["6879","37.88","-85.97"],["6880","45.68","-73.44"],["6881","40.59","-122.39"],["6882","55.87","26.54"],["6883","50.92","14.06"],["6884","43.25","-5.78"],["6885","47.17","2.45"],["6886","56.57","9.03"],["6887","52.14","-1.02"],["6888","46.15","9.31"],["6889","38.56","68.79"],["6890","43.80","-70.80"],["6891","39.07","-78.04"],["6892","47.51","12.12"],["6893","42.85","-1.68"],["6894","35.50","140.11"],["6895","44.67","-90.17"],["6896","-34.03","150.66"],["6897","49.47","9.08"],["6898","51.10","4.24"],["6899","53.48","18.75"],["6900","41.73","-93.60"],["6901","59.61","16.54"],["6902","12.61","80.15"],["6903","40.67","-74.11"],["6904","53.28","-8.98"],["6905","15.40","73.81"],["6906","41.59","-90.77"],["6907","41.49","-71.31"],["6908","40.71","-74.36"],["6909","36.75","-3.52"],["6910","8.76","78.13"],["6911","1.47","124.84"],["6912","48.80","9.07"],["6913","53.13","-1.26"],["6914","30.35","-89.15"],["6915","53.23","45.00"],["6916","-14.83","-64.90"],["6917","46.88","-96.90"],["6918","41.18","-8.15"],["6919","29.53","75.03"],["6920","24.79","85.00"],["6921","38.97","-77.39"],["6922","33.82","-118.04"],["6923","42.41","-82.89"],["6924","43.74","3.70"],["6925","52.26","4.50"],["6926","53.43","-2.32"],["6927","43.68","-70.44"],["6928","-27.38","153.08"],["6929","25.80","-100.59"],["6930","48.67","6.99"],["6931","39.44","-121.54"],["6932","10.98","76.23"],["6933","13.78","109.22"],["6934","30.36","-90.07"],["6935","38.30","-78.44"],["6936","-29.72","31.05"],["6937","42.24","-88.32"],["6938","28.41","-106.87"],["6939","-36.12","146.88"],["6940","35.55","139.44"],["6941","47.49","10.72"],["6942","36.92","34.90"],["6943","16.51","80.52"],["6944","50.81","10.23"],["6945","48.79","2.19"],["6946","45.98","8.89"],["6947","22.33","73.48"],["6948","40.05","8.58"],["6949","32.07","23.94"],["6950","23.91","89.12"],["6951","-7.98","-38.29"],["6952","70.48","-68.60"],["6953","42.58","-83.25"],["6954","39.26","9.16"],["6955","38.17","-78.28"],["6956","47.43","8.57"],["6957","8.09","-80.98"],["6958","27.88","102.27"],["6959","51.61","8.34"],["6960","45.58","10.03"],["6961","38.68","15.90"],["6962","15.26","74.77"],["6963","38.96","-76.93"],["6964","41.51","2.20"],["6965","10.28","-61.45"],["6966","12.11","-86.24"],["6967","38.18","-122.59"],["6968","-31.72","-55.99"],["6969","38.32","-88.90"],["6970","52.46","4.61"],["6971","37.82","-122.23"],["6972","34.08","-84.29"],["6973","52.05","113.47"],["6974","-37.82","145.04"],["6975","43.65","3.80"],["6976","52.73","-1.88"],["6977","51.71","-0.61"],["6978","41.45","-70.56"],["6979","57.72","12.94"],["6980","13.34","74.74"],["6981","39.08","-84.51"],["6982","54.79","9.45"],["6983","38.29","109.73"],["6984","38.41","-121.37"],["6985","41.04","14.38"],["6986","40.16","-74.21"],["6987","-25.86","25.64"],["6988","54.01","-2.79"],["6989","32.32","35.02"],["6990","53.86","-9.29"],["6991","-0.44","36.96"],["6992","35.98","-78.51"],["6993","51.61","-0.56"],["6994","43.15","-93.20"],["6995","44.97","-92.76"],["6996","50.31","2.75"],["6997","48.54","9.29"],["6998","21.76","72.15"],["6999","-33.86","-55.54"],["7000","43.42","24.61"],["7001","10.30","9.82"],["7002","8.73","39.01"],["7003","48.85","2.60"],["7004","58.01","56.23"],["7005","33.97","-98.51"],["7006","-6.28","106.71"],["7007","54.52","-6.06"],["7008","45.76","5.69"],["7009","-33.77","151.27"],["7010","20.70","-100.02"],["7011","-21.76","-41.32"],["7012","-41.28","174.78"],["7013","44.51","11.13"],["7014","62.47","6.15"],["7015","51.86","10.99"],["7016","41.44","-81.86"],["7017","47.65","12.96"],["7018","28.95","-81.30"],["7019","44.65","-65.63"],["7020","38.14","-120.46"],["7021","41.80","2.22"],["7022","7.27","80.59"],["7023","34.21","-4.00"],["7024","47.80","10.35"],["7025","43.25","1.68"],["7026","39.98","-76.18"],["7027","40.86","-73.63"],["7028","32.33","15.10"],["7029","51.32","-0.74"],["7030","48.18","5.90"],["7031","47.59","7.77"],["7032","52.30","7.58"],["7033","39.70","2.70"],["7034","59.13","11.39"],["7035","52.20","-3.03"],["7036","52.48","10.55"],["7037","20.18","79.99"],["7038","39.58","-104.88"],["7039","56.41","10.89"],["7040","46.06","14.51"],["7041","38.81","-89.95"],["7042","27.77","-82.64"],["7043","23.70","72.54"],["7044","41.51","-90.52"],["7045","40.83","-73.50"],["7046","51.75","10.69"],["7047","-0.10","34.28"],["7048","48.98","2.56"],["7049","41.99","-70.05"],["7050","39.51","-91.53"],["7051","41.56","-83.65"],["7052","28.66","-81.37"],["7053","44.38","9.06"],["7054","2.52","101.80"],["7055","-7.25","-39.14"],["7056","49.99","8.42"],["7057","-21.45","47.09"],["7058","21.90","83.39"],["7059","38.98","106.38"],["7060","33.77","-117.94"],["7061","6.83","3.92"],["7062","8.29","37.78"],["7063","10.47","-73.24"],["7064","52.81","103.52"],["7065","37.64","23.16"],["7066","-2.23","-80.86"],["7067","36.37","140.47"],["7068","34.57","135.60"],["7069","50.69","4.38"],["7070","30.05","101.96"],["7071","40.53","17.58"],["7072","54.32","48.40"],["7073","30.81","73.45"],["7074","43.48","-72.39"],["7075","38.73","41.49"],["7076","41.16","27.81"],["7077","42.22","-83.40"],["7078","16.74","107.19"],["7079","41.22","1.53"],["7080","35.04","-107.52"],["7081","41.24","16.50"],["7082","7.71","27.98"],["7083","24.01","89.26"],["7084","23.67","86.15"],["7085","32.69","51.54"],["7086","47.86","15.03"],["7087","41.26","-73.94"],["7088","40.11","-75.08"],["7089","44.14","0.34"],["7090","45.65","9.21"],["7091","46.46","6.03"],["7092","48.23","15.35"],["7093","40.90","-8.49"],["7094","51.81","-0.10"],["7095","16.19","-61.59"],["7096","35.79","-95.99"],["7097","40.00","-82.81"],["7098","39.34","-8.94"],["7099","-23.13","-64.32"],["7100","52.35","13.40"],["7101","48.45","9.06"],["7102","33.92","-118.35"],["7103","40.30","-111.69"],["7104","45.70","4.95"],["7105","7.73","8.54"],["7106","50.92","3.21"],["7107","25.86","-80.19"],["7108","44.99","9.01"],["7109","41.67","-3.69"],["7110","53.26","34.42"],["7111","35.96","139.87"],["7112","38.61","16.06"],["7113","-19.53","-40.64"],["7114","50.93","4.37"],["7115","3.03","30.91"],["7116","27.20","60.69"],["7117","30.43","-88.89"],["7118","38.40","-111.64"],["7119","32.76","34.97"],["7120","23.25","91.47"],["7121","43.61","-116.39"],["7122","50.46","40.13"],["7123","44.62","33.53"],["7124","50.85","4.26"],["7125","48.29","10.53"],["7126","21.57","105.83"],["7127","52.73","15.24"],["7128","10.11","76.48"],["7129","10.24","105.96"],["7130","24.73","93.93"],["7131","6.89","-6.44"],["7132","48.92","-1.19"],["7133","40.96","-74.30"],["7134","42.58","-83.03"],["7135","13.98","-14.80"],["7136","43.10","141.54"],["7137","51.28","8.87"],["7138","10.63","-61.35"],["7139","15.88","108.34"],["7140","25.78","87.48"],["7141","51.72","94.46"],["7142","18.24","-66.04"],["7143","22.45","39.13"],["7144","48.92","24.71"],["7145","42.46","-83.38"],["7146","49.55","25.59"],["7147","40.66","-74.30"],["7148","20.28","73.01"],["7149","45.81","4.75"],["7150","53.22","-1.68"],["7151","53.14","6.43"],["7152","43.12","6.13"],["7153","34.84","5.72"],["7154","42.38","-71.64"],["7155","51.73","0.67"],["7156","45.85","9.01"],["7157","35.14","36.76"],["7158","31.87","-116.60"],["7159","44.98","19.62"],["7160","61.12","10.47"],["7161","40.12","18.30"],["7162","33.77","72.36"],["7163","-28.07","153.40"],["7164","37.80","21.35"],["7165","46.31","-79.46"],["7166","51.19","10.04"],["7167","51.54","-3.37"],["7168","52.09","21.12"],["7169","48.40","11.99"],["7170","51.67","5.94"],["7171","48.17","8.63"],["7172","26.59","-80.10"],["7173","38.04","-4.05"],["7174","43.31","-5.70"],["7175","54.20","45.17"],["7176","67.57","33.39"],["7177","51.35","-0.25"],["7178","48.21","13.49"],["7179","23.62","92.72"],["7180","56.90","59.94"],["7181","54.44","-6.42"],["7182","12.61","102.10"],["7183","53.54","-2.11"],["7184","45.65","5.86"],["7185","45.75","7.36"],["7186","-18.17","-47.94"],["7187","-1.61","103.61"],["7188","47.35","7.90"],["7189","46.55","6.57"],["7190","35.20","-89.87"],["7191","-4.00","122.51"],["7192","9.79","38.73"],["7193","37.12","-82.83"],["7194","51.75","4.09"],["7195","40.05","-75.43"],["7196","4.92","-74.02"],["7197","37.27","-81.22"],["7198","48.27","7.40"],["7199","50.63","9.40"],["7200","44.68","34.41"],["7201","38.02","24.01"],["7202","40.93","-73.05"],["7203","-31.61","28.78"],["7204","51.40","7.19"],["7205","-6.93","106.93"],["7206","43.14","-80.26"],["7207","47.67","-2.98"],["7208","54.69","158.62"],["7209","-33.52","-70.60"],["7210","25.91","-80.31"],["7211","17.44","76.66"],["7212","45.49","12.16"],["7213","-33.81","151.29"],["7214","48.58","-3.83"],["7215","48.85","2.48"],["7216","42.25","-71.00"],["7217","51.16","12.93"],["7218","56.14","40.39"],["7219","39.66","106.79"],["7220","50.22","8.40"],["7221","25.87","-80.32"],["7222","17.30","-62.77"],["7223","42.91","-5.00"],["7224","39.40","-84.56"],["7225","34.27","134.13"],["7226","31.00","-93.67"],["7227","47.49","16.51"],["7228","49.30","10.57"],["7229","-38.65","178.00"],["7230","33.28","131.49"],["7231","53.06","158.63"],["7232","13.22","5.26"],["7233","54.23","10.28"],["7234","43.51","4.99"],["7235","40.23","15.27"],["7236","19.10","78.34"],["7237","52.30","21.16"],["7238","58.06","38.81"],["7239","18.43","-64.62"],["7240","51.37","-0.16"],["7241","6.44","100.20"],["7242","37.34","-119.58"],["7243","37.87","-122.46"],["7244","48.82","2.47"],["7245","5.17","100.48"],["7246","48.46","35.05"],["7247","39.49","-74.56"],["7248","37.80","-121.22"],["7249","-32.41","-63.24"],["7250","-33.88","151.19"],["7251","61.01","69.03"],["7252","38.57","-109.55"],["7253","0.52","25.20"],["7254","42.05","12.62"],["7255","49.38","10.19"],["7256","-30.30","153.11"],["7257","22.73","88.33"],["7258","42.91","1.66"],["7259","-34.94","-54.94"],["7260","41.16","-73.86"],["7261","27.51","83.44"],["7262","52.64","5.06"],["7263","35.14","-107.38"],["7264","43.00","-71.45"],["7265","51.54","-0.66"],["7266","51.75","4.15"],["7267","40.80","-76.86"],["7268","41.34","21.55"],["7269","51.55","105.12"],["7270","50.17","12.13"],["7271","43.90","-78.94"],["7272","6.89","3.71"],["7273","6.90","79.92"],["7274","13.68","-89.29"],["7275","29.46","55.67"],["7276","14.12","-16.47"],["7277","21.93","86.75"],["7278","-31.93","115.87"],["7279","68.97","33.09"],["7280","26.05","50.50"],["7281","7.37","-72.65"],["7282","10.66","77.00"],["7283","53.29","-0.84"],["7284","51.17","4.31"],["7285","32.03","34.86"],["7286","50.30","8.27"],["7287","47.81","-122.38"],["7288","50.27","127.54"],["7289","51.88","5.29"],["7290","6.94","79.93"],["7291","43.52","-79.88"],["7292","-34.59","-58.63"],["7293","51.09","13.99"],["7294","45.20","-93.39"],["7295","9.09","36.56"],["7296","34.31","135.61"],["7297","25.24","87.05"],["7298","48.48","-81.33"],["7299","47.72","7.32"],["7300","51.11","10.64"],["7301","39.62","-104.95"],["7302","22.60","80.37"],["7303","-22.71","-43.55"],["7304","40.80","-74.24"],["7305","46.69","6.71"],["7306","39.66","-75.57"],["7307","21.30","77.99"],["7308","48.15","16.94"],["7309","48.30","-97.25"],["7310","19.36","-99.35"],["7311","-6.22","-36.02"],["7312","34.09","-81.18"],["7313","44.98","16.71"],["7314","43.27","-3.16"],["7315","39.85","-82.81"],["7316","41.15","-80.70"],["7317","-25.36","-56.46"],["7318","53.10","-2.44"],["7319","42.82","11.27"],["7320","34.59","73.91"],["7321","43.65","5.26"],["7322","29.92","53.30"],["7323","45.78","8.81"],["7324","54.99","73.36"],["7325","50.81","19.12"],["7326","39.10","-120.95"],["7327","45.61","9.27"],["7328","40.03","-76.50"],["7329","56.10","54.29"],["7330","41.93","-87.99"],["7331","46.53","6.59"],["7332","40.93","-73.96"],["7333","56.03","14.16"],["7334","39.59","-0.46"],["7335","32.57","34.95"],["7336","-37.74","145.22"],["7337","41.15","-73.49"],["7338","37.78","-79.44"],["7339","44.91","-0.24"],["7340","57.77","40.93"],["7341","-0.45","39.65"],["7342","-32.15","116.01"],["7343","-22.22","-49.95"],["7344","45.35","9.20"],["7345","48.13","14.87"],["7346","32.90","129.96"],["7347","37.93","41.94"],["7348","41.06","-73.82"],["7349","22.06","88.08"],["7350","50.98","11.32"],["7351","43.33","-1.93"],["7352","47.01","15.50"],["7353","44.02","1.35"],["7354","41.30","69.24"],["7355","-12.08","-77.05"],["7356","42.10","14.71"],["7357","50.03","15.78"],["7358","53.34","-2.85"],["7359","64.40","27.84"],["7360","34.08","71.99"],["7361","54.19","16.17"],["7362","55.88","12.50"],["7363","33.43","-117.61"],["7364","44.92","-92.96"],["7365","53.69","-1.63"],["7366","36.37","-96.60"],["7367","42.37","-71.30"],["7368","19.11","-96.11"],["7369","48.82","2.30"],["7370","51.38","7.70"],["7371","31.45","-83.51"],["7372","40.26","40.23"],["7373","41.60","-87.34"],["7374","39.88","-83.09"],["7375","32.05","-95.51"],["7376","52.68","-1.83"],["7377","53.30","7.74"],["7378","43.88","-79.44"],["7379","31.18","-83.79"],["7380","37.51","-122.26"],["7381","49.14","15.01"],["7382","36.24","-6.07"],["7383","40.84","17.36"],["7384","35.50","128.75"],["7385","48.96","18.17"],["7386","48.20","3.28"],["7387","48.95","9.13"],["7388","-36.72","-73.12"],["7389","52.13","5.02"],["7390","34.06","-118.12"],["7391","38.97","-0.18"],["7392","51.84","16.59"],["7393","40.04","-75.49"],["7394","43.25","-80.25"],["7395","51.20","4.52"],["7396","49.28","9.69"],["7397","32.88","-80.01"],["7398","34.11","-117.81"],["7399","34.09","-118.36"],["7400","8.77","77.65"],["7401","47.59","7.62"],["7402","38.56","-91.01"],["7403","39.92","-88.57"],["7404","42.74","12.74"],["7405","35.29","136.91"],["7406","47.52","7.69"],["7407","16.78","80.85"],["7408","36.57","128.73"],["7409","-33.87","151.22"],["7410","28.09","-81.72"],["7411","51.75","-3.38"],["7412","48.10","20.86"],["7413","45.87","8.98"],["7414","-21.39","-42.69"],["7415","44.64","22.66"],["7416","46.15","8.95"],["7417","41.81","-71.34"],["7418","51.13","0.26"],["7419","44.68","7.36"],["7420","36.89","10.32"],["7421","48.57","10.91"],["7422","42.23","-71.52"],["7423","37.74","-0.95"],["7424","52.24","4.45"],["7425","31.90","35.20"],["7426","33.89","-84.30"],["7427","37.38","-77.50"],["7428","7.05","-1.40"],["7429","47.62","7.67"],["7430","46.07","8.92"],["7431","36.08","-79.17"],["7432","-0.54","37.46"],["7433","52.39","9.59"],["7434","47.84","13.25"],["7435","59.22","10.93"],["7436","60.88","11.56"],["7437","9.47","-5.61"],["7438","-27.50","152.98"],["7439","37.67","-77.51"],["7440","33.57","-117.73"],["7441","38.72","-9.31"],["7442","47.64","18.83"],["7443","34.23","-92.00"],["7444","48.93","11.45"],["7445","3.07","101.77"],["7446","20.14","-98.88"],["7447","59.93","10.99"],["7448","-24.99","31.60"],["7449","51.11","-0.19"],["7450","40.53","-97.60"],["7451","60.79","11.07"],["7452","14.79","-16.94"],["7453","39.35","-84.56"],["7454","8.96","37.93"],["7455","49.59","34.55"],["7456","47.39","0.72"],["7457","-31.62","-60.68"],["7458","49.52","5.71"],["7459","40.59","-83.13"],["7460","38.02","-7.86"],["7461","-34.58","-58.43"],["7462","42.59","-72.60"],["7463","36.90","-95.93"],["7464","41.43","-73.68"],["7465","43.29","5.57"],["7466","37.91","28.26"],["7467","35.49","139.46"],["7468","48.05","14.42"],["7469","35.14","-93.92"],["7470","46.61","14.04"],["7471","49.70","17.08"],["7472","50.48","4.78"],["7473","43.39","11.22"],["7474","12.98","7.62"],["7475","52.19","-2.51"],["7476","50.28","-3.78"],["7477","50.51","16.02"],["7478","47.20","8.53"],["7479","52.36","13.60"],["7480","35.58","116.99"],["7481","50.55","-3.50"],["7482","44.46","26.51"],["7483","40.30","-83.07"],["7484","47.59","9.07"],["7485","5.48","-54.02"],["7486","45.48","10.18"],["7487","35.77","-91.64"],["7488","44.82","7.90"],["7489","44.76","4.99"],["7490","28.12","-15.52"],["7491","39.93","-75.02"],["7492","47.40","0.66"],["7493","40.72","-74.66"],["7494","42.26","118.89"],["7495","-16.07","35.14"],["7496","13.99","100.65"],["7497","44.06","10.44"],["7498","46.40","8.15"],["7499","32.93","-97.08"],["7500","52.00","5.67"],["7501","5.08","-75.79"],["7502","51.75","-0.45"],["7503","39.00","-84.50"],["7504","53.26","7.93"],["7505","51.60","5.67"],["7506","48.29","25.94"],["7507","45.71","16.08"],["7508","49.87","6.16"],["7509","28.96","-13.65"],["7510","44.03","10.07"],["7511","9.08","40.87"],["7512","50.72","4.53"],["7513","46.41","-105.84"],["7514","40.68","-74.43"],["7515","-36.38","145.40"],["7516","39.03","-8.79"],["7517","2.36","102.04"],["7518","26.87","90.49"],["7519","24.40","111.57"],["7520","40.41","-3.89"],["7521","10.35","15.24"],["7522","4.24","117.89"],["7523","40.94","-91.78"],["7524","35.23","-82.73"],["7525","14.21","120.97"],["7526","52.20","8.34"],["7527","41.06","-111.97"],["7528","32.99","-7.62"],["7529","-21.30","47.64"],["7530","36.65","44.54"],["7531","32.58","-84.55"],["7532","31.01","77.09"],["7533","36.60","-82.19"],["7534","6.71","79.91"],["7535","20.47","-103.45"],["7536","48.49","12.93"],["7537","-45.57","-72.07"],["7538","43.13","-80.75"],["7539","-6.13","23.60"],["7540","33.80","-118.17"],["7541","33.63","-91.79"],["7542","40.20","-76.73"],["7543","27.07","-109.44"],["7544","48.45","10.28"],["7545","42.93","-72.28"],["7546","49.10","-122.66"],["7547","55.94","-3.05"],["7548","41.12","20.80"],["7549","27.71","-82.30"],["7550","47.51","8.02"],["7551","46.56","3.29"],["7552","49.38","3.32"],["7553","32.99","35.69"],["7554","30.36","-89.60"],["7555","53.24","-1.42"],["7556","5.48","10.43"],["7557","15.48","73.82"],["7558","48.80","9.01"],["7559","-25.34","131.04"],["7560","44.73","5.02"],["7561","59.38","17.90"],["7562","-32.07","-60.46"],["7563","28.99","80.17"],["7564","-0.25","-79.18"],["7565","32.33","35.01"],["7566","43.77","142.37"],["7567","52.48","-2.91"],["7568","18.50","-88.30"],["7569","38.00","-121.81"],["7570","39.94","-82.01"],["7571","47.07","15.59"],["7572","41.57","-87.65"],["7573","-31.82","-60.52"],["7574","-15.76","-70.57"],["7575","52.37","-1.40"],["7576","-37.83","144.91"],["7577","30.58","31.50"],["7578","42.09","11.80"],["7579","-22.83","-43.06"],["7580","44.92","10.65"],["7581","51.22","2.93"],["7582","53.26","-8.93"],["7583","47.63","13.00"],["7584","48.29","9.66"],["7585","37.62","-104.78"],["7586","7.96","39.13"],["7587","37.25","-83.19"],["7588","30.29","31.74"],["7589","7.05","38.50"],["7590","47.60","11.06"],["7591","51.54","7.69"],["7592","33.01","97.09"],["7593","36.45","136.55"],["7594","43.99","-95.09"],["7595","-5.90","22.42"],["7596","20.70","83.48"],["7597","38.70","-9.23"],["7598","48.94","2.54"],["7599","53.71","11.82"],["7600","-33.72","151.11"],["7601","34.20","-79.76"],["7602","-25.48","30.97"],["7603","43.64","1.40"],["7604","48.05","16.31"],["7605","-9.53","-77.53"],["7606","41.48","14.47"],["7607","49.76","4.73"],["7608","40.95","0.32"],["7609","53.78","10.49"],["7610","-3.68","33.43"],["7611","41.01","-73.87"],["7612","41.77","12.24"],["7613","46.54","12.14"],["7614","26.12","85.39"],["7615","41.38","33.78"],["7616","48.71","9.65"],["7617","43.76","-71.69"],["7618","16.58","82.00"],["7619","51.59","8.17"],["7620","-5.85","13.46"],["7621","33.66","-85.83"],["7622","-32.50","137.79"],["7623","35.99","-106.08"],["7624","38.20","-97.52"],["7625","46.23","-119.09"],["7626","-24.95","150.08"],["7627","46.24","14.36"],["7628","40.56","-74.28"],["7629","55.92","-4.34"],["7630","47.24","-122.55"],["7631","7.12","40.01"],["7632","28.45","117.94"],["7633","51.62","0.31"],["7634","48.76","2.41"],["7635","46.91","-98.71"],["7636","30.44","77.74"],["7637","42.22","-78.28"],["7638","52.12","9.55"],["7639","47.65","18.51"],["7640","39.82","-84.02"],["7641","52.82","-1.25"],["7642","38.88","-7.16"],["7643","33.45","-112.26"],["7644","43.46","1.33"],["7645","37.89","41.13"],["7646","20.09","-98.37"],["7647","35.20","-85.92"],["7648","42.68","-74.49"],["7649","51.57","5.20"],["7650","51.16","0.01"],["7651","28.41","-16.54"],["7652","50.98","-3.22"],["7653","-7.85","112.02"],["7654","46.72","11.66"],["7655","31.86","35.46"],["7656","6.91","158.16"],["7657","43.09","2.31"],["7658","48.29","-4.46"],["7659","8.55","7.71"],["7660","-7.19","-48.20"],["7661","51.27","9.98"],["7662","53.27","-3.50"],["7663","3.26","101.65"],["7664","33.74","-118.10"],["7665","44.10","-69.11"],["7666","-5.86","-35.36"],["7667","27.56","78.67"],["7668","51.12","12.49"],["7669","12.69","-2.19"],["7670","42.29","-7.87"],["7671","33.84","132.77"],["7672","47.33","2.84"],["7673","-31.92","116.08"],["7674","48.08","-0.77"],["7675","31.02","77.19"],["7676","51.76","7.90"],["7677","39.73","-121.84"],["7678","48.54","12.15"],["7679","32.76","-97.42"],["7680","59.82","10.65"],["7681","40.90","-74.12"],["7682","41.88","-88.20"],["7683","51.52","7.09"],["7684","49.51","-1.47"],["7685","48.82","2.42"],["7686","35.53","-89.00"],["7687","46.43","6.91"],["7688","44.56","27.36"],["7689","-41.12","175.07"],["7690","40.21","-77.01"],["7691","49.07","6.22"],["7692","53.16","-2.22"],["7693","50.07","15.99"],["7694","44.97","-93.51"],["7695","41.64","-70.93"],["7696","39.41","-79.41"],["7697","48.17","12.83"],["7698","40.73","-74.27"],["7699","46.94","7.50"],["7700","50.10","10.99"],["7701","52.65","-7.24"],["7702","48.53","-123.02"],["7703","-38.83","-68.14"],["7704","38.72","-75.08"],["7705","39.49","-0.46"],["7706","44.54","-73.15"],["7707","44.01","-69.90"],["7708","37.52","42.45"],["7709","26.86","100.23"],["7710","51.13","9.55"],["7711","31.73","34.78"],["7712","7.20","5.59"],["7713","27.38","95.90"],["7714","34.39","-118.54"],["7715","1.73","103.90"],["7716","33.36","-81.27"],["7717","32.28","14.52"],["7718","48.32","-1.22"],["7719","58.46","8.77"],["7720","17.63","-63.25"],["7721","49.59","6.17"],["7722","38.76","-93.74"],["7723","48.56","3.30"],["7724","42.58","-71.80"],["7725","23.44","57.43"],["7726","49.13","-122.33"],["7727","50.80","7.21"],["7728","-33.81","151.19"],["7729","48.75","8.87"],["7730","65.31","25.38"],["7731","13.72","-60.95"],["7732","48.82","9.80"],["7733","8.91","38.63"],["7734","-21.27","-43.18"],["7735","54.98","37.23"],["7736","51.27","1.34"],["7737","20.39","78.13"],["7738","42.37","-83.47"],["7739","41.28","-73.87"],["7740","42.26","-83.21"],["7741","30.23","78.69"],["7742","42.52","-83.26"],["7743","42.44","-82.91"],["7744","41.26","-122.14"],["7745","40.05","-7.95"],["7746","51.41","-0.83"],["7747","37.32","-122.03"],["7748","12.59","75.85"],["7749","29.34","47.68"],["7750","13.50","7.10"],["7751","39.46","-8.20"],["7752","33.60","-117.66"],["7753","34.27","-118.78"],["7754","33.96","130.94"],["7755","27.45","-80.33"],["7756","7.73","81.67"],["7757","51.69","4.44"],["7758","40.79","-74.15"],["7759","35.50","11.05"],["7760","35.32","139.55"],["7761","37.94","23.71"],["7762","28.17","-17.22"],["7763","47.13","-122.49"],["7764","32.96","-96.83"],["7765","52.06","0.20"],["7766","17.92","73.80"],["7767","33.98","-117.91"],["7768","-34.34","19.01"],["7769","43.05","-77.10"],["7770","33.30","-84.55"],["7771","37.69","-96.78"],["7772","39.64","-106.37"],["7773","46.36","17.80"],["7774","49.05","2.68"],["7775","14.17","77.81"],["7776","51.97","4.62"],["7777","41.68","-69.96"],["7778","20.83","81.71"],["7779","42.77","-73.70"],["7780","53.26","-3.44"],["7781","23.66","116.62"],["7782","45.75","11.80"],["7783","38.57","-94.88"],["7784","55.78","-3.98"],["7785","51.13","-1.73"],["7786","39.18","-77.06"],["7787","38.77","-76.90"],["7788","36.10","-79.44"],["7789","46.82","-95.85"],["7790","39.46","-76.28"],["7791","40.29","-74.35"],["7792","40.75","-74.16"],["7793","45.38","-122.78"],["7794","38.53","-76.98"],["7795","51.44","-0.34"],["7796","52.81","-2.12"],["7797","-31.95","115.85"],["7798","41.01","-81.61"],["7799","43.62","-94.99"],["7800","26.25","-80.18"],["7801","5.83","7.30"],["7802","9.13","-12.92"],["7803","40.91","-74.38"],["7804","27.40","80.13"],["7805","39.85","-74.96"],["7806","41.51","-87.97"],["7807","57.23","-2.52"],["7808","53.73","-1.86"],["7809","23.60","89.83"],["7810","45.47","12.03"],["7811","39.07","-93.72"],["7812","9.03","7.60"],["7813","35.88","74.46"],["7814","33.69","-102.00"],["7815","-23.11","-55.23"],["7816","45.49","-73.60"],["7817","40.79","17.24"],["7818","41.70","-72.16"],["7819","45.55","9.18"],["7820","31.19","16.57"],["7821","48.22","12.68"],["7822","-32.90","-68.80"],["7823","33.62","-84.37"],["7824","40.84","-74.28"],["7825","42.50","-94.17"],["7826","55.25","9.49"],["7827","-6.36","-39.30"],["7828","36.78","-4.10"],["7829","41.42","-73.95"],["7830","24.15","83.80"],["7831","12.53","78.21"],["7832","23.46","91.18"],["7833","40.81","-74.19"],["7834","40.90","-78.22"],["7835","16.76","77.14"],["7836","44.14","-103.06"],["7837","51.34","-0.27"],["7838","41.20","-73.96"],["7839","53.27","-9.06"],["7840","34.19","48.37"],["7841","28.68","-81.33"],["7842","47.45","7.74"],["7843","41.49","-7.18"],["7844","13.15","79.85"],["7845","-3.37","36.79"],["7846","33.65","130.69"],["7847","40.70","-74.26"],["7848","54.12","17.98"],["7849","53.36","7.21"],["7850","44.25","-69.72"],["7851","42.09","-70.71"],["7852","48.35","18.03"],["7853","37.22","-89.52"],["7854","5.29","100.26"],["7855","39.36","-9.39"],["7856","33.84","-109.96"],["7857","34.92","-81.03"],["7858","-33.36","-70.73"],["7859","42.13","-72.75"],["7860","42.55","-83.21"],["7861","16.56","80.83"],["7862","36.22","139.44"],["7863","29.70","-98.12"],["7864","32.73","74.86"],["7865","47.30","11.51"],["7866","14.66","-16.23"],["7867","36.30","-86.62"],["7868","45.39","9.29"],["7869","34.14","-109.96"],["7870","-38.55","-58.74"],["7871","40.00","-75.32"],["7872","-0.37","35.29"],["7873","48.85","-95.76"],["7874","29.79","-82.49"],["7875","25.75","71.40"],["7876","55.75","9.42"],["7877","23.90","106.62"],["7878","-2.22","113.91"],["7879","4.83","-75.68"],["7880","36.60","-82.19"],["7881","50.01","8.36"],["7882","-5.15","-38.10"],["7883","20.15","94.95"],["7884","47.57","-122.22"],["7885","44.06","-70.39"],["7886","42.58","-82.83"],["7887","21.35","-157.94"],["7888","41.21","-73.89"],["7889","44.55","7.72"],["7890","43.04","-82.48"],["7891","43.19","-3.20"],["7892","56.18","9.55"],["7893","16.31","80.49"],["7894","22.92","57.54"],["7895","-34.47","-58.53"],["7896","21.99","96.16"],["7897","41.09","-112.06"],["7898","-0.33","31.75"],["7899","43.21","-77.43"],["7900","33.35","-111.79"],["7901","39.19","-77.31"],["7902","-12.58","-69.20"],["7903","38.79","-77.19"],["7904","25.58","-80.35"],["7905","38.71","-90.43"],["7906","36.87","-87.49"],["7907","51.17","4.47"],["7908","42.50","-83.18"],["7909","39.76","-75.07"],["7910","26.36","92.88"],["7911","30.11","31.34"],["7912","46.12","13.19"],["7913","53.90","11.45"],["7914","10.74","76.28"],["7915","52.04","23.14"],["7916","35.89","14.42"],["7917","48.50","-122.24"],["7918","41.49","123.69"],["7919","40.75","-86.07"],["7920","13.79","100.33"],["7921","41.05","-0.13"],["7922","34.78","135.40"],["7923","51.52","-3.39"],["7924","43.37","-1.80"],["7925","48.75","2.47"],["7926","12.23","79.07"],["7927","45.20","12.16"],["7928","53.34","-2.73"],["7929","47.54","19.26"],["7930","52.34","124.71"],["7931","-17.49","16.33"],["7932","37.27","127.43"],["7933","32.85","-115.57"],["7934","42.54","-71.51"],["7935","33.74","-116.41"],["7936","51.70","-0.18"],["7937","42.75","-73.76"],["7938","-34.37","150.89"],["7939","37.22","140.58"],["7940","48.85","17.13"],["7941","43.62","-84.25"],["7942","52.90","-1.27"],["7943","40.95","-90.37"],["7944","45.56","-94.32"],["7945","39.39","141.12"],["7946","49.11","7.07"],["7947","13.33","-16.67"],["7948","56.39","-3.43"],["7949","38.40","42.11"],["7950","-22.85","-47.21"],["7951","41.78","-71.44"],["7952","22.77","81.96"],["7953","38.91","141.57"],["7954","-17.91","15.98"],["7955","7.88","-67.47"],["7956","34.09","-117.89"],["7957","34.31","126.76"],["7958","49.10","-123.03"],["7959","33.88","-117.57"],["7960","52.30","5.24"],["7961","42.80","-77.82"],["7962","42.27","2.96"],["7963","39.61","-105.02"],["7964","9.55","1.20"],["7965","10.80","76.83"],["7966","9.99","76.58"],["7967","35.92","-88.76"],["7968","7.19","2.00"],["7969","4.67","12.38"],["7970","48.68","2.56"],["7971","12.12","79.63"],["7972","33.18","129.72"],["7973","30.46","-86.55"],["7974","9.67","76.34"],["7975","-18.36","16.58"],["7976","34.54","-117.29"],["7977","46.89","11.43"],["7978","39.91","8.59"],["7979","39.52","-87.13"],["7980","45.31","-122.95"],["7981","39.63","-105.32"],["7982","50.59","-3.67"],["7983","31.76","72.92"],["7984","40.13","-82.93"],["7985","41.01","-73.78"],["7986","45.76","8.62"],["7987","44.13","4.08"],["7988","55.56","-3.85"],["7989","49.29","1.01"],["7990","41.99","12.72"],["7991","38.87","-1.10"],["7992","-33.91","151.19"],["7993","37.80","12.44"],["7994","53.72","91.43"],["7995","25.59","83.58"],["7996","46.88","-102.79"],["7997","38.51","-1.70"],["7998","50.10","11.44"],["7999","53.06","8.20"],["8000","51.63","0.03"],["8001","40.63","22.44"],["8002","41.36","2.07"],["8003","-28.23","-48.67"],["8004","14.30","120.96"],["8005","50.85","2.88"],["8006","29.58","-81.21"],["8007","38.96","-76.95"],["8008","42.32","140.97"],["8009","50.49","5.86"],["8010","45.81","4.80"],["8011","-17.51","14.99"],["8012","37.24","14.51"],["8013","48.93","2.29"],["8014","11.10","79.65"],["8015","35.44","137.02"],["8016","46.16","8.98"],["8017","38.73","-120.80"],["8018","51.52","-2.54"],["8019","6.62","3.51"],["8020","-16.43","26.78"],["8021","42.74","-71.59"],["8022","36.86","14.76"],["8023","36.75","3.48"],["8024","46.17","10.06"],["8025","40.84","-8.48"],["8026","52.28","4.76"],["8027","3.77","102.55"],["8028","37.49","-2.78"],["8029","-37.88","145.23"],["8030","3.94","102.36"],["8031","-2.87","108.28"],["8032","52.43","30.99"],["8033","26.76","31.50"],["8034","45.96","4.61"],["8035","29.15","48.09"],["8036","42.34","-83.89"],["8037","39.55","-0.40"],["8038","18.19","76.04"],["8039","50.60","4.33"],["8040","30.39","-86.50"],["8041","45.60","12.17"],["8042","33.99","8.23"],["8043","52.10","20.88"],[""]]},7808:e=>{e.exports=[["pubDate","cum_nArts","cum_nCollabs","cum_nGeoCollabs"],["01-01","26","990.0","8.0"],["01-02","34","1150.0","34.0"],["01-03","45","1960.0","73.0"],["01-04","49","2026.0","74.0"],["01-05","51","2081.0","74.0"],["01-06","64","2628.0","107.0"],["01-07","73","2735.0","117.0"],["01-08","88","3098.0","152.0"],["01-09","98","3864.0","216.0"],["01-10","112","4464.0","237.0"],["01-11","116","4518.0","239.0"],["01-12","120","4681.0","273.0"],["01-13","126","5021.0","280.0"],["01-14","137","5171.0","342.0"],["01-15","148","5431.0","360.0"],["01-16","163","5775.0","400.0"],["01-17","174","6059.0","407.0"],["01-18","180","6126.0","415.0"],["01-19","182","6198.0","415.0"],["01-20","190","6523.0","432.0"],["01-21","205","6966.0","469.0"],["01-22","216","7184.0","478.0"],["01-23","230","7739.0","584.0"],["01-24","259","8836.0","608.0"],["01-25","265","9008.0","618.0"],["01-26","265","9008.0","618.0"],["01-27","279","9174.0","627.0"],["01-28","295","9634.0","639.0"],["01-29","312","9969.0","648.0"],["01-30","341","10927.0","747.0"],["01-31","371","11464.0","795.0"],["02-01","399","12618.0","815.0"],["02-02","402","12649.0","826.0"],["02-03","433","13408.0","4625.0"],["02-04","468","14625.0","4672.0"],["02-05","505","15293.0","4722.0"],["02-06","540","15597.0","4780.0"],["02-07","589","16796.0","4963.0"],["02-08","595","16853.0","4975.0"],["02-09","598","16860.0","4979.0"],["02-10","617","17408.0","5020.0"],["02-11","656","18682.0","5096.0"],["02-12","693","19713.0","5224.0"],["02-13","729","20826.0","5356.0"],["02-14","785","21871.0","5463.0"],["02-15","794","21963.0","5469.0"],["02-16","799","21967.0","5469.0"],["02-17","820","22366.0","5498.0"],["02-18","847","22781.0","5514.0"],["02-19","895","23816.0","5816.0"],["02-20","945","25042.0","5876.0"],["02-21","987","25635.0","5908.0"],["02-22","1009","25898.0","5931.0"],["02-23","1015","25914.0","5936.0"],["02-24","1045","26386.0","5954.0"],["02-25","1080","27154.0","6106.0"],["02-26","1128","28499.0","6182.0"],["02-27","1180","29521.0","6221.0"],["02-28","1237","32065.0","6455.0"],["02-29","1253","32278.0","6478.0"],["03-01","1304","32774.0","6529.0"],["03-02","1334","33065.0","6660.0"],["03-03","1388","34145.0","6767.0"],["03-04","1439","34935.0","6830.0"],["03-05","1505","37555.0","7027.0"],["03-06","1555","38887.0","7160.0"],["03-07","1572","38972.0","7188.0"],["03-08","1578","39028.0","7193.0"],["03-09","1622","40783.0","7306.0"],["03-10","1672","41733.0","7356.0"],["03-11","1733","42562.0","7404.0"],["03-12","1808","43861.0","7542.0"],["03-13","1885","46230.0","7968.0"],["03-14","1916","46697.0","8010.0"],["03-15","1935","46877.0","8017.0"],["03-16","1997","47874.0","8053.0"],["03-17","2076","51224.0","8388.0"],["03-18","2160","55590.0","8659.0"],["03-19","2269","58717.0","9028.0"],["03-20","2399","60937.0","9203.0"],["03-21","2440","61779.0","9261.0"],["03-22","2457","66237.0","9288.0"],["03-23","2530","67289.0","9453.0"],["03-24","2606","70324.0","9599.0"],["03-25","2701","73349.0","9968.0"],["03-26","2820","77570.0","10302.0"],["03-27","2982","82645.0","10753.0"],["03-28","3037","84309.0","11047.0"],["03-29","3079","85580.0","11090.0"],["03-30","3246","92616.0","11985.0"],["03-31","3436","96206.0","12797.0"],["04-01","3664","101590.0","13831.0"],["04-02","3860","104905.0","14279.0"],["04-03","4079","110351.0","14780.0"],["04-04","4169","111398.0","14944.0"],["04-05","4202","111626.0","14959.0"],["04-06","4389","117869.0","15696.0"],["04-07","4563","122782.0","16616.0"],["04-08","4796","127493.0","17239.0"],["04-09","5031","135169.0","18518.0"],["04-10","5360","142240.0","19079.0"],["04-11","5543","145880.0","19942.0"],["04-12","5603","149075.0","21033.0"],["04-13","5806","151749.0","21695.0"],["04-14","6000","155918.0","22623.0"],["04-15","6331","161244.0","23345.0"],["04-16","6591","167829.0","24635.0"],["04-17","6942","176985.0","26351.0"],["04-18","7130","181010.0","26958.0"],["04-19","7200","182431.0","27036.0"],["04-20","7460","185471.0","27478.0"],["04-21","7768","190594.0","27971.0"],["04-22","8150","203412.0","29523.0"],["04-23","8534","213543.0","31113.0"],["04-24","8890","220922.0","32425.0"],["04-25","9054","223230.0","32930.0"],["04-26","9149","224563.0","33041.0"],["04-27","9561","233289.0","35203.0"],["04-28","9925","240379.0","35969.0"],["04-29","10272","248431.0","37027.0"],["04-30","10727","264463.0","38020.0"],["05-01","11116","273348.0","38951.0"],["05-02","11225","275988.0","39143.0"],["05-03","11349","280221.0","39488.0"],["05-04","11665","286711.0","40324.0"],["05-05","11973","293152.0","41181.0"],["05-06","12364","301566.0","42137.0"],["05-07","12784","312164.0","44019.0"],["05-08","13266","326131.0","46311.0"],["05-09","13373","327468.0","46432.0"],["05-10","13446","331043.0","46670.0"],["05-11","13977","343419.0","48346.0"],["05-12","14396","350925.0","50051.0"],["05-13","14840","361231.0","51832.0"],["05-14","15278","372071.0","52930.0"],["05-15","15805","381945.0","54308.0"],["05-16","16081","388852.0","55722.0"],["05-17","16182","393594.0","55911.0"],["05-18","16572","402793.0","57282.0"],["05-19","17021","413313.0","58555.0"],["05-20","17422","427305.0","60602.0"],["05-21","17851","436927.0","61659.0"],["05-22","18375","451151.0","62699.0"],["05-23","18691","457482.0","63771.0"],["05-24","18803","459273.0","63994.0"],["05-25","19099","464926.0","64647.0"],["05-26","19517","474612.0","66444.0"],["05-27","19959","487763.0","67256.0"],["05-28","20386","504320.0","68881.0"],["05-29","20875","518337.0","70604.0"],["05-30","21217","525131.0","71421.0"],["05-31","21391","528432.0","71808.0"],["06-01","21879","540744.0","72636.0"],["06-02","22269","548084.0","73424.0"],["06-03","22689","556841.0","74235.0"],["06-04","23157","572889.0","76050.0"],["06-05","23641","584810.0","77173.0"],["06-06","23875","591609.0","77911.0"],["06-07","24033","595355.0","78196.0"],["06-08","24456","607822.0","79809.0"],["06-09","24893","617052.0","80418.0"],["06-10","25353","626011.0","81464.0"],["06-11","25791","639052.0","83802.0"],["06-12","26282","654648.0","86297.0"],["06-13","26509","659336.0","86882.0"],["06-14","26602","662361.0","87203.0"],["06-15","26997","671720.0","88013.0"],["06-16","27401","686700.0","89613.0"],["06-17","27780","707471.0","91067.0"],["06-18","28243","724335.0","93671.0"],["06-19","28623","732408.0","95068.0"],["06-20","28896","744462.0","95488.0"],["06-21","28998","747910.0","95653.0"],["06-22","29354","756743.0","96641.0"],["06-23","29756","765876.0","97928.0"],["06-24","30167","782204.0","100245.0"],["06-25","30646","793071.0","101584.0"],["06-26","31107","810905.0","103232.0"],["06-27","31346","815759.0","103742.0"],["06-28","31473","822502.0","104680.0"],["06-29","31856","843095.0","107245.0"],["06-30","32330","854843.0","108457.0"],["07-01","32963","873411.0","110108.0"],["07-02","33384","882874.0","111409.0"],["07-03","33817","894529.0","112610.0"],["07-04","34070","900000.0","113359.0"],["07-05","34140","901921.0","113539.0"],["07-06","34510","909811.0","114629.0"],["07-07","34883","918306.0","115354.0"],["07-08","35250","931926.0","116708.0"],["07-09","35718","943807.0","119662.0"],["07-10","36190","957362.0","120621.0"],["07-11","36414","962156.0","121181.0"],["07-12","36553","965021.0","121401.0"],["07-13","36928","976577.0","122647.0"],["07-14","37347","988355.0","123740.0"],["07-15","37810","1000886.0","125501.0"],["07-16","38227","1012342.0","127341.0"],["07-17","38660","1025104.0","128390.0"],["07-18","38844","1028163.0","128900.0"],["07-19","38980","1033155.0","129198.0"],["07-20","39286","1040556.0","129810.0"],["07-21","39692","1048803.0","130360.0"],["07-22","40082","1058752.0","131528.0"],["07-23","40567","1074164.0","132909.0"],["07-24","41009","1084335.0","134154.0"],["07-25","41242","1088324.0","134540.0"],["07-26","41317","1089553.0","134597.0"],["07-27","41671","1100049.0","136531.0"],["07-28","42080","1111200.0","137518.0"],["07-29","42426","1121164.0","138582.0"],["07-30","42865","1136002.0","139784.0"],["07-31","43247","1155114.0","141909.0"],["08-01","43593","1164207.0","143664.0"],["08-02","43684","1166816.0","143800.0"],["08-03","44022","1175468.0","144578.0"],["08-04","44423","1188299.0","146324.0"],["08-05","44790","1201086.0","147290.0"],["08-06","45255","1213830.0","148349.0"],["08-07","45653","1226889.0","150431.0"],["08-08","45857","1232433.0","150959.0"],["08-09","45986","1235094.0","151171.0"],["08-10","46330","1247595.0","152082.0"],["08-11","46771","1257935.0","153120.0"],["08-12","47104","1270166.0","153971.0"],["08-13","47578","1284763.0","158399.0"],["08-14","48010","1300106.0","160188.0"],["08-15","48248","1306812.0","160436.0"],["08-16","48361","1312364.0","160879.0"],["08-17","48698","1321371.0","161766.0"],["08-18","49139","1331477.0","162649.0"],["08-19","49525","1341847.0","163451.0"],["08-20","49972","1355225.0","164953.0"],["08-21","50468","1373389.0","166322.0"],["08-22","50651","1376008.0","166644.0"],["08-23","50745","1377826.0","166924.0"],["08-24","51078","1387926.0","167945.0"],["08-25","51550","1403569.0","170292.0"],["08-26","51969","1415085.0","171755.0"],["08-27","52439","1433105.0","174230.0"],["08-28","52886","1444379.0","175419.0"],["08-29","53117","1483791.0","176103.0"],["08-30","53202","1485333.0","176205.0"],["08-31","53502","1491812.0","176972.0"],["09-01","54092","1512008.0","178377.0"],["09-02","54548","1533946.0","179708.0"],["09-03","54972","1548246.0","181520.0"],["09-04","55344","1557381.0","182537.0"],["09-05","55508","1560886.0","182913.0"],["09-06","55678","1563680.0","183363.0"],["09-07","55964","1578293.0","186571.0"],["09-08","56256","1585715.0","187114.0"],["09-09","56636","1597609.0","188294.0"],["09-10","57036","1608016.0","189299.0"],["09-11","57490","1623175.0","190861.0"],["09-12","57687","1627746.0","191531.0"],["09-13","57758","1632677.0","192904.0"],["09-14","58070","1642129.0","193788.0"],["09-15","58493","1654380.0","194890.0"],["09-16","58900","1663404.0","196273.0"],["09-17","59294","1676906.0","197323.0"],["09-18","59818","1691489.0","198505.0"],["09-19","60057","1697209.0","199170.0"],["09-20","60170","1700704.0","199569.0"],["09-21","60585","1712916.0","200949.0"],["09-22","61148","1734153.0","203575.0"],["09-23","61603","1749160.0","205774.0"],["09-24","62060","1779491.0","208001.0"],["09-25","62529","1792644.0","209000.0"],["09-26","62694","1795133.0","209201.0"],["09-27","62783","1797026.0","209293.0"],["09-28","63254","1808591.0","221577.0"],["09-29","63668","1822759.0","222723.0"],["09-30","64314","1842416.0","224706.0"],["10-01","64979","1865378.0","226713.0"],["10-02","65323","1879918.0","227293.0"],["10-03","65524","1884019.0","227666.0"],["10-04","65585","1885320.0","227801.0"],["10-05","65918","1896191.0","229389.0"],["10-06","66432","1913937.0","231938.0"],["10-07","66832","1925066.0","232929.0"],["10-08","67322","1943660.0","234579.0"],["10-09","67793","1959564.0","236280.0"],["10-10","68053","1965389.0","236873.0"],["10-11","68134","1967203.0","237025.0"],["10-12","68766","1984493.0","238084.0"],["10-13","69164","1995819.0","239339.0"],["10-14","69627","2009675.0","240332.0"],["10-15","70174","2051465.0","243174.0"],["10-16","70686","2064573.0","245154.0"],["10-17","70925","2073676.0","246325.0"],["10-18","71003","2075967.0","246436.0"],["10-19","71364","2086166.0","247453.0"],["10-20","71786","2098262.0","248731.0"],["10-21","72301","2112778.0","249766.0"],["10-22","72808","2128625.0","251984.0"],["10-23","73200","2140763.0","253019.0"],["10-24","73391","2146339.0","253526.0"],["10-25","73454","2147947.0","253570.0"],["10-26","73828","2164386.0","255052.0"],["10-27","74210","2176313.0","256230.0"],["10-28","74539","2204484.0","256991.0"],["10-29","74986","2217397.0","258332.0"],["10-30","75387","2230468.0","259553.0"],["10-31","75781","2242020.0","260037.0"],["11-01","76055","2251525.0","260967.0"],["11-02","76414","2271835.0","262794.0"],["11-03","76737","2282455.0","263913.0"],["11-04","77110","2298196.0","265267.0"],["11-05","77536","2317583.0","267204.0"],["11-06","77910","2330363.0","268437.0"],["11-07","78101","2335174.0","268904.0"],["11-08","78177","2337765.0","269077.0"],["11-09","78622","2360752.0","274458.0"],["11-10","78932","2375837.0","275934.0"],["11-11","79309","2386876.0","277098.0"],["11-12","79694","2400556.0","278443.0"],["11-13","80074","2413590.0","279614.0"],["11-14","80188","2416590.0","279857.0"],["11-15","80264","2418328.0","280044.0"],["11-16","80598","2430799.0","281226.0"],["11-17","81007","2456258.0","283118.0"],["11-18","81323","2465609.0","283852.0"],["11-19","81727","2483385.0","285143.0"],["11-20","82144","2498449.0","286150.0"],["11-21","82324","2503689.0","286673.0"],["11-22","82412","2507199.0","286882.0"],["11-23","82795","2518767.0","287530.0"],["11-24","83193","2535933.0","288610.0"],["11-25","83616","2550172.0","290609.0"],["11-26","83987","2570307.0","291861.0"],["11-27","84291","2583087.0","293217.0"],["11-28","84540","2590124.0","293771.0"],["11-29","84620","2592046.0","293855.0"],["11-30","85048","2605402.0","295091.0"],["12-01","85548","2619691.0","296234.0"],["12-02","85868","2632851.0","297430.0"],["12-03","86307","2649654.0","298962.0"],["12-04","86633","2667813.0","299934.0"],["12-05","86807","2670964.0","300171.0"],["12-06","86882","2674336.0","300806.0"],["12-07","87206","2684519.0","301381.0"],["12-08","87510","2705979.0","305919.0"],["12-09","87902","2719316.0","307510.0"],["12-10","88279","2736524.0","309062.0"],["12-11","88690","2751919.0","311161.0"],["12-12","88782","2753505.0","311354.0"],["12-13","88893","2756872.0","311764.0"],["12-14","89259","2773130.0","313216.0"],["12-15","89600","2781788.0","313911.0"],["12-16","90040","2796470.0","352608.0"],["12-17","90409","2843710.0","354937.0"],["12-18","90687","2854473.0","357599.0"],["12-19","90824","2857568.0","357861.0"],["12-20","90866","2859156.0","358020.0"],["12-21","91133","2869559.0","358971.0"],["12-22","91449","2880381.0","360328.0"],["12-23","91739","2889310.0","361016.0"],["12-24","91984","2899008.0","363010.0"],["12-25","92073","2904389.0","363431.0"],["12-26","92235","2909322.0","363846.0"],["12-27","92288","2910055.0","363921.0"],["12-28","92527","2918136.0","364451.0"],["12-29","92760","2924692.0","364818.0"],["12-30","92995","2935824.0","365878.0"],["12-31","93513","2955500.0","367401.0"],[""]]},4991:e=>{e.exports=[["source","target","deg"],["33306989","33378609","1"],["32731258","33378609","1"],["32722908","33378609","1"],["22095567","33378609","1"],["32702298","33378609","1"],["32756549","33378609","1"],["33077678","33301246","1"],["33053279","33301246","1"],["32150748","33301246","1"],["33139139","33378609","1"],["16731915","33378609","1"],["33217362","33378609","1"],["32663912","33378609","1"],["32075877","33301246","1"],["21937658","33378609","1"],["22032844","33378609","1"],["32877576","33378609","1"],["32926660","33378609","1"],["33053279","33378609","1"],["33220855","33378609","1"],["18797453","33301246","1"],["32273591","33378609","1"],["32702299","33378609","1"],["26465999","33378609","1"],["22536382","33378609","1"],["32991794","33378609","1"],["31828291","33301246","1"],["33301246","33378609","1"],["26264835","33301246","1"],["32227757","33378609","1"],["27626517","33378609","1"],["27269431","33378609","1"],["16195424","21937658","2"],["16461566","21937658","2"],["17200946","21937658","2"],["17194199","21937658","2"],["15024391","21937658","2"],["15054081","21937658","2"],["17108024","21937658","2"],["15096611","21937658","2"],["15314040","21937658","2"],["16214268","21937658","2"],["15530413","21937658","2"],["16213065","21937658","2"],["15695582","21937658","2"],["17037596","21937658","2"],["16505353","21937658","2"],["15827197","21937658","2"],["15837235","21937658","2"],["16121363","21937658","2"],["16968120","21937658","2"],["16873249","21937658","2"],["16195440","21937658","2"],["16862151","21937658","2"],["16169905","21937658","2"],["16690096","21937658","2"],["15655773","21937658","2"],["15731234","21937658","2"],["12781533","21937658","2"],["14963300","21937658","2"],["15695582","16731915","2"],["15650189","16731915","2"],["15642942","16731915","2"],["15577937","16731915","2"],["15530413","16731915","2"],["15507655","16731915","2"],["15708987","16731915","2"],["15504263","16731915","2"],["15381196","16731915","2"],["15367630","16731915","2"],["15356154","16731915","2"],["15220038","16731915","2"],["15220033","16731915","2"],["15210961","16731915","2"],["15474494","16731915","2"],["15731223","16731915","2"],["15749124","16731915","2"],["15755610","16731915","2"],["14752165","21937658","2"],["14569023","21937658","2"],["12781535","21937658","2"],["17222058","21937658","2"],["12734147","21937658","2"],["12184362","21937658","2"],["16254327","16731915","2"],["16195424","16731915","2"],["16169905","16731915","2"],["16166518","16731915","2"],["16101349","16731915","2"],["16035944","16731915","2"],["16022774","16731915","2"],["15814718","16731915","2"],["15791205","16731915","2"],["15016880","21937658","2"],["17227689","21937658","2"],["18199635","21937658","2"],["17499378","21937658","2"],["17194199","22536382","2"],["17108019","22536382","2"],["16497416","22536382","2"],["16476986","22536382","2"],["16322745","22536382","2"],["16214268","22536382","2"],["16195424","22536382","2"],["15324552","22536382","2"],["15205534","22536382","2"],["15016880","22536382","2"],["14681510","22536382","2"],["12865378","22536382","2"],["12690092","22536382","2"],["12690091","22536382","2"],["12682352","22536382","2"],["17416434","22536382","2"],["17917067","22536382","2"],["17928346","22536382","2"],["17931153","22536382","2"],["7962541","27269431","2"],["4305198","27269431","2"],["4305197","27269431","2"],["21937658","22536382","2"],["21762752","22536382","2"],["20883165","22536382","2"],["20406307","22536382","2"],["12671062","22536382","2"],["20374001","22536382","2"],["19297479","22536382","2"],["18941225","22536382","2"],["18824060","22536382","2"],["18753223","22536382","2"],["18463152","22536382","2"],["18191004","22536382","2"],["18018769","22536382","2"],["19345285","22536382","2"],["17416434","21937658","2"],["12235218","22536382","2"],["9175832","22536382","2"],["19079256","21937658","2"],["19036930","21937658","2"],["18981084","21937658","2"],["18941225","21937658","2"],["18824060","21937658","2"],["18753223","21937658","2"],["18656518","21937658","2"],["18582997","21937658","2"],["15194798","16731915","2"],["18018769","21937658","2"],["17620608","21937658","2"],["17537853","21937658","2"],["17515829","21937658","2"],["17515642","21937658","2"],["17507479","21937658","2"],["19176631","21937658","2"],["19181630","21937658","2"],["19234811","21937658","2"],["19420084","21937658","2"],["8901605","22536382","2"],["8627759","22536382","2"],["7836924","22536382","2"],["6754243","22536382","2"],["4305198","22536382","2"],["4305197","22536382","2"],["21755013","21937658","2"],["11711632","22536382","2"],["21703402","21937658","2"],["20977431","21937658","2"],["20960282","21937658","2"],["20883165","21937658","2"],["20876821","21937658","2"],["20110095","21937658","2"],["19888339","21937658","2"],["19800030","21937658","2"],["20980507","21937658","2"],["15194770","16731915","2"],["14996844","16731915","2"],["15155925","16731915","2"],["16670345","31828291","2"],["16586358","31828291","2"],["11599686","31828291","2"],["26038486","26264835","2"],["25540984","26264835","2"],["25359562","26264835","2"],["25233993","26264835","2"],["25078002","26264835","2"],["25027661","26264835","2"],["23799535","26264835","2"],["23542122","26264835","2"],["23306021","26264835","2"],["23296926","26264835","2"],["23296925","26264835","2"],["23159882","26264835","2"],["17913310","31828291","2"],["18991332","31828291","2"],["19879222","31828291","2"],["21632986","31828291","2"],["29402578","31828291","2"],["29109276","31828291","2"],["29069368","31828291","2"],["29066091","31828291","2"],["28935236","31828291","2"],["28636855","31828291","2"],["28635557","31828291","2"],["23051623","26264835","2"],["28428558","31828291","2"],["27061888","31828291","2"],["27025838","31828291","2"],["25714138","31828291","2"],["25697739","31828291","2"],["25119609","31828291","2"],["24667168","31828291","2"],["23824369","31828291","2"],["27346939","31828291","2"],["22908294","26264835","2"],["22782619","26264835","2"],["22278370","26264835","2"],["15208624","18797453","2"],["14976262","18797453","2"],["14976261","18797453","2"],["14729660","18797453","2"],["14567964","18797453","2"],["14564000","18797453","2"],["12927681","18797453","2"],["15233739","18797453","2"],["11607032","18797453","2"],["10918143","18797453","2"],["10037236","18797453","2"],["9518670","18797453","2"],["8559660","18797453","2"],["8552671","18797453","2"],["8522182","18797453","2"],["7839312","18797453","2"],["10918485","18797453","2"],["29409570","31828291","2"],["15268662","18797453","2"],["16039576","18797453","2"],["21890902","26264835","2"],["21150709","26264835","2"],["20461061","26264835","2"],["20080679","26264835","2"],["19609242","26264835","2"],["18797453","26264835","2"],["18438401","26264835","2"],["15547138","18797453","2"],["16111635","26264835","2"],["1889744","26264835","2"],["1546298","26264835","2"],["18071662","18797453","2"],["17932806","18797453","2"],["17038590","18797453","2"],["16732888","18797453","2"],["16111635","18797453","2"],["15670750","26264835","2"],["15161975","16731915","2"],["29471464","31828291","2"],["30551178","31828291","2"],["12690091","16731915","2"],["11162792","16731915","2"],["32079150","32150748","2"],["32064853","32150748","2"],["32046819","32150748","2"],["32003551","32150748","2"],["31995857","32150748","2"],["31986264","32150748","2"],["31986261","32150748","2"],["31978945","32150748","2"],["29348656","32150748","2"],["27775012","32150748","2"],["19598148","32150748","2"],["19393959","32150748","2"],["12925421","32150748","2"],["12690092","16731915","2"],["12711465","16731915","2"],["12730500","16731915","2"],["12730501","16731915","2"],["15150417","16731915","2"],["15096611","16731915","2"],["15078936","16731915","2"],["15043961","16731915","2"],["15024391","16731915","2"],["12574374","27269431","2"],["14983044","16731915","2"],["32065055","32075877","2"],["14963300","16731915","2"],["14715271","16731915","2"],["14675530","16731915","2"],["14670965","16731915","2"],["14647384","16731915","2"],["12958366","16731915","2"],["12774078","16731915","2"],["12748314","16731915","2"],["14752165","16731915","2"],["32057769","32075877","2"],["32015508","32075877","2"],["32015507","32075877","2"],["27578435","32075877","2"],["26935699","32075877","2"],["24040512","32075877","2"],["21325420","32075877","2"],["19321428","32075877","2"],["18562523","32075877","2"],["16954221","32075877","2"],["27617430","32075877","2"],["16597622","32075877","2"],["15264254","32075877","2"],["14647384","32075877","2"],["12885899","32075877","2"],["12393927","32075877","2"],["11121305","32075877","2"],["9814710","32075877","2"],["8254673","32075877","2"],["15572765","32075877","2"],["30216647","31828291","2"],["28008928","32075877","2"],["28393837","32075877","2"],["32007145","32075877","2"],["32007143","32075877","2"],["31996437","32075877","2"],["31995857","32075877","2"],["31986264","32075877","2"],["31986261","32075877","2"],["31591575","32075877","2"],["28165473","32075877","2"],["31534041","32075877","2"],["30712865","32075877","2"],["30356097","32075877","2"],["30102747","32075877","2"],["29872003","32075877","2"],["29513216","32075877","2"],["29073020","32075877","2"],["28807998","32075877","2"],["31504163","32075877","2"],["15286725","27269431","2"],["24850731","27269431","2"],["17344286","27269431","2"],["32663912","32991794","2"],["32640463","32991794","2"],["32555424","32991794","2"],["32540900","32991794","2"],["32526206","32991794","2"],["32434946","32991794","2"],["32289263","32991794","2"],["32214079","32991794","2"],["32015508","32991794","2"],["31351922","32991794","2"],["31079849","32991794","2"],["30501873","32991794","2"],["28931244","32991794","2"],["28807998","32991794","2"],["26802140","32991794","2"],["32697968","32991794","2"],["32722908","32991794","2"],["32756549","32991794","2"],["9143688","33053279","2"],["32555134","33053279","2"],["32289263","33053279","2"],["32075877","33053279","2"],["31079849","33053279","2"],["28807998","33053279","2"],["26650692","33053279","2"],["26264835","33053279","2"],["24066892","32991794","2"],["25830322","33053279","2"],["23701746","33053279","2"],["20362616","33053279","2"],["19493565","33053279","2"],["18797453","33053279","2"],["15474494","33053279","2"],["15265895","33053279","2"],["15033360","33053279","2"],["25742465","33053279","2"],["32663912","33053279","2"],["21398392","32991794","2"],["18824060","32991794","2"],["14506376","32877576","2"],["32697968","32756549","2"],["32663912","32756549","2"],["32637598","32756549","2"],["32574299","32756549","2"],["32526206","32756549","2"],["32385100","32756549","2"],["32352406","32756549","2"],["32087114","32756549","2"],["32075877","32756549","2"],["31712433","32756549","2"],["31371616","32756549","2"],["30785039","32756549","2"],["30691364","32756549","2"],["29566112","32756549","2"],["19198616","32877576","2"],["20008423","32877576","2"],["22844480","32877576","2"],["26259809","32877576","2"],["18419349","32991794","2"],["17855683","32991794","2"],["32785213","32877576","2"],["32731257","32877576","2"],["32726528","32877576","2"],["32670071","32877576","2"],["32659783","32877576","2"],["20463105","32991794","2"],["32618497","32877576","2"],["32203189","32877576","2"],["32191675","32877576","2"],["32075877","32877576","2"],["31402384","32877576","2"],["29897849","32877576","2"],["28413427","32877576","2"],["26921779","32877576","2"],["32463443","32877576","2"],["32785213","33053279","2"],["32792628","33053279","2"],["32998157","33053279","2"],["32991794","33220855","2"],["32896291","33220855","2"],["32887977","33220855","2"],["32877576","33220855","2"],["32789505","33220855","2"],["32731258","33220855","2"],["32702299","33220855","2"],["32702298","33220855","2"],["32507409","33220855","2"],["32320465","33220855","2"],["32199492","33220855","2"],["32091533","33220855","2"],["31735500","33220855","2"],["30742894","33220855","2"],["29519670","33220855","2"],["33053279","33220855","2"],["33069281","33220855","2"],["18797453","33301246","2"],["26264835","33301246","2"],["33335322","33306989","2"],["33220855","33306989","2"],["33200120","33306989","2"],["33034689","33306989","2"],["32778354","33306989","2"],["32702298","33306989","2"],["32539990","33306989","2"],["27092831","33220855","2"],["32534626","33306989","2"],["25832102","33306989","2"],["15033648","33306989","2"],["33077678","33301246","2"],["33053279","33301246","2"],["32150748","33301246","2"],["32075877","33301246","2"],["31828291","33301246","2"],["32171076","33306989","2"],["25629663","33220855","2"],["22808149","33220855","2"],["17313487","33220855","2"],["30616012","33217362","2"],["27332149","33217362","2"],["26887309","33217362","2"],["22426327","33217362","2"],["15096554","33217362","2"],["32877576","33139139","2"],["32731258","33139139","2"],["32207377","33217362","2"],["32726802","33139139","2"],["32636454","33139139","2"],["32434946","33139139","2"],["32434945","33139139","2"],["32376603","33139139","2"],["32303590","33139139","2"],["32235945","33139139","2"],["32075877","33139139","2"],["32722908","33139139","2"],["29456015","32756549","2"],["32255761","33217362","2"],["32376603","33217362","2"],["16213065","33220855","2"],["16129869","33220855","2"],["6234369","33220855","2"],["33089772","33217362","2"],["33069281","33217362","2"],["33015650","33217362","2"],["32967006","33217362","2"],["32346146","33217362","2"],["32943637","33217362","2"],["32702298","33217362","2"],["32663912","33217362","2"],["32532802","33217362","2"],["32512579","33217362","2"],["32450106","33217362","2"],["32393526","33217362","2"],["32385100","33217362","2"],["32789505","33217362","2"],["17194199","27269431","2"],["29326426","32756549","2"],["29275847","32756549","2"],["32434945","32702298","2"],["32325038","32702298","2"],["32085823","32702298","2"],["31613649","32702298","2"],["31312806","32702298","2"],["31096710","32702298","2"],["30830861","32702298","2"],["30703077","32702298","2"],["29519670","32702298","2"],["29467399","32702298","2"],["26458833","32702298","2"],["25629663","32702298","2"],["22808149","32702298","2"],["21937658","32702298","2"],["15507655","32702298","2"],["32473127","32702298","2"],["32497196","32702298","2"],["32555388","32702298","2"],["32577525","32702298","2"],["32243722","32702299","2"],["32227757","32702299","2"],["32219428","32702299","2"],["32207377","32702299","2"],["32007143","32702299","2"],["30712865","32702299","2"],["28017642","32702299","2"],["32497196","32663912","2"],["22825819","32702299","2"],["20087930","32702299","2"],["17021110","32702299","2"],["14605137","32702299","2"],["32979941","32702298","2"],["32731258","32702298","2"],["32616673","32702298","2"],["32591408","32702298","2"],["21619905","32702299","2"],["32277878","32702299","2"],["32450106","32663912","2"],["32434945","32663912","2"],["18258008","32663912","2"],["17855683","32663912","2"],["26446606","27269431","2"],["26203246","27269431","2"],["25882242","27269431","2"],["25640653","27269431","2"],["25589660","27269431","2"],["25520500","27269431","2"],["4284810","18797453","2"],["24453361","27269431","2"],["22536382","27269431","2"],["21937658","27269431","2"],["20303868","27269431","2"],["19345285","27269431","2"],["18941225","27269431","2"],["22816037","32663912","2"],["23526951","32663912","2"],["26107625","32663912","2"],["26935699","32663912","2"],["32433465","32663912","2"],["32385100","32663912","2"],["32375025","32663912","2"],["32346146","32663912","2"],["32344679","32663912","2"],["32267220","32663912","2"],["32075877","32663912","2"],["32434946","32663912","2"],["31553909","32663912","2"],["31079849","32663912","2"],["30691364","32663912","2"],["30356097","32663912","2"],["29739835","32663912","2"],["29336703","32663912","2"],["28807998","32663912","2"],["28585916","32663912","2"],["31371616","32663912","2"],["32346093","32702299","2"],["32356867","32702299","2"],["32366511","32702299","2"],["6072745","32756549","2"],["4305198","32756549","2"],["32839763","32722908","2"],["32778225","32722908","2"],["32756549","32722908","2"],["32731258","32722908","2"],["32663912","32722908","2"],["32595632","32722908","2"],["32591408","32722908","2"],["32555424","32722908","2"],["32540903","32722908","2"],["32526206","32722908","2"],["32473127","32722908","2"],["32454512","32722908","2"],["32450106","32722908","2"],["15755610","32756549","2"],["16796401","32756549","2"],["16973594","32756549","2"],["17194199","32756549","2"],["29199281","32756549","2"],["28807998","32756549","2"],["28457665","32756549","2"],["28111638","32756549","2"],["27892925","32756549","2"],["27708058","32756549","2"],["26976607","32756549","2"],["32434946","32722908","2"],["26935699","32756549","2"],["26552008","32756549","2"],["26218507","32756549","2"],["24179220","32756549","2"],["24043791","32756549","2"],["23618766","32756549","2"],["21937658","32756549","2"],["20709108","32756549","2"],["26855426","32756549","2"],["32434945","32722908","2"],["32433465","32722908","2"],["32385100","32722908","2"],["28536429","32722908","2"],["28457665","32722908","2"],["28275193","32722908","2"],["27826140","32722908","2"],["27682426","32722908","2"],["24043791","32722908","2"],["23887981","32722908","2"],["28807998","32722908","2"],["22166544","32722908","2"],["14569023","32722908","2"],["12163607","32722908","2"],["32571838","32702299","2"],["32555424","32702299","2"],["32473127","32702299","2"],["32450106","32702299","2"],["32385100","32702299","2"],["18797453","32722908","2"],["29277291","32756549","2"],["29514901","32722908","2"],["30420505","32722908","2"],["32376603","32722908","2"],["32303590","32722908","2"],["32259480","32722908","2"],["32235945","32722908","2"],["32219057","32722908","2"],["32203366","32722908","2"],["32191675","32722908","2"],["29739835","32722908","2"],["32142651","32722908","2"],["32074444","32722908","2"],["31553909","32722908","2"],["31371616","32722908","2"],["30938227","32722908","2"],["30785039","32722908","2"],["30691364","32722908","2"],["30681265","32722908","2"],["32075877","32722908","2"],["1690918","18797453","2"]]},317:e=>{e.exports=[["PMID","title","journal","pubYear","nodeGroup","nCitedBy"],["31402384","Safety and Immunogenicity of a Respiratory Syncytial Virus Fusion (F) Protein Nanoparticle Vaccine in Healthy Third-Trimester Pregnant Women and Their Infants.","The Journal of infectious diseases","2019","2","11"],["16873249","Supramolecular architecture of severe acute respiratory syndrome coronavirus revealed by electron cryomicroscopy.","Journal of virology","2006","2","111"],["31978945","A Novel Coronavirus from Patients with Pneumonia in China, 2019.","The New England journal of medicine","2020","2","5574"],["12393927","PHENIX: building new software for automated crystallographic structure determination.","Acta crystallographica. Section D, Biological crystallography","2002","2","2357"],["33220855","Safety and immunogenicity of ChAdOx1 nCoV-19 vaccine administered in a prime-boost regimen in young and old adults (COV002): a single-blind, randomised, controlled, phase 2/3 trial.","Lancet (London, England)","2020","1","36"],["29073020","Tectonic conformational changes of a coronavirus spike glycoprotein promote membrane fusion.","Proceedings of the National Academy of Sciences of the United States of America","2017","2","142"],["32637598","Impact of mRNA chemistry and manufacturing process on innate immune activation.","Science advances","2020","2","4"],["12781533","Epidemiological determinants of spread of causal agent of severe acute respiratory syndrome in Hong Kong.","Lancet (London, England)","2003","2","411"],["32267220","Severe Acute Respiratory Syndrome Coronavirus 2-Specific Antibody Responses in Coronavirus Disease Patients.","Emerging infectious diseases","2020","2","372"],["22808149","A novel chimpanzee adenovirus vector with low human seroprevalence: improved systems for vector derivation and comparative immunogenicity.","PloS one","2012","2","100"],["32595632","Structure-Based Design of Nipah Virus Vaccines: A Generalizable Approach to Paramyxovirus Immunogen Development.","Frontiers in immunology","2020","2","3"],["32967006","SARS-CoV-2 vaccines in development.","Nature","2020","2","92"],["21150709","Messenger RNA-based vaccines with dual activity induce balanced TLR-7 dependent adaptive immune responses and provide antitumor activity.","Journal of immunotherapy (Hagerstown, Md. : 1997)","2011","2","84"],["29409570","Early season co-circulation of influenza A(H3N2) and B(Yamagata): interim estimates of 2017/18 vaccine effectiveness, Canada, January 2018.","Euro surveillance : bulletin Europeen sur les maladies transmissibles = European communicable disease bulletin","2018","2","43"],["12671062","A cluster of cases of severe acute respiratory syndrome in Hong Kong.","The New England journal of medicine","2003","2","474"],["18438401","A combinatorial library of lipid-like materials for delivery of RNAi therapeutics.","Nature biotechnology","2008","2","335"],["16322745","Immunopathogenesis of coronavirus infections: implications for SARS.","Nature reviews. Immunology","2005","2","194"],["29066091","Influenza vaccination in tropical and subtropical areas.","The Lancet. Respiratory medicine","2017","2","8"],["27892925","A mouse model for MERS coronavirus-induced acute respiratory distress syndrome.","Nature microbiology","2016","2","96"],["29467399","Assessment of novel vaccination regimens using viral vectored liver stage malaria vaccines encoding ME-TRAP.","Scientific reports","2018","2","14"],["29739835","Nucleoside-modified mRNA vaccines induce potent T follicular helper and germinal center B cell responses.","The Journal of experimental medicine","2018","2","53"],["14996844","Structural characterization of the SARS-coronavirus spike S fusion protein core.","The Journal of biological chemistry","2004","2","110"],["32235945","Virological assessment of hospitalized patients with COVID-2019.","Nature","2020","2","1343"],["30703077","Postlicensure Safety Surveillance of Recombinant Zoster Vaccine (Shingrix) - United States, October 2017-June 2018.","MMWR. Morbidity and mortality weekly report","2019","2","10"],["24179220","Structure-based design of a fusion glycoprotein vaccine for respiratory syncytial virus.","Science (New York, N.Y.)","2013","2","306"],["28428558","A joint analysis of influenza-associated hospitalizations and mortality in Hong Kong, 1998-2013.","Scientific reports","2017","2","17"],["32731257","Single-shot Ad26 vaccine protects against SARS-CoV-2 in rhesus macaques.","Nature","2020","2","96"],["25714138","Immunogenicity of intramuscular MF59-adjuvanted and intradermal administered influenza enhanced vaccines in subjects aged over 60: A literature review.","Human vaccines & immunotherapeutics","2015","2","20"],["32670071","Convalescent Plasma Coupled With Medications for the Treatment of a Severe COVID-19 Patient: Drugs Analysis and Pharmaceutical Care Based on the Newly Established Guidelines for COVID-19 Remedy.","Frontiers in pharmacology","2020","2","2"],["18199635","Structural basis for potent cross-neutralizing human monoclonal antibody protection against lethal human and zoonotic severe acute respiratory syndrome coronavirus challenge.","Journal of virology","2008","2","81"],["26887309","[Immunological surrogate endpoints to evaluate vaccine efficacy].","Zhonghua yu fang yi xue za zhi [Chinese journal of preventive medicine]","2015","2","1"],["32203189","Characterization of the receptor-binding domain (RBD) of 2019 novel coronavirus: implication for development of RBD protein as a viral attachment inhibitor and vaccine.","Cellular & molecular immunology","2020","2","320"],["15033648","A modified poisson regression approach to prospective studies with binary data.","American journal of epidemiology","2004","2","2525"],["11711632","Differential histopathology and chemokine gene expression in lung tissues following respiratory syncytial virus (RSV) challenge of formalin-inactivated RSV- or BBG2Na-immunized mice.","Journal of virology","2001","2","17"],["26935699","Pre-fusion structure of a human coronavirus spike protein.","Nature","2016","2","236"],["32778225","Development of an Inactivated Vaccine Candidate, BBIBP-CorV, with Potent Protection against SARS-CoV-2.","Cell","2020","2","68"],["15210961","Contributions of the structural proteins of severe acute respiratory syndrome coronavirus to protective immunity.","Proceedings of the National Academy of Sciences of the United States of America","2004","2","180"],["17913310","Safety and immunogenicity of a high dosage trivalent influenza vaccine among elderly subjects.","Vaccine","2007","2","60"],["32454512","A human neutralizing antibody targets the receptor-binding site of SARS-CoV-2.","Nature","2020","2","188"],["20110095","Immunization with an attenuated severe acute respiratory syndrome coronavirus deleted in E protein protects against lethal respiratory disease.","Virology","2010","2","69"],["31828291","Comparative Immunogenicity of Several Enhanced Influenza Vaccine Options for Older Adults: A Randomized, Controlled Trial.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2020","1","11"],["24667168","Low 2012-13 influenza vaccine effectiveness associated with mutation in the egg-adapted H3N2 vaccine strain not antigenic drift in circulating viruses.","PloS one","2014","2","138"],["23824369","Traditional and new influenza vaccines.","Clinical microbiology reviews","2013","2","116"],["26650692","Innate immune system activation by viral RNA: How to predict it?","Virology","2015","2","3"],["14976262","Species-specific recognition of single-stranded RNA via toll-like receptor 7 and 8.","Science (New York, N.Y.)","2004","2","1107"],["31995857","Early Transmission Dynamics in Wuhan, China, of Novel Coronavirus-Infected Pneumonia.","The New England journal of medicine","2020","2","3642"],["20406307","Effect of mucosal and systemic immunization with virus-like particles of severe acute respiratory syndrome coronavirus in mice.","Immunology","2010","2","33"],["16121363","A serological survey on neutralizing antibody titer of SARS convalescent sera.","Journal of medical virology","2005","2","31"],["25027661","A cationic nanoemulsion for the delivery of next-generation RNA vaccines.","Molecular therapy : the journal of the American Society of Gene Therapy","2014","2","66"],["31712433","mRNA structure regulates protein expression through changes in functional half-life.","Proceedings of the National Academy of Sciences of the United States of America","2019","2","15"],["27682426","Pre-fusion F is absent on the surface of formalin-inactivated respiratory syncytial virus.","Scientific reports","2016","2","34"],["17537853","Interferon-mediated immunopathological events are associated with atypical innate and adaptive immune responses in patients with severe acute respiratory syndrome.","Journal of virology","2007","2","187"],["25540984","Lipid-based mRNA vaccine delivery systems.","Expert review of vaccines","2014","2","40"],["33069281","Safety and immunogenicity of an inactivated SARS-CoV-2 vaccine, BBIBP-CorV: a randomised, double-blind, placebo-controlled, phase 1/2 trial.","The Lancet. Infectious diseases","2020","2","22"],["32839763","SARS-CoV-2-Specific T Cells Exhibit Phenotypic Features of Helper Function, Lack of Terminal Differentiation, and High Proliferation Potential.","Cell reports. Medicine","2020","2","20"],["26259809","A Randomized, Blinded, Controlled, Dose-Ranging Study of a Respiratory Syncytial Virus Recombinant Fusion (F) Nanoparticle Vaccine in Healthy Women of Childbearing Age.","The Journal of infectious diseases","2015","2","53"],["23542122","A simple method of mouse lung intubation.","Journal of visualized experiments : JoVE","2013","2","22"],["33139139","NVX-CoV2373 vaccine protects cynomolgus macaque upper and lower airways against SARS-CoV-2 challenge.","Vaccine","2020","1","20"],["30938227","Towards a solution to MERS: protective human monoclonal antibodies targeting different domains and functions of the MERS-coronavirus spike glycoprotein.","Emerging microbes & infections","2019","2","39"],["17931153","GlaxoSmithKline Adjuvant Systems in vaccines: concepts, achievements and perspectives.","Expert review of vaccines","2007","2","141"],["25697739","Clinical effectiveness of split-virion versus subunit trivalent influenza vaccines in older adults.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2015","2","14"],["25832102","Immunogenicity of reduced dose priming schedules of serogroup C meningococcal conjugate vaccine followed by booster at 12 months in infants: open label randomised controlled trial.","BMJ (Clinical research ed.)","2015","2","6"],["15814718","Receptor-binding domain of severe acute respiratory syndrome coronavirus spike protein contains multiple conformation-dependent epitopes that induce highly potent neutralizing antibodies.","Journal of immunology (Baltimore, Md. : 1950)","2005","2","135"],["28275193","Structure-Based Design of a Soluble Prefusion-Closed HIV-1 Env Trimer with Reduced CD4 Affinity and Improved Immunogenicity.","Journal of virology","2017","2","32"],["18258008","Duration of antibody responses after severe acute respiratory syndrome.","Emerging infectious diseases","2007","2","106"],["30356097","Stabilized coronavirus spikes are resistant to conformational changes induced by receptor recognition or proteolysis.","Scientific reports","2018","2","114"],["15827197","Aged BALB/c mice as a model for increased severity of severe acute respiratory syndrome in elderly humans.","Journal of virology","2005","2","122"],["29872003","ISOLDE: a physically realistic environment for model building into low-resolution electron-density maps.","Acta crystallographica. Section D, Structural biology","2018","2","67"],["30785039","Optimization of Lipid Nanoparticles for Intramuscular Administration of mRNA Vaccines.","Molecular therapy. Nucleic acids","2019","2","28"],["25640653","Identification of an ideal adjuvant for receptor-binding domain-based subunit vaccines against Middle East respiratory syndrome coronavirus.","Cellular & molecular immunology","2015","2","69"],["29277291","Adaptive evolution influences the infectious dose of MERS-CoV necessary to achieve severe respiratory disease.","Virology","2017","2","20"],["16022774","SARS vaccine development.","Emerging infectious diseases","2005","2","79"],["14752165","Molecular evolution of the SARS coronavirus during the course of the SARS epidemic in China.","Science (New York, N.Y.)","2004","2","334"],["32726802","A vaccine targeting the RBD of the S protein of SARS-CoV-2 induces protective immunity.","Nature","2020","2","45"],["18656518","The contribution of type I interferon signaling to immunity induced by alphavirus replicon vaccines.","Vaccine","2008","2","14"],["18991332","Inference by eye: reading the overlap of independent confidence intervals.","Statistics in medicine","2009","2","90"],["32325038","Safety and immunogenicity of a candidate Middle East respiratory syndrome coronavirus viral-vectored vaccine: a dose-escalation, open-label, non-randomised, uncontrolled, phase 1 trial.","The Lancet. Infectious diseases","2020","2","40"],["25882242","Type 2 cytokines: mechanisms and therapeutic strategies.","Nature reviews. Immunology","2015","2","200"],["14506376","Effect of palivizumab prophylaxis in decreasing respiratory syncytial virus hospitalizations in premature infants.","The Pediatric infectious disease journal","2003","2","37"],["15033360","Very fast folding and association of a trimerization domain from bacteriophage T4 fibritin.","Journal of molecular biology","2004","2","33"],["33034689","COVID-19 in critical care: epidemiology of the first epidemic wave across England, Wales and Northern Ireland.","Intensive care medicine","2020","2","11"],["32046819","Incubation period of 2019 novel coronavirus (2019-nCoV) infections among travellers from Wuhan, China, 20-28 January 2020.","Euro surveillance : bulletin Europeen sur les maladies transmissibles = European communicable disease bulletin","2020","2","391"],["30691364","Structure-Based Vaccine Antigen Design.","Annual review of medicine","2019","2","25"],["17499378","Animal models and vaccines for SARS-CoV infection.","Virus research","2007","2","73"],["16586358","Dose-related safety and immunogenicity of a trivalent baculovirus-expressed influenza-virus hemagglutinin vaccine in elderly adults.","The Journal of infectious diseases","2006","2","36"],["32534626","Seroprevalence of anti-SARS-CoV-2 IgG antibodies in Geneva, Switzerland (SEROCoV-POP): a population-based study.","Lancet (London, England)","2020","2","140"],["18562523","Cathepsin L functionally cleaves the severe acute respiratory syndrome coronavirus class I fusion protein upstream of rather than adjacent to the fusion peptide.","Journal of virology","2008","2","117"],["28636855","Efficacy of Recombinant Influenza Vaccine in Adults 50 Years of Age or Older.","The New England journal of medicine","2017","2","47"],["32722908","Evaluation of the mRNA-1273 Vaccine against SARS-CoV-2 in Nonhuman Primates.","The New England journal of medicine","2020","1","92"],["14715271","A model of the ACE2 structure and function as a SARS-CoV receptor.","Biochemical and biophysical research communications","2004","2","71"],["29326426","mRNA vaccines - a new era in vaccinology.","Nature reviews. Drug discovery","2018","2","269"],["28935236","Effectiveness of influenza vaccines in preventing severe influenza illness among adults: A systematic review and meta-analysis of test-negative design case-control studies.","The Journal of infection","2017","2","31"],["12885899","The coronavirus spike protein is a class I virus fusion protein: structural and functional characterization of the fusion core complex.","Journal of virology","2003","2","504"],["16101349","Elicitation of immunity in mice after immunization with the S2 subunit of the severe acute respiratory syndrome coronavirus.","DNA and cell biology","2005","2","15"],["28585916","MERS-CoV Antibody Responses 1 Year after Symptom Onset, South Korea, 2015.","Emerging infectious diseases","2017","2","90"],["4305198","Respiratory syncytial virus disease in infants despite prior administration of antigenic inactivated vaccine.","American journal of epidemiology","1969","2","601"],["27332149","Persistence of Antibodies against Middle East Respiratory Syndrome Coronavirus.","Emerging infectious diseases","2016","2","73"],["20008423","Motavizumab for prophylaxis of respiratory syncytial virus in high-risk children: a noninferiority trial.","Pediatrics","2009","2","59"],["15755610","Evaluation of modified vaccinia virus Ankara based recombinant SARS vaccine in ferrets.","Vaccine","2005","2","89"],["8254673","Comparative protein modelling by satisfaction of spatial restraints.","Journal of molecular biology","1993","2","4452"],["4284810","Selective chemical modifications of uridine and pseudouridine in polynucleotides and their effect on the specificities of ribonuclease and phosphodiesterases.","Journal of the American Chemical Society","1965","2","8"],["25520500","Severe acute respiratory syndrome-associated coronavirus vaccines formulated with delta inulin adjuvants provide enhanced protection while ameliorating lung eosinophilic immunopathology.","Journal of virology","2014","2","72"],["24066892","Immune senescence and vaccination in the elderly.","Current topics in medicinal chemistry","2013","2","10"],["16039576","Cell type-specific involvement of RIG-I in antiviral response.","Immunity","2005","2","521"],["8627759","Respiratory synctial virus infection in BALB/c mice previously immunized with formalin-inactivated virus induces enhanced pulmonary inflammatory response with a predominant Th2-like cytokine pattern.","Journal of virology","1996","2","112"],["15043961","Interaction between heptad repeat 1 and 2 regions in spike protein of SARS-associated coronavirus: implications for virus fusogenic mechanism and identification of fusion inhibitors.","Lancet (London, England)","2004","2","220"],["33077678","Prospects for a safe COVID-19 vaccine.","Science translational medicine","2020","1","11"],["16476986","Comparative evaluation of two severe acute respiratory syndrome (SARS) vaccine candidates in mice challenged with SARS coronavirus.","The Journal of general virology","2006","2","64"],["29109276","Contemporary H3N2 influenza viruses have a glycosylation site that alters binding of antibodies elicited by egg-adapted vaccine strains.","Proceedings of the National Academy of Sciences of the United States of America","2017","2","141"],["20080679","Lipid-like materials for low-dose, in vivo gene silencing.","Proceedings of the National Academy of Sciences of the United States of America","2010","2","263"],["32352406","Prototype pathogen approach for pandemic preparedness: world on fire.","The Journal of clinical investigation","2020","2","4"],["32142651","SARS-CoV-2 Cell Entry Depends on ACE2 and TMPRSS2 and Is Blocked by a Clinically Proven Protease Inhibitor.","Cell","2020","2","3590"],["25119609","Efficacy of high-dose versus standard-dose influenza vaccine in older adults.","The New England journal of medicine","2014","2","175"],["14963300","Medicine. Caution urged on SARS vaccines.","Science (New York, N.Y.)","2004","2","47"],["21937658","A double-inactivated severe acute respiratory syndrome coronavirus vaccine provides incomplete protection in mice and induces increased eosinophilic proinflammatory pulmonary response upon challenge.","Journal of virology","2011","1","174"],["31613649","Aiming for protective T-cell responses: a focus on the first generation conserved-region HIVconsv vaccines in preventive and therapeutic clinical trials.","Expert review of vaccines","2019","2","6"],["23887981","Mixture models for single-cell assays with applications to vaccine studies.","Biostatistics (Oxford, England)","2013","2","28"],["18824060","A SARS DNA vaccine induces neutralizing antibody and cellular immune responses in healthy adults in a Phase I clinical trial.","Vaccine","2008","2","110"],["32616673","Primary exposure to SARS-CoV-2 protects against reinfection in rhesus macaques.","Science (New York, N.Y.)","2020","2","98"],["33301246","Safety and Efficacy of the BNT162b2 mRNA Covid-19 Vaccine.","The New England journal of medicine","2020","0","162"],["1546298","Reversal of diabetes insipidus in Brattleboro rats: intrahypothalamic injection of vasopressin mRNA.","Science (New York, N.Y.)","1992","2","39"],["32640463","Factors associated with COVID-19-related death using OpenSAFELY.","Nature","2020","2","385"],["15194798","An exposed domain in the severe acute respiratory syndrome coronavirus spike protein induces neutralizing antibodies.","Journal of virology","2004","2","57"],["32618497","High neutralizing antibody titer in intensive care unit patients with COVID-19.","Emerging microbes & infections","2020","2","21"],["20709108","Generation of VSV pseudotypes using recombinant ΔG-VSV for studies on virus entry, identification of entry inhibitors, and immune responses to vaccines.","Journal of virological methods","2010","2","94"],["31591575","Real-time cryo-electron microscopy data preprocessing with Warp.","Nature methods","2019","2","65"],["33200120","Ethnicity and clinical outcomes in COVID-19: A systematic review and meta-analysis.","EClinicalMedicine","2020","2","10"],["27025838","A Perfect Storm: Impact of Genomic Variation and Serial Vaccination on Low Influenza Vaccine Effectiveness During the 2014-2015 Season.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2016","2","70"],["32255761","High Contagiousness and Rapid Spread of Severe Acute Respiratory Syndrome Coronavirus 2.","Emerging infectious diseases","2020","2","286"],["19036930","Synthetic recombinant bat SARS-like coronavirus is infectious in cultured cells and in mice.","Proceedings of the National Academy of Sciences of the United States of America","2008","2","110"],["17515829","Atypical measles and enhanced respiratory syncytial virus disease (ERD) made simple.","Pediatric research","2007","2","23"],["29275847","Self-Amplifying RNA Vaccines Give Equivalent Protection against Influenza to mRNA Vaccines but at Much Lower Doses.","Molecular therapy : the journal of the American Society of Gene Therapy","2017","2","59"],["32979941","Robust T Cell Immunity in Convalescent Individuals with Asymptomatic or Mild COVID-19.","Cell","2020","2","169"],["15530413","Inactivated SARS-CoV vaccine elicits high titers of spike protein-specific antibodies that block receptor binding and virus entry.","Biochemical and biophysical research communications","2004","2","72"],["22536382","Immunization with SARS coronavirus vaccines leads to pulmonary immunopathology on challenge with the SARS virus.","PloS one","2012","1","195"],["26218507","Evaluation of candidate vaccine approaches for MERS-CoV.","Nature communications","2015","2","149"],["22426327","Safety and immunogenicity of a novel human Enterovirus 71 (EV71) vaccine: a randomized, placebo-controlled, double-blind, Phase I clinical trial.","Vaccine","2012","2","38"],["15474494","Receptor-binding domain of SARS-CoV spike protein induces highly potent neutralizing antibodies: implication for developing subunit vaccine.","Biochemical and biophysical research communications","2004","2","175"],["32507409","Consensus summary report for CEPI/BC March 12-13, 2020 meeting: Assessment of risk of disease enhancement with COVID-19 vaccines.","Vaccine","2020","2","24"],["16954221","Structural basis of neutralization by a human anti-severe acute respiratory syndrome spike protein antibody, 80R.","The Journal of biological chemistry","2006","2","100"],["18941225","Prior immunization with severe acute respiratory syndrome (SARS)-associated coronavirus (SARS-CoV) nucleocapsid protein causes severe pneumonia in mice infected with SARS-CoV.","Journal of immunology (Baltimore, Md. : 1950)","2008","2","93"],["15367630","Retroviruses pseudotyped with the severe acute respiratory syndrome coronavirus spike protein efficiently infect cells expressing angiotensin-converting enzyme 2.","Journal of virology","2004","2","110"],["18981084","Cutting edge: Eosinophils do not contribute to respiratory syncytial virus vaccine-enhanced disease.","Journal of immunology (Baltimore, Md. : 1950)","2008","2","30"],["16461566","Specific epitopes of the structural and hypothetical proteins elicit variable humoral responses in SARS patients.","Journal of clinical pathology","2006","2","17"],["28807998","Immunogenicity and structures of a rationally designed prefusion MERS-CoV spike antigen.","Proceedings of the National Academy of Sciences of the United States of America","2017","2","230"],["32091533","Characteristics of and Important Lessons From the Coronavirus Disease 2019 (COVID-19) Outbreak in China: Summary of a Report of 72 314 Cases From the Chinese Center for Disease Control and Prevention.","JAMA","2020","2","3911"],["23296925","In vitro transcription of long RNA containing modified nucleosides.","Methods in molecular biology (Clifton, N.J.)","2013","2","28"],["32065055","Potent binding of 2019 novel coronavirus spike protein by a SARS coronavirus-specific human monoclonal antibody.","Emerging microbes & infections","2020","2","407"],["22166544","RNAscope: a novel in situ RNA analysis platform for formalin-fixed, paraffin-embedded tissues.","The Journal of molecular diagnostics : JMD","2012","2","669"],["9143688","Neutralizing antiviral B cell responses.","Annual review of immunology","1997","2","131"],["21762752","Chimeric severe acute respiratory syndrome coronavirus (SARS-CoV) S glycoprotein and influenza matrix 1 efficiently form virus-like particles (VLPs) that protect mice against challenge with SARS-CoV.","Vaccine","2011","2","42"],["32726528","Single-Dose Nirsevimab for Prevention of RSV in Preterm Infants.","The New England journal of medicine","2020","2","12"],["29456015","Multi-antigenic human cytomegalovirus mRNA vaccines that elicit potent humoral and cell-mediated immunity.","Vaccine","2018","2","32"],["16195440","Virology. Researchers tie deadly SARS virus to bats.","Science (New York, N.Y.)","2005","2","10"],["32756549","SARS-CoV-2 mRNA vaccine design enabled by prototype pathogen preparedness.","Nature","2020","1","85"],["30216647","Seasonal influenza immunisation: Strategies for older adults.","International journal of clinical practice","2018","2","6"],["6072745","Altered reactivity to measles virus. Atypical measles in children previously immunized with inactivated measles virus vaccines.","JAMA","1967","2","84"],["19393959","Incubation periods of acute respiratory viral infections: a systematic review.","The Lancet. Infectious diseases","2009","2","255"],["20876821","How innate immune mechanisms contribute to antibody-enhanced viral infections.","Clinical and vaccine immunology : CVI","2010","2","51"],["32064853","[The epidemiological characteristics of an outbreak of 2019 novel coronavirus diseases (COVID-19) in China].","Zhonghua liu xing bing xue za zhi = Zhonghua liuxingbingxue zazhi","2020","2","995"],["15837235","Comparison of single versus booster dose of influenza vaccination on humoral and cellular immune responses in older adults.","Vaccine","2005","2","21"],["16169905","Severe acute respiratory syndrome coronavirus-like virus in Chinese horseshoe bats.","Proceedings of the National Academy of Sciences of the United States of America","2005","2","678"],["33089772","Serologic Responses in Healthy Adult with SARS-CoV-2 Reinfection, Hong Kong, August 2020.","Emerging infectious diseases","2020","2","6"],["32171076","Clinical course and risk factors for mortality of adult inpatients with COVID-19 in Wuhan, China: a retrospective cohort study.","Lancet (London, England)","2020","2","6093"],["22825819","Seroprevalence of neutralizing antibodies to human adenovirus type 5 in healthy adults in China.","Journal of medical virology","2012","2","14"],["27269431","Immunization with inactivated Middle East Respiratory Syndrome coronavirus vaccine leads to lung immunopathology on challenge with live virus.","Human vaccines & immunotherapeutics","2016","1","97"],["12925421","Investigation of a nosocomial outbreak of severe acute respiratory syndrome (SARS) in Toronto, Canada.","CMAJ : Canadian Medical Association journal = journal de l'Association medicale canadienne","2003","2","160"],["32792628","A high-throughput neutralizing antibody assay for COVID-19 diagnosis and vaccine evaluation.","Nature communications","2020","2","24"],["19297479","Differential virological and immunological outcome of severe acute respiratory syndrome coronavirus infection in susceptible and resistant transgenic mice expressing human angiotensin-converting enzyme 2.","Journal of virology","2009","2","22"],["23159882","Protective efficacy of in vitro synthesized, specific mRNA vaccines against influenza A virus infection.","Nature biotechnology","2012","2","116"],["29519670","Heterologous Two-Dose Vaccination with Simian Adenovirus and Poxvirus Vectors Elicits Long-Lasting Cellular Immunity to Influenza Virus A in Healthy Adults.","EBioMedicine","2018","2","39"],["22908294","Nonviral delivery of self-amplifying RNA vaccines.","Proceedings of the National Academy of Sciences of the United States of America","2012","2","148"],["27775012","Comparison of incubation period distribution of human infections with MERS-CoV in South Korea and Saudi Arabia.","Scientific reports","2016","2","22"],["29897849","Improved Titers against Influenza Drift Variants with a Nanoparticle Vaccine.","The New England journal of medicine","2018","2","11"],["1889744","Modulation of firefly luciferase stability and impact on studies of gene regulation.","Gene","1991","2","123"],["32577525","A single dose of ChAdOx1 MERS provides protective immunity in rhesus macaques.","Science advances","2020","2","17"],["15547138","Activation of the protein kinase PKR by short double-stranded RNAs with single-stranded tails.","RNA (New York, N.Y.)","2004","2","49"],["32555424","Clinical and immunological assessment of asymptomatic SARS-CoV-2 infections.","Nature medicine","2020","2","481"],["32555134","Coronavirus Disease 2019 Case Surveillance - United States, January 22-May 30, 2020.","MMWR. Morbidity and mortality weekly report","2020","2","154"],["10918485","Sodium phosphate enhances plasmid DNA expression in vivo.","Gene therapy","2000","2","13"],["32075877","Cryo-EM structure of the 2019-nCoV spike in the prefusion conformation.","Science (New York, N.Y.)","2020","1","1802"],["28393837","Cryo-EM structures of MERS-CoV and SARS-CoV spike glycoproteins reveal the dynamic receptor binding domains.","Nature communications","2017","2","249"],["32303590","Comparative pathogenesis of COVID-19, MERS, and SARS in a nonhuman primate model.","Science (New York, N.Y.)","2020","2","218"],["10918143","Optimization of repeated-batch transcription for RNA production.","Biotechnology and bioengineering","2000","2","1"],["25233993","mRNA-based therapeutics--developing a new class of drugs.","Nature reviews. Drug discovery","2014","2","272"],["32346146","The race for coronavirus vaccines: a graphical guide.","Nature","2020","2","76"],["15096554","Antibody response and viraemia during the course of severe acute respiratory syndrome (SARS)-associated coronavirus infection.","Journal of medical microbiology","2004","2","26"],["26552008","A SARS-like cluster of circulating bat coronaviruses shows potential for human emergence.","Nature medicine","2015","2","245"],["16035944","Vaccine design for severe acute respiratory syndrome coronavirus.","Viral immunology","2005","2","16"],["20374001","A 219-mer CHO-expressing receptor-binding domain of SARS-CoV S protein induces potent immune responses and protective immunity.","Viral immunology","2010","2","27"],["19420084","Early upregulation of acute respiratory distress syndrome-associated cytokines promotes lethal disease in an aged-mouse model of severe acute respiratory syndrome coronavirus infection.","Journal of virology","2009","2","79"],["15024391","A DNA vaccine induces SARS coronavirus neutralization and protective immunity in mice.","Nature","2004","2","329"],["28165473","cryoSPARC: algorithms for rapid unsupervised cryo-EM structure determination.","Nature methods","2017","2","650"],["9175832","IL-4 rapidly produced by V beta 4 V alpha 8 CD4+ T cells instructs Th2 development and susceptibility to Leishmania major in BALB/c mice.","Immunity","1997","2","86"],["32385100","Rapid COVID-19 vaccine development.","Science (New York, N.Y.)","2020","2","105"],["12711465","Coronavirus as a possible cause of severe acute respiratory syndrome.","Lancet (London, England)","2003","2","1395"],["33015650","Cross-Sectional Evaluation of Humoral Responses against SARS-CoV-2 Spike.","Cell reports. Medicine","2020","2","20"],["15205534","Promotion of B cell immune responses via an alum-induced myeloid cell population.","Science (New York, N.Y.)","2004","2","77"],["7962541","Anti-IL-4 treatment at immunization modulates cytokine expression, reduces illness, and increases cytotoxic T lymphocyte activity in mice challenged with respiratory syncytial virus.","The Journal of clinical investigation","1994","2","50"],["14567964","Fatal systemic inflammatory response syndrome in a ornithine transcarbamylase deficient patient following adenoviral gene transfer.","Molecular genetics and metabolism","2003","2","371"],["33217362","Safety, tolerability, and immunogenicity of an inactivated SARS-CoV-2 vaccine in healthy adults aged 18-59 years: a randomised, double-blind, placebo-controlled, phase 1/2 clinical trial.","The Lancet. Infectious diseases","2020","1","26"],["30551178","Comparative Immunogenicity of Enhanced Seasonal Influenza Vaccines in Older Adults: A Systematic Review and Meta-analysis.","The Journal of infectious diseases","2019","2","10"],["16796401","Human monoclonal antibody combination against SARS coronavirus: synergy and coverage of escape mutants.","PLoS medicine","2006","2","207"],["12927681","Purine and pyrimidine metabolites in children's urine.","Clinica chimica acta; international journal of clinical chemistry","2003","2","9"],["30742894","Novel genetically-modified chimpanzee adenovirus and MVA-vectored respiratory syncytial virus vaccine safely boosts humoral and cellular immunity in healthy older adults.","The Journal of infection","2019","2","10"],["18419349","Varicella-zoster virus-specific immune responses in elderly recipients of a herpes zoster vaccine.","The Journal of infectious diseases","2008","2","113"],["32346093","The trinity of COVID-19: immunity, inflammation and intervention.","Nature reviews. Immunology","2020","2","676"],["31986261","A familial cluster of pneumonia associated with the 2019 novel coronavirus indicating person-to-person transmission: a study of a family cluster.","Lancet (London, England)","2020","2","2306"],["16597622","Structure of severe acute respiratory syndrome coronavirus receptor-binding domain complexed with neutralizing antibody.","The Journal of biological chemistry","2006","2","125"],["18753223","Severe acute respiratory syndrome vaccine efficacy in ferrets: whole killed virus and adenovirus-vectored vaccines.","The Journal of general virology","2008","2","41"],["18018769","Safety and immunogenicity from a phase I trial of inactivated severe acute respiratory syndrome coronavirus vaccine.","Antiviral therapy","2007","2","64"],["31504163","Automatic local resolution-based sharpening of cryo-EM maps.","Bioinformatics (Oxford, England)","2020","2","19"],["17932806","mRNA-based gene transfer as a tool for gene and cell therapy.","Current opinion in molecular therapeutics","2007","2","37"],["31096710","Safety and Immunogenicity of a Novel Recombinant Simian Adenovirus ChAdOx2 as a Vectored Vaccine.","Vaccines","2019","2","5"],["17108019","Severe acute respiratory syndrome coronavirus infection of mice transgenic for the human Angiotensin-converting enzyme 2 virus receptor.","Journal of virology","2006","2","109"],["15265895","IFN-alpha subtypes differentially affect human T cell motility.","Journal of immunology (Baltimore, Md. : 1950)","2004","2","23"],["12574374","IL-13 is sufficient for respiratory syncytial virus G glycoprotein-induced eosinophilia after respiratory syncytial virus challenge.","Journal of immunology (Baltimore, Md. : 1950)","2003","2","43"],["29513216","<i>cis</i>TEM, user-friendly software for single-particle image processing.","eLife","2018","2","196"],["26921779","Matrix-M adjuvant enhances antibody, cellular and protective immune responses of a Zaire Ebola/Makona virus glycoprotein (GP) nanoparticle vaccine in mice.","Vaccine","2016","2","28"],["17855683","Disappearance of antibodies to SARS-associated coronavirus after recovery.","The New England journal of medicine","2007","2","104"],["12958366","Isolation and characterization of viruses related to the SARS coronavirus from animals in southern China.","Science (New York, N.Y.)","2003","2","926"],["32731258","ChAdOx1 nCoV-19 vaccine prevents SARS-CoV-2 pneumonia in rhesus macaques.","Nature","2020","1","167"],["33306989","Safety and efficacy of the ChAdOx1 nCoV-19 vaccine (AZD1222) against SARS-CoV-2: an interim analysis of four randomised controlled trials in Brazil, South Africa, and the UK.","Lancet (London, England)","2020","1","75"],["29348656","Quantifying the Risk and Cost of Active Monitoring for Infectious Diseases.","Scientific reports","2018","2","5"],["15695582","Cross-host evolution of severe acute respiratory syndrome coronavirus in palm civet and human.","Proceedings of the National Academy of Sciences of the United States of America","2005","2","300"],["31996437","Receptor Recognition by the Novel Coronavirus from Wuhan: an Analysis Based on Decade-Long Structural Studies of SARS Coronavirus.","Journal of virology","2020","2","1117"],["20303868","Asthma and allergic inflammation.","Cell","2010","2","145"],["33378609","Efficacy and Safety of the mRNA-1273 SARS-CoV-2 Vaccine.","The New England journal of medicine","2020","0","62"],["26038486","Rapidly produced SAM(®) vaccine against H7N9 influenza is immunogenic in mice.","Emerging microbes & infections","2013","2","70"],["32998157","COVID-19 vaccine BNT162b1 elicits human antibody and T<sub>H</sub>1 T cell responses.","Nature","2020","2","51"],["7839312","Properties of inhibitory and excitatory synapses between hippocampal neurons in very low density cultures.","Synapse (New York, N.Y.)","1994","2","37"],["22816037","Mechanisms of coronavirus cell entry mediated by the viral spike protein.","Viruses","2012","2","339"],["32003551","Transmission of 2019-nCoV Infection from an Asymptomatic Contact in Germany.","The New England journal of medicine","2020","2","1161"],["32574299","COVID-19: Emergence, Spread, Possible Treatments, and Global Burden.","Frontiers in public health","2020","2","16"],["32219428","Treatment of 5 Critically Ill Patients With COVID-19 With Convalescent Plasma.","JAMA","2020","2","742"],["19321428","Activation of the SARS coronavirus spike protein via sequential proteolytic cleavage at two distinct sites.","Proceedings of the National Academy of Sciences of the United States of America","2009","2","317"],["16968120","SARS: systematic review of treatment effects.","PLoS medicine","2006","2","462"],["33053279","Safety and Immunogenicity of Two RNA-Based Covid-19 Vaccine Candidates.","The New England journal of medicine","2020","1","76"],["22032844","Efficacy and effectiveness of influenza vaccines: a systematic review and meta-analysis.","The Lancet. Infectious diseases","2011","1","646"],["29199281","Emerging viral diseases from a vaccinology perspective: preparing for the next pandemic.","Nature immunology","2017","2","26"],["19176631","Alphavirus-adjuvanted norovirus-like particle vaccines: heterologous, humoral, and mucosal immune responses protect against murine norovirus challenge.","Journal of virology","2009","2","33"],["15264254","UCSF Chimera--a visualization system for exploratory research and analysis.","Journal of computational chemistry","2004","2","11535"],["25629663","A Monovalent Chimpanzee Adenovirus Ebola Vaccine Boosted with MVA.","The New England journal of medicine","2015","2","145"],["16973594","Proteolytic activation of influenza viruses by serine proteases TMPRSS2 and HAT from human airway epithelium.","Journal of virology","2006","2","190"],["15150417","Severe acute respiratory syndrome coronavirus (SARS-CoV) infection inhibition using spike protein heptad repeat-derived peptides.","Proceedings of the National Academy of Sciences of the United States of America","2004","2","172"],["32697968","Tracking Changes in SARS-CoV-2 Spike: Evidence that D614G Increases Infectivity of the COVID-19 Virus.","Cell","2020","2","452"],["26855426","Cryo-electron microscopy structure of a coronavirus spike glycoprotein trimer.","Nature","2016","2","190"],["15314040","A subcutaneously injected UV-inactivated SARS coronavirus vaccine elicits systemic humoral immunity in mice.","International immunology","2004","2","60"],["31534041","The 3.1-Angstrom Cryo-electron Microscopy Structure of the Porcine Epidemic Diarrhea Virus Spike Protein in the Prefusion Conformation.","Journal of virology","2019","2","14"],["32085823","Antiretroviral therapy alone versus antiretroviral therapy with a kick and kill approach, on measures of the HIV reservoir in participants with recent HIV infection (the RIVER trial): a phase 2, randomised trial.","Lancet (London, England)","2020","2","8"],["32702298","Safety and immunogenicity of the ChAdOx1 nCoV-19 vaccine against SARS-CoV-2: a preliminary report of a phase 1/2, single-blind, randomised controlled trial.","Lancet (London, England)","2020","1","262"],["21703402","Excessive neutrophils and neutrophil extracellular traps contribute to acute lung injury of influenza pneumonitis.","The American journal of pathology","2011","2","293"],["32007145","Genomic characterisation and epidemiology of 2019 novel coronavirus: implications for virus origins and receptor binding.","Lancet (London, England)","2020","2","2794"],["16111635","Suppression of RNA recognition by Toll-like receptors: the impact of nucleoside modification and the evolutionary origin of RNA.","Immunity","2005","2","348"],["19345285","A novel histologic scoring system to evaluate mucosal biopsies from patients with eosinophilic esophagitis.","Clinical gastroenterology and hepatology : the official clinical practice journal of the American Gastroenterological Association","2009","2","73"],["21632986","MF59 adjuvant enhances diversity and affinity of antibody-mediated immune response to pandemic influenza vaccines.","Science translational medicine","2011","2","143"],["29566112","Novel Vaccine Technologies: Essential Components of an Adequate Response to Emerging Viral Diseases.","JAMA","2018","2","22"],["26203246","Respiratory syncytial virus-like nanoparticle vaccination induces long-term protection without pulmonary disease by modulating cytokines and T-cells partially through alveolar macrophages.","International journal of nanomedicine","2015","2","9"],["28008928","Cryo-electron microscopy structures of the SARS-CoV spike glycoprotein reveal a prerequisite conformational state for receptor binding.","Cell research","2016","2","179"],["8559660","Stabilization of RNA stacking by pseudouridine.","Nucleic acids research","1995","2","135"],["15096611","Severe acute respiratory syndrome coronavirus spike protein expressed by attenuated vaccinia virus protectively immunizes mice.","Proceedings of the National Academy of Sciences of the United States of America","2004","2","232"],["32539990","A minimal common outcome measure set for COVID-19 clinical research.","The Lancet. Infectious diseases","2020","2","51"],["32207377","Establishment and validation of a pseudovirus neutralization assay for SARS-CoV-2.","Emerging microbes & infections","2020","2","120"],["14670965","A 193-amino acid fragment of the SARS coronavirus S protein efficiently binds angiotensin-converting enzyme 2.","The Journal of biological chemistry","2003","2","336"],["27092831","Safety and Immunogenicity of Novel Adenovirus Type 26- and Modified Vaccinia Ankara-Vectored Ebola Vaccines: A Randomized Clinical Trial.","JAMA","2016","2","99"],["14976261","Innate antiviral responses by means of TLR7-mediated recognition of single-stranded RNA.","Science (New York, N.Y.)","2004","2","1067"],["26446606","Characterization and Demonstration of the Value of a Lethal Mouse Model of Middle East Respiratory Syndrome Coronavirus Infection and Disease.","Journal of virology","2015","2","47"],["32087114","An interactive web-based dashboard to track COVID-19 in real time.","The Lancet. Infectious diseases","2020","2","1358"],["28413427","Immunogenicity and safety of a respiratory syncytial virus fusion protein (RSV F) nanoparticle vaccine in older adults.","Immunity & ageing : I & A","2017","2","22"],["32191675","WHO Declares COVID-19 a Pandemic.","Acta bio-medica : Atenei Parmensis","2020","2","528"],["25742465","Emergency postexposure vaccination with vesicular stomatitis virus-vectored Ebola vaccine after needlestick.","JAMA","2015","2","40"],["15504263","Laboratory diagnosis of four recent sporadic cases of community-acquired SARS, Guangdong Province, China.","Emerging infectious diseases","2004","2","68"],["32877576","Phase 1-2 Trial of a SARS-CoV-2 Recombinant Spike Protein Nanoparticle Vaccine.","The New England journal of medicine","2020","1","91"],["18071662","Vaccination with messenger RNA (mRNA).","Handbook of experimental pharmacology","2008","2","29"],["21398392","A West Nile virus DNA vaccine utilizing a modified promoter induces neutralizing antibody in younger and older healthy adults in a phase I clinical trial.","The Journal of infectious diseases","2011","2","62"],["19493565","Safety, immunogenicity, and efficacy of quadrivalent human papillomavirus (types 6, 11, 16, 18) recombinant vaccine in women aged 24-45 years: a randomised, double-blind trial.","Lancet (London, England)","2009","2","138"],["17227689","Utility of the aged BALB/c mouse model to demonstrate prevention and control strategies for severe acute respiratory syndrome coronavirus (SARS-CoV).","Vaccine","2006","2","16"],["31371616","A proof of concept for structure-based vaccine design targeting RSV in humans.","Science (New York, N.Y.)","2019","2","40"],["28635557","Cellular immune responses of older adults to four influenza vaccines: Results of a randomized, controlled comparison.","Human vaccines & immunotherapeutics","2017","2","10"],["32199492","Safety, reactogenicity, and immunogenicity of a chimpanzee adenovirus vectored Ebola vaccine in children in Africa: a randomised, observer-blind, placebo-controlled, phase 2 trial.","The Lancet. Infectious diseases","2020","2","4"],["20087930","The prevalence of antibodies to adenovirus serotype 5 in an adult Indian population and implications for adenovirus vector vaccines.","Journal of medical virology","2010","2","15"],["26465999","Adjuvanted Herpes Zoster Subunit Vaccine in Older Adults.","The New England journal of medicine","2015","1","10"],["27617430","Glycan shield and epitope masking of a coronavirus spike protein observed by cryo-electron microscopy.","Nature structural & molecular biology","2016","2","136"],["17194199","Vaccine efficacy in senescent mice challenged with recombinant SARS-CoV bearing epidemic and zoonotic spike variants.","PLoS medicine","2006","2","137"],["15731223","Amino acids 1055 to 1192 in the S2 region of severe acute respiratory syndrome coronavirus S protein induce neutralizing antibodies: implications for the development of vaccines and antiviral agents.","Journal of virology","2005","2","56"],["17038590","5'-Triphosphate RNA is the ligand for RIG-I.","Science (New York, N.Y.)","2006","2","944"],["20980507","Successful vaccination strategies that protect aged mice from lethal challenge from influenza virus and heterologous severe acute respiratory syndrome coronavirus.","Journal of virology","2010","2","43"],["22278370","Comparative proteomic analysis of eleven common cell lines reveals ubiquitous but varying expression of most proteins.","Molecular & cellular proteomics : MCP","2012","2","286"],["21755013","Bacteria-specific neutrophil dysfunction associated with interferon-stimulated gene expression in the acute respiratory distress syndrome.","PloS one","2011","2","9"],["15749124","Identification of a critical neutralization determinant of severe acute respiratory syndrome (SARS)-associated coronavirus: importance for designing SARS vaccines.","Virology","2005","2","65"],["9814710","Structure of the hemagglutinin precursor cleavage site, a determinant of influenza pathogenicity and the origin of the labile conformation.","Cell","1998","2","215"],["32273591","The COVID-19 vaccine development landscape.","Nature reviews. Drug discovery","2020","1","347"],["16214268","A double-inactivated whole virus candidate SARS coronavirus vaccine stimulates neutralising and protective antibody responses.","Vaccine","2005","2","64"],["33335322","Phase 1/2 trial of SARS-CoV-2 vaccine ChAdOx1 nCoV-19 with a booster dose induces multifunctional antibody responses.","Nature medicine","2020","2","7"],["27626517","Efficacy of the Herpes Zoster Subunit Vaccine in Adults 70 Years of Age or Older.","The New England journal of medicine","2016","1","177"],["27061888","Variable influenza vaccine effectiveness by subtype: a systematic review and meta-analysis of test-negative design studies.","The Lancet. Infectious diseases","2016","2","176"],["17200946","Immunosenescence of ageing.","The Journal of pathology","2007","2","242"],["25589660","Generation of a transgenic mouse model of Middle East respiratory syndrome coronavirus infection and disease.","Journal of virology","2015","2","121"],["32289263","An Infectious cDNA Clone of SARS-CoV-2.","Cell host & microbe","2020","2","73"],["32636454","Infection with novel coronavirus (SARS-CoV-2) causes pneumonia in Rhesus macaques.","Cell research","2020","2","45"],["15507655","Immunization with modified vaccinia virus Ankara-based recombinant vaccine against severe acute respiratory syndrome is associated with enhanced hepatitis in ferrets.","Journal of virology","2004","2","156"],["16505353","Mucosal and systemic adjuvant activity of alphavirus replicon particles.","Proceedings of the National Academy of Sciences of the United States of America","2006","2","54"],["29336703","Establishing Correlates of Protection for Vaccine Development: Considerations for the Respiratory Syncytial Virus Vaccine Field.","Viral immunology","2018","2","7"],["32926660","Review of Current Vaccine Development Strategies to Prevent Coronavirus Disease 2019 (COVID-19).","Toxicologic pathology","2020","1","1"],["32375025","Structural Basis for Potent Neutralization of Betacoronaviruses by Single-Domain Camelid Antibodies.","Cell","2020","2","89"],["16690096","Long-lived memory T lymphocyte responses against SARS coronavirus nucleocapsid protein in SARS-recovered patients.","Virology","2006","2","65"],["11599686","Increased immunogenicity of the MF59-adjuvanted influenza vaccine compared to a conventional subunit vaccine in elderly subjects.","European journal of epidemiology","2001","2","27"],["32219057","The SARS-CoV-2 Vaccine Pipeline: an Overview.","Current tropical medicine reports","2020","2","138"],["32943637","A systematic review of antibody mediated immunity to coronaviruses: kinetics, correlates of protection, and association with severity.","Nature communications","2020","2","118"],["23526951","Risk in vaccine research and development quantified.","PloS one","2013","2","49"],["26107625","Microneutralization assay titres correlate with protection against seasonal influenza H1N1 and H3N2 in children.","PloS one","2015","2","22"],["32356867","Contact Tracing Assessment of COVID-19 Transmission Dynamics in Taiwan and Risk at Different Exposure Periods Before and After Symptom Onset.","JAMA internal medicine","2020","2","128"],["15233739","Cancer immunotherapy with mRNA-transfected dendritic cells.","Immunological reviews","2004","2","82"],["15642942","Evasion of antibody neutralization in emerging severe acute respiratory syndrome coronaviruses.","Proceedings of the National Academy of Sciences of the United States of America","2005","2","132"],["17222058","A mouse-adapted SARS-coronavirus causes disease and mortality in BALB/c mice.","PLoS pathogens","2007","2","234"],["32079150","Incubation Period and Other Epidemiological Characteristics of 2019 Novel Coronavirus Infections with Right Truncation: A Statistical Analysis of Publicly Available Case Data.","Journal of clinical medicine","2020","2","282"],["16129869","A global clinical measure of fitness and frailty in elderly people.","CMAJ : Canadian Medical Association journal = journal de l'Association medicale canadienne","2005","2","1178"],["32659783","A perspective on potential antibody-dependent enhancement of SARS-CoV-2.","Nature","2020","2","67"],["23799535","Biodegradable lipids enabling rapidly eliminated lipid nanoparticles for systemic delivery of RNAi therapeutics.","Molecular therapy : the journal of the American Society of Gene Therapy","2013","2","68"],["12734147","Clinical features and short-term outcomes of 144 patients with SARS in the greater Toronto area.","JAMA","2003","2","592"],["6234369","Hepatitis-B vaccination in the elderly.","The Journal of infectious diseases","1984","2","25"],["28931244","The Importance of Frailty in the Assessment of Influenza Vaccine Effectiveness Against Influenza-Related Hospitalization in Elderly People.","The Journal of infectious diseases","2017","2","37"],["29514901","Importance of Neutralizing Monoclonal Antibodies Targeting Multiple Antigenic Sites on the Middle East Respiratory Syndrome Coronavirus Spike Glycoprotein To Avoid Neutralization Escape.","Journal of virology","2018","2","71"],["32450106","Safety, tolerability, and immunogenicity of a recombinant adenovirus type-5 vectored COVID-19 vaccine: a dose-escalation, open-label, non-randomised, first-in-human trial.","Lancet (London, England)","2020","2","258"],["20883165","Immunogenicity and protective efficacy in mice and hamsters of a β-propiolactone inactivated whole virus SARS-CoV vaccine.","Viral immunology","2010","2","21"],["31351922","Safety and immunogenicity of an anti-Middle East respiratory syndrome coronavirus DNA vaccine: a phase 1, open-label, single-arm, dose-escalation trial.","The Lancet. Infectious diseases","2019","2","78"],["28017642","Immunity duration of a recombinant adenovirus type-5 vector-based Ebola vaccine and a homologous prime-boost immunisation in healthy adults in China: final report of a randomised, double-blind, placebo-controlled, phase 1 trial.","The Lancet. Global health","2016","2","17"],["15572765","Coot: model-building tools for molecular graphics.","Acta crystallographica. Section D, Biological crystallography","2004","2","13441"],["29402578","Influenza vaccine effectiveness in older adults compared with younger adults over five seasons.","Vaccine","2018","2","8"],["30420505","Structure-based design of a quadrivalent fusion glycoprotein vaccine for human parainfluenza virus types 1-4.","Proceedings of the National Academy of Sciences of the United States of America","2018","2","18"],["4305197","An epidemiologic study of altered clinical reactivity to respiratory syncytial (RS) virus infection in children previously vaccinated with an inactivated RS virus vaccine.","American journal of epidemiology","1969","2","334"],["26458833","Laboratory-Scale Production of Replication-Deficient Adenovirus Vectored Vaccines.","Methods in molecular biology (Clifton, N.J.)","2016","2","5"],["27708058","Rapid development of a DNA vaccine for Zika virus.","Science (New York, N.Y.)","2016","2","169"],["32150748","The Incubation Period of Coronavirus Disease 2019 (COVID-19) From Publicly Reported Confirmed Cases: Estimation and Application.","Annals of internal medicine","2020","1","1110"],["26264835","Expression kinetics of nucleoside-modified mRNA delivered in lipid nanoparticles to mice by various routes.","Journal of controlled release : official journal of the Controlled Release Society","2015","1","110"],["6754243","Antibody-mediated enhancement of disease in feline infectious peritonitis: comparisons with dengue hemorrhagic fever.","Comparative immunology, microbiology and infectious diseases","1981","2","113"],["32532802","The impact of COVID-19 and strategies for mitigation and suppression in low- and middle-income countries.","Science (New York, N.Y.)","2020","2","129"],["22782619","Maximizing the potency of siRNA lipid nanoparticles for hepatic gene silencing in vivo.","Angewandte Chemie (International ed. in English)","2012","2","144"],["14983044","Potent neutralization of severe acute respiratory syndrome (SARS) coronavirus by a human mAb to S1 protein that blocks receptor association.","Proceedings of the National Academy of Sciences of the United States of America","2004","2","305"],["14569023","Reverse genetics with a full-length infectious cDNA of severe acute respiratory syndrome coronavirus.","Proceedings of the National Academy of Sciences of the United States of America","2003","2","217"],["32473127","Targets of T Cell Responses to SARS-CoV-2 Coronavirus in Humans with COVID-19 Disease and Unexposed Individuals.","Cell","2020","2","537"],["32702299","Immunogenicity and safety of a recombinant adenovirus type-5-vectored COVID-19 vaccine in healthy adults aged 18 years or older: a randomised, double-blind, placebo-controlled, phase 2 trial.","Lancet (London, England)","2020","1","135"],["16195424","Bats are natural reservoirs of SARS-like coronaviruses.","Science (New York, N.Y.)","2005","2","947"],["28457665","Preclinical and Clinical Demonstration of Immunogenicity by mRNA Vaccines against H10N8 and H7N9 Influenza Viruses.","Molecular therapy : the journal of the American Society of Gene Therapy","2017","2","118"],["19879222","Comparative immunogenicity of recombinant influenza hemagglutinin (rHA) and trivalent inactivated vaccine (TIV) among persons &gt; or =65 years old.","Vaccine","2009","2","13"],["15655773","Development and characterization of a severe acute respiratory syndrome-associated coronavirus-neutralizing human monoclonal antibody that provides effective immunoprophylaxis in mice.","The Journal of infectious diseases","2005","2","81"],["11162792","Coronavirus spike proteins in viral entry and pathogenesis.","Virology","2001","2","300"],["32526206","SARS-CoV-2 Reverse Genetics Reveals a Variable Infection Gradient in the Respiratory Tract.","Cell","2020","2","173"],["32057769","The spike glycoprotein of the new coronavirus 2019-nCoV contains a furin-like cleavage site absent in CoV of the same clade.","Antiviral research","2020","2","419"],["16670345","T cell responses are better correlates of vaccine protection in the elderly.","Journal of immunology (Baltimore, Md. : 1950)","2006","2","210"],["12730500","Characterization of a novel coronavirus associated with severe acute respiratory syndrome.","Science (New York, N.Y.)","2003","2","1321"],["32512579","Estimating the effects of non-pharmaceutical interventions on COVID-19 in Europe.","Nature","2020","2","246"],["16497416","A recombinant baculovirus-expressed S glycoprotein vaccine elicits high titers of SARS-associated coronavirus (SARS-CoV) neutralizing antibodies in mice.","Vaccine","2006","2","43"],["20977431","Effects of respiratory syncytial virus infection and major basic protein derived from eosinophils in pulmonary alveolar epithelial cells (A549).","Cell biology international","2011","2","9"],["26976607","SARS-like WIV1-CoV poised for human emergence.","Proceedings of the National Academy of Sciences of the United States of America","2016","2","149"],["28536429","A novel neutralizing monoclonal antibody targeting the N-terminal domain of the MERS-CoV spike protein.","Emerging microbes & infections","2017","2","22"],["20362616","Ageing and immunity: addressing immune senescence to ensure healthy ageing.","Vaccine","2010","2","17"],["19800030","Phylogenetic perspectives on the epidemiology and origins of SARS and SARS-like coronaviruses.","Infection, genetics and evolution : journal of molecular epidemiology and evolutionary genetics in infectious diseases","2009","2","18"],["21890902","Generating the optimal mRNA for therapy: HPLC purification eliminates immune activation and improves translation of nucleoside-modified, protein-encoding mRNA.","Nucleic acids research","2011","2","114"],["19609242","Direct injection of protamine-protected mRNA: results of a phase 1/2 vaccination trial in metastatic melanoma patients.","Journal of immunotherapy (Hagerstown, Md. : 1997)","2009","2","74"],["12690091","Identification of a novel coronavirus in patients with severe acute respiratory syndrome.","The New England journal of medicine","2003","2","1937"],["17620608","Potent cross-reactive neutralization of SARS coronavirus isolates by human monoclonal antibodies.","Proceedings of the National Academy of Sciences of the United States of America","2007","2","146"],["17917067","Understanding respiratory syncytial virus (RSV) vaccine-enhanced disease.","Immunologic research","2007","2","56"],["19234811","Differential characteristics of the early stage of lung inflammation induced by SARS-CoV Nucleocapsid protein related to age in the mouse.","Inflammation research : official journal of the European Histamine Research Society ... [et al.]","2009","2","5"],["17928346","Viral and host factors in human respiratory syncytial virus pathogenesis.","Journal of virology","2007","2","221"],["18797453","Incorporation of pseudouridine into mRNA yields superior nonimmunogenic vector with increased translational capacity and biological stability.","Molecular therapy : the journal of the American Society of Gene Therapy","2008","1","221"],["32015507","A pneumonia outbreak associated with a new coronavirus of probable bat origin.","Nature","2020","2","4308"],["30712865","Unexpected Receptor Functional Mimicry Elucidates Activation of Coronavirus Fusion.","Cell","2019","2","172"],["15268662","Messenger RNA-based vaccines.","Expert opinion on biological therapy","2004","2","33"],["12682352","A major outbreak of severe acute respiratory syndrome in Hong Kong.","The New England journal of medicine","2003","2","979"],["15078936","Amino acids 270 to 510 of the severe acute respiratory syndrome coronavirus spike protein are required for interaction with receptor.","Journal of virology","2004","2","115"],["24043791","Reverse genetics with a full-length infectious cDNA of the Middle East respiratory syndrome coronavirus.","Proceedings of the National Academy of Sciences of the United States of America","2013","2","150"],["24850731","Effects of Toll-like receptor stimulation on eosinophilic infiltration in lungs of BALB/c mice immunized with UV-inactivated severe acute respiratory syndrome-related coronavirus vaccine.","Journal of virology","2014","2","51"],["12865378","Critically ill patients with severe acute respiratory syndrome.","JAMA","2003","2","131"],["8552671","In vitro activation of the interferon-induced, double-stranded RNA-dependent protein kinase PKR by RNA from the 3' untranslated regions of human alpha-tropomyosin.","Proceedings of the National Academy of Sciences of the United States of America","1996","2","38"],["15731234","B-cell responses in patients who have recovered from severe acute respiratory syndrome target a dominant site in the S2 domain of the surface spike glycoprotein.","Journal of virology","2005","2","48"],["17507479","Synthetic reconstruction of zoonotic and early human severe acute respiratory syndrome coronavirus isolates that produce fatal disease in aged mice.","Journal of virology","2007","2","45"],["15791205","Receptor and viral determinants of SARS-coronavirus adaptation to human ACE2.","The EMBO journal","2005","2","389"],["12235218","A role for immune complexes in enhanced respiratory syncytial virus disease.","The Journal of experimental medicine","2002","2","139"],["26802140","Long-term Protection After Hepatitis B Vaccine.","The Journal of infectious diseases","2016","2","17"],["30616012","Efficacy, safety and immunogenicity of live attenuated varicella vaccine in healthy children in China: double-blind, randomized, placebo-controlled clinical trial.","Clinical microbiology and infection : the official publication of the European Society of Clinical Microbiology and Infectious Diseases","2019","2","2"],["15208624","The RNA helicase RIG-I has an essential function in double-stranded RNA-induced innate antiviral responses.","Nature immunology","2004","2","1444"],["31553909","Structural Definition of a Neutralization-Sensitive Epitope on the MERS-CoV S1-NTD.","Cell reports","2019","2","24"],["32227757","Developing Covid-19 Vaccines at Pandemic Speed.","The New England journal of medicine","2020","1","278"],["17037596",'Resurrection of an "extinct" SARS-CoV isolate GD03 from late 2003.',"Advances in experimental medicine and biology","2006","2","5"],["32259480","SARS-CoV-2 Vaccines: Status Report.","Immunity","2020","2","308"],["15054081","Antigenicity analysis of different regions of the severe acute respiratory syndrome coronavirus nucleocapsid protein.","Clinical chemistry","2004","2","37"],["7836924","T cell genetic background determines default T helper phenotype development in vitro.","The Journal of experimental medicine","1995","2","114"],["11607032","Recognition of double-stranded RNA and activation of NF-kappaB by Toll-like receptor 3.","Nature","2001","2","1767"],["20463105","Correlates of protection induced by vaccination.","Clinical and vaccine immunology : CVI","2010","2","473"],["23618766","Structure of RSV fusion glycoprotein trimer bound to a prefusion-specific neutralizing antibody.","Science (New York, N.Y.)","2013","2","296"],["15577937","Severe acute respiratory syndrome.","Nature medicine","2004","2","448"],["27826140","Characterization of anti-MERS-CoV antibodies against various recombinant structural antigens of MERS-CoV in an imported case in China.","Emerging microbes & infections","2016","2","16"],["8901605","Genetic mapping of a murine locus controlling development of T helper 1/T helper 2 type responses.","Proceedings of the National Academy of Sciences of the United States of America","1996","2","39"],["32243722","Lessons unfolding from pediatric cases of COVID-19 disease caused by SARS-CoV-2 infection.","Pediatric pulmonology","2020","2","14"],["31735500","A phase I trial evaluating the safety and immunogenicity of a candidate tuberculosis vaccination regimen, ChAdOx1 85A prime - MVA85A boost in healthy UK adults.","Vaccine","2019","2","8"],["15016880","Prior infection and passive transfer of neutralizing antibody prevent replication of severe acute respiratory syndrome coronavirus in the respiratory tract of mice.","Journal of virology","2004","2","225"],["20461061","Targeted delivery of RNAi therapeutics with endogenous and exogenous ligand-based mechanisms.","Molecular therapy : the journal of the American Society of Gene Therapy","2010","2","210"],["32366511","Developing a vaccine for covid-19.","BMJ (Clinical research ed.)","2020","2","9"],["25359562","mRNA transcript therapy.","Expert review of vaccines","2014","2","30"],["19598148","Estimating incubation period distributions with coarse data.","Statistics in medicine","2009","2","43"],["12730501","The Genome sequence of the SARS-associated coronavirus.","Science (New York, N.Y.)","2003","2","1110"],["12781535","Clinical progression and viral load in a community outbreak of coronavirus-associated SARS pneumonia: a prospective study.","Lancet (London, England)","2003","2","1078"],["32778354","Vaccine Efficacy Needed for a COVID-19 Coronavirus Vaccine to Prevent or Stop an Epidemic as the Sole Intervention.","American journal of preventive medicine","2020","2","17"],["32277878","First-wave COVID-19 transmissibility and severity in China outside Hubei after control measures, and second-wave scenario planning: a modelling impact assessment.","Lancet (London, England)","2020","2","186"],["16862151","A potential molecular mechanism for hypersensitivity caused by formalin-inactivated vaccines.","Nature medicine","2006","2","85"],["23701746","Randomized, double-blind, placebo-controlled, safety and immunogenicity study of 4 formulations of Anthrax Vaccine Adsorbed plus CPG 7909 (AV7909) in healthy adult volunteers.","Vaccine","2013","2","23"],["32214079","Severe Outcomes Among Patients with Coronavirus Disease 2019 (COVID-19) - United States, February 12-March 16, 2020.","MMWR. Morbidity and mortality weekly report","2020","2","544"],["32663912","An mRNA Vaccine against SARS-CoV-2 - Preliminary Report.","The New England journal of medicine","2020","1","310"],["17515642","Formalin-treated UV-inactivated SARS coronavirus vaccine retains its immunogenicity and promotes Th2-type immune responses.","Japanese journal of infectious diseases","2007","2","12"],["16731915","Antigenic and immunogenic characterization of recombinant baculovirus-expressed severe acute respiratory syndrome coronavirus spike protein: implication for vaccine design.","Journal of virology","2006","1","57"],["19198616","The spike protein of SARS-CoV--a target for vaccine and therapeutic development.","Nature reviews. Microbiology","2009","2","473"],["32540903","Isolation of potent SARS-CoV-2 neutralizing antibodies and protection from disease in a small animal model.","Science (New York, N.Y.)","2020","2","226"],["10037236","An advanced culture method for generating large quantities of highly pure dendritic cells from mouse bone marrow.","Journal of immunological methods","1999","2","1044"],["18191004","Chimeric coronavirus-like particles carrying severe acute respiratory syndrome coronavirus (SCoV) S protein protect mice against challenge with SCoV.","Vaccine","2007","2","37"],["32540900","Broad neutralization of SARS-related viruses by human monoclonal antibodies.","Science (New York, N.Y.)","2020","2","98"],["32344679","The COVID-19 Pandemic: A Comprehensive Review of Taxonomy, Genetics, Epidemiology, Diagnosis, Treatment, and Control.","Journal of clinical medicine","2020","2","68"],["30102747","Cryo-EM structure of the SARS coronavirus spike glycoprotein in complex with its host cell receptor ACE2.","PLoS pathogens","2018","2","221"],["32376603","Development of an inactivated vaccine candidate for SARS-CoV-2.","Science (New York, N.Y.)","2020","2","256"],["15650189","Molecular and biological characterization of human monoclonal antibodies binding to the spike and nucleocapsid proteins of severe acute respiratory syndrome coronavirus.","Journal of virology","2005","2","68"],["32497196","Neutralizing Antibodies Responses to SARS-CoV-2 in COVID-19 Inpatients and Convalescent Patients.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2020","2","58"],["32433465","Immunogenicity of a DNA vaccine candidate for COVID-19.","Nature communications","2020","2","110"],["25078002","Beyond D-luciferin: expanding the scope of bioluminescence imaging in vivo.","Current opinion in chemical biology","2014","2","47"],["32785213","Phase I/II study of COVID-19 RNA vaccine BNT162b1 in adults.","Nature","2020","2","91"],["32007143","Epidemiological and clinical characteristics of 99 cases of 2019 novel coronavirus pneumonia in Wuhan, China: a descriptive study.","Lancet (London, England)","2020","2","4980"],["17313487","Immunosenescence: emerging challenges for an ageing population.","Immunology","2007","2","197"],["21325420","Evidence that TMPRSS2 activates the severe acute respiratory syndrome coronavirus spike protein for membrane fusion and reduces viral control by the humoral immune response.","Journal of virology","2011","2","338"],["12748314","SARS-associated coronavirus.","The New England journal of medicine","2003","2","131"],["27578435","Structure, Function, and Evolution of Coronavirus Spike Proteins.","Annual review of virology","2016","2","558"],["32896291","Safety and immunogenicity of an rAd26 and rAd5 vector-based heterologous prime-boost COVID-19 vaccine in two formulations: two open, non-randomised phase 1/2 studies from Russia.","Lancet (London, England)","2020","2","77"],["11121305","Leginon: an automated system for acquisition of images from vitreous ice specimens.","Journal of structural biology","2000","2","93"],["24040512","Collaboration gets the most out of software.","eLife","2013","2","339"],["29069368","Immune Responses to Twice-Annual Influenza Vaccination in Older Adults in Hong Kong.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2018","2","5"],["30830861","Anti-spike IgG causes severe acute lung injury by skewing macrophage responses during acute SARS-CoV infection.","JCI insight","2019","2","263"],["32463443","RSV neutralizing antibodies at birth predict protection from RSV illness in infants in the first three months of life.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2020","2","3"],["20960282","Immunogenicity of the spike glycoprotein of bat SARS-like coronavirus.","Virologica Sinica","2010","2","2"],["30681265","OMIP-052: An 18-Color Panel for Measuring Th1, Th2, Th17, and Tfh Responses in Rhesus Macaques.","Cytometry. Part A : the journal of the International Society for Analytical Cytology","2019","2","1"],["1690918","Direct gene transfer into mouse muscle in vivo.","Science (New York, N.Y.)","1990","2","610"],["14647384","Angiotensin-converting enzyme 2 is a functional receptor for the SARS coronavirus.","Nature","2003","2","1993"],["15708987","Recombinant modified vaccinia virus Ankara expressing the spike glycoprotein of severe acute respiratory syndrome coronavirus induces protective neutralizing antibodies primarily targeting the receptor binding region.","Journal of virology","2005","2","114"],["32555388","Convergent antibody responses to SARS-CoV-2 in convalescent individuals.","Nature","2020","2","278"],["15220038","Human monoclonal antibody as prophylaxis for SARS coronavirus infection in ferrets.","Lancet (London, England)","2004","2","137"],["16166518","Structure of SARS coronavirus spike receptor-binding domain complexed with receptor.","Science (New York, N.Y.)","2005","2","682"],["17416434","Vaccines to prevent severe acute respiratory syndrome coronavirus-induced disease.","Virus research","2007","2","63"],["16213065","Antibody response to influenza vaccination in the elderly: a quantitative review.","Vaccine","2005","2","342"],["15286725","Fibrotic disease and the T(H)1/T(H)2 paradigm.","Nature reviews. Immunology","2004","2","518"],["12690092","A novel coronavirus associated with severe acute respiratory syndrome.","The New England journal of medicine","2003","2","1910"],["18582997","Alphavirus replicon particles acting as adjuvants promote CD8+ T cell responses to co-delivered antigen.","Vaccine","2008","2","21"],["17344286","Severe acute respiratory syndrome coronavirus accessory protein 6 is a virion-associated protein and is released from 6 protein-expressing cells.","Journal of virology","2007","2","34"],["19079256","Lack of antibody affinity maturation due to poor Toll-like receptor stimulation leads to enhanced respiratory syncytial virus disease.","Nature medicine","2008","2","199"],["32434945","DNA vaccine protection against SARS-CoV-2 in rhesus macaques.","Science (New York, N.Y.)","2020","2","225"],["15161975","Structural characterization of the fusion-active complex of severe acute respiratory syndrome (SARS) coronavirus.","Proceedings of the National Academy of Sciences of the United States of America","2004","2","54"],["21619905","International seroepidemiology of adenovirus serotypes 5, 26, 35, and 48 in pediatric and adult populations.","Vaccine","2011","2","107"],["17021110","Age dependence of adenovirus-specific neutralizing antibody titers in individuals from sub-Saharan Africa.","Journal of clinical microbiology","2006","2","57"],["31986264","Clinical features of patients infected with 2019 novel coronavirus in Wuhan, China.","Lancet (London, England)","2020","2","9912"],["31312806","Therapeutic Vaccination Refocuses T-cell Responses Towards Conserved Regions of HIV-1 in Early Treated Individuals (BCN 01 study).","EClinicalMedicine","2019","2","12"],["32434946","SARS-CoV-2 infection protects against rechallenge in rhesus macaques.","Science (New York, N.Y.)","2020","2","193"],["14605137","Quantifying adenovirus-neutralizing antibodies by luciferase transgene detection: addressing preexisting immunity to vaccine and gene therapy vectors.","Journal of clinical microbiology","2003","2","91"],["17108024","Severe acute respiratory syndrome coronavirus open reading frame (ORF) 3b, ORF 6, and nucleocapsid proteins function as interferon antagonists.","Journal of virology","2006","2","294"],["32203366","The coronavirus pandemic in five powerful charts.","Nature","2020","2","61"],["23306021","Transfection efficiency and transgene expression kinetics of mRNA delivered in naked and nanoparticle format.","Journal of controlled release : official journal of the Controlled Release Society","2013","2","45"],["30501873","Vaccination in the elderly: The challenge of immune changes with aging.","Seminars in immunology","2018","2","35"],["32591408","Phenotype and kinetics of SARS-CoV-2-specific T cells in COVID-19 patients with acute respiratory distress syndrome.","Science immunology","2020","2","157"],["32789505","Effect of an Inactivated Vaccine Against SARS-CoV-2 on Safety and Immunogenicity Outcomes: Interim Analysis of 2 Randomized Clinical Trials.","JAMA","2020","2","65"],["24453361","Blocking of exchange proteins directly activated by cAMP leads to reduced replication of Middle East respiratory syndrome coronavirus.","Journal of virology","2014","2","26"],["15670750","The role of apolipoprotein E in the elimination of liposomes from blood by hepatocytes in the mouse.","Biochemical and biophysical research communications","2005","2","22"],["19181630","Comparison of histochemical methods for murine eosinophil detection in an RSV vaccine-enhanced inflammation model.","Toxicologic pathology","2009","2","53"],["12163607","Stabilization of the soluble, cleaved, trimeric form of the envelope glycoprotein complex of human immunodeficiency virus type 1.","Journal of virology","2002","2","238"],["32887977","Broad and strong memory CD4<sup>+</sup> and CD8<sup>+</sup> T cells induced by SARS-CoV-2 in UK convalescent individuals following COVID-19.","Nature immunology","2020","2","84"],["31079849","mRNA vaccines against H10N8 and H7N9 influenza viruses of pandemic potential are immunogenic and well tolerated in healthy adults in phase 1 randomized clinical trials.","Vaccine","2019","2","48"],["15381196","Cellular entry of the SARS coronavirus.","Trends in microbiology","2004","2","84"],["23051623","Manual restraint and common compound administration routes in mice and rats.","Journal of visualized experiments : JoVE","2012","2","29"],["16732888","Characterization of the ribonuclease activity on the skin surface.","Genetic vaccines and therapy","2006","2","18"],["15220033","Mucosal immunisation of African green monkeys (Cercopithecus aethiops) with an attenuated parainfluenza virus expressing the SARS coronavirus spike protein for the prevention of SARS.","Lancet (London, England)","2004","2","147"],["15155925","Infectious diseases. One year after outbreak, SARS virus yields some secrets.","Science (New York, N.Y.)","2004","2","13"],["15194770","Identification of an antigenic determinant on the S2 domain of the severe acute respiratory syndrome coronavirus spike glycoprotein capable of inducing neutralizing antibodies.","Journal of virology","2004","2","87"],["15356154","Identification of immunodominant sites on the spike protein of severe acute respiratory syndrome (SARS) coronavirus: implication for developing SARS diagnostics and vaccines.","Journal of immunology (Baltimore, Md. : 1950)","2004","2","77"],["28111638","Rapid profiling of RSV antibody repertoires from the memory B cells of naturally infected adult donors.","Science immunology","2016","2","58"],["32991794","Safety and Immunogenicity of SARS-CoV-2 mRNA-1273 Vaccine in Older Adults.","The New England journal of medicine","2020","1","80"],["14675530","The secret life of ACE2 as a receptor for the SARS virus.","Cell","2003","2","58"],["27346939","Available influenza vaccines: immunization strategies, history and new tools for fighting the disease.","Journal of preventive medicine and hygiene","2016","2","11"],["14681510","The severe acute respiratory syndrome.","The New England journal of medicine","2003","2","507"],["12184362","Mechanisms of stimulation of the immune response by aluminum adjuvants.","Vaccine","2002","2","72"],["23296926","HPLC purification of in vitro transcribed long RNA.","Methods in molecular biology (Clifton, N.J.)","2013","2","29"],["25830322","A Recombinant Vesicular Stomatitis Virus Ebola Vaccine.","The New England journal of medicine","2015","2","142"],["22844480","Matrix-M™ adjuvant induces local recruitment, activation and maturation of central immune cells in absence of antigen.","PloS one","2012","2","23"],["22095567","Magnitude of potential biases in a simulated case-control study of the effectiveness of influenza vaccination.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2011","1","20"],["32320465","Phase 1 Safety and Immunogenicity Study of a Respiratory Syncytial Virus Vaccine With an Adenovirus 26 Vector Encoding Prefusion F (Ad26.RSV.preF) in Adults Aged ≥60 Years.","The Journal of infectious diseases","2020","2","4"],["14729660","mRNA is an endogenous ligand for Toll-like receptor 3.","The Journal of biological chemistry","2004","2","311"],["8522182","The tobacco etch viral 5' leader and poly(A) tail are functionally synergistic regulators of translation.","Gene","1995","2","35"],["12774078","Virus detectives seek source of SARS in China's wild animals.","Nature","2003","2","14"],["19888339","A neutralizing human monoclonal antibody protects against lethal disease in a new ferret model of acute nipah virus infection.","PLoS pathogens","2009","2","116"],["29471464","Poor Immunogenicity, Not Vaccine Strain Egg Adaptation, May Explain the Low H3N2 Influenza Vaccine Effectiveness in 2012-2013.","Clinical infectious diseases : an official publication of the Infectious Diseases Society of America","2018","2","15"],["9518670","Phosphate-enhanced transfection of cationic lipid-complexed mRNA and plasmid DNA.","Biochimica et biophysica acta","1998","2","12"],["32393526","A strategic approach to COVID-19 vaccine R&amp;D.","Science (New York, N.Y.)","2020","2","73"],["32074444","SARS-CoV-2 Viral Load in Upper Respiratory Specimens of Infected Patients.","The New England journal of medicine","2020","2","1416"],["18463152","A live attenuated severe acute respiratory syndrome coronavirus is immunogenic and efficacious in golden Syrian hamsters.","Journal of virology","2008","2","70"],["15324552","Mice susceptible to SARS coronavirus.","Emerging infectious diseases","2004","2","40"],["32571838","A neutralizing human antibody binds to the N-terminal domain of the Spike protein of SARS-CoV-2.","Science (New York, N.Y.)","2020","2","158"],["14564000","LMO2-associated clonal T cell proliferation in two patients after gene therapy for SCID-X1.","Science (New York, N.Y.)","2003","2","1100"],["32015508","A new coronavirus associated with human respiratory disease in China.","Nature","2020","2","1951"],["16254327","Modulation of the immune response to the severe acute respiratory syndrome spike glycoprotein by gene-based and inactivated virus immunization.","Journal of virology","2005","2","26"]]},636:e=>{e.exports=[["title","journal","pubDate"],["COVID-19 Trends and Forecast in the Eastern Mediterranean Region With a Particular Focus on Pakistan","Cureus","2020-06-12"],["Examining the impact of COVID‐19 in ethnically diverse families with young children with intellectual and developmental disabilities","Journal of Intellectual Disability Research","2020-08-18"],["What healthcare leaders need to do to protect the psychological well-being of frontline staff in the COVID-19 pandemic","BMJ Leader","2020-05-18"],["The interface of psychiatry and COVID-19: Challenges for management of psychiatric patients","Pakistan Journal of Medical Sciences","2020-07-01"],["Humanistic care and psychological counseling on psychological disorders in medical students after COVID-19 outbreak: A protocol of systematic review","Medicine","2020-08-14"],["Stroke, Research and Science in the Time of COVID","Stroke","2020-07-31"],["The Mass Infection of COVID-19 in Daegu City of Korea: Vascular Surgeons’ Perspective","Vascular Specialist International","2020-12-31"],["Bradycardia, Renal Failure, Atrioventricular Nodal Blockade, Shock, and Hyperkalemia (BRASH) Syndrome as a Presentation of Coronavirus Disease 2019","Cureus","2020-04-24"],["Nursing workload in the COVID-19 era","Intensive & Critical Care Nursing","2020-08-11"],["COVID-19 vaccines: neutralizing antibodies and the alum advantage","Nature Reviews. Immunology","2020-06-04"],["Endpoints used in phase III randomized controlled trials of treatment options for COVID-19","EClinicalMedicine","2020-06-02"],["Efficacy of early prone position for COVID-19 patients with severe hypoxia: a single-center prospective cohort study","Intensive Care Medicine","2020-07-22"],["Has the COVID-19 Pandemic Affected MPs’ Representational Activities?","Canadian Journal of Political Science. Revue Canadienne De Science Politique","2020-06-09"],["Facial dermatoses in general population due to personal protective masks: first observations after lockdown","Clinical and Experimental Dermatology","2020-07-13"],["COVID-19 pandemic-related anxiety in teenagers","Indian Journal of Psychiatry","2020-05-15"],["The role of facial contact in infection control: Renewed import in the age of coronavirus","American Journal of Infection Control","2020-11-04"],["Decoding the global outbreak of COVID-19: the nature is behind the scene","VirusDisease","2020-06-22"],["Data-driven study of the COVID-19 pandemic via age-structured modelling and prediction of the health system failure in Brazil amid diverse intervention strategies","PLoS ONE","2020-07-30"],["Building a strategic educator–psychiatrist alliance to support the mental health of students during the outbreak of COVID-19 in China","Global Mental Health","2020-11-10"],["A high throughput screen for TMPRSS2 expression identifies FDA-approved and clinically advanced compounds that can limit SARS-CoV-2 entry","Research Square","2020-08-14"],["Excessive Neutrophils and Neutrophil Extracellular Traps in COVID-19","Frontiers in Immunology","2020-08-18"],["Regional Variation in Unmet Need for Metabolic Surgery in England: a Retrospective, Multicohort Analysis","Obesity Surgery","2020-08-03"],["Data-driven dynamic clustering framework for mitigating the adverse economic impact of Covid-19 lockdown practices","Sustainable Cities and Society","2020-07-03"],["Role of angiotensin-converting enzyme 2 in neurodegenerative diseases during the COVID-19 pandemic","Aging (Albany NY)","2020-11-10"],["Water access as a required public health intervention to fight COVID-19 in the Pacific Islands","The Lancet Regional Health - Western Pacific","2020-07-27"],["COVID-19 and the burden of ill-health: a double crisis of disruptions and inequalities","Journal of Social and Economic Development","2020-12-18"],["COVID-19 and lung cancer: risks, mechanisms and treatment interactions","Journal for Immunotherapy of Cancer","2020-05-19"],["COVID-19 Student Stress Questionnaire: Development and Validation of a Questionnaire to Evaluate Students’ Stressors Related to the Coronavirus Pandemic Lockdown","Frontiers in Psychology","2020-10-22"],["Being responsible for someone else: a shared duty for parents and heart failure specialists during the COVID‐19 pandemic","ESC Heart Failure","2020-10-07"],["A 29-Year-Old Male with a Fatal Case of COVID-19 Acute Respiratory Distress Syndrome (CARDS) and Ventilator-Induced Lung Injury (VILI)","The American Journal of Case Reports","2020-07-23"],["Contributions and challenges of general practitioners in China fighting against the novel coronavirus crisis","Family Medicine and Community Health","2020-03-23"],["The importance of initial response during outbreaks: A perspective from observations on COVID-19","Infection Control and Hospital Epidemiology","2020-04-20"],["Cardiovascular disease management during the coronavirus disease 2019 pandemic","International Journal of Medical Sciences","2020-05-29"],["Dishonesty and mandatory mask wearing in the COVID-19 pandemic","Economics Letters","2020-10-08"],["Cryo-EM structure of the 2019-nCoV spike in the prefusion conformation","Science (New York, N.y.)","2020-02-19"],["Psychological inflexibility and intolerance of uncertainty moderate the relationship between social isolation and mental health outcomes during COVID-19","Journal of Contextual Behavioral Science","2020-09-14"],["Minimize glycemic fluctuation decrease the risk of severe illness and death in patients with COVID‐19","Journal of Medical Virology","2020-10-07"],["Urgent Peritoneal Dialysis in Patients With COVID-19 and Acute Kidney Injury: A Single-Center Experience in a Time of Crisis in the United States","American Journal of Kidney Diseases","2020-06-11"],["Perspectives on vascular surgical practice change due to COVID-19 at a nonacademic tertiary care center","Journal of Vascular Surgery","2020-04-17"],["Improving handwashing habits and household air quality in Africa after COVID-19","The Lancet. Global Health","2020-08-19"],["Roles and Responsibilities of the Orthopaedic Community and the Society During COVID-19 Pandemic","Indian Journal of Orthopaedics","2020-04-14"],["Concerns Expressed by Chinese Social Media Users During the COVID-19 Pandemic: Content Analysis of Sina Weibo Microblogging Data","Journal of Medical Internet Research","2020-11-26"],["An alternative way to perform diagnostic nasopharyngeal swab for SARS-CoV-2 infection","American Journal of Otolaryngology","2020-11-17"],["First Covid‐19 maternal mortality in the UK associated with thrombotic complications","British Journal of Haematology","2020-05-18"],["COVID-19 fatalities, latitude, sunlight, and vitamin D","American Journal of Infection Control","2020-06-26"],["Is it correct to estimate mental disorder through online surveys during COVID-19 pandemic?","Psychiatry Research","2020-06-22"],["Prognostic Value of Cardiovascular Biomarkers in COVID-19: A Review","Viruses","2020-05-11"],["Molecules in pathogenesis: angiotensin converting enzyme 2 (ACE2)","Journal of Clinical Pathology","2020-08-05"],["Feasibility and Efficacy of Cardiopulmonary Rehabilitation following COVID-19","American Journal of Physical Medicine & Rehabilitation","2020-07-23"],["Education in uncertainty: Academic life as Indigenous health scholars during COVID-19","International Review of Education. Internationale Zeitschrift Fur Erziehungswissenschaft. Revue Internationale De Pedagogie","2020-11-30"],["Clinical presentation and mortality in hospitalized patients aged 80+ years with COVID-19–A retrospective cohort study","Archives of Gerontology and Geriatrics","2020-12-30"],["Potentially modifiable factors to reduce severity of COVID-19 in type 2 diabetes","Nutrition & Diabetes","2020-08-12"],["A Simple Decision Analysis of a Mandatory Lockdown Response to the COVID-19 Pandemic","Applied Health Economics and Health Policy","2020-04-05"],["Preparedness of the Healthcare Personnel Against the Coronavirus Disease 2019 (COVID-19) Outbreak: An Audit Cycle","Frontiers in Public Health","2020-09-11"],["Biomimetic nanoparticles as universal influenza vaccine","Smart Materials in Medicine","2020-04-13"],["Modified Scoring Method for ‐19 Pneumonia","Journal of Ultrasound in Medicine","2020-08-08"],["High Variability in Implementation of Selective-Prevention Services for Cardiometabolic Diseases in Five European Primary Care Settings","International Journal of Environmental Research and Public Health","2020-12-04"],["Plea for multitargeted interventions for severe COVID-19","The Lancet. Infectious Diseases","2020-04-21"],["Prevention and control strategies for emergency, limited-term, and elective operations in pediatric surgery during the epidemic period of COVID-19","World Journal of Pediatric Surgery","2020-03-26"],["Acute Coronary Syndromes undergoing Percutaneous Coronary Intervention in the COVID-19 Era: Comparable Case Volumes but Delayed Symptom Onset to Hospital Presentation","European Heart Journal. Quality of Care & Clinical Outcomes","2020-05-07"],["Diarrhea as a Presenting Symptom of Coronavirus Disease 2019 in Children","Advanced Biomedical Research","2020-08-28"],["Clinical, epidemiological, and laboratory characteristics of mild-to-moderate COVID-19 patients in Saudi Arabia: an observational cohort study","European Journal of Medical Research","2020-11-25"],["COVID-19: CADD to the rescue","Virus Research","2020-05-15"],["The role of psychiatrists in addressing COVID-19 conspiracy theories","Asian Journal of Psychiatry","2020-09-01"],["Probing infectious disease by single-cell RNA sequencing: Progresses and perspectives","Computational and Structural Biotechnology Journal","2020-10-21"],["Coronavirus testing indicates transmission risk increases along wildlife supply chains for human consumption in Viet Nam, 2013-2014","PLoS ONE","2020-08-10"],["The propagation of economic impacts through supply chains: The case of a mega-city lockdown to prevent the spread of COVID-19","PLoS ONE","2020-09-15"],["Auxiliary role of mesenchymal stem cells as regenerative medicine soldiers to attenuate inflammatory processes of severe acute respiratory infections caused by COVID-19","Cell and Tissue Banking","2020-06-25"],["Effect of the COVID-19 pandemic on drug compliance and stigmatization in patients with epilepsy","Epilepsy & Behavior","2020-11-24"],["Evidence of SARS-CoV-2 Infection in Returning Travelers from Wuhan, China","The New England Journal of Medicine","2020-03-26"],["Coronavirus Human Infection Challenge Studies: Assessing Potential Benefits and Risks","Journal of Bioethical Inquiry","2020-08-25"],["Quantifying Impact of Disruption to Radiology Education During the COVID-19 Pandemic and Implications for Future Training","Current Problems in Diagnostic Radiology","2020-08-26"],["Estimation of the time-varying reproduction number of COVID-19 outbreak in China","International Journal of Hygiene and Environmental Health","2020-05-11"],["Caution against precaution: A case report on silent hypoxia in COVID-19","Annals of Medicine and Surgery","2020-11-04"],["The effectiveness and safety of traditional Chinese medicine for the treatment of children with COVID-19","Medicine","2020-07-24"],["Hemorrhagic stroke in setting of severe COVID-19 infection requiring Extracorporeal Membrane Oxygenation (ECMO)","Journal of Stroke and Cerebrovascular Diseases","2020-06-06"],["Radiotherapy during COVID-19 pandemic. How to create a : a Northern Italy experience","La Radiologia Medica","2020-05-15"],["The SARS-Cov-2 threat in Cracolândia, an open-air drug use scene in Brazil","The International Journal on Drug Policy","2020-07-02"],["The difference in the incubation period of 2019 novel coronavirus (SARS-CoV-2) infection between travelers to Hubei and non-travelers: The need of a longer quarantine period","Infection Control and Hospital Epidemiology","2020-03-18"],["Screening neuromyelitis optica patients for COVID-19 infection","Autoimmunity Reviews","2020-09-14"],["Effect of awake prone positioning in COVID-19 patients- A systematic review","Trends in Anaesthesia & Critical Care","2020-09-28"],["SARS-CoV-2-related deaths in routine forensic autopsy practice: histopathological patterns","International Journal of Legal Medicine","2020-06-29"],["Psychological Effects of the COVID-19 Pandemic on Wuhan’s High School Students","Children and Youth Services Review","2020-11-01"],["No SARS-CoV-2 Neutralization by Intravenous Immunoglobulins Produced From Plasma Collected Before the 2020 Pandemic","The Journal of Infectious Diseases","2020-09-17"],["Practical recommendations for critical care and anesthesiology teams caring for novel coronavirus (2019-nCoV) patients","Canadian Journal of Anaesthesia","2020-02-12"],["Sore eyes as the most significant ocular symptom experienced by people with COVID-19: a comparison between pre-COVID-19 and during COVID-19 states","BMJ Open Ophthalmology","2020-11-30"],["COVID-19 in patients with acute leukemia: Two cases with different outcomes","Leukemia Research Reports","2020-12-08"],["SARS-CoV 2 and the pathobiology of the respiratory control mechanisms in the brainstem","Journal of the Formosan Medical Association","2020-07-30"],["Prevalence of Alcohol and Tobacco Use in India and Implications for COVID-19 - Niyantrita Madhumeha Bharata Study Projections","Journal of Medicine and Life","2020-10-01"],["Analysis and Estimation of COVID-19 Spreading in Russia Based on ARIMA Model","Sn Comprehensive Clinical Medicine","2020-10-09"],["Restructuring nephrology services to combat COVID-19 pandemic: Report from a Middle Eastern country","World Journal of Nephrology","2020-11-29"],["Insights of NCoV 19 and COVID19","Novel Coronavirus 2019","2020-09-27"],["Smart and automation technologies for ensuring the long-term operation of a factory amid the COVID-19 pandemic: an evolving fuzzy assessment approach","The International Journal, Advanced Manufacturing Technology","2020-11-13"],["Hospital-acquired SARS-CoV-2 pneumonia in a person living with HIV","International Journal of STD & AIDS","2020-09-21"],["Why health promotion matters to the COVID-19 pandemic, and vice versa","Health Promotion International","2020-04-16"],["Regional variation in COVID-19 disparities: Connections with immigrant and Latinx communities in US counties","Annals of Epidemiology","2020-09-11"],["When technological innovations do not reach consensus: the case of tele-consultation of andrological patients","International Journal of Impotence Research","2020-08-25"],["Advanced Manufacturing and Processing in the Time of Covid‐19","Journal of Advanced Manufacturing and Processing","2020-06-14"],["Clotting abnormalities in critically ill COVID-19 patients are inconsistent with overt disseminated intravascular coagulation","Thrombosis Research","2020-09-13"],["Practical recommendations for the perioperative management of the patient with suspection or serious infection by coronavirus SARS-CoV","Revista Española de Anestesiología y Reanimación (English Edition)","2020-05-04"],["Neurobiology of coronaviruses: Potential relevance for COVID-19","Neurobiology of Disease","2020-07-02"],["The COVID‐19 crisis: reflections on cardiothoracic surgery training","Journal of Cardiac Surgery","2020-07-11"],["Early triple antiviral therapy for COVID-19 – Authors' reply","Lancet (London, England)","2020-11-05"],["Chloroquine and bafilomycin A mimic lysosomal storage disorders and impair mTORC1 signalling","Bioscience Reports","2020-04-28"],["Severe Acute Respiratory Syndrome Coronavirus 2-Induced Neurological Complications","Frontiers in Cell and Developmental Biology","2020-12-10"],["Association of a Prior Psychiatric Diagnosis With Mortality Among Hospitalized Patients With Coronavirus Disease 2019 (COVID-19) Infection","JAMA Network Open","2020-09-30"],["New Insights of Emerging SARS-CoV-2: Epidemiology, Etiology, Clinical Features, Clinical Treatment, and Prevention","Frontiers in Cell and Developmental Biology","2020-05-22"],["SARS-CoV-2 Infects the Brain Choroid Plexus and Disrupts the Blood-CSF Barrier in Human Brain Organoids","Cell Stem Cell","2020-10-13"],["The Persian COVID stress scales (Persian-CSS) and COVID-19-related stress reactions in patients with obsessive-compulsive and anxiety disorders","Journal of Obsessive-Compulsive and Related Disorders","2020-12-17"],["COVID-19: Current Trends in Invitro Diagnostics","Indian Journal of Clinical Biochemistry","2020-06-27"],["Oral Cancer Surgery and COVID pandemic – Metronomic Therapy shows a promising role while awaiting surgery","Oral Oncology","2020-05-22"],["Infertility in purebred cats – A review of the potential causes","Theriogenology","2020-09-28"],["Obesity and COVID-19: a call for action from people living with obesity","The Lancet. Diabetes & Endocrinology","2020-07-09"],["Nurses as heroes, warriors and political activists","Journal of Clinical Nursing","2020-06-09"],["The COVID-19 syndemic is not global: context matters","Lancet (London, England)","2020-10-22"],["How Could This Happen?: Narrowing Down the Contagion of COVID-19 and Preventing Acute Respiratory Distress Syndrome (ARDS)","Acta Biotheoretica","2020-04-25"],["Impact of anxiety and fear for COVID-19 toward infection control practices among Thai healthcare workers","Infection Control and Hospital Epidemiology","2020-06-08"],["Lung base CT findings in COVID-19 adult patients presenting with acute abdominal complaints: case series from a major New York City health system","European Radiology","2020-07-04"],["Phytotherapy Perspectives for Treating Fungal Infections, Migraine, Sebhorreic Dermatitis and Hyperpigmentations with the Plants of the Centaureinae Subtribe (Asteraceae)","Molecules","2020-11-15"],["COVID-19: Framework for the Resumption of Endoscopic Activities From the Canadian Association of Gastroenterology","Journal of the Canadian Association of Gastroenterology","2020-06-22"],["ACE2 and SARS-CoV-2 – tissue or plasma, good or bad?","American Journal of Hypertension","2020-11-05"],["Predicting the evolution and control of the COVID-19 pandemic in Portugal","F1000Research","2020-09-09"],["Influenza virus glycoprotein-reactive human monoclonal antibodies","Microbes and Infection","2020-06-19"],["Cold Agglutinin Autoimmune Hemolytic Anemia Associated with Novel Coronavirus (COVID‐19)","British Journal of Haematology","2020-05-27"],["Protecting the psychological health of children through effective communication about COVID-19","The Lancet. Child & Adolescent Health","2020-03-31"],["Lack of Handwashing Access: A Widespread Deficiency in the Age of COVID-19","Environmental Health Perspectives","2020-06-29"],["COVID-19 and the project of “European Center for Disease Control” (ECDC)","Infection, Genetics and Evolution","2020-10-21"],["MECANISMOS MOLECULARES DAS RESPOSTAS IMUNOHEMATOLÓGICAS CONTRA O SARS-CV-2 EM PACIENTES COM QUADRO CLÍNICO GRAVE","Hematology, Transfusion and Cell Therapy","2020-10-31"],["Injuries From Asymptomatic COVID-19 Disease: New Hidden Toxicity Risk Factors in Thoracic Radiation Therapy","International Journal of Radiation Oncology, Biology, Physics","2020-09-02"],["Emergency Physicians and Personal Narratives Improve the Perceived Effectiveness of COVID‐19 Public Health Recommendations on Social Media: A Randomized Experiment","Academic Emergency Medicine","2020-12-02"],["How COVID-19 pandemic can lead to promotion of remote medical education and democratization of education?","Journal of Advances in Medical Education & Professionalism","2020-07-01"],["Facing COVID-19 in the ICU: vascular dysfunction, thrombosis, and dysregulated inflammation","Intensive Care Medicine","2020-04-28"],["The spread of COVID-19 virus through population density and wind in Turkey cities","The Science of the Total Environment","2020-08-11"],["COVID-19: overcoming the challenges faced by individuals with autism and their families","The Lancet. Psychiatry","2020-05-20"],["Documento de posicionamiento AEG-SEED para el reinicio de la actividad endoscópica tras la fase pico de la pandemia de COVID-19","Gastroenterologia Y Hepatologia","2020-05-27"],["Food waste in Italian households during the Covid-19 pandemic: a self-reporting approach","Food Security","2020-11-06"],["Cause-specific death in hospitalized individuals infected with SARS-CoV-2: more than just acute respiratory failure or thromboembolic events","Internal and Emergency Medicine","2020-09-10"],["The role of virtual support groups for patients with hidradenitis suppurativa during the COVID-19 pandemic","International Journal of Women's Dermatology","2020-04-29"],["Rapid Transition to Telehealth Group Exercise and Functional Assessments in Response to COVID-19","Gerontology and Geriatric Medicine","2020-12-14"],["Theoretical orientation of a range of psychological approaches to address mental health concerns during the COVID-19 pandemic","Asian Journal of Psychiatry","2020-06-18"],["Out-of-Hospital Cardiac Arrest during the COVID-19 pandemic in Portugal","Resuscitation","2020-10-15"],["Laboratory findings in COVID-19 diagnosis and prognosis","Clinica Chimica Acta; International Journal of Clinical Chemistry","2020-08-14"],["Considerations for Continuing Semielective and Emergency Otolaryngological Procedures During the COVID-19 Pandemic","Ear, Nose, & Throat Journal","2020-09-07"],["Wales: Patient numbers to fall off a cliff as COVID-19 hits service already in crisis","Bdj in Practice","2020-08-10"],["Detection and infectivity potential of severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2) environmental contamination in isolation units and quarantine facilities","Clinical Microbiology and Infection","2020-09-10"],["Alpha-lipoic acid may protect patients with diabetes against COVID-19 infection","Medical Hypotheses","2020-08-14"],["Are telephone consultations here to stay in rheumatology?","Rheumatology Advances in Practice","2020-12-16"],["Prevention and control strategies of general surgeons under COVID-19 pandemic","Surgery in Practice and Science","2020-07-05"],["Digital Response During the COVID-19 Pandemic in Saudi Arabia","Journal of Medical Internet Research","2020-09-01"],["MVA Vectored Vaccines Encoding Rift Valley Fever Virus Glycoproteins Protect Mice against Lethal Challenge in the Absence of Neutralizing Antibody Responses","Vaccines","2020-02-12"],["Medication treatment for opioid use disorder in the age of COVID-19: Can new regulations modify the opioid cascade?","Journal of Substance Abuse Treatment","2020-11-14"],["Clinical characteristics and risk factors of patients with severe COVID-19 in Jiangsu province, China: a retrospective multicentre cohort study","BMC Infectious Diseases","2020-08-06"],["Frontier review on the propensity and repercussion of SARS-CoV-2 migration to aquatic environment","Journal of Hazardous Materials Letters","2020-08-31"],["Single-UsePlastics and COVID-19: Scientific Evidenceand Environmental Regulations","Environmental Science & Technology","2020-06-08"],["In Vitro Inhibition of Zika Virus Replication with Poly(Sodium 4-Styrenesulfonate)","Viruses","2020-08-23"],["Alemtuzumab: COVID-19 infection and severe depletion of T-lymphocyte: case report","Reactions Weekly","2020-07-25"],["Combining lung ultrasound and Wells score for diagnosing pulmonary embolism in critically ill COVID-19 patients","Journal of Thrombosis and Thrombolysis","2020-11-03"],["Role of Complementary and Alternative Medicine in Prevention and Treatment of COVID-19: An Overhyped Hope","Chinese Journal of Integrative Medicine","2020-08-05"],["Shortlisting SARS‐CoV‐2 Peptides for Targeted Studies from Experimental Data‐Dependent Acquisition Tandem Mass Spectrometry Data","Proteomics","2020-05-27"],["Comparing Associations of State Reopening Strategies with COVID-19 Burden","Journal of General Internal Medicine","2020-10-06"],["Asymptomatic hypoxia in COVID-19 is associated with poor outcome","International Journal of Infectious Diseases","2020-10-31"],["Identification of human adenovirus replication inhibitors from a library of small molecules targeting cellular epigenetic regulators","Virology","2020-07-26"],["Neutralizing SARS-CoV-2","eLife","2020-12-15"],["Pandemics and People","mSphere","2020-05-13"],["Physical distancing for care delivery in health care settings: Considerations and consequences","American Journal of Infection Control","2020-12-24"],["COVID-19 and community pharmacy services in Pakistan: challenges, barriers and solution for progress","Journal of Pharmaceutical Policy and Practice","2020-06-15"],["BCG vaccination in infancy does not protect against COVID-19. Evidence from a natural experiment in Sweden","Clinical Infectious Diseases: An Official Publication of the Infectious Diseases Society of America","2020-08-23"],["To wear or not to wear a mask in the COVID-19 era? The broken bridge between recommendations and implementation in Lebanon","Journal of Global Health","2020-07-28"],["Effectiveness of N95 respirators versus surgical masks against influenza: A systematic review and meta‐analysis","Journal of Evidence-Based Medicine","2020-03-13"],["SARS‐CoV‐2 pandemic and Vitamin D deficiency—A double trouble","Photodermatology, Photoimmunology & Photomedicine","2020-06-11"],["Association between D-Dimer levels and mortality in patients with coronavirus disease 2019 (COVID-19): a systematic review and pooled analysis","Journal De Medecine Vasculaire","2020-05-27"],["A Narrative Review of COVID-19: The New Pandemic Disease","Iranian Journal of Medical Sciences","2020-07-01"],["Neonatal intensive care unit preparedness for the Novel Coronavirus Disease-2019 pandemic: A New York City hospital perspective","Current Problems in Pediatric and Adolescent Health Care","2020-05-14"],["Coronavirus COVID- 19: A critical review of its history, pathogenesis, transmission, diagnosis and treatment","Biosafety and Health","2020-11-08"],["Dandelion and focal crazy paving signs: the lung CT based predictors for evaluation of the severity of coronavirus disease","Current Medical Research and Opinion","2020-11-26"],["Early impact of the COVID-19 pandemic on paediatric cancer care in Latin America","The Lancet. Oncology","2020-05-18"],["Adult cardiac surgery and the COVID-19 pandemic: Aggressive infection mitigation strategies are necessary in the operating room and surgical recovery","The Journal of Thoracic and Cardiovascular Surgery","2020-04-27"],["Acute acalculous cholecystitis on a COVID-19 patient: a case report","Annals of Medicine and Surgery","2020-08-31"],["Medical Anthropology in the Time of COVID‐19","Medical Anthropology Quarterly","2020-12-01"],["Stress proteins: the biological functions in virus infection, present and challenges for target-based antiviral drug development","Signal Transduction and Targeted Therapy","2020-07-13"],["Anosmia and ageusia as presenting complaints of coronavirus disease (COVID-19) infection","Journal of Family Medicine and Primary Care","2020-08-25"],["Characteristics of COVID-19 Community Practice Declines in Noninvasive Diagnostic Imaging Professional Work","Journal of the American College of Radiology","2020-07-03"],["Severe A-line infections in COVID-19 patients: A novel management algorithm in an emergency setting","Journal of Plastic, Reconstructive & Aesthetic Surgery","2020-12-26"],["Approach to critical illness myopathy and polyneuropathy in the older SARS-CoV-2 patients","Journal of Clinical Neuroscience","2020-07-24"],["The Urgent and Growing Needs of Youths Experiencing Homelessness During the COVID-19 Pandemic","The Journal of Adolescent Health","2020-09-17"],["Structures and Functions of the 3′ Untranslated Regions of Positive-Sense Single-Stranded RNA Viruses Infecting Humans and Animals","Frontiers in Cellular and Infection Microbiology","2020-08-27"],["Application of Universal Design for Learning (UDL) Principles to Surgical Education During the COVID-19 Pandemic","Journal of Surgical Education","2020-06-05"],["The role of extracellular vesicles in COVID-19 virus infection","Infection, Genetics and Evolution","2020-06-13"],["Functional analysis and evaluation of respiratory cilia in healthy Chinese children","Respiratory Research","2020-10-09"],["Minimal Climate Impacts From Short‐Lived Climate Forcers Following Emission Reductions Related to the COVID‐19 Pandemic","Geophysical Research Letters","2020-10-22"],["Optical techniques, computed tomography and deep learning role in the diagnosis of COVID-19 pandemic towards increasing the survival rate of vulnerable populations","Photodiagnosis and Photodynamic Therapy","2020-06-17"],["Avoiding Disinformation Traps in COVID-19: July 2020 Annals of Emergency Medicine Journal Club","Annals of Emergency Medicine","2020-05-08"],["Improvement of Severe COVID-19 in an Elderly Man by Sequential Use of Antiviral Drugs","Case Reports in Infectious Diseases","2020-09-05"],["Multi-modality imaging of inflammation and ischemia for assessment of myocardial injury in Covid-19","Journal of Nuclear Cardiology","2020-06-19"],["Quality of adverse event reporting in clinical trials of remdesivir in patients with COVID-19","European Journal of Clinical Pharmacology","2020-10-04"],["Hydroxychloroquine, dermatology, and SARS‐CoV‐2: Updating an old association","Journal of Medical Virology","2020-07-28"],["Differences and similarities between SARS-CoV and SARS-CoV-2: spike receptor-binding domain recognition and host cell infection with support of cellular serine proteases","Infection","2020-07-31"],["Letter to the Editor: Neurohospitalist and COVID-19","Acta Neurologica Belgica","2020-08-10"],["Pharmacovigilance in patients with diabetes: A data-driven analysis identifying specific RAS antagonists with adverse pulmonary safety profiles that have implications for COVID-19 morbidity and mortality","Journal of the American Pharmacists Association","2020-06-01"],["Addressing the Challenge of COVID-19: One Health Care Site’s Leadership Response to the Pandemic","Mayo Clinic Proceedings: Innovations, Quality & Outcomes","2020-12-14"],["The effects of allium sativum on immunity within the scope of COVID-19 infection","Medical Hypotheses","2020-06-02"],["Back to plastic pollution in COVID times","Environmental Chemistry Letters","2020-11-07"],["Rapid asymptomatic transmission of COVID-19 during the incubation period demonstrating strong infectivity in a cluster of youngsters aged 16-23 years outside Wuhan and characteristics of young patients with COVID-19: A prospective contact-tracing study","The Journal of Infection","2020-04-10"],["COVID-19 Death and BCG Vaccination Programs Worldwide","Tuberculosis and Respiratory Diseases","2020-09-04"],["Effective Contact Tracing Strategies for COVID-19: A Municipal Health Department’s Model","Open Forum Infectious Diseases","2020-12-31"],["Policy Recommendations Regarding Skilled Nursing Facility Management of Coronavirus 19 (COVID-19): Lessons from New York State","Journal of the American Medical Directors Association","2020-06-02"],["COVID-19: towards controlling of a pandemic","Lancet (London, England)","2020-03-17"],["The Potential Use of Mesenchymal Stem Cells and Their Derived Exosomes as Immunomodulatory Agents for COVID-19 Patients","Stem Cells International","2020-09-24"],["Ocular manifestations of SARS-CoV-2: Literature review","Archivos De La Sociedad Espan~ola De Oftalmologi´a","2020-10-19"],["Estimating the Effect of Reduced Attendance at Emergency Departments for Suspected Cardiac Conditions on Cardiac Mortality During the COVID-19 Pandemic","Circulation. Cardiovascular Quality and Outcomes","2020-12-20"],["Using caputo-fabrizio derivative for the transmission of mathematical model epidemic Corona Virus","SeMA Journal","2020-09-26"],["Collateral effects of COVID‐19 pandemic in pediatric hematooncology: Fatalities caused by diagnostic delay","Pediatric Blood & Cancer","2020-06-11"],["scRNA-seq Profiling of Human Testes Reveals the Presence of the ACE2 Receptor, A Target for SARS-CoV-2 Infection in Spermatogonia, Leydig and Sertoli Cells","Cells","2020-04-09"],["Trends in teledermatology use during clinic reopening after COVID-19 closures","Journal of the American Academy of Dermatology","2020-12-11"],["Online support information for students with disabilities in colleges and universities during the COVID-19 pandemic","Disability and Health Journal","2020-10-08"],["A “Window of Therapeutic Opportunity” for Anti-Cytokine Therapy in Patients With Coronavirus Disease 2019","Frontiers in Immunology","2020-10-06"],["A new diagnosis of systemic capillary leak syndrome in a patient with COVID-19","Rheumatology (Oxford, England)","2020-09-17"],["COVID-19: Screen more, screen better","Bulletin De L'Academie Nationale De Medecine","2020-09-15"],["COVID-19 pandemic: Its impact on liver disease and liver transplantation","World Journal of Gastroenterology","2020-06-14"],["Beyond blame: leadership, collaboration and compassion in the time of COVID-19","Socio-Ecological Practice Research","2020-08-17"],["Spinal muscular atrophy care in the COVID‐19 pandemic era","Muscle & Nerve","2020-05-03"],["Transcriptome & viral growth analysis of SARS-CoV-2-infected Vero CCL-81 cells","The Indian Journal of Medical Research","2020-07-01"],["Why Go NANO on COVID-19 Pandemic?","Matter","2020-09-02"],["SARS-CoV-2 and cardiovascular complications: From molecular mechanisms to pharmaceutical management","Biochemical Pharmacology","2020-06-21"],["Effective control of SARS-CoV-2 transmission between healthcare workers during a period of diminished community prevalence of COVID-19","eLife","2020-06-19"],["Health equity and COVID-19: global perspectives","International Journal for Equity in Health","2020-06-26"],["Coronavirus 2019 (COVID-19) Infections Among Healthcare Workers, Los Angeles County, February - May 2020","Clinical Infectious Diseases: An Official Publication of the Infectious Diseases Society of America","2020-08-17"],["Moving Forward: Gradual Return of Gastroenterology Practice during the COVID-19 Pandemic","Digestive Diseases (Basel, Switzerland)","2020-08-20"],["Impact of Coronavirus and Covid-19 on Present and Future Anesthesiology Practices","Frontiers in Medicine","2020-07-21"],["Pandemic Risk of COVID-19 Outbreak in the United States: An Analysis of Network Connectedness with Air Travel Data","International Journal of Infectious Diseases","2020-11-16"],["Disaster psychiatry and homelessness: creating a mental health COVID-19 response","The Lancet. Psychiatry","2020-08-04"],["An asthmatic pregnant woman with COVID-19: A case report study","Respiratory Medicine Case Reports","2020-11-19"],["Surgical telemedicine here to stay: More support from a randomized controlled trial on postoperative surgery visits","American Journal of Surgery","2020-04-01"],["Knowledge and Perceptions of COVID-19 Among the General Public in the United States and the United Kingdom: A Cross-sectional Online Survey","Annals of Internal Medicine","2020-03-20"],["Fragile heroes. The psychological impact of the COVID-19 pandemic on health-care workers in Italy","PLoS ONE","2020-11-18"],["Shifting the Paradigm: The Dress-COV Telegram Bot as a Tool for Participatory Medicine","International Journal of Environmental Research and Public Health","2020-11-26"],["Efficacy of chloroquine versus lopinavir/ritonavir in mild/general COVID-19 infection: a prospective, open-label, multicenter, randomized controlled clinical study","Trials","2020-07-08"],["Comparison of Two Real-time Polymerase Chain Reaction Assays for the Detection of Severe Acute Respiratory Syndrome-CoV-2 from Combined Nasopharyngeal-Throat Swabs","Indian Journal of Medical Microbiology","2020-12-02"],["Clinical characteristics and outcomes in elderly with coronavirus disease 2019 in Beijing, China: a retrospective cohort study","Internal and Emergency Medicine","2020-10-10"],["COVID-19 convalescent plasma clears SARS-CoV-2 refractory to remdesivir in an infant with congenital heart disease","Blood Advances","2020-09-11"],["A candidate multi-epitope vaccine against SARS-CoV-2","Scientific Reports","2020-07-02"],["CN32 University Hospital Ghent Cancer centre nurse-led e-health support in cancer care during the SARS-CoV-2 pandemic: Results of a single centre observation","Annals of Oncology","2020-09-22"],["Hypocalcemia and hypoalbuminemia during COVID-19 infection: Opportunities for therapeutic intervention","Journal of Infection and Public Health","2020-10-10"],["SARS-CoV-2 genomic variations associated with mortality rate of COVID-19","Journal of Human Genetics","2020-07-22"],["Convalescent plasma therapy in the treatment of COVID-19: Some considerations: Correspondence","International Journal of Surgery (London, England)","2020-06-22"],["A teenager with CHD and coronavirus disease 2019","Cardiology in the Young","2020-07-06"],["COVID-19 quarantine and acute pulmonary embolism","Revista Espanola De Cardiologia (English Ed.)","2020-05-23"],["Patient-Centered, Gynecology-Specific Prioritization of Nonurgent Surgeries during the COVID-19 Pandemic: Proposal of a Novel Scoring System","Journal of Minimally Invasive Gynecology","2020-06-03"],["Functional SARS-CoV-2-specific immune memory persists after mild COVID-19","Cell","2020-11-23"],["Long-Term Care and COVID-19, What’s Next?","Journal of Patient Experience","2020-08-17"],["CT characteristics and diagnostic value of COVID-19 in pregnancy","PLoS ONE","2020-07-02"],["Significant relaxation of SARS-CoV-2-targeted non-pharmaceutical interventions may result in profound mortality: A New York state modelling study","PLoS ONE","2020-09-24"],["Balancing Choices to Recover From the COVID-19 Pandemic","Neurospine","2020-05-18"],["COVID-19 vaccines: ethical framework concerning human challenge studies","DARU Journal of Pharmaceutical Sciences","2020-08-27"],["Timely Insights Into the Treatment of Social Disconnection in Lonely, Homebound Older Adults","The American Journal of Geriatric Psychiatry","2020-04-09"],["Common Pitfalls in using Online Platforms for Data collection in COVID times and its implications","Nepal Journal of Epidemiology","2020-12-31"],["COVID-19 Clinical Characteristics, and Sex-Specific Risk of Mortality: Systematic Review and Meta-Analysis","Frontiers in Medicine","2020-07-21"],["The need for improved discharge criteria for hospitalised patients with COVID-19—implications for patients in long term care facilities","Age and Ageing","2020-09-19"],["The Role of Lung and Gut Microbiota in the Pathology of Asthma","Immunity","2020-02-18"],["Understanding dynamics of pandemics","Turkish Journal of Medical Sciences","2020-04-21"],["Assessment of SARS-CoV-2 Screening Strategies to Permit the Safe Reopening of College Campuses in the United States","JAMA Network Open","2020-07-31"],["Challenges in the Practice of Sexual Medicine in the Time of COVID-19 in Spain","The Journal of Sexual Medicine","2020-05-23"],["COVID-19 outcomes in MS: Observational study of early experience from NYU Multiple Sclerosis Comprehensive Care Center","Neurology® Neuroimmunology & Neuroinflammation","2020-07-08"],["Clinical management of COVID-19","The Indian Journal of Medical Research","2020-05-01"],["Arsenal of microfluidic testing devices may combat COVID-19 pandemic","Mrs Bulletin","2020-09-27"],["Challenges and strategies for effective plastic waste management during and post COVID-19 pandemic","The Science of the Total Environment","2020-08-04"],["The Impact of COVID-19 on the Continuity of Cardiovascular Care: The authors discuss the challenges and offer potential solutions to facilitate safe and effective clinical care during and after this unique pandemic","European Heart Journal","2020-10-06"],["COVID-19: when should quarantine be enforced?","The Lancet. Infectious Diseases","2020-05-20"],["The Use of Digital Tools to Mitigate the COVID-19 Pandemic: Comparative Retrospective Study of Six Countries","JMIR Public Health and Surveillance","2020-12-23"],["Pharmacologicaltreatment of COVID-19: lights and shadows","Drugs in Context","2020-05-19"],["Home-based COVID 19 management: A consensus document from Italian general medical practitioners and hospital consultants in the Lombardy region (Italy)","European Journal of Internal Medicine","2020-12-02"],["Sample pooling is a viable strategy for SARS-CoV-2 detection in low-prevalence settings","Pathology","2020-09-22"],["Intensifying vaccine production","Bulletin of the World Health Organization","2020-05-01"],["Targeting the SARS-CoV2 nucleocapsid protein for potential therapeutics using immuno-informatics and structure-based drug discovery techniques","Biomedicine & Pharmacotherapy","2020-10-20"],["Mental health treatment online during the COVID-19 outbreak","European Archives of Psychiatry and Clinical Neuroscience","2020-05-02"],["A Chemographic Audit of anti‐Coronavirus Structure‐Activity Information from Public Databases (ChEMBL)","Molecular Informatics","2020-05-14"],["Tocilizumab administration is associated with the reduction in biomarkers of coronavirus disease 2019 infection","Journal of Medical Virology","2020-12-17"],["Recommendations for treatment of critically ill patients with COVID-19: Version 3 S1 guideline","Der Anaesthesist","2020-11-27"],["The Role of Lung Ultrasound in the Assessment of Novel Coronavirus Pneumonia","Journal of Cardiothoracic and Vascular Anesthesia","2020-04-30"],["Chloroquine-Induced First-Episode Psychosis in a Patient Self-medicated for COVID-19","Biological Psychiatry","2020-06-02"],["Hybridoma technology a versatile method for isolation of monoclonal antibodies, its applicability across species, limitations, advancement and future perspectives","International Immunopharmacology","2020-05-27"],["Can exposure to PM particles increase the incidence of coronavirus disease 2019 (COVID-19)?","The Science of the Total Environment","2020-06-23"],["How a Psychopharmacology Clinical Trial Site in the Seattle Area Managed Clinical Trials and Patient Care During the COVID-19 Pandemic","The American Journal of Geriatric Psychiatry","2020-06-18"],["Anosmia is associated with lower in-hospital mortality in COVID-19","Journal of the Neurological Sciences","2020-10-01"],["Beyond protein structure determination with MicroED","Current Opinion in Structural Biology","2020-06-28"],["Why Are Lopinavir and Ritonavir Effective against the Newly EmergedCoronavirus 2019? Atomistic Insights into the Inhibitory Mechanisms","Biochemistry","2020-04-15"],["Molecular microbiology","Self-Assessment Q&A in Clinical Laboratory Science, III","2020-09-11"],["Supporting Clinical Decision-Making during the SARS-CoV-2 Pandemic through a Global Research Commitment: The TERAVOLT Experience","Cancer Cell","2020-10-05"],["Increased Indoor Exposure to Commonly Used Disinfectants during the COVID-19 Pandemic","Environmental Science & Technology Letters","2020-08-20"],["Implementing COVID-19 Mitigation in the Community Mental Health Setting: March 2020 and Lessons Learned","Community Mental Health Journal","2020-07-17"],["Remdesivir in COVID-19: A critical review of pharmacology, pre-clinical and clinical studies","Diabetes & Metabolic Syndrome","2020-05-12"],["COVID-19 in unequally ageing European regions","World Development","2020-08-28"],["COVID-19 in Patients on Maintenance Dialysis in the Paris Region","Kidney International Reports","2020-07-18"],["The Precedent of Good Enough Therapy During Unprecedented Times","Clinical Social Work Journal","2020-10-24"],["Computation screening of narcissoside a glycosyloxyflavone for potential novel coronavirus 2019 (COVID-19) inhibitor","Biomedical Journal","2020-05-18"],["Preventing Frailty Progression During the Covid-19 Pandemic","The Journal of Frailty & Aging","2020-06-06"],["Could a specific ACE2 activator drug improve the clinical outcome of SARS-CoV-2? A potential pharmacological insight","Expert Review of Clinical Pharmacology","2020-07-25"],["Estimation of global case fatality rate of coronavirus disease 2019 (COVID-19) using meta-analyses: Comparison between calendar date and days since the outbreak of the first confirmed case","International Journal of Infectious Diseases","2020-09-01"],["The situation of elderly with cognitive impairment living at home during lockdown in the Corona-pandemic in Germany","BMC Geriatrics","2020-12-29"],["Combination of chest CT and clinical features for diagnosis of 2019 novel coronavirus pneumonia","Open Medicine","2020-07-28"],["Psychological, addictive, and health behavior implications of the COVID-19 pandemic","Behaviour Research and Therapy","2020-08-27"],["Older age is associated with more positive reframing of memories from the spring phase of the covid-19 pandemic","Innovation in Aging","2020-12-16"],["Silent hypoxia: A harbinger of clinical deterioration in patients with COVID-19","The American Journal of Emergency Medicine","2020-05-22"],["Is the Host Viral Response and the Immunogenicity of Vaccines Altered in Pregnancy?","Antibodies","2020-08-04"],["Dynamic changes in clinical and CT characteristics of COVID-19 cases with different exposure histories: a retrospective study","BMC Infectious Diseases","2020-08-03"],["Protective immunity against COVID-19: Unravelling the evidences for humoral  cellular components","Travel Medicine and Infectious Disease","2020-11-10"],["Analysis of a persistent viral shedding patient infected with SARS-CoV-2 by RT-qPCR, FilmArray Respiratory Panel v2.1, and antigen detection","Journal of Infection and Chemotherapy","2020-10-29"],["Considerations for remote learning in pathology during COVID‐19 social distancing","Cancer Cytopathology","2020-06-04"],["Fangcang shelter hospitals during the COVID-19 epidemic, Wuhan, China","Bulletin of the World Health Organization","2020-09-29"],["Attention-based VGG-16 model for COVID-19 chest X-ray image classification","Applied Intelligence","2020-11-17"],["The effectiveness of diaphragmatic breathing relaxation training for improving sleep quality among nursing staff during the COVID-19 outbreak: a before and after study","Sleep Medicine","2020-12-09"],["Design and evaluation of a data anonymization pipeline to promote Open Science on COVID-19","Scientific Data","2020-12-10"],["Development of a machine learning algorithm to predict intubation among hospitalized patients with COVID-19","Journal of Critical Care","2020-11-16"],["The Piedmont flood of November 1994: a testbed of forecasting capabilities of the CNR-ISAC meteorological model suite","Bulletin of Atmospheric Science and Technology","2020-08-27"],["The changes of exercise pattern and clinical symptoms in patients with Parkinson's disease in the era of COVID-19 pandemic","Parkinsonism & Related Disorders","2020-09-23"],["A review of the international early recommendations for departments organization and cancer management priorities during the global COVID-19 pandemic: applicability in low- and middle-income countries","European Journal of Cancer","2020-06-08"],["Ventilator Sharing during an Acute Shortage Caused by the COVID-19 Pandemic","American Journal of Respiratory and Critical Care Medicine","2020-08-15"],["Clinical predictors of mortality due to COVID-19 based on an analysis of data of 150 patients from Wuhan, China","Intensive Care Medicine","2020-03-03"],["The Impact of COVID-19 Crisis upon the Consumer Buying Behavior of Fresh Vegetables Directly from Local Producers. Case Study: The Quarantined Area of Suceava County, Romania","International Journal of Environmental Research and Public Health","2020-07-29"],["3D printing technology and internet of things prototyping in family practice: building pulse oximeters during COVID-19 pandemic","3D Printing in Medicine","2020-11-02"],["Impact of renin–angiotensin system inhibitors use on mortality in severe COVID-19 patients with hypertension: a retrospective observational study","The Journal of International Medical Research","2020-12-15"],["The Use of Facemasks During the COVID-19 Pandemic by the Brazilian Population","Journal of Multidisciplinary Healthcare","2020-10-19"],["Smile, grimace or grin? Recalibrating psychiatrist-patient interaction in the era of face masks","Asian Journal of Psychiatry","2020-08-27"],["Why Temperature Screening for Coronavirus Disease 2019 With Noncontact Infrared Thermometers Does Not Work","Open Forum Infectious Diseases","2020-12-14"],["Rationing social contact during the COVID-19 pandemic: Transmission risk and social benefits of US locations","Proceedings of the National Academy of Sciences of the United States of America","2020-06-10"],["Issues to be considered when planning sero-epidemiological studies in regions with a low incidence of SARS-CoV-2","American Journal of Infection Control","2020-06-17"],["The influence of the corporate social responsibility disclosures on consumer brand attitudes under the impact of COVID-19","Frontiers of Business Research in China","2020-12-28"],["ChAdOx1 nCoV-19 vaccine for SARS-CoV-2","Lancet (London, England)","2020-11-05"],["Public perception of urban companion animals during the COVID-19 outbreak in China","Health & Place","2020-07-28"],["Cancer and COVID-19: A war on multiple fronts","Indian Journal of Anaesthesia","2020-05-23"],["Association between NSAIDs use and adverse clinical outcomes among adults hospitalized with COVID-19 in South Korea: A nationwide study","Clinical Infectious Diseases: An Official Publication of the Infectious Diseases Society of America","2020-07-27"],["Psychological Resilience of Healthcare Professionals During COVID-19 Pandemic","Psychological Reports","2020-10-13"],['"Virtual Interdisciplinary COVID-19 Team": A Hospital Pandemic Preparedness Approach',"Oman Medical Journal","2020-10-20"],["Critically ill COVID-19 patient","Turkish Journal of Medical Sciences","2020-04-21"],["Role of inositol to improve surfactant functions and reduce IL-6 levels: A potential adjuvant strategy for SARS-CoV-2 pneumonia?","Medical Hypotheses","2020-09-09"],["THI Modulation of Genetic and Non-genetic Variance Components for Carcass Traits in Hanwoo Cattle","Frontiers in Genetics","2020-12-23"],["Risk factors for severe COVID-19 illness in healthcare workers: Too many unknowns","Infection Control and Hospital Epidemiology","2020-04-27"],["Florid aortitis following SARS-CoV-2 infection","European Heart Journal","2020-08-07"],["Subcutaneous Sarilumab in hospitalised patients with moderate-severe COVID-19 infection compared to the standard of care (SARCOVID): a structured summary of a study protocol for a randomised controlled trial","Trials","2020-09-09"],["SARS-CoV-2 infection: physiological and environmental gift factors at high altitude","VirusDisease","2020-09-11"],["Family Communication in Long-Term Care During a Pandemic: Lessons for Enhancing Emotional Experiences","The American Journal of Geriatric Psychiatry","2020-09-12"],["Monocyte volumetric parameters and lymph index are increased in SARS‐CoV‐2 infection","International Journal of Laboratory Hematology","2020-09-27"],["“I'm Kinda Stuck at Home With Unsupportive Parents Right Now”: LGBTQ Youths' Experiences With COVID-19 and the Importance of Online Support","The Journal of Adolescent Health","2020-06-23"],["Impact of COVID-19 pandemic on patients with ST-segment elevation myocardial infarction: Insights from a British cardiac center","American Heart Journal","2020-05-11"],["Importance of Patient Advocacy During the COVID-19 Pandemic","American Journal of Ophthalmology","2020-09-19"],["Vaccine mandate in long‐term care facilities","Geriatrics & Gerontology International","2020-10-01"],["Compassionate drug (mis)use during pandemics: lessons for COVID-19 from 2009","BMC Medicine","2020-08-21"],["COVID-19 pandemic preparation: using simulation for systems-based learning to prepare the largest healthcare workforce and system in Canada","Advances in Simulation","2020-08-18"],["COVID-19: an opportunity to rethink global cooperation in higher education and research","BMJ Global Health","2020-07-07"],["Ethical Implementation of Immunity Passports During the COVID-19 Pandemic","The Journal of Infectious Diseases","2020-06-24"],["ICU and Ventilator Mortality Among Critically Ill Adults With Coronavirus Disease 2019","Critical Care Medicine","2020-05-22"],["Development of Rapid Response Capabilities in a Large COVID-19 Alternate Care Site Using Failure Modes and Effect Analysis with  Simulation","Anesthesiology","2020-08-03"],["Debate on drugs that may aggravate COVID-19","The Journal of Allergy and Clinical Immunology. in Practice","2020-04-25"],["SARS‐CoV‐2 triggered Takotsubo in 38 patients","Journal of Medical Virology","2020-10-30"],["Studying the trend of the novel coronavirus series in Mauritius and its implications","PLoS ONE","2020-07-10"],["Safety measures in selected radiotherapy centres within Africa in the face of Covid-19","Health and Technology","2020-08-07"],["The Coincidence of 2 Epidemics, Coccidioidomycosis and SARS-CoV-2: A CaseReport","Journal of Investigative Medicine High Impact Case Reports","2020-06-04"],["Lessons Learned from Long-Term Assessment of Rotavirus Vaccination in a High-Income Country: The Case of the Rotavirus Vaccine Belgium Impact Study (RotaBIS)","Infectious Diseases and Therapy","2020-10-06"],["Out of Sight but Not Out of Mind: Caring for Patients Receiving OPAT During the SARS-CoV-2 Pandemic","Open Forum Infectious Diseases","2020-07-21"],["Encouraging results from phase 1/2 COVID-19 vaccine trials","Lancet (London, England)","2020-07-20"],["Cerebrovascular Complications of COVID-19","Stroke","2020-08-06"],["The Productivity of Medical Publication on COVID-19 in the First Half of 2020: A Retrospective Analysis of Articles Available in PubMed","Cureus","2020-11-30"],["GM-CSF blockade with mavrilimumab in severe COVID-19 pneumonia and systemic hyperinflammation: a single-centre, prospective cohort study","The Lancet Rheumatology","2020-06-16"],["The potential roles of micronutrient deficiency and immune system dysfunction in COVID-19 pandemic","Nutrition (Burbank, Los Angeles County, Calif.)","2020-11-06"],["Combating COVID-19: The role of drug repurposing and medicinal plants","Journal of Infection and Public Health","2020-10-27"],["Outcomes of hydroxychloroquine usage in United States veterans hospitalized with Covid-19","medRxiv","2020-04-23"],["The Potential Intermediate Hosts for SARS-CoV-2","Frontiers in Microbiology","2020-09-30"],["Interhospital transportation of a COVID-19 patient undergoing veno-venous extracorporeal membrane oxygenation by helicopter","The American Journal of Emergency Medicine","2020-10-03"],["Leveraging 3D Printing Capacity in Times of Crisis: Recommendations for COVID-19 Distributed Manufacturing for Medical Equipment Rapid Response","International Journal of Environmental Research and Public Health","2020-06-27"],["Clozapine treated patients and COVID-19: Ensuring continued care through collaboration","Schizophrenia Research","2020-05-14"],["COVID-19 in Peru: the need to pay attention to the high number of police deaths due to the pandemic","Journal of Public Health (Oxford, England)","2020-06-12"],["Gaps in allergen immunotherapy administration and subcutaneous allergen immunotherapy dose adjustment schedules: Need for prospective data","Annals of Allergy, Asthma & Immunology","2020-07-18"],["A mechanism-based parameterisation scheme to investigate the association between transmission rate of COVID-19 and meteorological factors on plains in China","The Science of the Total Environment","2020-06-18"],["COVID‐19 and Unequal Social Distancing across Demographic Groups","Regional Science Policy & Practice","2020-08-18"],["Clinical, laboratory, and radiologic characteristics of patients with initial false-negative SARS-CoV-2 nucleic acid amplification test results","Open Forum Infectious Diseases","2020-11-24"],["COVID-19 and surgical education: Every cloud has a silver lining","Annals of Medicine and Surgery","2020-08-25"],["Chloroquine: A Potential Drug in the COVID-19 Scenario","Transactions of the Indian National Academy of Engineering","2020-06-07"],["Patients with locally advanced and metastatic cutaneous squamous cell carcinoma treated with immunotherapy in the era of COVID-19: stop or go? Data from five Italian referral cancer centers","Therapeutic Advances in Medical Oncology","2020-11-20"],["Age Differences in the Consumption and Avoidance of COVID-19 Information","Innovation in Aging","2020-12-16"],["The Experience of Oncology Healthcare Providers in the Central Italy during the COVID-19 Lockdown","Cancers","2020-10-18"],["Patterns of SARS-CoV-2 testing preferences in a national cohort in the United States","medRxiv","2020-12-24"],["Response to the article by Dietz et al. entitled “Recommendations for prioritization, treatment, and triage of breast cancer patients during the COVID‑19 pandemic. The COVID‑19 pandemic breast cancer consortium”","Breast Cancer Research and Treatment","2020-05-26"],["IR is an Operational and Financial Hedge for Hospitals during COVID-19","Journal of Vascular and Interventional Radiology","2020-07-23"],["The psychosocial implications of COVID-19 for a neurology program in a pandemic epicenter","Journal of the Neurological Sciences","2020-07-14"],["Coronavirus-induced coagulopathy during the course of disease","PLoS ONE","2020-12-17"],["Epidemiological characteristics and transmissibility of shigellosis in Hubei Province, China, 2005 – 2017","BMC Infectious Diseases","2020-04-07"],["Angiotensin Converting Enzyme Inhibitor and Angiotensin II Receptor Blocker Use Among Outpatients Diagnosed With COVID-19","The American Journal of Cardiology","2020-07-12"],["Aerosol Inhalation Delivery of Triazavirin in Mice: Outlooks for Advanced Therapy Against Novel Viral Infections","Journal of Pharmaceutical Sciences","2020-11-26"],["The first three weeks of lockdown in England: The challenges of detecting safeguarding issues amid nursery and primary school closures due to COVID-19","Social Sciences & Humanities Open","2020-12-17"],["Estimating the Binding of Sars-CoV-2 Peptides to HLA Class I in Human Subpopulations Using Artificial Neural Networks","Cell Systems","2020-09-10"],["Home gardening and urban agriculture for advancing food and nutritional security in response to the COVID-19 pandemic","Food Security","2020-06-23"],["Glucose-6-phosphate dehydrogenase deficiency associated hemolysis in COVID-19 patients treated with hydroxychloroquine/chloroquine: New case reports coming out","European Journal of Internal Medicine","2020-08-13"],["Mental wellness system for COVID-19","Brain, Behavior, and Immunity","2020-04-13"],["COVID-19 Genetic and Environmental Risk Factors: A Look at the Evidence","Frontiers in Pharmacology","2020-10-07"],["Diabetic emergencies during the COVID‐19 pandemic: A case–control study","Diabetic Medicine","2020-10-22"],["Re-emergence of SARS-CoV2 in a discharged COVID-19 case","Journal of Microbiology, Immunology, and Infection","2020-04-02"],["Some reflections on organizational profiles in Italy in the time of COVID-19","The International Journal of Risk & Safety in Medicine","2020-08-12"],["Neurotrauma in the Time of SARS-COV 2: A Checklist for Its Safe Management","Journal of Neurosciences in Rural Practice","2020-05-11"],["Sentenced to life: what the Italian COVID-19 pandemic could teach us (if we were willing to learn)","European Geriatric Medicine","2020-08-29"],["Two cases of cutaneous eruptions due to CoVID‐19 infection in Singapore: new insights into the spectrum of clinical presentation and histopathology","Journal of the European Academy of Dermatology and Venereology","2020-06-26"],["A quadruple blind, randomised controlled trial of gargling agents in reducing intraoral viral load among hospitalised COVID-19 patients: A structured summary of a study protocol for a randomised controlled trial","Trials","2020-09-14"],["When a COVID-19 vaccine is ready, will we all be ready for it?","International Journal of Public Health","2020-06-11"],["Right ventricular dilation: The additive effect of mechanical ventilation on pulmonary embolism in Covid-19 patients","Thrombosis Research","2020-08-04"],["New Chemical Modalities Enabling Specific RNA Targeting and Degradation: Application to SARS-CoV-2 RNA","ACS Central Science","2020-10-02"],["N-95 masks: how much do we know?","The Egyptian Journal of Internal Medicine","2020-08-31"],["Social Networks’ Engagement During the COVID-19 Pandemic in Spain: Health Media vs. Healthcare Professionals","International Journal of Environmental Research and Public Health","2020-07-21"],["PIN65 Socio-Economic Burden of COVID-19 in Russian Federation","Value in Health","2020-12-11"],["In Vitro Virucidal Effect of Intranasally Delivered Chlorpheniramine Maleate Compound Against Severe Acute Respiratory Syndrome Coronavirus 2","Cureus","2020-09-17"],["Nutrition, the digestive system and immunity in COVID-19 infection","Gastroenterology and Hepatology From Bed to Bench",""],["A protocol for acute stroke unit care during the COVID-19 pandemic","Journal of Stroke and Cerebrovascular Diseases","2020-06-05"],["Association Between ABO and Rh Blood Groups and SARS-CoV-2 Infection or Severe COVID-19 Illness: A Population-Based Cohort Study","Annals of Internal Medicine","2020-11-24"],["Risks of SARS-CoV-2 on male reproductive health and the practice of semen analysis and cryopreservation","Future Microbiology","2020-11-06"],["Estimating case fatality rates of COVID-19","The Lancet. Infectious Diseases","2020-03-31"],["COVID-19 pneumonia: the great radiological mimicker","Insights into Imaging","2020-11-23"],["Recurrence of positive SARS-CoV-2 RNA in COVID-19: A case report","International Journal of Infectious Diseases","2020-03-05"],["Emergency neurological procedures during COVID-19 pandemic: Practical issues","Journal of Anaesthesiology, Clinical Pharmacology","2020-07-24"],["Teamwork, communication and exchange despite Covid-19 – experiences from a digital elective in human medicine studies as part of the HiGHmed project","GMS Journal for Medical Education","2020-12-03"],["Translational simulation for rapid transformation of health services, using the example of the COVID-19 pandemic preparation","Advances in Simulation","2020-06-03"],["Mental health in the era of COVID-19: prevalence of psychiatric disorders in a cohort of patients with type 1 and type 2 diabetes during the social distancing","Diabetology & Metabolic Syndrome","2020-08-31"],["NAFLD and COVID-19: a Pooled Analysis","Sn Comprehensive Clinical Medicine","2020-11-06"],["1699P COVID-19 pandemic: Patients’ perspective during cancer treatment","Annals of Oncology","2020-09-22"],["Adaptation to SARS‐CoV‐2 under stress: Role of distorted information","European Journal of Clinical Investigation","2020-06-13"],["Analysis of clinical features and outcomes of 161 patients with severe and critical COVID‐19: A multicenter descriptive study","Journal of Clinical Laboratory Analysis","2020-06-02"],["COVID-19: Epidemiology and clinical practice implications","The Nurse Practitioner","2020-11-24"],["Early scientific response to COVID-19 epidemic: a scientometric perspective","The European Journal of Public Health","2020-09-30"],["The potential role of the carotid body in COVID-19","American Journal of Physiology - Lung Cellular and Molecular Physiology","2020-08-05"],["SARS-CoV-2 Clinical Syndromes and Predictors of Disease Severity in Hospitalized Children and Youth","The Journal of Pediatrics","2020-11-14"],["The Unpreparedness of the Healthcare System for the Management of COVID-19 Pandemic Leading to the Mistreatment of the Elderly: A Newly Emerging Moral Dilemma","The Journal of Nutrition, Health & Aging","2020-06-06"],["Mental health rescue effects of women's outdoor tourism: A role in COVID-19 recovery","Annals of Tourism Research","2020-10-20"],["The impact of COVID-19 on clinical education of internal medicine trainees","Irish Journal of Medical Science","2020-08-15"],["Parameters Optimization of Catalytic Tubular Nanomembrane-Based Oxygen Microbubble Generator","Micromachines","2020-06-29"],["COVID-19 Severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2) infection in children and adolescents: a systematic review of critically unwell children and the association with underlying comorbidities","European Journal of Pediatrics","2020-09-10"],["Exploring Vector-Borne Disease Surveillance and Response Systems in Beijing, China: A Qualitative Study from the Health System Perspective","International Journal of Environmental Research and Public Health","2020-11-17"],["The Limits to Estimating Population-Genetic Parameters with Temporal Data","Genome Biology and Evolution","2020-03-29"],["What should be done to support the mental health of healthcare staff treating COVID-19 patients?","The British Journal of Psychiatry","2020-05-19"],["Extracorporeal membrane oxygenation (ECMO): does it have a role in the treatment of severe COVID-19?","International Journal of Infectious Diseases","2020-04-03"],["Resilience Among Professional Health Workers in Emergency Services","Journal of Emergency Nursing","2020-09-19"],["Utility of hypertonic saline and diazepam in COVID-19-related hydroxychloroquine toxicity","The Journal of Emergency Medicine","2020-10-29"],["Lung ultrasound in the frontline diagnosis of COVID-19 infection","Medicina Clinica","2020-06-12"],["Effects of Hydroxychloroquine on Covid-19 in Intensive Care Unit Patients: Preliminary Results","International Journal of Antimicrobial Agents","2020-08-08"],["Post‐traumatic stress and stress disorders during the COVID‐19 pandemic: Survey of emergency physicians","Journal of the American College of Emergency Physicians Open","2020-11-02"],["Right-to-left interatrial shunt in COVID-19 patients with pulmonary embolism","The Annals of Thoracic Surgery","2020-05-31"],["Neurological immunotherapy in the era of COVID-19 — looking for consensus in the literature","Nature Reviews. Neurology","2020-07-08"],["Coronavirus Disease (COVID-19) and the Gastrointestinal System in Children","Indian Pediatrics","2020-07-07"],["Disease Perception and Coping with Emotional Distress During COVID-19 Pandemic: A Survey Among Medical Staff","International Journal of Environmental Research and Public Health","2020-07-07"],["Redesigning a PhD measurement course for a new era in nursing science","Journal of Professional Nursing","2020-04-30"],["Would You Sacrifice Your Privacy to Protect Public Health? Prosocial Responsibility in a Pandemic Paves the Way for Digital Surveillance","Frontiers in Psychology","2020-09-18"],["Impact of covid-19 pandemic on dermatology practice: results of a web-based, global survey","International Journal of Women's Dermatology","2020-10-12"],["Risk factors associated with Covid-19-associated pulmonary aspergillosis in ICU patients: a French multicentric retrospective cohort","Clinical Microbiology and Infection","2020-12-13"],["Cardiovascular Changes in Patients With COVID-19 From Wuhan, China","Frontiers in Cardiovascular Medicine","2020-09-02"],["Rapid systematic review of neonatal COVID-19 including a case of presumed vertical transmission","BMJ Paediatrics Open","2020-05-25"],["The Use of Decision Modelling to Inform Timely Policy Decisions on Cardiac Resource Capacity During the COVID-19 Pandemic","The Canadian Journal of Cardiology","2020-05-21"],["Urology in the time of corona","Nature Reviews. Urology","2020-03-23"],["Serologic Responses in Healthy Adult with SARS-CoV-2 Reinfection, Hong Kong, August 2020","Emerging Infectious Diseases","2020-12-01"],["The Influence of the Ongoing COVID-19 Pandemic on Family Violence in China","Journal of Family Violence","2020-09-04"],["Primary prevention: Vaccines and the allergist-immunologist's role","Annals of Allergy, Asthma & Immunology","2020-06-18"],["COVID-19 with asthma: A case report","World Journal of Clinical Cases","2020-08-06"],["Associations between Affect, Physical Activity, and Anxiety Among US Children During COVID-19","medRxiv","2020-10-23"],["Hydroxychloroquine shortage","British Dental Journal","2020-06-12"],["Segmenting areas of potential contamination for adaptive robotic disinfection in built environments","Building and Environment","2020-08-26"],["Transmission of SARS-CoV-2 in children aged 0 to 19 years in childcare facilities and schools after their reopening in May 2020, Baden-Württemberg, Germany","Eurosurveillance","2020-09-10"],["Teleophthalmology and the digital divide: inequities highlighted by the COVID-19 pandemic","Eye","2020-11-30"],["Herbal plants coordinate COVID-19 in multiple dimensions - An insight analysis for clinically applied remedies","International Journal of Medical Sciences","2020-10-22"],["Risk factors for in-hospital mortality in patients with acute myocardial infarction during the COVID-19 outbreak","Revista Espanola De Cardiologia (English Ed.)","2020-07-31"],["Antibodies at work in the time of severe acute respiratory syndrome coronavirus 2","Cytotherapy","2020-08-31"],["SARS-CoV-2 variants lacking a functional ORF8 may reduce accuracy of serological testing","Journal of Immunological Methods","2020-10-31"],["Spinal nerve pathology in Guillain‐Barré syndrome associated with COVID‐19 infection","Muscle & Nerve","2020-07-21"],["Younger people are more vulnerable to stress, anxiety and depression during COVID-19 pandemic: A global cross-sectional survey","Progress in Neuro-Psychopharmacology & Biological Psychiatry","2020-12-26"],["Anaesthesia preparedness for COVID-19 pandemic readiness: a medication preservation strategy","BJA: British Journal of Anaesthesia","2020-05-31"],["COVID-19 and digital epidemiology","Zeitschrift Fur Gesundheitswissenschaften","2020-04-30"],["Use of Tocilizumab for COVID-19-Induced Cytokine Release Syndrome: A Cautionary Case Report","Chest","2020-04-25"],["Respiratory virus and COVID-19","COVID-19","2020-10-30"],["Letter to the editor: COVID-19 cases among school-aged children and school-based measures in Hong Kong, July 2020","Eurosurveillance","2020-09-17"],["COVID‐19: A great disruptor?","Enrollment Management Report","2020-04-27"],["Coronavirus questions that will not go away: interrogating urban andsocio-spatial implications of COVID-19 measures","Emerald Open Research","2020-04-16"],["Highly Effective Inactivation of SARS-CoV-2by Conjugated Polymers and Oligomers","ACS Applied Materials & Interfaces","2020-12-02"],["Barriers to emergency department usage during the COVID‐19 pandemic","Journal of the American College of Emergency Physicians Open","2020-11-12"],["Helping doctors hasten COVID-19 treatment: Towards a rescue framework for the transfusion of best convalescent plasma to the most critical patients based on biological requirements via ml and novel MCDM methods","Computer Methods and Programs in Biomedicine","2020-06-20"],["Science in crisis","New Scientist (1971)","2020-05-08"],["Going Viral: Management of IBD in the Era of the COVID-19 Pandemic","Digestive Diseases and Sciences","2020-05-04"],["Multiple drugs: Coronavirus disease 2019 (COVID-19) and lack of efficacy: case report","Reactions Weekly","2020-10-17"],["Repurposing Drugs, Ongoing Vaccine, and New Therapeutic Development Initiatives Against COVID-19","Frontiers in Pharmacology","2020-08-19"],["New Mexico’s COVID-19 Experience","The American Journal of Forensic Medicine and Pathology","2020-01-08"],["Application of System Biology to Explore the Association of Neprilysin, Angiotensin-Converting Enzyme 2 (ACE2), and Carbonic Anhydrase (CA) in Pathogenesis of SARS-CoV-2","Biological Procedures Online","2020-06-19"],["Cohort Study of Outpatient Hemodialysis Management Strategies for COVID-19 in North-West London","Kidney International Reports","2020-08-25"],["Evaluation of potential therapies for COVID-19 global pandemic","Reactions Weekly","2020-05-09"],["Letter to the Editor regarding: Critical Considerations for Stroke Management During COVID-19 Pandemic in response to Inglis et al., Heart Lung Circ. 2020;29(9): 1263–1267.","Heart, Lung & Circulation","2020-10-09"],["Age Alone is not Adequate to Determine Health-care Resource Allocation During the COVID-19 Pandemic","Canadian Geriatrics Journal","2020-03-01"],["Triaging Total Hip Arthroplasty During the COVID-19 Pandemic","Current Reviews in Musculoskeletal Medicine","2020-05-22"],["Corticosteroids, But Not TNF Antagonists, Are Associated With Adverse COVID-19 Outcomes in Patients With Inflammatory Bowel Diseases: Results From an International Registry","Gastroenterology","2020-05-18"],["Rapid and quantitative detection of SARS-CoV-2 specific IgG for convalescent serum evaluation","Biosensors & Bioelectronics","2020-09-03"],["Substance Use Disorders and COVID-19: Multi-Faceted Problems Which Require Multi-Pronged Solutions","Frontiers in Psychiatry","2020-07-21"],["COVID-19 control in China during mass population movements at New Year","Lancet (London, England)","2020-02-24"],["Laboratory diagnosis of SARS-CoV-2: available approaches and limitations","New Microbes and New Infections","2020-06-14"],["The Impact of the COVID-19 Pandemic on Psychological Distress, Physical Activity, and Symptom Severity in Parkinson’s Disease","Journal of Parkinson's Disease","2020-10-27"],["The Impact of COVID-19 on Health Behavior, Stress, Financial and Food Security among Middle to High Income Canadian Families with Young Children","Nutrients","2020-08-07"],["The impact of the COVID-19 pandemic on harm reduction services in Spain","Harm Reduction Journal","2020-11-04"],["Childhood asthma heterogeneity at the era of precision medicine: Modulating the immune response or the microbiota for the management of asthma attack","Biochemical Pharmacology","2020-05-22"],["Risk Factors for In-hospital Mortality from COVID-19 Infection among Black Patients – An Urban Center Experience","Clinical Infectious Diseases: An Official Publication of the Infectious Diseases Society of America","2020-09-28"],["Person-centered communication between healthcare professionals and COVID-19 infected older adults in acute care settings: Findings from Wuhan, China","The Journals of Gerontology Series B: Psychological Sciences and Social Sciences","2020-11-02"],["Face masks in radiation oncology clinics: based on evidence or source of mistakes?","Medical Oncology (Northwood, London, England)","2020-08-01"],["Seroprevalence of SARS-CoV-2 in Hong Kong and in residents evacuated from Hubei province, China: a multicohort study","The Lancet. Microbe","2020-06-03"],["COVID-19 and SARS Coronavirus 2: Antibodies for the Immediate Rescue and Recovery Phase","Frontiers in Immunology","2020-05-29"],["Letter to the editor: Wide indication for SARS-CoV-2-testing allowed identification of international risk areas during the early phase of the COVID-19 pandemic in Germany","Eurosurveillance","2020-06-11"],["Overreliance on China and dynamic balancing in the shift of global value chains in response to global pandemic COVID-19: an Australian and New Zealand perspective","Asian Business & Management","2020-05-22"],["COVID‐19 associated pulmonary aspergillosis (CAPA) in patients admitted with severe COVID‐19 pneumonia: An observational study from Pakistan","Mycoses","2020-06-25"],["Mining Physicians’ Opinions on Social Media to Obtain Insights Into COVID-19: Mixed Methods Analysis","JMIR Public Health and Surveillance","2020-06-18"],["Tutankhamun’s Antimalarial Drug for Covid-19","Drug Research","2020-10-30"],["Prevalence of post-traumatic stress disorder during the COVID-19 pandemic in Saudi Arabia","Saudi Pharmaceutical Journal : SPJ","2020-10-30"],["First expert elicitation of knowledge on drivers of emergence of the COVID‐19 in pets","Transboundary and Emerging Diseases","2020-07-30"],["Risk of neuropsychiatric disorders in offspring of COVID-19-infected pregnant women and nutritional intervention","European Archives of Psychiatry and Clinical Neuroscience","2020-06-02"],["Dental medicine and COVID-19 pandemic","Acta Stomatologica Croatica","2020-06-01"],["Rapid response to crisis: Health system lessons from the active period of COVID-19","Health Policy and Technology","2020-08-27"],["Is SARS-CoV-2 Also an Enteric Pathogen With Potential Fecal–Oral Transmission? A COVID-19 Virological and Clinical Review","Gastroenterology","2020-04-27"],["Curbing COVID-19: Kerala model","Journal of Oral and Maxillofacial Pathology : JOMFP","2020-09-09"],["Comparison of the characteristics, morbidity, and mortality of COVID-19 and seasonal influenza: a nationwide, population-based retrospective cohort study","The Lancet. Respiratory Medicine","2020-12-17"],["Message From The Managing Editor: Call for COVID‐19 Manuscripts Related To COVID‐19's Impact and System Responses","Juvenile & Family Court Journal","2020-09-28"],["Staff Emotional Support at Montefiore Medical Center During the COVID-19 Pandemic","Joint Commission Journal on Quality and Patient Safety","2020-11-18"],["Clozapine/tocilizumab: Various toxicities: 3 case reports","Reactions Weekly","2020-08-01"],["Intra-arterial thrombosis associated with COVID-19","Journal of Vascular Surgery","2020-05-17"],["1572P Psychological impact of the COVID-19 pandemic on health care workers in oncology in Tunisia","Annals of Oncology","2020-09-22"],["Crystal structure of SARS-CoV-2 main protease provides a basis for design of improved α-ketoamide inhibitors","Science (New York, N.y.)","2020-03-20"],["A 47-Year-Old Hispanic Man Who Developed Cutaneous Vasculitic Lesions and Gangrene of the Toes Following Admission to Hospital with COVID-19 Pneumonia","The American Journal of Case Reports","2020-10-01"],["Report of  Finding on Critically Ill Patients with ‐19","Annals of Neurology","2020-06-13"],["COVID‐19 and cancer care: What have we learned?: Despite the enormous challenges, researchers are sharing valuable lessons regarding evaluating risks, setting priorities, and communicating with patients during the pandemic","Cancer Cytopathology","2020-12-02"],["Cancer in the time of COVID-19: expert opinion on how to adapt current practice","The European Respiratory Journal","2020-05-14"],["Virtual scribing within otolaryngology during the COVID-19 pandemic and beyond","American Journal of Otolaryngology","2020-06-18"],["Ethanol and Isopropanol Inactivation of Human Coronavirus on Hard Surfaces","The Journal of Hospital Infection","2020-09-28"],["ReScan, a Multiplex Diagnostic Pipeline, Pans Human Sera for SARS-CoV-2 Antigens","Cell Reports. Medicine","2020-09-24"],["COVID-19 susceptibility in pregnancy: Immune/inflammatory considerations, the role of placental ACE-2 and research considerations","Reproductive Biology","2020-11-06"],["The Knowledge and Attitude of the Community from the Aseer Region, Saudi Arabia, Toward COVID-19 and Their Precautionary Measures Against the Disease","Risk Management and Healthcare Policy","2020-09-30"],["Preparing for a COVID-19 pandemic: Redefining roles of multidisciplinary team in a large tertiary hospital in Rajasthan","Journal of Family Medicine and Primary Care","2020-11-30"],["COVID-19 reinfection: are we ready for winter?","EBioMedicine","2020-12-09"],["Development and validation of a model for individualized prediction of hospitalization risk in 4,536 patients with COVID-19","PLoS ONE","2020-08-11"],["3D Printed and Electrospun, Transparent, Hierarchical Polylactic Acid Mask Nanoporous Filter","International Journal of Bioprinting","2020-07-01"],["Aeromedical evacuations during the COVID-19 pandemic: practical considerations for patient transport","Cjem","2020-06-24"],["SARS-CoV-2 Seroprevalence among a Southern U.S. Population Indicates Limited Asymptomatic Spread under Physical Distancing Measures","mBio","2020-09-29"],["Glycerol-preserved corneal tissue in emergency corneal transplantation: An alternative for fresh corneal tissue in COVID-19 crisis","Indian Journal of Ophthalmology","2020-06-25"],["Protocol for a randomized controlled trial testing inhaled nitric oxide therapy in spontaneously breathing patients with COVID-19","medRxiv","2020-03-13"],["HLA-B*44 and C*01 Prevalence Correlates with Covid19 Spreading across Italy","International Journal of Molecular Sciences","2020-07-23"],["COVID-19—a very visible pandemic","Lancet (London, England)","2020-08-06"],["Paraneoplastic Leukocytosis: A Poor Prognostic Marker in Pancreatic Adenocarcinoma","Cureus","2020-07-05"],["Management of Arrhythmias Associated with COVID-19","Current Cardiology Reports","2020-11-24"],["A Caputo power law model predicting the spread of the COVID-19 outbreak in Pakistan","Alexandria Engineering Journal","2020-09-10"],["A Simple Method for Safer Flexible Fiberoptic Laryngoscopy in the Era of COVID-19","Indian Journal of Otolaryngology and Head & Neck Surgery","2020-10-23"],["COVID-19: opportunity to learn from necessity","Occupational Medicine (Oxford, England)","2020-05-02"],["Advantages of, and Adaptations to, Enhanced Recovery Protocols for Perioperative Care during the COVID-19 Pandemic","Journal of Minimally Invasive Gynecology","2020-12-24"],["Short-run environmental effects of COVID-19: Evidence from forest fires","World Development","2020-07-31"],["Entry Inhibitors: Efficient Means to Block Viral Infection","The Journal of Membrane Biology","2020-08-30"],["Possible Transmission Flow of SARS-CoV-2 Based on ACE2 Features","Molecules","2020-12-13"],["Obstructive Sleep Apnea, Obesity, and Noninvasive Ventilation: Considerations During the Coronavirus Disease 2019 Pandemic","Anesthesia and Analgesia","2020-04-28"],["Perinatal Transmission of COVID-19 Associated SARS-CoV-2: Should We Worry?","Clinical Infectious Diseases: An Official Publication of the Infectious Diseases Society of America","2020-03-17"],["Association of environmental and meteorological factors on the spread of COVID-19 in Victoria, Mexico, and air quality during the lockdown","Environmental Research","2020-11-11"],["Thrombin Inhibition by Argatroban: Potential Therapeutic Benefits in COVID-19","Cardiovascular Drugs and Therapy","2020-09-01"],["New strategy for COVID-19 vaccination: targeting the receptor-binding domain of the SARS-CoV-2 spike protein","Cellular and Molecular Immunology","2020-11-26"],["SARS-CoV-2 Seropositivity in Asymptomatic Frontline Health Workers in Ibadan, Nigeria","The American Journal of Tropical Medicine and Hygiene","2020-11-11"],["Nicaragua's response to COVID-19","The Lancet. Global Health","2020-04-30"],["Challenge Trials: What Are the Ethical Problems?","The Journal of Medicine and Philosophy","2020-11-25"],["Spreading of SARS-CoV-2 in West Africa and assessment of risk factors","Epidemiology and Infection","2020-09-14"],["Immunological considerations for SARS-CoV-2 human challenge studies","Nature Reviews. Immunology","2020-10-21"],["COVID-19 control strategies cost effective in South Africa","Pharmacoeconomics & Outcomes News","2020-11-28"],["Low risk of SARS-CoV-2 transmission by fomites in real-life conditions","The Lancet. Infectious Diseases","2020-09-29"],["C3 and ACE1 polymorphisms are more important confounders in the spread and outcome of COVID-19 in comparison with ABO polymorphism","European Journal of Preventive Cardiology","2020-08-01"],["Comparing ICU Admission Rates of Mild/Moderate COVID-19 Patients Treated with Hydroxychloroquine, Favipiravir, and Hydroxychloroquine plus Favipiravir","Journal of Infection and Public Health","2020-12-29"],["Perceived social support and compliance with stay-at-home orders during the COVID-19 outbreak: evidence from Iran","BMC Public Health","2020-11-04"],["An e-mental health intervention to support burdened people in times of the COVID-19 pandemic: CoPE It","Journal of Public Health (Oxford, England)","2020-05-04"],["Binding of SARS-CoV-2 spike protein to ACE2 is disabled by thiol-based drugs; evidence from  SARS-CoV-2 infection studies.","bioRxiv","2020-12-08"],["The Cholera Epidemics in Hamburg and What to Learn for COVID‐19 (SARS‐CoV‐2)","Cytometry","2020-03-18"],["Role of Personal Protective Measures in Prevention of COVID-19 Spread Among Physicians in Bangladesh: a Multicenter Cross-Sectional Comparative Study","Sn Comprehensive Clinical Medicine","2020-08-28"],["Elevation of blood glucose level predicts worse outcomes in hospitalized patients with COVID-19: a retrospective cohort study","BMJ Open Diabetes Research & Care","2020-06-04"],["Towards Neuro-CoViD-19","Bioinformation","2020-04-30"],["Antihypertensive medication uses and serum ACE2 levels: ACEIs/ARBs treatment does not raise serum levels of ACE2","medRxiv","2020-05-25"],["The role of haematological parameters in patients with COVID-19 and influenza virus infection","Epidemiology and Infection","2020-11-05"],["Clinical trials on drug repositioning for COVID-19 treatment","Revista Panamericana de Salud Pública","2020-03-20"],["Evaluating Clinical Course and Risk Factors of Infection and Demographic Characteristics of Pregnant Women with COVID-19 in Hamadan Province, West of Iran","Journal of Research in Health Sciences","2020-08-17"],["Scottish Medicines Consortium September 2020 decisions","Pharmacoeconomics & Outcomes News","2020-09-19"],["Pulmonary Pathology of COVID-19 Following 8 Weeks to 4 Months of Severe Disease: A Report of Three Cases, Including One With Bilateral Lung Transplantation","American Journal of Clinical Pathology","2020-12-14"],["Controversies in airway management of COVID-19 patients: updated information and international expert consensus recommendations","BJA: British Journal of Anaesthesia","2020-11-06"],["Stepwise School Opening and an Impact on the Epidemiology of COVID-19 in the Children","Journal of Korean Medical Science","2020-11-20"],["Effect of COVID-19 virus on reducing GHG emission and increasing energy generated by renewable energy sources: A brief study in Malaysian context","Environmental Technology & Innovation","2020-09-09"],["Deep vein thrombosis protocol optimization to minimize healthcare worker exposure in coronavirus disease-2019","Journal of Vascular Surgery. Venous and Lymphatic Disorders","2020-08-11"],["Operating room efficiency and timing during coronavirus disease 2019 outbreak in a referral orthopaedic hospital in Northern Italy","International Orthopaedics","2020-08-16"],["Has the COVID-19 pandemic affected the susceptibility to cyberbullying in India?","Computers in Human Behavior Reports","2020-09-28"],["The Global Response to the COVID-19 Pandemic","Med (New York, N.y.)","2020-12-18"],["COVID’s Impact on Radiation Oncology: A Latin American Survey Study","International Journal of Radiation Oncology, Biology, Physics","2020-09-02"],["A step backwards in the fight against global vaccine inequities","Lancet (London, England)","2020-12-09"],["Experiences, Attitudes, and Needs of Users of a Pregnancy and Parenting App (Baby Buddy) During the COVID-19 Pandemic: Mixed Methods Study","JMIR mHealth and uHealth","2020-12-09"],["Relevance of oral cavity in COVID","British Dental Journal","2020-07-24"],["Alignment With Market Forces: The “Re-Whithering” of Infectious Diseases","Open Forum Infectious Diseases","2020-06-20"],["SARS-CoV-2 spike protein promotes IL-6 trans-signaling by activation of angiotensin II receptor signaling in epithelial cells","PLoS Pathogens","2020-12-07"],["In-Hospital Mortality and Prediction in an Urban U.S. Population With COVID-19","Cureus","2020-11-30"],["When there is a pandemic there is no time to waste: should we have hydroxychloroquine in our armoury against COVID-19 infected patients?","Mediterranean Journal of Rheumatology","2020-03-31"],["Current knowledge of COVID-19 and infection prevention and control strategies in healthcare settings: A global analysis","Infection Control and Hospital Epidemiology","2020-05-15"],["Impact of international travel dynamics on domestic spread of 2019-nCoV in India: origin-based risk assessment in importation of infected travelers","Globalization and Health","2020-05-12"],["Simply saliva: stability of SARS-CoV-2 detection negates the need for expensive collection devices","medRxiv","2020-08-04"],["Neurological features of COVID-19 and epilepsy: Could neuromuscular assessment be a physical and functional marker?","Epilepsy & Behavior","2020-12-09"],["Seborrheic dermatitis and masks","Journal of Cosmetic Dermatology","2020-08-13"],["Serum Activity of Liver Enzymes Is Associated With Higher Mortality in COVID-19: A Systematic Review and Meta-Analysis","Frontiers in Medicine","2020-07-22"],["Steroids for sepsis and ARDS: this eternal controversy remains with COVID-19","Lancet (London, England)","2020-10-09"],["Urinary Neutrophil Gelatinase-Associated Lipocalin in Critically Ill Patients With Coronavirus Disease 2019","Critical Care Explorations","2020-08-20"],["T and B cell Epitope analysis of SARS‐CoV‐2 S protein based on immunoinformatics and experimental research","Journal of Cellular and Molecular Medicine","2020-12-15"],["COVID-19 disease in children: not as mild as we have been led to believe","World Journal of Pediatrics","2020-06-23"],["Lung Ultrasound in COVID-19","Indian Pediatrics","2020-07-24"],["Implications of COVID‐19 for an ageing population","The Medical Journal of Australia","2020-09-18"],["A Case of Coronavirus Disease 2019 With Concomitant Acute Cerebral Infarction and Deep Vein Thrombosis","Frontiers in Neurology","2020-04-22"],["Tracking down coronavirus","New Scientist (1971)","2020-05-01"],["Association of ambient air pollution with cardiovascular disease risks in people with type 2 diabetes: a Bayesian spatial survival analysis","Environmental Health","2020-11-05"],["Chest CT in COVID-19: What the Radiologist Needs to Know","Radiographics","2020-10-23"],["Clozapine: Non-convulsive status epilepticus: case report","Reactions Weekly","2020-11-07"],["Cognitive flexibility and perceived threat from COVID-19 mediate the relationship between childhood maltreatment and state anxiety","PLoS ONE","2020-12-11"],["Orthopaedic Education During the COVID-19 Pandemic","The Journal of the American Academy of Orthopaedic Surgeons","2020-04-08"],["Construction time, cost and testing data of a prefabricated isolation medical unit for COVID-19","Data in Brief","2020-07-24"],["Urgent Issues Facing Immigrant Physicians in the United States in the COVID-19 Era","Annals of Internal Medicine","2020-07-02"],["COVID-19 and a novel initiative to improve safety by 3D printing personal protective equipment parts from computed tomography","3D Printing in Medicine","2020-08-12"],["Comparison of clinical characteristics and outcomes of patients with coronavirus disease 2019 at different ages","Aging (Albany NY)","2020-06-04"],["COVID-19 Infection Fatality Rate Associated with Incidence—A Population-Level Analysis of 19 Spanish Autonomous Communities","Biology","2020-06-16"],["The curative effect of Reduning injection combined with Xuanfeibaidu formula on COVID-19: A protocol for systematic review and meta-analysis","Medicine","2020-11-13"],["Immune checkpoint inhibitors in SARS-CoV-2 infected cancer patients: the spark that ignites the fire?","Lung Cancer (Amsterdam, Netherlands)","2020-05-11"],["COVID-19 in Omani Children with Hemato-Oncology Diseases","Mediterranean Journal of Hematology and Infectious Diseases","2020-11-01"],["COVID-19 Pandemic: Disparate Health Impact on the Hispanic/Latinx Population in the United States","The Journal of Infectious Diseases","2020-07-30"],["The heterogeneity of grief in India during coronavirus disease 2019 (COVID-19) and the national lockdown","Asian Journal of Psychiatry","2020-06-30"],["Connecting During COVID-19: A Protocol of a Volunteer-Based Telehealth Program for Supporting Older Adults' Health","Frontiers in Psychiatry","2020-12-02"],["Caring for people with heart failure and many other medical problems through and beyond the ‐19 pandemic: the advantages of universal access to home telemonitoring","European Journal of Heart Failure","2020-06-01"],["The path ahead: From global pandemic to health promotion","Preventive Medicine Reports","2020-12-08"],["Rapid review of suspected adverse drug events due to remdesivir in the WHO database; findings and implications","Expert Review of Clinical Pharmacology","2020-12-29"],["Chronic lymphocytic leukaemia in COVID‐19","International Journal of Laboratory Hematology","2020-08-09"],["HLA and immunological features of SARS-CoV-2-induced Guillain-Barré syndrome","Neurological Sciences","2020-10-02"],["Salivary IgA as a Useful Biomarker for Dental Caries in Down Syndrome Patients: A Systematic Review and Meta-analysis","European Journal of Dentistry","2020-09-24"],["Left ventricular thrombus and pulmonary embolism: A case series of thrombosis in COVID‐19 in Thai patients","Research and Practice in Thrombosis and Haemostasis","2020-10-13"],["Oral cancer diagnosis during the COVID‐19 pandemic in an oral pathology laboratory in Rio de Janeiro, Brazil","Oral Diseases","2020-10-23"],["Implications of COVID-19 for patients with pre-existing digestive diseases","The Lancet. Gastroenterology & Hepatology","2020-03-11"],["A National Strategy for Ventilator and ICU Resource Allocation During the Coronavirus Disease 2019 Pandemic","Chest","2020-05-12"],["Accuracy of serological testing for SARS‐CoV‐2 antibodies: first results of a large mixed‐method evaluation study","Allergy","2020-09-30"],["Papillary Muscle Rupture Due to Delayed STEMI Presentation in a Patient Self-Isolating for Presumed COVID-19","Jacc. Case Reports","2020-07-11"],["The 2020 Pandemic: Economic repercussions and policy responses","Review of Financial Economics","2020-10-13"],["Air quality variations in Northern South America during the COVID-19 lockdown","The Science of the Total Environment","2020-08-11"],["Breast cancer surgery during the COVID-19 pandemic: A prospective observational study in a single centre","European Journal of Surgical Oncology","2020-12-22"],["Abdominopelvic CT findings in patients with novel coronavirus disease 2019 (COVID-19)","Abdominal Radiology (New York)","2020-08-06"],["Organoids demonstrate gut infection by SARS-CoV-2","Nature Reviews. Gastroenterology & Hepatology","2020-05-19"],["SARS-CoV-2 and the safety margins of cell-based biological medicinal products","Biologicals","2020-08-29"],["Psychiatry residency during the COVID-19 pandemic: Navigating uncharted waters","Asian Journal of Psychiatry","2020-06-16"],["Early clinical outcomes with tocilizumab for severe COVID-19: a two-centre retrospective study","International Journal of Antimicrobial Agents","2020-12-15"],["Viral Vectors Applied for RNAi-Based Antiviral Therapy","Viruses","2020-08-23"],["The impact of strict COVID-19 lockdown in Spain on glycemic profiles in patients with type 1 Diabetes prone to hypoglycemia using standalone continuous glucose monitoring","Diabetes Research and Clinical Practice","2020-07-30"],["Relevance of neuroimaging in publications on COVID-19 and stroke","Neurología (English Edition)","2020-10-09"],["Old Weapon for New Enemy: Drug Repurposing for Treatment of Newly Emerging Viral Diseases","Virologica Sinica","2020-02-11"],["Diagnostic Stewardship: An Essential Element in a Rapidly Evolving COVID-19 Pandemic","Mayo Clinic Proceedings","2020-06-23"],["Community venue exposure risk estimator for the COVID-19 pandemic","Health & Place","2020-09-29"],["Virus-CKB: an integrated bioinformatics platform and analysis resource for COVID-19 research","Briefings in Bioinformatics","2020-07-27"],["Biosensors for the Multiplex Detection of Inflammatory Disease Biomarkers","Biosensors","2020-12-28"],["Identification of potential lock-down area during COVID-19 transmission in Punjab, Pakistan","Public Health","2020-11-10"],["Safety and efficacy of different anesthetic regimens for parturients with COVID-19 undergoing Cesarean delivery: a case series of 17 patients","Canadian Journal of Anaesthesia","2020-03-16"],["CLINICAL CHARACTERISTICS AND OUTCOMES OF PATIENTS WITH COVID-19 IN A COMMUNITY HOSPITAL IN MICHIGAN","Chest","2020-10-12"],["The Combined Use of Tocilizumab and Hemoadsorption in a Patient with SARS-COV-2-19-Associated Pneumonia: A Case Report","Nephron. Clinical Practice","2020-07-21"],["Can a metabolism-targeted therapeutic intervention successfully subjugate SARS-COV-2? A scientific rational","Biomedicine & Pharmacotherapy","2020-08-27"],["The Online Education Mode and Reopening Plans for Chinese Schools During the COVID-19 Pandemic: A Mini Review","Frontiers in Public Health","2020-12-10"],["Prevalence of COVID-19 among patients with chronic inflammatory rheumatic diseases treated with biologic agents or small molecules: A population-based study in the first two months of COVID-19 outbreak in Italy","Joint Bone Spine","2020-05-20"],["Letter to the Editor: The characteristics of two patients co‐infected with SARS‐CoV‐2 and HIV in Wuhan, China","Journal of Medical Virology","2020-06-10"],["Multisystem Resilience for Children and Youth in Disaster: Reflections in the Context of COVID-19","Adversity and Resilience Science","2020-06-25"],["Effects of the COVID-19 Response on Tuberculosis Prevention and Control Efforts — United States, March–April 2020","Morbidity and Mortality Weekly Report","2020-07-24"],["Pooled Testing for Expanding COVID-19 Mass Surveillance","Disaster Medicine and Public Health Preparedness","2020-07-14"],["Face mask exemptions, psychiatric patients, and COVID-19","European Psychiatry","2020-12-07"],["Psychological stress responses to COVID-19 and adaptive strategies in China","World Development","2020-07-24"],["COVID-19 pandemic in India: a mathematical model study","Nonlinear Dynamics","2020-09-21"],["SARS-CoV-2 enterocolitis with persisting to excrete the virus for approximately two weeks after recovering from diarrhea: A case report","Infection Control and Hospital Epidemiology","2020-03-19"],["Limiting spread of COVID-19 in Ghana: Compliance audit of selected transportation stations in the Greater Accra region of Ghana","PLoS ONE","2020-09-11"],["A COVID‐19 human viral challenge model. Learning from experience","Influenza and Other Respiratory Viruses","2020-08-12"],["COVID-19 – Journal de bord – 15/03/2020 : premières réflexions…","La Presse Médicale Formation","2020-04-23"],["Diabetes and Novel Coronavirus Infection: Implications for Treatment","Diabetes Therapy","2020-07-13"],["COVID-19: Active measures to support community-dwelling older adults","Travel Medicine and Infectious Disease","2020-03-20"],["Prevention of COVID-19 in retail food stores in Portugal: the importance of regulations in behavioural change","Atencion Primaria","2020-12-05"],["Telesimulation‐based education during COVID‐19","The Clinical Teacher","2020-10-12"],["COVID‐19 hygiene measures: hand eczema and insights into ACE2 and integrins as key molecules for SARS‐CoV‐2 cutaneous transmission","International Journal of Dermatology","2020-09-24"],["A Hard Case to Swallow: Crucifix Esophageal Foreign Body in a Nonverbal Patient","Cureus","2020-07-19"],["Transparency of Health Informatics Processes as the Condition of Healthcare Professionals’ and Patients’ Trust and Adoption: the Rise of Ethical Requirements","Yearbook of Medical Informatics","2020-08-21"],["COVID‐19 and nonalcoholic fatty liver disease: two intersecting pandemics","European Journal of Clinical Investigation","2020-06-26"],["Case Report: Clinical Treatment of the First Critical Patient With Coronavirus Disease (COVID-19) in Liaocheng, Shandong Province","Frontiers in Medicine","2020-05-28"]]},1077:(e,t,n)=>{"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}n.d(t,{Z:()=>r})},9173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1077);function i(e){let t=e,n=e;function i(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>(0,r.Z)(e(t),n)}(e)),{left:i,center:function(e,n,r,o){null==r&&(r=0),null==o&&(o=e.length);const a=i(e,n,r,o-1);return a>r&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}},3865:(e,t,n)=>{"use strict";function r(e,t){let n,r;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}n.d(t,{Z:()=>r})},7622:(e,t,n)=>{"use strict";function r(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{Z:()=>r})},7614:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>a,G9:()=>s,ly:()=>l});var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(e,t,n){var r,i,o,a,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=s(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++l<i;)o[l]=(e+l)*a;else for(a=-a,e=Math.ceil(e*a),t=Math.floor(t*a),o=new Array(i=Math.ceil(t-e+1));++l<i;)o[l]=(e+l)/a;return r&&o.reverse(),o}function s(e,t,n){var a=(t-e)/Math.max(0,n),s=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,s);return s>=0?(l>=r?10:l>=i?5:l>=o?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(l>=r?10:l>=i?5:l>=o?2:1)}function l(e,t,n){var a=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),l=a/s;return l>=r?s*=10:l>=i?s*=5:l>=o&&(s*=2),t<e?-s:s}},604:(e,t,n)=>{"use strict";n.d(t,{LL:()=>p,Kh:()=>f,F5:()=>d});var r=Array.prototype.slice;function i(e){return e}var o=1e-6;function a(e){return"translate("+(e+.5)+",0)"}function s(e){return"translate(0,"+(e+.5)+")"}function l(e){return t=>+e(t)}function c(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function u(){return!this.__axis}function h(e,t){var n=[],h=null,d=null,f=6,p=6,m=3,g=1===e||4===e?-1:1,y=4===e||2===e?"x":"y",v=1===e||3===e?a:s;function _(r){var a=null==h?t.ticks?t.ticks.apply(t,n):t.domain():h,s=null==d?t.tickFormat?t.tickFormat.apply(t,n):i:d,_=Math.max(f,0)+m,b=t.range(),x=+b[0]+.5,w=+b[b.length-1]+.5,S=(t.bandwidth?c:l)(t.copy()),A=r.selection?r.selection():r,E=A.selectAll(".domain").data([null]),M=A.selectAll(".tick").data(a,t).order(),C=M.exit(),T=M.enter().append("g").attr("class","tick"),P=M.select("line"),D=M.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(T),P=P.merge(T.append("line").attr("stroke","currentColor").attr(y+"2",g*f)),D=D.merge(T.append("text").attr("fill","currentColor").attr(y,g*_).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),r!==A&&(E=E.transition(r),M=M.transition(r),P=P.transition(r),D=D.transition(r),C=C.transition(r).attr("opacity",o).attr("transform",(function(e){return isFinite(e=S(e))?v(e):this.getAttribute("transform")})),T.attr("opacity",o).attr("transform",(function(e){var t=this.parentNode.__axis;return v(t&&isFinite(t=t(e))?t:S(e))}))),C.remove(),E.attr("d",4===e||2==e?p?"M"+g*p+","+x+"H0.5V"+w+"H"+g*p:"M0.5,"+x+"V"+w:p?"M"+x+","+g*p+"V0.5H"+w+"V"+g*p:"M"+x+",0.5H"+w),M.attr("opacity",1).attr("transform",(function(e){return v(S(e))})),P.attr(y+"2",g*f),D.attr(y,g*_).text(s),A.filter(u).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),A.each((function(){this.__axis=S}))}return _.scale=function(e){return arguments.length?(t=e,_):t},_.ticks=function(){return n=r.call(arguments),_},_.tickArguments=function(e){return arguments.length?(n=null==e?[]:r.call(e),_):n.slice()},_.tickValues=function(e){return arguments.length?(h=null==e?null:r.call(e),_):h&&h.slice()},_.tickFormat=function(e){return arguments.length?(d=e,_):d},_.tickSize=function(e){return arguments.length?(f=p=+e,_):f},_.tickSizeInner=function(e){return arguments.length?(f=+e,_):f},_.tickSizeOuter=function(e){return arguments.length?(p=+e,_):p},_.tickPadding=function(e){return arguments.length?(m=+e,_):m},_}function d(e){return h(1,e)}function f(e){return h(2,e)}function p(e){return h(3,e)}},2650:(e,t,n)=>{"use strict";function r(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function o(){}n.d(t,{ZP:()=>x,B8:()=>E});var a=.7,s=1/a,l="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,d=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[l,l,l,c]+"\\)$"),m=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),g=new RegExp("^hsl\\("+[c,u,u]+"\\)$"),y=new RegExp("^hsla\\("+[c,u,u,c]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=h.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?w(t):3===n?new M(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?S(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?S(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=d.exec(e))?new M(t[1],t[2],t[3],1):(t=f.exec(e))?new M(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=p.exec(e))?S(t[1],t[2],t[3],t[4]):(t=m.exec(e))?S(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=g.exec(e))?D(t[1],t[2]/100,t[3]/100,1):(t=y.exec(e))?D(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?w(v[e]):"transparent"===e?new M(NaN,NaN,NaN,0):null}function w(e){return new M(e>>16&255,e>>8&255,255&e,1)}function S(e,t,n,r){return r<=0&&(e=t=n=NaN),new M(e,t,n,r)}function A(e){return e instanceof o||(e=x(e)),e?new M((e=e.rgb()).r,e.g,e.b,e.opacity):new M}function E(e,t,n,r){return 1===arguments.length?A(e):new M(e,t,n,null==r?1:r)}function M(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function C(){return"#"+P(this.r)+P(this.g)+P(this.b)}function T(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function P(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function D(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function k(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof o||(e=x(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,c=(a+i)/2;return l?(s=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new O(s,l,c,e.opacity)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function I(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}r(o,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHsl:function(){return k(this).formatHsl()},formatRgb:b,toString:b}),r(M,E,i(o,{brighter:function(e){return e=null==e?s:Math.pow(s,e),new M(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new M(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C,formatHex:C,formatRgb:T,toString:T})),r(O,(function(e,t,n,r){return 1===arguments.length?k(e):new O(e,t,n,null==r?1:r)}),i(o,{brighter:function(e){return e=null==e?s:Math.pow(s,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new M(I(e>=240?e-240:e+120,i,r),I(e,i,r),I(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},2626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r={value:()=>{}};function i(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new o(r)}function o(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function s(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function l(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=r,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}o.prototype=i.prototype={constructor:o,on:function(e,t){var n,r=this._,i=a(e+"",r),o=-1,c=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<c;)if(n=(e=i[o]).type)r[n]=l(r[n],e.name,t);else if(null==t)for(n in r)r[n]=l(r[n],e.name,null);return this}for(;++o<c;)if((n=(e=i[o]).type)&&(n=s(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new o(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const c=i},72:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,D:()=>a});var r=n(4017),i=n(4299);function o(e){var t=e.document.documentElement,n=(0,r.Z)(e).on("dragstart.drag",i.Z,!0);"onselectstart"in t?n.on("selectstart.drag",i.Z,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function a(e,t){var n=e.document.documentElement,o=(0,r.Z)(e).on("dragstart.drag",null);t&&(o.on("click.drag",i.Z,!0),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}},4299:(e,t,n)=>{"use strict";function r(e){e.stopImmediatePropagation()}function i(e){e.preventDefault(),e.stopImmediatePropagation()}n.d(t,{r:()=>r,Z:()=>i})},3630:(e,t,n)=>{"use strict";n.d(t,{fW:()=>r}),function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3);var r=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3);!function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3)},8602:(e,t,n)=>{"use strict";n.d(t,{WU:()=>h,jH:()=>d});var r,i=n(3085),o=n(6196),a=n(8885);function s(e,t){var n=(0,a.V)(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const l={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:a.Z,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>s(100*e,t),r:s,s:function(e,t){var n=(0,a.V)(e,t);if(!n)return e+"";var i=n[0],o=n[1],s=o-(r=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+(0,a.V)(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function c(e){return e}var u,h,d,f=Array.prototype.map,p=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];u=function(e){var t,n,a=void 0===e.grouping||void 0===e.thousands?c:(t=f.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",u=void 0===e.currency?"":e.currency[1]+"",h=void 0===e.decimal?".":e.decimal+"",d=void 0===e.numerals?c:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(f.call(e.numerals,String)),m=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"−":e.minus+"",y=void 0===e.nan?"NaN":e.nan+"";function v(e){var t=(e=(0,o.Z)(e)).fill,n=e.align,i=e.sign,c=e.symbol,f=e.zero,v=e.width,_=e.comma,b=e.precision,x=e.trim,w=e.type;"n"===w?(_=!0,w="g"):l[w]||(void 0===b&&(b=12),x=!0,w="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var S="$"===c?s:"#"===c&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",A="$"===c?u:/[%p]/.test(w)?m:"",E=l[w],M=/[defgprs%]/.test(w);function C(e){var o,s,l,c=S,u=A;if("c"===w)u=E(e)+u,e="";else{var m=(e=+e)<0||1/e<0;if(e=isNaN(e)?y:E(Math.abs(e),b),x&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),m&&0==+e&&"+"!==i&&(m=!1),c=(m?"("===i?i:g:"-"===i||"("===i?"":i)+c,u=("s"===w?p[8+r/3]:"")+u+(m&&"("===i?")":""),M)for(o=-1,s=e.length;++o<s;)if(48>(l=e.charCodeAt(o))||l>57){u=(46===l?h+e.slice(o+1):e.slice(o))+u,e=e.slice(0,o);break}}_&&!f&&(e=a(e,1/0));var C=c.length+e.length+u.length,T=C<v?new Array(v-C+1).join(t):"";switch(_&&f&&(e=a(T+e,T.length?v-u.length:1/0),T=""),n){case"<":e=c+e+u+T;break;case"=":e=c+T+e+u;break;case"^":e=T.slice(0,C=T.length>>1)+c+e+u+T.slice(C);break;default:e=T+c+e+u}return d(e)}return b=void 0===b?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),C.toString=function(){return e+""},C}return{format:v,formatPrefix:function(e,t){var n=v(((e=(0,o.Z)(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor((0,i.Z)(t)/3))),a=Math.pow(10,-r),s=p[8+r/3];return function(e){return n(a*e)+s}}}}({thousands:",",grouping:[3],currency:["$",""]}),h=u.format,d=u.formatPrefix},3085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(8885);function i(e){return(e=(0,r.V)(Math.abs(e)))?e[1]:NaN}},8885:(e,t,n)=>{"use strict";function r(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function i(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}n.d(t,{Z:()=>r,V:()=>i})},6196:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function o(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},5302:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=e=>()=>e},3626:(e,t,n)=>{"use strict";function r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{Z:()=>r})},7765:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s});var r=n(2650);function i(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}var o=n(5302);function a(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):(0,o.Z)(isNaN(e)?t:e)}const s=function e(t){var n=function(e){return 1==(e=+e)?a:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):(0,o.Z)(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=(0,r.B8)(e)).r,(t=(0,r.B8)(t)).r),o=n(e.g,t.g),s=n(e.b,t.b),l=a(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=s(t),e.opacity=l(t),e+""}}return i.gamma=e,i}(1);function l(e){return function(t){var n,i,o=t.length,a=new Array(o),s=new Array(o),l=new Array(o);for(n=0;n<o;++n)i=(0,r.B8)(t[n]),a[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}l((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],s=r>0?e[r-1]:2*o-a,l=r<t-1?e[r+2]:2*a-o;return i((n-r/t)*t,s,o,a,l)}})),l((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],s=e[(r+1)%t],l=e[(r+2)%t];return i((n-r/t)*t,o,a,s,l)}}))},9843:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3626),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(i.source,"g");function a(e,t){var n,a,s,l=i.lastIndex=o.lastIndex=0,c=-1,u=[],h=[];for(e+="",t+="";(n=i.exec(e))&&(a=o.exec(t));)(s=a.index)>l&&(s=t.slice(l,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(a=a[0])?u[c]?u[c]+=a:u[++c]=a:(u[++c]=null,h.push({i:c,x:(0,r.Z)(n,a)})),l=o.lastIndex;return l<t.length&&(s=t.slice(l),u[c]?u[c]+=s:u[++c]=s),u.length<2?h[0]?function(e){return function(t){return e(t)+""}}(h[0].x):function(e){return function(){return e}}(t):(t=h.length,function(e){for(var n,r=0;r<t;++r)u[(n=h[r]).i]=n.x(e);return u.join("")})}},8833:(e,t,n)=>{"use strict";function r(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,c,u,h,d,f=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=t>=(o=(m+y)/2))?m=o:y=o,(u=n>=(a=(g+v)/2))?g=a:v=a,i=f,!(f=f[h=u<<1|c]))return i[h]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return p.next=f,i?i[h]=p:e._root=p,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+y)/2))?m=o:y=o,(u=n>=(a=(g+v)/2))?g=a:v=a}while((h=u<<1|c)==(d=(l>=a)<<1|s>=o));return i[d]=f,i[h]=p,e}function i(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function o(e){return e[0]}function a(e){return e[1]}function s(e,t,n){var r=new l(null==t?o:t,null==n?a:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function l(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function c(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}n.d(t,{Z:()=>s});var u=s.prototype=l.prototype;u.copy=function(){var e,t,n=new l(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=c(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=c(t));return n},u.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return r(this.cover(t,n),t,n,e)},u.addAll=function(e){var t,n,i,o,a=e.length,s=new Array(a),l=new Array(a),c=1/0,u=1/0,h=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,l[n]=o,i<c&&(c=i),i>h&&(h=i),o<u&&(u=o),o>d&&(d=o));if(c>h||u>d)return this;for(this.cover(c,u).cover(h,d),n=0;n<a;++n)r(this,s[n],l[n],e[n]);return this},u.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n||1,c=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},u.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},u.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},u.find=function(e,t,n){var r,o,a,s,l,c,u,h=this._x0,d=this._y0,f=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new i(g,h,d,f,p)),null==n?n=1/0:(h=e-n,d=t-n,f=e+n,p=t+n,n*=n);c=m.pop();)if(!(!(g=c.node)||(o=c.x0)>f||(a=c.y0)>p||(s=c.x1)<h||(l=c.y1)<d))if(g.length){var y=(o+s)/2,v=(a+l)/2;m.push(new i(g[3],y,v,s,l),new i(g[2],o,v,y,l),new i(g[1],y,a,s,v),new i(g[0],o,a,y,v)),(u=(t>=v)<<1|e>=y)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-u],m[m.length-1-u]=c)}else{var _=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),x=_*_+b*b;if(x<n){var w=Math.sqrt(n=x);h=e-w,d=t-w,f=e+w,p=t+w,r=g.data}}return r},u.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,c,u,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(u=a>=(l=(m+y)/2))?m=l:y=l,t=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},u.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},u.root=function(){return this._root},u.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},u.visit=function(e){var t,n,r,o,a,s,l=[],c=this._root;for(c&&l.push(new i(c,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(c=t.node,r=t.x0,o=t.y0,a=t.x1,s=t.y1)&&c.length){var u=(r+a)/2,h=(o+s)/2;(n=c[3])&&l.push(new i(n,u,h,a,s)),(n=c[2])&&l.push(new i(n,r,h,u,s)),(n=c[1])&&l.push(new i(n,u,o,a,h)),(n=c[0])&&l.push(new i(n,r,o,u,h))}return this},u.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var o=t.node;if(o.length){var a,s=t.x0,l=t.y0,c=t.x1,u=t.y1,h=(s+c)/2,d=(l+u)/2;(a=o[0])&&n.push(new i(a,s,l,h,d)),(a=o[1])&&n.push(new i(a,h,l,c,d)),(a=o[2])&&n.push(new i(a,s,d,h,u)),(a=o[3])&&n.push(new i(a,h,d,c,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},u.x=function(e){return arguments.length?(this._x=e,this):this._x},u.y=function(e){return arguments.length?(this._y=e,this):this._y}},591:(e,t,n)=>{"use strict";n.d(t,{JG:()=>E,ZP:()=>C,yR:()=>x,l4:()=>M});var r=n(1077),i=n(9173);const o=(0,i.Z)(r.Z),a=o.right,s=(o.left,(0,i.Z)((function(e){return null===e?NaN:+e})).center,a);var l=n(2650),c=n(7765);function u(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=y(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function h(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}var d=n(3626);function f(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=y(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var p=n(9843),m=n(5302);function g(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function y(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?(0,m.Z)(t):("number"===i?d.Z:"string"===i?(n=(0,l.ZP)(t))?(t=n,c.ZP):p.Z:t instanceof l.ZP?c.ZP:t instanceof Date?h:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?u:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?f:d.Z:g))(e,t)}function v(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _(e){return+e}var b=[0,1];function x(e){return e}function w(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function S(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=w(i,r),o=n(a,o)):(r=w(r,i),o=n(o,a)),function(e){return o(r(e))}}function A(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=w(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=s(e,t,1,r)-1;return o[n](i[n](t))}}function E(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function M(){var e,t,n,r,i,o,a=b,s=b,l=y,c=x;function u(){var e=Math.min(a.length,s.length);return c!==x&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?A:S,i=o=null,h}function h(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),d.Z)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,_),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=v,u()},h.clamp=function(e){return arguments.length?(c=!!e||x,u()):c!==x},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function C(){return M()(x,x)}},8348:(e,t,n)=>{"use strict";function r(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}n.d(t,{o:()=>r})},1960:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,Q:()=>c});var r=n(7614),i=n(591),o=n(8348),a=n(6196),s=n(3085),l=n(8602);function c(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,r.ZP)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return function(e,t,n,i){var o,c=(0,r.ly)(e,t,n);switch((i=(0,a.Z)(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,s.Z)(t)/3)))-(0,s.Z)(Math.abs(e)))}(c,u))||(i.precision=o),(0,l.jH)(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,s.Z)(t)-(0,s.Z)(e))+1}(c,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=function(e){return Math.max(0,-(0,s.Z)(Math.abs(e)))}(c))||(i.precision=o-2*("%"===i.type))}return(0,l.WU)(i)}(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,o,a=t(),s=0,l=a.length-1,c=a[s],u=a[l],h=10;for(u<c&&(o=c,c=u,u=o,o=s,s=l,l=o);h-- >0;){if((o=(0,r.G9)(c,u,n))===i)return a[s]=c,a[l]=u,t(a);if(o>0)c=Math.floor(c/o)*o,u=Math.ceil(u/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,u=Math.floor(u*o)/o}i=o}return e},e}function u(){var e=(0,i.ZP)();return e.copy=function(){return(0,i.JG)(e,u())},o.o.apply(e,arguments),c(e)}},5128:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u,_b:()=>h});var r=n(1960),i=n(591),o=n(8348);function a(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function s(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function l(e){return e<0?-e*e:e*e}function c(e){var t=e(i.yR,i.yR),n=1;function o(){return 1===n?e(i.yR,i.yR):.5===n?e(s,l):e(a(n),a(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,o()):n},(0,r.Q)(t)}function u(){var e=c((0,i.l4)());return e.copy=function(){return(0,i.JG)(e,u()).exponent(e.exponent())},o.o.apply(e,arguments),e}function h(){return u.apply(null,arguments).exponent(.5)}},3775:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(9173),i=n(7614),o=n(1829),a=(0,o.Z)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));const s=a;a.range;var l=n(1222),c=(0,o.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*l.Ym-e.getMinutes()*l.yB)}),(function(e,t){e.setTime(+e+t*l.Y2)}),(function(e,t){return(t-e)/l.Y2}),(function(e){return e.getHours()}));const u=c;c.range;var h=(0,o.Z)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*l.Ym)}),(function(e,t){e.setTime(+e+t*l.yB)}),(function(e,t){return(t-e)/l.yB}),(function(e){return e.getMinutes()}));const d=h;h.range;var f=(0,o.Z)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*l.Ym)}),(function(e,t){return(t-e)/l.Ym}),(function(e){return e.getUTCSeconds()}));const p=f;f.range;var m=(0,o.Z)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));m.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,o.Z)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):m:null};const g=m;m.range;var y=n(2209),v=n(2776),_=n(9478),b=n(5611),x=n(591),w=n(8348),S=31536e6;function A(e){return new Date(e)}function E(e){return e instanceof Date?+e:+new Date(+e)}function M(e,t,n,o,a,s,l,c,u){var h=(0,x.ZP)(),d=h.invert,f=h.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),_=u("%b %d"),b=u("%B"),w=u("%Y"),C=[[l,1,1e3],[l,5,5e3],[l,15,15e3],[l,30,3e4],[s,1,6e4],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[o,1,864e5],[o,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,S]];function T(r){return(l(r)<r?p:s(r)<r?m:a(r)<r?g:o(r)<r?y:t(r)<r?n(r)<r?v:_:e(r)<r?b:w)(r)}function P(t,n,o){if(null==t&&(t=10),"number"==typeof t){var a,s=Math.abs(o-n)/t,l=(0,r.Z)((function(e){return e[2]})).right(C,s);return l===C.length?(a=(0,i.ly)(n/S,o/S,t),t=e):l?(a=(l=C[s/C[l-1][2]<C[l][2]/s?l-1:l])[1],t=l[0]):(a=Math.max((0,i.ly)(n,o,t),1),t=c),t.every(a)}return t}return h.invert=function(e){return new Date(d(e))},h.domain=function(e){return arguments.length?f(Array.from(e,E)):f().map(A)},h.ticks=function(e){var t,n=f(),r=n[0],i=n[n.length-1],o=i<r;return o&&(t=r,r=i,i=t),t=(t=P(e,r,i))?t.range(r,i+1):[],o?t.reverse():t},h.tickFormat=function(e,t){return null==t?T:u(t)},h.nice=function(e){var t=f();return(e=P(e,t[0],t[t.length-1]))?f(function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}(t,e)):h},h.copy=function(){return(0,x.JG)(h,M(e,t,n,o,a,s,l,c,u))},h}function C(){return w.o.apply(M(y.Z,s,v.OM,_.Z,u,d,p,g,b.i$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},3083:(e,t,n)=>{"use strict";function r(e){return function(){return this.matches(e)}}function i(e){return function(t){return t.matches(e)}}n.d(t,{Z:()=>r,P:()=>i})},3888:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1986);function i(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r.Z.hasOwnProperty(t)?{space:r.Z[t],local:e}:e}},1986:(e,t,n)=>{"use strict";n.d(t,{P:()=>r,Z:()=>i});var r="http://www.w3.org/1999/xhtml";const i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},3641:(e,t,n)=>{"use strict";function r(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}n.d(t,{Z:()=>r})},4017:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4666);function i(e){return"string"==typeof e?new r.Y1([[document.querySelector(e)]],[document.documentElement]):new r.Y1([[e]],r.Jz)}},4666:(e,t,n)=>{"use strict";n.d(t,{Y1:()=>se,ZP:()=>ce,Jz:()=>ae});var r=n(2634);function i(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}var o=n(3545),a=n(3083),s=Array.prototype.find;function l(){return this.firstElementChild}var c=Array.prototype.filter;function u(){return this.children}function h(e){return new Array(e.length)}function d(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e){return function(){return e}}function p(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new d(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function m(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<f;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new d(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function g(e){return e.__data__}function y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}d.prototype={constructor:d,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var v=n(3888);function _(e){return function(){this.removeAttribute(e)}}function b(e){return function(){this.removeAttributeNS(e.space,e.local)}}function x(e,t){return function(){this.setAttribute(e,t)}}function w(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function S(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function A(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var E=n(9986);function M(e){return function(){delete this[e]}}function C(e,t){return function(){this[e]=t}}function T(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function P(e){return e.trim().split(/^|\s+/)}function D(e){return e.classList||new k(e)}function k(e){this._node=e,this._names=P(e.getAttribute("class")||"")}function O(e,t){for(var n=D(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function I(e,t){for(var n=D(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function R(e){return function(){O(this,e)}}function L(e){return function(){I(this,e)}}function B(e,t){return function(){(t.apply(this,arguments)?O:I)(this,e)}}function z(){this.textContent=""}function F(e){return function(){this.textContent=e}}function N(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function U(){this.innerHTML=""}function j(e){return function(){this.innerHTML=e}}function V(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}k.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var W=n(1986);function q(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===W.P&&t.documentElement.namespaceURI===W.P?t.createElement(e):t.createElementNS(n,e)}}function Z(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function X(e){var t=(0,v.Z)(e);return(t.local?Z:q)(t)}function Y(){return null}function $(){var e=this.parentNode;e&&e.removeChild(this)}function J(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function K(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ee(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function te(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}var ne=n(5021);function re(e,t,n){var r=(0,ne.Z)(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ie(e,t){return function(){return re(this,e,t)}}function oe(e,t){return function(){return re(this,e,t.apply(this,arguments))}}var ae=[null];function se(e,t){this._groups=e,this._parents=t}function le(){return new se([[document.documentElement]],ae)}se.prototype=le.prototype={constructor:se,select:function(e){"function"!=typeof e&&(e=(0,r.Z)(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a,s,l=t[o],c=l.length,u=i[o]=new Array(c),h=0;h<c;++h)(a=l[h])&&(s=e.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),u[h]=s);return new se(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:i(t)}}(e):(0,o.Z)(e);for(var t=this._groups,n=t.length,r=[],a=[],s=0;s<n;++s)for(var l,c=t[s],u=c.length,h=0;h<u;++h)(l=c[h])&&(r.push(e.call(l,l.__data__,h,c)),a.push(l));return new se(r,a)},selectChild:function(e){return this.select(null==e?l:function(e){return function(){return s.call(this.children,e)}}("function"==typeof e?e:(0,a.P)(e)))},selectChildren:function(e){return this.selectAll(null==e?u:function(e){return function(){return c.call(this.children,e)}}("function"==typeof e?e:(0,a.P)(e)))},filter:function(e){"function"!=typeof e&&(e=(0,a.Z)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],l=s.length,c=r[i]=[],u=0;u<l;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&c.push(o);return new se(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,g);var n=t?m:p,r=this._parents,o=this._groups;"function"!=typeof e&&(e=f(e));for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=r[u],d=o[u],y=d.length,v=i(e.call(h,h&&h.__data__,u,r)),_=v.length,b=l[u]=new Array(_),x=s[u]=new Array(_),w=c[u]=new Array(y);n(h,d,b,x,w,v,t);for(var S,A,E=0,M=0;E<_;++E)if(S=b[E]){for(E>=M&&(M=E+1);!(A=x[M])&&++M<_;);S._next=A||null}}return(s=new se(s,r))._enter=l,s._exit=c,s},enter:function(){return new se(this._enter||this._groups.map(h),this._parents)},exit:function(){return new se(this._exit||this._groups.map(h),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof se))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new se(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=y);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new se(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=(0,v.Z)(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?b:_:"function"==typeof t?n.local?A:S:n.local?w:x)(n,t))},style:E.Z,property:function(e,t){return arguments.length>1?this.each((null==t?M:"function"==typeof t?T:C)(e,t)):this.node()[e]},classed:function(e,t){var n=P(e+"");if(arguments.length<2){for(var r=D(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?B:t?R:L)(n,t))},text:function(e){return arguments.length?this.each(null==e?z:("function"==typeof e?N:F)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?U:("function"==typeof e?V:j)(e)):this.node().innerHTML},raise:function(){return this.each(G)},lower:function(){return this.each(H)},append:function(e){var t="function"==typeof e?e:X(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:X(e),i=null==t?Y:"function"==typeof t?t:(0,r.Z)(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each($)},clone:function(e){return this.select(e?K:J)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=Q(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?te:ee,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?oe:ie)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const ce=le},9986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,S:()=>l});var r=n(5021);function i(e){return function(){this.style.removeProperty(e)}}function o(e,t,n){return function(){this.style.setProperty(e,t,n)}}function a(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function s(e,t,n){return arguments.length>1?this.each((null==t?i:"function"==typeof t?a:o)(e,t,null==n?"":n)):l(this.node(),e)}function l(e,t){return e.style.getPropertyValue(t)||(0,r.Z)(e).getComputedStyle(e,null).getPropertyValue(t)}},2634:(e,t,n)=>{"use strict";function r(){}function i(e){return null==e?r:function(){return this.querySelector(e)}}n.d(t,{Z:()=>i})},3545:(e,t,n)=>{"use strict";function r(){return[]}function i(e){return null==e?r:function(){return this.querySelectorAll(e)}}n.d(t,{Z:()=>i})},5021:(e,t,n)=>{"use strict";function r(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}n.d(t,{Z:()=>r})},7308:(e,t,n)=>{"use strict";n.d(t,{dQ:()=>sn});var r="http://www.w3.org/1999/xhtml";const i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e}function a(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}}function s(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function l(e){var t=o(e);return(t.local?s:a)(t)}function c(){}function u(e){return null==e?c:function(){return this.querySelector(e)}}function h(){return[]}function d(e){return new Array(e.length)}function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function p(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new f(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function m(e,t,n,r,i,o,a){var s,l,c,u={},h=t.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=c="$"+a.call(l,l.__data__,s,t),c in u?i[s]=l:u[c]=l);for(s=0;s<d;++s)(l=u[c="$"+a.call(e,o[s],s,o)])?(r[s]=l,l.__data__=o[s],u[c]=null):n[s]=new f(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u[p[s]]===l&&(i[s]=l)}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function y(e){return function(){this.removeAttribute(e)}}function v(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _(e,t){return function(){this.setAttribute(e,t)}}function b(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function w(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function S(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function A(e){return function(){this.style.removeProperty(e)}}function E(e,t,n){return function(){this.style.setProperty(e,t,n)}}function M(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function C(e,t){return e.style.getPropertyValue(t)||S(e).getComputedStyle(e,null).getPropertyValue(t)}function T(e){return function(){delete this[e]}}function P(e,t){return function(){this[e]=t}}function D(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function k(e){return e.trim().split(/^|\s+/)}function O(e){return e.classList||new I(e)}function I(e){this._node=e,this._names=k(e.getAttribute("class")||"")}function R(e,t){for(var n=O(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function L(e,t){for(var n=O(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function B(e){return function(){R(this,e)}}function z(e){return function(){L(this,e)}}function F(e,t){return function(){(t.apply(this,arguments)?R:L)(this,e)}}function N(){this.textContent=""}function U(e){return function(){this.textContent=e}}function j(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function V(){this.innerHTML=""}function G(e){return function(){this.innerHTML=e}}function H(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z(){return null}function X(){var e=this.parentNode;e&&e.removeChild(this)}function Y(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function $(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},I.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var J={},K=null;function Q(e,t,n){return e=ee(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ee(e,t,n){return function(r){var i=K;K=r;try{e.call(this,this.__data__,t,n)}finally{K=i}}}function te(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ne(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function re(e,t,n){var r=J.hasOwnProperty(e.type)?Q:ee;return function(i,o,a){var s,l=this.__on,c=r(t,o,a);if(l)for(var u=0,h=l.length;u<h;++u)if((s=l[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function ie(e,t,n,r){var i=K;e.sourceEvent=K,K=e;try{return t.apply(n,r)}finally{K=i}}function oe(e,t,n){var r=S(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ae(e,t){return function(){return oe(this,e,t)}}function se(e,t){return function(){return oe(this,e,t.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(J={mouseenter:"mouseover",mouseleave:"mouseout"}));var le=[null];function ce(e,t){this._groups=e,this._parents=t}function ue(e){return"string"==typeof e?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],le)}ce.prototype=function(){return new ce([[document.documentElement]],le)}.prototype={constructor:ce,select:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),h=0;h<l;++h)(o=s[h])&&(a=e.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new ce(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=function(e){return null==e?h:function(){return this.querySelectorAll(e)}}(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new ce(r,i)},filter:function(e){"function"!=typeof e&&(e=function(e){return function(){return this.matches(e)}}(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new ce(r,this._parents)},data:function(e,t){if(!e)return g=new Array(this.size()),u=-1,this.each((function(e){g[++u]=e})),g;var n,r=t?m:p,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,g=e.call(h,h&&h.__data__,u,i),y=g.length,v=l[u]=new Array(y),_=s[u]=new Array(y);r(h,d,v,_,c[u]=new Array(f),g,t);for(var b,x,w=0,S=0;w<y;++w)if(b=v[w]){for(w>=S&&(S=w+1);!(x=_[S])&&++S<y;);b._next=x||null}}return(s=new ce(s,i))._enter=l,s._exit=c,s},enter:function(){return new ce(this._enter||this._groups.map(d),this._parents)},exit:function(){return new ce(this._exit||this._groups.map(d),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new ce(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=g);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new ce(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=o(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?v:y:"function"==typeof t?n.local?w:x:n.local?b:_)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?A:"function"==typeof t?M:E)(e,t,null==n?"":n)):C(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?T:"function"==typeof t?D:P)(e,t)):this.node()[e]},classed:function(e,t){var n=k(e+"");if(arguments.length<2){for(var r=O(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?F:t?B:z)(n,t))},text:function(e){return arguments.length?this.each(null==e?N:("function"==typeof e?j:U)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?V:("function"==typeof e?H:G)(e)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(q)},append:function(e){var t="function"==typeof e?e:l(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:l(e),r=null==t?Z:"function"==typeof t?t:u(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(X)},clone:function(e){return this.select(e?$:Y)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=te(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?re:ne,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?se:ae)(e,t))}};var he=0;function de(){this._="@"+(++he).toString(36)}function fe(){for(var e,t=K;e=t.sourceEvent;)t=e;return t}function pe(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function me(e){var t=fe();return t.changedTouches&&(t=t.changedTouches[0]),pe(e,t)}function ge(e,t,n){arguments.length<3&&(n=t,t=fe().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return pe(e,r);return null}de.prototype=function(){return new de}.prototype={constructor:de,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var ye={value:function(){}};function ve(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new _e(r)}function _e(e){this._=e}function be(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function xe(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function we(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ye,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}_e.prototype=ve.prototype={constructor:_e,on:function(e,t){var n,r=this._,i=be(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=we(r[n],e.name,t);else if(null==t)for(n in r)r[n]=we(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=xe(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _e(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Se=ve;function Ae(){K.stopImmediatePropagation()}function Ee(){K.preventDefault(),K.stopImmediatePropagation()}function Me(e){var t=e.document.documentElement,n=ue(e).on("dragstart.drag",Ee,!0);"onselectstart"in t?n.on("selectstart.drag",Ee,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ce(e){return function(){return e}}function Te(e,t,n,r,i,o,a,s,l,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=c}function Pe(){return!K.button}function De(){return this.parentNode}function ke(e){return null==e?{x:K.x,y:K.y}:e}function Oe(){return"ontouchstart"in this}function Ie(){var e,t,n,r,i=Pe,o=De,a=ke,s=Oe,l={},c=Se("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!r&&i.apply(this,arguments)){var a=_("mouse",o.apply(this,arguments),me,this,arguments);a&&(ue(K.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),Me(K.view),Ae(),n=!1,e=K.clientX,t=K.clientY,a("start"))}}function p(){if(Ee(),!n){var r=K.clientX-e,i=K.clientY-t;n=r*r+i*i>h}l.mouse("drag")}function m(){ue(K.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,r=ue(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ee,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(K.view,n),Ee(),l.mouse("end")}function g(){if(i.apply(this,arguments)){var e,t,n=K.changedTouches,r=o.apply(this,arguments),a=n.length;for(e=0;e<a;++e)(t=_(n[e].identifier,r,ge,this,arguments))&&(Ae(),t("start"))}}function y(){var e,t,n=K.changedTouches,r=n.length;for(e=0;e<r;++e)(t=l[n[e].identifier])&&(Ee(),t("drag"))}function v(){var e,t,n=K.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<i;++e)(t=l[n[e].identifier])&&(Ae(),t("end"))}function _(e,t,n,r,i){var o,s,h,f=n(t,e),p=c.copy();if(ie(new Te(d,"beforestart",o,e,u,f[0],f[1],0,0,p),(function(){return null!=(K.subject=o=a.apply(r,i))&&(s=o.x-f[0]||0,h=o.y-f[1]||0,!0)})))return function a(c){var m,g=f;switch(c){case"start":l[e]=a,m=u++;break;case"end":delete l[e],--u;case"drag":f=n(t,e),m=u}ie(new Te(d,c,o,e,m,f[0]+s,f[1]+h,f[0]-g[0],f[1]-g[1],p),p.apply,p,[c,r,i])}}return d.filter=function(e){return arguments.length?(i="function"==typeof e?e:Ce(!!e),d):i},d.container=function(e){return arguments.length?(o="function"==typeof e?e:Ce(e),d):o},d.subject=function(e){return arguments.length?(a="function"==typeof e?e:Ce(e),d):a},d.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Ce(!!e),d):s},d.on=function(){var e=c.on.apply(c,arguments);return e===c?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}Te.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Re=Math.PI,Le=2*Re,Be=1e-6,ze=Le-Be;function Fe(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ne(){return new Fe}Fe.prototype=Ne.prototype={constructor:Fe,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Be)if(Math.abs(u*s-l*c)>Be&&i){var d=n-o,f=r-a,p=s*s+l*l,m=d*d+f*f,g=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((Re-Math.acos((p+h-m)/(2*g*y)))/2),_=v/y,b=v/g;Math.abs(_-1)>Be&&(this._+="L"+(e+_*c)+","+(t+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*f)+","+(this._x1=e+b*s)+","+(this._y1=t+b*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Be||Math.abs(this._y1-c)>Be)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%Le+Le),h>ze?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>Be&&(this._+="A"+n+","+n+",0,"+ +(h>=Re)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Ue=Ne;function je(e){return function(){return e}}var Ve=1e-12,Ge=Math.PI,He=Ge/2,We=2*Ge;function qe(e){return e.innerRadius}function Ze(e){return e.outerRadius}function Xe(e){return e.startAngle}function Ye(e){return e.endAngle}function $e(e){return e&&e.padAngle}function Je(e){return e>=1?He:e<=-1?-He:Math.asin(e)}function Ke(e,t,n,r,i,o,a,s){var l=n-e,c=r-t,u=a-i,h=s-o,d=(u*(t-o)-h*(e-i))/(h*l-u*c);return[e+d*l,t+d*c]}function Qe(e,t,n,r,i,o,a){var s=e-n,l=t-r,c=(a?o:-o)/Math.sqrt(s*s+l*l),u=c*l,h=-c*s,d=e+u,f=t+h,p=n+u,m=r+h,g=(d+p)/2,y=(f+m)/2,v=p-d,_=m-f,b=v*v+_*_,x=i-o,w=d*m-p*f,S=(_<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-w*w)),A=(w*_-v*S)/b,E=(-w*v-_*S)/b,M=(w*_+v*S)/b,C=(-w*v+_*S)/b,T=A-g,P=E-y,D=M-g,k=C-y;return T*T+P*P>D*D+k*k&&(A=M,E=C),{cx:A,cy:E,x01:-u,y01:-h,x11:A*(i/x-1),y11:E*(i/x-1)}}function et(e){this._context=e}function tt(e){return new et(e)}function nt(e){return e[0]}function rt(e){return e[1]}function it(e){this._curve=e}et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},it.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}},Math.sqrt(1/3);Math.sin(Ge/10),Math.sin(7*Ge/10);function ot(){}function at(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function st(e){this._context=e}function lt(e,t){this._basis=new st(e),this._beta=t}function ct(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ut(e,t){this._context=e,this._k=(1-t)/6}function ht(e,t){this._context=e,this._k=(1-t)/6}function dt(e,t){this._context=e,this._k=(1-t)/6}function ft(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Ve){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ve){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function pt(e,t){this._context=e,this._alpha=t}Math.sin(We/10),Math.cos(We/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),st.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:at(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:at(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},lt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}},function e(t){function n(e){return 1===t?new st(e):new lt(e,t)}return n.beta=function(t){return e(+t)},n}(.85),ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ct(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ct(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new ut(e,t)}return n.tension=function(t){return e(+t)},n}(0),ht.prototype={areaStart:ot,areaEnd:ot,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ct(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new ht(e,t)}return n.tension=function(t){return e(+t)},n}(0),dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ct(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new dt(e,t)}return n.tension=function(t){return e(+t)},n}(0),pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ft(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mt=function e(t){function n(e){return t?new pt(e,t):new ut(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function gt(e,t){this._context=e,this._alpha=t}function yt(e,t){this._context=e,this._alpha=t}function vt(e){return e<0?-1:1}function _t(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(vt(o)+vt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function bt(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xt(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function wt(e){this._context=e}function St(e){this._context=e}gt.prototype={areaStart:ot,areaEnd:ot,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ft(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new gt(e,t):new ht(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ft(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new yt(e,t):new dt(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xt(this,this._t0,bt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xt(this,bt(this,n=_t(this,e,t)),n);break;default:xt(this,this._t0,n=_t(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(function(e){this._context=new St(e)}.prototype=Object.create(wt.prototype)).point=function(e,t){wt.prototype.point.call(this,t,e)},St.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Array.prototype.slice;var At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},Pt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Dt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},kt=function(){function e(t){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.nx,s=t.ny,l=t.dy,c=void 0===l?0:l,u=t.dx,h=void 0===u?0:u,d=t.color,f=void 0===d?"grey":d,p=t.data,m=t.type,g=t.subject,y=t.connector,v=t.note,_=t.disable,b=t.id,x=t.className;Et(this,e),this._dx=void 0!==a?a-r:h,this._dy=void 0!==s?s-o:c,this._x=r,this._y=o,this._color=f,this.id=b,this._className=x||"",this._type=m||"",this.data=p,this.note=v||{},this.connector=y||{},this.subject=g||{},this.disable=_||[]}return Mt(e,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(e){this._className=e,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(e){this._dx=e,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(e){this._dy=e,this.updateOffset()}},{key:"nx",set:function(e){this._dx=e-this._x,this.updateOffset()}},{key:"ny",set:function(e){this._dy=e-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(e){var t=e.x,n=e.y;this._dx=t,this._dy=n,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(e){var t=e.x,n=e.y;this._x=t,this._y=n,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var e={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(e.data=this.data),this.type&&(e.type=this.type),this._className&&(e.className=this._className),Object.keys(this.connector).length>0&&(e.connector=this.connector),Object.keys(this.subject).length>0&&(e.subject=this.subject),Object.keys(this.note).length>0&&(e.note=this.note),e}}]),e}(),Ot=function(){function e(t){var n=t.annotations,r=t.accessors,i=t.accessorsInverse;Et(this,e),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return Mt(e,[{key:"clearTypes",value:function(e){this.annotations.forEach((function(t){t.type=void 0,t.subject=e&&e.subject||t.subject,t.connector=e&&e.connector||t.connector,t.note=e&&e.note||t.note}))}},{key:"setPositionWithAccessors",value:function(){var e=this;this.annotations.forEach((function(t){t.type.setPositionWithAccessors(e.accessors)}))}},{key:"editMode",value:function(e){this.annotations.forEach((function(t){t.type&&(t.type.editMode=e,t.type.updateEditMode())}))}},{key:"updateDisable",value:function(e){this.annotations.forEach((function(t){t.disable=e,t.type&&e.forEach((function(e){t.type[e]&&(t.type[e].remove&&t.type[e].remove(),t.type[e]=void 0)}))}))}},{key:"updateTextWrap",value:function(e){this.annotations.forEach((function(t){t.type&&t.type.updateTextWrap&&t.type.updateTextWrap(e)}))}},{key:"updateText",value:function(){this.annotations.forEach((function(e){e.type&&e.type.drawText&&e.type.drawText()}))}},{key:"updateNotePadding",value:function(e){this.annotations.forEach((function(t){t.type&&(t.type.notePadding=e)}))}},{key:"json",get:function(){var e=this;return this.annotations.map((function(t){var n=t.json;return e.accessorsInverse&&t.data&&(n.data={},Object.keys(e.accessorsInverse).forEach((function(r){n.data[r]=e.accessorsInverse[r]({x:t.x,y:t.y})}))),n}))}},{key:"noteNodes",get:function(){return this.annotations.map((function(e){return Ct({},e.type.getNoteBBoxOffset(),{positionX:e.x,positionY:e.y})}))}}]),e}(),It=function(e,t){return"dynamic"!==e&&"left"!==e&&"right"!==e||(e=t<0?"top":"bottom"),e},Rt=function(e,t){return"dynamic"!==e&&"top"!==e&&"bottom"!==e||(e=t<0?"right":"left"),e},Lt=["topBottom","top","bottom"],Bt=["leftRight","left","right"],zt=function(e){var t=e.data,n=e.curve,r=void 0===n?tt:n,i=e.canvasContext,o=e.className,a=e.classID,s=function(){var e=nt,t=rt,n=je(!0),r=null,i=tt,o=null;function a(a){var s,l,c,u=a.length,h=!1;for(null==r&&(o=i(c=Ue())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(l,s,a),+t(l,s,a));if(c)return o=null,c+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:je(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:je(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:je(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}().curve(r),l={type:"path",className:o,classID:a,data:t};return i?(s.context(i),l.pathMethods=s):l.attrs={d:s(t)},l},Ft=function(e){var t=e.data,n=e.canvasContext,r={type:"path",className:e.className,classID:e.classID,data:t},i=function(){var e=qe,t=Ze,n=je(0),r=null,i=Xe,o=Ye,a=$e,s=null;function l(){var l,c,u=+e.apply(this,arguments),h=+t.apply(this,arguments),d=i.apply(this,arguments)-He,f=o.apply(this,arguments)-He,p=Math.abs(f-d),m=f>d;if(s||(s=l=Ue()),h<u&&(c=h,h=u,u=c),h>Ve)if(p>We-Ve)s.moveTo(h*Math.cos(d),h*Math.sin(d)),s.arc(0,0,h,d,f,!m),u>Ve&&(s.moveTo(u*Math.cos(f),u*Math.sin(f)),s.arc(0,0,u,f,d,m));else{var g,y,v=d,_=f,b=d,x=f,w=p,S=p,A=a.apply(this,arguments)/2,E=A>Ve&&(r?+r.apply(this,arguments):Math.sqrt(u*u+h*h)),M=Math.min(Math.abs(h-u)/2,+n.apply(this,arguments)),C=M,T=M;if(E>Ve){var P=Je(E/u*Math.sin(A)),D=Je(E/h*Math.sin(A));(w-=2*P)>Ve?(b+=P*=m?1:-1,x-=P):(w=0,b=x=(d+f)/2),(S-=2*D)>Ve?(v+=D*=m?1:-1,_-=D):(S=0,v=_=(d+f)/2)}var k=h*Math.cos(v),O=h*Math.sin(v),I=u*Math.cos(x),R=u*Math.sin(x);if(M>Ve){var L=h*Math.cos(_),B=h*Math.sin(_),z=u*Math.cos(b),F=u*Math.sin(b);if(p<Ge){var N=w>Ve?Ke(k,O,z,F,L,B,I,R):[I,R],U=k-N[0],j=O-N[1],V=L-N[0],G=B-N[1],H=1/Math.sin(Math.acos((U*V+j*G)/(Math.sqrt(U*U+j*j)*Math.sqrt(V*V+G*G)))/2),W=Math.sqrt(N[0]*N[0]+N[1]*N[1]);C=Math.min(M,(u-W)/(H-1)),T=Math.min(M,(h-W)/(H+1))}}S>Ve?T>Ve?(g=Qe(z,F,k,O,h,T,m),y=Qe(L,B,I,R,h,T,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),T<M?s.arc(g.cx,g.cy,T,Math.atan2(g.y01,g.x01),Math.atan2(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,T,Math.atan2(g.y01,g.x01),Math.atan2(g.y11,g.x11),!m),s.arc(0,0,h,Math.atan2(g.cy+g.y11,g.cx+g.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,T,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!m))):(s.moveTo(k,O),s.arc(0,0,h,v,_,!m)):s.moveTo(k,O),u>Ve&&w>Ve?C>Ve?(g=Qe(I,R,L,B,u,-C,m),y=Qe(k,O,z,F,u,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<M?s.arc(g.cx,g.cy,C,Math.atan2(g.y01,g.x01),Math.atan2(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,C,Math.atan2(g.y01,g.x01),Math.atan2(g.y11,g.x11),!m),s.arc(0,0,u,Math.atan2(g.cy+g.y11,g.cx+g.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,C,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!m))):s.arc(0,0,u,x,b,m):s.lineTo(I,R)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Ge/2;return[Math.cos(r)*n,Math.sin(r)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:je(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:je(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:je(+e),l):n},l.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:je(+e),l):r},l.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:je(+e),l):i},l.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:je(+e),l):o},l.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:je(+e),l):a},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().innerRadius(t.innerRadius||0).outerRadius(t.outerRadius||t.radius||2).startAngle(t.startAngle||0).endAngle(t.endAngle||2*Math.PI);return n?(i.context(n),r.pathMethods=lineGen):r.attrs={d:i()},r},Nt=function(e){var t=e.align,n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.bbox,s=e.offset;"top"===(t=It(t,s.y))?o-=a.height:"middle"===t&&(o-=a.height/2);var l=[[r,o],[r,o+a.height]];return{components:[zt({data:l,className:"note-line"})]}},Ut=function(e){var t=e.align,n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.offset,s=e.bbox;"right"===(t=Rt(t,a.x))?r-=s.width:"middle"===t&&(r-=s.width/2);var l=[[r,o],[r+s.width,o]];return{components:[zt({data:l,className:"note-line"})]}},jt=function(e){var t=e.type,n=e.subjectType,r=t.annotation,i=r.position,o=r.x-i.x,a=o+r.dx,s=r.y-i.y,l=s+r.dy,c=r.subject;if("circle"===n&&(c.outerRadius||c.radius)){var u=Math.sqrt((o-a)*(o-a)+(s-l)*(s-l)),h=Math.asin(-l/u),d=c.outerRadius||c.radius+(c.radiusPadding||0);o=Math.abs(Math.cos(h)*d)*(a<0?-1:1),s=Math.abs(Math.sin(h)*d)*(l<0?-1:1)}if("rect"===n){var f=c.width,p=c.height;(f>0&&r.dx>0||f<0&&r.dx<0)&&(o=Math.abs(f)>Math.abs(r.dx)?f/2:f),(p>0&&r.dy>0||p<0&&r.dy<0)&&(s=Math.abs(p)>Math.abs(r.dy)?p/2:p),o===f/2&&s===p/2&&(o=a,s=l)}return[[o,s],[a,l]]},Vt=function(e){var t=jt(e);return{components:[zt({data:t,className:"connector"})]}},Gt=function(e){var t=e.type,n=e.subjectType,r=t.annotation,i=r.position,o=r.x-i.x,a=o+r.dx,s=r.y-i.y,l=s+r.dy,c=r.subject;if("rect"===n){var u=c.width,h=c.height;(u>0&&r.dx>0||u<0&&r.dx<0)&&(o=Math.abs(u)>Math.abs(r.dx)?u/2:u),(h>0&&r.dy>0||h<0&&r.dy<0)&&(s=Math.abs(h)>Math.abs(r.dy)?h/2:h),o===u/2&&s===h/2&&(o=a,s=l)}var d=[[o,s],[a,l]],f=l-s,p=a-o,m=a,g=l,y=l<s&&a>o||a<o&&l>s?-1:1;if(Math.abs(p)<Math.abs(f)?(m=a,g=s+p*y):(g=l,m=o+f*y),"circle"===n&&(c.outerRadius||c.radius)){var v=(c.outerRadius||c.radius)+(c.radiusPadding||0),_=v/Math.sqrt(2);if(Math.abs(p)>_&&Math.abs(f)>_)d=[[o=_*(a<0?-1:1),s=_*(l<0?-1:1)],[m,g],[a,l]];else if(Math.abs(p)>Math.abs(f)){var b=Math.asin(-l/v);d=[[o=Math.abs(Math.cos(b)*v)*(a<0?-1:1),l],[a,l]]}else{var x=Math.acos(a/v);d=[[a,s=Math.abs(Math.sin(x)*v)*(l<0?-1:1)],[a,l]]}}else d=[[o,s],[m,g],[a,l]];return{components:[zt({data:d,className:"connector"})]}},Ht=function(e){var t=e.type,n=e.connectorData,r=e.subjectType;n||(n={}),n.points&&"number"!=typeof n.points||(n.points=Wt(t.annotation.offset,n.points)),n.curve||(n.curve=mt);var i=[];if(t.editMode){var o=n.points.map((function(e,t){return Ct({},function(e){var t=e.cx,n=e.cy;return{move:{x:void 0===t?0:t,y:void 0===n?0:n}}}({cx:e[0],cy:e[1]}),{index:t})})),a=function(e){n.points[e][0]+=K.dx,n.points[e][1]+=K.dy,t.redrawConnector()};i=t.mapHandles(o.map((function(e){return Ct({},e.move,{drag:a.bind(t,e.index)})})))}var s=jt({type:t,subjectType:r});return s=[s[0]].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.points),[s[1]]),{components:[zt({data:s,curve:n.curve,className:"connector"})],handles:i}},Wt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n={x:e.x/(t+1),y:e.y/(t+1)},r=[],i=1;i<=t;i++)r.push([n.x*i+i%2*20,n.y*i-i%2*20]);return r},qt=function(e){var t=e.annotation,n=e.start,r=e.end,i=e.scale,o=void 0===i?1:i,a=t.position;n=n?[-r[0]+n[0],-r[1]+n[1]]:[t.dx,t.dy],r||(r=[t.x-a.x,t.y-a.y]);var s=r[0],l=r[1],c=n[0],u=n[1],h=10*o,d=16/180*Math.PI,f=Math.atan(u/c);c<0&&(f+=Math.PI);var p=[[s,l],[Math.cos(f+d)*h+s,Math.sin(f+d)*h+l],[Math.cos(f-d)*h+s,Math.sin(f-d)*h+l],[s,l]];return{components:[zt({data:p,className:"connector-end connector-arrow",classID:"connector-end"})]}},Zt=function(e){var t=e.line,n=e.scale,r=void 0===n?1:n,i=Ft({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+t.data[0][0]+", "+t.data[0][1]+")",{components:[i]}},Xt=function(e){var t=e.subjectData,n=e.type;t.radius||t.outerRadius||(t.radius=20);var r=[],i=Ft({data:t,className:"subject"});if(n.editMode){var o=function(e){var t=e.cx,n=void 0===t?0:t,r=e.cy,i=void 0===r?0:r,o=e.r1,a=e.r2,s=e.padding,l={move:{x:n,y:i}};return void 0!==o&&(l.r1={x:n+o/Math.sqrt(2),y:i+o/Math.sqrt(2)}),void 0!==a&&(l.r2={x:n+a/Math.sqrt(2),y:i+a/Math.sqrt(2)}),void 0!==s&&(l.padding={x:n+o+s,y:i}),l}({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:t.radiusPadding}),a=function(e){var r=t[e]+K.dx*Math.sqrt(2);t[e]=r,n.redrawSubject(),n.redrawConnector()},s=[Ct({},o.r1,{drag:a.bind(n,void 0!==t.outerRadius?"outerRadius":"radius")})];t.innerRadius&&s.push(Ct({},o.r2,{drag:a.bind(n,"innerRadius")})),r=n.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},Yt=function(e){var t=e.subjectData,n=e.type;t.width||(t.width=100),t.height||(t.height=100);var r=[],i=t.width,o=t.height,a=zt({data:[[0,0],[i,0],[i,o],[0,o],[0,0]],className:"subject"});if(n.editMode){var s=[{x:i,y:o/2,drag:function(){t.width=K.x,n.redrawSubject(),n.redrawConnector()}.bind(n)},{x:i/2,y:o,drag:function(){t.height=K.y,n.redrawSubject(),n.redrawConnector()}.bind(n)}];r=n.mapHandles(s)}return a.attrs["fill-opacity"]=.1,{components:[a],handles:r}},$t=function(e){var t=e.subjectData,n=e.type.annotation.position,r=(void 0!==t.x1?t.x1:n.x)-n.x,i=(void 0!==t.x2?t.x2:n.x)-n.x,o=(void 0!==t.y1?t.y1:n.y)-n.y,a=(void 0!==t.y2?t.y2:n.y)-n.y;return{components:[zt({data:[[r,o],[i,a]],className:"subject"})]}},Jt=function(e){var t=e.subjectData,n=void 0===t?{}:t,r=e.type,i=void 0===r?{}:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.typeSettings&&i.typeSettings.subject;n.radius||(a&&a.radius?n.radius=a.radius:n.radius=14),n.x||a&&a.x&&(n.x=a.x),n.y||a&&a.y&&(n.y=a.y);var s=[],l=[],c=n.radius,u=.7*c,h=0,d=0,f=Math.sqrt(2)*c,p={xleftcorner:-c,xrightcorner:c,ytopcorner:-c,ybottomcorner:c,xleft:-f,xright:f,ytop:-f,ybottom:f};n.x&&!n.y?h=p["x"+n.x]:n.y&&!n.x?d=p["y"+n.y]:n.x&&n.y&&(h=p["x"+n.x+"corner"],d=p["y"+n.y+"corner"]);var m="translate("+h+", "+d+")",g=Ft({className:"subject",data:{radius:c}});g.attrs.transform=m,g.attrs.fill=o.color,g.attrs["stroke-linecap"]="round",g.attrs["stroke-width"]="3px";var y=Ft({className:"subject-ring",data:{outerRadius:c,innerRadius:u}});y.attrs.transform=m,y.attrs["stroke-width"]="3px",y.attrs.fill="white";var v=void 0;if(h&&d||!h&&!d)v=zt({className:"subject-pointer",data:[[0,0],[h||0,0],[0,d||0],[0,0]]});else if(h||d){var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e&&e/Math.sqrt(2)/Math.sqrt(2)||t*c/Math.sqrt(2)};v=zt({className:"subject-pointer",data:[[0,0],[_(h),_(d)],[_(h,-1),_(d,-1)],[0,0]]})}if(v&&(v.attrs.fill=o.color,v.attrs["stroke-linecap"]="round",v.attrs["stroke-width"]="3px",l.push(v)),i.editMode){var b=function(){n.x=K.x<2*-c?"left":K.x>2*c?"right":void 0,n.y=K.y<2*-c?"top":K.y>2*c?"bottom":void 0,i.redrawSubject()},x={x:2*h,y:2*d,drag:b.bind(i)};x.x||x.y||(x.y=-c),s=i.mapHandles([x])}var w=void 0;return n.text&&(w={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:h,y:d}}),l.push(g),l.push(y),l.push(w),{components:l,handles:s}},Kt=function(){function e(t){var n=t.a,r=t.annotation,i=t.editMode,o=t.dispatcher,a=t.notePadding,s=t.accessors;if(Et(this,e),this.a=n,this.note=-1===r.disable.indexOf("note")&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=-1===r.disable.indexOf("connector")&&n.select("g.annotation-connector"),this.subject=-1===r.disable.indexOf("subject")&&n.select("g.annotation-subject"),this.dispatcher=o,o){var l=rn.bind(null,o,r);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=void 0!==a?a:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return Mt(e,[{key:"init",value:function(e){this.annotation.x||this.mapX(e),this.annotation.y||this.mapY(e)}},{key:"mapY",value:function(e){e.y&&(this.annotation.y=e.y(this.annotation.data))}},{key:"mapX",value:function(e){e.x&&(this.annotation.x=e.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(e,t){var n=this;Array.isArray(t)||(t=[t]),t.filter((function(e){return e})).forEach((function(t){var r=t.type,i=t.className,o=t.attrs,a=t.handles,s=t.classID;if("handle"===r)!function(e){var t=e.group,n=e.handles,r=e.r,i=void 0===r?10:r,o=t.selectAll("circle.handle").data(n);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(Ie().container(ue("g.annotations").node()).on("start",(function(e){return e.start&&e.start(e)})).on("drag",(function(e){return e.drag&&e.drag(e)})).on("end",(function(e){return e.end&&e.end(e)}))),t.selectAll("circle.handle").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("r",(function(e){return e.r||i})).attr("class",(function(e){return"handle "+(e.className||"")})),o.exit().remove()}({group:e,r:o&&o.r,handles:a});else{nn(e,[n.annotation],r,i,s);for(var l=e.select(r+"."+(s||i)),c=Object.keys(o),u=[],h=l.node().attributes,d=h.length-1;d>=0;d--){var f=h[d].name;-1===c.indexOf(f)&&"class"!==f&&u.push(f)}c.forEach((function(e){"text"===e?l.text(o[e]):l.attr(e,o[e])})),u.forEach((function(e){return l.attr(e,null)}))}}))}},{key:"getNoteBBox",value:function(){return an(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var e=an(this.note,".annotation-note-content"),t=this.noteContent.attr("transform").split(/\(|\,|\)/g);return e.offsetCornerX=parseFloat(t[1])+this.annotation.dx,e.offsetCornerY=parseFloat(t[2])+this.annotation.dy,e.offsetX=this.annotation.dx,e.offsetY=this.annotation.dy,e}},{key:"drawSubject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.subject,r=t.type,i={type:this,subjectData:n},o={};"circle"===r?o=Xt(i):"rect"===r?o=Yt(i):"threshold"===r?o=$t(i):"badge"===r&&(o=Jt(i,this.annotation));var a=o,s=a.components,l=void 0===s?[]:s,c=a.handles,u=void 0===c?[]:c;return l.forEach((function(t){t&&t.attrs&&!t.attrs.stroke&&(t.attrs.stroke=e.annotation.color)})),this.editMode&&(u=u.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),l.push({type:"handle",handles:u})),l}},{key:"drawConnector",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.connector,r=n.type||t.type,i={type:this,connectorData:n};i.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var o="curve"===r?Ht(i):"elbow"===r?Gt(i):Vt(i),a=o.components,s=void 0===a?[]:a,l=o.handles,c=void 0===l?[]:l,u=s[0];u&&(u.attrs.stroke=this.annotation.color,u.attrs.fill="none");var h=n.end||t.end,d={};if("arrow"===h){var f=u.data[1],p=u.data[0],m=Math.sqrt(Math.pow(f[0]-p[0],2)+Math.pow(f[1]-p[1],2));m<5&&u.data[2]&&(f=u.data[2]),d=qt({annotation:this.annotation,start:f,end:p,scale:n.endScale})}else"dot"===h?d=Zt({line:u,scale:n.endScale}):h&&"none"!==h||this.connector&&this.connector.select(".connector-end").remove();return d.components&&(d.components.forEach((function(t){t.attrs.fill=e.annotation.color,t.attrs.stroke=e.annotation.color})),s=s.concat(d.components)),this.editMode&&0!==c.length&&s.push({type:"handle",handles:c}),s}},{key:"drawNote",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.note,r=n.align||t.align||"dynamic",i={bbox:t.bbox,align:r,offset:this.annotation.offset},o=n.lineType||t.lineType,a={};"vertical"===o?a=Nt(i):"horizontal"===o&&(a=Ut(i));var s=a,l=s.components,c=void 0===l?[]:l,u=s.handles,h=void 0===u?[]:u;if(c.forEach((function(t){t.attrs.stroke=e.annotation.color})),this.editMode){h=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),c.push({type:"handle",handles:h});var d=this.dragNote.bind(this),f=this.dragstarted.bind(this),p=this.dragended.bind(this);this.note.call(Ie().container(ue("g.annotations").node()).on("start",(function(e){return f(e)})).on("drag",(function(e){return d(e)})).on("end",(function(e){return p(e)})))}else this.note.on("mousedown.drag",null);return c}},{key:"drawNoteContent",value:function(e){var t=this.annotation.note,n=void 0!==t.padding?t.padding:this.notePadding,r=t.orientation||e.orientation||"topBottom",i=t.lineType||e.lineType,o=t.align||e.align||"dynamic";"vertical"===i?r="leftRight":"horizontal"===i&&(r="topBottom");var a=function(e){var t=e.padding,n=void 0===t?0:t,r=e.bbox,i=void 0===r?{x:0,y:0,width:0,height:0}:r,o=e.align,a=e.orientation,s=e.offset,l=void 0===s?{x:0,y:0}:s,c=-i.x,u=0;return-1!==Lt.indexOf(a)?(o=Rt(o,l.x),l.y<0&&"topBottom"===a||"top"===a?u-=i.height+n:u+=n,"middle"===o?c-=i.width/2:"right"===o&&(c-=i.width)):-1!==Bt.indexOf(a)&&(o=It(o,l.y),l.x<0&&"leftRight"===a||"left"===a?c-=i.width+n:c+=n,"middle"===o?u-=i.height/2:"top"===o&&(u-=i.height)),{x:c,y:u}}({padding:n,bbox:e.bbox,offset:this.annotation.offset,orientation:r,align:o}),s=a.x,l=a.y;return this.offsetCornerX=s+this.annotation.dx,this.offsetCornerY=l+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+s+", "+l+")"),[]}},{key:"drawOnScreen",value:function(e,t){return this.drawOnSVG(e,t)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:e})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:e}))}},{key:"setPosition",value:function(){var e=this.annotation.position;this.a.attr("transform","translate("+e.x+", "+e.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var e=this.annotation.offset;this.note.attr("transform","translate("+e.x+", "+e.y+")")}}},{key:"setPositionWithAccessors",value:function(e){e&&this.annotation.data&&(this.mapX(e),this.mapY(e)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){K.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var e=this.annotation.position;e.x+=K.dx,e.y+=K.dy,this.annotation.position=e}},{key:"dragNote",value:function(){var e=this.annotation.offset;e.x+=K.dx,e.y+=K.dy,this.annotation.offset=e}},{key:"mapHandles",value:function(e){var t=this;return e.map((function(e){return Ct({},e,{start:t.dragstarted.bind(t),end:t.dragended.bind(t)})}))}}]),e}(),Qt=function(e,t,n){return function(e){function r(e){Et(this,r);var n=Dt(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.typeSettings=t,t.disable&&t.disable.forEach((function(e){n[e]&&n[e].remove(),n[e]=void 0,"note"===e&&(n.noteContent=void 0)})),n}return Pt(r,e),Mt(r,[{key:"className",value:function(){return""+(t.className||Tt(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this)&&Tt(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(e){return this.typeSettings.subject=Ct({},t.subject,this.typeSettings.subject),Tt(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawSubject",this).call(this,Ct({},e,this.typeSettings.subject))}},{key:"drawConnector",value:function(e){return this.typeSettings.connector=Ct({},t.connector,this.typeSettings.connector),Tt(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawConnector",this).call(this,Ct({},e,t.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(e){return this.typeSettings.note=Ct({},t.note,this.typeSettings.note),Tt(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNote",this).call(this,Ct({},e,t.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(e){return Tt(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"drawNoteContent",this).call(this,Ct({},e,t.note,this.typeSettings.note))}}],[{key:"init",value:function(e,t){return Tt(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,e,t),n&&(e=n(e,t)),e}}]),r}(e)},en=function(e){function t(e){Et(this,t);var n=Dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.textWrap=e.textWrap||120,n.drawText(),n}return Pt(t,e),Mt(t,[{key:"updateTextWrap",value:function(e){this.textWrap=e,this.drawText()}},{key:"drawText",value:function(){if(this.note){nn(this.note,[this.annotation],"g","annotation-note-content");var e=this.note.select("g.annotation-note-content");nn(e,[this.annotation],"rect","annotation-note-bg"),nn(e,[this.annotation],"text","annotation-note-label"),nn(e,[this.annotation],"text","annotation-note-title");var t={height:0},n=this.a.select("text.annotation-note-label"),r=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,i=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,o=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,a={top:0,bottom:0,left:0,right:0};if("number"==typeof o?a={top:o,bottom:o,left:o,right:o}:o&&"object"===(void 0===o?"undefined":At(o))&&(a=Ct(a,o)),this.annotation.note.title){var s=this.a.select("text.annotation-note-title");s.text(this.annotation.note.title),s.attr("fill",this.annotation.color),s.attr("font-weight","bold"),s.call(on,r,i),t=s.node().getBBox()}n.text(this.annotation.note.label).attr("dx","0"),n.call(on,r,i),n.attr("y",1.1*t.height||0),n.attr("fill",this.annotation.color);var l=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",l.width+a.left+a.right).attr("height",l.height+a.top+a.bottom).attr("x",l.x-a.left).attr("y",-a.top).attr("fill","white").attr("fill-opacity",0)}}}]),t}(Kt),tn=(Qt(en,{className:"label",note:{align:"middle"}}),Qt(en,{className:"callout",note:{lineType:"horizontal"}})),nn=(Qt(tn,{className:"callout elbow",connector:{type:"elbow"}}),Qt(tn,{className:"callout curve",connector:{type:"curve"}}),Qt(Kt,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),Qt(en,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}}),Qt(en,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}}),Qt(function(e){function t(){return Et(this,t),Dt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Pt(t,e),Mt(t,[{key:"mapY",value:function(e){Tt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapY",this).call(this,e);var n=this.annotation;(n.subject.x1||n.subject.x2)&&n.data&&e.y&&(n.y=e.y(n.data)),!n.subject.x1&&!n.subject.x2||n.x||(n.x=n.subject.x1||n.subject.x2)}},{key:"mapX",value:function(e){Tt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapX",this).call(this,e);var n=this.annotation;(n.subject.y1||n.subject.y2)&&n.data&&e.x&&(n.x=e.x(n.data)),!n.subject.y1&&!n.subject.y2||n.y||(n.y=n.subject.y1||n.subject.y2)}}]),t}(tn),{className:"callout xythreshold",subject:{type:"threshold"}}),function(e,t,n,r,i){var o=e.selectAll(n+"."+(i||r)).data(t);return o.enter().append(n).merge(o).attr("class",r),o.exit().remove(),e}),rn=function(e,t,n){var r=n.component,i=n.name;r&&r.on("mouseover.annotations",(function(){e.call(i+"over",r,t)})).on("mouseout.annotations",(function(){return e.call(i+"out",r,t)})).on("click.annotations",(function(){return e.call(i+"click",r,t)}))},on=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;e.each((function(){for(var e=ue(this),i=e.text().split(n||/[ \t\r\n]+/).reverse().filter((function(e){return""!==e})),o=void 0,a=[],s=e.text(null).append("tspan").attr("x",0).attr("dy","0.8em");o=i.pop();)a.push(o),s.text(a.join(" ")),s.node().getComputedTextLength()>t&&a.length>1&&(a.pop(),s.text(a.join(" ")),a=[o],s=e.append("tspan").attr("x",0).attr("dy",r+"em").text(o))}))},an=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":not(.handle)";return e?e.selectAll(t).nodes().reduce((function(e,t){var n=t.getBBox();e.x=Math.min(e.x,n.x),e.y=Math.min(e.y,n.y),e.width=Math.max(e.width,n.width);var r=t&&t.attributes&&t.attributes.y;return e.height=Math.max(e.height,(r&&parseFloat(r.value)||0)+n.height),e}),{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function sn(){var e=[],t=void 0,n=void 0,r=[],i={},o={},a=!1,s=void 0,l=tn,c=void 0,u=void 0,h=Se("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),d=void 0,f=function(n){d=n,a||n.selectAll("circle.handle").remove();var f=e.map((function(e){return e.type||(e.type=l),e.disable||(e.disable=r),new kt(e)}));t=t||new Ot({annotations:f,accessors:i,accessorsInverse:o,ids:s}),n.selectAll("g").data([t]).enter().append("g").attr("class","annotations");var p=n.select("g.annotations");nn(p,t.annotations,"g","annotation"),p.selectAll("g.annotation").each((function(e){var t=ue(this);t.attr("class","annotation"),nn(t,[e],"g","annotation-connector"),nn(t,[e],"g","annotation-subject"),nn(t,[e],"g","annotation-note"),nn(t.select("g.annotation-note"),[e],"g","annotation-note-content"),e.type="[object Object]"===e.type.toString()?e.type:new e.type({a:t,annotation:e,textWrap:c,notePadding:u,editMode:a,dispatcher:h,accessors:i}),e.type.draw(),e.type.drawText&&e.type.drawText()}))};return f.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",t.json),window.copy(JSON.stringify(t.json.map((function(e){return delete e.type,e})))),f},f.update=function(){return e&&t&&(e=t.annotations.map((function(e){return e.type.draw(),e}))),f},f.updateText=function(){return t&&(t.updateText(c),e=t.annotations),f},f.updatedAccessors=function(){return t.setPositionWithAccessors(),e=t.annotations,f},f.disable=function(n){return arguments.length?(r=n,t&&(t.updateDisable(r),e=t.annotations),f):r},f.textWrap=function(n){return arguments.length?(c=n,t&&(t.updateTextWrap(c),e=t.annotations),f):c},f.notePadding=function(n){return arguments.length?(u=n,t&&(t.updateNotePadding(u),e=t.annotations),f):u},f.type=function(n,r){return arguments.length?(l=n,t&&(t.annotations.map((function(e){e.type.note&&e.type.note.selectAll("*:not(.annotation-note-content)").remove(),e.type.noteContent&&e.type.noteContent.selectAll("*").remove(),e.type.subject&&e.type.subject.selectAll("*").remove(),e.type.connector&&e.type.connector.selectAll("*").remove(),e.type.typeSettings={},e.type=l,e.subject=r&&r.subject||e.subject,e.connector=r&&r.connector||e.connector,e.note=r&&r.note||e.note})),e=t.annotations),f):l},f.annotations=function(n){if(!arguments.length)return t&&t.annotations||e;if(e=n,t&&t.annotations){var r=e.some((function(e){return!e.type||"[object Object]"!==e.type.toString()}));r?(t=null,f(d)):t.annotations=e}return f},f.context=function(e){return arguments.length?(n=e,f):n},f.accessors=function(e){return arguments.length?(i=e,f):i},f.accessorsInverse=function(e){return arguments.length?(o=e,f):o},f.ids=function(e){return arguments.length?(s=e,f):s},f.editMode=function(n){return arguments.length?(a=n,d&&d.selectAll("g.annotation").classed("editable",a),t&&(t.editMode(a),e=t.annotations),f):a},f.collection=function(e){return arguments.length?(t=e,f):t},f.on=function(){var e=h.on.apply(h,arguments);return e===h?f:e},f}},5611:(e,t,n)=>{"use strict";n.d(t,{i$:()=>A,Z1:()=>E});var r=n(1829),i=n(1222);function o(e){return(0,r.Z)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/i.iM}))}var a=o(0),s=o(1),l=o(2),c=o(3),u=o(4),h=o(5),d=o(6),f=(a.range,s.range,l.range,c.range,u.range,h.range,d.range,(0,r.Z)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/i.UD}),(function(e){return e.getUTCDate()-1})));const p=f;f.range;var m=n(2776),g=n(9478),y=n(2209),v=(0,r.Z)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));v.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const _=v;function b(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function x(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function w(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}v.range;var S,A,E,M={"-":"",_:" ",0:"0"},C=/^\s*\d+/,T=/^%/,P=/[\\^$*+?|[\]().{}]/g;function D(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function k(e){return e.replace(P,"\\$&")}function O(e){return new RegExp("^(?:"+e.map(k).join("|")+")","i")}function I(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function R(e,t,n){var r=C.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function L(e,t,n){var r=C.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function B(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function z(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function F(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function N(e,t,n){var r=C.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function U(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function j(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function V(e,t,n){var r=C.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function G(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function H(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function W(e,t,n){var r=C.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function q(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Z(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function X(e,t,n){var r=C.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Y(e,t,n){var r=C.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $(e,t,n){var r=C.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function J(e,t,n){var r=T.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function K(e,t,n){var r=C.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Q(e,t,n){var r=C.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ee(e,t){return D(e.getDate(),t,2)}function te(e,t){return D(e.getHours(),t,2)}function ne(e,t){return D(e.getHours()%12||12,t,2)}function re(e,t){return D(1+g.Z.count((0,y.Z)(e),e),t,3)}function ie(e,t){return D(e.getMilliseconds(),t,3)}function oe(e,t){return ie(e,t)+"000"}function ae(e,t){return D(e.getMonth()+1,t,2)}function se(e,t){return D(e.getMinutes(),t,2)}function le(e,t){return D(e.getSeconds(),t,2)}function ce(e){var t=e.getDay();return 0===t?7:t}function ue(e,t){return D(m.OM.count((0,y.Z)(e)-1,e),t,2)}function he(e){var t=e.getDay();return t>=4||0===t?(0,m.bL)(e):m.bL.ceil(e)}function de(e,t){return e=he(e),D(m.bL.count((0,y.Z)(e),e)+(4===(0,y.Z)(e).getDay()),t,2)}function fe(e){return e.getDay()}function pe(e,t){return D(m.wA.count((0,y.Z)(e)-1,e),t,2)}function me(e,t){return D(e.getFullYear()%100,t,2)}function ge(e,t){return D((e=he(e)).getFullYear()%100,t,2)}function ye(e,t){return D(e.getFullYear()%1e4,t,4)}function ve(e,t){var n=e.getDay();return D((e=n>=4||0===n?(0,m.bL)(e):m.bL.ceil(e)).getFullYear()%1e4,t,4)}function _e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+D(t/60|0,"0",2)+D(t%60,"0",2)}function be(e,t){return D(e.getUTCDate(),t,2)}function xe(e,t){return D(e.getUTCHours(),t,2)}function we(e,t){return D(e.getUTCHours()%12||12,t,2)}function Se(e,t){return D(1+p.count(_(e),e),t,3)}function Ae(e,t){return D(e.getUTCMilliseconds(),t,3)}function Ee(e,t){return Ae(e,t)+"000"}function Me(e,t){return D(e.getUTCMonth()+1,t,2)}function Ce(e,t){return D(e.getUTCMinutes(),t,2)}function Te(e,t){return D(e.getUTCSeconds(),t,2)}function Pe(e){var t=e.getUTCDay();return 0===t?7:t}function De(e,t){return D(a.count(_(e)-1,e),t,2)}function ke(e){var t=e.getUTCDay();return t>=4||0===t?u(e):u.ceil(e)}function Oe(e,t){return e=ke(e),D(u.count(_(e),e)+(4===_(e).getUTCDay()),t,2)}function Ie(e){return e.getUTCDay()}function Re(e,t){return D(s.count(_(e)-1,e),t,2)}function Le(e,t){return D(e.getUTCFullYear()%100,t,2)}function Be(e,t){return D((e=ke(e)).getUTCFullYear()%100,t,2)}function ze(e,t){return D(e.getUTCFullYear()%1e4,t,4)}function Fe(e,t){var n=e.getUTCDay();return D((e=n>=4||0===n?u(e):u.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ne(){return"+0000"}function Ue(){return"%"}function je(e){return+e}function Ve(e){return Math.floor(+e/1e3)}S=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,l=e.months,c=e.shortMonths,u=O(i),h=I(i),d=O(o),f=I(o),y=O(a),v=I(a),_=O(l),S=I(l),A=O(c),E=I(c),C={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:ee,e:ee,f:oe,g:ge,G:ve,H:te,I:ne,j:re,L:ie,m:ae,M:se,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:je,s:Ve,S:le,u:ce,U:ue,V:de,w:fe,W:pe,x:null,X:null,y:me,Y:ye,Z:_e,"%":Ue},T={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:be,e:be,f:Ee,g:Be,G:Fe,H:xe,I:we,j:Se,L:Ae,m:Me,M:Ce,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:je,s:Ve,S:Te,u:Pe,U:De,V:Oe,w:Ie,W:Re,x:null,X:null,y:Le,Y:ze,Z:Ne,"%":Ue},P={a:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=A.exec(t.slice(n));return r?(e.m=E.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=S.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return he(e,t,n,r)},d:H,e:H,f:$,g:U,G:N,H:q,I:q,j:W,L:Y,m:G,M:Z,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=h.get(r[0].toLowerCase()),n+r[0].length):-1},q:V,Q:K,s:Q,S:X,u:L,U:B,V:z,w:R,W:F,x:function(e,t,r){return he(e,n,t,r)},X:function(e,t,n){return he(e,r,t,n)},y:U,Y:N,Z:j,"%":J};function D(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=M[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=w(1900,void 0,1);if(he(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=x(w(o.y,0,1))).getUTCDay(),r=i>4||0===i?s.ceil(r):s(r),r=p.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=b(w(o.y,0,1))).getDay(),r=i>4||0===i?m.wA.ceil(r):(0,m.wA)(r),r=g.Z.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?x(w(o.y,0,1)).getUTCDay():b(w(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,x(o)):b(o)}}function he(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=P[i in M?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return C.x=D(n,C),C.X=D(r,C),C.c=D(t,C),T.x=D(n,T),T.X=D(r,T),T.c=D(t,T),{format:function(e){var t=D(e+="",C);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=D(e+="",T);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),A=S.format,E=S.parse,S.utcFormat,S.utcParse},9478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(1829),i=n(1222),o=(0,r.Z)((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.UD),(e=>e.getDate()-1));const a=o;o.range},1222:(e,t,n)=>{"use strict";n.d(t,{Ym:()=>r,yB:()=>i,Y2:()=>o,UD:()=>a,iM:()=>s});var r=1e3,i=6e4,o=36e5,a=864e5,s=6048e5},1829:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=new Date,i=new Date;function o(e,t,n,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return a},s.filter=function(n){return o((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,o){return r.setTime(+t),i.setTime(+o),e(r),e(i),Math.floor(n(r,i))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},2776:(e,t,n)=>{"use strict";n.d(t,{OM:()=>a,wA:()=>s,bL:()=>u});var r=n(1829),i=n(1222);function o(e){return(0,r.Z)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.yB)/i.iM}))}var a=o(0),s=o(1),l=o(2),c=o(3),u=o(4),h=o(5),d=o(6);a.range,s.range,l.range,c.range,u.range,h.range,d.range},2209:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1829),i=(0,r.Z)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,r.Z)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const o=i;i.range},5374:(e,t,n)=>{"use strict";n.d(t,{zO:()=>f,B7:()=>m,HT:()=>g});var r,i,o=0,a=0,s=0,l=0,c=0,u=0,h="object"==typeof performance&&performance.now?performance:Date,d="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function f(){return c||(d(p),c=h.now()+u)}function p(){c=0}function m(){this._call=this._time=this._next=null}function g(e,t,n){var r=new m;return r.restart(e,t,n),r}function y(){c=(l=h.now())+u,o=a=0;try{!function(){f(),++o;for(var e,t=r;t;)(e=c-t._time)>=0&&t._call.call(null,e),t=t._next;--o}()}finally{o=0,function(){for(var e,t,n=r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:r=t);i=e,_(o)}(),c=0}}function v(){var e=h.now(),t=e-l;t>1e3&&(u-=t,l=e)}function _(e){o||(a&&(a=clearTimeout(a)),e-c>24?(e<1/0&&(a=setTimeout(y,e-h.now()-u)),s&&(s=clearInterval(s))):(s||(l=h.now(),s=setInterval(v,1e3)),o=1,d(y)))}m.prototype=g.prototype={constructor:m,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?f():+n)+(null==t?0:+t),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=e,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}}},6321:(e,t,n)=>{"use strict";n.d(t,{e1:()=>f});var r=n(4666),i=n(2626),o=n(5374);function a(e,t,n){var r=new o.B7;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}var s=(0,i.Z)("start","end","cancel","interrupt"),l=[];function c(e,t,n,r,i,c){var u=e.__transition;if(u){if(n in u)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function s(o){var u,h,d,f;if(1!==n.state)return c();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return a(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[u])}if(a((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=f);r.length=h+1}}function l(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=(0,o.HT)((function(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:s,tween:l,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:0})}function u(e,t){var n=d(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function h(e,t){var n=d(e,t);if(n.state>3)throw new Error("too late; already running");return n}function d(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function f(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}var p,m=n(3626),g=180/Math.PI,y={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function v(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*g,skewX:Math.atan(l)*g,scaleX:a,scaleY:s}}function _(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:(0,m.Z)(e,i)},{i:l-2,x:(0,m.Z)(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:(0,m.Z)(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:(0,m.Z)(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:(0,m.Z)(e,n)},{i:s-2,x:(0,m.Z)(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var b=_((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?y:v(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),x=_((function(e){return null==e?y:(p||(p=document.createElementNS("http://www.w3.org/2000/svg","g")),p.setAttribute("transform",e),(e=p.transform.baseVal.consolidate())?v((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):y)}),", ",")",")"),w=n(3888);function S(e,t){var n,r;return function(){var i=h(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function A(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=h(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function E(e,t,n){var r=e._id;return e.each((function(){var e=h(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return d(e,r).value[t]}}var M=n(2650),C=n(7765),T=n(9843);function P(e,t){var n;return("number"==typeof t?m.Z:t instanceof M.ZP?C.ZP:(n=(0,M.ZP)(t))?(t=n,C.ZP):T.Z)(e,t)}function D(e){return function(){this.removeAttribute(e)}}function k(e){return function(){this.removeAttributeNS(e.space,e.local)}}function O(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function I(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function R(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function L(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function B(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function z(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function F(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&z(e,i)),n}return i._value=t,i}function N(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&B(e,i)),n}return i._value=t,i}function U(e,t){return function(){u(this,e).delay=+t.apply(this,arguments)}}function j(e,t){return t=+t,function(){u(this,e).delay=t}}function V(e,t){return function(){h(this,e).duration=+t.apply(this,arguments)}}function G(e,t){return t=+t,function(){h(this,e).duration=t}}function H(e,t){if("function"!=typeof t)throw new Error;return function(){h(this,e).ease=t}}var W=n(3083);function q(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?u:h;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var Z=n(2634),X=n(3545),Y=r.ZP.prototype.constructor,$=n(9986);function J(e){return function(){this.style.removeProperty(e)}}function K(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Q(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&K(e,o,n)),r}return o._value=t,o}function ee(e){return function(t){this.textContent=e.call(this,t)}}function te(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ee(r)),t}return r._value=e,r}var ne=0;function re(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ie(){return++ne}var oe=r.ZP.prototype;re.prototype=function(e){return(0,r.ZP)().transition(e)}.prototype={constructor:re,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,Z.Z)(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],h=u.length,f=o[a]=new Array(h),p=0;p<h;++p)(s=u[p])&&(l=e.call(s,s.__data__,p,u))&&("__data__"in s&&(l.__data__=s.__data__),f[p]=l,c(f[p],t,n,p,f,d(s,n)));return new re(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,X.Z)(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],h=u.length,f=0;f<h;++f)if(l=u[f]){for(var p,m=e.call(l,l.__data__,f,u),g=d(l,n),y=0,v=m.length;y<v;++y)(p=m[y])&&c(p,t,n,y,m,g);o.push(m),a.push(l)}return new re(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=(0,W.Z)(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new re(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new re(a,this._parents,this._name,this._id)},selection:function(){return new Y(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ie(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var h=d(a,t);c(a,e,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new re(r,this._parents,e,n)},call:oe.call,nodes:oe.nodes,node:oe.node,size:oe.size,empty:oe.empty,each:oe.each,on:function(e,t){var n=this._id;return arguments.length<2?d(this.node(),n).on.on(e):this.each(q(n,e,t))},attr:function(e,t){var n=(0,w.Z)(e),r="transform"===n?x:P;return this.attrTween(e,"function"==typeof t?(n.local?L:R)(n,r,E(this,"attr."+e,t)):null==t?(n.local?k:D)(n):(n.local?I:O)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=(0,w.Z)(e);return this.tween(n,(r.local?F:N)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?b:P;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=(0,$.S)(this,e),a=(this.style.removeProperty(e),(0,$.S)(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,J(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=(0,$.S)(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=(0,$.S)(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,E(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=h(this,e),c=l.on,u=null==l.value[a]?o||(o=J(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=(0,$.S)(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Q(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(E(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,te(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=d(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?S:A)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?U:j)(t,e)):d(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?V:G)(t,e)):d(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(H(t,e)):d(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;h(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--i&&o()}};n.each((function(){var n=h(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:oe[Symbol.iterator]};var ae={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function se(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}r.ZP.prototype.interrupt=function(e){return this.each((function(){f(this,e)}))},r.ZP.prototype.transition=function(e){var t,n;e instanceof re?(t=e._id,e=e._name):(t=ie(),(n=ae).time=(0,o.zO)(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s,l=r[a],u=l.length,h=0;h<u;++h)(s=l[h])&&c(s,e,t,h,l,n||se(s,t));return new re(r,this._parents,e,t)}},8507:(e,t,n)=>{"use strict";n.d(t,{sP:()=>S,P2:()=>p});var r=n(2626),i=n(72);function o(e){return((e=Math.exp(e))+1/e)/2}const a=function e(t,n,r){function i(e,i){var a,s,l=e[0],c=e[1],u=e[2],h=i[0],d=i[1],f=i[2],p=h-l,m=d-c,g=p*p+m*m;if(g<1e-12)s=Math.log(f/u)/t,a=function(e){return[l+e*p,c+e*m,u*Math.exp(t*e*s)]};else{var y=Math.sqrt(g),v=(f*f-u*u+r*g)/(2*u*n*y),_=(f*f-u*u-r*g)/(2*f*n*y),b=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(_*_+1)-_);s=(x-b)/t,a=function(e){var r,i=e*s,a=o(b),h=u/(n*y)*(a*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[l+h*p,c+h*m,u*a/o(t*i+b)]}}return a.duration=1e3*s*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);var s=n(4017),l=n(3641),c=n(6321);const u=e=>()=>e;function h(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function d(e,t,n){this.k=e,this.x=t,this.y=n}d.prototype={constructor:d,scale:function(e){return 1===e?this:new d(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new d(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var f=new d(1,0,0);function p(e){for(;!e.__zoom;)if(!(e=e.parentNode))return f;return e.__zoom}function m(e){e.stopImmediatePropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function y(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function v(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function _(){return this.__zoom||f}function b(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function x(){return navigator.maxTouchPoints||"ontouchstart"in this}function w(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function S(){var e,t,n,o=y,p=v,S=w,A=b,E=x,M=[0,1/0],C=[[-1/0,-1/0],[1/0,1/0]],T=250,P=a,D=(0,r.Z)("start","zoom","end"),k=500,O=0,I=10;function R(e){e.property("__zoom",_).on("wheel.zoom",j).on("mousedown.zoom",V).on("dblclick.zoom",G).filter(E).on("touchstart.zoom",H).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function L(e,t){return(t=Math.max(M[0],Math.min(M[1],t)))===e.k?e:new d(t,e.x,e.y)}function B(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new d(e.k,r,i)}function z(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function F(e,t,n,r){e.on("start.zoom",(function(){N(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){N(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,o=N(e,i).event(r),a=p.apply(e,i),s=null==n?z(a):"function"==typeof n?n.apply(e,i):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=e.__zoom,u="function"==typeof t?t.apply(e,i):t,h=P(c.invert(s).concat(l/c.k),u.invert(s).concat(l/u.k));return function(e){if(1===e)e=u;else{var t=h(e),n=l/t[2];e=new d(n,s[0]-t[0]*n,s[1]-t[1]*n)}o.zoom(null,e)}}))}function N(e,t,n){return!n&&e.__zooming||new U(e,t)}function U(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=p.apply(e,t),this.taps=0}function j(e,...t){if(o.apply(this,arguments)){var n=N(this,t).event(e),r=this.__zoom,i=Math.max(M[0],Math.min(M[1],r.k*Math.pow(2,A.apply(this,arguments)))),a=(0,l.Z)(e);if(n.wheel)n.mouse[0][0]===a[0]&&n.mouse[0][1]===a[1]||(n.mouse[1]=r.invert(n.mouse[0]=a)),clearTimeout(n.wheel);else{if(r.k===i)return;n.mouse=[a,r.invert(a)],(0,c.e1)(this),n.start()}g(e),n.wheel=setTimeout(s,150),n.zoom("mouse",S(B(L(r,i),n.mouse[0],n.mouse[1]),n.extent,C))}function s(){n.wheel=null,n.end()}}function V(e,...t){if(!n&&o.apply(this,arguments)){var r=N(this,t,!0).event(e),a=(0,s.Z)(e.view).on("mousemove.zoom",p,!0).on("mouseup.zoom",y,!0),u=(0,l.Z)(e,h),h=e.currentTarget,d=e.clientX,f=e.clientY;(0,i.Z)(e.view),m(e),r.mouse=[u,this.__zoom.invert(u)],(0,c.e1)(this),r.start()}function p(e){if(g(e),!r.moved){var t=e.clientX-d,n=e.clientY-f;r.moved=t*t+n*n>O}r.event(e).zoom("mouse",S(B(r.that.__zoom,r.mouse[0]=(0,l.Z)(e,h),r.mouse[1]),r.extent,C))}function y(e){a.on("mousemove.zoom mouseup.zoom",null),(0,i.D)(e.view,r.moved),g(e),r.event(e).end()}}function G(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,r=(0,l.Z)(e.changedTouches?e.changedTouches[0]:e,this),i=n.invert(r),a=n.k*(e.shiftKey?.5:2),c=S(B(L(n,a),r,i),p.apply(this,t),C);g(e),T>0?(0,s.Z)(this).transition().duration(T).call(F,c,r,e):(0,s.Z)(this).call(R.transform,c,r,e)}}function H(n,...r){if(o.apply(this,arguments)){var i,a,s,u,h=n.touches,d=h.length,f=N(this,r,n.changedTouches.length===d).event(n);for(m(n),a=0;a<d;++a)s=h[a],u=[u=(0,l.Z)(s,this),this.__zoom.invert(u),s.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,i=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),k)),(0,c.e1)(this),f.start())}}function W(e,...t){if(this.__zooming){var n,r,i,o,a=N(this,t).event(e),s=e.changedTouches,c=s.length;for(g(e),n=0;n<c;++n)r=s[n],i=(0,l.Z)(r,this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var u=a.touch0[0],h=a.touch0[1],d=a.touch1[0],f=a.touch1[1],p=(p=d[0]-u[0])*p+(p=d[1]-u[1])*p,m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m;r=L(r,Math.sqrt(p/m)),i=[(u[0]+d[0])/2,(u[1]+d[1])/2],o=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],o=a.touch0[1]}a.zoom("touch",S(B(r,i,o),a.extent,C))}}function q(e,...r){if(this.__zooming){var i,o,a=N(this,r).event(e),c=e.changedTouches,u=c.length;for(m(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),k),i=0;i<u;++i)o=c[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=(0,l.Z)(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<I)){var h=(0,s.Z)(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return R.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",_),e!==i?F(e,t,n,r):i.interrupt().each((function(){N(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},R.scaleBy=function(e,t,n,r){R.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},R.scaleTo=function(e,t,n,r){R.transform(e,(function(){var e=p.apply(this,arguments),r=this.__zoom,i=null==n?z(e):"function"==typeof n?n.apply(this,arguments):n,o=r.invert(i),a="function"==typeof t?t.apply(this,arguments):t;return S(B(L(r,a),i,o),e,C)}),n,r)},R.translateBy=function(e,t,n,r){R.transform(e,(function(){return S(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),p.apply(this,arguments),C)}),null,r)},R.translateTo=function(e,t,n,r,i){R.transform(e,(function(){var e=p.apply(this,arguments),i=this.__zoom,o=null==r?z(e):"function"==typeof r?r.apply(this,arguments):r;return S(f.translate(o[0],o[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,C)}),r,i)},U.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=(0,s.Z)(this.that).datum();D.call(e,this.that,new h(e,{sourceEvent:this.sourceEvent,target:R,type:e,transform:this.that.__zoom,dispatch:D}),t)}},R.wheelDelta=function(e){return arguments.length?(A="function"==typeof e?e:u(+e),R):A},R.filter=function(e){return arguments.length?(o="function"==typeof e?e:u(!!e),R):o},R.touchable=function(e){return arguments.length?(E="function"==typeof e?e:u(!!e),R):E},R.extent=function(e){return arguments.length?(p="function"==typeof e?e:u([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),R):p},R.scaleExtent=function(e){return arguments.length?(M[0]=+e[0],M[1]=+e[1],R):[M[0],M[1]]},R.translateExtent=function(e){return arguments.length?(C[0][0]=+e[0][0],C[1][0]=+e[1][0],C[0][1]=+e[0][1],C[1][1]=+e[1][1],R):[[C[0][0],C[0][1]],[C[1][0],C[1][1]]]},R.constrain=function(e){return arguments.length?(S=e,R):S},R.duration=function(e){return arguments.length?(T=+e,R):T},R.interpolate=function(e){return arguments.length?(P=e,R):P},R.on=function(){var e=D.on.apply(D,arguments);return e===D?R:e},R.clickDistance=function(e){return arguments.length?(O=(e=+e)*e,R):Math.sqrt(O)},R.tapDistance=function(e){return arguments.length?(I=+e,R):I},R}p.prototype=d.prototype},7560:(e,t,n)=>{"use strict";n.d(t,{Ys:()=>s.Z}),n(6321);const{abs:r,max:i,min:o}=Math;function a(e){return{type:e}}["w","e"].map(a),["n","s"].map(a),["n","w","e","s","nw","ne","sw","se"].map(a);var s=n(4017);n(8507)},7484:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",l="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},p={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+f(r,2,"0")+":"+f(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),o=n-i<0,s=t.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:a,y:l,w:o,d:i,D:c,h:r,m:n,s:t,ms:e,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",g={};g[m]=d;var y=function(e){return e instanceof x},v=function(e,t,n){var r;if(!e)return m;if("string"==typeof e)g[e]&&(r=e),t&&(g[e]=t,r=e);else{var i=e.name;g[i]=e,r=i}return!n&&r&&(m=r),r||!n&&m},_=function(e,t){if(y(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new x(n)},b=p;b.l=v,b.i=y,b.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var x=function(){function d(e){this.$L=v(e.locale,null,!0),this.parse(e)}var f=d.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return b},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return _(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<_(e)},f.$g=function(e,t,n){return b.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,s){var u=this,h=!!b.u(s)||s,d=b.p(e),f=function(e,t){var n=b.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return h?n:n.endOf(i)},p=function(e,t){return b.w(u.toDate()[e].apply(u.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},m=this.$W,g=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case l:return h?f(1,0):f(31,11);case a:return h?f(1,g):f(0,g+1);case o:var _=this.$locale().weekStart||0,x=(m<_?m+7:m)-_;return f(h?y-x:y+(6-x),g);case i:case c:return p(v+"Hours",0);case r:return p(v+"Minutes",1);case n:return p(v+"Seconds",2);case t:return p(v+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(o,s){var u,h=b.p(o),d="set"+(this.$u?"UTC":""),f=(u={},u[i]=d+"Date",u[c]=d+"Date",u[a]=d+"Month",u[l]=d+"FullYear",u[r]=d+"Hours",u[n]=d+"Minutes",u[t]=d+"Seconds",u[e]=d+"Milliseconds",u)[h],p=h===i?this.$D+(s-this.$W):s;if(h===a||h===l){var m=this.clone().set(c,1);m.$d[f](p),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[b.p(e)]()},f.add=function(e,s){var c,u=this;e=Number(e);var h=b.p(s),d=function(t){var n=_(u);return b.w(n.date(n.date()+Math.round(t*e)),u)};if(h===a)return this.set(a,this.$M+e);if(h===l)return this.set(l,this.$y+e);if(h===i)return d(1);if(h===o)return d(7);var f=(c={},c[n]=6e4,c[r]=36e5,c[t]=1e3,c)[h]||1,p=this.$d.getTime()+e*f;return b.w(p,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=b.z(this),i=this.$locale(),o=this.$H,a=this.$m,s=this.$M,l=i.weekdays,c=i.months,u=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].substr(0,o)},d=function(e){return b.s(o%12||12,e,"0")},f=i.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:b.s(s+1,2,"0"),MMM:u(i.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,l,2),ddd:u(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:b.s(o,2,"0"),h:d(1),hh:d(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:b.s(a,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:r};return n.replace(h,(function(e,t){return t||p[e]||r.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,c,u){var h,d=b.p(c),f=_(e),p=6e4*(f.utcOffset()-this.utcOffset()),m=this-f,g=b.m(this,f);return g=(h={},h[l]=g/12,h[a]=g,h[s]=g/3,h[o]=(m-p)/6048e5,h[i]=(m-p)/864e5,h[r]=m/36e5,h[n]=m/6e4,h[t]=m/1e3,h)[d]||m,u?g:b.a(g)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return g[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=v(e,t,!0);return r&&(n.$L=r),n},f.clone=function(){return b.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),w=x.prototype;return _.prototype=w,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W",i],["$M",a],["$y",l],["$D",c]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,x,_),e.$i=!0),_},_.locale=v,_.isDayjs=y,_.unix=function(e){return _(1e3*e)},_.en=g[m],_.Ls=g,_.p={},_}()},2997:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.dayOfYear=function(e){var t=Math.round((this.startOf("day")-this.startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"day")}}}()},296:e=>{function t(e,t,n){var r,i,o,a,s;function l(){var c=Date.now()-a;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}t.debounce=t,e.exports=t},2823:e=>{e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},3405:e=>{e.exports=function(e){return[...e].reduce(((e,[t,n])=>(e[t]=n,e)),{})}},7082:(e,t,n)=>{"use strict";n.d(t,{i:()=>Qe});var r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A,E,M,C,T,P,D=1,k=[],O=[],I=Date.now,R=I(),L=0,B=1,z=function(e){return e},F=function(){return"undefined"!=typeof window},N=function(){return r||F()&&(r=window.gsap)&&r.registerPlugin&&r},U=function(e){return!!~c.indexOf(e)},j=function(e,t){return~k.indexOf(e)&&k[k.indexOf(e)+1][t]},V=function(e,t){var n=t.s,r=t.sc,i=O.indexOf(e),o=r===ce.sc?1:2;return!~i&&(i=O.push(e)-1),O[i+o]||(O[i+o]=j(e,n)||(U(e)?r:function(t){return arguments.length?e[n]=t:e[n]}))},G=function(e){return j(e,"getBoundingClientRect")||(U(e)?function(){return Xe.width=o.innerWidth,Xe.height=o.innerHeight,Xe}:function(){return de(e)})},H=function(e,t){var n=t.s,r=t.d2,i=t.d,a=t.a;return(n="scroll"+r)&&(a=j(e,n))?a()-G(e)()[i]:U(e)?Math.max(s[n],l[n])-(o["inner"+r]||s["client"+r]||l["client"+r]):e[n]-e["offset"+r]},W=function(e,t){for(var n=0;n<S.length;n+=3)(!t||~t.indexOf(S[n+1]))&&e(S[n],S[n+1],S[n+2])},q=function(e){return"string"==typeof e},Z=function(e){return"function"==typeof e},X=function(e){return"number"==typeof e},Y=function(e){return"object"==typeof e},$=function(e){return Z(e)&&e()},J=function(e,t){return function(){var n=$(e),r=$(t);return function(){$(n),$(r)}}},K=Math.abs,Q="left",ee="right",te="bottom",ne="width",re="height",ie="padding",oe="margin",ae="Width",se="px",le={s:"scrollLeft",p:Q,p2:"Left",os:ee,os2:"Right",d:ne,d2:ae,a:"x",sc:function(e){return arguments.length?o.scrollTo(e,ce.sc()):o.pageXOffset||a.scrollLeft||s.scrollLeft||l.scrollLeft||0}},ce={s:"scrollTop",p:"top",p2:"Top",os:te,os2:"Bottom",d:re,d2:"Height",a:"y",op:le,sc:function(e){return arguments.length?o.scrollTo(le.sc(),e):o.pageYOffset||a.scrollTop||s.scrollTop||l.scrollTop||0}},ue=function(e){return o.getComputedStyle(e)},he=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},de=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==ue(e)[_]&&r.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return n&&n.progress(0).kill(),i},fe=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},pe=function(e){var t,n=[],r=e.labels,i=e.duration();for(t in r)n.push(r[t]/i);return n},me=function(e,t,n,r){return n.split(",").forEach((function(n){return e(t,n,r)}))},ge=function(e,t,n){return e.addEventListener(t,n,{passive:!0})},ye=function(e,t,n){return e.removeEventListener(t,n)},ve={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_e={toggleActions:"play",anticipatePin:0},be={top:0,left:0,center:.5,bottom:1,right:1},xe=function(e,t){if(q(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in be?be[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},we=function(e,t,n,r,i,o,s){var c=i.startColor,u=i.endColor,h=i.fontSize,d=i.indent,f=i.fontWeight,p=a.createElement("div"),m=U(n)||"fixed"===j(n,"pinType"),g=-1!==e.indexOf("scroller"),y=m?l:n,v=-1!==e.indexOf("start"),_=v?c:u,b="border-color:"+_+";font-size:"+h+";color:"+_+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+(g&&m?"fixed;":"absolute;"),(g||!m)&&(b+=(r===ce?ee:te)+":"+(o+parseFloat(d))+"px;"),s&&(b+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),p._isStart=v,p.setAttribute("class","gsap-marker-"+e),p.style.cssText=b,p.innerText=t||0===t?e+"-"+t:e,y.children[0]?y.insertBefore(p,y.children[0]):y.appendChild(p),p._offset=p["offset"+r.op.d2],Se(p,0,r,v),p},Se=function(e,t,n,i){var o={display:"block"},a=n[i?"os2":"p2"],s=n[i?"p2":"os2"];e._isFlipped=i,o[n.a+"Percent"]=i?-100:0,o[n.a]=i?"1px":0,o["border"+a+ae]=1,o["border"+s+ae]=0,o[n.p]=t+"px",r.set(e,o)},Ae=[],Ee={},Me=function(){return d||(d=h(je))},Ce=function(){d||(d=h(je),L||Re("scrollStart"),L=I())},Te=function(){return!y&&!M&&!a.fullscreenElement&&u.restart(!0)},Pe={},De=[],ke=[],Oe=function(e){var t,n=r.ticker.frame,a=[],s=0;if(P!==n||D){for(ze();s<ke.length;s+=4)(t=o.matchMedia(ke[s]).matches)!==ke[s+3]&&(ke[s+3]=t,t?a.push(s):ze(1,ke[s])||Z(ke[s+2])&&ke[s+2]());for(Be(),s=0;s<a.length;s++)t=a[s],T=ke[t],ke[t+2]=ke[t+1](e);T=0,i&&Fe(0,1),P=n,Re("matchMedia")}},Ie=function e(){return ye(Qe,"scrollEnd",e)||Fe(!0)},Re=function(e){return Pe[e]&&Pe[e].map((function(e){return e()}))||De},Le=[],Be=function(e){for(var t=0;t<Le.length;t+=4)e&&Le[t+3]!==e||(Le[t].style.cssText=Le[t+1],Le[t+2].uncache=1)},ze=function(e,t){var n;for(b=0;b<Ae.length;b++)n=Ae[b],t&&n.media!==t||(e?n.kill(1):(n.scroll.rec||(n.scroll.rec=n.scroll()),n.revert()));Be(t),t||Re("revert")},Fe=function(e,t){if(!L||e){var n=Re("refreshInit");for(A&&Qe.sort(),t||ze(),b=0;b<Ae.length;b++)Ae[b].refresh();for(n.forEach((function(e){return e&&e.render&&e.render(-1)})),b=Ae.length;b--;)Ae[b].scroll.rec=0;u.pause(),Re("refresh")}else ge(Qe,"scrollEnd",Ie)},Ne=0,Ue=1,je=function(){var e=Ae.length,t=I(),n=t-R>=50,r=e&&Ae[0].scroll();if(Ue=Ne>r?-1:1,Ne=r,n&&(L&&!v&&t-L>200&&(L=0,Re("scrollEnd")),m=R,R=t),Ue<0){for(b=e;b--;)Ae[b]&&Ae[b].update(0,n);Ue=1}else for(b=0;b<e;b++)Ae[b]&&Ae[b].update(0,n);d=0},Ve=[Q,"top",te,ee,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex"],Ge=Ve.concat([ne,re,"boxSizing","maxWidth","maxHeight","position",oe,ie,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),He=function(e,t,n,r){if(e.parentNode!==t){for(var i,o=Ve.length,a=t.style,s=e.style;o--;)a[i=Ve[o]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),s.bottom=s.right="auto",a.overflow="visible",a.boxSizing="border-box",a.width=fe(e,le)+se,a.height=fe(e,ce)+se,a.padding=s.margin=s.top=s.left="0",qe(r),s.width=s.maxWidth=n.width,s.height=s.maxHeight=n.height,s.padding=n.padding,e.parentNode.insertBefore(t,e),t.appendChild(e)}},We=/([A-Z])/g,qe=function(e){if(e){var t,n,i=e.t.style,o=e.length,a=0;for((e.t._gsap||r.core.getCache(e.t)).uncache=1;a<o;a+=2)n=e[a+1],t=e[a],n?i[t]=n:i[t]&&i.removeProperty(t.replace(We,"-$1").toLowerCase())}},Ze=function(e){for(var t=Ge.length,n=e.style,r=[],i=0;i<t;i++)r.push(Ge[i],n[Ge[i]]);return r.t=e,r},Xe={left:0,top:0},Ye=function(e,t,n,r,i,o,a,c,u,h,d,p){if(Z(e)&&(e=e(c)),q(e)&&"max"===e.substr(0,3)&&(e=p+("="===e.charAt(4)?xe("0"+e.substr(3),n):0)),X(e))a&&Se(a,n,r,!0);else{Z(t)&&(t=t(c));var m,g,y,v=f(t)[0]||l,_=de(v)||{},b=e.split(" ");_&&(_.left||_.top)||"none"!==ue(v).display||(y=v.style.display,v.style.display="block",_=de(v),y?v.style.display=y:v.style.removeProperty("display")),m=xe(b[0],_[r.d]),g=xe(b[1]||"0",n),e=_[r.p]-u[r.p]-h+m+i-g,a&&Se(a,g,r,n-g<20||a._isStart&&g>20),n-=n-g}if(o){var x=e+n,w=o._isStart;p="scroll"+r.d2,Se(o,x,r,w&&x>20||!w&&(d?Math.max(l[p],s[p]):o.parentNode[p])<=x+1),d&&(u=de(a),d&&(o.style[r.op.p]=u[r.op.p]-r.op.m-o._offset+se))}return Math.round(e)},$e=/(?:webkit|moz|length|cssText|inset)/i,Je=function(e,t,n,i){if(e.parentNode!==t){var o,a,s=e.style;if(t===l){for(o in e._stOrig=s.cssText,a=ue(e))+o||$e.test(o)||!a[o]||"string"!=typeof s[o]||"0"===o||(s[o]=a[o]);s.top=n,s.left=i}else s.cssText=e._stOrig;r.core.getCache(e).uncache=1,t.appendChild(e)}},Ke=function(e,t){var n,i,o=V(e,t),a="_scroll"+t.p2,s=function t(s,l,c,u,h){var d=t.tween,f=l.onComplete,p={};return d&&d.kill(),n=Math.round(c),l[a]=s,l.modifiers=p,p[a]=function(e){return(e=Math.round(o()))!==n&&e!==i&&Math.abs(e-n)>2?(d.kill(),t.tween=0):e=c+u*d.ratio+h*d.ratio*d.ratio,i=n,n=Math.round(e)},l.onComplete=function(){t.tween=0,f&&f.call(d)},d=t.tween=r.to(e,l)};return e[a]=o,e.addEventListener("mousewheel",(function(){return s.tween&&s.tween.kill()&&(s.tween=0)})),s};le.op=ce;var Qe=function(){function e(t,n){i||e.register(r)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(1),B){var i,c,u,h,d,g,_,x,w,S,M,P,O,R,F,N,W,$,J,Q,ee,te,ne,re,me,be,Se,Me,Pe,De,ke,Oe,Re,Le,Be,ze,Fe,Ne,je,Ve=(t=he(q(t)||X(t)||t.nodeType?{trigger:t}:t,_e)).horizontal?le:ce,Ge=t,We=Ge.onUpdate,$e=Ge.toggleClass,Qe=Ge.id,et=Ge.onToggle,tt=Ge.onRefresh,nt=Ge.scrub,rt=Ge.trigger,it=Ge.pin,ot=Ge.pinSpacing,at=Ge.invalidateOnRefresh,st=Ge.anticipatePin,lt=Ge.onScrubComplete,ct=Ge.onSnapComplete,ut=Ge.once,ht=Ge.snap,dt=Ge.pinReparent,ft=!nt&&0!==nt,pt=f(t.scroller||o)[0],mt=r.core.getCache(pt),gt=U(pt),yt="pinType"in t?"fixed"===t.pinType:gt||"fixed"===j(pt,"pinType"),vt=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],_t=ft&&t.toggleActions.split(" "),bt="markers"in t?t.markers:_e.markers,xt=gt?0:parseFloat(ue(pt)["border"+Ve.p2+ae])||0,wt=this,St=t.onRefreshInit&&function(){return t.onRefreshInit(wt)},At=function(e,t,n){var r=n.d,i=n.d2,a=n.a;return(a=j(e,"getBoundingClientRect"))?function(){return a()[r]}:function(){return(t?o["inner"+i]:e["client"+i])||0}}(pt,gt,Ve),Et=function(e,t){return!t||~k.indexOf(e)?G(e):function(){return Xe}}(pt,gt);wt.media=T,st*=45,Ae.push(wt),wt.scroller=pt,wt.scroll=V(pt,Ve),d=wt.scroll(),wt.vars=t,n=n||t.animation,"refreshPriority"in t&&(A=1),mt.tweenScroll=mt.tweenScroll||{top:Ke(pt,ce),left:Ke(pt,le)},wt.tweenTo=i=mt.tweenScroll[Ve.p],n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.render(0,!0,!0),wt.animation=n.pause(),n.scrollTrigger=wt,(Oe=X(nt)&&nt)&&(ke=r.to(n,{ease:"power3",duration:Oe,onComplete:function(){return lt&&lt(wt)}})),Pe=0,Qe||(Qe=n.vars.id)),ht&&(Y(ht)||(ht={snapTo:ht}),"scrollBehavior"in l.style&&r.set(gt?[l,s]:pt,{scrollBehavior:"auto"}),u=Z(ht.snapTo)?ht.snapTo:"labels"===ht.snapTo?function(e){return function(t){return r.utils.snap(pe(e),t)}}(n):"labelsDirectional"===ht.snapTo?(Ne=n,function(e,t){var n,r=pe(Ne);if(r.sort((function(e,t){return e-t})),t.direction>0){for(n=0;n<r.length;n++)if(r[n]>=e)return r[n];return r.pop()}for(n=r.length;n--;)if(r[n]<=e)return r[n];return r[0]}):r.utils.snap(ht.snapTo),Re=ht.duration||{min:.1,max:2},Re=Y(Re)?p(Re.min,Re.max):p(Re,Re),Le=r.delayedCall(ht.delay||Oe/2||.1,(function(){if(Math.abs(wt.getVelocity())<10&&!v){var e=n&&!ft?n.totalProgress():wt.progress,t=(e-De)/(I()-m)*1e3||0,r=K(t/2)*t/.185,o=e+r,a=p(0,1,u(o,wt)),s=wt.scroll(),l=Math.round(_+a*R),c=i.tween;if(s<=x&&s>=_&&l!==s){if(c&&!c._initted&&c.data<=Math.abs(l-s))return;i(l,{duration:Re(K(.185*Math.max(K(o-e),K(a-e))/t/.05||0)),ease:ht.ease||"power3",data:Math.abs(l-s),onComplete:function(){Pe=De=n&&!ft?n.totalProgress():wt.progress,ct&&ct(wt)}},s,r*R,l-s-r*R)}}else wt.isActive&&Le.restart(!0)})).pause()),Qe&&(Ee[Qe]=wt),rt=wt.trigger=f(rt||it)[0],it=!0===it?rt:f(it)[0],q($e)&&($e={targets:rt,className:$e}),it&&(!1===ot||ot===oe||(ot=!(!ot&&"flex"===ue(it.parentNode).display)&&ie),wt.pin=it,!1!==t.force3D&&r.set(it,{force3D:!0}),(c=r.core.getCache(it)).spacer?F=c.pinState:(c.spacer=$=a.createElement("div"),$.setAttribute("class","pin-spacer"+(Qe?" pin-spacer-"+Qe:"")),c.pinState=F=Ze(it)),wt.spacer=$=c.spacer,Me=ue(it),re=Me[ot+Ve.os2],Q=r.getProperty(it),ee=r.quickSetter(it,Ve.a,se),He(it,$,Me),W=Ze(it)),bt&&(O=Y(bt)?he(bt,ve):ve,M=we("scroller-start",Qe,pt,Ve,O,0),P=we("scroller-end",Qe,pt,Ve,O,0,M),J=M["offset"+Ve.op.d2],w=we("start",Qe,pt,Ve,O,J),S=we("end",Qe,pt,Ve,O,J),yt||((je=gt?l:pt).style.position="absolute"===ue(je).position?"absolute":"relative",r.set([M,P],{force3D:!0}),be=r.quickSetter(M,Ve.a,se),Se=r.quickSetter(P,Ve.a,se))),wt.revert=function(e){var t=!1!==e||!wt.enabled,r=y;t!==h&&(t&&(ze=Math.max(wt.scroll(),wt.scroll.rec||0),Be=wt.progress,Fe=n&&n.progress()),w&&[w,S,M,P].forEach((function(e){return e.style.display=t?"none":"block"})),t&&(y=1),wt.update(t),y=r,it&&(t?function(e,t,n){if(qe(n),e.parentNode===t){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}}(it,$,F):(!dt||!wt.isActive)&&He(it,$,ue(it),me)),h=t)},wt.refresh=function(i){if(!y&&wt.enabled)if(it&&i&&L)ge(e,"scrollEnd",Ie);else{y=1,ke&&ke.pause(),at&&n&&n.progress(0).invalidate(),h||wt.revert();for(var o,a,s,c,u,f,p,m,v,b=At(),A=Et(),C=H(pt,Ve),T=0,D=0,k=t.end,O=t.endTrigger||rt,I=t.start||(0!==t.start&&rt?it?"0 0":"0 100%":0),B=rt&&Math.max(0,Ae.indexOf(wt))||0,z=B;z--;)(p=Ae[z].pin)&&(p===rt||p===it)&&Ae[z].revert();for(_=Ye(I,rt,b,Ve,wt.scroll(),w,M,wt,A,xt,yt,C)||(it?-.001:0),Z(k)&&(k=k(wt)),q(k)&&!k.indexOf("+=")&&(~k.indexOf(" ")?k=(q(I)?I.split(" ")[0]:"")+k:(T=xe(k.substr(2),b),k=q(I)?I:_+T,O=rt)),x=Math.max(_,Ye(k||(O?"100% 0":C),O,b,Ve,wt.scroll()+T,S,P,wt,A,xt,yt,C))||-.001,R=x-_||(_-=.01)&&.001,T=0,z=B;z--;)(p=(f=Ae[z]).pin)&&f.start-f._pinPush<_&&(o=f.end-f.start,p===rt&&(T+=o),p===it&&(D+=o));if(_+=T,x+=T,wt._pinPush=D,w&&T&&((o={})[Ve.a]="+="+T,r.set([w,S],o)),it)o=ue(it),c=Ve===ce,s=wt.scroll(),te=parseFloat(Q(Ve.a))+D,!C&&x>1&&((gt?l:pt).style["overflow-"+Ve.a]="scroll"),He(it,$,o),W=Ze(it),a=de(it,!0),m=yt&&V(pt,c?le:ce)(),ot&&((me=[ot+Ve.os2,R+D+se]).t=$,(z=ot===ie?fe(it,Ve)+R+D:0)&&me.push(Ve.d,z+se),qe(me),yt&&wt.scroll(ze)),yt&&((u={top:a.top+(c?s-_:m)+se,left:a.left+(c?m:s-_)+se,boxSizing:"border-box",position:"fixed"}).width=u.maxWidth=Math.ceil(a.width)+se,u.height=u.maxHeight=Math.ceil(a.height)+se,u.margin=u.marginTop=u.marginRight=u.marginBottom=u.marginLeft="0",u.padding=o.padding,u.paddingTop=o.paddingTop,u.paddingRight=o.paddingRight,u.paddingBottom=o.paddingBottom,u.paddingLeft=o.paddingLeft,N=function(e,t,n){for(var r,i=[],o=e.length,a=n?8:0;a<o;a+=2)r=e[a],i.push(r,r in t?t[r]:e[a+1]);return i.t=e.t,i}(F,u,dt)),n?(v=n._initted,E(1),n.progress(1,!0),ne=Q(Ve.a)-te+R+D,R!==ne&&N.splice(N.length-2,2),n.progress(0,!0),v||n.invalidate(),E(0)):ne=R;else if(rt&&wt.scroll())for(a=rt.parentNode;a&&a!==l;)a._pinOffset&&(_-=a._pinOffset,x-=a._pinOffset),a=a.parentNode;for(z=0;z<B;z++)(f=Ae[z].pin)&&(f===rt||f===it)&&Ae[z].revert(!1);wt.start=_,wt.end=x,(d=g=wt.scroll())<ze&&wt.scroll(ze),wt.revert(!1),y=0,n&&ft&&n._initted&&n.progress(Fe,!0).render(n.time(),!0,!0),Be!==wt.progress&&(ke&&n.totalProgress(Be,!0),wt.progress=Be,wt.update()),it&&ot&&($._pinOffset=Math.round(wt.progress*ne)),tt&&tt(wt)}},wt.getVelocity=function(){return(wt.scroll()-g)/(I()-m)*1e3||0},wt.update=function(e,t){var r,o,a,s,c,u=wt.scroll(),h=e?0:(u-_)/R,p=h<0?0:h>1?1:h||0,v=wt.progress;if(t&&(g=d,d=u,ht&&(De=Pe,Pe=n&&!ft?n.totalProgress():p)),st&&!p&&it&&!y&&!D&&L&&_<u+(u-g)/(I()-m)*st&&(p=1e-4),p!==v&&wt.enabled){if(s=(c=(r=wt.isActive=!!p&&p<1)!=(!!v&&v<1))||!!p!=!!v,wt.direction=p>v?1:-1,wt.progress=p,ft||(!ke||y||D?n&&n.totalProgress(p,!!y):(ke.vars.totalProgress=p,ke.invalidate().restart())),it)if(e&&ot&&($.style[ot+Ve.os2]=re),yt){if(s){if(a=!e&&p>v&&x+1>u&&u+1>=H(pt,Ve),dt)if(e||!r&&!a)Je(it,$);else{var b=de(it,!0),w=u-_;Je(it,l,b.top+(Ve===ce?w:0)+se,b.left+(Ve===ce?0:w)+se)}qe(r||a?N:W),ne!==R&&p<1&&r||ee(te+(1!==p||a?0:ne))}}else ee(te+ne*p);ht&&!i.tween&&!y&&!D&&Le.restart(!0),$e&&(c||ut&&p&&(p<1||!C))&&f($e.targets).forEach((function(e){return e.classList[r||ut?"add":"remove"]($e.className)})),We&&!ft&&!e&&We(wt),s&&!y?(o=p&&!v?0:1===p?1:1===v?2:3,ft&&(a=!c&&"none"!==_t[o+1]&&_t[o+1]||_t[o],n&&("complete"===a||"reset"===a||a in n)&&("complete"===a?n.pause().totalProgress(1):"reset"===a?n.restart(!0).pause():n[a]()),We&&We(wt)),!c&&C||(et&&c&&et(wt),vt[o]&&vt[o](wt),ut&&(1===p?wt.kill(!1,1):vt[o]=0),c||vt[o=1===p?1:3]&&vt[o](wt))):ft&&We&&!y&&We(wt)}Se&&(be(u+(M._isFlipped?1:0)),Se(u))},wt.enable=function(){wt.enabled||(wt.enabled=!0,ge(pt,"resize",Te),ge(pt,"scroll",Ce),St&&ge(e,"refreshInit",St),n&&n.add?r.delayedCall(.01,(function(){return _||x||wt.refresh()}))&&(R=.01)&&(_=x=0):wt.refresh())},wt.disable=function(t,n){if(wt.enabled&&(!1!==t&&wt.revert(),wt.enabled=wt.isActive=!1,n||ke&&ke.pause(),ze=0,c&&(c.uncache=1),St&&ye(e,"refreshInit",St),Le&&(Le.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!gt)){for(var r=Ae.length;r--;)if(Ae[r].scroller===pt&&Ae[r]!==wt)return;ye(pt,"resize",Te),ye(pt,"scroll",Ce)}},wt.kill=function(e,t){wt.disable(e,t),Qe&&delete Ee[Qe];var r=Ae.indexOf(wt);Ae.splice(r,1),r===b&&Ue>0&&b--,n&&(n.scrollTrigger=null,e&&n.render(-1),t||n.kill()),w&&[w,S,M,P].forEach((function(e){return e.parentNode.removeChild(e)})),it&&(c&&(c.uncache=1),r=0,Ae.forEach((function(e){return e.pin===it&&r++})),r||(c.spacer=0))},wt.enable()}else this.update=this.refresh=this.kill=z},e.register=function(t){if(!i&&(r=t||N(),F()&&window.document&&(o=window,a=document,s=a.documentElement,l=a.body),r&&(f=r.utils.toArray,p=r.utils.clamp,E=r.core.suppressOverwrites||z,r.core.globals("ScrollTrigger",e),l))){h=o.requestAnimationFrame||function(e){return setTimeout(e,16)},ge(o,"mousewheel",Ce),c=[o,a,s,l],ge(a,"scroll",Ce);var n,d=l.style,m=d.borderTop;d.borderTop="1px solid #000",n=de(l),ce.m=Math.round(n.top+ce.sc())||0,le.m=Math.round(n.left+le.sc())||0,m?d.borderTop=m:d.removeProperty("border-top"),g=setInterval(Me,200),r.delayedCall(.5,(function(){return D=0})),ge(a,"touchcancel",z),ge(l,"touchstart",z),me(ge,a,"pointerdown,touchstart,mousedown",(function(){return v=1})),me(ge,a,"pointerup,touchend,mouseup",(function(){return v=0})),_=r.utils.checkPrefix("transform"),Ge.push(_),i=I(),u=r.delayedCall(.2,Fe).pause(),S=[a,"visibilitychange",function(){var e=o.innerWidth,t=o.innerHeight;a.hidden?(x=e,w=t):x===e&&w===t||Te()},a,"DOMContentLoaded",Fe,o,"load",function(){return L||Fe()},o,"resize",Te],W(ge)}return i},e.defaults=function(e){for(var t in e)_e[t]=e[t]},e.kill=function(){B=0,Ae.slice(0).forEach((function(e){return e.kill(1)}))},e.config=function(e){"limitCallbacks"in e&&(C=!!e.limitCallbacks);var t=e.syncInterval;t&&clearInterval(g)||(g=t)&&setInterval(Me,t),"autoRefreshEvents"in e&&(W(ye)||W(ge,e.autoRefreshEvents||"none"),M=-1===(e.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=f(e)[0],r=O.indexOf(n),i=U(n);~r&&O.splice(r,i?6:2),i?k.unshift(o,t,l,t,s,t):k.unshift(n,t)},e.matchMedia=function(e){var t,n,r,i,a;for(n in e)r=ke.indexOf(n),i=e[n],T=n,"all"===n?i():(t=o.matchMedia(n))&&(t.matches&&(a=i()),~r?(ke[r+1]=J(ke[r+1],i),ke[r+2]=J(ke[r+2],a)):(r=ke.length,ke.push(n,i,a),t.addListener?t.addListener(Oe):t.addEventListener("change",Oe)),ke[r+3]=t.matches),T=0;return ke},e.clearMatchMedia=function(e){e||(ke.length=0),(e=ke.indexOf(e))>=0&&ke.splice(e,4)},e}();Qe.version="3.6.0",Qe.saveStyles=function(e){return e?f(e).forEach((function(e){if(e&&e.style){var t=Le.indexOf(e);t>=0&&Le.splice(t,4),Le.push(e,e.style.cssText,r.core.getCache(e),T)}})):Le},Qe.revert=function(e,t){return ze(!e,t)},Qe.create=function(e,t){return new Qe(e,t)},Qe.refresh=function(e){return e?Te():Fe(!0)},Qe.update=je,Qe.maxScroll=function(e,t){return H(e,t?le:ce)},Qe.getScrollFunc=function(e,t){return V(f(e)[0],t?le:ce)},Qe.getById=function(e){return Ee[e]},Qe.getAll=function(){return Ae.slice(0)},Qe.isScrolling=function(){return!!L},Qe.addEventListener=function(e,t){var n=Pe[e]||(Pe[e]=[]);~n.indexOf(t)||n.push(t)},Qe.removeEventListener=function(e,t){var n=Pe[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},Qe.batch=function(e,t){var n,i=[],o={},a=t.interval||.016,s=t.batchMax||1e9,l=function(e,t){var n=[],i=[],o=r.delayedCall(a,(function(){t(n,i),n=[],i=[]})).pause();return function(e){n.length||o.restart(!0),n.push(e.trigger),i.push(e),s<=n.length&&o.progress(1)}};for(n in t)o[n]="on"===n.substr(0,2)&&Z(t[n])&&"onRefreshInit"!==n?l(0,t[n]):t[n];return Z(s)&&(s=s(),ge(Qe,"refresh",(function(){return s=t.batchMax()}))),f(e).forEach((function(e){var t={};for(n in o)t[n]=o[n];t.trigger=e,i.push(Qe.create(t))})),i},Qe.sort=function(e){return Ae.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},N()&&r.registerPlugin(Qe)},8206:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=/(^\s+|\s+$)/g,i=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function o(e,t,n){for(var r=e.firstChild,i=[];r;)3===r.nodeType?i.push.apply(i,a((r.nodeValue+"").replace(/^\n+/g,"").replace(/\s+/g," "),t,n)):"br"===(r.nodeName+"").toLowerCase()?i[i.length-1]+="<br>":i.push(r.outerHTML),r=r.nextSibling;return i}function a(e,t,n){if(e+="",n&&(e=e.replace(r,"")),t&&""!==t)return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var o,a,s=[],l=e.length,c=0;c<l;c++)((a=e.charAt(c)).charCodeAt(0)>=55296&&a.charCodeAt(0)<=56319||e.charCodeAt(c+1)>=65024&&e.charCodeAt(c+1)<=65039)&&(o=((e.substr(c,12).split(i)||[])[1]||"").length||2,a=e.substr(c,o),s.emoji=1,c+=o-1),s.push(">"===a?"&gt;":"<"===a?"&lt;":a);return s}var s,l,c={version:"3.6.0",name:"text",init:function(e,t,n){var r,i,a,s,c,u,h,d,f=e.nodeName.toUpperCase(),p=this;if(p.svg=e.getBBox&&("TEXT"===f||"TSPAN"===f),!("innerHTML"in e)&&!p.svg)return!1;if(p.target=e,"object"!=typeof t&&(t={value:t}),"value"in t){for(p.delimiter=t.delimiter||"",a=o(e,p.delimiter),l||(l=document.createElement("div")),l.innerHTML=t.value,i=o(l,p.delimiter),p.from=n._from,p.from&&(f=a,a=i,i=f),p.hasClass=!(!t.newClass&&!t.oldClass),p.newClass=t.newClass,p.oldClass=t.oldClass,r=(f=a.length-i.length)<0?a:i,p.fillChar=t.fillChar||(t.padSpace?"&nbsp;":""),f<0&&(f=-f);--f>-1;)r.push(p.fillChar);if("diff"===t.type){for(s=0,c=[],u=[],h="",f=0;f<i.length;f++)(d=i[f])===a[f]?h+=d:(c[s]=h+d,u[s++]=h+a[f],h="");i=c,a=u,h&&(i.push(h),a.push(h))}t.speed&&n.duration(Math.min(.05/t.speed*r.length,t.maxDuration||9999)),this.original=a,this.text=i,this._props.push("text")}else p.text=p.original=[""]},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var n,r,i,o=t.text,a=t.hasClass,s=t.newClass,l=t.oldClass,c=t.delimiter,u=t.target,h=t.fillChar,d=t.original,f=o.length,p=e*f+.5|0;a?(r=l&&p!==f,i=((n=s&&p)?"<span class='"+s+"'>":"")+o.slice(0,p).join(c)+(n?"</span>":"")+(r?"<span class='"+l+"'>":"")+c+d.slice(p).join(c)+(r?"</span>":"")):i=o.slice(0,p).join(c)+c+d.slice(p).join(c),t.svg?u.textContent=i:u.innerHTML="&nbsp;"===h&&~i.indexOf("  ")?i.split("  ").join("&nbsp;&nbsp;"):i}};c.splitInnerHTML=o,c.emojiSafeSplit=a,c.getText=function e(t){var n=t.nodeType,r="";if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=e(t)}else if(3===n||4===n)return t.nodeValue;return r},(s||"undefined"!=typeof window&&(s=window.gsap)&&s.registerPlugin&&s)&&s.registerPlugin(c)},5317:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{l1:()=>Gt,Fo:()=>mn,p8:()=>_n,bJ:()=>bn,Wy:()=>ot,Ok:()=>Se,SI:()=>ee,d4:()=>te,r9:()=>G,m2:()=>q,Ks:()=>cn,bQ:()=>re,fS:()=>Ae,JV:()=>pn,kr:()=>Pt,UI:()=>mt,if:()=>Yt,$i:()=>ge,xr:()=>Dt,Fc:()=>I,Pr:()=>Ee,lC:()=>ce,S5:()=>an,DY:()=>we});var o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A,E,M,C,T,P,D,k,O,I={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},R={duration:.5,overwrite:!1,delay:0},L=1e8,B=1e-8,z=2*Math.PI,F=z/4,N=0,U=Math.sqrt,j=Math.cos,V=Math.sin,G=function(e){return"string"==typeof e},H=function(e){return"function"==typeof e},W=function(e){return"number"==typeof e},q=function(e){return void 0===e},Z=function(e){return"object"==typeof e},X=function(e){return!1!==e},Y=function(){return"undefined"!=typeof window},$=function(e){return H(e)||G(e)},J="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},K=Array.isArray,Q=/(?:-?\.?\d|\.)+/gi,ee=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,te=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ne=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,re=/[+-]=-?[.\d]+/,ie=/[#\-+.]*\b[a-z\d-=+%.]+/gi,oe=/[\d.+\-=]+(?:e[-+]\d*)*/i,ae={},se={},le=function(e){return(se=Re(e,ae))&&_n},ce=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ue=function(e,t){return!t&&console.warn(e)},he=function(e,t){return e&&(ae[e]=t)&&se&&(se[e]=t)||ae},de=function(){return 0},fe={},pe=[],me={},ge={},ye={},ve=30,_e=[],be="",xe=function(e){var t,n,r=e[0];if(Z(r)||H(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=_e.length;n--&&!_e[n].targetTest(r););t=_e[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Gt(e[n],t)))||e.splice(n,1);return e},we=function(e){return e._gsap||xe(lt(e))[0]._gsap},Se=function(e,t,n){return(n=e[t])&&H(n)?e[t]():q(n)&&e.getAttribute&&e.getAttribute(t)||n},Ae=function(e,t){return(e=e.split(",")).forEach(t)||e},Ee=function(e){return Math.round(1e5*e)/1e5||0},Me=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Ce=function(e,t,n){var r,i=W(e[1]),o=(i?2:1)+(t<2?0:1),a=e[o];if(i&&(a.duration=e[1]),a.parent=n,t){for(r=a;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=X(n.vars.inherit)&&n.parent;a.immediateRender=X(r.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return a},Te=function(){var e,t,n=pe.length,r=pe.slice(0);for(me={},pe.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Pe=function(e,t,n,r){pe.length&&Te(),e.render(t,n,r),pe.length&&Te()},De=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(ie).length<2?t:G(e)?e.trim():e},ke=function(e){return e},Oe=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Ie=function(e,t){for(var n in t)n in e||"duration"===n||"ease"===n||(e[n]=t[n])},Re=function(e,t){for(var n in t)e[n]=t[n];return e},Le=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=Z(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Be=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},ze=function(e){var t=e.parent||a,n=e.keyframes?Ie:Oe;if(X(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Fe=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Ne=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Ue=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},je=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Ve=function e(t){return!t||t._ts&&e(t.parent)},Ge=function(e){return e._repeat?He(e._tTime,e=e.duration()+e._rDelay)*e:0},He=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},We=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},qe=function(e){return e._end=Ee(e._start+(e._tDur/Math.abs(e._ts||e._rts||B)||0))},Ze=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Ee(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),qe(e),n._dirty||Ue(n,e)),e},Xe=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=We(e.rawTime(),t),(!t._dur||it(0,t.totalDuration(),n)-t._tTime>B)&&t.render(n,!0)),Ue(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Ye=function(e,t,n,r){return t.parent&&Ne(t),t._start=Ee(n+t._delay),t._end=Ee(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=e[r];if(i)for(o=t[i];a&&a[i]>o;)a=a._prev;a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),e._recent=t,r||Xe(e,t),e},$e=function(e,t){return(ae.ScrollTrigger||ce("scrollTrigger",t))&&ae.ScrollTrigger.create(t,e)},Je=function(e,t,n,r){return $t(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&h!==Dt.frame?(pe.push(e),e._lazy=[t,r],1):void 0:1},Ke=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Qe=function(e,t,n,r){var i=e._repeat,o=Ee(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:Ee(o*(i+1)+e._rDelay*i):o,a&&!r?Ze(e,e._tTime=e._tDur*a):e.parent&&qe(e),n||Ue(e.parent,e),e},et=function(e){return e instanceof Wt?Ue(e):Qe(e,e._dur)},tt={_start:0,endTime:de},nt=function e(t,n){var r,i,o=t.labels,a=t._recent||tt,s=t.duration()>=L?a.endTime(!1):t._dur;return G(n)&&(isNaN(n)||n in o)?"<"===(r=n.charAt(0))||">"===r?("<"===r?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0):(r=n.indexOf("="))<0?(n in o||(o[n]=s),o[n]):(i=+(n.charAt(r-1)+n.substr(r+1)),r>1?e(t,n.substr(0,r-1))+i:s+i):null==n?s:+n},rt=function(e,t){return e||0===e?t(e):t},it=function(e,t,n){return n<e?e:n>t?t:n},ot=function(e){if("string"!=typeof e)return"";var t=oe.exec(e);return t?e.substr(t.index+t[0].length):""},at=[].slice,st=function(e,t){return e&&Z(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Z(e[0]))&&!e.nodeType&&e!==s},lt=function(e,t){return!G(e)||t||!l&&kt()?K(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return G(e)&&!t||st(e,1)?(r=n).push.apply(r,lt(e)):n.push(e)}))||n}(e,t):st(e)?at.call(e,0):e?[e]:[]:at.call(c.querySelectorAll(e),0)},ct=function(e){return e.sort((function(){return.5-Math.random()}))},ut=function(e){if(H(e))return e;var t=Z(e)?e:{each:e},n=Ft(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,l=t.axis,c=r,u=r;return G(r)?c=u={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(c=r[0],u=r[1]),function(e,a,h){var d,f,p,m,g,y,v,_,b,x=(h||t).length,w=o[x];if(!w){if(!(b="auto"===t.grid?0:(t.grid||[1,L])[1])){for(v=-L;v<(v=h[b++].getBoundingClientRect().left)&&b<x;);b--}for(w=o[x]=[],d=s?Math.min(b,x)*c-.5:r%b,f=s?x*u/b-.5:r/b|0,v=0,_=L,y=0;y<x;y++)p=y%b-d,m=f-(y/b|0),w[y]=g=l?Math.abs("y"===l?m:p):U(p*p+m*m),g>v&&(v=g),g<_&&(_=g);"random"===r&&ct(w),w.max=v-_,w.min=_,w.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(b>x?x-1:l?"y"===l?x/b:b:Math.max(b,x/b))||0)*("edges"===r?-1:1),w.b=x<0?i-x:i,w.u=ot(t.amount||t.each)||0,n=n&&x<0?Bt(n):n}return x=(w[e]-w.min)/w.max||0,Ee(w.b+(n?n(x):x)*w.v)+w.u}},ht=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/e)*e*t;return(r-r%1)/t+(W(n)?0:ot(n))}},dt=function(e,t){var n,r,i=K(e);return!i&&Z(e)&&(n=i=e.radius||L,e.values?(e=lt(e.values),(r=!W(e[0]))&&(n*=n)):e=ht(e.increment)),rt(t,i?H(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,o,a=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),l=L,c=0,u=e.length;u--;)(i=r?(i=e[u].x-a)*i+(o=e[u].y-s)*o:Math.abs(e[u]-a))<l&&(l=i,c=u);return c=!n||l<=n?e[c]:t,r||c===t||W(t)?c:c+ot(t)}:ht(e))},ft=function(e,t,n,r){return rt(K(e)?!t:!0===n?!!(n=0):!r,(function(){return K(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},pt=function(e,t,n){return rt(n,(function(n){return e[~~t(n)]}))},mt=function(e){for(var t,n,r,i,o=0,a="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?ie:Q),a+=e.substr(o,t-o)+ft(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+e.substr(o,e.length-o)},gt=function(e,t,n,r,i){var o=t-e,a=r-n;return rt(i,(function(t){return n+((t-e)/o*a||0)}))},yt=function(e,t,n){var r,i,o,a=e.labels,s=L;for(r in a)(i=a[r]-t)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},vt=function(e,t,n){var r,i,o=e.vars,a=o[t];if(a)return r=o[t+"Params"],i=o.callbackScope||e,n&&pe.length&&Te(),r?a.apply(i,r):a.call(i)},_t=function(e){return Ne(e),e.progress()<1&&vt(e,"onInterrupt"),e},bt=function(e){var t=(e=!e.name&&e.default||e).name,n=H(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:de,render:un,add:Xt,kill:dn,modifier:hn,rawVars:0},o={targetTest:0,get:0,getSetter:an,aliases:{},register:0};if(kt(),e!==r){if(ge[t])return;Oe(r,Oe(Be(e,i),o)),Re(r.prototype,Re(i,Be(e,o))),ge[r.prop=t]=r,e.targetTest&&(_e.push(r),fe[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}he(t,r),e.register&&e.register(_n,r,mn)},xt=255,wt={aqua:[0,xt,xt],lime:[0,xt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xt],navy:[0,0,128],white:[xt,xt,xt],olive:[128,128,0],yellow:[xt,xt,0],orange:[xt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xt,0,0],pink:[xt,192,203],cyan:[0,xt,xt],transparent:[xt,xt,xt,0]},St=function(e,t,n){return(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*xt+.5|0},At=function(e,t,n){var r,i,o,a,s,l,c,u,h,d,f=e?W(e)?[e>>16,e>>8&xt,e&xt]:0:wt.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),wt[e])f=wt[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&xt,f&xt,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&xt,e&xt]}else if("hsl"===e.substr(0,3))if(f=d=e.match(Q),t){if(~e.indexOf("="))return f=e.match(ee),n&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,s=+f[1]/100,r=2*(l=+f[2]/100)-(i=l<=.5?l*(s+1):l+s-l*s),f.length>3&&(f[3]*=1),f[0]=St(a+1/3,r,i),f[1]=St(a,r,i),f[2]=St(a-1/3,r,i);else f=e.match(Q)||wt.transparent;f=f.map(Number)}return t&&!d&&(r=f[0]/xt,i=f[1]/xt,o=f[2]/xt,l=((c=Math.max(r,i,o))+(u=Math.min(r,i,o)))/2,c===u?a=s=0:(h=c-u,s=l>.5?h/(2-c-u):h/(c+u),a=c===r?(i-o)/h+(i<o?6:0):c===i?(o-r)/h+2:(r-i)/h+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*s+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},Et=function(e){var t=[],n=[],r=-1;return e.split(Ct).forEach((function(e){var i=e.match(te)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},Mt=function(e,t,n){var r,i,o,a,s="",l=(e+s).match(Ct),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=At(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=Et(e),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=e.replace(Ct,"1").split(te)).length-1;u<a;u++)s+=i[u]+(~r.indexOf(u)?l.shift()||c+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(a=(i=e.split(Ct)).length-1;u<a;u++)s+=i[u]+l[u];return s+i[a]},Ct=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in wt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Tt=/hsl[a]?\(/,Pt=function(e){var t,n=e.join(" ");if(Ct.lastIndex=0,Ct.test(n))return t=Tt.test(n),e[1]=Mt(e[1],t),e[0]=Mt(e[0],t,Et(e[1])),!0},Dt=(b=Date.now,x=500,w=33,S=b(),A=S,M=E=1e3/240,T=function e(t){var n,r,i,o,a=b()-A,s=!0===t;if(a>x&&(S+=a-w),((n=(i=(A+=a)-S)-M)>0||s)&&(o=++y.frame,v=i-1e3*y.time,y.time=i/=1e3,M+=n+(n>=E?4:E-n),r=1),s||(p=m(e)),r)for(_=0;_<C.length;_++)C[_](i,v,o,t)},y={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(e){return v/(1e3/(e||60))},wake:function(){u&&(!l&&Y()&&(s=l=window,c=s.document||{},ae.gsap=_n,(s.gsapVersions||(s.gsapVersions=[])).push(_n.version),le(se||s.GreenSockGlobals||!s.gsap&&s||{}),g=s.requestAnimationFrame),p&&y.sleep(),m=g||function(e){return setTimeout(e,M-1e3*y.time+1|0)},f=1,T(2))},sleep:function(){(g?s.cancelAnimationFrame:clearTimeout)(p),f=0,m=de},lagSmoothing:function(e,t){x=e||1e8,w=Math.min(t,x,0)},fps:function(e){E=1e3/(e||240),M=1e3*y.time+E},add:function(e){C.indexOf(e)<0&&C.push(e),kt()},remove:function(e){var t;~(t=C.indexOf(e))&&C.splice(t,1)&&_>=t&&_--},_listeners:C=[]}),kt=function(){return!f&&Dt.wake()},Ot={},It=/^[\d.\-M][\d.\-,\s]/,Rt=/["']/g,Lt=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),a=o[0],s=1,l=o.length;s<l;s++)n=o[s],t=s!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(Rt,"").trim():+r,a=n.substr(t+1).trim();return i},Bt=function(e){return function(t){return 1-e(1-t)}},zt=function e(t,n){for(var r,i=t._first;i;)i instanceof Wt?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ft=function(e,t){return e&&(H(e)?e:Ot[e]||function(e){var t,n,r,i,o=(e+"").split("("),a=Ot[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[Lt(o[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(De)):Ot._CE&&It.test(e)?Ot._CE("",e):a}(e))||t},Nt=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,o={easeIn:t,easeOut:n,easeInOut:r};return Ae(e,(function(e){for(var t in Ot[e]=ae[e]=o,Ot[i=e.toLowerCase()]=n,o)Ot[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Ot[e+"."+t]=o[t]})),o},Ut=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},jt=function e(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),a=o/z*(Math.asin(1/i)||0),s=function(e){return 1===e?1:i*Math.pow(2,-10*e)*V((e-a)*o)+1},l="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Ut(s);return o=z/o,l.config=function(n,r){return e(t,n,r)},l},Vt=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Ut(r);return i.config=function(n){return e(t,n)},i};Ae("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Nt(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Ot.Linear.easeNone=Ot.none=Ot.Linear.easeIn,Nt("Elastic",jt("in"),jt("out"),jt()),P=7.5625,k=1/(D=2.75),Nt("Bounce",(function(e){return 1-O(1-e)}),O=function(e){return e<k?P*e*e:e<.7272727272727273?P*Math.pow(e-1.5/D,2)+.75:e<.9090909090909092?P*(e-=2.25/D)*e+.9375:P*Math.pow(e-2.625/D,2)+.984375}),Nt("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Nt("Circ",(function(e){return-(U(1-e*e)-1)})),Nt("Sine",(function(e){return 1===e?1:1-j(e*F)})),Nt("Back",Vt("in"),Vt("out"),Vt()),Ot.SteppedEase=Ot.steps=ae.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*it(0,.99999999,e)|0)+i)*n}}},R.ease=Ot["quad.out"],Ae("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return be+=e+","+e+"Params,"}));var Gt=function(e,t){this.id=N++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Se,this.set=t?t.getSetter:an},Ht=function(){function e(e,t){var n=e.parent||a;this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Qe(this,+e.duration,1,1),this.data=e.data,f||Dt.wake(),n&&Ye(n,this,t||0===t?t:n._time,1),e.reversed&&this.reverse(),e.paused&&this.paused(!0)}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Qe(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(kt(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ze(this,e),!n._dp||n.parent||Xe(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Ye(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===B||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Pe(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Ge(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Ge(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?He(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?We(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,je(this.totalTime(it(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(kt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=B)&&Math.abs(this._zTime)!==B))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Ye(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(X(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?We(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,et(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,et(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(nt(this,e),X(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,X(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-B))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=H(e)?e:ke,i=function(){var e=t.then;t.then=null,H(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){_t(this)},e}();Oe(Ht.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Wt=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t,n)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=X(t.sortChildren),i.parent&&Xe(i.parent,r(i)),t.scrollTrigger&&$e(r(i),t.scrollTrigger),i}i(t,e);var n=t.prototype;return n.to=function(e,t,n){return new en(e,Ce(arguments,0,this),nt(this,W(t)?arguments[3]:n)),this},n.from=function(e,t,n){return new en(e,Ce(arguments,1,this),nt(this,W(t)?arguments[3]:n)),this},n.fromTo=function(e,t,n,r){return new en(e,Ce(arguments,2,this),nt(this,W(t)?arguments[4]:r)),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,ze(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new en(e,t,nt(this,n),1),this},n.call=function(e,t,n){return Ye(this,en.delayedCall(0,e,t),nt(this,n))},n.staggerTo=function(e,t,n,r,i,o,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new en(e,n,nt(this,i)),this},n.staggerFrom=function(e,t,n,r,i,o,a){return n.runBackwards=1,ze(n).immediateRender=X(n.immediateRender),this.staggerTo(e,t,n,r,i,o,a)},n.staggerFromTo=function(e,t,n,r,i,o,a,s){return r.startAt=n,ze(r).immediateRender=X(r.immediateRender),this.staggerTo(e,t,r,i,o,a,s)},n.render=function(e,t,n){var r,i,o,s,l,c,u,h,d,f,p,m,g=this._time,y=this._dirty?this.totalDuration():this._tDur,v=this._dur,_=this!==a&&e>y-B&&e>=0?y:e<B?0:e,b=this._zTime<0!=e<0&&(this._initted||!v);if(_!==this._tTime||n||b){if(g!==this._time&&v&&(_+=this._time-g,e+=this._time-g),r=_,d=this._start,c=!(h=this._ts),b&&(v||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,l=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*l+e,t,n);if(r=Ee(_%l),_===y?(s=this._repeat,r=v):((s=~~(_/l))&&s===_/l&&(r=v,s--),r>v&&(r=v)),f=He(this._tTime,l),!g&&this._tTime&&f!==s&&(f=s),p&&1&s&&(r=v-r,m=1),s!==f&&!this._lock){var x=p&&1&f,w=x===(p&&1&s);if(s<f&&(x=!x),g=x?0:v,this._lock=1,this.render(g||(m?0:Ee(s*l)),t,!v)._lock=0,!t&&this.parent&&vt(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),g!==this._time||c!==!this._ts)return this;if(v=this._dur,y=this._tDur,w&&(this._lock=2,g=x?v:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;zt(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Ee(g),Ee(r)))&&(_-=r-(r=u._start)),this._tTime=_,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&(r||!v&&e>=0)&&!t&&vt(this,"onStart"),r>=g&&e>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!c){u=0,o&&(_+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var S=e<0?e:r;i;){if(o=i._prev,(i._act||S<=i._end)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(S-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(S-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!c){u=0,o&&(_+=this._zTime=S?-1e-8:B);break}}i=o}}if(u&&!t&&(this.pause(),u.render(r>=g?0:-1e-8)._zTime=r>=g?1:-1,this._ts))return this._start=d,qe(this),this.render(e,t,n);this._onUpdate&&!t&&vt(this,"onUpdate",!0),(_===y&&y>=this.totalDuration()||!_&&g)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((e||!v)&&(_===y&&this._ts>0||!_&&this._ts<0)&&Ne(this,1),t||e<0&&!g||!_&&!g||(vt(this,_===y?"onComplete":"onReverseComplete",!0),this._prom&&!(_<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(W(t)||(t=nt(this,t)),!(e instanceof Ht)){if(K(e))return e.forEach((function(e){return n.add(e,t)})),this;if(G(e))return this.addLabel(e,t);if(!H(e))return this;e=en.delayedCall(0,e)}return this!==e?Ye(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-L);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof en?t&&i.push(o):(n&&i.push(o),e&&i.push.apply(i,o.getChildren(!0,t,n)))),o=o._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return G(e)?this.removeLabel(e):H(e)?this.killTweensOf(e):(Fe(this,e),e===this._recent&&(this._recent=this._last),Ue(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ee(Dt.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=nt(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=en.delayedCall(0,t||de,n);return r.data="isPause",this._hasPause=1,Ye(this,r,nt(this,e))},n.removePause=function(e){var t=this._first;for(e=nt(this,e);t;)t._start===e&&"isPause"===t.data&&Ne(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)qt!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=lt(e),o=this._first,a=W(t);o;)o instanceof en?Me(o._targets,i)&&(a?(!qt||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n=this,r=nt(n,e),i=t,o=i.startAt,a=i.onStart,s=i.onStartParams,l=i.immediateRender,c=en.to(n,Oe({ease:"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||B,onStart:function(){n.pause();var e=t.duration||Math.abs((r-n._time)/n.timeScale());c._dur!==e&&Qe(c,e,0,1).render(c._time,!0,!0),a&&a.apply(c,s||[])}},t));return l?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,Oe({startAt:{time:nt(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),yt(this,nt(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),yt(this,nt(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+B)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return Ue(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Ue(this)},n.totalDuration=function(e){var t,n,r,i=0,o=this,s=o._last,l=L;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>l&&o._sort&&s._ts&&!o._lock?(o._lock=1,Ye(o,s,n-s._delay,1)._lock=0):l=n,n<0&&s._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),l=0),s._end>i&&s._ts&&(i=s._end),s=t;Qe(o,o===a&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(a._ts&&(Pe(a,We(e,a)),h=Dt.frame),Dt.frame>=ve){ve+=I.autoSleep||120;var t=a._first;if((!t||!t._ts)&&I.autoSleep&&Dt._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Dt.sleep()}}},t}(Ht);Oe(Wt.prototype,{_lock:0,_hasPause:0,_forcing:0});var qt,Zt=function(e,t,n,r,i,o,a){var s,l,c,u,h,d,f,p,m=new mn(this._pt,e,t,0,1,cn,null,i),g=0,y=0;for(m.b=n,m.e=r,n+="",(f=~(r+="").indexOf("random("))&&(r=mt(r)),o&&(o(p=[n,r],e,t),n=p[0],r=p[1]),l=n.match(ne)||[];s=ne.exec(r);)u=s[0],h=r.substring(g,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[y++]&&(d=parseFloat(l[y-1])||0,m._pt={_next:m._pt,p:h||1===y?h:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:c&&c<4?Math.round:0},g=ne.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(re.test(r)||f)&&(m.e=0),this._pt=m,m},Xt=function(e,t,n,r,i,o,a,s,l){H(r)&&(r=r(i||0,e,o));var c,u=e[t],h="get"!==n?n:H(u)?l?e[t.indexOf("set")||!H(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,d=H(u)?l?rn:nn:tn;if(G(r)&&(~r.indexOf("random(")&&(r=mt(r)),"="===r.charAt(1)&&(r=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(ot(h)||0))),h!==r)return isNaN(h*r)?(!u&&!(t in e)&&ce(t,r),Zt.call(this,e,t,h,r,d,s||I.stringFilter,l)):(c=new mn(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof u?ln:sn,0,d),l&&(c.fp=l),a&&c.modifier(a,this,e),this._pt=c)},Yt=function(e,t,n,r,i,o){var a,s,l,c;if(ge[e]&&!1!==(a=new ge[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(H(e)&&(e=Jt(e,i,t,n,r)),!Z(e)||e.style&&e.nodeType||K(e)||J(e))return G(e)?Jt(e,i,t,n,r):e;var o,a={};for(o in e)a[o]=Jt(e[o],i,t,n,r);return a}(t[e],r,i,o,n),n,r,o)&&(n._pt=s=new mn(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==d))for(l=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)l[a._props[c]]=s;return a},$t=function e(t,n){var r,i,s,l,c,u,h,d,f,p,m,g,y,v=t.vars,_=v.ease,b=v.startAt,x=v.immediateRender,w=v.lazy,S=v.onUpdate,A=v.onUpdateParams,E=v.callbackScope,M=v.runBackwards,C=v.yoyoEase,T=v.keyframes,P=v.autoRevert,D=t._dur,k=t._startAt,O=t._targets,I=t.parent,L=I&&"nested"===I.data?I.parent._targets:O,z="auto"===t._overwrite&&!o,F=t.timeline;if(F&&(!T||!_)&&(_="none"),t._ease=Ft(_,R.ease),t._yEase=C?Bt(Ft(!0===C?_:C,R.ease)):0,C&&t._yoyo&&!t._repeat&&(C=t._yEase,t._yEase=t._ease,t._ease=C),!F){if(g=(d=O[0]?we(O[0]).harness:0)&&v[d.prop],r=Be(v,fe),k&&k.render(-1,!0).kill(),b){if(Ne(t._startAt=en.set(O,Oe({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:X(w),startAt:null,delay:0,onUpdate:S,onUpdateParams:A,callbackScope:E,stagger:0},b))),x)if(n>0)P||(t._startAt=0);else if(D&&!(n<0&&k))return void(n&&(t._zTime=n))}else if(M&&D)if(k)!P&&(t._startAt=0);else if(n&&(x=!1),s=Oe({overwrite:!1,data:"isFromStart",lazy:x&&X(w),immediateRender:x,stagger:0,parent:I},r),g&&(s[d.prop]=g),Ne(t._startAt=en.set(O,s)),x){if(!n)return}else e(t._startAt,B);for(t._pt=0,w=D&&X(w)||w&&!D,i=0;i<O.length;i++){if(h=(c=O[i])._gsap||xe(O)[i]._gsap,t._ptLookup[i]=p={},me[h.id]&&pe.length&&Te(),m=L===O?i:L.indexOf(c),d&&!1!==(f=new d).init(c,g||r,t,m,L)&&(t._pt=l=new mn(t._pt,c,f.name,0,1,f.render,f,0,f.priority),f._props.forEach((function(e){p[e]=l})),f.priority&&(u=1)),!d||g)for(s in r)ge[s]&&(f=Yt(s,r,t,m,c,L))?f.priority&&(u=1):p[s]=l=Xt.call(t,c,s,"get",r[s],m,L,0,v.stringFilter);t._op&&t._op[i]&&t.kill(c,t._op[i]),z&&t._pt&&(qt=t,a.killTweensOf(c,p,t.globalTime(0)),y=!t.parent,qt=0),t._pt&&w&&(me[h.id]=1)}u&&pn(t),t._onInit&&t._onInit(t)}t._from=!F&&!!v.runBackwards,t._onUpdate=S,t._initted=(!t._op||t._pt)&&!y},Jt=function(e,t,n,r,i){return H(e)?e.call(t,n,r,i):G(e)&&~e.indexOf("random(")?mt(e):e},Kt=be+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Qt=(Kt+",id,stagger,delay,duration,paused,scrollTrigger").split(","),en=function(e){function t(t,n,i,s){var l;"number"==typeof n&&(i.duration=n,n=i,i=null);var c,u,h,d,f,p,m,g,y=(l=e.call(this,s?n:ze(n),i)||this).vars,v=y.duration,_=y.delay,b=y.immediateRender,x=y.stagger,w=y.overwrite,S=y.keyframes,A=y.defaults,E=y.scrollTrigger,M=y.yoyoEase,C=l.parent,T=(K(t)||J(t)?W(t[0]):"length"in n)?[t]:lt(t);if(l._targets=T.length?xe(T):ue("GSAP target "+t+" not found. https://greensock.com",!I.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=w,S||x||$(v)||$(_)){if(n=l.vars,(c=l.timeline=new Wt({data:"nested",defaults:A||{}})).kill(),c.parent=c._dp=r(l),c._start=0,S)Oe(c.vars.defaults,{ease:"none"}),S.forEach((function(e){return c.to(T,e,">")}));else{if(d=T.length,m=x?ut(x):de,Z(x))for(f in x)~Kt.indexOf(f)&&(g||(g={}),g[f]=x[f]);for(u=0;u<d;u++){for(f in h={},n)Qt.indexOf(f)<0&&(h[f]=n[f]);h.stagger=0,M&&(h.yoyoEase=M),g&&Re(h,g),p=T[u],h.duration=+Jt(v,r(l),u,p,T),h.delay=(+Jt(_,r(l),u,p,T)||0)-l._delay,!x&&1===d&&h.delay&&(l._delay=_=h.delay,l._start+=_,h.delay=0),c.to(p,h,m(u,p,T))}c.duration()?v=_=0:l.timeline=0}v||l.duration(v=c.duration())}else l.timeline=0;return!0!==w||o||(qt=r(l),a.killTweensOf(T),qt=0),C&&Xe(C,r(l)),(b||!v&&!S&&l._start===Ee(C._time)&&X(b)&&Ve(r(l))&&"nested"!==C.data)&&(l._tTime=-1e-8,l.render(Math.max(0,-_))),E&&$e(r(l),E),l}i(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,o,a,s,l,c,u,h,d=this._time,f=this._tDur,p=this._dur,m=e>f-B&&e>=0?f:e<B?0:e;if(p){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(r=m,u=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=Ee(m%a),m===f?(o=this._repeat,r=p):((o=~~(m/a))&&o===m/a&&(r=p,o--),r>p&&(r=p)),(l=this._yoyo&&1&o)&&(h=this._yEase,r=p-r),s=He(this._tTime,a),r===d&&!n&&this._initted)return this;o!==s&&(u&&this._yEase&&zt(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(Ee(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Je(this,e<0?e:r,n,t))return this._tTime=0,this;if(p!==this._dur)return this.render(e,t,n)}for(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(r/p),this._from&&(this.ratio=c=1-c),r&&!d&&!t&&vt(this,"onStart"),i=this._pt;i;)i.r(c,i.d),i=i._next;u&&u.render(e<0?e:!r&&l?-1e-8:u._dur*c,t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),vt(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!t&&this.parent&&vt(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!p)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Ne(this,1),t||e<0&&!d||!m&&!d||(vt(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,o,a,s=e.ratio,l=t<0||!t&&(!e._start&&Ke(e)||(e._ts<0||e._dp._ts<0)&&"isFromStart"!==e.data&&"isStart"!==e.data)?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=it(0,e._tDur,t),o=He(u,c),a=He(e._tTime,c),e._yoyo&&1&o&&(l=1-l),o!==a&&(s=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==s||r||e._zTime===B||!t&&e._zTime){if(!e._initted&&Je(e,t,r,n))return;for(a=e._zTime,e._zTime=t||(n?B:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,n||vt(e,"onStart"),i=e._pt;i;)i.r(l,i.d),i=i._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&vt(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&vt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Ne(e,1),n||(vt(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?_t(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,qt&&!0!==qt.vars.overwrite)._first||_t(this),this.parent&&n!==this.timeline.totalDuration()&&Qe(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,l,c,u=this._targets,h=e?lt(e):u,d=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(u,h))return"all"===t&&(this._pt=0),_t(this);for(r=this._op=this._op||[],"all"!==t&&(G(t)&&(s={},Ae(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,i,o,a=e[0]?we(e[0]).harness:0,s=a&&a.aliases;if(!s)return t;for(r in n=Re({},t),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(s in i=d[c],"all"===t?(r[c]=t,a=i,o={}):(o=r[c]=r[c]||{},a=t),a)(l=i&&i[s])&&("kill"in l.d&&!0!==l.d.kill(s)||Fe(this,l,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&f&&_t(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,n){return new t(e,Ce(arguments,1))},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,n,r){return new t(e,Ce(arguments,2))},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return a.killTweensOf(e,t,n)},t}(Ht);Oe(en.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ae("staggerTo,staggerFrom,staggerFromTo",(function(e){en[e]=function(){var t=new Wt,n=at.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var tn=function(e,t,n){return e[t]=n},nn=function(e,t,n){return e[t](n)},rn=function(e,t,n,r){return e[t](r.fp,n)},on=function(e,t,n){return e.setAttribute(t,n)},an=function(e,t){return H(e[t])?nn:q(e[t])&&e.setAttribute?on:tn},sn=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4,t)},ln=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},cn=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},un=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},hn=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},dn=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?Fe(this,r,"_pt"):r.dep||(t=1),r=n;return!t},fn=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},pn=function(e){for(var t,n,r,i,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=t}e._pt=r},mn=function(){function e(e,t,n,r,i,o,a,s,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=o||sn,this.d=a||this,this.set=s||tn,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=fn,this.m=e,this.mt=n,this.tween=t},e}();Ae(be+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return fe[e]=1})),ae.TweenMax=ae.TweenLite=en,ae.TimelineLite=ae.TimelineMax=Wt,a=new Wt({sortChildren:!1,defaults:R,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),I.stringFilter=Pt;var gn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return bt(e)}))},timeline:function(e){return new Wt(e)},getTweensOf:function(e,t){return a.getTweensOf(e,t)},getProperty:function(e,t,n,r){G(e)&&(e=lt(e)[0]);var i=we(e||{}).get,o=n?ke:De;return"native"===n&&(n=""),e?t?o((ge[t]&&ge[t].get||i)(e,t,n,r)):function(t,n,r){return o((ge[t]&&ge[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=lt(e)).length>1){var r=e.map((function(e){return _n.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var o=ge[t],a=we(e),s=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(t){var r=new o;d._pt=0,r.init(e,n?t+n:t,d,0,[e]),r.render(1,r),d._pt&&un(1,d)}:a.set(e,s);return o?l:function(t){return l(e,s,n?t+n:t,a,1)}},isTweening:function(e){return a.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ft(e.ease,R.ease)),Le(R,e||{})},config:function(e){return Le(I,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!ge[e]&&!ae[e]&&ue(t+" effect requires "+e+" plugin.")})),ye[t]=function(e,t,r){return n(lt(e),Oe(t||{},i),r)},o&&(Wt.prototype[t]=function(e,n,r){return this.add(ye[t](e,Z(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Ot[e]=Ft(t)},parseEase:function(e,t){return arguments.length?Ft(e,t):Ot},getById:function(e){return a.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new Wt(e);for(i.smoothChildTiming=X(e.smoothChildTiming),a.remove(i),i._dp=0,i._time=i._tTime=a._time,n=a._first;n;)r=n._next,!t&&!n._dur&&n instanceof en&&n.vars.onComplete===n._targets[0]||Ye(i,n,n._start-n._delay),n=r;return Ye(a,i,0),i},utils:{wrap:function e(t,n,r){var i=n-t;return K(t)?pt(t,e(0,t.length),n):rt(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,o=2*i;return K(t)?pt(t,e(0,t.length-1),n):rt(r,(function(e){return t+((e=(o+(e-t)%o)%o||0)>i?o-e:e)}))},distribute:ut,random:ft,snap:dt,normalize:function(e,t,n){return gt(e,t,0,1,n)},getUnit:ot,clamp:function(e,t,n){return rt(n,(function(n){return it(e,t,n)}))},splitColor:At,toArray:lt,mapRange:gt,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||ot(n))}},interpolate:function e(t,n,r,i){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var a,s,l,c,u,h=G(t),d={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(K(t)&&!K(n)){for(l=[],c=t.length,u=c-2,s=1;s<c;s++)l.push(e(t[s-1],t[s]));c--,o=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},r=n}else i||(t=Re(K(t)?[]:{},t));if(!l){for(a in n)Xt.call(d,t,a,"get",n[a]);o=function(e){return un(e,d)||(h?t.p:t)}}}return rt(r,o)},shuffle:ct},install:le,effects:ye,ticker:Dt,updateRoot:Wt.updateRoot,plugins:ge,globalTimeline:a,core:{PropTween:mn,globals:he,Tween:en,Timeline:Wt,Animation:Ht,getCache:we,_removeLinkedListItem:Fe,suppressOverwrites:function(e){return o=e}}};Ae("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return gn[e]=en[e]})),Dt.add(Wt.updateRoot),d=gn.to({},{duration:0});var yn=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},vn=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(G(n)&&(r={},Ae(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,o=e._targets;for(n in t)for(r=o.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=yn(i,n)),i&&i.modifier&&i.modifier(t[n],e,o[r],n))}(e,n)}}}},_n=gn.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,a;for(o in t)(a=this.add(e,"setAttribute",(e.getAttribute(o)||0)+"",t[o],r,i,0,0,o))&&(a.op=o),this._props.push(o)}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n])}},vn("roundProps",ht),vn("modifiers"),vn("snap",dt))||gn;en.version=Wt.version=_n.version="3.6.0",u=1,Y()&&kt(),Ot.Power0,Ot.Power1,Ot.Power2,Ot.Power3,Ot.Power4;var bn=Ot.Linear;Ot.Quad,Ot.Cubic,Ot.Quart,Ot.Quint,Ot.Strong,Ot.Elastic,Ot.Back,Ot.SteppedEase,Ot.Bounce,Ot.Sine,Ot.Expo,Ot.Circ},5716:(e,t,n)=>{"use strict";n.d(t,{p8:()=>_e});var r,i,o,a,s,l,c,u,h=n(5317),d={},f=180/Math.PI,p=Math.PI/180,m=Math.atan2,g=/([A-Z])/g,y=/(?:left|right|width|margin|padding|x)/i,v=/[\s,\(]\S/,_={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},b=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},x=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},w=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},S=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},A=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},E=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},M=function(e,t,n){return e.style[t]=n},C=function(e,t,n){return e.style.setProperty(t,n)},T=function(e,t,n){return e._gsap[t]=n},P=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},D=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},k=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},O="transform",I=O+"Origin",R=function(e,t){var n=i.createElementNS?i.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):i.createElement(e);return n.style?n:i.createElement(e)},L=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(g,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,z(n)||n,1)||""},B="O,Moz,ms,Ms,Webkit".split(","),z=function(e,t,n){var r=(t||s).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(B[i]+e in r););return i<0?null:(3===i?"ms":i>=0?B[i]:"")+e},F=function(){"undefined"!=typeof window&&window.document&&(r=window,i=r.document,o=i.documentElement,s=R("div")||{style:{}},l=R("div"),O=z(O),I=O+"Origin",s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",u=!!z("perspective"),a=1)},N=function e(t){var n,r=R("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(o.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),o.removeChild(r),this.style.cssText=s,n},U=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},j=function(e){var t;try{t=e.getBBox()}catch(n){t=N.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===N||(t=N.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+U(e,["x","cx","x1"])||0,y:+U(e,["y","cy","y1"])||0,width:0,height:0}},V=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!j(e))},G=function(e,t){if(t){var n=e.style;t in d&&t!==I&&(t=O),n.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty(t.replace(g,"-$1").toLowerCase())):n.removeAttribute(t)}},H=function(e,t,n,r,i,o){var a=new h.Fo(e._pt,t,n,0,1,o?E:A);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},W={deg:1,rad:1,turn:1},q=function e(t,n,r,o){var a,l,c,u,f=parseFloat(r)||0,p=(r+"").trim().substr((f+"").length)||"px",m=s.style,g=y.test(n),v="svg"===t.tagName.toLowerCase(),_=(v?"client":"offset")+(g?"Width":"Height"),b=100,x="px"===o,w="%"===o;return o===p||!f||W[o]||W[p]?f:("px"!==p&&!x&&(f=e(t,n,r,"px")),u=t.getCTM&&V(t),!w&&"%"!==p||!d[n]&&!~n.indexOf("adius")?(m[g?"width":"height"]=b+(x?p:o),l=~n.indexOf("adius")||"em"===o&&t.appendChild&&!v?t:t.parentNode,u&&(l=(t.ownerSVGElement||{}).parentNode),l&&l!==i&&l.appendChild||(l=i.body),(c=l._gsap)&&w&&c.width&&g&&c.time===h.xr.time?(0,h.Pr)(f/c.width*b):((w||"%"===p)&&(m.position=L(t,"position")),l===t&&(m.position="static"),l.appendChild(s),a=s[_],l.removeChild(s),m.position="absolute",g&&w&&((c=(0,h.DY)(l)).time=h.xr.time,c.width=l[_]),(0,h.Pr)(x?a*f/b:a&&f?b/a*f:0))):(a=u?t.getBBox()[g?"width":"height"]:t[_],(0,h.Pr)(w?f/a*b:f/100*a)))},Z=function(e,t,n,r){var i;return a||F(),t in _&&"transform"!==t&&~(t=_[t]).indexOf(",")&&(t=t.split(",")[0]),d[t]&&"transform"!==t?(i=ie(e,r),i="transformOrigin"!==t?i[t]:oe(L(e,I))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=J[t]&&J[t](e,t,n)||L(e,t)||(0,h.Ok)(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?q(e,t,i,n)+n:i},X=function(e,t,n,r){if(!n||"none"===n){var i=z(t,e,1),o=i&&L(e,i,1);o&&o!==n?(t=i,n=o):"borderColor"===t&&(n=L(e,"borderTopColor"))}var a,s,l,c,u,d,f,p,m,g,y,v,_=new h.Fo(this._pt,e.style,t,0,1,h.Ks),b=0,x=0;if(_.b=n,_.e=r,n+="","auto"==(r+="")&&(e.style[t]=r,r=L(e,t)||r,e.style[t]=n),a=[n,r],(0,h.kr)(a),r=a[1],l=(n=a[0]).match(h.d4)||[],(r.match(h.d4)||[]).length){for(;s=h.d4.exec(r);)f=s[0],m=r.substring(b,s.index),u?u=(u+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(u=1),f!==(d=l[x++]||"")&&(c=parseFloat(d)||0,y=d.substr((c+"").length),(v="="===f.charAt(1)?+(f.charAt(0)+"1"):0)&&(f=f.substr(2)),p=parseFloat(f),g=f.substr((p+"").length),b=h.d4.lastIndex-g.length,g||(g=g||h.Fc.units[t]||y,b===r.length&&(r+=g,_.e+=g)),y!==g&&(c=q(e,t,d,g)||0),_._pt={_next:_._pt,p:m||1===x?m:",",s:c,c:v?v*p:p-c,m:u&&u<4||"zIndex"===t?Math.round:0});_.c=b<r.length?r.substring(b,r.length):""}else _.r="display"===t&&"none"===r?E:A;return h.bQ.test(r)&&(_.e=0),this._pt=_,_},Y={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,o=t.t,a=o.style,s=t.u,l=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],d[n]&&(r=1,n="transformOrigin"===n?I:O),G(o,n);r&&(G(o,O),l&&(l.svg&&o.removeAttribute("transform"),ie(o,1),l.uncache=1))}},J={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var o=e._pt=new h.Fo(e._pt,t,n,0,0,$);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},K=[1,0,0,1,0,0],Q={},ee=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},te=function(e){var t=L(e,O);return ee(t)?K:t.substr(7).match(h.SI).map(h.Pr)},ne=function(e,t){var n,r,i,a,s=e._gsap||(0,h.DY)(e),l=e.style,c=te(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(c=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?K:c:(c!==K||e.offsetParent||e===o||s.svg||(i=l.display,l.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,r=e.nextSibling,o.appendChild(e)),c=te(e),i?l.display=i:G(e,"display"),a&&(r?n.insertBefore(e,r):n?n.appendChild(e):o.removeChild(e))),t&&c.length>6?[c[0],c[1],c[4],c[5],c[12],c[13]]:c)},re=function(e,t,n,r,i,o){var a,s,l,c=e._gsap,u=i||ne(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,f=c.xOffset||0,p=c.yOffset||0,m=u[0],g=u[1],y=u[2],v=u[3],_=u[4],b=u[5],x=t.split(" "),w=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?u!==K&&(s=m*v-g*y)&&(l=w*(-g/s)+S*(m/s)-(m*b-g*_)/s,w=w*(v/s)+S*(-y/s)+(y*b-v*_)/s,S=l):(w=(a=j(e)).x+(~x[0].indexOf("%")?w/100*a.width:w),S=a.y+(~(x[1]||x[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&c.smooth?(_=w-h,b=S-d,c.xOffset=f+(_*m+b*y)-_,c.yOffset=p+(_*g+b*v)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=S,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[I]="0px 0px",o&&(H(o,c,"xOrigin",h,w),H(o,c,"yOrigin",d,S),H(o,c,"xOffset",f,c.xOffset),H(o,c,"yOffset",p,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+S)},ie=function(e,t){var n=e._gsap||new h.l1(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,o,a,s,l,c,d,g,y,v,_,b,x,w,S,A,E,M,C,T,P,D,k,R,B,z,F,N,U,j,G,H=e.style,W=n.scaleX<0,q="px",Z="deg",X=L(e,I)||"0";return r=i=o=l=c=d=g=y=v=0,a=s=1,n.svg=!(!e.getCTM||!V(e)),x=ne(e,n.svg),n.svg&&(k=!n.uncache&&e.getAttribute("data-svg-origin"),re(e,k||X,!!k||n.originIsAbsolute,!1!==n.smooth,x)),_=n.xOrigin||0,b=n.yOrigin||0,x!==K&&(E=x[0],M=x[1],C=x[2],T=x[3],r=P=x[4],i=D=x[5],6===x.length?(a=Math.sqrt(E*E+M*M),s=Math.sqrt(T*T+C*C),l=E||M?m(M,E)*f:0,(g=C||T?m(C,T)*f+l:0)&&(s*=Math.cos(g*p)),n.svg&&(r-=_-(_*E+b*C),i-=b-(_*M+b*T))):(G=x[6],U=x[7],z=x[8],F=x[9],N=x[10],j=x[11],r=x[12],i=x[13],o=x[14],c=(w=m(G,N))*f,w&&(k=P*(S=Math.cos(-w))+z*(A=Math.sin(-w)),R=D*S+F*A,B=G*S+N*A,z=P*-A+z*S,F=D*-A+F*S,N=G*-A+N*S,j=U*-A+j*S,P=k,D=R,G=B),d=(w=m(-C,N))*f,w&&(S=Math.cos(-w),j=T*(A=Math.sin(-w))+j*S,E=k=E*S-z*A,M=R=M*S-F*A,C=B=C*S-N*A),l=(w=m(M,E))*f,w&&(k=E*(S=Math.cos(w))+M*(A=Math.sin(w)),R=P*S+D*A,M=M*S-E*A,D=D*S-P*A,E=k,P=R),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,d=180-d),a=(0,h.Pr)(Math.sqrt(E*E+M*M+C*C)),s=(0,h.Pr)(Math.sqrt(D*D+G*G)),w=m(P,D),g=Math.abs(w)>2e-4?w*f:0,v=j?1/(j<0?-j:j):0),n.svg&&(k=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!ee(L(e,O)),k&&e.setAttribute("transform",k))),Math.abs(g)>90&&Math.abs(g)<270&&(W?(a*=-1,g+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,g+=g<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+q,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+q,n.z=o+q,n.scaleX=(0,h.Pr)(a),n.scaleY=(0,h.Pr)(s),n.rotation=(0,h.Pr)(l)+Z,n.rotationX=(0,h.Pr)(c)+Z,n.rotationY=(0,h.Pr)(d)+Z,n.skewX=g+Z,n.skewY=y+Z,n.transformPerspective=v+q,(n.zOrigin=parseFloat(X.split(" ")[2])||0)&&(H[I]=oe(X)),n.xOffset=n.yOffset=0,n.force3D=h.Fc.force3D,n.renderTransform=n.svg?de:u?he:se,n.uncache=0,n},oe=function(e){return(e=e.split(" "))[0]+" "+e[1]},ae=function(e,t,n){var r=(0,h.Wy)(t);return(0,h.Pr)(parseFloat(t)+parseFloat(q(e,"x",n+"px",r)))+r},se=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,he(e,t)},le="0deg",ce="0px",ue=") ",he=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,m=n.scaleY,g=n.transformPerspective,y=n.force3D,v=n.target,_=n.zOrigin,b="",x="auto"===y&&e&&1!==e||!0===y;if(_&&(u!==le||c!==le)){var w,S=parseFloat(c)*p,A=Math.sin(S),E=Math.cos(S);S=parseFloat(u)*p,w=Math.cos(S),o=ae(v,o,A*w*-_),a=ae(v,a,-Math.sin(S)*-_),s=ae(v,s,E*w*-_+_)}g!==ce&&(b+="perspective("+g+ue),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(x||o!==ce||a!==ce||s!==ce)&&(b+=s!==ce||x?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+ue),l!==le&&(b+="rotate("+l+ue),c!==le&&(b+="rotateY("+c+ue),u!==le&&(b+="rotateX("+u+ue),h===le&&d===le||(b+="skew("+h+", "+d+ue),1===f&&1===m||(b+="scale("+f+", "+m+ue),v.style[O]=b||"translate(0, 0)"},de=function(e,t){var n,r,i,o,a,s=t||this,l=s.xPercent,c=s.yPercent,u=s.x,d=s.y,f=s.rotation,m=s.skewX,g=s.skewY,y=s.scaleX,v=s.scaleY,_=s.target,b=s.xOrigin,x=s.yOrigin,w=s.xOffset,S=s.yOffset,A=s.forceCSS,E=parseFloat(u),M=parseFloat(d);f=parseFloat(f),m=parseFloat(m),(g=parseFloat(g))&&(m+=g=parseFloat(g),f+=g),f||m?(f*=p,m*=p,n=Math.cos(f)*y,r=Math.sin(f)*y,i=Math.sin(f-m)*-v,o=Math.cos(f-m)*v,m&&(g*=p,a=Math.tan(m-g),i*=a=Math.sqrt(1+a*a),o*=a,g&&(a=Math.tan(g),n*=a=Math.sqrt(1+a*a),r*=a)),n=(0,h.Pr)(n),r=(0,h.Pr)(r),i=(0,h.Pr)(i),o=(0,h.Pr)(o)):(n=y,o=v,r=i=0),(E&&!~(u+"").indexOf("px")||M&&!~(d+"").indexOf("px"))&&(E=q(_,"x",u,"px"),M=q(_,"y",d,"px")),(b||x||w||S)&&(E=(0,h.Pr)(E+b-(b*n+x*i)+w),M=(0,h.Pr)(M+x-(b*r+x*o)+S)),(l||c)&&(a=_.getBBox(),E=(0,h.Pr)(E+l/100*a.width),M=(0,h.Pr)(M+c/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+E+","+M+")",_.setAttribute("transform",a),A&&(_.style[O]=a)},fe=function(e,t,n,r,i,o){var a,s,l=360,c=(0,h.r9)(i),u=parseFloat(i)*(c&&~i.indexOf("rad")?f:1),d=o?u*o:u-r,p=r+d+"deg";return c&&("short"===(a=i.split("_")[1])&&(d%=l)!=d%180&&(d+=d<0?l:-360),"cw"===a&&d<0?d=(d+36e9)%l-~~(d/l)*l:"ccw"===a&&d>0&&(d=(d-36e9)%l-~~(d/l)*l)),e._pt=s=new h.Fo(e._pt,t,n,r,d,x),s.e=p,s.u="deg",e._props.push(n),s},pe=function(e,t,n){var r,o,a,s,c,u,f,p=l.style,m=n._gsap;for(o in p.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",p[O]=t,i.body.appendChild(l),r=ie(l,1),d)(a=m[o])!==(s=r[o])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(o)<0&&(c=(0,h.Wy)(a)!==(f=(0,h.Wy)(s))?q(n,o,a,f):parseFloat(a),u=parseFloat(s),e._pt=new h.Fo(e._pt,m,o,c,u-c,b),e._pt.u=f||0,e._props.push(o));i.body.removeChild(l)};(0,h.fS)("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",o="Left",a=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return t<2?e+n:"border"+n+e}));J[t>1?"border"+e:e]=function(e,t,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(t){return Z(e,t,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(e,t){return s[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,s,i)}}));var me,ge,ye,ve={name:"css",register:F,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o,s,l,c,u,f,p,m,g,y,x,A,E,M,C,T,P,D,k,I=this._props,R=e.style,L=n.vars.startAt;for(p in a||F(),t)if("autoRound"!==p&&(s=t[p],!h.$i[p]||!(0,h.if)(p,t,n,r,e,i)))if(u=typeof s,f=J[p],"function"===u&&(u=typeof(s=s.call(n,r,e,i))),"string"===u&&~s.indexOf("random(")&&(s=(0,h.UI)(s)),f)f(this,e,p,s,n)&&(C=1);else if("--"===p.substr(0,2))o=(getComputedStyle(e).getPropertyValue(p)+"").trim(),s+="",m=(0,h.Wy)(o),(g=(0,h.Wy)(s))?m!==g&&(o=q(e,p,o,g)+g):m&&(s+=m),this.add(R,"setProperty",o,s,r,i,0,0,p);else if("undefined"!==u){if(L&&p in L?(o="function"==typeof L[p]?L[p].call(n,r,e,i):L[p],p in h.Fc.units&&!(0,h.Wy)(o)&&(o+=h.Fc.units[p]),"="===(o+"").charAt(1)&&(o=Z(e,p))):o=Z(e,p),c=parseFloat(o),(y="string"===u&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),l=parseFloat(s),p in _&&("autoAlpha"===p&&(1===c&&"hidden"===Z(e,"visibility")&&l&&(c=0),H(this,R,"visibility",c?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==p&&"transform"!==p&&~(p=_[p]).indexOf(",")&&(p=p.split(",")[0])),x=p in d)if(A||((E=e._gsap).renderTransform&&!t.parseTransform||ie(e,t.parseTransform),M=!1!==t.smoothOrigin&&E.smooth,(A=this._pt=new h.Fo(this._pt,R,O,0,1,E.renderTransform,E,0,-1)).dep=1),"scale"===p)this._pt=new h.Fo(this._pt,E,"scaleY",E.scaleY,y?y*l:l-E.scaleY),I.push("scaleY",p),p+="X";else{if("transformOrigin"===p){P=void 0,D=void 0,k=void 0,D=(P=(T=s).split(" "))[0],k=P[1]||"50%","top"!==D&&"bottom"!==D&&"left"!==k&&"right"!==k||(T=D,D=k,k=T),P[0]=Y[D]||D,P[1]=Y[k]||k,s=P.join(" "),E.svg?re(e,s,0,M,0,this):((g=parseFloat(s.split(" ")[2])||0)!==E.zOrigin&&H(this,E,"zOrigin",E.zOrigin,g),H(this,R,p,oe(o),oe(s)));continue}if("svgOrigin"===p){re(e,s,1,M,0,this);continue}if(p in Q){fe(this,E,p,c,s,y);continue}if("smoothOrigin"===p){H(this,E,"smooth",E.smooth,s);continue}if("force3D"===p){E[p]=s;continue}if("transform"===p){pe(this,s,e);continue}}else p in R||(p=z(p)||p);if(x||(l||0===l)&&(c||0===c)&&!v.test(s)&&p in R)l||(l=0),(m=(o+"").substr((c+"").length))!==(g=(0,h.Wy)(s)||(p in h.Fc.units?h.Fc.units[p]:m))&&(c=q(e,p,o,g)),this._pt=new h.Fo(this._pt,x?E:R,p,c,y?y*l:l-c,x||"px"!==g&&"zIndex"!==p||!1===t.autoRound?b:S),this._pt.u=g||0,m!==g&&(this._pt.b=o,this._pt.r=w);else if(p in R)X.call(this,e,p,o,s);else{if(!(p in e)){(0,h.lC)(p,s);continue}this.add(e,p,e[p],s,r,i)}I.push(p)}C&&(0,h.JV)(this)},get:Z,aliases:_,getSetter:function(e,t,n){var r=_[t];return r&&r.indexOf(",")<0&&(t=r),t in d&&t!==I&&(e._gsap.x||Z(e,"x"))?n&&c===n?"scale"===t?P:T:(c=n||{})&&("scale"===t?D:k):e.style&&!(0,h.m2)(e.style[t])?M:~t.indexOf("-")?C:(0,h.S5)(e,t)},core:{_removeProperty:G,_getMatrix:ne}};h.p8.utils.checkPrefix=z,me="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",ge="rotation,rotationX,rotationY,skewX,skewY",ye=(0,h.fS)(me+","+ge+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){d[e]=1})),(0,h.fS)(ge,(function(e){h.Fc.units[e]="deg",Q[e]=1})),_[ye[13]]=me+","+ge,(0,h.fS)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");_[t[1]]=ye[t[0]]})),(0,h.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){h.Fc.units[e]="px"})),h.p8.registerPlugin(ve);var _e=h.p8.registerPlugin(ve)||h.p8;_e.core.Tween},840:(e,t,n)=>{var r;!function(i,o,a,s){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,d=Math.abs,f=Date.now;function p(e,t,n){return setTimeout(x(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function y(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var v=y((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),_=y((function(e,t){return v(e,t,!0)}),"merge","Use `assign`.");function b(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&l(r,n)}function x(e,t){return function(){return e.apply(t,arguments)}}function w(e,t){return"function"==typeof e?e.apply(t&&t[0]||s,t):e}function S(e,t){return e===s?t:e}function A(e,t,n){g(T(t),(function(t){e.addEventListener(t,n,!1)}))}function E(e,t,n){g(T(t),(function(t){e.removeEventListener(t,n,!1)}))}function M(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function D(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];P(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function O(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:t)in e)return r;o++}return s}var I=1;function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var L="ontouchstart"in i,B=O(i,"PointerEvent")!==s,z=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",N="mouse",U=["x","y"],j=["clientX","clientY"];function V(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){w(e.options.enable,[e])&&n.handler(t)},this.init()}function G(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&t&&r-i==0,a=12&t&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=H(t)),i>1&&!n.firstMultiple?n.firstMultiple=H(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,l=a?a.center:o.center,c=t.center=W(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=Y(l,c),t.distance=X(l,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=Z(t.deltaX,t.deltaY);var u,h,p=q(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=d(p.x)>d(p.y)?p.x:p.y,t.scale=a?(u=a.pointers,X((h=r)[0],h[1],j)/X(u[0],u[1],j)):1,t.rotation=a?function(e,t){return Y(t[1],t[0],j)+Y(e[1],e[0],j)}(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(l>25||a.velocity===s)){var c=t.deltaX-a.deltaX,u=t.deltaY-a.deltaY,h=q(l,c,u);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,o=Z(c,u),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var m=e.element;M(t.srcEvent.target,m)&&(m=t.srcEvent.target),t.target=m}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function H(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:h(n/t),y:h(r/t)}}function q(e,t,n){return{x:t/e||0,y:n/e||0}}function Z(e,t){return e===t?1:d(e)>=d(t)?e<0?2:4:t<0?8:16}function X(e,t,n){n||(n=U);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function Y(e,t,n){n||(n=U);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(R(this.element),this.evWin,this.domHandler)}};var $={mousedown:1,mousemove:2,mouseup:4},J="mousedown",K="mousemove mouseup";function Q(){this.evEl=J,this.evWin=K,this.pressed=!1,V.apply(this,arguments)}b(Q,V,{handler:function(e){var t=$[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:N,srcEvent:e}))}});var ee={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},te={2:F,3:"pen",4:N,5:"kinect"},ne="pointerdown",re="pointermove pointerup pointercancel";function ie(){this.evEl=ne,this.evWin=re,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(ne="MSPointerDown",re="MSPointerMove MSPointerUp MSPointerCancel"),b(ie,V,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=ee[r],o=te[e.pointerType]||e.pointerType,a=o==F,s=P(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ae="touchstart",se="touchstart touchmove touchend touchcancel";function le(){this.evTarget=ae,this.evWin=se,this.started=!1,V.apply(this,arguments)}function ce(e,t){var n=D(e.touches),r=D(e.changedTouches);return 12&t&&(n=k(n.concat(r),"identifier",!0)),[n,r]}b(le,V,{handler:function(e){var t=oe[e.type];if(1===t&&(this.started=!0),this.started){var n=ce.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:e})}}});var ue={touchstart:1,touchmove:2,touchend:4,touchcancel:8},he="touchstart touchmove touchend touchcancel";function de(){this.evTarget=he,this.targetIds={},V.apply(this,arguments)}function fe(e,t){var n=D(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=D(e.changedTouches),s=[],l=this.target;if(o=n.filter((function(e){return M(e.target,l)})),1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&t&&delete r[a[i].identifier],i++;return s.length?[k(o.concat(s),"identifier",!0),s]:void 0}function pe(){V.apply(this,arguments);var e=x(this.handler,this);this.touch=new de(this.manager,e),this.mouse=new Q(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function me(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ge.call(this,t)):12&e&&ge.call(this,t)}function ge(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function ye(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}b(de,V,{handler:function(e){var t=ue[e.type],n=fe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:e})}}),b(pe,V,{handler:function(e,t,n){var r=n.pointerType==F,i=n.pointerType==N;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)me.call(this,t,n);else if(i&&ye.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ve=O(u.style,"touchAction"),_e=ve!==s,be="compute",xe="auto",we="manipulation",Se="none",Ae="pan-x",Ee="pan-y",Me=function(){if(!_e)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function Ce(e,t){this.manager=e,this.set(t)}Ce.prototype={set:function(e){e==be&&(e=this.compute()),_e&&this.manager.element.style&&Me[e]&&(this.manager.element.style[ve]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){w(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(C(e,Se))return Se;var t=C(e,Ae),n=C(e,Ee);return t&&n?Se:t||n?t?Ae:Ee:C(e,we)?we:xe}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=C(r,Se)&&!Me.none,o=C(r,Ee)&&!Me["pan-y"],a=C(r,Ae)&&!Me["pan-x"];if(i){var s=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return i||o&&6&n||a&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Te=32;function Pe(e){this.options=l({},this.defaults,e||{}),this.id=I++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function De(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ke(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Oe(e,t){var n=t.manager;return n?n.get(e):e}function Ie(){Pe.apply(this,arguments)}function Re(){Ie.apply(this,arguments),this.pX=null,this.pY=null}function Le(){Ie.apply(this,arguments)}function Be(){Pe.apply(this,arguments),this._timer=null,this._input=null}function ze(){Ie.apply(this,arguments)}function Fe(){Ie.apply(this,arguments)}function Ne(){Pe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ue(e,t){return(t=t||{}).recognizers=S(t.recognizers,Ue.defaults.preset),new je(e,t)}function je(e,t){this.options=l({},Ue.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(B?ie:z?de:L?pe:Q))(this,G),this.touchAction=new Ce(this,this.options.touchAction),Ve(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Ve(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,(function(i,o){n=O(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Pe.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Oe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=Oe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=Oe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=Oe(e,this);var t=P(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+De(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+De(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Te},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!w(this.options.enable,[this,t]))return this.reset(),void(this.state=Te);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},b(Ie,Pe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:Te}}),b(Re,Ie,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Ee),24&e&&t.push(Ae),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Ie.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ke(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),b(Le,Ie,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),b(Be,Pe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Te},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(ze,Ie,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),b(Fe,Ie,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Re.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ke(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),b(Ne,Pe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[we]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||X(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Te},failTimeout:function(){return this._timer=p((function(){this.state=Te}),this.options.interval,this),Te},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ue.VERSION="2.0.7",Ue.defaults={domEvents:!1,touchAction:be,enable:!0,inputTarget:null,inputClass:null,preset:[[ze,{enable:!1}],[Le,{enable:!1},["rotate"]],[Fe,{direction:6}],[Re,{direction:6},["swipe"]],[Ne],[Ne,{event:"doubletap",taps:2},["tap"]],[Be]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},je.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Pe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return g(T(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==s){var n=this.handlers;return g(T(e),(function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Ve(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ue,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Te,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:je,Input:V,TouchAction:Ce,TouchInput:de,MouseInput:Q,PointerEventInput:ie,TouchMouseInput:pe,SingleTouchInput:le,Recognizer:Pe,AttrRecognizer:Ie,Tap:Ne,Pan:Re,Swipe:Fe,Pinch:Le,Rotate:ze,Press:Be,on:A,off:E,each:g,merge:_,extend:v,assign:l,inherit:b,bindFn:x,prefixed:O}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Ue,(r=function(){return Ue}.call(t,n,t,e))===s||(e.exports=r)}(window,document)},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},8738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},3134:(e,t,n)=>{var r=n(2739),i=n(7529),o=n(4176),a=["x","e","a","o","n","s","r","c","u","m","v","w","z"],s=["m","w"],l=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),u=" ".charCodeAt(0);function h(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function d(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function f(e,t){if(!e.chars||0===e.chars.length)return null;var n=m(e.chars,t);return n>=0?e.chars[n]:null}function p(e,t,n){if(!e.kernings||0===e.kernings.length)return 0;for(var r=e.kernings,i=0;i<r.length;i++){var o=r[i];if(o.first===t&&o.second===n)return o.amount}return 0}function m(e,t,n){for(var r=n=n||0;r<e.length;r++)if(e[r].id===t)return r;return-1}e.exports=function(e){return new h(e)},h.prototype.update=function(e){if(e=i({measure:this._measure},e),this._opt=e,this._opt.tabSize=o(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,n=e.text||"",s=e.font;this._setupSpaceGlyphs(s);var c=r.lines(n,e),u=e.width||0;t.length=0;var h=c.reduce((function(e,t){return Math.max(e,t.width,u)}),0),d=0,f=0,g=o(e.lineHeight,s.common.lineHeight),y=s.common.base,v=g-y,_=e.letterSpacing||0,b=g*c.length-v,x=function(e){return"center"===e?1:"right"===e?2:0}(this._opt.align);f-=b,this._width=h,this._height=b,this._descender=g-y,this._baseline=y,this._xHeight=function(e){for(var t=0;t<a.length;t++){var n=a[t].charCodeAt(0),r=m(e.chars,n);if(r>=0)return e.chars[r].height}return 0}(s),this._capHeight=function(e){for(var t=0;t<l.length;t++){var n=l[t].charCodeAt(0),r=m(e.chars,n);if(r>=0)return e.chars[r].height}return 0}(s),this._lineHeight=g,this._ascender=g-v-this._xHeight;var w=this;c.forEach((function(e,r){for(var i,o=e.start,a=e.end,l=e.width,c=o;c<a;c++){var u=n.charCodeAt(c),m=w.getGlyph(s,u);if(m){i&&(d+=p(s,i.id,m.id));var y=d;1===x?y+=(h-l)/2:2===x&&(y+=h-l),t.push({position:[y,f],data:m,index:c,line:r}),d+=m.xadvance+_,i=m}}f+=g,d=0})),this._linesTotal=c.length},h.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=f(e,u)||function(e){for(var t=0;t<s.length;t++){var n=s[t].charCodeAt(0),r=m(e.chars,n);if(r>=0)return e.chars[r]}return 0}(e)||e.chars[0],n=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=i(t,{x:0,y:0,xadvance:n,id:c,xoffset:0,yoffset:0,width:0,height:0})}},h.prototype.getGlyph=function(e,t){return f(e,t)||(t===c?this._fallbackTabGlyph:t===u?this._fallbackSpaceGlyph:null)},h.prototype.computeMetrics=function(e,t,n,r){var i,o=this._opt.letterSpacing||0,a=this._opt.font,s=0,l=0,c=0;if(!a.chars||0===a.chars.length)return{start:t,end:t,width:0};n=Math.min(e.length,n);for(var u=t;u<n;u++){var h,d=e.charCodeAt(u);if(h=this.getGlyph(a,d)){h.xoffset;var f=(s+=i?p(a,i.id,h.id):0)+h.xadvance+o,m=s+h.width;if(m>=r||f>=r)break;s=f,l=m,i=h}c++}return i&&(l+=i.xoffset),{start:t,end:t+c,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(e){Object.defineProperty(h.prototype,e,{get:d(e),configurable:!0})}))},3096:(e,t,n)=>{var r="Expected a function",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,h=c||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,m=function(){return h.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=a.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return g(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),function(e,t,n){var i,o,a,s,l,c,u=0,h=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);function _(t){var n=i,r=o;return i=o=void 0,u=t,s=e.apply(r,n)}function b(e){return u=e,l=setTimeout(w,t),h?_(e):s}function x(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=a}function w(){var e=m();if(x(e))return S(e);l=setTimeout(w,function(e){var n=t-(e-c);return d?p(n,a-(e-u)):n}(e))}function S(e){return l=void 0,v&&i?_(e):(i=o=void 0,s)}function A(){var e=m(),n=x(e);if(i=arguments,o=this,c=e,n){if(void 0===l)return b(c);if(d)return l=setTimeout(w,t),_(c)}return void 0===l&&(l=setTimeout(w,t)),s}return t=y(t)||0,g(n)&&(h=!!n.leading,a=(d="maxWait"in n)?f(y(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),A.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0},A.flush=function(){return void 0===l?s:S(m())},A}(e,t,{leading:i,maxWait:t,trailing:o})}},6158:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),n=i(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(0,(function(e){var t=n;function n(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var r=i;function i(e,t){this.x=e,this.y=t}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(e){return e instanceof i?e:Array.isArray(e)?new i(e[0],e[1]):e};var o="undefined"!=typeof self?self:{};function a(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!a(e[n],t[n]))return!1;return!0}return e===t}const s=Math.pow(2,53)-1,l=Math.PI/180,c=180/Math.PI;function u(e){return e*l}function h(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function d(e,n,r,i){const o=new t(e,n,r,i);return function(e){return o.solve(e)}}const f=d(.25,.1,.25,1);function p(e,t,n){return Math.min(n,Math.max(t,e))}function m(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function g(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function y(e){const t=[];for(const n in e)t.push(e[n]);return t}function v(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let _=1;function b(){return _++}function x(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function w(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function S(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function A(e,t){return-1!==e.indexOf(t,e.length-t.length)}function E(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function M(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function C(e){return Array.isArray(e)?e.map(C):"object"==typeof e&&e?E(e,C):e}const T={};function P(e){T[e]||("undefined"!=typeof console&&console.warn(e),T[e]=!0)}function D(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function k(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function O(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let R,L,B=null;function z(e){if(null==B){const t=e.navigator?e.navigator.userAgent:null;B=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return B}function F(e){try{const t=o[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}let N,U=!1;const j={now:()=>void 0!==N?N:o.performance.now(),setErrorState(){U=!0},setNow(e){N=e},restoreNow(){N=void 0},frame(e){if(U)return{cancel:()=>{}};const t=o.requestAnimationFrame(e);return{cancel:()=>o.cancelAnimationFrame(t)}},getImageData(e,t=0){const n=o.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(R||(R=o.document.createElement("a")),R.href=e,R.href),get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return!!o.matchMedia&&(null==L&&(L=o.matchMedia("(prefers-reduced-motion: reduce)")),L.matches)}};let V;const G={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==V){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{V=null!={}.API_URL_REGEX?new RegExp({}.API_URL_REGEX):e}catch(t){V=e}}return V},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},H={supported:!1,testSupport:function(e){!Z&&q&&(X?Y(e):W=e)}};let W,q,Z=!1,X=!1;function Y(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,q),e.isContextLost())return;H.supported=!0}catch(e){}e.deleteTexture(t),Z=!0}o.document&&(q=o.document.createElement("img"),q.onload=function(){W&&Y(W),W=null,X=!0},q.onerror=function(){Z=!0,W=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const $="01";function J(e){return 0===e.indexOf("mapbox:")}function K(e){return G.API_URL_REGEX.test(e)}const Q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ee(e){const t=e.match(Q);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function te(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}function ne(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(o.atob(t[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class re{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=ne(G.ACCESS_TOKEN);let n="";return n=t&&t.u?o.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):G.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const e=F("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const e=o.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const r=o.localStorage.getItem(n);r&&(this.anonId=r)}catch(e){P("Unable to read from LocalStorage")}}saveEventData(){const e=F("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{o.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){P("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,r){if(!G.EVENTS_URL)return;const i=ee(G.EVENTS_URL);i.params.push(`access_token=${r||G.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.1.1",skuId:$,userId:this.anonId},a=t?v(o,t):o,s={url:te(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=Ae(s,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const ie=new class extends re{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){G.EVENTS_URL&&G.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>J(e)||K(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=ne(G.ACCESS_TOKEN),n=t?t.u:G.ACCESS_TOKEN;let r=n!==this.eventData.tokenU;w(this.anonId)||(this.anonId=x(),r=!0);const i=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(i),n=(i-this.eventData.lastSuccess)/864e5;r=r||n>=1||n<-1||e.getDate()!==t.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},(e=>{e||(this.eventData.lastSuccess=i,this.eventData.tokenU=n)}),e)}},oe=ie.postTurnstileEvent.bind(ie),ae=new class extends re{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,G.EVENTS_URL&&(n||G.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=x()),this.postEvent(n,{skuToken:this.skuToken},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},se=ae.postMapLoadEvent.bind(ae),le=new class extends re{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!G.API_URL||!G.SESSION_PATH)return;const i=ee(G.API_URL+G.SESSION_PATH);i.params.push(`sku=${t||""}`),i.params.push(`access_token=${r||G.ACCESS_TOKEN||""}`);const o={url:te(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ee(o,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,G.SESSION_PATH&&G.API_URL&&(n||G.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error("NO_ACCESS_TOKEN")))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},ce=le.getSessionAPI.bind(le);let ue,he,de=500,fe=50;function pe(){o.caches&&!ue&&(ue=o.caches.open("mapbox-tiles"))}function me(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}let ge,ye=1/0;function ve(){return null==ge&&(ge=o.OffscreenCanvas&&new o.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof o.createImageBitmap),ge}const _e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(_e);class be extends Error{constructor(e,t,n){401===t&&K(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const xe=O()?()=>self.worker&&self.worker.referrer:()=>("blob:"===o.location.protocol?o.parent:o).location.href,we=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(xe())&&!/^\w+:/.test(n))){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return function(e,t){const n=new o.AbortController,r=new o.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:xe(),signal:n.signal});let i=!1,a=!1;const s=(l=r.url).indexOf("sku=")>0&&K(l);var l;"json"===e.type&&r.headers.set("Accept","application/json");const c=(n,i,l)=>{if(a)return;if(n&&"SecurityError"!==n.message&&P(n),i&&l)return u(i);const c=Date.now();o.fetch(r).then((n=>{if(n.ok){const e=s?n.clone():null;return u(n,e,c)}return t(new be(n.statusText,n.status,e.url))})).catch((e=>{20!==e.code&&t(new Error(e.message))}))},u=(n,s,l)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{a||(s&&l&&function(e,t,n){if(pe(),!ue)return;const r={status:t.status,statusText:t.statusText,headers:new o.Headers};t.headers.forEach(((e,t)=>r.headers.set(t,e)));const i=I(t.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===he)try{new Response(new ReadableStream),he=!0}catch(e){he=!1}he?t(e.body):e.blob().then(t)}(t,(t=>{const n=new o.Response(t,r);pe(),ue&&ue.then((t=>t.put(me(e.url),n))).catch((e=>P(e.message)))})))}(r,s,l),i=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{a||t(new Error(e.message))}))};return s?function(e,t){if(pe(),!ue)return t(null);const n=me(e.url);ue.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=I(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(r,c):c(null,null),{cancel:()=>{a=!0,i||n.abort()}}}(e,t);if(O()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){const n=new o.XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{t(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new be(n.statusText,n.status,e.url))},n.send(e.body),{cancel:()=>n.abort()}}(e,t)},Se=function(e,t){return we(v(e,{type:"arrayBuffer"}),t)},Ae=function(e,t){return we(v(e,{method:"POST"}),t)},Ee=function(e,t){return we(v(e,{method:"GET"}),t)};function Me(e){const t=o.document.createElement("a");return t.href=e,t.protocol===o.document.location.protocol&&t.host===o.document.location.host}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Te,Pe;Te=[],Pe=0;const De=function(e,t){if(H.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Pe>=G.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Te.push(n),n}Pe++;let n=!1;const r=()=>{if(!n)for(n=!0,Pe--;Te.length&&Pe<G.MAX_PARALLEL_IMAGE_REQUESTS;){const e=Te.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=De(t,n).cancel)}},i=Se(e,((e,n,i,a)=>{r(),e?t(e):n&&(ve()?function(e,t){const n=new o.Blob([new Uint8Array(e)],{type:"image/png"});o.createImageBitmap(n).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,t):function(e,t,n,r){const i=new o.Image,a=o.URL;i.onload=()=>{t(null,i),a.revokeObjectURL(i.src),i.onload=null,o.requestAnimationFrame((()=>{i.src=Ce}))},i.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const s=new o.Blob([new Uint8Array(e)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=e.byteLength?a.createObjectURL(s):Ce}(n,t,i,a))}));return{cancel:()=>{i.cancel(),r()}}};function ke(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Oe(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class Ie{constructor(e,t={}){v(this,t),this.type=e}}class Re extends Ie{constructor(e,t={}){super("error",v({error:e},t))}}class Le{on(e,t){return this._listeners=this._listeners||{},ke(e,t,this._listeners),this}off(e,t){return Oe(e,t,this._listeners),Oe(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},ke(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Ie(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const t of r)Oe(n,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(v(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Re&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ze{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function Fe(e){const t=e.value;return t?[new ze(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function Ue(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function je(e){if(Array.isArray(e))return e.map(je);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=je(e[n]);return t}return Ue(e)}class Ve extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Ge{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,n]of t)this.bindings[e]=n}concat(e){return new Ge(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const He={kind:"null"},We={kind:"number"},qe={kind:"string"},Ze={kind:"boolean"},Xe={kind:"color"},Ye={kind:"object"},$e={kind:"value"},Je={kind:"collator"},Ke={kind:"formatted"},Qe={kind:"resolvedImage"};function et(e,t){return{kind:"array",itemType:e,N:t}}function tt(e){if("array"===e.kind){const t=tt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const nt=[He,We,qe,Ze,Xe,Ke,Ye,et($e),Qe];function rt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!rt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of nt)if(!rt(e,t))return null}return`Expected ${tt(e)} but found ${tt(t)} instead.`}function it(e,t){return t.some((t=>t.kind===e.kind))}function ot(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function at(e,t){return e(t={exports:{}},t.exports),t.exports}var st=at((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function a(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,p=o(h[1]),m=o(h[2]),g=m<=.5?m*(p+1):m+p-m*p,y=2*m-g;return[r(255*a(y,g,f+1/3)),r(255*a(y,g,f)),r(255*a(y,g,f-1/3)),d];default:return null}}return null}}catch(e){}})).parseCSSColor;class lt{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof lt)return e;if("string"!=typeof e)return;const t=st(e);return t?new lt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}}lt.black=new lt(0,0,0,1),lt.white=new lt(1,1,1,1),lt.transparent=new lt(0,0,0,0),lt.red=new lt(1,0,0,1),lt.blue=new lt(0,0,1,1);class ct{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ut{constructor(e,t,n,r,i){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class ht{constructor(e){this.sections=e}static fromString(e){return new ht([new ut(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof ht?e:ht.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class dt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new dt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ft(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function pt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof lt)return!0;if(e instanceof ct)return!0;if(e instanceof ht)return!0;if(e instanceof dt)return!0;if(Array.isArray(e)){for(const t of e)if(!pt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!pt(e[t]))return!1;return!0}return!1}function mt(e){if(null===e)return He;if("string"==typeof e)return qe;if("boolean"==typeof e)return Ze;if("number"==typeof e)return We;if(e instanceof lt)return Xe;if(e instanceof ct)return Je;if(e instanceof ht)return Ke;if(e instanceof dt)return Qe;if(Array.isArray(e)){const t=e.length;let n;for(const t of e){const e=mt(t);if(n){if(n===e)continue;n=$e;break}n=e}return et(n||$e,t)}return Ye}function gt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof lt||e instanceof ht||e instanceof dt?e.toString():JSON.stringify(e)}class yt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!pt(e[1]))return t.error("invalid value");const n=e[1];let r=mt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new yt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof lt?["rgba"].concat(this.value.toArray()):this.value instanceof ht?this.value.serialize():this.value}}class vt{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const _t={string:qe,number:We,boolean:Ze,object:Ye};class bt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in _t)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=_t[n],r++}else i=$e;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=et(i,o)}else n=_t[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,$e);if(!n)return null;o.push(n)}return new bt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!rt(this.type,mt(n)))return n;if(t===this.args.length-1)throw new vt(`Expected value to be of type ${tt(this.type)}, but found ${tt(mt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}class xt{constructor(e){this.type=Ke,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=e.length-1;++n){const o=e[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,We),!e))return null;let n=null;if(o["text-font"]&&(n=t.parse(o["text-font"],1,et(qe)),!n))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,Xe),!a))return null;const s=r[r.length-1];s.scale=e,s.font=n,s.textColor=a}else{const o=t.parse(e[n],1,$e);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new xt(r)}evaluate(e){return new ht(this.sections.map((t=>{const n=t.content.evaluate(e);return mt(n)===Qe?new ut("",n,null,null,null):new ut(gt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class wt{constructor(e){this.type=Qe,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,qe);return n?new wt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=dt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const St={"to-boolean":Ze,"to-color":Xe,"to-number":We,"to-string":qe};class At{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=St[n],i=[];for(let n=1;n<e.length;n++){const r=t.parse(e[n],n,$e);if(!r)return null;i.push(r)}return new At(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof lt)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:ft(t[0],t[1],t[2],t[3]),!n))return new lt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new vt(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new vt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?ht.fromString(gt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?dt.fromString(gt(this.args[0].evaluate(e))):gt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new xt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new wt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Et=["Unknown","Point","LineString","Polygon"];class Mt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Et[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=lt.parse(e)),t}}class Ct{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=Ct.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[r,o]of a){s=new Yt(t.registry,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(r)?r[t-1]:r.type,o=s.parse(n,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(r)?r[e]:r.type,n=a[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Ct(n,i,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(tt).join(", ")})`:`(${tt(t.type)}...)`;var t})).join(" | "),r=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],1+r.length);if(!i)return null;r.push(tt(i.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Ct.definitions=t;for(const n in t)e[n]=Ct}}class Tt{constructor(e,t,n){this.type=Je,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Ze);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Ze);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,qe),!o)?null:new Tt(r,i,o)}evaluate(e){return new ct(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function Pt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Dt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function kt(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]}function Ot(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function It(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(Ot(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function Rt(e,t){for(let n=0;n<t.length;n++)if(It(e,t[n]))return!0;return!1}function Lt(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Bt(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&Lt(r,i,o,a)&&Lt(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function zt(e,t){for(let n=0;n<e.length;++n)if(!It(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(Bt(e[n],e[n+1],t))return!1;return!0}function Ft(e,t){for(let n=0;n<t.length;n++)if(zt(e,t[n]))return!0;return!1}function Nt(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=kt(e[i][r],n);Pt(t,a),o.push(a)}r.push(o)}return r}function Ut(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=Nt(e[i],t,n);r.push(o)}return r}function jt(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}Pt(t,e)}function Vt(e,t,n,r){const i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[];for(const r of e)for(const e of r){const r=[e.x+o[0],e.y+o[1]];jt(r,t,n,i),a.push(r)}return a}function Gt(e,t,n,r){const i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[];for(const n of e){const e=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];Pt(t,n),e.push(n)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)jt(r,t,n,i)}var s;return a}class Ht{constructor(e,t){this.type=Ze,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(pt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Ht(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Ht(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Ht(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=Nt(t.coordinates,r,i),a=Vt(e.geometry(),n,r,i);if(!Dt(n,r))return!1;for(const e of a)if(!It(e,o))return!1}if("MultiPolygon"===t.type){const o=Ut(t.coordinates,r,i),a=Vt(e.geometry(),n,r,i);if(!Dt(n,r))return!1;for(const e of a)if(!Rt(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=Nt(t.coordinates,r,i),a=Gt(e.geometry(),n,r,i);if(!Dt(n,r))return!1;for(const e of a)if(!zt(e,o))return!1}if("MultiPolygon"===t.type){const o=Ut(t.coordinates,r,i),a=Gt(e.geometry(),n,r,i);if(!Dt(n,r))return!1;for(const e of a)if(!Ft(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Wt(e){if(e instanceof Ct){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Ht)return!1;let t=!0;return e.eachChild((e=>{t&&!Wt(e)&&(t=!1)})),t}function qt(e){if(e instanceof Ct&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!qt(e)&&(t=!1)})),t}function Zt(e,t){if(e instanceof Ct&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!Zt(e,t)&&(n=!1)})),n}class Xt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Xt(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Yt{constructor(e,t=[],n,r=new Ge,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new bt(t,[e]):"coerce"===n?new At(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof yt)&&"resolvedImage"!==r.type.kind&&function e(t){if(t instanceof Xt)return e(t.boundExpression);if(t instanceof Ct&&"error"===t.name)return!1;if(t instanceof Tt)return!1;if(t instanceof Ht)return!1;const n=t instanceof At||t instanceof bt;let r=!0;return t.eachChild((t=>{r=n?r&&e(t):r&&t instanceof yt})),!!r&&Wt(t)&&Zt(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(r)){const t=new Mt;try{r=new yt(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Yt(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new Ve(n,e))}checkSubtype(e,t){const n=rt(e,t);return n&&this.error(n),n}}function $t(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new vt("Input is not a number.");a=s-1}return 0}class Jt{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,We);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let n=1;n<e.length;n+=2){const o=1===n?-1/0:e[n],a=e[n+1],s=n,l=n+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([o,c])}return new Jt(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[$t(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}function Kt(e,t,n){return e*(1-n)+t*n}var Qt=Object.freeze({__proto__:null,number:Kt,color:function(e,t,n){return new lt(Kt(e.r,t.r,n),Kt(e.g,t.g,n),Kt(e.b,t.b,n),Kt(e.a,t.a,n))},array:function(e,t,n){return e.map(((e,r)=>Kt(e,t[r],n)))}});const en=6/29*3*(6/29),tn=Math.PI/180,nn=180/Math.PI;function rn(e){return e>.008856451679035631?Math.pow(e,1/3):e/en+4/29}function on(e){return e>6/29?e*e*e:en*(e-4/29)}function an(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function sn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ln(e){const t=sn(e.r),n=sn(e.g),r=sn(e.b),i=rn((.4124564*t+.3575761*n+.1804375*r)/.95047),o=rn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-rn((.0193339*t+.119192*n+.9503041*r)/1.08883)),alpha:e.a}}function cn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*on(t),n=.95047*on(n),r=1.08883*on(r),new lt(an(3.2404542*n-1.5371385*t-.4985314*r),an(-.969266*n+1.8760108*t+.041556*r),an(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function un(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const hn={forward:ln,reverse:cn,interpolate:function(e,t,n){return{l:Kt(e.l,t.l,n),a:Kt(e.a,t.a,n),b:Kt(e.b,t.b,n),alpha:Kt(e.alpha,t.alpha,n)}}},dn={forward:function(e){const{l:t,a:n,b:r}=ln(e),i=Math.atan2(r,n)*nn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*tn,n=e.c;return cn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:un(e.h,t.h,n),c:Kt(e.c,t.c,n),l:Kt(e.l,t.l,n),alpha:Kt(e.alpha,t.alpha,n)}}};var fn=Object.freeze({__proto__:null,lab:hn,hcl:dn});class pn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,n,r,i){let o=0;if("exponential"===e.name)o=mn(n,e.base,r,i);else if("linear"===e.name)o=mn(n,1,r,i);else if("cubic-bezier"===e.name){const a=e.controlPoints;o=new t(a[0],a[1],a[2],a[3]).solve(mn(n,1,r,i))}return o}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,We),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=Xe:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const n=o[e],r=o[e+1],i=e+3,l=e+4;if("number"!=typeof n)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=n)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(r,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new pn(s,n,r,i,a):t.error(`Type ${tt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=$t(t,r),a=pn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?Qt[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?dn.reverse(dn.interpolate(dn.forward(s),dn.forward(l),a)):hn.reverse(hn.interpolate(hn.forward(s),hn.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function mn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}class gn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of e.slice(1)){const e=t.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>rt(r,e.type)));return new gn(o?$e:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(e),n&&n instanceof dt&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class yn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new yn(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}class vn{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,We),r=t.parse(e[2],2,et(t.expectedType||$e));return n&&r?new vn(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new vt(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new vt(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new vt(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class _n{constructor(e,t){this.type=Ze,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,$e),r=t.parse(e[2],2,$e);return n&&r?it(n.type,[Ze,qe,We,He,$e])?new _n(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!ot(t,["boolean","string","number","null"]))throw new vt(`Expected first argument to be of type boolean, string, number or null, but found ${tt(mt(t))} instead.`);if(!ot(n,["string","array"]))throw new vt(`Expected second argument to be of type array or string, but found ${tt(mt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class bn{constructor(e,t,n){this.type=We,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,$e),r=t.parse(e[2],2,$e);if(!n||!r)return null;if(!it(n.type,[Ze,qe,We,He,$e]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,We);return i?new bn(n,r,i):null}return new bn(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!ot(t,["boolean","string","number","null"]))throw new vt(`Expected first argument to be of type boolean, string, number or null, but found ${tt(mt(t))} instead.`);if(!ot(n,["string","array"]))throw new vt(`Expected second argument to be of type array or string, but found ${tt(mt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class xn{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,mt(e)))return null}else n=mt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,$e);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new xn(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(mt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const e of t){const t=r[this.cases[e]];void 0===t?(r[this.cases[e]]=n.length,n.push([this.cases[e],[e]])):n[t][1].push(e)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,r]of n)e.push(1===r.length?i(r[0]):r.map(i)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class wn{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,Ze);if(!o)return null;const a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new wn(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class Sn{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,$e),r=t.parse(e[2],2,We);if(!n||!r)return null;if(!it(n.type,[et($e),qe,$e]))return t.error(`Expected first argument to be of type array or string, but found ${tt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,We);return i?new Sn(n.type,n,r,i):null}return new Sn(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!ot(t,["string","array"]))throw new vt(`Expected first argument to be of type array or string, but found ${tt(mt(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function An(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function En(e,t,n,r){return 0===r.compare(t,n)}function Mn(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=Ze,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,$e);if(!o)return null;if(!An(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${tt(o.type)}'.`);let a=t.parse(e[2],2,$e);if(!a)return null;if(!An(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${tt(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${tt(o.type)}' and '${tt(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new bt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new bt(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,Je),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=mt(o),n=mt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new vt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=mt(o),n=mt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const Cn=Mn("==",(function(e,t,n){return t===n}),En),Tn=Mn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!En(0,t,n,r)})),Pn=Mn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Dn=Mn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),kn=Mn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0}));class On{constructor(e,t,n,r,i){this.type=qe,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,We);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,qe),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,qe),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,We),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=t.parse(r["max-fraction-digits"],1,We),!s)?null:new On(n,i,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class In{constructor(e){this.type=We,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${tt(n.type)} instead.`):new In(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new vt(`Expected value to be of type string or array, but found ${tt(mt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Rn={"==":Cn,"!=":Tn,">":Dn,"<":Pn,">=":Mn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),"<=":kn,array:bt,at:vn,boolean:bt,case:wn,coalesce:gn,collator:Tt,format:xt,image:wt,in:_n,"index-of":bn,interpolate:pn,"interpolate-hcl":pn,"interpolate-lab":pn,length:In,let:yn,literal:yt,match:xn,number:bt,"number-format":On,object:bt,slice:Sn,step:Jt,string:bt,"to-boolean":At,"to-color":At,"to-number":At,"to-string":At,var:Xt,within:Ht};function Ln(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=ft(t,n,r,o);if(a)throw new vt(a);return new lt(t/255*o,n/255*o,r/255*o,o)}function Bn(e,t){return e in t}function zn(e,t){const n=t[e];return void 0===n?null:n}function Fn(e){return{type:e}}function Nn(e){return{result:"success",value:e}}function Un(e){return{result:"error",value:e}}function jn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Vn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Gn(e){return!!e.expression&&e.expression.interpolated}function Hn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Wn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function qn(e){return e}function Zn(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Xn(e,t,n,r,i){return Zn(typeof n===i?r[n]:void 0,e.default,t.default)}function Yn(e,t,n){if("number"!==Hn(n))return Zn(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=$t(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function $n(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Hn(n))return Zn(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=$t(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=Qt[t.type]||qn;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=fn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,a)}}:c(s,l,a)}function Jn(e,t,n){return"color"===t.type?n=lt.parse(n):"formatted"===t.type?n=ht.fromString(n.toString()):"resolvedImage"===t.type?n=dt.fromString(n.toString()):Hn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Zn(n,e.default,t.default)}Ct.register(Rn,{error:[{kind:"error"},[qe],(e,[t])=>{throw new vt(t.evaluate(e))}],typeof:[qe,[$e],(e,[t])=>tt(mt(t.evaluate(e)))],"to-rgba":[et(We,4),[Xe],(e,[t])=>t.evaluate(e).toArray()],rgb:[Xe,[We,We,We],Ln],rgba:[Xe,[We,We,We,We],Ln],has:{type:Ze,overloads:[[[qe],(e,[t])=>Bn(t.evaluate(e),e.properties())],[[qe,Ye],(e,[t,n])=>Bn(t.evaluate(e),n.evaluate(e))]]},get:{type:$e,overloads:[[[qe],(e,[t])=>zn(t.evaluate(e),e.properties())],[[qe,Ye],(e,[t,n])=>zn(t.evaluate(e),n.evaluate(e))]]},"feature-state":[$e,[qe],(e,[t])=>zn(t.evaluate(e),e.featureState||{})],properties:[Ye,[],e=>e.properties()],"geometry-type":[qe,[],e=>e.geometryType()],id:[$e,[],e=>e.id()],zoom:[We,[],e=>e.globals.zoom],"heatmap-density":[We,[],e=>e.globals.heatmapDensity||0],"line-progress":[We,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[We,[],e=>e.globals.skyRadialProgress||0],accumulated:[$e,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[We,Fn(We),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[We,Fn(We),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:We,overloads:[[[We,We],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[We],(e,[t])=>-t.evaluate(e)]]},"/":[We,[We,We],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[We,[We,We],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[We,[We],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[We,[We],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[We,[We],(e,[t])=>Math.log(t.evaluate(e))],log2:[We,[We],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[We,[We],(e,[t])=>Math.sin(t.evaluate(e))],cos:[We,[We],(e,[t])=>Math.cos(t.evaluate(e))],tan:[We,[We],(e,[t])=>Math.tan(t.evaluate(e))],asin:[We,[We],(e,[t])=>Math.asin(t.evaluate(e))],acos:[We,[We],(e,[t])=>Math.acos(t.evaluate(e))],atan:[We,[We],(e,[t])=>Math.atan(t.evaluate(e))],min:[We,Fn(We),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[We,Fn(We),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[We,[We],(e,[t])=>Math.abs(t.evaluate(e))],round:[We,[We],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[We,[We],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[We,[We],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Ze,[qe,$e],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Ze,[$e],(e,[t])=>e.id()===t.value],"filter-type-==":[Ze,[qe],(e,[t])=>e.geometryType()===t.value],"filter-<":[Ze,[qe,$e],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Ze,[$e],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Ze,[qe,$e],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Ze,[$e],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Ze,[qe,$e],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Ze,[$e],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Ze,[qe,$e],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Ze,[$e],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Ze,[$e],(e,[t])=>t.value in e.properties()],"filter-has-id":[Ze,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Ze,[et(qe)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Ze,[et($e)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Ze,[qe,et($e)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Ze,[qe,et($e)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Ze,overloads:[[[Ze,Ze],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Fn(Ze),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Ze,overloads:[[[Ze,Ze],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Fn(Ze),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Ze,[Ze],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Ze,[qe],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[qe,[qe],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[qe,[qe],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[qe,Fn($e),(e,t)=>t.map((t=>gt(t.evaluate(e)))).join("")],"resolved-locale":[qe,[Je],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Kn{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Mt,this._defaultValue=t?function(e){return"color"===e.type&&Wn(e.default)?new lt(0,0,0,0):"color"===e.type?lt.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new vt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Qn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Rn}function er(e,t){const n=new Yt(Rn,[],t?function(e){const t={color:Xe,string:qe,number:We,enum:qe,boolean:Ze,formatted:Ke,resolvedImage:Qe};return"array"===e.type?et(t[e.value]||$e,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Nn(new Kn(r,t)):Un(n.errors)}class tr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!qt(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class nr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!qt(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?pn.interpolationFactor(this.interpolationType,e,t,n):0}}function rr(e,t){if("error"===(e=er(e,t)).result)return e;const n=e.value.expression,r=Wt(n);if(!r&&!jn(t))return Un([new Ve("","data expressions not supported")]);const i=Zt(n,["zoom"]);if(!i&&!Vn(t))return Un([new Ve("","zoom expressions not supported")]);const o=function e(t){let n=null;if(t instanceof yn)n=e(t.result);else if(t instanceof gn){for(const r of t.args)if(n=e(r),n)break}else(t instanceof Jt||t instanceof pn)&&t.input instanceof Ct&&"zoom"===t.input.name&&(n=t);return n instanceof Ve||t.eachChild((t=>{const r=e(t);r instanceof Ve?n=r:!n&&r?n=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||i?o instanceof Ve?Un([o]):o instanceof pn&&!Gn(t)?Un([new Ve("",'"interpolate" expressions cannot be used with this property')]):Nn(o?new nr(r?"camera":"composite",e.value,o.labels,o instanceof pn?o.interpolation:void 0):new tr(r?"constant":"source",e.value)):Un([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ir{constructor(e,t){this._parameters=e,this._specification=t,Ne(this,function e(t,n){const r="color"===n.type,i=t.stops&&"object"==typeof t.stops[0][0],o=i||!(i||void 0!==t.property),a=t.type||(Gn(n)?"exponential":"interval");if(r&&((t=Ne({},t)).stops&&(t.stops=t.stops.map((e=>[e[0],lt.parse(e[1])]))),t.default=lt.parse(t.default?t.default:n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!fn[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,l,c;if("exponential"===a)s=$n;else if("interval"===a)s=Yn;else if("categorical"===a){s=Xn,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=Jn}if(i){const r={},i=[];for(let e=0;e<t.stops.length;e++){const n=t.stops[e],o=n[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},i.push(o)),r[o].stops.push([n[0].value,n[1]])}const o=[];for(const t of i)o.push([r[t].zoom,e(r[t],n)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:pn.interpolationFactor.bind(void 0,a),zoomStops:o.map((e=>e[0])),evaluate:({zoom:e},r)=>$n({stops:o,base:t.base},n,e).evaluate(e,r)}}if(o){const e="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:pn.interpolationFactor.bind(void 0,e),zoomStops:t.stops.map((e=>e[0])),evaluate:({zoom:e})=>s(t,n,e,l,c)}}return{kind:"source",evaluate(e,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?Zn(t.default,n.default):s(t,n,i,l,c)}}}(this._parameters,this._specification))}static deserialize(e){return new ir(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function or(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Hn(n);if("object"!==l)return[new ze(t,n,`object expected, ${l} found`)];for(const e in n){const l=e.split(".")[0],c=r[l]||r["*"];let u;if(i[l])u=i[l];else if(r[l])u=kr;else if(i["*"])u=i["*"];else{if(!r["*"]){s.push(new ze(t,n[e],`unknown property "${e}"`));continue}u=kr}s=s.concat(u({key:(t?`${t}.`:t)+e,value:n[e],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:e},n))}for(const e in r)i[e]||r[e].required&&void 0===r[e].default&&void 0===n[e]&&s.push(new ze(t,n,`missing required property "${e}"`));return s}function ar(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||kr;if("array"!==Hn(t))return[new ze(o,t,`array expected, ${Hn(t)} found`)];if(n.length&&t.length!==n.length)return[new ze(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new ze(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(s.function=n.function),"object"===Hn(n.value)&&(s=n.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:r,styleSpec:i,key:`${o}[${e}]`}));return l}function sr(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Hn(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ze(t,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Hn(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new ze(t,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Hn(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new ze(t,n,`${n} is greater than the maximum value ${i}`)]}return[]}function lr(e){const t=e.valueSpec,n=Ue(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Hn(e.value.stops)&&"array"===Hn(e.value.stops[0])&&"object"===Hn(e.value.stops[0][0]),u=or({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new ze(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(ar({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Hn(r)&&0===r.length&&t.push(new ze(e.key,r,"array must have at least one stop")),t},default:function(e){return kr({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new ze(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new ze(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Gn(e.valueSpec)&&u.push(new ze(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!jn(e.valueSpec)?u.push(new ze(e.key,e.value,"property functions not supported")):s&&!Vn(e.valueSpec)&&u.push(new ze(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new ze(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,s=e.key;if("array"!==Hn(r))return[new ze(s,r,`array expected, ${Hn(r)} found`)];if(2!==r.length)return[new ze(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Hn(r[0]))return[new ze(s,r,`object expected, ${Hn(r[0])} found`)];if(void 0===r[0].zoom)return[new ze(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ze(s,r,"object stop key must have value")];if(o&&o>Ue(r[0].zoom))return[new ze(s,r[0].zoom,"stop zoom values must appear in ascending order")];Ue(r[0].zoom)!==o&&(o=Ue(r[0].zoom),i=void 0,a={}),n=n.concat(or({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:sr,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return Qn(je(r[1]))?n.concat([new ze(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(kr({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const s=Hn(e.value),l=Ue(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new ze(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ze(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return jn(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(e.key,c,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new ze(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new ze(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ze(e.key,c,`integer expected, found ${l}`)]}}function cr(e){const t=("property"===e.expressionContext?rr:er)(je(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ze(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new ze(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!qt(n))return[new ze(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!qt(n))return[new ze(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Zt(n,["zoom","feature-state"]))return[new ze(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Wt(n))return[new ze(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ur(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Ue(n))&&i.push(new ze(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(Ue(n))&&i.push(new ze(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function hr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!hr(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const dr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fr(e){if(null==e)return{filter:()=>!0,needGeometry:!1};hr(e)||(e=mr(e));const t=er(e,dr);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,n,r)=>t.value.evaluate(e,n,{},r),needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let n=1;n<t.length;n++)if(e(t[n]))return!0;return!1}(e)}}function pr(e,t){return e<t?-1:e>t?1:0}function mr(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?gr(e[1],e[2],"=="):"!="===t?_r(gr(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?gr(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(mr))):"all"===t?["all"].concat(e.slice(1).map(mr)):"none"===t?["all"].concat(e.slice(1).map(mr).map(_r)):"in"===t?yr(e[1],e.slice(2)):"!in"===t?_r(yr(e[1],e.slice(2))):"has"===t?vr(e[1]):"!has"===t?_r(vr(e[1])):"within"!==t||e;var n}function gr(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function yr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(pr)]]:["filter-in-small",e,["literal",t]]}}function vr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function _r(e){return["!",e]}function br(e){return hr(je(e.value))?cr(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){const n=t.value,r=t.key;if("array"!==Hn(n))return[new ze(r,n,`array expected, ${Hn(n)} found`)];const i=t.styleSpec;let o,a=[];if(n.length<1)return[new ze(r,n,"filter array must have at least 1 element")];switch(a=a.concat(ur({key:`${r}[0]`,value:n[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),Ue(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Ue(n[1])&&a.push(new ze(r,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&a.push(new ze(r,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(o=Hn(n[1]),"string"!==o&&a.push(new ze(`${r}[1]`,n[1],`string expected, ${o} found`)));for(let e=2;e<n.length;e++)o=Hn(n[e]),"$type"===Ue(n[1])?a=a.concat(ur({key:`${r}[${e}]`,value:n[e],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&a.push(new ze(`${r}[${e}]`,n[e],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let i=1;i<n.length;i++)a=a.concat(e({key:`${r}[${i}]`,value:n[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":o=Hn(n[1]),2!==n.length?a.push(new ze(r,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==o&&a.push(new ze(`${r}[1]`,n[1],`string expected, ${o} found`));break;case"within":o=Hn(n[1]),2!==n.length?a.push(new ze(r,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==o&&a.push(new ze(`${r}[1]`,n[1],`object expected, ${o} found`))}return a}(e)}function xr(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return kr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new ze(n,o,`unknown property "${a}"`)];let u;if("string"===Hn(o)&&jn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new ze(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new ze(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Wn(je(o))&&"identity"===Ue(o.type)&&h.push(new ze(n,o,'"text-font" does not support identity functions'))),h.concat(kr({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function wr(e){return xr(e,"paint")}function Sr(e){return xr(e,"layout")}function Ar(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new ze(r,n,'either "type" or "ref" is required'));let a=Ue(n.type);const s=Ue(n.ref);if(n.id){const o=Ue(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];Ue(e.id)===o&&t.push(new ze(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new ze(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{Ue(t.id)===s&&(e=t)})),e?e.ref?t.push(new ze(r,n.ref,"ref cannot reference another ref layer")):a=Ue(e.type):t.push(new ze(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&Ue(e.type);e?"vector"===o&&"raster"===a?t.push(new ze(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new ze(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new ze(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new ze(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ze(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new ze(r,n.source,`source "${n.source}" not found`))}else t.push(new ze(r,n,'missing required property "source"'));return t=t.concat(or({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>kr({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:br,layout:e=>or({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Sr(Ne({layerType:a},e))}}),paint:e=>or({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>wr(Ne({layerType:a},e))}})}})),t}function Er(e){const t=e.value,n=e.key,r=Hn(t);return"string"!==r?[new ze(n,t,`string expected, ${r} found`)]:[]}const Mr={promoteId:function({key:e,value:t}){if("string"===Hn(t))return Er({key:e,value:t});{const n=[];for(const r in t)n.push(...Er({key:`${e}.${r}`,value:t[r]}));return n}}};function Cr(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new ze(n,t,'"type" is required')];const o=Ue(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=or({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:Mr}),a;case"geojson":if(a=or({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Mr}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...cr({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...cr({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return or({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return or({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ze(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ur({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Tr(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Hn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ze("light",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?kr({key:e,value:t[e],valueSpec:n.transition,style:i,styleSpec:n}):r[e]?kr({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}):[new ze(e,t[e],`unknown property "${e}"`)])}return o}function Pr(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Hn(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new ze("terrain",t,`object expected, ${s} found`)]),a;for(const e in t){const n=e.match(/^(.*)-transition$/);a=a.concat(n&&o[n[1]]&&o[n[1]].transition?kr({key:e,value:t[e],valueSpec:i.transition,style:r,styleSpec:i}):o[e]?kr({key:e,value:t[e],valueSpec:o[e],style:r,styleSpec:i}):[new ze(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&Ue(e.type);e?"raster-dem"!==i&&a.push(new ze(n,t.source,`terrain cannot be used with a source of type ${i}, it only be used with a "raster-dem" source type`)):a.push(new ze(n,t.source,`source "${t.source}" not found`))}else a.push(new ze(n,t,'terrain is missing required property "source"'));return a}const Dr={"*":()=>[],array:ar,boolean:function(e){const t=e.value,n=e.key,r=Hn(t);return"boolean"!==r?[new ze(n,t,`boolean expected, ${r} found`)]:[]},number:sr,color:function(e){const t=e.key,n=e.value,r=Hn(n);return"string"!==r?[new ze(t,n,`color expected, ${r} found`)]:null===st(n)?[new ze(t,n,`color expected, "${n}" found`)]:[]},constants:Fe,enum:ur,filter:br,function:lr,layer:Ar,object:or,source:Cr,light:Tr,terrain:Pr,string:Er,formatted:function(e){return 0===Er(e).length?[]:cr(e)},resolvedImage:function(e){return 0===Er(e).length?[]:cr(e)}};function kr(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Wn(Ue(t))?lr(e):n.expression&&Qn(je(t))?cr(e):n.type&&Dr[n.type]?Dr[n.type](e):or(Ne({},e,{valueSpec:n.type?r[n.type]:n}))}function Or(e){const t=e.value,n=e.key,r=Er(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ze(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ze(n,t,'"glyphs" url must include a "{range}" token'))),r}function Ir(e,t=Be){let n=[];return n=n.concat(kr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Or,"*":()=>[]}})),e.constants&&(n=n.concat(Fe({key:"constants",value:e.constants,style:e,styleSpec:t}))),Rr(n)}function Rr(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function Lr(e){return function(...t){return Rr(e.apply(this,t))}}Ir.source=Lr(Cr),Ir.light=Lr(Tr),Ir.terrain=Lr(Pr),Ir.layer=Lr(Ar),Ir.filter=Lr(br),Ir.paintProperty=Lr(wr),Ir.layoutProperty=Lr(Sr);const Br=Ir,zr=Br.light,Fr=Br.paintProperty,Nr=Br.layoutProperty;function Ur(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new Re(new Error(r.message))),n=!0;return n}var jr=Vr;function Vr(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}Vr.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Vr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vr.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Vr.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Vr.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var f=4*d;(s?s(u[f+0],u[f+1],u[f+2],u[f+3]):e<=u[f+2]&&t<=u[f+3]&&n>=u[f+0]&&r>=u[f+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},Vr.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),d=l;d<=u;d++)for(var f=c;f<=h;f++){var p=this.d*f+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(f),this._convertFromCellCoord(d+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,n,r,p,o,a,s))return}},Vr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Vr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Vr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const{ImageData:Gr,ImageBitmap:Hr}=o,Wr={};function qr(e,t,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Wr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}qr("Object",Object),jr.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},jr.deserialize=function(e){return new jr(e.buffer)},qr("Grid",jr),qr("Color",lt),qr("Error",Error),qr("ResolvedImage",dt),qr("StylePropertyFunction",ir),qr("StyleExpression",Kn,{omit:["_evaluator"]}),qr("ZoomDependentExpression",nr),qr("ZoomConstantExpression",tr),qr("CompoundExpression",Ct,{omit:["_evaluate"]});for(const e in Rn)Rn[e]._classRegistryKey||qr(`Expression_${e}`,Rn[e]);function Zr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Xr(e){return Hr&&e instanceof Hr}function Yr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Zr(e)||Xr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof Gr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const r of e)n.push(Yr(r,t));return n}if("object"==typeof e){const n=e.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");const i=n.serialize?n.serialize(e,t):{};if(!n.serialize){for(const n in e){if(!e.hasOwnProperty(n))continue;if(Wr[r].omit.indexOf(n)>=0)continue;const o=e[n];i[n]=Wr[r].shallow.indexOf(n)>=0?o:Yr(o,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function $r(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Zr(e)||Xr(e)||ArrayBuffer.isView(e)||e instanceof Gr)return e;if(Array.isArray(e))return e.map($r);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Wr[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const n of Object.keys(e)){if("$name"===n)continue;const i=e[n];r[n]=Wr[t].shallow.indexOf(n)>=0?i:$r(i)}return r}throw new Error("can't deserialize object of type "+typeof e)}class Jr{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const Kr=e=>e>=1536&&e<=1791,Qr=e=>e>=1872&&e<=1919,ei=e=>e>=2208&&e<=2303,ti=e=>e>=11904&&e<=12031,ni=e=>e>=12032&&e<=12255,ri=e=>e>=12272&&e<=12287,ii=e=>e>=12288&&e<=12351,oi=e=>e>=12352&&e<=12447,ai=e=>e>=12448&&e<=12543,si=e=>e>=12544&&e<=12591,li=e=>e>=12704&&e<=12735,ci=e=>e>=12736&&e<=12783,ui=e=>e>=12784&&e<=12799,hi=e=>e>=12800&&e<=13055,di=e=>e>=13056&&e<=13311,fi=e=>e>=13312&&e<=19903,pi=e=>e>=19968&&e<=40959,mi=e=>e>=40960&&e<=42127,gi=e=>e>=42128&&e<=42191,yi=e=>e>=44032&&e<=55215,vi=e=>e>=63744&&e<=64255,_i=e=>e>=64336&&e<=65023,bi=e=>e>=65040&&e<=65055,xi=e=>e>=65072&&e<=65103,wi=e=>e>=65104&&e<=65135,Si=e=>e>=65136&&e<=65279,Ai=e=>e>=65280&&e<=65519;function Ei(e){for(const t of e)if(Ti(t.charCodeAt(0)))return!0;return!1}function Mi(e){for(const t of e)if(!Ci(t.charCodeAt(0)))return!1;return!0}function Ci(e){return!(Kr(e)||Qr(e)||ei(e)||_i(e)||Si(e))}function Ti(e){return!(746!==e&&747!==e&&(e<4352||!(li(e)||si(e)||xi(e)&&!(e>=65097&&e<=65103)||vi(e)||di(e)||ti(e)||ci(e)||!(!ii(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||fi(e)||pi(e)||hi(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||yi(e)||oi(e)||ri(e)||(e=>e>=12688&&e<=12703)(e)||ni(e)||ui(e)||ai(e)&&12540!==e||!(!Ai(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!wi(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||bi(e)||(e=>e>=19904&&e<=19967)(e)||mi(e)||gi(e))))}function Pi(e){return!(Ti(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ii(e)||ai(e)||(e=>e>=57344&&e<=63743)(e)||xi(e)||wi(e)||Ai(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Di(e){return e>=1424&&e<=2303||_i(e)||Si(e)}function ki(e,t){return!(!t&&Di(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function Oi(e){for(const t of e)if(Di(t.charCodeAt(0)))return!0;return!1}let Ii=null,Ri="unavailable",Li=null;const Bi=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ri="error"),Ii&&Ii(e)};function zi(){Fi.fire(new Ie("pluginStateChange",{pluginStatus:Ri,pluginURL:Li}))}const Fi=new Le,Ni=function(){return Ri},Ui=function(){if("deferred"!==Ri||!Li)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ri="loading",zi(),Li&&Se({url:Li},(e=>{e?Bi(e):(Ri="loaded",zi())}))},ji={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>"loaded"===Ri||null!=ji.applyArabicShaping,isLoading:()=>"loading"===Ri,setState(e){Ri=e.pluginStatus,Li=e.pluginURL},isParsed:()=>null!=ji.applyArabicShaping&&null!=ji.processBidirectionalText&&null!=ji.processStyledBidirectionalText,getPluginURL:()=>Li};class Vi{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jr,this.transition={})}isSupportedScript(e){return function(e,t){for(const n of e)if(!ki(n.charCodeAt(0),t))return!1;return!0}(e,ji.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class Gi{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Wn(e))return new ir(e,t);if(Qn(e)){const n=rr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=lt.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Hi{constructor(e){this.property=e,this.value=new Gi(e,void 0)}transitioned(e,t){return new qi(this.property,this.value,t,v({},e.transition,this.transition),e.now)}untransitioned(){return new qi(this.property,this.value,null,{},0)}}class Wi{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return C(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Hi(this._values[e].property)),this._values[e].value=new Gi(this._values[e].property,null===t?void 0:C(t))}getTransition(e){return C(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Hi(this._values[e].property)),this._values[e].transition=C(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new Zi(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new Zi(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class qi{constructor(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,h(a))}}return i}}class Zi{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new $i(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Xi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return C(this._values[e].value)}setValue(e,t){this._values[e]=new Gi(this._values[e].property,null===t?void 0:C(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new $i(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class Yi{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class $i{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ji{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=Qt[this.specification.type];return r?r(e,t,n):e}}class Ki{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new Yi(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Yi(this,{kind:"constant",value:void 0},e.parameters);const r=Qt[this.specification.type];return r?new Yi(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class Qi extends Ki{possiblyEvaluate(e,t,n,r){if(void 0===e.value)return new Yi(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new Yi(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Yi(this,{kind:"constant",value:n},t)}return new Yi(this,e.expression,t)}evaluate(e,t,n,r,i,o){if("source"===e.kind){const a=e.evaluate(t,n,r,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class eo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Vi(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Vi(Math.floor(t.zoom),t)),e.expression.evaluate(new Vi(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class to{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class no{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new Gi(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new Hi(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}function ro(e,t){return 256*(e=p(Math.floor(e),0,255))+p(Math.floor(t),0,255)}qr("DataDrivenProperty",Ki),qr("DataConstantProperty",Ji),qr("CrossFadedDataDrivenProperty",Qi),qr("CrossFadedProperty",eo),qr("ColorRampProperty",to);const io={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oo{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ao{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function so(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=io[e.type].BYTES_PER_ELEMENT,o=n=lo(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:lo(n,Math.max(r,t)),alignment:t}}function lo(e,t){return Math.ceil(e/t)*t}class co extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}co.prototype.bytesPerElement=4,qr("StructArrayLayout2i4",co);class uo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}uo.prototype.bytesPerElement=8,qr("StructArrayLayout4i8",uo);class ho extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}ho.prototype.bytesPerElement=12,qr("StructArrayLayout2i4ub1f12",ho);class fo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}fo.prototype.bytesPerElement=8,qr("StructArrayLayout2f8",fo);class po extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s,l,c)}emplace(e,t,n,r,i,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}po.prototype.bytesPerElement=20,qr("StructArrayLayout10ui20",po);class mo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,l,c,u,h)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d){const f=12*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=c,this.int16[f+9]=u,this.int16[f+10]=h,this.int16[f+11]=d,e}}mo.prototype.bytesPerElement=24,qr("StructArrayLayout4i4ui4i24",mo);class go extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}go.prototype.bytesPerElement=12,qr("StructArrayLayout3f12",go);class yo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}yo.prototype.bytesPerElement=4,qr("StructArrayLayout1ul4",yo);class vo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s,l,c)}emplace(e,t,n,r,i,o,a,s,l,c,u){const h=16*e,d=8*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.float32[d+1]=r,this.float32[d+2]=i,this.float32[d+3]=o,this.float32[d+4]=a,this.int16[h+10]=s,this.uint32[d+6]=l,this.uint16[h+14]=c,this.uint16[h+15]=u,e}}vo.prototype.bytesPerElement=32,qr("StructArrayLayout2i4f1i1ul2ui32",vo);class _o extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}_o.prototype.bytesPerElement=12,qr("StructArrayLayout2i2i2i12",_o);class bo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}bo.prototype.bytesPerElement=16,qr("StructArrayLayout2f1f2i16",bo);class xo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}xo.prototype.bytesPerElement=12,qr("StructArrayLayout2ub2f12",xo);class wo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}wo.prototype.bytesPerElement=6,qr("StructArrayLayout3ui6",wo);class So extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y){const v=24*e,_=12*e,b=48*e;return this.int16[v+0]=t,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=c,this.uint16[v+12]=u,this.float32[_+7]=h,this.float32[_+8]=d,this.uint8[b+36]=f,this.uint8[b+37]=p,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,e}}So.prototype.bytesPerElement=48,qr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",So);class Ao extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A,E,M,C){const T=this.length;return this.resize(T+1),this.emplace(T,e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A,E,M,C)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A,E,M,C,T){const P=34*e,D=17*e;return this.int16[P+0]=t,this.int16[P+1]=n,this.int16[P+2]=r,this.int16[P+3]=i,this.int16[P+4]=o,this.int16[P+5]=a,this.int16[P+6]=s,this.int16[P+7]=l,this.uint16[P+8]=c,this.uint16[P+9]=u,this.uint16[P+10]=h,this.uint16[P+11]=d,this.uint16[P+12]=f,this.uint16[P+13]=p,this.uint16[P+14]=m,this.uint16[P+15]=g,this.uint16[P+16]=y,this.uint16[P+17]=v,this.uint16[P+18]=_,this.uint16[P+19]=b,this.uint16[P+20]=x,this.uint16[P+21]=w,this.uint16[P+22]=S,this.uint32[D+12]=A,this.float32[D+13]=E,this.float32[D+14]=M,this.float32[D+15]=C,this.float32[D+16]=T,e}}Ao.prototype.bytesPerElement=68,qr("StructArrayLayout8i15ui1ul4f68",Ao);class Eo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Eo.prototype.bytesPerElement=4,qr("StructArrayLayout1f4",Eo);class Mo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Mo.prototype.bytesPerElement=6,qr("StructArrayLayout3i6",Mo);class Co extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}Co.prototype.bytesPerElement=12,qr("StructArrayLayout1ul3ui12",Co);class To extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}To.prototype.bytesPerElement=4,qr("StructArrayLayout2ui4",To);class Po extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Po.prototype.bytesPerElement=2,qr("StructArrayLayout1ui2",Po);class Do extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}Do.prototype.bytesPerElement=16,qr("StructArrayLayout4f16",Do);class ko extends oo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new r(this.anchorPointX,this.anchorPointY)}}ko.prototype.size=32;class Oo extends vo{get(e){return new ko(this,e)}}qr("CollisionBoxArray",Oo);class Io extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Io.prototype.size=48;class Ro extends So{get(e){return new Io(this,e)}}qr("PlacedSymbolArray",Ro);class Lo extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Lo.prototype.size=68;class Bo extends Ao{get(e){return new Lo(this,e)}}qr("SymbolInstanceArray",Bo);class zo extends Eo{getoffsetX(e){return this.float32[1*e+0]}}qr("GlyphOffsetArray",zo);class Fo extends Mo{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}qr("SymbolLineVertexArray",Fo);class No extends oo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}No.prototype.size=12;class Uo extends Co{get(e){return new No(this,e)}}qr("FeatureIndexArray",Uo);class jo extends oo{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}jo.prototype.size=4;class Vo extends To{get(e){return new jo(this,e)}}qr("FillExtrusionCentroidArray",Vo);const Go=so([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]);var Ho=at((function(e){e.exports=function(e,t){var n,r,i,o,a,s,l,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),Wo=at((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),qo=Ho,Zo=Wo;qo.murmur3=Ho,qo.murmur2=Zo;class Xo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Yo(e)),this.positions.push(t,n,r)}getPositions(e){const t=Yo(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,n,r,i){for(;r<i;){const o=t[r+i>>1];let a=r-1,s=i+1;for(;;){do{a++}while(t[a]<o);do{s--}while(t[s]>o);if(a>=s)break;$o(t,a,s),$o(n,3*a,3*s),$o(n,3*a+1,3*s+1),$o(n,3*a+2,3*s+2)}s-r<i-s?(e(t,n,r,s),r=s+1):(e(t,n,s+1,i),i=s)}}(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new Xo;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Yo(e){const t=+e;return!isNaN(t)&&t<=s?t:qo(String(e))}function $o(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}qr("FeaturePositionMap",Xo);class Jo{constructor(e,t){this.gl=e.gl,this.location=t}}class Ko extends Jo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Qo extends Jo{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class ea extends Jo{constructor(e,t){super(e,t),this.current=lt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ta=new Float32Array(16),na=new Float32Array(9);function ra(e){return[ro(255*e.r,255*e.g),ro(255*e.b,255*e.a)]}class ia{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new ea(e,t):new Ko(e,t)}}class oa{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)?new Qo(e,t):new Ko(e,t)}}class aa{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Vi(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)}_setPaintValue(e,t,n){if("color"===this.type){const r=ra(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class sa{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i){const o=this.expression.evaluate(new Vi(this.zoom),t,{},r,[],i),a=this.expression.evaluate(new Vi(this.zoom+1),t,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,o)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=ra(n),o=ra(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=p(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,n){return new Ko(e,t)}}class la{constructor(e,t,n,r,i,o,a){this.expression=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=a;for(let e=0;e<t.length;++e);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(e,t,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(e,t,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],c=r[a];if(s&&l&&c)for(let n=e;n<t;n++)this.zoomInPaintVertexArray.emplace(n,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(n,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Go.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Go.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ca{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof Yi&&jn(o.property.specification)))continue;const a=ha(i,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[i]=h?new oa(s.value,a):new ia(s.value,a,l),r.push(`/u_${i}`);else if("source"===s.kind||h){const n=da(i,l,"source");this.binders[i]=h?new la(s,a,l,c,t,n,e.id):new aa(s,a,l,n),r.push(`/a_${i}`)}else{const e=da(i,l,"composite");this.binders[i]=new sa(s,a,l,c,t,e),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof aa||t instanceof sa?t.maxValue:0}populatePaintArrays(e,t,n,r,i){for(const o in this.binders){const a=this.binders[o];(a instanceof aa||a instanceof sa||a instanceof la)&&a.populatePaintArray(e,t,n,r,i)}}setConstantPatternPositions(e,t){for(const n in this.binders){const r=this.binders[n];r instanceof oa&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,r,i){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof aa||l instanceof sa||l instanceof la)&&!0===l.expression.isStateDependent){const c=r.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[a],i),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof ia||n instanceof oa)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof aa||n instanceof sa)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof la)for(let t=0;t<Go.members.length;t++)e.push(Go.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof ia||n instanceof oa||n instanceof sa)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof ia||i instanceof oa||i instanceof sa)for(const o of i.uniformNames)if(t[o]){const a=i.getBinding(e,t[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(e,t,n,r){for(const{name:e,property:i,binding:o}of t)this.binders[i].setUniform(o,r,n.get(i),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof la){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof aa||n instanceof sa)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof aa||n instanceof sa||n instanceof la)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof aa||t instanceof sa||t instanceof la)&&t.destroy()}}}class ua{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new ca(r,t,n);this.needsUpload=!1,this._featureMap=new Xo,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t,r,i,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,r)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function ha(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function da(e,t,n){const r={color:{source:fo,composite:Do},number:{source:Eo,composite:fo}},i=function(e){return{"line-pattern":{source:po,composite:po},"fill-pattern":{source:po,composite:po},"fill-extrusion-pattern":{source:po,composite:po}}[e]}(e);return i&&i[n]||r[t][n]}qr("ConstantBinder",ia),qr("CrossFadedConstantBinder",oa),qr("SourceExpressionBinder",aa),qr("CrossFadedCompositeBinder",la),qr("CompositeExpressionBinder",sa),qr("ProgramConfiguration",ca,{omit:["_buffers"]}),qr("ProgramConfigurationSet",ua);class fa extends Le{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Xi(t.layout)),t.paint)){this._transitionablePaint=new Wi(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $i(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Nr,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return A(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Fr,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(A(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;{const n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),M(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&Ur(this,e.call(Br,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Yi&&jn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const pa=so([{name:"a_pos",components:2,type:"Int16"}],4),{members:ma}=pa;class ga{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>ga.MAX_VERTEX_ARRAY_LENGTH&&P(`Max vertices per segment is ${ga.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>ga.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new ga([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}ga.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qr("SegmentVector",ga);const ya=Math.pow(2,14)-1,va=-ya-1;function _a(e){const t=8192/e.extent,n=e.loadGeometry();for(let e=0;e<n.length;e++){const r=n[e];for(let e=0;e<r.length;e++){const n=r[e],i=Math.round(n.x*t),o=Math.round(n.y*t);n.x=p(i,va,ya),n.y=p(o,va,ya),(i<n.x||i>n.x+1||o<n.y||o>n.y+1)&&P("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function ba(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?_a(e):[]}}function xa(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}class wa{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new co,this.indexArray=new wo,this.segments=new ga,this.programConfigurations=new ua(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){const r=this.layers[0],i=[];let o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(const{feature:t,id:r,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=ba(t,e);if(!this.layers[0]._featureFilter.filter(new Vi(this.zoom),l,n))continue;const c=o?o.evaluate(l,{},n):void 0,u={id:r,properties:t.properties,type:t.type,sourceLayerIndex:s,index:a,geometry:e?l.geometry:_a(t),patterns:{},sortKey:c};i.push(u)}o&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of i){const{geometry:i,index:o,sourceLayerIndex:a}=r,s=e[o].feature;this.addFeature(r,i,o,n),t.featureIndex.insert(s,i,o,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ma),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r){for(const n of t)for(const t of n){const n=t.x,r=t.y;if(n<0||n>=8192||r<0||r>=8192)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=i.vertexLength;xa(this.layoutVertexArray,n,r,-1,-1),xa(this.layoutVertexArray,n,r,1,-1),xa(this.layoutVertexArray,n,r,1,1),xa(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)}}function Sa(e,t){for(let n=0;n<e.length;n++)if(Oa(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Oa(e,t[n]))return!0;return!!Ca(e,t)}function Aa(e,t,n){return!!Oa(e,t)||!!Pa(t,e,n)}function Ea(e,t){if(1===e.length)return ka(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(Oa(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(ka(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ca(e,t[n]))return!0;return!1}function Ma(e,t,n){if(e.length>1){if(Ca(e,t))return!0;for(let r=0;r<t.length;r++)if(Pa(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(Pa(e[r],t,n))return!0;return!1}function Ca(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(Ta(r,i,t[e],t[e+1]))return!0}return!1}function Ta(e,t,n,r){return D(e,n,r)!==D(t,n,r)&&D(e,t,n)!==D(e,t,r)}function Pa(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let n=1;n<t.length;n++)if(Da(e,t[n-1],t[n])<r)return!0;return!1}function Da(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function ka(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function Oa(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Ia(e,t,n,i,o){for(const r of e)if(t<=r.x&&n<=r.y&&i>=r.x&&o>=r.y)return!0;const a=[new r(t,n),new r(t,o),new r(i,o),new r(i,n)];if(e.length>2)for(const t of a)if(Oa(e,t))return!0;for(let t=0;t<e.length-1;t++)if(Ra(e[t],e[t+1],a))return!0;return!1}function Ra(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=D(e,t,n[0]);return o!==D(e,t,n[1])||o!==D(e,t,n[2])||o!==D(e,t,n[3])}function La(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Ba(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function za(e,t,n,i,o){if(!t[0]&&!t[1])return e;const a=r.convert(t)._mult(o);"viewport"===n&&a._rotate(-i);const s=[];for(let t=0;t<e.length;t++)s.push(e[t].sub(a));return s}function Fa(e,t,n,i){const o=r.convert(e)._mult(i);return"viewport"===t&&o._rotate(-n),o}qr("CircleBucket",wa,{omit:["layers"]});const Na=new no({"circle-sort-key":new Ki(Be.layout_circle["circle-sort-key"])});var Ua={paint:new no({"circle-radius":new Ki(Be.paint_circle["circle-radius"]),"circle-color":new Ki(Be.paint_circle["circle-color"]),"circle-blur":new Ki(Be.paint_circle["circle-blur"]),"circle-opacity":new Ki(Be.paint_circle["circle-opacity"]),"circle-translate":new Ji(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new Ji(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ji(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ji(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ki(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ki(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ki(Be.paint_circle["circle-stroke-opacity"])}),layout:Na},ja="undefined"!=typeof Float32Array?Float32Array:Array;function Va(){var e=new ja(9);return ja!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ga(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ha(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*h+w*m,e[1]=_*i+b*l+x*d+w*g,e[2]=_*o+b*c+x*f+w*y,e[3]=_*a+b*u+x*p+w*v,e[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,e[5]=_*i+b*l+x*d+w*g,e[6]=_*o+b*c+x*f+w*y,e[7]=_*a+b*u+x*p+w*v,e[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,e[9]=_*i+b*l+x*d+w*g,e[10]=_*o+b*c+x*f+w*y,e[11]=_*a+b*u+x*p+w*v,e[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,e[13]=_*i+b*l+x*d+w*g,e[14]=_*o+b*c+x*f+w*y,e[15]=_*a+b*u+x*p+w*v,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Wa=Ha;function qa(){var e=new ja(3);return ja!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Za(e){var t=new ja(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Xa(e){return Math.hypot(e[0],e[1],e[2])}function Ya(e,t,n){var r=new ja(3);return r[0]=e,r[1]=t,r[2]=n,r}function $a(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ja(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ka(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Qa(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function es(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function ts(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ns(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function rs(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function is(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],l=t[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,d=i*h-o*u,f=o*c-r*h,p=r*u-i*c,m=2*n[3];return u*=m,h*=m,f*=2,p*=2,e[0]=a+(c*=m)+(d*=2),e[1]=s+u+f,e[2]=l+h+p,e}var os,as=Ja,ss=Xa;function ls(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function cs(){var e=new ja(4);return ja!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function us(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function hs(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}qa(),os=new ja(4),ja!=Float32Array&&(os[0]=0,os[1]=0,os[2]=0,os[3]=0),qa(),Ya(1,0,0),Ya(0,1,0),cs(),cs(),Va();class ds{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n){const r=Math.pow(2,n),i=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const i=ls([],n,e),o=1/i[3]/t*r;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(i,i,[o,o,1/i[3],o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=es([],ns([],as([],i[e[0]],i[e[1]]),as([],i[e[2]],i[e[1]]))),n=-ts(t,i[e[1]]);return t.concat(n)}));return new ds(i,o)}}class fs{constructor(e,t){this.min=e,this.max=t,this.center=Ka([],$a([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=Za(this.min),r=Za(this.max);for(let e=0;e<t.length;e++)n[e]=t[e]?this.min[e]:this.center[e],r[e]=t[e]?this.center[e]:this.max[e];return r[2]=this.max[2],new fs(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}intersects(e){const t=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let o=0;o<e.planes.length;o++){const a=e.planes[o];let s=0;for(let e=0;e<t.length;e++)s+=(r=a)[0]*(i=t[e])[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]>=0;if(0===s)return 0;s!==t.length&&(n=!1)}var r,i;if(n)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}function ps(e,t,n){const i=ls([],[e.x,e.y,t,1],n);return new r(i[0]/i[3],i[1]/i[3])}const ms=Ya(0,0,0),gs=Ya(0,0,1);function ys(e,t){const n=qa();return ms[2]=t,e.intersectsPlane(ms,gs,n),new r(n[0],n[1])}class vs extends wa{}function _s(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function bs(e,{width:t,height:n},r){if(t===e.width&&n===e.height)return;const i=_s({},{width:t,height:n},r);xs(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,n)},r),e.width=t,e.height=n,e.data=i.data}function xs(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}qr("HeatmapBucket",vs,{omit:["layers"]});class ws{constructor(e,t){_s(this,e,1,t)}resize(e){bs(this,e,1)}clone(){return new ws({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){xs(e,t,n,r,i,1)}}class Ss{constructor(e,t){_s(this,e,4,t)}resize(e){bs(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ss({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){xs(e,t,n,r,i,4)}}qr("AlphaImage",ws),qr("RGBAImage",Ss);var As={paint:new no({"heatmap-radius":new Ki(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ki(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ji(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new to(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ji(Be.paint_heatmap["heatmap-opacity"])})};function Es(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Ss({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,i=0;t<r;++t,i+=4*n)for(let r=0,a=0;r<n;r++,a+=4){const s=r/(n-1),{start:l,end:c}=e.clips[t];o(i,a,l*(1-s)+c*s)}else for(let e=0,t=0;e<n;e++,t+=4)o(0,t,e/(n-1));return i}var Ms={paint:new no({"hillshade-illumination-direction":new Ji(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ji(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ji(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ji(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ji(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ji(Be.paint_hillshade["hillshade-accent-color"])})};const Cs=so([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ts}=Cs;var Ps=ks,Ds=ks;function ks(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,d=Os(e,0,h,n,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Os(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Gs(a));for(s.sort(Ns),i=0;i<s.length;i++)Us(s[i],n),n=Is(n,n.next);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(l=e[p+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return Rs(d,f,n,r,i,c),f}function Os(e,t,n,r,i){var o,a;if(i===nl(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Qs(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Qs(o,e[o],e[o+1],a);return a&&Zs(a,a.next)&&(el(a),a=a.next),a}function Is(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Zs(r,r.next)&&0!==qs(r.prev,r,r.next))r=r.next;else{if(el(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Rs(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Vs(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Bs(e,r,i,o):Ls(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),el(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Rs(e=zs(Is(e),t,n),t,n,r,i,o,2):2===a&&Fs(e,t,n,r,i,o):Rs(Is(e),t,n,r,i,o,1);break}}}function Ls(e){var t=e.prev,n=e,r=e.next;if(qs(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Hs(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Bs(e,t,n,r){var i=e.prev,o=e,a=e.next;if(qs(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=Vs(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),u=Vs(s,l,t,n,r),h=e.prevZ,d=e.nextZ;h&&h.z>=c&&d&&d.z<=u;){if(h!==e.prev&&h!==e.next&&Hs(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&qs(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==e.prev&&d!==e.next&&Hs(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&qs(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&Hs(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&qs(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==e.prev&&d!==e.next&&Hs(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&qs(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function zs(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Zs(i,o)&&Xs(i,r,r.next,o)&&Js(i,o)&&Js(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),el(r),el(r.next),r=e=o),r=r.next}while(r!==e);return Is(r)}function Fs(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ws(a,s)){var l=Ks(a,s);return a=Is(a,a.next),l=Is(l,l.next),Rs(a,t,n,r,i,o),void Rs(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Ns(e,t){return e.x-t.x}function Us(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&Hs(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Js(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&js(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(e,t)){var n=Ks(t,e);Is(t,t.next),Is(n,n.next)}}function js(e,t){return qs(e.prev,e,t.prev)<0&&qs(t.next,e,e.next)<0}function Vs(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Gs(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Hs(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ws(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Xs(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Js(e,t)&&Js(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(qs(e.prev,e,t.prev)||qs(e,t.prev,t))||Zs(e,t)&&qs(e.prev,e,e.next)>0&&qs(t.prev,t,t.next)>0)}function qs(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Zs(e,t){return e.x===t.x&&e.y===t.y}function Xs(e,t,n,r){var i=$s(qs(e,t,n)),o=$s(qs(e,t,r)),a=$s(qs(n,r,e)),s=$s(qs(n,r,t));return i!==o&&a!==s||!(0!==i||!Ys(e,n,t))||!(0!==o||!Ys(e,r,t))||!(0!==a||!Ys(n,e,r))||!(0!==s||!Ys(n,t,r))}function Ys(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $s(e){return e>0?1:e<0?-1:0}function Js(e,t){return qs(e.prev,e,e.next)<0?qs(e,t,e.next)>=0&&qs(e,e.prev,t)>=0:qs(e,t,e.prev)<0||qs(e,e.next,t)<0}function Ks(e,t){var n=new tl(e.i,e.x,e.y),r=new tl(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Qs(e,t,n,r){var i=new tl(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function el(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function tl(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nl(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function rl(e,t,n,r,i){!function e(t,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}var h=t[n],d=r,f=i;for(il(t,r,n),o(t[i],h)>0&&il(t,r,i);d<f;){for(il(t,d,f),d++,f--;o(t[d],h)<0;)d++;for(;o(t[f],h)>0;)f--}0===o(t[r],h)?il(t,r,f):il(t,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,t,n||0,r||e.length-1,i||ol)}function il(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ol(e,t){return e<t?-1:e>t?1:0}function al(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let t=0;t<n;t++){const n=k(e[t]);0!==n&&(e[t].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(i&&r.push(i),i=[e[t]]):i.push(e[t]))}if(i&&r.push(i),t>1)for(let e=0;e<r.length;e++)r[e].length<=t||(rl(r[e],t,1,r[e].length-1,sl),r[e]=r[e].slice(0,t));return r}function sl(e,t){return t.area-e.area}function ll(e,t,n){const r=n.patternDependencies;let i=!1;for(const n of t){const t=n.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const o=t.constantOr(null);o&&(i=!0,r[o.to]=!0,r[o.from]=!0)}return i}function cl(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},n,{},i.availableImages),s=t.evaluate({zoom:r},n,{},i.availableImages),l=t.evaluate({zoom:r+1},n,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:e,mid:s,max:l}}}return n}ks.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(nl(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(nl(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},ks.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n},Ps.default=Ds;class ul{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new co,this.indexArray=new wo,this.indexArray2=new To,this.programConfigurations=new ua(e.layers,e.zoom),this.segments=new ga,this.segments2=new ga,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=ll("fill",this.layers,t);const r=this.layers[0].layout.get("fill-sort-key"),i=[];for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=ba(o,e);if(!this.layers[0]._featureFilter.filter(new Vi(this.zoom),c,n))continue;const u=r?r.evaluate(c,{},n,t.availableImages):void 0,h={id:a,properties:o.properties,type:o.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:_a(o),patterns:{},sortKey:u};i.push(h)}r&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of i){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=cl("fill",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,{});t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ts),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i){for(const e of al(t,500)){let t=0;for(const n of e)t+=n.length;const n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(i.length/2);const n=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(r+t.length-1,r),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(r+e-1,r+e),i.push(t[e].x),i.push(t[e].y);n.vertexLength+=t.length,n.primitiveLength+=t.length}const a=Ps(i,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(r+a[e],r+a[e+1],r+a[e+2]);n.vertexLength+=t,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}qr("FillBucket",ul,{omit:["layers","patternFeatures"]});const hl=new no({"fill-sort-key":new Ki(Be.layout_fill["fill-sort-key"])});var dl={paint:new no({"fill-antialias":new Ji(Be.paint_fill["fill-antialias"]),"fill-opacity":new Ki(Be.paint_fill["fill-opacity"]),"fill-color":new Ki(Be.paint_fill["fill-color"]),"fill-outline-color":new Ki(Be.paint_fill["fill-outline-color"]),"fill-translate":new Ji(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new Ji(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qi(Be.paint_fill["fill-pattern"])}),layout:hl};const fl=so([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),pl=so([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:ml}=fl;var gl=yl;function yl(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(vl,this,t)}function vl(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function _l(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}yl.types=["Unknown","Point","LineString","Polygon"],yl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,l=[];e.pos<n;){if(o<=0){var c=e.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&l.push(t),t=[]),t.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&l.push(t),l},yl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},yl.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=yl.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=_l(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var bl=xl;function xl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(wl,this,t),this.length=this._features.length}function wl(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function Sl(e,t,n){if(3===e){var r=new bl(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}xl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new gl(this._pbf,t,this.extent,this._keys,this._values)};var Al={VectorTile:function(e,t){this.layers=e.readFields(Sl,{},t)},VectorTileFeature:gl,VectorTileLayer:bl};const El=Al.VectorTileFeature.types,Ml=Math.pow(2,13);function Cl(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*Ml)<<1)+i,Math.round(s))}class Tl{constructor(){this.acc=new r(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new r(e.x,e.y),this.max=new r(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);let n=!!this.borders;const r=this.min,i=this.max;e.x<r.x?(r.x=e.x,n=!0):e.x>i.x&&(i.x=e.x,n=!0),e.y<r.y?(r.y=e.y,n=!0):e.y>i.y&&(i.y=e.y,n=!0),((0===e.x||8192===e.x)&&e.x===t.x)!=((0===e.y||8192===e.y)&&e.y===t.y)&&this.processBorderOverlap(e,t),n&&this.checkBorderIntersection(e,t)}checkBorderIntersection(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,Kt(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>8192!=e.x>8192&&this.addBorderIntersection(1,Kt(t.y,e.y,(8192-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Kt(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>8192!=e.y>8192&&this.addBorderIntersection(3,Kt(t.x,e.x,(8192-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new r(0,0)}span(){return new r(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class Pl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new uo,this.centroidVertexArray=new Vo,this.indexArray=new wo,this.programConfigurations=new ua(e.layers,e.zoom),this.segments=new ga,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n){this.features=[],this.hasPattern=ll("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/8192/(1<<e.z)}(n);for(const{feature:r,id:i,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=ba(r,e);if(!this.layers[0]._featureFilter.filter(new Vi(this.zoom),s,n))continue;const l={id:i,sourceLayerIndex:a,index:o,geometry:e?s.geometry:_a(r),properties:r.properties,type:r.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(cl("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,n,{}),t.featureIndex.insert(r,l.geometry,o,a,this.index,c)}this.sortBorders()}addFeatures(e,t,n){for(const e of this.features){const{geometry:r}=e;this.addFeature(e,r,e.index,t,n)}this.sortBorders()}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,pl.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i){const o=this.enableTerrain&&e.properties&&e.properties.hasOwnProperty("type")&&e.properties.hasOwnProperty("height")&&"Polygon"===El[e.type]?new Tl:null;for(const n of al(t,500)){let t=0,r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===n.length||(a=n[0]).every((e=>e.x<=0))||a.every((e=>e.x>=8192))||a.every((e=>e.y<=0))||a.every((e=>e.y>=8192)))continue;for(let e=0;e<n.length;e++){const i=n[e];if(0===i.length)continue;t+=i.length;let a=0;o&&o.startRing(i[0]);for(let e=0;e<i.length;e++){const t=i[e];if(e>=1){const n=i[e-1];if(!Dl(t,n)){o&&o.append(t,n),r.vertexLength+4>ga.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=t.sub(n)._perp(),i=e.x/(Math.abs(e.x)+Math.abs(e.y)),s=e.y>0?1:0,l=n.dist(t);a+l>32768&&(a=0),Cl(this.layoutVertexArray,t.x,t.y,i,s,0,0,a),Cl(this.layoutVertexArray,t.x,t.y,i,s,0,1,a),a+=l,Cl(this.layoutVertexArray,n.x,n.y,i,s,0,0,a),Cl(this.layoutVertexArray,n.x,n.y,i,s,0,1,a);const c=r.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+t>ga.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==El[e.type])continue;const i=[],s=[],l=r.vertexLength;for(let e=0;e<n.length;e++){const t=n[e];if(0!==t.length){t!==n[0]&&s.push(i.length/2);for(let e=0;e<t.length;e++){const n=t[e];Cl(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),i.push(n.x),i.push(n.y),o&&o.currentPolyCount.top++}}}const c=Ps(i,s);for(let e=0;e<c.length;e+=3)this.indexArray.emplaceBack(l+c[e],l+c[e+2],l+c[e+1]);r.primitiveLength+=c.length/3,r.vertexLength+=t}var a;if(o&&o.polyCount.length>0){if(o.borders){o.vertexArrayOffset=this.centroidVertexArray.length;const e=o.borders,t=this.featuresOnBorder.push(o)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(o.borders?void 0:o.centroid(),o)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t,n=!0){let r,i;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7.3*e.x),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(o++,r,i)}}}function Dl(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}qr("FillExtrusionBucket",Pl,{omit:["layers","features"]}),qr("PartMetadata",Tl);var kl={paint:new no({"fill-extrusion-opacity":new Ji(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ki(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ji(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ji(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qi(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ki(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ki(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ji(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ol(e,t){return e.x*t.x+e.y*t.y}function Il(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=Ol(s,s),h=Ol(s,l),d=Ol(l,l),f=Ol(c,s),p=Ol(c,l),m=u*d-h*h,g=(d*f-h*p)/m,y=(u*p-h*f)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Rl(e){const t=new r(e[0],e[1]);return t.z=e[2],t}function Ll(e,t,n,r,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7.3):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=e.tileCoordToPixel(r,i),d=2*c+1,f=2*u+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-c,h.y-u,d,f),m=Math.abs(p[0]-p[1]),g=Math.abs(p[2]-p[3]),y=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),v=Math.min(.25,.5*l*(m+g)/d),_=Math.min(.25,.5*l*y/f);return s+Math.max(v*o,_*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const Bl=so([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:zl}=Bl,Fl=so([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Nl}=Fl,Ul=Al.VectorTileFeature.types,jl=Math.cos(Math.PI/180*37.5);class Vl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new ho,this.layoutVertexArray2=new fo,this.indexArray=new wo,this.programConfigurations=new ua(e.layers,e.zoom),this.segments=new ga,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=ll("line",this.layers,t);const r=this.layers[0].layout.get("line-sort-key"),i=[];for(const{feature:t,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=ba(t,e);if(!this.layers[0]._featureFilter.filter(new Vi(this.zoom),l,n))continue;const c=r?r.evaluate(l,{},n):void 0,u={id:o,properties:t.properties,type:t.type,sourceLayerIndex:s,index:a,geometry:e?l.geometry:_a(t),patterns:{},sortKey:c};i.push(u)}r&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of i){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=cl("line",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,{});t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Nl)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const n of t)this.addLine(n,e,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ul[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,f,p,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let t=l;t<s;t++){if(f=t===s-1?a?e[l+1]:void 0:e[t+1],f&&e[t].equals(f))continue;m&&(p=m),h&&(d=h),h=e[t],m=f?f.sub(h)._unit()._perp():p,p=p||m;let g=p.add(m);0===g.x&&0===g.y||g._unit();const y=p.x*m.x+p.y*m.y,v=g.x*m.x+g.y*m.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<jl&&d&&f,w=p.x*m.y-p.y*m.x>0;if(x&&t>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,p,0,0,u),d=t}}const S=d&&f;let A=S?n:a?"butt":r;if(S&&"round"===A&&(_<o?A="miter":_<=2&&(A="fakeround")),"miter"===A&&_>i&&(A="bevel"),"bevel"===A&&(_>2&&(A="flipbevel"),_<i&&(A="miter")),d&&this.updateDistance(d,h),"miter"===A)g._mult(_),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===A){if(_>100)g=m.mult(-1);else{const e=_*p.add(m).mag()/p.sub(m).mag();g._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===A||"fakeround"===A){const e=-Math.sqrt(_*_-1),t=w?e:0,n=w?0:e;if(d&&this.addCurrentVertex(h,p,t,n,u),"fakeround"===A){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(p)._mult(n)._add(p)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}f&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===A)this.addCurrentVertex(h,g,0,0,u);else if("square"===A){const e=d?1:-1;this.addCurrentVertex(h,g,e,e,u)}else"round"===A&&(d&&(this.addCurrentVertex(h,p,0,0,u),this.addCurrentVertex(h,p,1,1,u,!0)),f&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&t<s-1){const e=h.dist(f);if(e>2*c){const t=h.add(f.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex({x:e,y:t},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}qr("LineBucket",Vl,{omit:["layers","patternFeatures"]});const Gl=new no({"line-cap":new Ji(Be.layout_line["line-cap"]),"line-join":new Ki(Be.layout_line["line-join"]),"line-miter-limit":new Ji(Be.layout_line["line-miter-limit"]),"line-round-limit":new Ji(Be.layout_line["line-round-limit"]),"line-sort-key":new Ki(Be.layout_line["line-sort-key"])});var Hl={paint:new no({"line-opacity":new Ki(Be.paint_line["line-opacity"]),"line-color":new Ki(Be.paint_line["line-color"]),"line-translate":new Ji(Be.paint_line["line-translate"]),"line-translate-anchor":new Ji(Be.paint_line["line-translate-anchor"]),"line-width":new Ki(Be.paint_line["line-width"]),"line-gap-width":new Ki(Be.paint_line["line-gap-width"]),"line-offset":new Ki(Be.paint_line["line-offset"]),"line-blur":new Ki(Be.paint_line["line-blur"]),"line-dasharray":new eo(Be.paint_line["line-dasharray"]),"line-pattern":new Qi(Be.paint_line["line-pattern"]),"line-gradient":new to(Be.paint_line["line-gradient"])}),layout:Gl};const Wl=new class extends Ki{possiblyEvaluate(e,t){return t=new Vi(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=v({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(Hl.paint.properties["line-width"].specification);function ql(e,t){return t>0?t+2*e:e}Wl.useIntegerZoom=!0;const Zl=so([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xl=so([{name:"a_projected_pos",components:3,type:"Float32"}],4),Yl=(so([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),so([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$l=so([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),Jl=(so([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),so([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Kl=so([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ql(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Vi(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Vi(a)),maxSize:n.evaluate(new Vi(s)),interpolationType:r}}}function ec(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/128:"composite"===e.kind?Kt(r/128,i/128,n):t}function tc(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?p(pn.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=Kt(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}so([{name:"triangle",components:3,type:"Uint16"}]),so([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),so([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),so([{type:"Float32",name:"offsetX"}]),so([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var nc=Object.freeze({__proto__:null,getSizeData:Ql,evaluateSizeForFeature:ec,evaluateSizeForZoom:tc,SIZE_PACK_FACTOR:128});function rc(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),ji.applyArabicShaping&&(e=ji.applyArabicShaping(e)),e}(e.text,t,n)})),e}const ic={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var oc=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},ac=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=p,a/=256,c-=8);e[n+f-p]|=128*m},sc=lc;function lc(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}lc.Varint=0,lc.Fixed64=1,lc.Bytes=2,lc.Fixed32=5;var cc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function uc(e){return e.type===lc.Bytes?e.readVarint()+e.pos:e.pos+1}function hc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function dc(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function fc(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function pc(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function mc(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function gc(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function yc(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function vc(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function _c(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function bc(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function xc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function wc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Sc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Ac(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Ec(e,t,n){1===e&&n.readMessage(Mc,t)}function Mc(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(Cc,{});t.push({id:e,bitmap:new ws({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}}function Cc(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Tc(e){let t=0,n=0;for(const r of e)t+=r.w*r.h,n=Math.max(n,r.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const t of e)for(let e=r.length-1;e>=0;e--){const n=r[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===n.w&&t.h===n.h){const t=r.pop();e<r.length&&(r[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(r.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}lc.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=wc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Ac(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=wc(this.buf,this.pos)+4294967296*wc(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=wc(this.buf,this.pos)+4294967296*Ac(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=oc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=oc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return hc(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return hc(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return hc(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return hc(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return hc(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return hc(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&cc?function(e,t,n){return cc.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==lc.Bytes)return e.push(this.readVarint(t));var n=uc(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==lc.Bytes)return e.push(this.readSVarint());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==lc.Bytes)return e.push(this.readBoolean());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==lc.Bytes)return e.push(this.readFloat());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==lc.Bytes)return e.push(this.readDouble());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==lc.Bytes)return e.push(this.readFixed32());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==lc.Bytes)return e.push(this.readSFixed32());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==lc.Bytes)return e.push(this.readFixed64());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==lc.Bytes)return e.push(this.readSFixed64());var t=uc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===lc.Varint)for(;this.buf[this.pos++]>127;);else if(t===lc.Bytes)this.pos=this.readVarint()+this.pos;else if(t===lc.Fixed32)this.pos+=4;else{if(t!==lc.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Sc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Sc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Sc(this.buf,-1&e,this.pos),Sc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Sc(this.buf,-1&e,this.pos),Sc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&dc(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),ac(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ac(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&dc(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,lc.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,pc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,yc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,mc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,gc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,vc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,_c,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,bc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xc,t)},writeBytesField:function(e,t){this.writeTag(e,lc.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,lc.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,lc.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,lc.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,lc.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,lc.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,lc.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,lc.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,lc.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,lc.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Pc{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Dc{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=Tc(i),s=new Ss({width:o||1,height:a||1});for(const t in e){const r=e[t],i=n[t].paddedRect;Ss.copy(r.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},r.data)}for(const e in t){const n=t[e],i=r[e].paddedRect,o=i.x+1,a=i.y+1,l=n.data.width,c=n.data.height;Ss.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),Ss.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Ss.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Ss.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Ss.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new Pc(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}qr("ImagePosition",Pc),qr("ImageAtlas",Dc);const kc={horizontal:1,vertical:2,horizontalOnly:3};class Oc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Oc;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Oc;return t.imageName=e,t}}class Ic{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Ic;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;t+=r&&Pi(r)&&!ic[e[n+1]]||i&&Pi(i)&&!ic[e[n-1]]||!ic[e[n]]?e[n]:ic[e[n]]}return t}(this.text)}trim(){let e=0;for(let t=0;t<this.text.length&&Lc[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Lc[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Ic;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Oc.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void P("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Oc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):P("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rc(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=Ic.fromFeature(e,i);let y;h===kc.vertical&&g.verticalizePunctuation();const{processBidirectionalText:v,processStyledBidirectionalText:_}=ji;if(v&&1===g.sections.length){y=[];const e=v(g.toString(),jc(g,c,o,t,r,f,p));for(const t of e){const e=new Ic;e.text=t,e.sections=g.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);y.push(e)}}else if(_){y=[];const e=_(g.text,g.sectionIndex,jc(g,c,o,t,r,f,p));for(const t of e){const e=new Ic;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const n=[],r=e.text;let i=0;for(const r of t)n.push(e.substring(i,r)),i=r;return i<r.length&&n.push(e.substring(i,r.length)),n}(g,jc(g,c,o,t,r,f,p));const b=[],x={positionedLines:b,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,t,n,r,i,o,a,s,l,c,u,h){let d=0,f=-17,p=0,m=0;const g="right"===s?1:"left"===s?0:.5;let y=0;for(const a of i){a.trim();const i=a.getMaxScale(),s=24*(i-1),_={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=_;const b=_.positionedGlyphs;let x=0;if(!a.length()){f+=o,++y;continue}for(let o=0;o<a.length();o++){const p=a.getSection(o),m=a.getSectionIndex(o),g=a.getCharCode(o);let y=0,_=null,w=null,S=null,A=24;const E=!(l===kc.horizontal||!u&&!Ti(g)||u&&(Lc[g]||(v=g,Kr(v)||Qr(v)||ei(v)||_i(v)||Si(v))));if(p.imageName){const t=r[p.imageName];if(!t)continue;S=p.imageName,e.iconsInText=e.iconsInText||!0,w=t.paddedRect;const n=t.displaySize;p.scale=24*p.scale/h,_={width:n[0],height:n[1],left:1,top:-3,advance:E?n[1]:n[0],localGlyph:!1},y=s+(24-n[1]*p.scale),A=_.advance;const o=E?n[0]*p.scale-24*i:n[1]*p.scale-24*i;o>0&&o>x&&(x=o)}else{const e=n[p.fontStack],r=e&&e[g];if(r&&r.rect)w=r.rect,_=r.metrics;else{const e=t[p.fontStack],n=e&&e[g];if(!n)continue;_=n.metrics}y=24*(i-p.scale)}E?(e.verticalizable=!0,b.push({glyph:g,imageName:S,x:d,y:f+y,vertical:E,scale:p.scale,localGlyph:_.localGlyph,fontStack:p.fontStack,sectionIndex:m,metrics:_,rect:w}),d+=A*p.scale+c):(b.push({glyph:g,imageName:S,x:d,y:f+y,vertical:E,scale:p.scale,localGlyph:_.localGlyph,fontStack:p.fontStack,sectionIndex:m,metrics:_,rect:w}),d+=_.advance*p.scale+c)}0!==b.length&&(p=Math.max(d-c,p),Gc(b,0,b.length-1,g,x)),d=0;const w=o*i+x;_.lineOffset=Math.max(x,s),f+=w,m=Math.max(w,m),++y}var v;const _=f- -17,{horizontalAlign:b,verticalAlign:x}=Vc(a);(function(e,t,n,r,i,o,a,s,l){const c=(t-n)*i;let u=0;u=o!==a?-s*r- -17:(-r*l+.5)*a;for(const t of e)for(const e of t.positionedGlyphs)e.x+=c,e.y+=u})(e.positionedLines,g,b,x,p,m,o,_,i.length),e.top+=-x*_,e.bottom=e.top+_,e.left+=-b*p,e.right=e.left+p}(x,t,n,r,y,a,s,l,h,c,d,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&x}const Lc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zc(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*24/o+i:0}{const r=n[t.fontStack],o=r&&r[e];return o?o.metrics.advance*t.scale+i:0}}function Fc(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Nc(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Uc(e,t,n,r,i,o){let a=null,s=Fc(t,n,i,o);for(const e of r){const r=Fc(t-e.x,n,i,o)+e.badness;r<=s&&(a=e,s=r)}return{index:e,x:t,priorBreak:a,badness:s}}function jc(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];const s=[],l=function(e,t,n,r,i,o){let a=0;for(let n=0;n<e.length();n++){const s=e.getSection(n);a+=zc(e.getCharCode(n),s,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),c=e.text.indexOf("​")>=0;let u=0;for(let n=0;n<e.length();n++){const o=e.getSection(n),d=e.getCharCode(n);if(Lc[d]||(u+=zc(d,o,r,i,t,a)),n<e.length()-1){const t=!((h=d)<11904||!(li(h)||si(h)||xi(h)||vi(h)||di(h)||ti(h)||ci(h)||ii(h)||fi(h)||pi(h)||hi(h)||Ai(h)||oi(h)||ri(h)||ni(h)||ui(h)||ai(h)||bi(h)||gi(h)||mi(h)));(Bc[d]||t||o.imageName)&&s.push(Uc(n+1,u,l,s,Nc(d,e.getCharCode(n+1),t&&c),!1))}}var h;return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Uc(e.length(),u,l,s,0,!0))}function Vc(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Gc(e,t,n,r,i){if(!r&&!i)return;const o=e[n],a=(e[n].x+o.metrics.advance*o.scale)*r;for(let r=t;r<=n;r++)e[r].x-=a,e[r].y+=i}function Hc(e,t,n){const{horizontalAlign:r,verticalAlign:i}=Vc(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Wc(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,f;"width"===n||"both"===n?(f=i[0]+l-r[3],h=i[0]+c+r[1]):(f=i[0]+(l+c-a.displaySize[0])/2,h=f+a.displaySize[0]);const p=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+p-r[0],d=i[1]+m+r[2]):(u=i[1]+(p+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:f,collisionPadding:s}}class qc extends r{constructor(e,t,n,r){super(e,t),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new qc(this.x,this.y,this.angle,this.segment)}}function Zc(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function Xc(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Yc(e,t,n){return e?.6*t*n:0}function $c(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Jc(e,t,n,r,i,o){const a=Yc(n,i,o),s=$c(n,r)*o;let l=0;const c=Xc(e)/2;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1],o=r.dist(i);if(l+o>c){const u=(c-l)/o,h=Kt(r.x,i.x,u),d=Kt(r.y,i.y,u),f=new qc(h,d,i.angleTo(r),n);return f._round(),!a||Zc(e,f,s,a,t)?f:void 0}l+=o}}function Kc(e,t,n,r,i,o,a,s,l){const c=Yc(r,o,a),u=$c(r,i),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),function e(t,n,r,i,o,a,s,l,c){const u=a/2,h=Xc(t);let d=0,f=n-r,p=[];for(let e=0;e<t.length-1;e++){const n=t[e],s=t[e+1],l=n.dist(s),m=s.angleTo(n);for(;f+r<d+l;){f+=r;const g=(f-d)/l,y=Kt(n.x,s.x,g),v=Kt(n.y,s.y,g);if(y>=0&&y<c&&v>=0&&v<c&&f-u>=0&&f+u<=h){const n=new qc(y,v,m,e);n._round(),i&&!Zc(t,n,a,i,o)||p.push(n)}}d+=l}return l||p.length||s||(p=e(t,d/2,r,i,o,a,s,!0,c)),p}(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,d,!1,l)}function Qc(e,t,n,i,o){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new r(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new r(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new r(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new r(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=i&&u.x>=i||(s.x>=i?s=new r(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=i&&(u=new r(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=o&&u.y>=o||(s.y>=o?s=new r(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round():u.y>=o&&(u=new r(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}qr("Anchor",qc);var eu=ru,tu=ru,nu=1e20;function ru(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function iu(e,t,n,r,i,o){for(var a=0;a<t;a++)ou(e,a,t,n,r,i,o);for(var s=0;s<n;s++)ou(e,s*t,1,t,r,i,o)}function ou(e,t,n,r,i,o,a){var s,l,c,u;for(o[0]=0,a[0]=-nu,a[1]=nu,s=0;s<r;s++)i[s]=e[t+s*n];for(s=1,l=0,c=0;s<r;s++){do{c=(i[s]-i[u=o[l]]+s*s-u*u)/(s-u)/2}while(c<=a[l]&&--l>-1);o[++l]=s,a[l]=c,a[l+1]=nu}for(s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;e[t+s*n]=i[u=o[l]]+(s-u)*(s-u)}}ru.prototype._draw=function(e,t){var n,r,i,o,a,s,l,c,u=this.ctx.measureText(e),h=u.width,d=2*this.buffer;t&&void 0!==u.actualBoundingBoxLeft?(a=Math.floor(u.actualBoundingBoxAscent)-this.middle,s=Math.max(0,this.middle-Math.ceil(u.actualBoundingBoxAscent)),l=this.buffer,n=(r=Math.min(this.size,Math.ceil(u.actualBoundingBoxRight-u.actualBoundingBoxLeft)))+d,i=(o=Math.min(this.size-s,Math.ceil(u.actualBoundingBoxAscent+u.actualBoundingBoxDescent)))+d):(n=r=this.size,i=o=this.size,a=0,s=l=0),r&&o&&(this.ctx.clearRect(l,s,r,o),this.ctx.fillText(e,this.buffer,this.middle),c=this.ctx.getImageData(l,s,r,o));var f=new Uint8ClampedArray(n*i);return function(e,t,n,r,i,o,a){o.fill(nu,0,t*n),a.fill(0,0,t*n);for(var s=(t-r)/2,l=0;l<i;l++)for(var c=0;c<r;c++){var u=(l+s)*t+c+s,h=e.data[4*(l*r+c)+3]/255;if(1===h)o[u]=0,a[u]=nu;else if(0===h)o[u]=nu,a[u]=0;else{var d=Math.max(0,.5-h),f=Math.max(0,h-.5);o[u]=d*d,a[u]=f*f}}}(c,n,i,r,o,this.gridOuter,this.gridInner),iu(this.gridOuter,n,i,this.f,this.v,this.z),iu(this.gridInner,n,i,this.f,this.v,this.z),function(e,t,n,r,i,o,a){for(var s=0;s<t*n;s++){var l=Math.sqrt(r[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}(f,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:f,metrics:{width:r,height:o,sdfWidth:n,sdfHeight:i,top:a,left:0,advance:h,fontAscent:u.fontBoundingBoxAscent}}},ru.prototype.draw=function(e){return this._draw(e,!1).data},ru.prototype.drawWithMetrics=function(e){return this._draw(e,!0)},eu.default=tu;const au={none:0,ideographs:1,all:2};class su{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const t in e)for(const r of e[t])n.push({stack:t,id:r});g(n,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{}});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],su.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){for(const e in t)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i[t]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)(e[t]||(e[t]={}))[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==au.none&&(this.localGlyphMode===au.all?!!this.localFontFamily:!!this.localFontFamily&&(pi(e)||yi(e)||oi(e)||ai(e)))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new su.TinySDF(48,6,16,.25,r,n)}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const{data:o,metrics:a}=i.drawWithMetrics(String.fromCharCode(n)),{fontAscent:s,sdfWidth:l,sdfHeight:c,width:u,height:h,left:d,top:f,advance:p}=a,m=(s?s/2:17)-9;return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new ws({width:l,height:c},o),metrics:{width:u/2,height:h/2,left:d/2,top:f/2-m,advance:p/2,localGlyph:!0}}}}function lu(e,t,n,i){const o=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=e.right-e.left,h=e.bottom-e.top,d=a.stretchX||[[0,l]],f=a.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],m=d.reduce(p,0),g=f.reduce(p,0),y=l-m,v=c-g;let _=0,b=m,x=0,w=g,S=0,A=y,E=0,M=v;if(a.content&&i){const e=a.content;_=cu(d,0,e[0]),x=cu(f,0,e[1]),b=cu(d,e[0],e[2]),w=cu(f,e[1],e[3]),S=e[0]-_,E=e[1]-x,A=e[2]-e[0]-b,M=e[3]-e[1]-w}const C=(i,o,l,c)=>{const d=hu(i.stretch-_,b,u,e.left),f=du(i.fixed-S,A,i.stretch,m),p=hu(o.stretch-x,w,h,e.top),y=du(o.fixed-E,M,o.stretch,g),v=hu(l.stretch-_,b,u,e.left),C=du(l.fixed-S,A,l.stretch,m),T=hu(c.stretch-x,w,h,e.top),P=du(c.fixed-E,M,c.stretch,g),D=new r(d,p),k=new r(v,p),O=new r(v,T),I=new r(d,T),R=new r(f/s,y/s),L=new r(C/s,P/s),B=t*Math.PI/180;if(B){const e=Math.sin(B),t=Math.cos(B),n=[t,-e,e,t];D._matMult(n),k._matMult(n),I._matMult(n),O._matMult(n)}const z=i.stretch+i.fixed,F=o.stretch+o.fixed;return{tl:D,tr:k,bl:I,br:O,tex:{x:a.paddedRect.x+1+z,y:a.paddedRect.y+1+F,w:l.stretch+l.fixed-z,h:c.stretch+c.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:A/s/u,minFontScaleY:M/s/h,isSDF:n}};if(i&&(a.stretchX||a.stretchY)){const e=uu(d,y,m),t=uu(f,v,g);for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)o.push(C(r,t[e],i,t[e+1]))}}else o.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function cu(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function uu(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[t,n]of e){const e=r[r.length-1];r.push({fixed:t-e.stretch,stretch:e.stretch}),r.push({fixed:t-e.stretch,stretch:e.stretch+(n-t)})}return r.push({fixed:t+1,stretch:n}),r}function hu(e,t,n,r){return e/t*n+r}function du(e,t,n,r){return e-t*n/r}su.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),_e.Glyphs);Se(s,((e,t)=>{if(e)i(e);else if(t){const e={};for(const n of function(e){return new sc(e).readFields(Ec,[])}(t))e[n.id]=n;i(null,e)}}))},su.TinySDF=eu;class fu{constructor(e=[],t=pu){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function pu(e,t){return e<t?-1:e>t?1:0}function mu(e,t=1,n=!1){let i=1/0,o=1/0,a=-1/0,s=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<i)&&(i=t.x),(!e||t.y<o)&&(o=t.y),(!e||t.x>a)&&(a=t.x),(!e||t.y>s)&&(s=t.y)}const c=Math.min(a-i,s-o);let u=c/2;const h=new fu([],gu);if(0===c)return new r(i,o);for(let t=i;t<a;t+=c)for(let n=o;n<s;n+=c)h.push(new yu(t+u,n+u,u,e));let d=function(e){let t=0,n=0,r=0;const i=e[0];for(let e=0,o=i.length,a=o-1;e<o;a=e++){const o=i[e],s=i[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,r+=(o.y+s.y)*l,t+=3*l}return new yu(n/t,r/t,0,e)}(e),f=h.length;for(;h.length;){const r=h.pop();(r.d>d.d||!d.d)&&(d=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,f)),r.max-d.d<=t||(u=r.h/2,h.push(new yu(r.p.x-u,r.p.y-u,u,e)),h.push(new yu(r.p.x+u,r.p.y-u,u,e)),h.push(new yu(r.p.x-u,r.p.y+u,u,e)),h.push(new yu(r.p.x+u,r.p.y+u,u,e)),f+=4)}return n&&(console.log(`num probes: ${f}`),console.log(`best distance: ${d.d}`)),d.p}function gu(e,t){return t.max-e.max}function yu(e,t,n,i){this.p=new r(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,Da(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}const vu=Number.POSITIVE_INFINITY;function _u(e,t){return t[1]!==vu?function(e,t,n){let r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){let n=0,r=0;t<0&&(t=0);const i=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function bu(e,t,n,r,i,o,a,s){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,c=e.layers[0]._unevaluatedLayout._values,u={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;u.compositeTextSizes=[c["text-size"].possiblyEvaluate(new Vi(t),a),c["text-size"].possiblyEvaluate(new Vi(n),a)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;u.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new Vi(t),a),c["icon-size"].possiblyEvaluate(new Vi(n),a)]}u.layoutTextSize=c["text-size"].possiblyEvaluate(new Vi(s+1),a),u.layoutIconSize=c["icon-size"].possiblyEvaluate(new Vi(s+1),a),u.textMaxSize=c["text-size"].possiblyEvaluate(new Vi(18),a);const h=24*l.get("text-line-height"),d="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),f=l.get("text-keep-upright"),p=l.get("text-size");for(const o of e.features){const s=l.get("text-font").evaluate(o,{},a).join(","),c=p.evaluate(o,{},a),m=u.layoutTextSize.evaluate(o,{},a),g=(u.layoutIconSize.evaluate(o,{},a),{horizontal:{},vertical:void 0}),y=o.text;let v,_=[0,0];if(y){const r=y.toString(),u=24*l.get("text-letter-spacing").evaluate(o,{},a),p=Mi(r)?u:0,v=l.get("text-anchor").evaluate(o,{},a),b=l.get("text-variable-anchor");if(!b){const e=l.get("text-radial-offset").evaluate(o,{},a);_=e?_u(v,[24*e,vu]):l.get("text-offset").evaluate(o,{},a).map((e=>24*e))}let x=d?"center":l.get("text-justify").evaluate(o,{},a);const w=l.get("symbol-placement"),S="point"===w?24*l.get("text-max-width").evaluate(o,{},a):0,A=()=>{e.allowVerticalPlacement&&Ei(r)&&(g.vertical=Rc(y,t,n,i,s,S,h,v,"left",p,_,kc.vertical,!0,w,m,c))};if(!d&&b){const e="auto"===x?b.map((e=>xu(e))):[x];let r=!1;for(let o=0;o<e.length;o++){const a=e[o];if(!g.horizontal[a])if(r)g.horizontal[a]=g.horizontal[0];else{const e=Rc(y,t,n,i,s,S,h,"center",a,p,_,kc.horizontal,!1,w,m,c);e&&(g.horizontal[a]=e,r=1===e.positionedLines.length)}}A()}else{"auto"===x&&(x=xu(v));const e=Rc(y,t,n,i,s,S,h,v,x,p,_,kc.horizontal,!1,w,m,c);e&&(g.horizontal[x]=e),A(),Ei(r)&&d&&f&&(g.vertical=Rc(y,t,n,i,s,S,h,v,x,p,_,kc.vertical,!1,w,m,c))}}let b=!1;if(o.icon&&o.icon.name){const t=r[o.icon.name];t&&(v=Hc(i[o.icon.name],l.get("icon-offset").evaluate(o,{},a),l.get("icon-anchor").evaluate(o,{},a)),b=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&P("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Au(g.horizontal)||g.vertical;e.iconsInText=!!x&&x.iconsInText,(x||v)&&wu(e,o,g,v,r,u,m,0,_,b,a)}o&&e.generateCollisionDebugBuffers(s,e.collisionBoxArray)}function xu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wu(e,t,n,r,i,o,a,s,l,c,h){let d=o.textMaxSize.evaluate(t,{},h);void 0===d&&(d=a);const f=e.layers[0].layout,p=f.get("icon-offset").evaluate(t,{},h),m=Au(n.horizontal),g=a/24,y=e.tilePixelRatio*g,v=e.tilePixelRatio*d/24,_=e.tilePixelRatio*f.get("symbol-spacing"),b=f.get("text-padding")*e.tilePixelRatio,x=f.get("icon-padding")*e.tilePixelRatio,w=u(f.get("text-max-angle")),S="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),A="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),E=f.get("symbol-placement"),M=_/2,C=f.get("icon-text-fit");let T;r&&"none"!==C&&(e.allowVerticalPlacement&&n.vertical&&(T=Wc(r,n.vertical,C,f.get("icon-text-fit-padding"),p,g)),m&&(r=Wc(r,m,C,f.get("icon-text-fit-padding"),p,g)));const D=(s,u)=>{u.x<0||u.x>=8192||u.y<0||u.y>=8192||function(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,A){const E=e.addToLineVertexArray(t,n);let M,C,T,D,k,O,I,R=0,L=0,B=0,z=0,F=-1,N=-1;const U={};let j=qo(""),V=0,G=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?[V,G]=s.layout.get("text-offset").evaluate(b,{},S).map((e=>24*e)):(V=24*s.layout.get("text-radial-offset").evaluate(b,{},S),G=vu),e.allowVerticalPlacement&&r.vertical){const e=r.vertical;if(p)O=Mu(e),a&&(I=Mu(a));else{const n=s.layout.get("text-rotate").evaluate(b,{},S)+90;T=Eu(l,t,c,u,h,e,0,f,n),a&&(D=Eu(l,t,c,u,h,a,0,y,n))}}if(i){const n=s.layout.get("icon-rotate").evaluate(b,{},S),r="none"!==s.layout.get("icon-text-fit"),o=lu(i,n,w,r),d=a?lu(a,n,w,r):void 0;C=Eu(l,t,c,u,h,i,0,y,n),R=4*o.length;const f=e.iconSizeData;let p=null;"source"===f.kind?(p=[128*s.layout.get("icon-size").evaluate(b,{},S)],p[0]>32640&&P(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(p=[128*x.compositeIconSizes[0].evaluate(b,{},S),128*x.compositeIconSizes[1].evaluate(b,{},S)],(p[0]>32640||p[1]>32640)&&P(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,o,p,_,v,b,!1,t,E.lineStartIndex,E.lineLength,-1,S),F=e.icon.placedSymbolArray.length-1,d&&(L=4*d.length,e.addSymbols(e.icon,d,p,_,v,b,kc.vertical,t,E.lineStartIndex,E.lineLength,-1,S),N=e.icon.placedSymbolArray.length-1)}for(const n in r.horizontal){const i=r.horizontal[n];M||(j=qo(i.text),p?k=Mu(i):M=Eu(l,t,c,u,h,i,0,f,s.layout.get("text-rotate").evaluate(b,{},S)));const a=1===i.positionedLines.length;if(B+=Su(e,t,i,o,s,p,b,m,E,r.vertical?kc.horizontal:kc.horizontalOnly,a?Object.keys(r.horizontal):[n],U,F,x,S),a)break}r.vertical&&(z+=Su(e,t,r.vertical,o,s,p,b,m,E,kc.vertical,["vertical"],U,N,x,S));let H=-1;const W=(e,t)=>e?Math.max(e,t):t;H=W(k,H),H=W(O,H),H=W(I,H);const q=H>-1?1:0;q&&(H*=A/24),e.glyphOffsetArray.length>=Lu.MAX_GLYPHS&&P("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,U.right>=0?U.right:-1,U.center>=0?U.center:-1,U.left>=0?U.left:-1,U.vertical||-1,F,N,j,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,D||e.collisionBoxArray.length,D?D+1:e.collisionBoxArray.length,c,B,z,R,L,q,0,d,V,G,H)}(e,u,s,n,r,i,T,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,y,b,S,l,0,x,A,p,t,o,c,h,a)};if("line"===E)for(const i of Qc(t.geometry,0,0,8192,8192)){const t=Kc(i,_,w,n.vertical||m,r,24,v,e.overscaling,8192);for(const n of t){const t=m;t&&Cu(e,t.text,M,n)||D(i,n)}}else if("line-center"===E){for(const e of t.geometry)if(e.length>1){const t=Jc(e,w,n.vertical||m,r,24,v);t&&D(e,t)}}else if("Polygon"===t.type)for(const e of al(t.geometry,0)){const t=mu(e,16);D(e[0],new qc(t.x,t.y,0))}else if("LineString"===t.type)for(const e of t.geometry)D(e,new qc(e[0].x,e[0].y,0));else if("Point"===t.type)for(const e of t.geometry)for(const t of e)D([t],new qc(t.x,t.y,0))}function Su(e,t,n,i,o,a,s,l,c,u,h,d,f,p,m){const g=function(e,t,n,i,o,a,s,l){const c=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[];for(const e of t.positionedLines)for(const i of e.positionedGlyphs){if(!i.rect)continue;const a=i.rect||{};let h=4,d=!0,f=1,p=0;const m=(o||l)&&i.vertical,g=i.metrics.advance*i.scale/2;if(l&&t.verticalizable){const t=24*(i.scale-1),n=(24-i.metrics.width*i.scale)/2;p=e.lineOffset/2-(i.imageName?-n:t)}if(i.imageName){const e=s[i.imageName];d=e.sdf,f=e.pixelRatio,h=1/f}const y=o?[i.x+g,i.y]:[0,0];let v=o?[0,0]:[i.x+g+n[0],i.y+n[1]-p],_=[0,0];m&&(_=v,v=[0,0]);const b=(i.metrics.left-h)*i.scale-g+v[0],x=(-i.metrics.top-h)*i.scale+v[1],w=b+a.w*i.scale/(f*(i.localGlyph?2:1)),S=x+a.h*i.scale/(f*(i.localGlyph?2:1)),A=new r(b,x),E=new r(w,x),M=new r(b,S),C=new r(w,S);if(m){const e=new r(-g,g- -17),t=-Math.PI/2,n=12-g,o=new r(22-n,-(i.imageName?n:0)),a=new r(..._);A._rotateAround(t,e)._add(o)._add(a),E._rotateAround(t,e)._add(o)._add(a),M._rotateAround(t,e)._add(o)._add(a),C._rotateAround(t,e)._add(o)._add(a)}if(c){const e=Math.sin(c),t=Math.cos(c),n=[t,-e,e,t];A._matMult(n),E._matMult(n),M._matMult(n),C._matMult(n)}const T=new r(0,0),P=new r(0,0);u.push({tl:A,tr:E,bl:M,br:C,tex:a,writingMode:t.writingMode,glyphOffset:y,sectionIndex:i.sectionIndex,isSDF:d,pixelOffsetTL:T,pixelOffsetBR:P,minFontScaleX:0,minFontScaleY:0})}return u}(0,n,l,o,a,s,i,e.allowVerticalPlacement),y=e.textSizeData;let v=null;"source"===y.kind?(v=[128*o.layout.get("text-size").evaluate(s,{},m)],v[0]>32640&&P(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(v=[128*p.compositeTextSizes[0].evaluate(s,{},m),128*p.compositeTextSizes[1].evaluate(s,{},m)],(v[0]>32640||v[1]>32640)&&P(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,g,v,l,a,s,u,t,c.lineStartIndex,c.lineLength,f,m);for(const t of h)d[t]=e.text.placedSymbolArray.length-1;return 4*g.length}function Au(e){for(const t in e)return e[t];return null}function Eu(e,t,n,i,o,a,s,l,c){let h=a.top,d=a.bottom,f=a.left,p=a.right;const m=a.collisionPadding;if(m&&(f-=m[0],h-=m[1],p+=m[2],d+=m[3]),c){const e=new r(f,h),t=new r(p,h),n=new r(f,d),i=new r(p,d),o=u(c);e._rotate(o),t._rotate(o),n._rotate(o),i._rotate(o),f=Math.min(e.x,t.x,n.x,i.x),p=Math.max(e.x,t.x,n.x,i.x),h=Math.min(e.y,t.y,n.y,i.y),d=Math.max(e.y,t.y,n.y,i.y)}return e.emplaceBack(t.x,t.y,f,h,p,d,l,n,i,o),e.length-1}function Mu(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Cu(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}const Tu=Al.VectorTileFeature.types,Pu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Du(e,t,n,r,i,o,a,s,l,c,u,h,d){const f=s?Math.min(32640,Math.round(s[0])):0,p=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(f<<1)+(l?1:0),p,16*c,16*u,256*h,256*d)}function ku(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Ou(e){for(const t of e.sections)if(Oi(t.text))return!0;return!1}class Iu{constructor(e){this.layoutVertexArray=new mo,this.indexArray=new wo,this.programConfigurations=e,this.segments=new ga,this.dynamicLayoutVertexArray=new go,this.opacityVertexArray=new yo,this.placedSymbolArray=new Ro}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Zl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Xl.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Pu,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qr("SymbolBuffers",Iu);class Ru{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new ga,this.collisionVertexArray=new xo,this.collisionVertexArrayExt=new go}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Yl.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,$l.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}qr("CollisionBuffers",Ru);class Lu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ga([]),this.placementViewportMatrix=Ga([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ql(this.zoom,t["text-size"]),this.iconSizeData=Ql(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((e=>kc[e]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Iu(new ua(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Iu(new ua(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new zo,this.lineVertexArray=new Fo,this.symbolInstances=new Bo}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||r)&&i){const n=ic[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,n){const r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof ht&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=i.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const h=t.iconDependencies,d=t.glyphDependencies,f=t.availableImages,p=new Vi(this.zoom);for(const{feature:t,id:a,index:s,sourceLayerIndex:m}of e){const e=r._featureFilter.needGeometry,g=ba(t,e);if(!r._featureFilter.filter(p,g,n))continue;let y,v;if(e||(g.geometry=_a(t)),l){const e=r.getValueAndResolveTokens("text-field",g,n,f),t=ht.factory(e);Ou(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ni()||this.hasRTLText&&ji.isParsed())&&(y=rc(t,r,g))}if(c){const e=r.getValueAndResolveTokens("icon-image",g,n,f);v=e instanceof dt?e:dt.fromString(e)}if(!y&&!v)continue;const _=this.sortFeaturesByKey?u.evaluate(g,{},n):void 0;if(this.features.push({id:a,text:y,icon:v,index:s,sourceLayerIndex:m,geometry:g.geometry,properties:t.properties,type:Tu[t.type],sortKey:_}),v&&(h[v.name]=!0),y){const e=o.evaluate(g,{},n).join(","),t="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(kc.vertical)>=0;for(const n of y.sections)if(n.image)h[n.image.name]=!0;else{const r=Ei(y.toString()),i=n.fontStack||e,o=d[i]=d[i]||{};this.calculateGlyphDependencies(n.text,o,t,this.allowVerticalPlacement,r)}}}"line"===i.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const f=l(d,h),p=l(d,h,!0);if(f in n&&p in t&&n[f]!==t[p]){const e=s(f,p,h),i=a(f,p,r[e].geometry);delete t[f],delete n[p],n[l(d,r[i].geometry,!0)]=i,r[e].geometry=null}else f in n?a(f,p,h):p in t?s(f,p,h):(o(c),t[f]=i-1,n[p]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]);const i={};for(let r=e.segment+1;r<t.length;r++)i[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:n},r<t.length-1&&(n+=t[r+1].dist(t[r]));for(let n=e.segment||0;n>=0;n--)i[n]={x:t[n].x,y:t[n].y,tileUnitDistanceFromAnchor:r},n>0&&(r+=t[n-1].dist(t[n]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,l,c,u,h){const d=e.indexArray,f=e.layoutVertexArray,p=e.segments.prepareSegment(4*t.length,f,d,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,g=p.vertexLength,y=this.allowVerticalPlacement&&a===kc.vertical?Math.PI/2:0,v=o.text&&o.text.sections;for(let r=0;r<t.length;r++){const{tl:i,tr:a,bl:l,br:c,tex:u,pixelOffsetTL:m,pixelOffsetBR:g,minFontScaleX:_,minFontScaleY:b,glyphOffset:x,isSDF:w,sectionIndex:S}=t[r],A=p.vertexLength,E=x[1];Du(f,s.x,s.y,i.x,E+i.y,u.x,u.y,n,w,m.x,m.y,_,b),Du(f,s.x,s.y,a.x,E+a.y,u.x+u.w,u.y,n,w,g.x,m.y,_,b),Du(f,s.x,s.y,l.x,E+l.y,u.x,u.y+u.h,n,w,m.x,g.y,_,b),Du(f,s.x,s.y,c.x,E+c.y,u.x+u.w,u.y+u.h,n,w,g.x,g.y,_,b),ku(e.dynamicLayoutVertexArray,s,y),d.emplaceBack(A,A+1,A+2),d.emplaceBack(A+1,A+2,A+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),r!==t.length-1&&S===t[r+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,o,o.index,{},h,v&&v[S])}e.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,c,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,u)}_commitLayoutVertex(e,t,n,r,i){e.emplaceBack(t.x,t.y,n,r,Math.round(i.x),Math.round(i.y))}_addCollisionDebugVertices(e,t,n,i,o){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),s=a.vertexLength,l=o.anchorX,c=o.anchorY;for(let e=0;e<4;e++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(e.x1,e.y2)),a.vertexLength+=4;const u=n.indexArray;u.emplaceBack(s,s+1),u.emplaceBack(s+1,s+2),u.emplaceBack(s+2,s+3),u.emplaceBack(s+3,s),a.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.anchorPoint,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,a);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.anchorPoint,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ru(_o,Jl.members,To),this.iconCollisionBox=new Ru(_o,Jl.members,To);const n=tc(this.iconSizeData,e),r=tc(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=ec(this.textSizeData,e,i)/24;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=ec(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i){for(let o=r;o<i;o++){const r=n.get(o),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=tc(this.iconSizeData,e),r=tc(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const c={};for(let r=t;r<n;r++){const t=e.get(r);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let t=r;t<i;t++){const n=e.get(t);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let t=o;t<a;t++){const n=e.get(t);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.iconFeatureIndex=n.featureIndex;break}for(let t=s;t<l;t++){const n=e.get(t);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let t=n.vertexStartIndex;t<r;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);r.push(0|Math.round(t*a.anchorX+n*a.anchorY)),i.push(a.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}qr("SymbolBucket",Lu,{omit:["layers","collisionBoxArray","features","compareText"]}),Lu.MAX_GLYPHS=65535,Lu.addDynamicAttributes=ku;const Bu=new no({"symbol-placement":new Ji(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new Ji(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ji(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ki(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ji(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ji(Be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ji(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ji(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ji(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ki(Be.layout_symbol["icon-size"]),"icon-text-fit":new Ji(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ji(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ki(Be.layout_symbol["icon-image"]),"icon-rotate":new Ki(Be.layout_symbol["icon-rotate"]),"icon-padding":new Ji(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new Ji(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new Ki(Be.layout_symbol["icon-offset"]),"icon-anchor":new Ki(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ji(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ji(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ji(Be.layout_symbol["text-rotation-alignment"]),"text-field":new Ki(Be.layout_symbol["text-field"]),"text-font":new Ki(Be.layout_symbol["text-font"]),"text-size":new Ki(Be.layout_symbol["text-size"]),"text-max-width":new Ki(Be.layout_symbol["text-max-width"]),"text-line-height":new Ji(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new Ki(Be.layout_symbol["text-letter-spacing"]),"text-justify":new Ki(Be.layout_symbol["text-justify"]),"text-radial-offset":new Ki(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ji(Be.layout_symbol["text-variable-anchor"]),"text-anchor":new Ki(Be.layout_symbol["text-anchor"]),"text-max-angle":new Ji(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new Ji(Be.layout_symbol["text-writing-mode"]),"text-rotate":new Ki(Be.layout_symbol["text-rotate"]),"text-padding":new Ji(Be.layout_symbol["text-padding"]),"text-keep-upright":new Ji(Be.layout_symbol["text-keep-upright"]),"text-transform":new Ki(Be.layout_symbol["text-transform"]),"text-offset":new Ki(Be.layout_symbol["text-offset"]),"text-allow-overlap":new Ji(Be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ji(Be.layout_symbol["text-ignore-placement"]),"text-optional":new Ji(Be.layout_symbol["text-optional"])});var zu={paint:new no({"icon-opacity":new Ki(Be.paint_symbol["icon-opacity"]),"icon-color":new Ki(Be.paint_symbol["icon-color"]),"icon-halo-color":new Ki(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ki(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ki(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new Ji(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ji(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ki(Be.paint_symbol["text-opacity"]),"text-color":new Ki(Be.paint_symbol["text-color"],{runtimeType:Xe,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Ki(Be.paint_symbol["text-halo-color"]),"text-halo-width":new Ki(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new Ki(Be.paint_symbol["text-halo-blur"]),"text-translate":new Ji(Be.paint_symbol["text-translate"]),"text-translate-anchor":new Ji(Be.paint_symbol["text-translate-anchor"])}),layout:Bu};class Fu{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:He,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qr("FormatSectionOverride",Fu,{omit:["defaultValue"]});class Nu extends fa{constructor(e){super(e,zu)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Qn(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new Lu(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of zu.paint.overridableProperties){if(!Nu.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Fu(t),r=new Kn(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new tr("source",r):new nr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Yi(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Nu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=zu.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof ht)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof yt&&mt(t.value)===Ke?o(t.value.sections):t instanceof xt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new ca(this,e)}}var Uu={paint:new no({"background-color":new Ji(Be.paint_background["background-color"]),"background-pattern":new eo(Be.paint_background["background-pattern"]),"background-opacity":new Ji(Be.paint_background["background-opacity"])})},ju={paint:new no({"raster-opacity":new Ji(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ji(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ji(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ji(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new Ji(Be.paint_raster["raster-saturation"]),"raster-contrast":new Ji(Be.paint_raster["raster-contrast"]),"raster-resampling":new Ji(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new Ji(Be.paint_raster["raster-fade-duration"])})};class Vu extends fa{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Gu={paint:new no({"sky-type":new Ji(Be.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ji(Be.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ji(Be.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ji(Be.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ji(Be.paint_sky["sky-gradient-radius"]),"sky-gradient":new to(Be.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ji(Be.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ji(Be.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ji(Be.paint_sky["sky-opacity"])})};function Hu(e,t,n){const r=Ya(0,0,1),i=us(cs());return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s}(i,i,n?-u(e)+Math.PI:u(e)),hs(i,i,-u(t)),is(r,r,i),es(r,r)}const Wu={circle:class extends fa{constructor(e){super(e,Ua)}createBucket(e){return new wa(e)}queryRadius(e){const t=e;return La("circle-radius",this,t)+La("circle-stroke-width",this,t)+Ba(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&e.queryGeometry.isAboveHorizon)return!1;const c=Fa(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),h=l?u*e.pixelToTileUnitsFactor:u;for(const t of r)for(const n of t){const t=n.add(c),r=s&&o.elevation?o.elevation.exaggeration()*s.getElevationAt(t.x,t.y,!0):0,i=l?t:ps(t,r,a),u=l?e.tilespaceRays.map((e=>ys(e,r))):e.queryGeometry.screenGeometry;let d=h;const f=ls([],[n.x,n.y,r,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=f[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=o.cameraToCenterDistance/f[3]),Aa(u,i,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new ca(this,e)}},heatmap:class extends fa{createBucket(e){return new vs(e)}constructor(e){super(e,As),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Es({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new ca(this,e)}},hillshade:class extends fa{constructor(e){super(e,Ms)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(e){return new ca(this,e)}},fill:class extends fa{constructor(e){super(e,dl)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new ca(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ul(e)}queryRadius(){return Ba(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&Ea(za(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends fa{constructor(e){super(e,kl)}createBucket(e){return new Pl(e)}queryRadius(){return Ba(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new ca(this,e)}queryIntersectsFeature(e,t,n,i,o,a,s,l,c){const u=Fa(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),f=[0,0],p=l&&a.elevation,m=a.elevation?a.elevation.exaggeration():1;if(p){const t=e.tile.getBucket(this).centroidVertexArray,n=c+1;if(n<t.length){const e=t.get(n);f[0]=e.a_centroid_pos0,f[1]=e.a_centroid_pos1}}if(0===f[0]&&1===f[1])return!1;const g=function(e,t,n,i,o,a,s,l,c){return a?function(e,t,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0];for(const d of e){const e=[],f=[];for(const c of d){const u=c.x+r.x,d=c.y+r.y,p=Ll(u,d,t,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=p.base;const m=Rl(rs(h,h,i));h[0]=u,h[1]=d,h[2]=p.top;const g=Rl(rs(h,h,i));e.push(m),f.push(g)}c.push(e),u.push(f)}return[c,u]}(e,t,n,i,o,a,s,l,c):function(e,t,n,i,o){const a=[],s=[],l=o[8]*t,c=o[9]*t,u=o[10]*t,h=o[11]*t,d=o[8]*n,f=o[9]*n,p=o[10]*n,m=o[11]*n;for(const t of e){const e=[],n=[];for(const a of t){const t=a.x+i.x,s=a.y+i.y,g=o[0]*t+o[4]*s+o[12],y=o[1]*t+o[5]*s+o[13],v=o[2]*t+o[6]*s+o[14],_=o[3]*t+o[7]*s+o[15],b=v+u,x=_+h,w=g+d,S=y+f,A=v+p,E=_+m,M=new r((g+l)/x,(y+c)/x);M.z=b/x,e.push(M);const C=new r(w/E,S/E);C.z=A/E,n.push(C)}a.push(e),s.push(n)}return[a,s]}(e,t,n,i,o)}(i,d,h,u,s,p?l:null,f,m,a.center.lat),y=e.queryGeometry;return function(e,t,n){let r=1/0;Ea(n,t)&&(r=Il(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];Sa(n,i)&&(r=Math.min(r,Il(n,i)))}}return r!==1/0&&r}(g[0],g[1],y.isPointQuery()?y.screenBounds:y.screenGeometry)}},line:class extends fa{constructor(e){super(e,Hl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Jt,this.gradientVersion=(this.gradientVersion+1)%s)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Wl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Vl(e)}getProgramIds(){const e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":n?"lineGradient":"line"]}getProgramConfiguration(e){return new ca(this,e)}queryRadius(e){const t=e,n=ql(La("line-width",this,t),La("line-gap-width",this,t)),r=La("line-offset",this,t);return n/2+Math.abs(r)+Ba(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,i,o,a){if(e.queryGeometry.isAboveHorizon)return!1;const s=za(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),l=e.pixelToTileUnitsFactor/2*ql(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(i=function(e,t){const n=[],i=new r(0,0);for(let r=0;r<e.length;r++){const o=e[r],a=[];for(let e=0;e<o.length;e++){const n=o[e-1],r=o[e],s=o[e+1],l=0===e?i:r.sub(n)._unit()._perp(),c=e===o.length-1?i:s.sub(r)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(t)._add(r))}n.push(a)}return n}(i,c*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(Oa(e,i[t]))return!0;if(Ma(e,i,n))return!0}return!1}(s,i,l)}isTileClipped(){return!0}},symbol:Nu,background:class extends fa{constructor(e){super(e,Uu)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends fa{constructor(e){super(e,ju)}getProgramIds(){return["raster"]}},sky:class extends fa{constructor(e){super(e,Gu),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Es({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}getCenter(e,t){const n=this.paint.get("sky-type");if("atmosphere"===n){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&P("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Hu(o.azimuthal,90-o.polar,t):Hu(n[0],90-n[1],t)}if("gradient"===n){const e=this.paint.get("sky-gradient-center");return Hu(e[0],90-e[1],t)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}},{HTMLImageElement:qu,HTMLCanvasElement:Zu,HTMLVideoElement:Xu,ImageData:Yu,ImageBitmap:$u}=o;class Ju{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,t,n){const{width:r,height:i}=e,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),{context:a}=this,{gl:s}=a;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[r,i],e instanceof qu||e instanceof Zu||e instanceof Xu||e instanceof Yu||$u&&e instanceof $u?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);else{const{x:t,y:o}=n||{x:0,y:0};e instanceof qu||e instanceof Zu||e instanceof Xu||e instanceof Yu||$u&&e instanceof $u?s.texSubImage2D(s.TEXTURE_2D,0,t,o,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,o,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Ku{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Qu=o.performance;class eh{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Qu.mark(this._marks.start)}finish(){Qu.mark(this._marks.end);let e=Qu.getEntriesByName(this._marks.measure);return 0===e.length&&(Qu.measure(this._marks.measure,this._marks.start,this._marks.end),e=Qu.getEntriesByName(this._marks.measure),Qu.clearMarks(this._marks.start),Qu.clearMarks(this._marks.end),Qu.clearMeasures(this._marks.measure)),e}}class th{constructor(){this.tasks={},this.taskQueue=[],S(["process"],this),this.invoker=new Ku(this.process),this.nextId=0}add(e,t){const n=this.nextId++;return this.tasks[n]={fn:e,metadata:t,priority:nh(t),id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){O();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}function nh({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}class rh{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof ih?new ih(e.lng,e.lat):ih.convert(e),this}setSouthWest(e){return this._sw=e instanceof ih?new ih(e.lng,e.lat):ih.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof ih)r=e,i=e;else{if(!(e instanceof rh))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(rh.convert(e)):this.extend(ih.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new ih(r.lng,r.lat),this._ne=new ih(i.lng,i.lat)),this}getCenter(){return new ih((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ih(this.getWest(),this.getNorth())}getSouthEast(){return new ih(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=ih.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof rh?e:new rh(e)}}class ih{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ih(m(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new rh(new ih(this.lng-n,this.lat-t),new ih(this.lng+n,this.lat+t))}static convert(e){if(e instanceof ih)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new ih(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new ih(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const oh=2*Math.PI*6371008.8;function ah(e){return oh*Math.cos(e*Math.PI/180)}function sh(e){return(180+e)/360}function lh(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ch(e,t){return e/ah(t)}function uh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function hh(e,t){return e*ah(uh(t))}class dh{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=ih.convert(e);return new dh(sh(n.lng),lh(n.lat),ch(t,n.lat))}toLngLat(){return new ih(360*this.x-180,uh(this.y))}toAltitude(){return hh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/oh*(e=uh(this.y),1/Math.cos(e*Math.PI/180));var e}}function fh(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class ph{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=yh(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=(i=this.y,o=this.z,a=fh(256*(r=this.x),256*(i=Math.pow(2,o)-i-1),o),s=fh(256*(r+1),256*(i+1),o),a[0]+","+a[1]+","+s[0]+","+s[1]);var r,i,o,a,s;const l=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",n)}getTilePoint(e){const t=Math.pow(2,this.z);return new r(8192*(e.x*t-this.x),8192*(e.y*t-this.y))}getTileVec3(e){const t=Math.pow(2,this.z);return Ya(8192*(e.x*t-this.x),8192*(e.y*t-this.y),hh(e.z,e.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class mh{constructor(e,t){this.wrap=e,this.canonical=t,this.key=yh(e,t.z,t.z,t.x,t.y)}}class gh{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new ph(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:yh(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new gh(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gh(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return yh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return yh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new gh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new gh(t,this.wrap,t,n,r),new gh(t,this.wrap,t,n+1,r),new gh(t,this.wrap,t,n,r+1),new gh(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new gh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new gh(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new dh(e.x-this.wrap,e.y))}getTileVec3(e){return this.canonical.getTileVec3(new dh(e.x-this.wrap,e.y,e.z))}}function yh(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}qr("CanonicalTileID",ph),qr("OverscaledTileID",gh,{omit:["posMatrix"]});class vh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class _h{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}var bh=so([{name:"a_pos",type:"Int16",components:2}]);class xh{constructor(e,t,n){this.tileID=e,this.uid=b(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<j.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Lu){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Lu&&t.hasRTLText){this.hasRTLText=!0,ji.isLoading()||ji.isLoaded()||"deferred"!==Ni()||Ui();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Oo}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ju(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ju(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=fr(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<o.length;t++){const r=o.feature(t);if(a.needGeometry){const e=ba(r,!0);if(!a.filter(new Vi(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new Vi(this.tileID.overscaledZ),r))continue;const h=n.getId(r,i),d=new _h(r,s,l,c,h);d.tile=u,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=I(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!t.style.hasLayer(r))continue;const i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];if(!a||!s||0===Object.keys(s).length)continue;i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=j.now()+e}setDependencies(e,t){const n={};for(const e of t)n[e]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}}class wh{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},v(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=v({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),v(this.state[e][n],this.stateChanges[e][n]),t[n]=this.state[e][n];n[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const n in this.state[e])t[n]={},this.state[e][n]={};else for(const n in this.deletedStates[e]){if(null===this.deletedStates[e][n])this.state[e][n]={};else for(const t of Object.keys(this.deletedStates[e][n]))delete this.state[e][n][t];t[n]=this.state[e][n]}n[e]=n[e]||{},v(n[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class Sh{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Ah(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-n[a])*s,c=(t[a]-n[a])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function Eh(e,t,n,r,i,o,a,s,l,c,u){const h=r-e,d=i-t,f=o-n,p=a-e,m=s-t,g=l-n,y=u[1]*g-u[2]*m,v=u[2]*p-u[0]*g,_=u[0]*m-u[1]*p,b=h*y+d*v+f*_;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-e,S=c[1]-t,A=c[2]-n,E=(w*y+S*v+A*_)*x;if(E<0||E>1)return null;const M=S*f-A*d,C=A*h-w*f,T=w*d-S*h,P=(u[0]*M+u[1]*C+u[2]*T)*x;return P<0||E+P>1?null:(p*M+m*C+g*T)*x}function Mh(e,t,n){return(e-t)/(n-t)}function Ch(e,t,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,d=(e+1)/c*u+r,f=(t+0)/c*h+i,p=(t+1)/c*h+i;s[0]=(e+0)/c*u+r,s[1]=f,l[0]=d,l[1]=p}class Th{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,l=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=l};let a=new Sh(r);const s=[];for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),i,!1,s);const n=Dh(s[0],s[1],e),l=Dh(s[2],s[1],e),c=Dh(s[2],s[3],e),u=Dh(s[0],s[3],e);a.minimums.push(Math.min(n,l,c,u)),a.maximums.push(Math.max(n,l,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new Sh(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),h=e.isLeaf(s[2],s[1]),d=e.isLeaf(s[2],s[3]),f=e.isLeaf(s[0],s[3]),p=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&h&&d&&f;a.maximums.push(m),a.minimums.push(p),a.leaves.push(m-p<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o,a=1){return Ah([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:f,nodex:p,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Ch(p,m,g,e,t,n,r,u,h);const s=1<<g,l=(p+0)/s,c=(p+1)/s,d=(m+0)/s,y=(m+1)/s,v=Dh(l,d,this.dem)*a,_=Dh(c,d,this.dem)*a,b=Dh(c,y,this.dem)*a,x=Dh(l,y,this.dem)*a,w=Eh(u[0],u[1],v,h[0],u[1],_,h[0],h[1],b,i,o),S=Eh(h[0],h[1],b,u[0],h[1],x,u[0],u[1],v,i,o),A=Math.min(null!==w?w:Number.MAX_VALUE,null!==S?S:Number.MAX_VALUE);if(A!==Number.MAX_VALUE)return A;{const e=Qa([],i,o,f);if(Ph(v,_,x,b,Mh(e[0],u[0],h[0]),Mh(e[1],u[1],h[1]))>=e[2])return f}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){Ch((p<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,e,t,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const f=Ah(u,h,i,o);if(null!=f){const e=f;l[d]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,d),t=!0);t||(c[y]=d),y++}}for(let e=0;e<y;e++){const t=c[e];d.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(p<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s,l=0;for(let e=0;e<this._siblingOffset.length;e++){const r=2*t+this._siblingOffset[e][0],i=2*n+this._siblingOffset[e][1],o=a.getElevation(r,i),c=a.isLeaf(r,i),u=this._addNode(o.min,o.max,c);c&&(l|=1<<e),s||(s=u)}for(let r=0;r<this._siblingOffset.length;r++)l&1<<r||this._construct(e,2*t+this._siblingOffset[r][0],2*n+this._siblingOffset[r][1],o,s+r)}}function Ph(e,t,n,r,i,o){return Kt(Kt(e,n,o),Kt(t,r,o),i)}function Dh(e,t,n){const r=n.dim,i=p(e*r-.5,0,r-1),o=p(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Ph(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const kh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Oh{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,r=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return P(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2;if(this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(o,e)]=this.data[this._idx(o-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,o)]=this.data[this._idx(e,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Th(this)}get(e,t,n=!1){const r=new Uint8Array(this.data.buffer);n&&(e=p(e,-1,this.dim),t=p(t,-1,this.dim));const i=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])}static getUnpackVector(e){return kh[e]}get unpackVector(){return kh[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,n){return(256*e*256+256*t+n)/10-1e4}_unpackTerrarium(e,t,n){return 256*e+t+n/256-32768}static pack(e,t){const n=[0,0,0,0],r=Oh.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Ss({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let t=o;t<a;t++)for(let n=r;n<i;n++)this.data[this._idx(n,t)]=e.data[this._idx(n+s,t+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}qr("DEMData",Oh),qr("DemMinMaxQuadTree",Th,{omit:["dem"]});class Ih{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const e of t)this.remove(e.value.tileID,e)}}class Rh{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Lh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bh{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[Lh[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zh{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Fh extends zh{getDefault(){return lt.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Nh extends zh{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Uh extends zh{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class jh extends zh{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Vh extends zh{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Gh extends zh{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Hh extends zh{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Wh extends zh{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class qh extends zh{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Zh extends zh{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Xh extends zh{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Yh extends zh{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class $h extends zh{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class Jh extends zh{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Kh extends zh{getDefault(){return lt.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Qh extends zh{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ed extends zh{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class td extends zh{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class nd extends zh{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class rd extends zh{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class id extends zh{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class od extends zh{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ad extends zh{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class sd extends zh{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class ld extends zh{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class cd extends zh{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ud extends zh{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class hd extends zh{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class dd extends zh{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class fd extends zh{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class pd extends zh{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class md extends zh{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class gd extends md{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class yd extends md{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class vd{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new gd(e,i),r&&(this.depthAttachment=new yd(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class _d{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}_d.ReadOnly=!1,_d.ReadWrite=!0,_d.disabled=new _d(519,_d.ReadOnly,[0,1]);class bd{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}bd.disabled=new bd({func:519,mask:0},0,0,7680,7680,7680);class xd{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}xd.Replace=[1,0],xd.disabled=new xd(xd.Replace,lt.transparent,[!1,!1,!1,!1]),xd.unblended=new xd(xd.Replace,lt.transparent,[!0,!0,!0,!0]),xd.alphaBlended=new xd([1,771],lt.transparent,[!0,!0,!0,!0]);class wd{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}wd.disabled=new wd(!1,1029,2305),wd.backCCW=new wd(!0,1029,2305),wd.backCW=new wd(!0,1029,2304),wd.frontCW=new wd(!0,1028,2304),wd.frontCCW=new wd(!0,1028,2305);class Sd extends Le{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Ih(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new wh}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return y(this._tiles).map((e=>e.tileID)).sort(Ad).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,i=t.tileID,o=new r(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new r(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(Ad).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new Re(r,{tile:e})):this.update(this.transform));e.timeAdded=j.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ie("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new gh(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(Ed(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=j.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-Sd.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const e in this._tiles){const n=this._tiles[e];if(i[e]||!n.hasData())continue;let r=n.tileID;for(;r.overscaledZ>o;){r=r.scaledTo(r.overscaledZ-1);const o=this._tiles[r.key];if(o&&o.hasData()&&t[r.key]){i[e]=n.tileID;break}}}for(const t in e)i[t]||(this._coveredTiles[t]=!0,i[t]=e[t])}for(const e in i)this._tiles[e].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const e of o){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e[e.length-1].overscaledZ,i=e[0].overscaledZ,o=Math.max(i-Sd.maxOverzooming,this._source.minzoom),a=Math.max(i+Sd.maxUnderzooming,this._source.minzoom),s={};for(const n of e){const e=this._addTile(n);t[n.key]=n,e.hasData()||r<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,r,a,t);for(const r of e){let e=this._tiles[r.key];if(e.hasData())continue;if(r.canonical.z>=this._source.maxzoom){const e=r.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=r.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let i=e.wasRequested();for(let a=r.overscaledZ-1;a>=o;--a){const o=r.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&i&&(e=this._addTile(o)),e&&(t[o.key]=o,i=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);return n||(t=new xh(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new Ie("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._cache.reset()}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=e.containsTile(a,i,t);s&&r.push(s)}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(Ed(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=j.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}}function Ad(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Ed(e){return"raster"===e||"image"===e||"video"===e}Sd.maxOverzooming=10,Sd.maxUnderzooming=3;class Md{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new Md(r,r.tileSize/8192/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],i=Math.floor(e*this._scale+this._offset[0]),o=Math.floor(n);return new r(i,o)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?Kt(Kt(l.get(a,s,r),l.get(a,s+1,r),o-s),Kt(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*ch(1,e)*this._dem.stride}}class Cd{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new jr(8192,16,0),this.featureIndexArray=new Uo,this.promoteId=t}insert(e,t,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let e=0;e<t.length;e++){const n=t[e],r=[1/0,1/0,-1/0,-1/0];for(let e=0;e<n.length;e++){const t=n[e];r[0]=Math.min(r[0],t.x),r[1]=Math.min(r[1],t.y),r[2]=Math.max(r[2],t.x),r[3]=Math.max(r[3],t.y)}r[0]<8192&&r[1]<8192&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Al.VectorTile(new sc(this.rawTileData)).layers,this.sourceLayerCoder=new vh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=fr(i.filter),a=e.tileResult,s=e.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,n,r)=>Ia(a.bufferedTilespaceGeometry,e,t,n,r)));c.sort(Pd);let u=null;s.elevation&&c.length>0&&(u=Md.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const f=this.featureIndexArray.get(l);let p=null;this.loadMatchingFeature(h,f,o,i.layers,i.availableImages,t,n,r,((t,n,r,i=0)=>(p||(p=_a(t)),n.queryIntersectsFeature(a,t,r,p,this.z,e.transform,e.pixelPosMatrix,u,i))))}return h}loadMatchingFeature(e,t,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=t,f=this.bucketLayerIDs[u];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,f))return;const p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(c);if(n.needGeometry){const e=ba(m,!0);if(!n.filter(new Vi(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new Vi(this.tileID.overscaledZ),m))return;const g=this.getId(m,p);for(let t=0;t<f.length;t++){const n=f[t];if(r&&r.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const p=v({},a[n]);p.paint=Td(p.paint,u.paint,m,h,i),p.layout=Td(p.layout,u.layout,m,h,i);const y=!l||l(m,u,h,d);if(!y)continue;const _=new _h(m,this.z,this.x,this.y,g);_.layer=p;let b=e[n];void 0===b&&(b=e[n]=[]),b.push({featureIndex:c,feature:_,intersectionZ:y})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=fr(i);for(const i of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:i,layoutVertexArrayOffset:0},c,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function Td(e,t,n,r,i){return E(e,((e,o)=>{const a=t instanceof $i?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function Pd(e,t){return t-e}qr("FeatureIndex",Cd,{omit:["rawTileData","sourceLayerCoder"]});class Dd{constructor(e){const t={},n=[];for(const r in e){const i=e[r],o=t[r]={};for(const e in i){const t=i[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const r=t.metrics.localGlyph?2:1,a={x:0,y:0,w:t.bitmap.width+2*r,h:t.bitmap.height+2*r};n.push(a),o[e]={rect:a,metrics:t.metrics}}}const{w:r,h:i}=Tc(n),o=new ws({width:r||1,height:i||1});for(const n in e){const r=e[n];for(const e in r){const i=r[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=t[n][e].rect,s=i.metrics.localGlyph?2:1;ws.copy(i.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},i.bitmap)}}this.image=o,this.positions=t}}qr("GlyphAtlas",Dd);class kd{constructor(e){this.tileID=new gh(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new Oo;const o=new vh(Object.keys(e.layers).sort()),a=new Cd(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},c=t.familiesBySource[this.source];for(const t in c){const r=e.layers[t];if(!r)continue;let i=!1,u=!1;for(const e of c[t])"symbol"===e[0].type?i=!0:u=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!u)continue;1===r.version&&P(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(t),d=[];for(let e=0;e<r.length;e++){const n=r.feature(e),i=a.getId(n,t);d.push({feature:n,id:i,index:e,sourceLayerIndex:h})}for(const e of c[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(Od(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(d,l,this.tileID.canonical),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let u,h,d,f;const p={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},m=E(l.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(m).length?r.send("getGlyphs",{uid:this.uid,stacks:m},((e,t)=>{u||(u=e,h=t,_.call(this))}),void 0,void 0,p):h={};const g=Object.keys(l.iconDependencies);g.length?r.send("getImages",{icons:g,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{u||(u=e,d=t,_.call(this))}),void 0,void 0,p):d={};const v=Object.keys(l.patternDependencies);function _(){if(u)return i(u);if(h&&d&&f){const e=new Dd(h),t=new Dc(d,f);for(const r in s){const i=s[r];i instanceof Lu?(Od(i.layers,this.zoom,n),bu(i,h,e.positions,d,t.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):i.hasPattern&&(i instanceof Vl||i instanceof ul||i instanceof Pl)&&(Od(i.layers,this.zoom,n),i.addFeatures(l,this.tileID.canonical,t.patternPositions))}this.status="done",i(null,{buckets:y(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{u||(u=e,f=t,_.call(this))}),void 0,void 0,p):f={},_.call(this)}}function Od(e,t,n){const r=new Vi(t);for(const t of e)t.recalculate(r,n)}class Id{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function Rd(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=Se(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new Al.VectorTile(new sc(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}e.AUTH_ERR_MSG="NO_ACCESS_TOKEN",e.Aabb=fs,e.Actor=class{constructor(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.cancelCallbacks={},S(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=O()?e:o,this.scheduler=new th}send(e,t,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=z(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Yr(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(O()||t.mustQueue){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n($r(t.error)):n(null,$r(t.data)))}else{const n=z(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Yr(t):null,data:Yr(r,n)},n)}:e=>{},i=$r(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=ph,e.Color=lt,e.ColorMode=xd,e.Context=class{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fh(this),this.clearDepth=new Nh(this),this.clearStencil=new Uh(this),this.colorMask=new jh(this),this.depthMask=new Vh(this),this.stencilMask=new Gh(this),this.stencilFunc=new Hh(this),this.stencilOp=new Wh(this),this.stencilTest=new qh(this),this.depthRange=new Zh(this),this.depthTest=new Xh(this),this.depthFunc=new Yh(this),this.blend=new $h(this),this.blendFunc=new Jh(this),this.blendColor=new Kh(this),this.blendEquation=new Qh(this),this.cullFace=new ed(this),this.cullFaceSide=new td(this),this.frontFace=new nd(this),this.program=new rd(this),this.activeTexture=new id(this),this.viewport=new od(this),this.bindFramebuffer=new ad(this),this.bindRenderbuffer=new sd(this),this.bindTexture=new ld(this),this.bindVertexBuffer=new cd(this),this.bindElementBuffer=new ud(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new hd(this),this.pixelStoreUnpack=new dd(this),this.pixelStoreUnpackPremultiplyAlpha=new fd(this),this.pixelStoreUnpackFlipY=new pd(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Rh(this,e,t)}createVertexBuffer(e,t,n){return new Bh(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new vd(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){a(e.blendFunction,xd.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},e.CullFaceMode=wd,e.DEMData=Oh,e.DataConstantProperty=Ji,e.DedupedRequest=Id,e.DepthMode=_d,e.DepthStencilAttachment=class extends yd{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},e.EXTENT=8192,e.Elevation=class{getAtPoint(e,t=0){const n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;const r=n.getSource().maxzoom,i=1<<r,o=Math.floor(e.x),a=e.x-o,s=new gh(r,o,r,Math.floor(a*i),Math.floor(e.y*i)),l=this.findDEMTileFor(s);if(!l||!l.dem)return t;const c=l.dem,u=1<<l.tileID.canonical.z,h=(a*u-l.tileID.canonical.x)*c.dim,d=(e.y*u-l.tileID.canonical.y)*c.dim,f=Math.floor(h),p=Math.floor(d);return this.exaggeration()*Kt(Kt(c.get(f,p),c.get(f,p+1),d-p),Kt(c.get(f+1,p),c.get(f+1,p+1),d-p),h-f)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPoint(new dh(e.wrap+(e.canonical.x+t/8192)/r,(e.canonical.y+n/8192)/r))}getForTilePoints(e,t,n,r){const i=Md.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let t=0;t<e.canonical.z-r.canonical.z&&!n.leaves[s];t++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Re,e.EvaluationParameters=Vi,e.Event=Ie,e.Evented=Le,e.Frustum=ds,e.GlyphManager=su,e.ImagePosition=Pc,e.LngLat=ih,e.LngLatBounds=rh,e.LocalGlyphMode=au,e.MAX_SAFE_INTEGER=s,e.MercatorCoordinate=dh,e.ONE_EM=24,e.OverscaledTileID=gh,e.Point=r,e.Point$1=r,e.Properties=no,e.RGBAImage=Ss,e.Ray=class{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=ts(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=ts(as(qa(),e,this.pos),t)/r;return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}(n,Qa(qa(),this.pos,this.dir,i)),!0}},e.RequestManager=class{constructor(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",$,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!J(e))return e;const n=ee(e);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!J(e))return e;const n=ee(e);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t){if(!J(e))return e;const n=ee(e);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=ee(e);return J(e)?(i.path=`/styles/v1${i.path}/sprite${t}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${t}${n}`,te(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!J(e))return e;const r=ee(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==r.authority&&512===n?"@2x":""}${H.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${G.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${G.TILE_URL_VERSION}${r.path}`);const i=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||G.ACCESS_TOKEN;return G.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,i)}canonicalizeTileURL(e,t){const n=ee(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${G.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${G.TILE_URL_VERSION}/`,"")}`;let i=n.params;return t&&(i=i.filter((e=>!e.match(/^access_token=/)))),i.length&&(r+=`?${i.join("&")}`),r}canonicalizeTileset(e,t){const n=!!t&&J(t),r=[];for(const t of e.tiles||[])K(t)?r.push(this.canonicalizeTileURL(t,n)):r.push(t);return r}_makeAPIURL(e,t){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=ee(G.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path=`${r.path}${e.path}`),!G.REQUIRE_ACCESS_TOKEN)return te(e);if(!(t=t||G.ACCESS_TOKEN))throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`);return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t}`),te(e)}},e.RequestPerformance=eh,e.ResourceType=_e,e.SegmentVector=ga,e.SourceCache=Sd,e.StencilMode=bd,e.StructArrayLayout1ui2=Po,e.StructArrayLayout2f1f2i16=bo,e.StructArrayLayout2i4=co,e.StructArrayLayout3f12=go,e.StructArrayLayout3ui6=wo,e.StructArrayLayout4i8=uo,e.Texture=Ju,e.Tile=xh,e.Transitionable=Wi,e.Uniform1f=Ko,e.Uniform1i=class extends Jo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends Jo{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends Jo{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=Qo,e.UniformColor=ea,e.UniformMatrix3f=class extends Jo{constructor(e,t){super(e,t),this.current=na}set(e){for(let t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}},e.UniformMatrix4f=class extends Jo{constructor(e,t){super(e,t),this.current=ta}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=mh,e.ValidationError=ze,e.VectorTileWorkerSource=class extends Le{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||Rd,this.loading={},this.loaded={},this.deduped=new Id(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=!!(e&&e.request&&e.request.collectResourceTiming)&&new eh(e.request),i=this.loading[n]=new kd(e);i.abort=this.loadVectorData(e,((o,a)=>{const s=!this.loading[n];if(delete this.loading[n],s||o||!a)return i.status="done",s||(this.loaded[n]=i),t(o);const l=a.rawData,c={};a.expires&&(c.expires=a.expires),a.cacheControl&&(c.cacheControl=a.cacheControl);const u={};if(r){const e=r.finish();e&&(u.resourceTiming=JSON.parse(JSON.stringify(e)))}i.vectorTile=a.vectorTile||new Al.VectorTile(new sc(l));const h=()=>{i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);t(null,v({rawTileData:l.slice(0)},n,c,u))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=i}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain;const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=kc,e.ZoomHistory=Jr,e.add=$a,e.addDynamicAttributes=ku,e.altitudeFromMercatorZ=hh,e.asyncAll=g,e.bezier=d,e.bindAll=S,e.browser=j,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=m(r-1,-1,e.length-1),o=m(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(a.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){ye++,ye>fe&&(e.getActor().send("enforceCacheSizeLimit",de),ye=0)},e.clamp=p,e.clearTileCache=function(e){const t=o.caches.delete("mapbox-tiles");e&&t.catch(e).then((()=>e()))},e.clipLine=Qc,e.clone=function(e){var t=new ja(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=C,e.collisionCircleLayout=Kl,e.config=G,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new ja(16);return ja!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Va,e.create$2=function(){var e=new ja(4);return ja!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createExpression=er,e.createLayout=so,e.createStyleLayer=function(e){return"custom"===e.type?new Vu(e):new Wu[e.type](e)},e.cross=ns,e.deepEqual=a,e.degToRad=u,e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=ts,e.ease=f,e.easeCubicInOut=h,e.emitValidationErrors=Ur,e.endsWith=A,e.enforceCacheSizeLimit=function(e){pe(),ue&&ue.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=ec,e.evaluateSizeForZoom=tc,e.evaluateVariableOffset=_u,e.evented=Fi,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.extend=v,e.featureFilter=fr,e.filterObject=M,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-h-p,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=d+g,e[9]=f-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=Vc,e.getAnchorJustification=xu,e.getBounds=function(e){let t=1/0,n=1/0,i=-1/0,o=-1/0;for(const r of e)t=Math.min(t,r.x),n=Math.min(n,r.y),i=Math.max(i,r.x),o=Math.max(o,r.y);return{min:new r(t,n),max:new r(i,o)}},e.getImage=De,e.getJSON=function(e,t){return we(v(e,{type:"json"}),t)},e.getMapSessionAPI=ce,e.getRTLTextPluginStatus=Ni,e.getReferrer=xe,e.getVideo=function(e,t){const n=o.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(let t=0;t<e.length;t++){const r=o.document.createElement("source");Me(e[t])||(n.crossOrigin="Anonymous"),r.src=e[t],n.appendChild(r)}return{cancel:()=>{}}},e.identity=Ga,e.identity$1=us,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,S=i*c-o*l,A=u*m-h*p,E=u*g-d*p,M=u*y-f*p,C=h*g-d*m,T=h*y-f*m,P=d*y-f*g,D=v*P-_*T+b*C+x*M-w*E+S*A;return D?(e[0]=(s*P-l*T+c*C)*(D=1/D),e[1]=(i*T-r*P-o*C)*D,e[2]=(m*S-g*w+y*x)*D,e[3]=(d*w-h*S-f*x)*D,e[4]=(l*M-a*P-c*E)*D,e[5]=(n*P-i*M+o*E)*D,e[6]=(g*b-p*S-y*_)*D,e[7]=(u*S-d*b+f*_)*D,e[8]=(a*T-s*M+c*A)*D,e[9]=(r*M-n*T-o*A)*D,e[10]=(p*w-m*b+y*v)*D,e[11]=(h*b-u*w-f*v)*D,e[12]=(s*E-a*C-l*A)*D,e[13]=(n*C-r*E+i*A)*D,e[14]=(m*_-p*x-g*v)*D,e[15]=(u*x-h*_+d*v)*D,e):null},e.isMapboxURL=J,e.latFromMercatorY=uh,e.len=ss,e.length=Xa,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Rd,e.makeRequest=we,e.mercatorXfromLng=sh,e.mercatorYfromLat=lh,e.mercatorZfromAltitude=ch,e.mul=Wa,e.mul$1=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},e.multiply=Ha,e.mvt=Al,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=es,e.normalize$1=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e},e.number=Kt,e.offscreenCanvasSupported=ve,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.pbf=sc,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=ji,e.polygonIntersectsBox=Ia,e.polygonIntersectsPolygon=Sa,e.polygonizeBounds=function(e,t,n=0,i=!0){const o=new r(n,n),a=e.sub(o),s=t.add(o),l=[a,new r(s.x,a.y),s,new r(a.x,s.y)];return i&&l.push(a),l},e.posAttributes=bh,e.postMapLoadEvent=se,e.postTurnstileEvent=oe,e.potpack=Tc,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=function(e){return e*c},e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Ri,pluginURL:Li}),Fi.on("pluginStateChange",e),e},e.renderColorRamp=Es,e.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l,e},e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e},e.rotateX$1=hs,e.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=l*r+d*i,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=Ka,e.scaleAndAdd=Qa,e.setCacheLimits=function(e,t){de=e,fe=t},e.setRTLTextPlugin=function(e,t,n=!1){if("deferred"===Ri||"loading"===Ri||"loaded"===Ri)throw new Error("setRTLTextPlugin cannot be called multiple times.");Li=j.resolveURL(e),Ri="deferred",Ii=t,zi(),n||Ui()},e.styleSpec=Be,e.sub=as,e.subtract=Ja,e.symbolSize=nc,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=ls,e.transformQuat=is,e.translate=function(e,t,n){var r,i,o,a,s,l,c,u,h,d,f,p,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=o*m+c*g+f*y+t[14],e[15]=a*m+u*g+p*y+t[15]),e},e.triggerPluginCompletionEvent=Bi,e.uniqueId=b,e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateLight=zr,e.validateStyle=Br,e.values=y,e.vectorTile=Al,e.version="2.1.1",e.warnOnce=P,e.webpSupported=H,e.window=o,e.wrap=m})),r(0,(function(e){function t(e){const n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}const r=Object.keys(e).sort();let i="{";for(let n=0;n<r.length;n++)i+=`${JSON.stringify(r[n])}:${t(e[r[n]])},`;return`${i}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t){this._layerConfigs[n.id]=n;const t=this._layers[n.id]=e.createStyleLayer(n);t._featureFilter=e.featureFilter(t.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let i=0;i<e.length;i++){const o=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(e[i])}const i=[];for(const e in r)i.push(r[e]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}const{ImageBitmap:i}=e.window;class o{loadTile(t,n){const{uid:r,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=t,c=i&&a instanceof i?this.getImageData(a,s):a;n(null,new e.DEMData(r,c,o,s<1,l))}getImageData(t,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const r=this.offscreenCanvasContext.getImageData(-n,-n,t.width+2*n,t.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:r.width,height:r.height},r.data)}}function a(e,t){if(0!==e.length){s(e[0],t);for(var n=1;n<e.length;n++)s(e[n],!t)}}function s(e,t){for(var n=0,r=0,i=e.length,o=i-1;r<i;o=r++)n+=(e[r][0]-e[o][0])*(e[o][1]+e[r][1]);n>=0!=!!t&&e.reverse()}const l=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class c{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.Point$1(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.Point$1(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}class u{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new c(this._features[e])}}var h=e.vectorTile.VectorTileFeature,d=f;function f(e,t){this.options=t||{},this.features=e,this.length=e.length}function p(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}f.prototype.feature=function(e){return new p(this.features[e],this.options.extent)},p.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},p.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},p.prototype.toGeoJSON=h.prototype.toGeoJSON;var m=y,g=d;function y(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,v,e.layers[n])}(t,n),n.finish()}function v(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,_,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,A,o[n])}function _(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,b,e),t.writeVarintField(3,n.type),t.writeMessage(4,S,n)}function b(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(r.push(s),o[s]=l=r.length-1),t.writeVarint(l);var c=n.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,d=a[h];void 0===d&&(i.push(c),a[h]=d=i.length-1),t.writeVarint(d)}}function x(e,t){return(t<<3)+(7&e)}function w(e){return e<<1^e>>31}function S(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(x(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(x(2,u-1));var d=l[h].x-i,f=l[h].y-o;t.writeVarint(w(d)),t.writeVarint(w(f)),i+=d,o+=f}3===r&&t.writeVarint(x(7,1))}}function A(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function E(e,t,n,r){M(e,n,r),M(t,2*n,2*r),M(t,2*n+1,2*r+1)}function M(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}m.fromVectorTileJs=y,m.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new d(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return y({layers:n})},m.GeoJSONWrapper=g;const T=e=>e[0],P=e=>e[1];class D{constructor(e,t=T,n=P,r=64,i=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let r=0;r<e.length;r++)a[r]=r,s[2*r]=t(e[r]),s[2*r+1]=n(e[r]);!function e(t,n,r,i,o,a){if(o-i<=r)return;const s=i+o>>1;!function e(t,n,r,i,o,a){for(;o>i;){if(o-i>600){const s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(t,n,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}const s=n[2*r+a];let l=i,c=o;for(E(t,n,i,r),n[2*o+a]>s&&E(t,n,i,o);l<c;){for(E(t,n,l,c),l++,c--;n[2*l+a]<s;)l++;for(;n[2*c+a]>s;)c--}n[2*i+a]===s?E(t,n,i,c):(c++,E(t,n,c,o)),c<=r&&(i=c+1),r<=c&&(o=c-1)}}(t,n,s,i,o,a%2),e(t,n,r,i,s-1,a+1),e(t,n,r,s+1,o,a+1)}(a,s,r,0,a.length-1,0)}range(e,t,n,r){return function(e,t,n,r,i,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),f=s.pop();if(d-f<=a){for(let a=f;a<=d;a++)c=t[2*a],u=t[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[a]);continue}const p=Math.floor((f+d)/2);c=t[2*p],u=t[2*p+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[p]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(f),s.push(p-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(p+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return function(e,t,n,r,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)C(t[2*i],t[2*i+1],n,r)<=l&&s.push(e[i]);continue}const d=Math.floor((h+u)/2),f=t[2*d],p=t[2*d+1];C(f,p,n,r)<=l&&s.push(e[d]);const m=(c+1)%2;(0===c?n-i<=f:r-i<=p)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+i>=f:r+i>=p)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}const k={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},O=Math.fround||(I=new Float32Array(1),e=>(I[0]=+e,I[0]));var I;class R{constructor(e){this.options=V(Object.create(k),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:r,nodeSize:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(B(e[t],t));this.trees[r+1]=new D(a,G,H,i,Float32Array),t&&console.timeEnd(o);for(let e=r;e>=n;e--){const n=+Date.now();a=this._cluster(a,e),this.trees[e]=new D(a,G,H,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(N(n),U(o),N(i),U(r)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?z(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const t of s){const n=i.points[t];n.parentId===e&&l.push(n.numPoints?z(n):this.points[n.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.points,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,n,r,i):i<r?i++:e.push(t),e.length===n)break}return i}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=t[a],s=e.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(e.x*i-n)),Math.round(this.options.extent*(e.y*i-r))]],tags:s?F(e):this.points[e.index].properties};let c;s?c=e.id:this.options.generateId?c=e.index:this.points[e.index].id&&(c=this.points[e.index].id),void 0!==c&&(l.id=c),o.features.push(l)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,t));for(let r=0;r<e.length;r++){const i=e[r];if(i.zoom<=t)continue;i.zoom=t;const l=this.trees[t+1],c=l.within(i.x,i.y,s),u=i.numPoints||1;let h=u;for(const e of c){const n=l.points[e];n.zoom>t&&(h+=n.numPoints||1)}if(h>=a){let e=i.x*u,a=i.y*u,s=o&&u>1?this._map(i,!0):null;const d=(r<<5)+(t+1)+this.points.length;for(const n of c){const r=l.points[n];if(r.zoom<=t)continue;r.zoom=t;const c=r.numPoints||1;e+=r.x*c,a+=r.y*c,r.parentId=d,o&&(s||(s=this._map(i,!0)),o(s,this._map(r)))}i.parentId=d,n.push(L(e/h,a/h,d,h,s))}else if(n.push(i),h>1)for(const e of c){const r=l.points[e];r.zoom<=t||(r.zoom=t,n.push(r))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?V({},e.properties):e.properties;const n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?V({},r):r}}function L(e,t,n,r,i){return{x:O(e),y:O(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function B(e,t){const[n,r]=e.geometry.coordinates;return{x:O(N(n)),y:O(U(r)),zoom:1/0,index:t,parentId:-1}}function z(e){return{type:"Feature",id:e.id,properties:F(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),j(e.y)]}};var t}function F(e){const t=e.numPoints,n=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return V(V({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function N(e){return e/360+.5}function U(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function j(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function V(e,t){for(const n in t)e[n]=t[n];return e}function G(e){return e.x}function H(e){return e.y}function W(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function q(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Z(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)Z(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)Z(e,t[r][i])}(i),i}function Z(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function X(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)Y(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)Y(i[c],s);else if("LineString"===o)$(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)$(i[c],s=[],a,!1),e.push(q(l,"LineString",s,t.properties));return}J(i,s,a,!1)}else if("Polygon"===o)J(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)X(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];J(i[c],u,a,!0),s.push(u)}}e.push(q(l,o,s,t.properties))}}function Y(e,t){t.push(K(e[0])),t.push(Q(e[1])),t.push(0)}function $(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=K(e[s][0]),c=Q(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,function e(t,n,r,i){for(var o,a=i,s=r-n>>1,l=r-n,c=t[n],u=t[n+1],h=t[r],d=t[r+1],f=n+3;f<r;f+=3){var p=W(t[f],t[f+1],c,u,h,d);if(p>a)o=f,a=p;else if(p===a){var m=Math.abs(f-s);m<l&&(o=f,l=m)}}a>i&&(o-n>3&&e(t,n,o,i),t[o+2]=a,r-o>3&&e(t,o,r,i))}(t,0,u,n),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function J(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];$(e[i],o,n,r),t.push(o)}}function K(e){return e/360+.5}function Q(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ee(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,f=0===i?u.minX:u.minY,p=0===i?u.maxX:u.maxY;if(f>=n&&p<r)l.push(u);else if(!(p<n||f>=r)){var m=[];if("Point"===d||"MultiPoint"===d)te(h,m,n,r,i);else if("LineString"===d)ne(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)ie(h,m,n,r,i,!1);else if("Polygon"===d)ie(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];ie(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(q(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(q(u.id,d,m,u.tags))}}}return l.length?l:null}function te(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ne(e,t,n,r,i,o,a){for(var s,l,c=re(e),u=0===i?ae:se,h=e.start,d=0;d<e.length-3;d+=3){var f=e[d],p=e[d+1],m=e[d+2],g=e[d+3],y=e[d+4],v=0===i?f:p,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(p-y,2))),v<n?_>n&&(l=u(c,f,p,g,y,n),a&&(c.start=h+s*l)):v>r?_<r&&(l=u(c,f,p,g,y,r),a&&(c.start=h+s*l)):oe(c,f,p,m),_<n&&v>=n&&(l=u(c,f,p,g,y,n),b=!0),_>r&&v<=r&&(l=u(c,f,p,g,y,r),b=!0),!o&&b&&(a&&(c.end=h+s*l),t.push(c),c=re(e)),a&&(h+=s)}var x=e.length-3;f=e[x],p=e[x+1],m=e[x+2],(v=0===i?f:p)>=n&&v<=r&&oe(c,f,p,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&oe(c,c[0],c[1],c[2]),c.length&&t.push(c)}function re(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ie(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ne(e[a],t,n,r,i,o,!1)}function oe(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ae(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function se(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function le(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=ce(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(ce(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(ce(o.geometry[s][c],t));i.push(l)}n.push(q(o.id,a,i,o.tags))}return n}function ce(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function ue(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(he(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(he(c[r][i],c[r][i+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function he(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function de(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,fe(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function fe(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)pe(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)pe(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)pe(a,c[s],e,n,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function pe(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function me(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)X(n,e.features[r],t,r);else X(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=ee(e,1,-1-n,n,0,-1,2,t),o=ee(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ee(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=le(i,1).concat(r)),o&&(r=r.concat(le(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ge(e,t,n){return 32*((1<<e)*n+t)+e}function ye(e,t){const n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);const i=new u(r.features);let o=m(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}me.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},me.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=ge(t,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=de(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var p=1<<i-t;if(n!==Math.floor(o/p)||r!==Math.floor(a/p))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,A=1+x;m=g=y=v=null,_=ee(e,u,n-x,n+S,0,d.minX,d.maxX,l),b=ee(e,u,n+w,n+A,0,d.minX,d.maxX,l),e=null,_&&(m=ee(_,u,r-x,r+S,1,d.minY,d.maxY,l),g=ee(_,u,r+w,r+A,1,d.minY,d.maxY,l),_=null),b&&(y=ee(b,u,r-x,r+S,1,d.minY,d.maxY,l),v=ee(b,u,r+w,r+A,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},me.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=ge(e,t=(t%a+a)%a,n);if(this.tiles[s])return ue(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[ge(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ue(this.tiles[s],i):null):null};class ve extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,ye),i&&(this.loadGeoJSON=i)}loadData(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const t=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const r=!!(n&&n.request&&n.request.collectResourceTiming)&&new e.RequestPerformance(n.request);this.loadGeoJSON(n,((i,o)=>{if(i||!o)return t(i);if("object"!=typeof o)return t(new Error(`Input data given to '${n.source}' is not a valid GeoJSON object.`));{!function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)a(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)a(t.coordinates[r],n);return t}(o,!0);try{if(n.filter){const t=e.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=o.features.filter((e=>t.value.evaluate({zoom:0},e)));o={type:"FeatureCollection",features:r}}this._geoJSONIndex=n.cluster?new R(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const t of s){const[o,a]=n[t],s=e.createExpression(a),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);r[t]=s.value,i[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=r[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=i[t].evaluate(o,a)},t}(n)).load(o.features):function(e,t){return new me(e,t)}(o,n.geojsonVtOptions)}catch(i){return t(i)}this.loaded={};const s={};if(r){const e=r.finish();e&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(e)))}t(null,s)}}))}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}removeSource(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class _e{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:ve},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,i,a)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded)),this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new o),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new _e(self)),_e})),r(0,(function(e){var t=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const i={create:function(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},o=e.window.document&&e.window.document.documentElement.style,a=o&&void 0!==o.userSelect?"userSelect":"WebkitUserSelect";let s;i.disableDrag=function(){o&&a&&(s=o[a],o[a]="none")},i.enableDrag=function(){o&&a&&(o[a]=s)},i.setTransform=function(e,t){e.style.transform=t};let l=!1;try{const t=Object.defineProperty({},"passive",{get(){l=!0}});e.window.addEventListener("test",t,t),e.window.removeEventListener("test",t,t)}catch(e){l=!1}i.addEventListener=function(e,t,n,r={}){e.addEventListener(t,n,"passive"in r&&l?r:r.capture)},i.removeEventListener=function(e,t,n,r={}){e.removeEventListener(t,n,"passive"in r&&l?r:r.capture)};const c=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)};function u(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",c,!0)}),0)},i.mousePos=function(t,n){const r=t.getBoundingClientRect();return new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},i.touchPos=function(t,n){const r=t.getBoundingClientRect(),i=[];for(let o=0;o<n.length;o++)i.push(new e.Point(n[o].clientX-r.left-t.clientLeft,n[o].clientY-r.top-t.clientTop));return i},i.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};class h extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const n of t){this.images[n]||this.fire(new e.Event("styleimagemissing",{id:n}));const t=this.images[n];t?r[n]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],r=n.x+1,o=n.y+1,a=this.images[t].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];u(e)&&this.updateImage(t,e)}}}const d=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new class{constructor(){this.specification=e.styleSpec.light.position}possiblyEvaluate(t,n){return function([t,n,r]){const i=e.degToRad(n+90),o=e.degToRad(r);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:r}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)});class f extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(d),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))}}const p=new e.Properties({source:new e.DataConstantProperty(e.styleSpec.terrain.source),exaggeration:new e.DataConstantProperty(e.styleSpec.terrain.exaggeration)});class m extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(p),this.set(t),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}class g{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];i=s*n,s+=l,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(e,t,n){const r=t/2;for(let t=-n;t<=n;t++){const i=this.width*(this.nextRow+n+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=t/n*(r+1);if(a.isDash){const e=r-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+d*d);this.data[i+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const r=this.width*this.nextRow;let i=0,o=e[i];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++i]);const n=Math.abs(t-o.left),a=Math.abs(t-o.right),s=Math.min(n,a);this.data[r+t]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(t,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;0===t.length&&t.push(1);let o=0;for(let n=0;n<t.length;n++)t[n]<0&&(e.warnOnce("Negative value is found in line dasharray, replacing values with 0"),t[n]=0),o+=t[n];if(0!==o){const e=this.width/o,i=this.getDashRanges(t,this.width,e);n?this.addRoundDash(i,e,r):this.addRegularDash(i)}const a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}class y{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new y.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function v(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}y.Actor=e.Actor;class _{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((e=>r.pointCoordinate3D(e))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.Point||"number"==typeof t[0]){const o=e.Point.convert(t);r=[e.Point.convert(t)],i=n.isPointAboveHorizon(o)}else{const o=e.Point.convert(t[0]),a=e.Point.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new _(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}containsTile(t,n,r){const i=t.queryPadding+1,o=r?this._bufferedCameraMercator(i,n).map((e=>t.tileID.getTilePoint(e))):this._bufferedScreenMercator(i,n).map((e=>t.tileID.getTilePoint(e))),a=this.screenGeometryMercator.map((e=>t.tileID.getTileVec3(e))),s=a.map((t=>new e.Point(t[0],t[1]))),l=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),c=t.tileID.getTileVec3(l),u=a.map((t=>{const n=e.sub(t,t,c);return e.normalize(n,n),new e.Ray(c,n)})),h=v(t,1,n.zoom);if(e.polygonIntersectsBox(o,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:u,bufferedTilespaceGeometry:o,bufferedTilespaceBounds:(d=e.getBounds(o),d.min.x=e.clamp(d.min.x,0,e.EXTENT),d.min.y=e.clamp(d.min.y,0,e.EXTENT),d.max.x=e.clamp(d.max.x,0,e.EXTENT),d.max.y=e.clamp(d.max.y,0,e.EXTENT),d),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:h};var d}_bufferedScreenMercator(e,t){const n=b(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const r=this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=b(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const r=this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._cameraRaycastCache[n]=r,r}}}function b(e){return 100*e|0}function x(t,n,r){const i=function(i,o){if(i)return r(i);if(o){const i=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(i.vectorLayers=o.vector_layers,i.vectorLayerIds=i.vectorLayers.map((e=>e.id))),i.tiles=n.canonicalizeTileset(i,t.url),r(null,i)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.browser.frame((()=>i(null,t)))}class w{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class S extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=x(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new w(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.browser.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i)=>{if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;const r=this.map.painter.context,o=r.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new e.Texture(r,i,o.RGBA,{useMipmap:!0}),t.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}var A=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class E extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(t,n){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,i)=>{this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):i&&(this.image=i,t&&(this.coordinates=t),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t;const n=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const r=n.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const M={vector:class extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=x(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new w(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles();this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this));else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this)))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:S,"raster-dem":class extends S{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const a=n?o:e.browser.getImageData(o,r),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:a,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,i.bind(this)))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}load(){this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((t=>{if(t)return void this.fire(new e.ErrorEvent(t));const n={dataType:"source",sourceDataType:"metadata"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(n.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new e.Event("data",n))}))}onAdd(e){this.map=e,this.load()}setData(t){return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((t=>{if(t)return void this.fire(new e.ErrorEvent(t));const n={dataType:"source",sourceDataType:"content"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(n.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new e.Event("data",n))})),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(t){this._loaded=!1;const n=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(e.browser.resolveURL(r),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this.actor.send(`${this.type}.loadData`,n,((e,r)=>{this._removed||r&&r.abandoned||(this._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[this.id]&&(this._resourceTiming=r.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:n.source},null),t(e))}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends E{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:E,canvas:class extends E{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}},C=function(t,n,r,i){const o=new M[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function T(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculatePosMatrix(n.toUnwrapped()))}function P(e,t,n,r,i,o,a,s=!1){const l=e.tilesIn(r,a,s);l.sort(k);const c=[];for(const r of l)c.push({wrappedTileID:r.tile.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(t,n,e._state,r,i,o,T(e.transform,r.tile.tileID),s)});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return u}function D(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let e=0;e<n.length;e++){const o=n[e],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(r,t))}return r}function k(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function O(){return null!=gi.workerClass?new gi.workerClass:new e.window.Worker(gi.workerUrl)}const I="mapboxgl_preloaded_worker_pool";class R{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<R.workerCount;)this.workers.push(new O);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[I]}numActive(){return Object.keys(this.active).length}}let L;function B(){return L||(L=new R),L}function z(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function F(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=z(e[n],t[e[n].ref]));return e}R.workerCount=2;const N={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function U(e,t,n){n.push({command:N.addSource,args:[e,t[e]]})}function j(e,t,n){t.push({command:N.removeSource,args:[e]}),n[e]=!0}function V(e,t,n,r){j(e,n,r),U(e,t,n)}function G(t,n,r){let i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;return!0}function H(t,n,r,i,o,a){let s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function W(e){return e.id}function q(e,t){return e[t.id]=t,e}class Z{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class X{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let e=0;e<this.xCellCount*this.yCellCount;e++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[u],t=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}function Y(t,n,r,i,o){const a=e.create();return n?(e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,i.angle)):e.multiply(a,i.labelPlaneMatrix,t),a}function $(t,n,r,i,o){if(n){const n=e.clone(t);return e.scale(n,n,[o,o,1]),r||e.rotateZ(n,n,-i.angle),n}return i.glCoordMatrix}function J(t,n,r=0){const i=[t.x,t.y,r,1];r?e.transformMat4(i,i,n):le(i,i,n);const o=i[3];return{point:new e.Point(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function K(e,t){return Math.min(.5+e/t*.5,1.5)}function Q(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function ee(t,n,r,i,o,a,s,l,c){const u=i?t.textSizeData:t.iconSizeData,h=e.evaluateSizeForZoom(u,r.transform.zoom),d=[256/r.width*2+1,256/r.height*2+1],f=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;f.clear();const p=t.lineVertexArray,m=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,g=r.transform.width/r.transform.height;let y=!1;for(let i=0;i<m.length;i++){const v=m.get(i);if(v.hidden||v.writingMode===e.WritingMode.vertical&&!y){se(v.numGlyphs,f);continue}y=!1;const _=c?c({x:v.anchorX,y:v.anchorY}):0,b=[v.anchorX,v.anchorY,_,1];if(e.transformMat4(b,b,n),!Q(b,d)){se(v.numGlyphs,f);continue}const x=K(r.transform.cameraToCenterDistance,b[3]),w=e.evaluateSizeForFeature(u,h,v),S=s?w/x:w*x,A=new e.Point(v.anchorX,v.anchorY),E=J(A,o,_);if(E.signedDistanceFromCamera<=0){se(v.numGlyphs,f);continue}const M=E.point;let C={};const T=s?null:c,P=re(v,S,!1,l,n,o,a,t.glyphOffsetArray,p,f,M,A,C,g,T);y=P.useVertical,T&&P.needsFlipping&&(C={}),(P.notEnoughRoom||y||P.needsFlipping&&re(v,S,!0,l,n,o,a,t.glyphOffsetArray,p,f,M,A,C,g,T).notEnoughRoom)&&se(v.numGlyphs,f)}i?t.text.dynamicLayoutVertexBuffer.updateData(f):t.icon.dynamicLayoutVertexBuffer.updateData(f)}function te(e,t,n,r,i,o,a,s,l,c,u,h,d){const f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(f-1),v=oe(e*g,n,r,i,o,a,s.segment,p,m,l,c,u,h,d,!0);if(!v)return null;const _=oe(e*y,n,r,i,o,a,s.segment,p,m,l,c,u,h,d,!0);return _?{first:v,last:_}:null}function ne(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function re(t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=n/24,y=t.lineOffsetX*g,v=t.lineOffsetY*g;let _;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,n=t.lineStartIndex,o=t.lineStartIndex+t.lineLength,u=te(g,l,y,v,r,h,d,t,c,a,f,m);if(!u)return{notEnoughRoom:!0};const b=J(u.first.point,s).point,x=J(u.last.point,s).point;if(i&&!r){const e=ne(t.writingMode,b,x,p);if(e)return e}_=[u.first];for(let i=t.glyphStartIndex+1;i<e-1;i++)_.push(oe(g*l.getoffsetX(i),y,v,r,h,d,t.segment,n,o,c,a,f,m));_.push(u.last)}else{if(i&&!r){const n=J(d,o).point,r=t.lineStartIndex+t.segment+1,i=new e.Point(c.getx(r),c.gety(r)),a=J(i,o),s=a.signedDistanceFromCamera>0?a.point:ie(d,i,n,1,o),l=ne(t.writingMode,n,s,p);if(l)return l}const n=oe(g*l.getoffsetX(t.glyphStartIndex),y,v,r,h,d,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,f,m);if(!n)return{notEnoughRoom:!0};_=[n]}for(const t of _)e.addDynamicAttributes(u,t.point,t.angle);return{}}function ie(e,t,n,r,i,o){const a=e.add(e.sub(t)._unit()),s=J(a,i,o?o(a):0).point,l=n.sub(s);return n.add(l._mult(r/l.mag()))}function oe(t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=i?t-n:t+n;let y=g>0?1:-1,v=0;i&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);let _=y>0?l+s:l+s+1,b=o,x=o,w=0,S=0;const A=Math.abs(g),E=[],M=[];let C=a;const T=()=>{const t=_-y;return 0===w?a:new e.Point(u.getx(t),u.gety(t))},P=()=>ie(T(),C,x,A-w+1,h,f);for(;w+S<=A;){if(_+=y,_<l||_>=c)return null;if(x=b,E.push(b),p&&M.push(C||T()),b=d[_],void 0===b){C=new e.Point(u.getx(_),u.gety(_));const t=J(C,h,f?f(C):0);b=t.signedDistanceFromCamera>0?d[_]=t.point:P()}else C=null;w+=S,S=x.dist(b)}m&&f&&(C=C||new e.Point(u.getx(_),u.gety(_)),d[_]=b=void 0===d[_]?b:P(),S=x.dist(b));const D=(A-w)/S,k=b.sub(x),O=k.mult(D)._add(x);r&&O._add(k._unit()._perp()._mult(r*y));const I=v+Math.atan2(b.y-x.y,b.x-x.x);return E.push(O),p&&(C=C||new e.Point(u.getx(_),u.gety(_)),M.push(function(t,n,r){const i=1-r;return new e.Point(t.x*i+n.x*r,t.y*i+n.y*r)}(M.length>0?M[M.length-1]:C,C,D))),{point:O,angle:I,path:E,tilePath:M}}const ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function se(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(ae,3*e)}}function le(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}class ce{constructor(e,t=new X(e.width+200,e.height+200,25),n=new X(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200}placeCollisionBox(e,t,n,r,i,o,a){const s=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY,t.elevation),l=i*s.perspectiveRatio,c=(t.x1*e+n.x-t.padding)*l+s.point.x,u=(t.y1*e+n.y-t.padding)*l+s.point.y,h=(t.x2*e+n.x+t.padding)*l+s.point.x,d=(t.y2*e+n.y+t.padding)*l+s.point.y,f=s.perspectiveRatio<=.55||s.aboveHorizon;return!this.isInsideGrid(c,u,h,d)||!r&&this.grid.hitTest(c,u,h,d,a)||f?{box:[],offscreen:!1}:{box:[c,u,h,d],offscreen:this.isOffscreen(c,u,h,d)}}placeCollisionCircles(t,n,r,i,o,a,s,l,c,u,h,d,f,p){const m=[],g=this.transform.elevation,y=g?e=>g.getAtTileOffset(p,e.x,e.y):e=>0,v=new e.Point(n.anchorX,n.anchorY),_=y(v),b=this.projectAndGetPerspectiveRatio(a,v.x,v.y,_),{perspectiveRatio:x}=b,w=(u?o/x:o*x)/e.ONE_EM,S=J(v,s,_).point,A=b.signedDistanceFromCamera>0?te(w,i,n.lineOffsetX*w,n.lineOffsetY*w,!1,S,v,n,r,s,{},g&&!u?y:null,u&&!!g):null;let E=!1,M=!1,C=!0;if(A&&!b.aboveHorizon){const n=.5*d*x+f,r=new e.Point(-100,-100),i=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Z,a=A.first,s=A.last;let u=[];for(let e=a.path.length-1;e>=1;e--)u.push(a.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const p=2.5*n;if(l){const e=u.map(g?(e,t)=>{const n=y(t<a.path.length-1?a.tilePath[a.path.length-1-t]:s.tilePath[t-a.path.length+2]);return J(e,l,n)}:e=>J(e,l));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let v=[];if(u.length>0){const t=u[0].clone(),n=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),n.x=Math.max(n.x,u[e].x),n.y=Math.max(n.y,u[e].y);v=t.x>=r.x&&n.x<=i.x&&t.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||t.x>i.x||n.y<r.y||t.y>i.y?[]:e.clipLine([u],r.x,r.y,i.x,i.y)}for(const e of v){o.reset(e,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/p)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+100,l=a.y+100;m.push(s,l,n,0);const u=s-n,d=l-n,f=s+n,p=l+n;if(C=C&&this.isOffscreen(u,d,f,p),M=M||this.isInsideGrid(u,d,f,p),!t&&this.grid.hitTestCircle(s,l,n,h)&&(E=!0,!c))return{circles:[],offscreen:!1,collisionDetected:E}}}}return{circles:!c&&E||!M?[]:m,offscreen:C,collisionDetected:E}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of t){const t=new e.Point(s.x+100,s.y+100);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const t of s){const r=t.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const i=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(n,i)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let t=0;t<e.length;t+=4)o.insertCircle(a,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,n,r,i){const o=[n,r,i||0,1];let a=!1;return i||this.transform.pitch>0?(e.transformMat4(o,o,t),a=o[2]>o[3]):le(o,o,t),{point:new e.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/o[3]*.5,1.5),signedDistanceFromCamera:o[3],aboveHorizon:a}}isOffscreen(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}class ue{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class he{constructor(e,t,n,r,i){this.text=new ue(e?e.text:null,t,n,i),this.icon=new ue(e?e.icon:null,t,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class de{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class fe{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class pe{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class me{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function ge(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.Point(l+u[0]*o,c+u[1]*o)}function ye(t,n,r,i,o){const a=new e.Point(t,n);return r&&a._rotate(i?o:-o),a}class ve{constructor(e,t,n,r){this.transform=e.clone(),this.collisionIndex=new ce(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new me(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=r.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),f="map"===l.get("text-rotation-alignment"),p=v(r,1,this.transform.zoom),m=Y(h,d,f,this.transform,p);let g=null;if(d){const t=$(h,d,f,this.transform,p);g=e.multiply([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new pe(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const y={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y){const v=[h.textOffset0,h.textOffset1],_=f.getSymbolInstanceTextSize(g,h,this.transform.zoom,d),b=ge(e,n,r,v,i),x=this.collisionIndex.placeCollisionBox(_,t,ye(b.x,b.y,o,a,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(f.getSymbolInstanceIconSize(y,this.transform.zoom,d),m,ye(b.x,b.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)&&x.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:v,width:n,height:r,anchor:e,textBoxScale:i,prevAnchor:t},this.markUsedJustification(f,e,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:b,placedGlyphBoxes:x}}}placeLayerBucketPart(t,n,r){const{bucket:i,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:f,collisionGroup:p}=t.parameters,m=o.get("text-optional"),g=o.get("icon-optional"),y=o.get("text-allow-overlap"),v=o.get("icon-allow-overlap"),_="map"===o.get("text-rotation-alignment"),b="map"===o.get("text-pitch-alignment"),x="none"!==o.get("icon-text-fit"),w="viewport-y"===o.get("symbol-z-order"),S=y&&(v||!i.hasIconData()||g),A=v&&(y||!i.hasTextData()||m);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h),r&&i.updateCollisionDebugBuffers(this.transform.zoom,h);const E=(t,h,w)=>{if(n[t.crossTileID])return;if(u)return void(this.placements[t.crossTileID]=new de(!1,!1,!1));let E=!1,M=!1,C=!0,T=null,P={box:null,offscreen:null},D={box:null,offscreen:null},k=null,O=null,I=null,R=0,L=0,B=0;w.textFeatureIndex?R=w.textFeatureIndex:t.useRuntimeCollisionCircles&&(R=t.featureIndex),w.verticalTextFeatureIndex&&(L=w.verticalTextFeatureIndex);const z=e=>{(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[i.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},F=w.textBox;if(F){z(F);const n=n=>{let r=e.WritingMode.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(i,r,t))}return r},r=(n,r)=>{if(i.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&w.verticalTextBox){for(const t of i.writingModes)if(t===e.WritingMode.vertical?(P=r(),D=P):P=n(),P&&P.box&&P.box.length)break}else P=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];s.indexOf(e.anchor)>0&&(s=s.filter((t=>t!==e.anchor)),s.unshift(e.anchor))}const l=(e,n,r)=>{const o=t.textBoxScale,l=(e.x2-e.x1)*o+2*e.padding,u=(e.y2-e.y1)*o+2*e.padding,m=x&&!v?n:null;m&&z(m);let g={box:[],offscreen:!1};const w=y?2*s.length:s.length;for(let n=0;n<w;++n){const y=this.attemptAnchorPlacement(s[n%s.length],e,l,u,o,_,b,c,a,p,n>=s.length,t,h,i,r,m,d,f);if(y&&(g=y.placedGlyphBoxes,g&&g.box&&g.box.length)){E=!0,T=y.shift;break}}return g};r((()=>l(F,w.iconBox,e.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;return n&&z(n),i.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&t.numVerticalGlyphVertices>0&&n?l(n,w.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),P&&(E=P.box,C=P.offscreen);const u=n(P&&P.box);if(!E&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(i,e.anchor,t,u))}}else{const o=(n,r)=>{const o=i.getSymbolInstanceTextSize(d,t,this.transform.zoom,h),s=this.collisionIndex.placeCollisionBox(o,n,new e.Point(0,0),y,c,a,p.predicate);return s&&s.box&&s.box.length&&(this.markUsedOrientation(i,r,t),this.placedOrientations[t.crossTileID]=r),s};r((()=>o(F,e.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;return i.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?(z(n),o(n,e.WritingMode.vertical)):{box:null,offscreen:null}})),n(P&&P.box&&P.box.length)}}if(k=P,E=k&&k.box&&k.box.length>0,C=k&&k.offscreen,t.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),c=e.evaluateSizeForFeature(i.textSizeData,d,n),u=o.get("text-padding");O=this.collisionIndex.placeCollisionCircles(y,n,i.lineVertexArray,i.glyphOffsetArray,c,a,s,l,r,b,p.predicate,t.collisionCircleDiameter,u,this.retainedQueryData[i.bucketInstanceId].tileID),E=y||O.circles.length>0&&!O.collisionDetected,C=C&&O.offscreen}if(w.iconFeatureIndex&&(B=w.iconFeatureIndex),w.iconBox){const t=t=>{z(t);const n=x&&T?ye(T.x,T.y,_,b,this.transform.angle):new e.Point(0,0),r=i.getSymbolInstanceIconSize(f,this.transform.zoom,h);return this.collisionIndex.placeCollisionBox(r,t,n,v,c,a,p.predicate)};D&&D.box&&D.box.length&&w.verticalIconBox?(I=t(w.verticalIconBox),M=I.box.length>0):(I=t(w.iconBox),M=I.box.length>0),C=C&&I.offscreen}const N=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,U=g||0===t.numIconVertices;if(N||U?U?N||(M=M&&E):E=M&&E:M=E=M&&E,E&&k&&k.box&&this.collisionIndex.insertCollisionBox(k.box,o.get("text-ignore-placement"),i.bucketInstanceId,D&&D.box&&L?L:R,p.ID),M&&I&&this.collisionIndex.insertCollisionBox(I.box,o.get("icon-ignore-placement"),i.bucketInstanceId,B,p.ID),O&&(E&&this.collisionIndex.insertCollisionCircles(O.circles,o.get("text-ignore-placement"),i.bucketInstanceId,R,p.ID),r)){const e=i.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new fe);for(let e=0;e<O.circles.length;e+=4)t.circles.push(O.circles[e+0]),t.circles.push(O.circles[e+1]),t.circles.push(O.circles[e+2]),t.circles.push(O.collisionDetected?1:0)}this.placements[t.crossTileID]=new de(E||S,M||A,C||i.justReloaded),n[t.crossTileID]=!0};if(w){const e=i.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];E(i.symbolInstances.get(n),n,i.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)E(i.symbolInstances.get(e),e,i.collisionArrays[e]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[i.bucketInstanceId];e.invert(t.invProjMatrix,a),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(t,n,r,i){let o;o=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:r.crossTileID)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=i[e];o?(this.opacities[e]=new he(o,r,t.text,t.icon),n=n||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new he(null,r,t.text,t.icon,t.skipFade),n=n||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new he(t,r,!1,!1);i.isHidden()||(this.opacities[e]=i,n=n||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=new he(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),u="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),d=new he(null,0,a&&(s||!t.hasIconData()||i.get("icon-optional")),s&&(a||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const f=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};for(let r=0;r<t.symbolInstances.length;r++){const i=t.symbolInstances.get(r),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,crossTileID:p}=i;let m=this.opacities[p];n[p]?m=o:m||(m=d,this.opacities[p]=m),n[p]=!0;const g=i.numIconVertices>0,y=this.placedOrientations[i.crossTileID],v=y===e.WritingMode.vertical,_=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(a>0||s>0){const e=Ce(m.text);f(t.text,a,v?Te:e),f(t.text,s,_?Te:e);const n=m.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=n||v?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=n||_?1:0);const r=this.variableOffsets[i.crossTileID];r&&this.markUsedJustification(t,r.anchor,i,y);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(t,"left",i,o),this.markUsedOrientation(t,o,i))}if(g){const e=Ce(m.icon),n=!(h&&i.verticalPlacedIconSymbolIndex&&v);i.placedIconSymbolIndex>=0&&(f(t.icon,i.numIconVertices,n?e:Te),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=m.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(f(t.icon,i.numVerticalIconVertices,n?Te:e),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[r];if(n){let r=new e.Point(0,0);if(n.textBox||n.verticalTextBox){let e=!0;if(l){const t=this.variableOffsets[p];t?(r=ge(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),c&&r._rotate(u?this.transform.angle:-this.transform.angle)):e=!1}n.textBox&&_e(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||v,r.x,r.y),n.verticalTextBox&&_e(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||_,r.x,r.y)}const i=Boolean(!_&&n.verticalIconBox);n.iconBox&&_e(t.iconCollisionBox.collisionVertexArray,m.icon.placed,i,h?r.x:0,h?r.y:0),n.verticalIconBox&&_e(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!i,h?r.x:0,h?r.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function _e(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const be=Math.pow(2,25),xe=Math.pow(2,24),we=Math.pow(2,17),Se=Math.pow(2,16),Ae=Math.pow(2,9),Ee=Math.pow(2,8),Me=Math.pow(2,1);function Ce(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*be+t*xe+n*we+t*Se+n*Ae+t*Ee+n*Me+t}const Te=0;class Pe{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class De{constructor(e,t,n,r,i,o,a){this.placement=new ve(e,i,o,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.browser.now(),o=()=>{const t=e.browser.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Pe(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ke=512/e.EXTENT/2;class Oe{constructor(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<t.length;n++){const r=t.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,e)})}}getScaledCoordinates(t,n){const r=ke/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*r)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Ie{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Re{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const n=this.indexes[e],r={};for(const e in n){const i=n[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[e]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=i[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=n.generate(),r[i.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Oe(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[n])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class Le{constructor(){this.layerIndexes={},this.crossTileIDs=new Ie,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Re);let i=!1;const o={};r.handleWrapJump(n);for(const n of t){const t=n.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(n.tileID,t,this.crossTileIDs)&&(i=!0),o[t.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Be=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),ze=e.pick(N,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),Fe=e.pick(N,["setCenter","setZoom","setBearing","setPitch"]),Ne=function(){const t={},n=e.styleSpec.$version;for(const r in e.styleSpec.$root){const i=e.styleSpec.$root[r];if(i.required){let e=null;e="version"===r?n:"array"===i.type?[]:{},null!=e&&(t[r]=e)}}return t}(),Ue={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class je extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new y(B(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new g(256,512),this.crossTileSymbolIndex=new Le,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=je.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const n=this._layers[e];n.source===t.id&&this._validateLayer(n)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ne,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Be(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=F(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of r)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new f(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.browser.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,u())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,u())}));function u(){if(a)r(a);else if(i&&o){const t=e.browser.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:f}=i[r],p=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,p,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:p,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:f}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&Ue[e.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const t in r){const n=this._sourceCaches[t];r[t]!==n.used&&n.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Be(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=F(t.layers);const n=function(t,n){if(!t)return[{command:N.setStyle,args:[n]}];let r=[];try{if(!e.deepEqual(t.version,n.version))return[{command:N.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||r.push({command:N.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||r.push({command:N.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||r.push({command:N.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||r.push({command:N.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||r.push({command:N.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||r.push({command:N.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||r.push({command:N.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||r.push({command:N.setLight,args:[n.light]});const i={},o=[];!function(t,n,r,i){let o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||j(o,r,i));for(o in n)n.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e.deepEqual(t[o],n[o])||("geojson"===t[o].type&&"geojson"===n[o].type&&G(t,n,o)?r.push({command:N.setGeoJSONSourceData,args:[o,n[o].data]}):V(o,n,r,i)):U(o,n,r))}(t.sources,n.sources,o,i);const a=[];t.layers&&t.layers.forEach((e=>{i[e.source]?r.push({command:N.removeLayer,args:[e.id]}):a.push(e)}));let s=t.terrain;s&&i[s.source]&&(r.push({command:N.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),e.deepEqual(s,n.terrain)||r.push({command:N.setTerrain,args:[n.terrain]}),function(t,n,r){n=n||[];const i=(t=t||[]).map(W),o=n.map(W),a=t.reduce(q,{}),s=n.reduce(q,{}),l=i.slice(),c=Object.create(null);let u,h,d,f,p,m,g;for(u=0,h=0;u<i.length;u++)d=i[u],s.hasOwnProperty(d)?h++:(r.push({command:N.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(r.push({command:N.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],r.push({command:N.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],f=a[d],p=s[d],!c[d]&&!e.deepEqual(f,p))if(e.deepEqual(f.source,p.source)&&e.deepEqual(f["source-layer"],p["source-layer"])&&e.deepEqual(f.type,p.type)){for(g in H(f.layout,p.layout,r,d,null,N.setLayoutProperty),H(f.paint,p.paint,r,d,null,N.setPaintProperty),e.deepEqual(f.filter,p.filter)||r.push({command:N.setFilter,args:[d,p.filter]}),e.deepEqual(f.minzoom,p.minzoom)&&e.deepEqual(f.maxzoom,p.maxzoom)||r.push({command:N.setLayerZoomRange,args:[d,p.minzoom,p.maxzoom]}),f)f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?H(f[g],p[g],r,d,g.slice(6),N.setPaintProperty):e.deepEqual(f[g],p[g])||r.push({command:N.setLayerProperty,args:[d,g,p[g]]}));for(g in p)p.hasOwnProperty(g)&&!f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?H(f[g],p[g],r,d,g.slice(6),N.setPaintProperty):e.deepEqual(f[g],p[g])||r.push({command:N.setLayerProperty,args:[d,g,p[g]]}))}else r.push({command:N.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],r.push({command:N.addLayer,args:[p,m]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:N.setStyle,args:[n]}]}return r}(this.serialize(),t).filter((e=>!(e.command in Fe)));if(0===n.length)return!1;const r=n.filter((e=>!(e.command in ze)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(", ")}.`);return n.forEach((e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=t,!0}addImage(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=C(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(void 0===n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(t);for(const t of r)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if(Be(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,n,r={}){this._checkLoaded();const i=this.getLayer(t);if(i){if(!e.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,`layers.${i.id}.filter`,n,null,r)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){return e.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,n,r,i={}){this._checkLoaded();const o=this.getLayer(t);o?e.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,n,r,i={}){this._checkLoaded();const o=this.getLayer(t);o?e.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(void 0===o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(void 0===i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(void 0!==i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){n[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=_.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(P(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const e of Object.keys(l).map(Number))c.push(a[e]);c.sort(k);for(const n of c){const r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],i=r[e];i.sort(((e,t)=>{const r=n.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in s)s[t].forEach((r=>{const i=r.feature,o=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(D(e,n));return i}addSourceType(e,t,n){return je.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(je.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const n in t)if(!e.deepEqual(t[n],r[n])){i=!0;break}if(!i)return;const o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(o)}setTerrain(t){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof t.source){const n="terrain-dem-src";this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})}if(!this._validate(e.validateStyle.terrain,"terrain",t)){if(this.terrain){const n=this.terrain,r=n.get();for(const i in t)if(!e.deepEqual(t[i],r[i])){n.set(t),this.stylesheet.terrain=t;const r={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}else this._createTerrain(t);this._updateDrapeFirstLayers()}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(t){const n=this.terrain=new m(t);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const r={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&Be(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new De(t,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}je.getSourceType=function(e){return M[e]},je.setSourceType=function(e,t){M[e]=t},je.registerForPluginStateChange=e.registerForPluginStateChange;var Ve="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Ge={};Ge=xt("","\n#define ELEVATION_SCALE 7.3\n#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/ELEVATION_SCALE;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);const He=xt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),We=xt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=xt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ze=xt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Xe=xt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=xt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),$e=xt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Je=xt("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ke=xt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Qe=xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),et=xt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),tt=xt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),nt=xt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rt=xt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),it=xt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ot=xt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),at=xt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),st=xt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),lt=xt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),ct=xt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),ut=xt("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),ht=xt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),dt=xt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ft=xt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),pt=xt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),mt=xt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),gt=xt("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),yt=xt("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),vt=xt("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ve),_t=xt("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ve),bt=xt("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}");function xt(e,t,n){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g);let s=a?a.concat(o):o;n||(s=Ge.staticUniforms.concat(s));const l={};return{fragmentSource:e=e.replace(r,((e,t,n,r,i)=>(l[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return l[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:i,staticUniforms:s}}var wt=Object.freeze({__proto__:null,get preludeTerrain(){return Ge},prelude:He,background:We,backgroundPattern:qe,circle:Ze,clippingMask:Xe,heatmap:Ye,heatmapTexture:$e,collisionBox:Je,collisionCircle:Ke,debug:Qe,fill:et,fillOutline:tt,fillOutlinePattern:nt,fillPattern:rt,fillExtrusion:it,fillExtrusionPattern:ot,hillshadePrepare:at,hillshade:st,line:lt,lineGradient:ct,linePattern:ut,lineSDF:ht,raster:dt,symbolIcon:ft,symbolSDF:pt,symbolTextAndIcon:mt,terrainRaster:gt,terrainDepth:yt,skybox:vt,skyboxGradient:_t,skyboxCapture:bt});class St{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,r,i,o,a,s){this.context=e;let l=this.boundPaintVertexBuffers.length!==r.length;for(let e=0;!l&&e<r.length;e++)this.boundPaintVertexBuffers[e]!==r[e]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(t,n,r,i,o,a,s)}freshBind(e,t,n,r,i,o,a){let s;const l=e.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(let e=l;e<s;e++)u.disableVertexAttribArray(e)}t.enableAttributes(u,e);for(const t of n)t.enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const t of n)t.bind(),t.setVertexAttribPointers(u,e,i);o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function At(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function Et(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.fbo;if(!u)return;t.prepareDrawTile(n);const h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r||e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:At(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.posMatrix:null);h.draw(l,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,d,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Mt(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function Ct(t,n,r,i,o,a){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),Mt(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(t.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}const Tt=(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image0:new e.Uniform1i(t,n.u_image0),u_skirt_height:new e.Uniform1f(t,n.u_skirt_height)}),Pt=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),Dt=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},kt={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Ot(t,n,r,i,o){const a=t.context,s=a.gl;let l=t.useProgram("terrainRaster"),c=0;const u=t.colorModeForRenderPass(),h=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Dt.update(o);const d=t.transform,f=6*Math.pow(1.5,22-d.zoom)*n.exaggeration();var p,m,g;for(const y of i){const i=r.getTile(y),v=e.StencilMode.disabled,_=n.prevTerrainTileForTile[y.key],b=n.terrainTileForTile[y.key];g=b,null!=(m=_)&&null!=g&&m.hasData()&&g.hasData()&&null!=m.demTexture&&null!=g.demTexture&&m.tileID.key!==g.tileID.key&&Dt.newMorphing(y.key,_,b,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const x=Dt.getMorphValuesForProxy(y.key),w=x?1:0;let S;x&&(S={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:e.easeCubicInOut(x.phase)}});const A=Pt(y.posMatrix,It(y.canonical,d.renderWorldCopies)?f/10:f);c!==(p=w)&&(l=t.useProgram("terrainRaster",null,kt[p]),c=p),n.setupElevationDraw(i,l,S),l.draw(a,s.TRIANGLES,h,v,u,e.CullFaceMode.backCCW,A,"terrain_raster",n.gridBuffer,n.gridIndexBuffer,n.gridSegments)}}function It(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const Rt=e=>({u_matrix:e});function Lt(t,n,r,i,o){if(o>0){const a=e.browser.now(),s=(a-t.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class Bt extends e.SourceCache{constructor(e){const t=C("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new y(B(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].state="unloaded",delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class zt extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.posMatrix=n}}class Ft extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout4i8,r=new e.StructArrayLayout3ui6;n.reserve(17161),r.reserve(33800);const i=e.EXTENT/128,o=e.EXTENT+i/2,a=o+i;for(let t=-i;t<a;t+=i)for(let r=-i;r<a;r+=i){const i=r<0||r>o||t<0||t>o?24575:0,a=e.clamp(Math.round(r),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);n.emplaceBack(a+i,s,a,s)}const s=(e,t)=>{const n=131*t+e;r.emplaceBack(n+1,n,n+131),r.emplaceBack(n+131,n+131+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)s(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)s(t,e),s(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,A.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Bt(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.sourceCache.getSource().tileSize/128,r=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(n,t*r,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!r),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPoint(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.painter.options;this.renderCached=(i.zooming||i.moving||i.rotating||!!this.forceRenderCached)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;const o=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.posMatrix=r.calculatePosMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.Point(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(o,this.painter),this._previousZoom=r.zoom;const a=this.proxyToSource||{};this.proxyToSource={},o.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const s=this._style._sourceCaches;for(const e in s){const n=s[e];if(!n.used)continue;if(n!==this.sourceCache&&(this._findCoveringTileCache[n.id]={}),this._setupProxiedCoordsForOrtho(n,t[e],a),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=o.map((e=>new zt(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(o),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._setupRenderCache(a),this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=e.browser.now();const l={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in l||(this._visibleDemTiles.push(t),l[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Mt(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i={width:1,height:1,data:new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(c=e),this._prepareDemTileUniforms(t,n,a)&&(l=n))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST)),r&&r.useDepthForOcclusion&&(i.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),r&&r.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a)}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=()=>{r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1},s=this._drapedRenderBatches.shift();let l=[];const c=n.style.order;let u=0;for(let h=0;h<o.length;h++){const d=o[h],f=i.getTileByID(d.proxyTileKey),p=i.proxyCachedFBO[d.key]?i.proxyCachedFBO[d.key][t]:void 0;let m,g;if(m=this.currentFBO=void 0!==p?i.renderCache[p]:this.pool[u++],f.texture=m.tex,void 0===p||m.dirty){r.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(r.clear({color:e.Color.transparent}),m.dirty=!1);for(let e=s.start;e<=s.end;++e){const t=n.style._layers[c[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[d.key][i.id]:[d];if(!o)continue;const a=o;r.viewport.set([0,0,m.fb.width,m.fb.height]),g!==(i?i.id:null)&&(this._setupStencil(o,t,i),g=i?i.id:null),n.renderLayer(n,i,t,a)}m.dirty=this.renderedToTile,this.renderedToTile&&l.push(f.tileID),5===u&&(u=0,l.length>0&&(a(),Ot(n,this,i,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}else l.push(f.tileID)}return a(),l.length>0&&Ot(n,this,i,l,this._updateTimestamp),s.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=Math.pow(2,i.overscaledZ),{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1,ref:1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){return!this.renderCached||this._style.order.some((e=>{const t=this._style._layers[e],n=!t.isHidden(this.painter.transform.zoom),r=t.getCrossfadeParameters();return"custom"!==t.type&&!n&&!!r&&1!==r.t}))}_clearRasterFadeFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof S){e=!0;break}if(e)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],n=t.isHidden(this.painter.transform.zoom),r=this._style._getLayerSourceCache(t);if("raster"!==t.type||n||!r)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t){const t=Lt(r.getTile(e),r.findLoadedParent(e,0),r,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(r.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterFadeFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let i=n.length-1;i>=0;i--){const o=n[i];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const n=e[o.key],i=this.proxyToSource[o.key];let a=0;for(const e in i){const t=i[e],o=n[e];if(!o||o.length!==t.length||t.some(((t,n)=>t!==o[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[o.key])t.renderCache[t.proxyCachedFBO[o.key][e]].dirty=a<0||a!==Object.values(n).length}else for(let e=0;e<this._drapedRenderBatches.length;++e){const n=this._drapedRenderBatches[e];let r=t.renderCachePool.pop();void 0===r&&t.renderCache.length<50&&(r=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==r&&(void 0===t.proxyCachedFBO[o.key]&&(t.proxyCachedFBO[o.key]={}),t.proxyCachedFBO[o.key][n.start]=r,t.renderCache[r].dirty=!0)}}this._tilesDirty={}}_setupStencil(t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);const a=this.currentFBO,s=a.fb;let l;if(n.isTileClipped())l=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);l=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}if(!s.depthAttachment){const t=i.createRenderbuffer(i.gl.DEPTH_STENCIL,s.width,s.height);s.depthAttachment=new e.DepthStencilAttachment(i,s.framebuffer),s.depthAttachment.set(t),i.clear({stencil:0})}a.ref+l>255&&(i.clear({stencil:0}),a.ref=0),a.ref+=l,this._overlapStencilMode.ref=a.ref,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Rt(s.posMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of i){const i=r.getTile(t),c=Pt(t.posMatrix,0);n.setupElevationDraw(i,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof E)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let t=0;t<i.length;t++){const o=i[t],a=this._findTileCoveringTileID(o,e);if(a){const t=this._createProxiedId(o,a,n[o.key]&&n[o.key][e.id]);r.push(t),this.proxyToSource[o.key][e.id]=[t]}}let o=!1;for(let i=0;i<t.length;i++){const a=e.getTile(t[i]);if(!a||!a.hasData())continue;const s=this._findTileCoveringTileID(a.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==a.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],i=this._createProxiedId(s.tileID,a,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,i):this.proxyToSource[s.tileID.key][e.id]=[i],r.push(i),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new zt(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=n.getTile(a))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):r=n.getTileByID(t)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(e){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}}function Nt(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}class Ut{static cacheKey(e,t,n){let r=`${e}${n?n.cacheKey:""}`;for(const e of t)r+=`/${e}`;return r}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const l=Nt(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),h=r.staticUniforms?Nt(r.staticUniforms):[],d=i?i.getBinderUniforms():[],f=h.concat(d),p=[];for(const e of f)p.indexOf(e)<0&&p.push(e);let m=i?i.defines():[];m=m.concat(a.map((e=>`#define ${e}`)));const g=m.concat(He.fragmentSource,r.fragmentSource).join("\n"),y=m.concat(He.vertexSource,Ge.vertexSource,r.vertexSource).join("\n"),v=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,g),s.compileShader(v),s.attachShader(this.program,v);const _=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(_,y),s.compileShader(_),s.attachShader(this.program,_),this.attributes={};const b={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(_),s.deleteShader(v);for(let e=0;e<p.length;e++){const t=p[e];if(t&&!b[t]){const e=s.getUniformLocation(this.program,t);e&&(b[t]=e)}}this.fixedUniforms=o(t,b),this.binderUniforms=i?i.getUniforms(t,b):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((t,n)=>({u_dem:new e.Uniform1i(t,n.u_dem),u_dem_prev:new e.Uniform1i(t,n.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,n.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,n.u_dem_tl),u_dem_scale:new e.Uniform1f(t,n.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,n.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,n.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,n.u_dem_size),u_dem_lerp:new e.Uniform1f(t,n.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,n.u_exaggeration),u_depth:new e.Uniform1i(t,n.u_depth),u_depth_size_inv:new e.Uniform2f(t,n.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,n.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,n.u_label_plane_matrix_inv)}))(t,b))}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(t[e])}}draw(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const e in this.fixedUniforms)this.fixedUniforms[e].set(a[e]);f&&f.setUniforms(e,this.binderUniforms,h,{zoom:d});const y={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[t];for(const n of u.get()){const r=n.vaos||(n.vaos={});(r[s]||(r[s]=new St)).bind(e,this,l,f?f.getPaintVertexBuffers():[],c,n.vertexOffset,p,m),g.drawElements(t,n.primitiveLength*y,g.UNSIGNED_SHORT,n.primitiveOffset*y*2)}}}function jt(e,t,n){const r=1/v(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const Vt=(t,n,r,i)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=e.create$1();"viewport"===o.properties.get("anchor")&&(e.fromRotation(l,-n.transform.angle),e.transformMat3(s,s,l));const c=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},Gt=(t,n,r,i,o,a,s)=>e.extend(Vt(t,n,r,i),jt(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),Ht=e=>({u_matrix:e}),Wt=(t,n,r,i)=>e.extend(Ht(t),jt(r,n,i)),qt=(e,t)=>({u_matrix:e,u_world:t}),Zt=(t,n,r,i,o)=>e.extend(Wt(t,n,r,i),{u_world:o}),Xt=(t,n,r,i)=>{const o=t.transform;let a;if("map"===i.paint.get("circle-pitch-alignment")){const e=v(r,1,o.zoom);a=[e,e]}else a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:a}},Yt=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},$t=(t,n,r)=>{const i=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/i,n.pixelsToGLUnits[1]/i]}},Jt=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),Kt=(e,t,n,r)=>({u_matrix:e,u_extrude_scale:v(t,1,n),u_intensity:r}),Qt=(t,n,r,i)=>{const o=t.transform;return{u_matrix:on(t,n,r,i),u_ratio:1/v(n,1,o.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},en=(t,n,r,i,o)=>e.extend(Qt(t,n,r,i),{u_image:0,u_image_height:o}),tn=(t,n,r,i,o)=>{const a=t.transform,s=rn(n,a);return{u_matrix:on(t,n,r,o),u_texsize:n.imageAtlasTexture.size,u_ratio:1/v(n,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},nn=(t,n,r,i,o,a)=>{const s=t.lineAtlas,l=rn(n,t.transform),c="round"===r.layout.get("line-cap"),u=s.getDash(i.from,c),h=s.getDash(i.to,c),d=u.width*o.fromScale,f=h.width*o.toScale;return e.extend(Qt(t,n,r,a),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/f,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,f)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:o.t})};function rn(e,t){return 1/v(e,1,t.tileZoom)}function on(e,t,n,r){return e.translatePosMatrix(r||t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const an=(e,t,n,r,i)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:sn(i.paint.get("raster-hue-rotate"))};var o,a};function sn(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const ln=(e,t,n,r,i,o,a,s,l,c)=>{const u=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},cn=(t,n,r,i,o,a,s,l,c,u,h)=>{const{cameraToCenterDistance:d,_pitch:f}=o.transform;return e.extend(ln(t,n,r,i,o,a,s,l,c,u),{u_gamma_scale:i?d*Math.cos(o.terrain?0:f):1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+h})},un=(t,n,r,i,o,a,s,l,c,u)=>e.extend(cn(t,n,r,i,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),hn=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),dn=(t,n,r,i,o,a)=>e.extend(function(e,t,n,r){const i=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/v(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,a,r,o),{u_matrix:t,u_opacity:n}),fn={fillExtrusion:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fillExtrusionPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fill:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),fillPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),fillOutline:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}),fillOutlinePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),circle:(t,n)=>({u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),collisionBox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale)}),collisionCircle:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}),debug:(t,n)=>({u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}),clippingMask:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmap:(t,n)=>({u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmapTexture:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}),hillshade:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}),hillshadePrepare:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}),line:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}),lineGradient:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image),u_image_height:new e.Uniform1f(t,n.u_image_height)}),linePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),lineSDF:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}),raster:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}),symbolIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}),symbolSDF:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),symbolTextAndIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),background:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}),backgroundPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}),terrainRaster:Tt,terrainDepth:Tt,skybox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_cubemap:new e.Uniform1i(t,n.u_cubemap),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}),skyboxGradient:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_center_direction:new e.Uniform3f(t,n.u_center_direction),u_radius:new e.Uniform1f(t,n.u_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}),skyboxCapture:(t,n)=>({u_matrix_3f:new e.UniformMatrix3f(t,n.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,n.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,n.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,n.u_color_tint_m),u_luminance:new e.Uniform1f(t,n.u_luminance)})};let pn;function mn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[];let d=0,f=0;for(let p=0;p<i.length;p++){const m=i[p],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;let v=m.posMatrix;0===o[0]&&0===o[1]||(v=t.translatePosMatrix(m.posMatrix,g,o,a));const _=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){const n=e.create(),r=v;e.mul(n,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(n,n,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:f,transform:r,invTransform:n}),d+=b.length/4,f=d}_&&(t.terrain&&t.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,$t(v,t.transform,g),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,t.transform.zoom,null,_.collisionVertexBuffer,_.collisionVertexBufferExt))}if(!s||!h.length)return;const p=t.useProgram("collisionCircle"),m=new e.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!pn||pn.length<2*d)&&(pn=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(d));const y=l.createIndexBuffer(pn,!0),v=l.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const n of h){const i={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(_=t.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};p.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,i,r.id,v,y,e.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,t.transform.zoom,null,null,null)}var _;v.destroy(),y.destroy()}const gn=e.identity(new Float32Array(16));function yn(t,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*n,u=-(l-.5)*r,h=e.evaluateVariableOffset(t,i);return new e.Point((c/o+h[0])*a,(u/o+h[1])*a)}function vn(t,n,r,i,o,a,s,l,c,u,h,d){const f=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,g={};p.clear();for(let m=0;m<f.length;m++){const y=f.get(m),v=t.allowVerticalPlacement&&!y.placedOrientation,_=y.hidden||!y.crossTileID||v?null:i[y.crossTileID];if(_){const i=new e.Point(y.anchorX,y.anchorY),f=d(i),m=J(i,r?l:s,f),v=K(a.cameraToCenterDistance,m.signedDistanceFromCamera);let b=o.evaluateSizeForFeature(t.textSizeData,u,y)*v/e.ONE_EM;r&&(b*=t.tilePixelRatio/c);const{width:x,height:w,anchor:S,textOffset:A,textBoxScale:E}=_,M=yn(S,x,w,A,E,b),C=r?J(i.add(M),s,f).point:m.point.add(n?M.rotate(-a.angle):M),T=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<y.numGlyphs;t++)e.addDynamicAttributes(p,C,T);h&&y.associatedIconIndex>=0&&(g[y.associatedIconIndex]={shiftedAnchor:C,angle:T})}else se(y.numGlyphs,p)}if(h){m.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t);if(r.hidden)se(r.numGlyphs,m);else{const n=g[t];if(n)for(let t=0;t<r.numGlyphs;t++)e.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else se(r.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function _n(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function bn(t,n,r,i,o,a,s,l,c,u,h,d){const f=t.context,p=f.gl,m=t.transform,g="map"===l,y="map"===c,_=g&&"point"!==r.layout.get("symbol-placement"),b=g&&!y&&!_,x=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let w=!1;const S=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),A=r.layout.get("text-variable-anchor"),E=[],M=t.terrain&&y?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of i){const i=n.getTile(l),c=i.getBucket(r);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const d=h.programConfigurations.get(r.id),f=o||c.sdfIcons,S=o?c.textSizeData:c.iconSizeData,C=y||0!==m.pitch,T=t.useProgram(_n(f,o,c),d,M),P=e.evaluateSizeForZoom(S,m.zoom);let D,k,O,I,R=[0,0],L=null;if(o){if(k=i.glyphAtlasTexture,O=p.LINEAR,D=i.glyphAtlasTexture.size,c.iconsInText){R=i.imageAtlasTexture.size,L=i.imageAtlasTexture;const e="composite"===S.kind||"camera"===S.kind;I=C||t.options.rotating||t.options.zooming||e?p.LINEAR:p.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;k=i.imageAtlasTexture,O=f||t.options.rotating||t.options.zooming||e||C?p.LINEAR:p.NEAREST,D=i.imageAtlasTexture.size}const B=v(i,1,t.transform.zoom),z=Y(l.posMatrix,y,g,t.transform,B),F=t.terrain&&y&&_?e.invert(new Float32Array(16),z):gn,N=$(l.posMatrix,y,g,t.transform,B),U=A&&c.hasTextData(),j="none"!==r.layout.get("icon-text-fit")&&U&&c.hasIconData();if(_){const e=m.elevation;ee(c,l.posMatrix,t,o,z,N,y,u,e?t=>e.getAtTileOffset(l,t.x,t.y):null)}const V=t.translatePosMatrix(l.posMatrix,i,a,s),G=_||o&&A||j?gn:z,H=t.translatePosMatrix(N,i,a,s,!0),W=f&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let q;q=f?c.iconsInText?un(S.kind,P,b,y,t,V,G,H,D,R):cn(S.kind,P,b,y,t,V,G,H,o,D,!0):ln(S.kind,P,b,y,t,V,G,H,o,D);const Z={program:T,buffers:h,uniformValues:q,atlasTexture:k,atlasTextureIcon:L,atlasInterpolation:O,atlasInterpolationIcon:I,isSDF:f,hasHalo:W,tile:i,labelPlaneMatrixInv:F};if(x&&c.canOverlap){w=!0;const t=h.segments.get();for(const n of t)E.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:Z})}else E.push({segments:h.segments,sortKey:0,state:Z})}w&&E.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of E){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(p.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,p.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(p.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,xn(n.buffers,e.segments,r,t,n.program,S,h,d,i)),i.u_is_halo=0}xn(n.buffers,e.segments,r,t,n.program,S,h,d,n.uniformValues)}}function xn(t,n,r,i,o,a,s,l,c){const u=i.context;o.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function wn(t,n,r,i,o,a,s){const l=t.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=r.getCrossfadeParameters();let d,f,p,m,g;s?(f=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(f=u?"fillPattern":"fill",d=l.TRIANGLES);for(const y of i){const i=n.getTile(y);if(u&&!i.patternsLoaded())continue;const v=i.getBucket(r);if(!v)continue;t.prepareDrawTile(y);const _=v.programConfigurations.get(r.id),b=t.useProgram(f,_);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),_.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[x.to.toString()],n=e.patternPositions[x.from.toString()];t&&n&&_.setConstantPatternPositions(t,n)}const w=t.translatePosMatrix(y.posMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){m=v.indexBuffer2,g=v.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===f&&u?Zt(w,t,h,i,e):qt(w,e)}else m=v.indexBuffer,g=v.segments,p=u?Wt(w,t,h,i):Ht(w);b.draw(t.context,d,o,t.stencilModeForClipping(y),a,e.CullFaceMode.disabled,p,r.id,v.layoutVertexBuffer,m,g,r.paint,t.transform.zoom,_)}}function Sn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),d=r.getCrossfadeParameters(),f=r.paint.get("fill-extrusion-opacity");for(const p of i){const i=n.getTile(p),m=i.getBucket(r);if(!m)continue;const g=m.programConfigurations.get(r.id),y=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g);if(t.terrain){const e=t.terrain;if(!m.enableTerrain)continue;if(e.setupElevationDraw(i,y,{useMeterToDem:!0}),An(l,n,p,m,r,e),!m.centroidVertexBuffer){const e=y.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}h&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers(d));const v=u.constantOr(null);if(v&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[v.to.toString()],n=e.patternPositions[v.from.toString()];t&&n&&g.setConstantPatternPositions(t,n)}const _=t.translatePosMatrix(p.posMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),b=r.paint.get("fill-extrusion-vertical-gradient"),x=h?Gt(_,t,b,f,p,d,i):Vt(_,t,b,f);y.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,x,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,t.transform.zoom,g,t.terrain?m.centroidVertexBuffer:null)}}function An(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().maxzoom;for(const r of[0,-1,1]){if(e.overscaledZ+r<t)continue;if(r>0&&e.overscaledZ<t)continue;const i=n.getTileByID(e.calculateScaledKey(e.overscaledZ+r));if(i&&i.hasData()){const e=i.getBucket(o);if(e)return e}}},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),h=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),d=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>h(e,t),(e,t)=>h(t,e)],f=new e.Point(0,0);let p,m,g;const y=(t,n,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,p),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let t=0;t<4;t++){const n=i.borders[t];if(0===n.length&&(i.borderDone[t]=!0),i.borderDone[t])continue;const o=g=s[t](r),c=l(o);if(!c||!c.enableTerrain)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!p){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;p=e}const u=(t<2?1:5)-t,h=c.borders[u];let v=0;for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[t];let s;for(;v<h.length&&(s=c.featuresOnBorder[h[v]],!(s.borders[u][1]>a[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,s,!1),v++;if(s&&v<h.length){const n=v;let r=0;for(;!(s.borders[u][0]>a[1]-3)&&(r++,++v!==h.length);)s=c.featuresOnBorder[h[v]];if(s=c.featuresOnBorder[h[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(v=n),i.encodeCentroid(void 0,o,!1),c.borderDone[u]||c.encodeCentroid(void 0,s,!1);continue}const l=d[t](o,s),p=t%2?e.EXTENT-1:0;f.x=y(l[0],Math.min(e.EXTENT-1,l[1]),p,t<2,l[2]),f.y=0,i.encodeCentroid(f,o,!1),c.borderDone[u]||c.encodeCentroid(f,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDone[t]=i.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const En=new e.Color(1,0,0,1),Mn=new e.Color(0,1,0,1),Cn=new e.Color(0,0,1,1),Tn=new e.Color(1,0,1,1),Pn=new e.Color(0,1,1,1);function Dn(e,t,n,r){On(e,0,t+n/2,e.transform.width,n,r)}function kn(e,t,n,r){On(e,t-n/2,0,n,e.transform.height,r)}function On(t,n,r,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function In(t,n,r){const i=t.context,o=i.gl,a=r.posMatrix,s=t.useProgram("debug"),l=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(l,s);const c=e.DepthMode.disabled,u=e.StencilMode.disabled,h=t.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,c,u,h,e.CullFaceMode.disabled,Jt(a,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);const d=l.latestRawTileData,f=Math.floor((d&&d.byteLength||0)/1024),p=n.getTile(r).tileSize,m=512/Math.min(p,512)*(r.overscaledZ/t.transform.zoom)*.5;let g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,`${g} ${f}kb`),s.draw(i,o.TRIANGLES,c,u,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Jt(a,e.Color.transparent,m),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}const Rn=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ln}=Rn;function Bn(e,t,n,r){e.emplaceBack(t,n,r)}class zn{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Bn(this.vertexArray,-1,-1,1),Bn(this.vertexArray,1,-1,1),Bn(this.vertexArray,-1,1,1),Bn(this.vertexArray,1,1,1),Bn(this.vertexArray,-1,-1,-1),Bn(this.vertexArray,1,-1,-1),Bn(this.vertexArray,-1,1,-1),Bn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Ln),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Fn(t,n,r,i,o,a){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4([],i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Nn={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const o of t){const t=i.getTile(o),a=t.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;const h=e.evaluateSizeForZoom(a.textSizeData,l.zoom),d=v(t,1,n.transform.zoom),f=Y(o.posMatrix,u,c,n.transform,d),p="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(h){const n=Math.pow(2,l.zoom-t.tileID.overscaledZ),r=l.elevation;vn(a,c,u,s,e.symbolSize,l,f,o.posMatrix,n,h,p,r?e=>r.getAtTileOffset(o,e.x,e.y):e=>0)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&bn(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&bn(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(mn(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),mn(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,f=t.colorModeForRenderPass(),p=[];for(let o=0;o<i.length;o++){const a=i[o],s=n.getTile(a),c=s.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h=Yt(r),d={programConfiguration:u,program:t.useProgram("circle",u,h),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:Xt(t,a,s,r),tile:s};if(l){const t=c.segments.get();for(const n of t)p.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:d})}else p.push({segments:c.segments,sortKey:0,state:d})}l&&p.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of p){const{programConfiguration:i,program:o,layoutVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:p}=n.state,m=n.segments;t.terrain&&t.terrain.setupElevationDraw(p,o,{useDepthForOcclusion:!0}),o.draw(c,u.TRIANGLES,h,d,f,e.CullFaceMode.disabled,l,r.id,a,s,m,r.paint,t.transform.zoom,i)}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){const i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});for(let c=0;c<i.length;c++){const u=i[c];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(r);if(!d)continue;const f=d.programConfigurations.get(r.id),p=t.useProgram("heatmap",f),{zoom:m}=t.transform;t.terrain&&t.terrain.setupElevationDraw(h,p),p.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,e.CullFaceMode.disabled,Kt(u.posMatrix,h,m,r.paint.get("heatmap-intensity")),r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,t.transform.zoom,f)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((t,n,r,i)=>{const o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);const a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(t,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),h=u.constantOr(1),d=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),p=h?"linePattern":c?"lineSDF":d?"lineGradient":"line",m=t.context,g=m.gl;let y=!0;for(const o of i){const i=n.getTile(o);if(h&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;t.prepareDrawTile(o);const v=a.programConfigurations.get(r.id),_=t.context.program.get(),b=t.useProgram(p,v),x=y||b.program!==_,w=u.constantOr(null);if(w&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[w.to.toString()],n=e.patternPositions[w.from.toString()];t&&n&&v.setConstantPatternPositions(t,n)}const S=t.terrain?o.posMatrix:null,A=h?tn(t,i,r,f,S):c?nn(t,i,r,c,f,S):d?en(t,i,r,S,a.lineClipsArray.length):Qt(t,i,r,S);if(h)m.activeTexture.set(g.TEXTURE0),i.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),v.updatePaintBuffers(f);else if(c&&(x||t.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),t.lineAtlas.bind(m);else if(d){const i=a.gradients[r.id];let s=i.texture;if(r.gradientVersion!==i.version){let l=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=o.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*i),256,m.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(m,i.gradient,g.RGBA),i.version=r.gradientVersion,s=i.texture}m.activeTexture.set(g.TEXTURE0),s.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}b.draw(m,g.TRIANGLES,s,t.stencilModeForClipping(o),l,e.CullFaceMode.disabled,A,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,t.transform.zoom,v,a.layoutVertexBuffer2),y=!1}},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);wn(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);wn(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))Sn(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),Sn(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const o=t.colorModeForRenderPass();Sn(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const i of u){const o=n.getTile(i);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)Ct(t,o,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(i):c[i.overscaledZ];Et(t,i,o,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height])},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),h=t.colorModeForRenderPass(),d=t.terrain&&t.terrain.renderingToTexture,[f,p]=c instanceof E||d?[{},i]:t.stencilConfigForOverlap(i),m=p[p.length-1].overscaledZ,g=!t.options.moving;for(const i of p){const o=d?e.DepthMode.disabled:t.depthModeForSublayer(i.overscaledZ-m,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),p=n.getTile(i);if(d&&(!p||!p.hasData()))continue;const y=d?i.posMatrix:t.transform.calculatePosMatrix(i.toUnwrapped(),g),v=t.terrain&&d?t.terrain.stencilModeForRTTOverlap(i):f[i.overscaledZ],_=a?0:r.paint.get("raster-fade-duration");p.registerFadeDuration(_);const b=n.findLoadedParent(i,0),x=Lt(p,b,n,t.transform,_);let w,S;t.terrain&&t.terrain.prepareDrawTile(i);const A="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),p.texture.bind(A,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(A,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-p.tileID.overscaledZ),S=[p.tileID.canonical.x*w%1,p.tileID.canonical.y*w%1]):p.texture.bind(A,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const M=an(y,S||[0,0],w||1,x,r);c instanceof E?u.draw(s,l.TRIANGLES,o,e.StencilMode.disabled,h,e.CullFaceMode.disabled,M,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments):u.draw(s,l.TRIANGLES,o,v,h,e.CullFaceMode.disabled,M,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(t.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const f=e.StencilMode.disabled,p=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background"),y=i||c.coveringTiles({tileSize:u});h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const v=r.getCrossfadeParameters();for(const n of y){const c=i?n.posMatrix:t.transform.calculatePosMatrix(n.toUnwrapped());t.prepareDrawTile(n);const d=h?dn(c,a,t,h,{tileID:n,tileSize:u},v):hn(c,a,o);g.draw(s,l.TRIANGLES,p,f,m,e.CullFaceMode.disabled,d,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},sky:function(t,n,r){const i=r.paint.get("sky-opacity");if(0===i)return;const o=t.context,a=r.paint.get("sky-type"),s=new e.DepthMode(o.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),l=t.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new zn(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Fn(o,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Fn(o,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Fn(o,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Fn(o,n,c,u,l,3),e.identity(u),Fn(o,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Fn(o,n,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(t,!1),0,i,o);c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,s,i,l):"gradient"===a&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new zn(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,s,i,l)},debug:function(e,t,n){for(let r=0;r<n.length;r++)In(e,t,n[r])},custom:function(t,n,r){const i=t.context,o=r.implementation;if("offscreen"===t.renderPass){const e=o.prerender;e&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),e.call(o,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);const n="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(n),o.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}};class Un{constructor(t,n){this.context=new e.Context(t),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Le,this.gpuTimers={},this.frameCounter=0}updateTerrain(e,t){const n=!!e&&!!e.terrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ft(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(i,A.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now())}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Rt(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,n,r){if(!(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&r&&r.length))return;this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of r){const n=this._tileClippingMaskIDs[t.key]=this.nextStencilID++;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},n,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Rt(t.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Nn.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Dn(e,e.transform.height-(t.top||0),3,En),Dn(e,t.bottom||0,3,Mn),kn(e,t.left||0,3,Cn),kn(e,e.transform.width-(t.right||0),3,Tn);const n=e.transform.centerPoint;!function(e,t,n,r){On(e,t-1,n-10,2,20,r),On(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Pn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%e.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),Nn[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:v(n,r[0],this.transform.zoom),o?r[1]:v(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=[];return this.terrain&&!this.terrain.renderingToTexture&&t.push("TERRAIN"),e&&t.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&t.push("OVERDRAW_INSPECTOR"),t}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=Ut.cacheKey(e,i,t);return this.cache[o]||(this.cache[o]=new Ut(this.context,e,wt[e],t,fn[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(e){this.terrain&&this.terrain.prepareDrawTile(e)}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}class jn{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new jn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Vn(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function Gn(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]}function Hn(t,n){const r=Vn(t,3);e.fromQuat(t,n),Gn(t,3,r)}function Wn(e,t){Gn(e,3,[t[0],t[1],t[2],1])}function qn(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function Zn(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return qn(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Xn{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){this._position=this._renderWorldCopies?function(t){if(!t)return;const n=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return n.x=e.wrap(n.x,0,1),n}(t):t}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this._elevation?this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,o=e.MercatorCoordinate.fromLngLat(t,r),a=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Zn(a,n)}setPitchBearing(t,n){this.orientation=qn(e.degToRad(t),e.degToRad(-n))}}class Yn{constructor(t,n){this._transform=e.identity([]),this._orientation=e.identity$1([]),n&&(this._orientation=n,Hn(this._transform,this._orientation)),t&&Wn(this._transform,t)}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const e=Vn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){Wn(this._transform,e)}get orientation(){return this._orientation}set orientation(e){this._orientation=e,Hn(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=qn(e,t),Hn(this._transform,this._orientation)}forward(){const e=Vn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=Vn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=Vn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}clone(){return new Yn([...this.position],[...this.orientation])}}class $n{constructor(t,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new jn,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new Yn,this._centerAltitude=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const e=new $n(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const t=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}_updateCameraOnTerrain(){const t=this.cameraToCenterDistance/this.worldSize,n=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(n+t)}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const t=this._cameraZoom,n=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center)),r=e.mercatorZfromAltitude(n,this.center.lat),i=this._mercatorZfromZoom(t),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(i-r,o);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Xn;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this._renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=Zn(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let r=s-c;r<=l+c;r++)0!==r&&n.push(new e.UnwrappedTileID(r,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=!!t.useElevationData;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const o=e.MercatorCoordinate.fromLngLat(this.center),a=1<<n,s=[a*o.x,a*o.y,0],l=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),c=this.pointCoordinate(this.getCameraPoint()),u=a*e.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),d=[a*c.x,a*c.y,h],f=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),p=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?n:0,m=this.elevation?1e4*this.elevation.exaggeration():0,g=t=>({aabb:new e.Aabb([t*a,0,-m],[(t+1)*a,a,m]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),y=[],v=[],_=n,b=t.reparseOverscaled?r:n,x=(e,t)=>{if(!this._elevation)return;const n=this._elevation.getMinMaxForTile(t);n&&(e.min[2]=n.min,e.max[2]=n.max,e.center[2]=(e.min[2]+e.max[2])/2)},w=e=>e*e,S=w((h-this._centerAltitude)*u),A=(e,t)=>{if(t*w(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1/.707+(Math.pow(1.1,n-1/.707+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(let e=1;e<=3;e++)y.push(g(-e)),y.push(g(e));for(y.push(g(0));y.length>0;){const r=y.pop(),o=r.x,a=r.y;let c=r.fullyVisible;if(!c){const e=r.aabb.intersects(l);if(0===e)continue;c=2===e}let h=!0;if(p<=r.zoom&&r.zoom<_){const e=r.aabb.distanceX(d),t=r.aabb.distanceY(d);let n=S;i&&(n=w(r.aabb.distanceZ(d)*u));const o=e*e+t*t+n;h=o<w((1<<_-r.zoom)*f*A(Math.max(n,S),o))}if(r.zoom!==_&&h)for(let t=0;t<4;t++){const n=(o<<1)+t%2,s=(a<<1)+(t>>1),l=r.aabb.quadrant(t);let u=null;i&&r.zoom>_-6&&(u=new e.OverscaledTileID(r.zoom+1===_?b:r.zoom+1,r.wrap,r.zoom+1,n,s),x(l,u)),y.push({aabb:l,zoom:r.zoom+1,x:n,y:s,wrap:r.wrap,fullyVisible:c,tileID:u})}else{const i=r.zoom===_?b:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const l=s[0]-(.5+o+(r.wrap<<r.zoom))*(1<<n-r.zoom),c=s[1]-.5-a,u=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,o,a);v.push({tileID:u,distanceSq:l*l+c*c})}}return v.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)}unproject(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(t,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}locationPoint3D(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t){return e.MercatorCoordinate.fromLngLat(t)}coordinateLocation(e){return e.toLngLat()}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4(i,i,this.pixelMatrixInverse),e.transformMat4(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(t){const n=this.horizonLineFromTop(!1),r=new e.Point(t.x,Math.max(n,t.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(r))}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const n=this.elevation;let r=this.elevation.pointCoordinate(t);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let i=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t);const a=.02*o,s=t.clone();for(let t=0;t<10&&o-i>a;t++){s.y=e.number(i,o,.66);const t=n.pointCoordinate(s);t?(o=s.y,r=t):i=s.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){if(this.elevation)return!this.elevation.pointCoordinate(e);{const t=this.horizonLineFromTop();return e.y<t}}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPoint(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))}_getBounds3D(){const t=this.elevation,n=t.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});n.min*=t.exaggeration(),n.max*=t.exaggeration();const r=this.horizonLineFromTop();return[new e.Point(0,r),new e.Point(this.width,r),new e.Point(this.width,this.height),new e.Point(0,this.height)].reduce(((e,t)=>e.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,n.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,n.max))))),new e.LngLatBounds)}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-.97*t;return e?Math.max(0,n):n}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,n=!1){const r=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[s*a,o.y*a,0]),e.scale(l,l,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const n=this._camera.position,r=this._camera.forward();if(n.z<=0||r[2]>=0)return;const i=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=i,r[2]/=i,e.normalize(r,r);const o=t.raycast(n,r,t.exaggeration());if(o){const t=e.scaleAndAdd([],n,r,o),i=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),a=this._camera.position,s=i.z+e.length([i.x-a[0],i.y-a[1],i.z-a[2]]);this._cameraZoom=this._zoomFromMercatorZ(s),this._centerAltitude=i.toAltitude(),this._center=i.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const n=t.getAtPoint(this._camera.mercatorPosition),r=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),i=e.mercatorZfromAltitude(n,this._center.lat),o=this._camera.position[2]-i;if(o<r){const t=e.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),n=this._camera.mercatorPosition,i=[t.x-n.x,t.y-n.y,t.z-n.z],a=e.length(i);i[2]-=r-o;const s=e.length(i);if(0===s)return;e.scale$2(i,i,a/s),this._camera.position=[t.x-i[0],t.y-i[1],t.z-i[2]],this._camera.orientation=Zn(i,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,n,r,i,o=-90,a=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const n=this.latRange;o=e.mercatorYfromLat(n[1])*this.worldSize,a=e.mercatorYfromLat(n[0])*this.worldSize,t=a-o<c.y?c.y/(a-o):0}if(this.lngRange){const t=this.lngRange;s=e.mercatorXfromLng(t[0])*this.worldSize,l=e.mercatorXfromLng(t[1])*this.worldSize,n=l-s<c.x?c.x/(l-s):0}const h=this.point,d=Math.max(n||0,t||0);if(d)return this.center=this.unproject(new e.Point(n?(l+s)/2:h.x,t?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const e=h.y,t=c.y/2;e-t<o&&(i=o+t),e+t>a&&(i=a-t)}if(this.lngRange){const e=h.x,t=c.x/2;e-t<s&&(r=s+t),e+t>l&&(r=l-t)}void 0===r&&void 0===i||(this.center=this.unproject(new e.Point(void 0!==r?r:h.x,void 0!==i?i:h.y))),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){const t=(e,t)=>Math.log2(e/(this.tileSize*Math.abs(t[1]-t[0])));let n=0;if(this.latRange){const r=this.latRange;n=t(this.height,[e.mercatorYfromLat(r[0]),e.mercatorYfromLat(r[1])])}let r=0;if(this.lngRange){const n=this.lngRange;r=t(this.width,[e.mercatorXfromLng(n[0]),e.mercatorXfromLng(n[1])])}return Math.max(n,r)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const n=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;this._updateCameraState();const r=Math.PI/2+this._pitch,i=this.fovAboveCenter,o=this._camera.position[2]*this.worldSize/Math.cos(this._pitch),a=Math.sin(i)*o/Math.sin(e.clamp(Math.PI-r-i,.01,Math.PI-.01)),s=this.point,l=s.x,c=s.y,u=Math.cos(Math.PI/2-this._pitch)*a+o,h=Math.min(1.01*u,o*(1/this._horizonShift)),d=this.height/50,f=this._camera.getWorldToCamera(this.worldSize,n),p=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,d,h);p[8]=2*-t.x/this.width,p[9]=2*t.y/this.height;let m=e.mul([],p,f);this.mercatorMatrix=e.scale([],m,[this.worldSize,this.worldSize,this.worldSize/n]),this.projMatrix=m,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const g=new Float32Array(16);e.identity(g),e.scale(g,g,[1,-1,1]),e.rotateX(g,g,this._pitch),e.rotateZ(g,g,this.angle);const y=e.perspective(new Float32Array(16),this._fov,this.width/this.height,d,h),v=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;y[8]=2*-t.x/this.width,y[9]=2*(t.y+v)/this.height,this.skyboxMatrix=e.multiply(g,y,g);const _=this.width%2/2,b=this.height%2/2,x=Math.cos(this.angle),w=Math.sin(this.angle),S=l-Math.round(l)+x*_+w*b,A=c-Math.round(c)+x*b+w*_,E=new Float64Array(m);if(e.translate(E,E,[S>.5?S-1:S,A>.5?A-1:A,0]),this.alignedProjMatrix=E,m=e.create(),e.scale(m,m,[this.width/2,-this.height/2,1]),e.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=e.create(),e.scale(m,m,[1,-1,1]),e.translate(m,m,[-1,-1,0]),e.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),m=e.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const t=this._camera.forward(),n=this.cameraToCenterDistance,r=this.point,i=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this.cameraToCenterDistance/i;this._camera.position=[r.x/this.worldSize-t[0]*n/o,r.y/this.worldSize-t[1]*n/o,e.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-t[2]*n/o]}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=t[2];let i=1;r>0&&(i=Math.min((n-this._camera.position[2])/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,i),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new e.MercatorCoordinate(t[0],t[1],t[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y),s=[new e.Point(r,o),new e.Point(i,a),new e.Point(r,a),new e.Point(i,o)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}class Jn{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,300),n=!1)};return()=>(n=!0,r||i(),r)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=t?`/${a}/${s}/${r}`:`${r}/${s}/${a}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),this._hashName){const t=this._hashName;let n=!1;const r=e.window.location.hash.slice(1).split("&").map((e=>{const r=e.split("=")[0];return r===t?(n=!0,`${r}=${u}`):e})).filter((e=>e));return n||r.push(`${t}=${u}`),`#${r.join("&")}`}return`#${u}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}const Kn={linearity:.3,easing:e.bezier(0,0,.3,1)},Qn=e.extend({deceleration:2500,maxSpeed:1400},Kn),er=e.extend({deceleration:20,maxSpeed:1400},Kn),tr=e.extend({deceleration:1e3,maxSpeed:360},Kn),nr=e.extend({deceleration:1e3,maxSpeed:90},Kn);class rr{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.browser.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=or(n.pan.mag(),r,e.extend({},Qn,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,ir(i,o)}if(n.zoom){const e=or(n.zoom,r,er);i.zoom=this._map.transform.zoom+e.amount,ir(i,e)}if(n.bearing){const t=or(n.bearing,r,tr);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),ir(i,t)}if(n.pitch){const e=or(n.pitch,r,nr);i.pitch=this._map.transform.pitch+e.amount,ir(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(i,{noMoveStart:!0})}}function ir(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function or(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class ar extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r,o={}){const a=i.mousePos(n.getCanvasContainer(),r),s=n.unproject(a);super(t,e.extend({point:a,lngLat:s,originalEvent:r},o)),this._defaultPrevented=!1,this.target=n}}class sr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const o="touchend"===t?r.changedTouches:r.touches,a=i.touchPos(n.getCanvasContainer(),o),s=a.map((e=>n.unproject(e))),l=a.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.Point(0,0));super(t,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class lr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class cr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new lr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ar(e.type,this._map,e))}mouseup(e){this._map.fire(new ar(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new ar(e.type,this._map,e))}dblclick(e){return this._firePreventable(new ar(e.type,this._map,e))}mouseover(e){this._map.fire(new ar(e.type,this._map,e))}mouseout(e){this._map.fire(new ar(e.type,this._map,e))}touchstart(e){return this._firePreventable(new sr(e.type,this._map,e))}touchmove(e){this._map.fire(new sr(e.type,this._map,e))}touchend(e){this._map.fire(new sr(e.type,this._map,e))}touchcancel(e){this._map.fire(new sr(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ur{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(e){this._map.fire(new ar(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ar(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hr{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(i.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const o=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);i.setTransform(this._box,`translate(${o}px,${s}px)`),this._box.style.width=a-o+"px",this._box.style.height=l-s+"px"}mouseupWindow(t,n){if(!this._active)return;if(0!==t.button)return;const r=this._startPos,o=n;if(this.reset(),i.suppressClick(),r.x!==o.x||r.y!==o.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,o,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function dr(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class fr{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.Point(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=dr(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=dr(n,t);for(const e in this.touches){const t=this.touches[e],n=r[e];(!n||n.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class pr{constructor(e){this.singleTap=new fr(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class mr{constructor(){this._zoomIn=new pr({numTouches:1,numTaps:2}),this._zoomOut=new pr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const gr={0:1,2:2};class yr{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=i.mouseButton(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){const n=gr[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&i.mouseButton(e)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vr extends yr{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class _r extends yr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class br extends yr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class xr{constructor(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=dr(r,n),o=new e.Point(0,0),a=new e.Point(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[r,i]=this._firstTwoTouches,o=Sr(n,t,r),a=Sr(n,t,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,o]=this._firstTwoTouches,a=Sr(n,t,r),s=Sr(n,t,o);a&&s||(this._active&&i.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Sr(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Ar(e,t){return Math.log(e/t)/Math.LN2}class Er extends wr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ar(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ar(this._distance,n),pinchAround:t}}}function Mr(e,t){return 180*e.angleWith(t)/Math.PI}class Cr extends wr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Mr(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=Mr(e,this._startVector);return Math.abs(n)<t}}function Tr(e){return Math.abs(e.y)>Math.abs(e.x)}class Pr extends wr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(e){this._lastPoints=e,Tr(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){const r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Tr(e)&&Tr(t)&&o}}const Dr={panStep:100,bearingStep:15,pitchStep:10};class kr{constructor(){const e=Dr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Or,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Or(e){return e*(2-e)}class Ir{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=i.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform,n=()=>t._terrainEnabled()?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.browser.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n}reset(){this._active=!1}}class Rr{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Lr{constructor(){this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Br{constructor(){this._tap=new pr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zr{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fr{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Nr{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ur=e=>e.zoom||e.drag||e.pitch||e.rotate;class jr extends e.Event{}class Vr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function Gr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Hr{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rr(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,n,r]of this._listeners)i.addEventListener(t,n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[t,n,r]of this._listeners)i.removeEventListener(t,n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new cr(t,e));const r=t.boxZoom=new hr(t,e);this._add("boxZoom",r);const i=new mr,o=new Lr;t.doubleClickZoom=new Rr(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Br;this._add("tapDragZoom",a);const s=t.touchPitch=new Pr;this._add("touchPitch",s);const l=new _r(e),c=new br(e);t.dragRotate=new Fr(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new vr(e),h=new xr(e);t.dragPan=new zr(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Cr,f=new Er;t.touchZoomRotate=new Nr(n,f,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ur(t));const p=t.scrollZoom=new Ir(t,this);this._add("scrollZoom",p,["mousePan"]);const m=t.keyboard=new kr;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[n]&&t[n].enable(e[n])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ur(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===e.type?void 0:e,r={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?i.touchPos(this._el,s):i.mousePos(this._el,e);for(const{handlerName:i,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let h;this._blockedByActive(a,u,i)?c.reset():c[t||e.type]&&(h=c[t||e.type](e,l,s),this.mergeHandlerResult(r,o,h,i,n),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||c.isActive())&&(a[i]=c)}const c={};for(const e in this._previousActiveHandlers)a[e]||(c[e]=n);this._previousActiveHandlers=a,(Object.keys(c).length||Gr(r))&&(this._changes.push([r,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||Gr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=r;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Gr(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(!Gr(t))return this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:f}=t;void 0!==f&&(h=f),(e=>n.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const p=[0,0,0];if(s){const e=o.screenPointToMercatorRay(h),t=o.screenPointToMercatorRay(h.sub(s)),n=this._trackingEllipsoid.projectRay(e.dir),r=this._trackingEllipsoid.projectRay(t.dir);p[0]=r[0]-n[0],p[1]=r[1]-n[1]}const m=o.zoom,g=[0,0,0];if(l){const t=a(d||o.pointCoordinate3D(h)),n={dir:e.normalize([],e.sub([],t,o._camera.position))},r=o.screenPointToMercatorRay(o.centerPoint);if(n.dir[2]<0){const i=e.altitudeFromMercatorZ(t[2],t[1]),s=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,i)),c=o.zoomDeltaToMovement(a(s),l)*(r.dir[2]/n.dir[2]);e.scale$2(g,n.dir,c)}else if(o._terrainEnabled()){const r=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,r)}}const y=e.add(p,p,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=Ur(this._eventsInProgress),o=Ur(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Ur(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new jr("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Wr extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_cameraForBoxAndBearing(t,n,r,i){const o=this._extendCameraOptions(i),a=this.transform,s=a.padding,l=a.project(e.LngLat.convert(t)),c=a.project(e.LngLat.convert(n)),u=l.rotate(-e.degToRad(r)),h=c.rotate(-e.degToRad(r)),d=new e.Point(Math.max(u.x,h.x),Math.max(u.y,h.y)),f=new e.Point(Math.min(u.x,h.x),Math.min(u.y,h.y)),p=d.sub(f),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/p.x,g=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/p.y;if(g<0||m<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),o.maxZoom),v="number"==typeof o.offset.x?new e.Point(o.offset.x,o.offset.y):e.Point.convert(o.offset),_=new e.Point((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(r*Math.PI/180),b=v.add(_).mult(a.scale/a.zoomScale(y));return{center:a.unproject(l.add(c).div(2).sub(b)),zoom:y,bearing:r}}_cameraForBox(t,n,r,i,o){const a=this._extendCameraOptions(o);r=r||0,i=i||0,t=e.LngLat.convert(t),n=e.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new e.LngLat(.5*(t.lng+n.lng),.5*(t.lat+n.lat)),u=.5*(r+i);if(s._camera.position[2]<e.mercatorZfromAltitude(u,c.lat))return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=e.MercatorCoordinate.fromLngLat(t),d=e.MercatorCoordinate.fromLngLat(n),f=s.pointRayIntersection(s.centerPoint,u),p=[(m=s.rayIntersectionCoordinate(f)).x,m.y,m.z];var m;const g=s.screenPointToMercatorRay(s.centerPoint);let y,v=0;do{const n=Math.floor(s.zoom),o=1<<n,a=Math.min(o*h.x,o*d.x),l=Math.min(o*h.y,o*d.y),c=Math.max(o*h.x,o*d.x),u=Math.max(o*h.y,o*d.y),f=new e.Aabb([a,l,r],[c,u,i]),m=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,n);if(2!==f.intersects(m)){y&&(s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,-y),s._updateStateFromCamera());break}const v=e.sub([],s._camera.position,p);y=.5*e.length(v),s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,y);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++v<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}_raycastElevationBox(t,n){const r=this.transform.elevation;if(!r)return;const i=new e.Point(t.x,n.y),o=new e.Point(n.x,t.y),a=r.pointCoordinate(t);if(!a)return;const s=r.pointCoordinate(n);if(!s)return;const l=r.pointCoordinate(i);if(!l)return;const c=r.pointCoordinate(o);if(!c)return;const u=new e.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),f=new e.MercatorCoordinate(c[0],c[1]).toLngLat(),p=Math.min(u.lng,Math.min(h.lng,Math.min(d.lng,f.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(d.lat,f.lat))),g=Math.max(u.lng,Math.max(h.lng,Math.max(d.lng,f.lng))),y=Math.max(u.lat,Math.max(h.lat,Math.max(d.lat,f.lat))),v=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),_=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new e.LngLat(p,m),maxLngLat:new e.LngLat(g,y),minAltitude:v,maxAltitude:_}}fitScreenCoordinates(t,n,r,i,o){let a,s,l,c;const u=e.Point.convert(t),h=e.Point.convert(n),d=this._raycastElevationBox(u,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,i):this._cameraForBox(a,s,l,c,i),i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){this.stop();const r=this.transform,i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,d=e.Point.convert(t.offset);let f=r.centerPoint.add(d);const p=r.pointLocation(f),m=e.LngLat.convert(t.center||p);this._normalizeCenter(m);const g=r.project(p),y=r.project(m).sub(g),v=r.zoomScale(l-i);let _,b;t.around&&(_=e.LngLat.convert(t.around),b=r.locationPoint(_));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!r.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,x),this._ease((t=>{if(this._zooming&&(r.zoom=e.number(i,l,t)),this._rotating&&(r.bearing=e.number(o,c,t)),this._pitching&&(r.pitch=e.number(a,u,t)),this._padding&&(r.interpolatePadding(s,h,t),f=r.centerPoint.add(d)),_)r.setLocationAtPoint(_,b);else{const e=r.zoomScale(r.zoom-i),n=l>i?Math.min(2,v):Math.max(.5,v),o=Math.pow(n,1-t),a=r.unproject(g.add(y.mult(t*o)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,f)}this._fireMoveEvents(n)}),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(!t.essential&&e.browser.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,d=r.zoomScale(l-i),f=e.Point.convert(t.offset);let p=r.centerPoint.add(f);const m=r.pointLocation(p),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=t.curve;const b=Math.max(r.width,r.height),x=b/d,w=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const S=_*_;function A(e){const t=(x*x-b*b+(e?-1:1)*S*S*w*w)/(2*(e?x:b)*S*w);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function M(e){return(Math.exp(e)+Math.exp(-e))/2}const C=A(0);let T=function(e){return M(C)/M(C+_*e)},P=function(e){return b*((M(C)*(E(t=C+_*e)/M(t))-E(C))/S)/w;var t},D=(A(1)-C)/_;if(Math.abs(w)<1e-6||!isFinite(D)){if(Math.abs(b-x)<1e-6)return this.easeTo(t,n);const e=x<b?-1:1;D=Math.abs(Math.log(x/b))/_,P=function(){return 0},T=function(t){return Math.exp(e*_*t)}}return t.duration="duration"in t?+t.duration:1e3*D/("screenSpeed"in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((t=>{const d=t*D,m=1/T(d);r.zoom=1===t?l:i+r.scaleZoom(m),this._rotating&&(r.bearing=e.number(o,c,t)),this._pitching&&(r.pitch=e.number(a,u,t)),this._padding&&(r.interpolatePadding(s,h,t),p=r.centerPoint.add(f));const _=1===t?g:r.unproject(y.add(v.mult(P(d))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,p),r._updateCenterElevation(),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}class qr{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.title=n,e.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+=`${t.key}=${t.value}${r<n.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${r}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const r=t[n];if(r.used){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Zr{constructor(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}onAdd(e){this._map=e,this._container=i.create("div","mapboxgl-ctrl");const t=i.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Xr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const t of n)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Yr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:$r,HTMLElement:Jr,ImageBitmap:Kr}=e.window,Qr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function ei(e){e.parentNode&&e.parentNode.removeChild(e)}const ti={showCompass:!0,showZoom:!0,visualizePitch:!1};class ni{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new _r({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new br({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(n,"mousedown",this.mousedown),i.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(n,"touchmove",this.touchmove),i.addEventListener(n,"touchend",this.touchend),i.addEventListener(n,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),i.disableDrag()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const e=this.element;i.removeEventListener(e,"mousedown",this.mousedown),i.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(e,"touchmove",this.touchmove),i.removeEventListener(e,"touchend",this.touchend),i.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),i.mousePos(this.element,t)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)}mousemove(e){this.move(e,i.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ri(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const ii={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function oi(e,t,n){const r=e.classList;for(const e in ii)r.remove(`mapboxgl-${n}-anchor-${e}`);r.add(`mapboxgl-${n}-anchor-${t}`)}class ai extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");const n=i.createNS("http://www.w3.org/2000/svg","svg"),r=41,o=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${o}px`),n.setAttributeNS(null,"viewBox",`0 0 ${o} ${r}`);const a=i.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=i.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=i.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const f=i.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(f);const p=i.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(6.0, 7.0)"),p.setAttributeNS(null,"fill","#FFFFFF");const m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=i.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(p),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",o*this._scale+"px"),this._element.appendChild(n),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),oi(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_updateOcclusion(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}_onOcclusionTimer(){const e=this._map.transform,t=this._pos?this._pos.sub(this._transformedOffset()):null;if(t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height){const e=this._map.unproject(t),n=this._map.getFreeCameraOptions();if(n.position){const t=n.position.toLngLat(),r=t.distanceTo(e),i=t.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",r<.9*i)}}this._occlusionTimer=null}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ri(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),i.setTransform(this._element,`${ii[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${t}`)}_transformedOffset(){if(!this._defaultMarker)return this._offset;const e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const si={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let li,ci=0,ui=!1;const hi={maxWidth:100,unit:"metric"};function di(e,t,n){const r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=e.unproject([0,i]),a=e.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?fi(t,r,n/5280,e._getUIString("ScaleControl.Miles")):fi(t,r,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?fi(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?fi(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):fi(t,r,s,e._getUIString("ScaleControl.Meters"))}function fi(e,t,n,r){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(i/n)+"px",e.innerHTML=`${i}&nbsp;${r}`}const pi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},mi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),gi={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Wr{constructor(t){if(null!=(t=e.extend({},Qr,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $n(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._renderTaskQueue=new Xr,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Yr,t.locale),this._clickTolerance=t.clickTolerance,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof Jr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Hr(this,t),this._hash=t.hash&&new Jn("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.attributionControl&&this.addControl(new qr({customAttribution:t.customAttribution})),this._logoControl=new Zr,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}resize(t){const n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);const o=!this._moving;return o&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[];o.length?r||(r=!0,n.call(this,new ar(e,this,i.originalEvent,{features:o}))):r=!1};return{layer:t,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{(this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[]).length?r=!0:r&&(r=!1,n.call(this,new ar(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new ar(e,this,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(this,e),delete e.features)};return{layer:t,listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const e in r.delegates)this.on(e,r.delegates[e]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);const r=this._createDelegatedListener(e,t,n);for(const e in r.delegates)this.once(e,r.delegates[e]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(r=>{const i=this._delegatedListeners[e];for(let e=0;e<i.length;e++){const r=i[e];if(r.layer===t&&r.listener===n){for(const e in r.delegates)this.off(e,r.delegates[e]);return i.splice(e,1),this}}})(),this)}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new je(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new je(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const n=this.style&&this.style._getSourceCaches(t);if(0!==n.length)return n.every((e=>e.loaded()));this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof $r||Kr&&n instanceof Kr){const{width:l,height:c,data:u}=e.browser.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof $r||Kr&&n instanceof Kr?e.browser.getImageData(n):n,{width:o,height:a,data:s}=i;return void 0===o||void 0===a?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof $r||Kr&&n instanceof Kr)),void this.style.updateImage(t,r))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._update(!0)}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=i.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);const r=this._controlContainer=i.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=i.create("div",`mapboxgl-ctrl-${e}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new Un(r,this.transform),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.webpSupported.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(t){let n,r=0;const i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n),r=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let o=!1;const a=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=e.browser.now();this.style.zoomHistory.update(t,n);const r=new e.EvaluationParameters(t,{now:n,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(o=!0,this._crossFadingFactor=i),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.browser.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty;if(s||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new e.Event("idle")),this._isInitialLoad&&this._authenticate(),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0),this}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){console.error("Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/"),e.browser.setErrorState();const t=this.painter.context.gl;this._logoControl instanceof Zr&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),ei(this._canvasContainer),ei(this._controlContainer),ei(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.browser.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},ti,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ni(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=i.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){const n=this._map._getUIString(`NavigationControl.${t}`);e.title=n,e.setAttribute("aria-label",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},si,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var n;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==li?n(li):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>{li="denied"!==e.state,n(li)})):(li=!!e.window.navigator.geolocation,n(li)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ci=0,ui=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([1,e]),r=t.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&ui)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ai(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ai({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ci--,ui=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ci++,ci>1?(t={maximumAge:6e5,timeout:0},ui=!0):(t=this.options.positionOptions,ui=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:qr,ScaleControl:class{constructor(t){this.options=e.extend({},hi,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){di(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,di(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(pi),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((e=>this._container.classList.add(e))),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ri(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let r=this.options.anchor;const o=function t(n){if(n){if("number"==typeof n){const t=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(t,t),"top-right":new e.Point(-t,t),bottom:new e.Point(0,-n),"bottom-left":new e.Point(t,-t),"bottom-right":new e.Point(-t,-t),left:new e.Point(n,0),right:new e.Point(-n,0)}}if(n instanceof e.Point||Array.isArray(n)){const t=e.Point.convert(n);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!r){const e=this._container.offsetWidth,t=this._container.offsetHeight;let i;i=n.y+o.bottom.y<t?["top"]:n.y>this._map.transform.height-t?["bottom"]:[],n.x<e/2?i.push("left"):n.x>this._map.transform.width-e/2&&i.push("right"),r=0===i.length?"bottom":i.join("-")}const a=n.add(o[r]).round();i.setTransform(this._container,`${ii[r]} translate(${a.x}px,${a.y}px)`),oi(this._container,r,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(mi);e&&e.focus()}_onClose(){this.remove()}},Marker:ai,Style:je,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Xn,Evented:e.Evented,config:e.config,prewarm:function(){B().acquire(I)},clearPrewarmedResources:function(){const e=L;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(I),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return R.workerCount},set workerCount(e){R.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.browser.setNow,restoreNow:e.browser.restoreNow};return gi})),n}()},7418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},7460:function(e,t){var n,r;void 0===(r="function"==typeof(n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),i={},o=0,a={parse:function(n,r){var s=(r=r||{}).dynamicTyping||!1;if(x(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!x(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,r,s=(n=t.URL||t.webkitURL||null,r=e.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),l=new t.Worker(s);return l.onmessage=g,l.id=o++,i[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=x(r.step),r.chunk=x(r.chunk),r.complete=x(r.complete),r.error=x(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var f=null;return a.NODE_STREAM_INPUT,"string"==typeof n?f=r.download?new c(r):new h(r):!0===n.readable&&x(n.read)&&x(n.on)?f=new d(r):(t.File&&n instanceof File||n instanceof Object)&&(f=new u(r)),f.stream(n)},unparse:function(e,t){var n=!1,r=!0,i=",",o="\r\n",s='"',l=s+s,c=!1,u=null,h=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+s),"boolean"==typeof t.escapeFormulae&&(h=t.escapeFormulae)}}();var d=new RegExp(p(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return m(null,e,c);if("object"==typeof e[0])return m(u||f(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:f(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),m(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function f(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function m(e,t,n){var a="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(s&&r){for(var c=0;c<e.length;c++)0<c&&(a+=i),a+=g(e[c],c);0<t.length&&(a+=o)}for(var u=0;u<t.length;u++){var h=s?e.length:t[u].length,d=!1,f=s?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!s&&(d="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&s){for(var p=[],m=0;m<h;m++){var y=l?e[m]:m;p.push(t[u][y])}d=""===p.join("").trim()}if(!d){for(var v=0;v<h;v++){0<v&&!f&&(a+=i);var _=s&&l?e[v]:v;a+=g(t[u][_],v)}u<t.length-1&&(!n||0<h&&!f)&&(a+=o)}}return a}function g(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===h&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(d,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=m,a.ParserHandle=f,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=h,a.ReadableStreamStreamer=d,t.jQuery){var s=t.jQuery;s.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},n)})})),i(),this;function i(){if(0!==r.length){var t,n,i,l=r[0];if(x(e.before)){var c=e.before(l.file,l.inputElem);if("object"==typeof c){if("abort"===c.action)return"AbortError",t=l.file,n=l.inputElem,i=c.reason,void(x(e.error)&&e.error({name:"AbortError"},t,n,i));if("skip"===c.action)return void o();"object"==typeof c.config&&(l.instanceConfig=s.extend(l.instanceConfig,c.config))}else if("skip"===c)return void o()}var u=l.instanceConfig.complete;l.instanceConfig.complete=function(e){x(u)&&u(e,l.file,l.inputElem),o()},a.parse(l.file,l.instanceConfig)}else x(e.complete)&&e.complete()}function o(){r.splice(0,1),i()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:s,workerId:a.WORKER_ID,finished:c});else if(x(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!x(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),l.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var o=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=b((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=b((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=b((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,r,i=Math.pow(2,53),o=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,c=this,u=0,h=0,d=!1,f=!1,g=[],y={data:[],errors:[],meta:{}};if(x(e.step)){var v=e.step;e.step=function(t){if(y=t,S())w();else{if(w(),0===y.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(y.data=y.data[0],v(y,c))}}}function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){if(y&&r&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<y.data.length;t++)b(y.data[t])&&y.data.splice(t--,1);return S()&&function(){if(y)if(Array.isArray(y.data[0])){for(var t=0;S()&&t<y.data.length;t++)y.data[t].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(t,n){x(e.transformHeader)&&(t=e.transformHeader(t,n)),g.push(t)}}(),function(){if(!y||!e.header&&!e.dynamicTyping&&!e.transform)return y;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var o=r,a=t[r];e.header&&(o=r>=g.length?"__parsed_extra":g[r]),e.transform&&(a=e.transform(a,o)),a=A(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return e.header&&(r>g.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,h+n):r<g.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,h+n)),i}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(t),n=y.data.length):y.data=t(y.data,0),e.header&&y.meta&&(y.meta.fields=g),h+=n,y}()}function S(){return e.header&&0===g.length}function A(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(s.test(e)){var t=parseFloat(e);if(o<t&&t<i)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function E(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),y.errors.push(i)}this.parse=function(i,o,s){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var a=0,s=0;s<r.length;s++)"\n"===r[s][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(i,l)),r=!1,e.delimiter)x(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter);else{var c=function(t,n,r,i,o){var s,l,c,u;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var h=0;h<o.length;h++){var d=o[h],f=0,p=0,g=0;c=void 0;for(var y=new m({comments:i,delimiter:d,newline:n,preview:10}).parse(t),v=0;v<y.data.length;v++)if(r&&b(y.data[v]))g++;else{var _=y.data[v].length;p+=_,void 0!==c?0<_&&(f+=Math.abs(_-c),c=_):c=_}0<y.data.length&&(p/=y.data.length-g),(void 0===l||f<=l)&&(void 0===u||u<p)&&1.99<p&&(l=f,s=d,u=p)}return{successful:!!(e.delimiter=s),bestDelimiter:s}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(r=!0,e.delimiter=a.DefaultDelimiter),y.meta.delimiter=e.delimiter}var u=_(e);return e.preview&&e.header&&u.preview++,t=i,n=new m(u),y=n.parse(t,o,s),w(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),t=x(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),y.meta.aborted=!0,x(e.complete)&&e.complete(y),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,o=e.step,s=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,h=!1;this.parse=function(e,a,d){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,m=n.length,g=r.length,y=i.length,v=x(o),_=[],b=[],w=[],S=u=0;if(!e)return z();if(l||!1!==l&&-1===e.indexOf(t)){for(var A=e.split(r),E=0;E<A.length;E++){if(w=A[E],u+=w.length,E!==A.length-1)u+=r.length;else if(d)return z();if(!i||w.substring(0,y)!==i){if(v){if(_=[],I(w.split(n)),F(),h)return z()}else I(w.split(n));if(s&&s<=E)return _=_.slice(0,s),z(!0)}}return z()}for(var M=e.indexOf(n,u),C=e.indexOf(r,u),T=new RegExp(p(c)+p(t),"g"),P=e.indexOf(t,u);;)if(e[u]!==t)if(i&&0===w.length&&e.substring(u,u+y)===i){if(-1===C)return z();u=C+g,C=e.indexOf(r,u),M=e.indexOf(n,u)}else{if(-1!==M&&(M<C||-1===C)){if(!(M<P)){w.push(e.substring(u,M)),u=M+m,M=e.indexOf(n,u);continue}var D=N(M,P,C);if(D&&void 0!==D.nextDelim){M=D.nextDelim,P=D.quoteSearch,w.push(e.substring(u,M)),u=M+m,M=e.indexOf(n,u);continue}}if(-1===C)break;if(w.push(e.substring(u,C)),B(C+g),v&&(F(),h))return z();if(s&&_.length>=s)return z(!0)}else for(P=u,u++;;){if(-1===(P=e.indexOf(t,P+1)))return d||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:u}),L();if(P===f-1)return L(e.substring(u,P).replace(T,t));if(t!==c||e[P+1]!==c){if(t===c||0===P||e[P-1]!==c){-1!==M&&M<P+1&&(M=e.indexOf(n,P+1)),-1!==C&&C<P+1&&(C=e.indexOf(r,P+1));var k=R(-1===C?M:Math.min(M,C));if(e[P+1+k]===n){w.push(e.substring(u,P).replace(T,t)),e[u=P+1+k+m]!==t&&(P=e.indexOf(t,u)),M=e.indexOf(n,u),C=e.indexOf(r,u);break}var O=R(C);if(e.substring(P+1+O,P+1+O+g)===r){if(w.push(e.substring(u,P).replace(T,t)),B(P+1+O+g),M=e.indexOf(n,u),P=e.indexOf(t,u),v&&(F(),h))return z();if(s&&_.length>=s)return z(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:u}),P++}}else P++}return L();function I(e){_.push(e),S=u}function R(t){var n=0;if(-1!==t){var r=e.substring(P+1,t);r&&""===r.trim()&&(n=r.length)}return n}function L(t){return d||(void 0===t&&(t=e.substring(u)),w.push(t),u=f,I(w),v&&F()),z()}function B(t){u=t,I(w),w=[],C=e.indexOf(r,u)}function z(e){return{data:_,errors:b,meta:{delimiter:n,linebreak:r,aborted:h,truncated:!!e,cursor:S+(a||0)}}}function F(){o(z()),_=[],b=[]}function N(r,i,o){var a={nextDelim:void 0,quoteSearch:void 0},s=e.indexOf(t,i+1);if(i<r&&r<s&&(s<o||-1===o)){var l=e.indexOf(n,s);if(-1===l)return a;s<l&&(s=e.indexOf(t,s+1)),a=N(l,s,o)}else a={nextDelim:r,quoteSearch:i};return a}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function g(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(x(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},o),!r);a++);delete t.results}else x(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=i[e];x(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function v(){throw new Error("Not implemented.")}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=_(e[n]);return t}function b(e,t){return function(){e.apply(t,arguments)}}function x(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=a.parse(n.input,n.config);r&&t.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,a})?n.apply(t,[]):n)||(e.exports=r)},8297:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=function(){return void 0!==i.window.orientation},t.default=function(e){if(!e&&!(0,o.default)())return"Node";if((0,a.default)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),s=-1!==n.indexOf("Trident/");return r||s?"IE":i.window.chrome?"Chrome":i.window.safari?"Safari":i.window.mozInnerScreenX?"Firefox":"Unknown"};var i=n(2361),o=r(n(2999)),a=r(n(3941))},2361:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.console=t.process=t.document=t.global=t.window=t.self=void 0;var i=r(n(8)),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n.g&&n.g,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,i.default)(process))&&process},a=o.self||o.window||o.global;t.self=a;var s=o.window||o.self||o.global;t.window=s;var l=o.global||o.self||o.window;t.global=l;var c=o.document||{};t.document=c;var u=o.process||{};t.process=u;var h=console;t.console=h},9718:(e,t,n)=>{"use strict";var r=n(5318),i=n(862);Object.defineProperty(t,"CO",{enumerable:!0,get:function(){return o.global}}),Object.defineProperty(t,"jU",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"qs",{enumerable:!0,get:function(){return s.default}});var o=n(2361),a=i(n(2999)),s=i(n(8297));r(n(3941))},2999:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.isBrowserMainThread=function(){return a()&&"undefined"!=typeof document};var i=r(n(8)),o=r(n(3941));function a(){return!("object"===("undefined"==typeof process?"undefined":(0,i.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,o.default)()}},3941:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!=typeof window&&"object"===(0,i.default)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"===(0,i.default)(process.versions)&&Boolean(process.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,i.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;return!!(n&&n.indexOf("Electron")>=0)};var i=r(n(8))},2703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7824:(e,t,n)=>{var r=n(2823),i=n(4515),o=n(8738),a=[0,2,3],s=[2,1,3];e.exports=function(e,t){e&&(i(e)||o(e))||(t=e||{},e=null);for(var n="string"==typeof(t="number"==typeof t?{count:t}:t||{}).type?t.type:"uint16",l="number"==typeof t.count?t.count:1,c=t.start||0,u=!1!==t.clockwise?a:s,h=u[0],d=u[1],f=u[2],p=6*l,m=e||new(r(n))(p),g=0,y=0;g<p;g+=6,y+=4){var v=g+c;m[v+0]=y+0,m[v+1]=y+1,m[v+2]=y+2,m[v+3]=y+h,m[v+4]=y+d,m[v+5]=y+f}return m}},5882:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="precision highp float;\n#define GLSLIFY 1\nuniform vec2 u_resolution;\nuniform sampler2D u_overlay;\n\nvarying vec2 vUv;\n\n// Map value from one range to another\n//\n\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec2 map(vec2 value, vec2 inMin, vec2 inMax, vec2 outMin, vec2 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec3 map(vec3 value, vec3 inMin, vec3 inMax, vec3 outMin, vec3 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec4 map(vec4 value, vec4 inMin, vec4 inMax, vec4 outMin, vec4 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nfloat scaleX;\nfloat scaleY;\n\nvoid main()\n{\n    vec2 st = gl_FragCoord.xy / u_resolution;\n    \n    // set alpha based on distance from center x\n    float alpha = abs(distance(st.x, 0.5)) * 2.0; \n    alpha = map(alpha, 0.0, 0.5, 0.0, 1.0);\n\n    // sample overlay\n    alpha = 1.0;\n\n    float aspectRatio = u_resolution.x / u_resolution.y; \n\n    scaleX = 1.0;\n    scaleY = 1.0/aspectRatio;\n    \n\n    vec2 fromCenter = st-vec2(0.5, 0.5);\n    vec2 scaledFromCenter = fromCenter * vec2(scaleX, scaleY);\n    scaledFromCenter = scaledFromCenter * 2.0;\n    vec2 sampleCoord = vec2(0.5, 0.5) + scaledFromCenter;\n    vec4 texel = texture2D(u_overlay, sampleCoord);\n\n    if (texel.r > 0.1){\n        alpha = 0.0;\n    } else {\n        alpha = 0.15;\n    }\n\n    gl_FragColor = vec4(texel.r, 0.0, 0.0, alpha);\n}"},3380:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float u_time;\nuniform vec2 u_resolution;\n\nattribute vec2 uv;\nattribute vec3 position;\n\nvarying vec2 vUv;\nvarying float depth;\n\nvoid main() {\n  vUv = uv; // update vUv for frag\n\n  vec4 modelPosition = modelViewMatrix * vec4(position, 1.0);\n\n  float pct = 0.0;\n  pct = distance(modelPosition.xy, vec2(0.0));\n  //modelPosition.z += (pct * 1.0) - 5.0; // concave\n  // modelPosition.z += (pct * -1.0) + 4.0;  // convex\n\n  gl_Position = projectionMatrix * modelPosition;\n}"},6479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r='#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D map;\nuniform vec2 u_resolution;\nuniform sampler2D u_overlay;\nuniform vec2 u_mouse;\n\nvarying vec2 vUv;\n\nfloat scaleX;\nfloat scaleY;\nvec3 color;\n\nfloat median(float r, float g, float b) {\n  return max(min(r, g), min(max(r, g), b));\n}\n\nvoid main(){\n    // set opacity of "letter" part of the geometry\n    vec3 sample = texture2D(map, vUv).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - 0.5;\n    float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, .9);\n\n    // sample the covid silhouette\n    vec2 st = gl_FragCoord.xy / u_resolution;\n    float aspectRatio = u_resolution.x / u_resolution.y; \n    scaleX = 1.0;\n    scaleY = 1.0/aspectRatio;\n    vec2 fromCenter = st-vec2(0.5, 0.5);\n    vec2 scaledFromCenter = fromCenter * vec2(scaleX, scaleY);\n    scaledFromCenter = scaledFromCenter * 2.0;\n    vec2 sampleCoord = vec2(0.5, 0.5) + scaledFromCenter;\n    \n    // offset by mouse\n    sampleCoord.y += (u_mouse.y) * .5;\n    //sampleCoord.x -= (u_mouse.x-.5) * .25;\n    \n    vec4 texel = texture2D(u_overlay, sampleCoord);\n\n    //float alpha = 1.0;\n    // set color based on texel location\n    if (texel.r > 0.2){\n      color = vec3(0.17, 0.21, 0.29);\n    } else {\n      color = vec3(0.0431, 0.051, 0.0706);\n    }\n\n    gl_FragColor = vec4(color, alpha);\n    if (gl_FragColor.a < 0.0001) discard;\n}'},6048:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float u_time;\nuniform vec2 u_resolution;\nuniform sampler2D u_depth;\nuniform sampler2D u_test;\n\nattribute vec2 uv;\nattribute vec3 position;\n\nvarying vec2 vUv;\nvarying float depth;\n\nvoid main() {\n  vUv = uv; // update vUv for frag\n\n  vec4 modelPosition = modelViewMatrix * vec4(position, 1.0);\n\n  float pct = 0.0;\n  pct = distance(modelPosition.xy, vec2(0.0));\n  modelPosition.z += (pct * 1.31) - 5.0; // concave\n  // modelPosition.z += (pct * -1.0) + 4.0;  // convex\n\n  gl_Position = projectionMatrix * modelPosition;\n}"},4448:(e,t,n)=>{"use strict";var r=n(7294),i=n(7418),o=n(3840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var l=!1,c=null,u=!1,h=null,d={onError:function(e){l=!0,c=e}};function f(e,t,n,r,i,o,a,u,h){l=!1,c=null,s.apply(d,arguments)}var p=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,s,d,p){if(f.apply(this,arguments),l){if(!l)throw Error(a(198));var m=c;l=!1,c=null,u||(u=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,_={};function b(){if(v)for(var e in _){var t=_[e],n=v.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!w[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in w[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,l=r;if(S.hasOwnProperty(l))throw Error(a(99,l));S[l]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&x(c[i],s,l);i=!0}else o.registrationName?(x(o.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function x(e,t,n){if(A[e])throw Error(a(100,e));A[e]=t,E[e]=t.eventTypes[n].dependencies}var w=[],S={},A={},E={};function M(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!_.hasOwnProperty(t)||_[t]!==r){if(_[t])throw Error(a(102,t));_[t]=r,n=!0}}n&&b()}var C=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),T=null,P=null,D=null;function k(e){if(e=m(e)){if("function"!=typeof T)throw Error(a(280));var t=e.stateNode;t&&(t=p(t),T(e.stateNode,e.type,t))}}function O(e){P?D?D.push(e):D=[e]:P=e}function I(){if(P){var e=P,t=D;if(D=P=null,k(e),t)for(e=0;e<t.length;e++)k(t[e])}}function R(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function B(){}var z=R,F=!1,N=!1;function U(){null===P&&null===D||(B(),I())}function j(e,t,n){if(N)return e(t,n);N=!0;try{return z(e,t,n)}finally{N=!1,U()}}var V=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,H={},W={};function q(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Z[e]=new q(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Z[t]=new q(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Z[e]=new q(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Z[e]=new q(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Z[e]=new q(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Z[e]=new q(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Z[e]=new q(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Z[e]=new q(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Z[e]=new q(e,5,!1,e.toLowerCase(),null,!1)}));var X=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(X,Y);Z[t]=new q(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(X,Y);Z[t]=new q(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(X,Y);Z[t]=new q(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Z[e]=new q(e,1,!1,e.toLowerCase(),null,!1)})),Z.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Z[e]=new q(e,1,!1,e.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=Z.hasOwnProperty(t)?Z[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!G.call(W,e)||!G.call(H,e)&&(V.test(e)?W[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var K=/^(.*)[\\\/]/,Q="function"==typeof Symbol&&Symbol.for,ee=Q?Symbol.for("react.element"):60103,te=Q?Symbol.for("react.portal"):60106,ne=Q?Symbol.for("react.fragment"):60107,re=Q?Symbol.for("react.strict_mode"):60108,ie=Q?Symbol.for("react.profiler"):60114,oe=Q?Symbol.for("react.provider"):60109,ae=Q?Symbol.for("react.context"):60110,se=Q?Symbol.for("react.concurrent_mode"):60111,le=Q?Symbol.for("react.forward_ref"):60112,ce=Q?Symbol.for("react.suspense"):60113,ue=Q?Symbol.for("react.suspense_list"):60120,he=Q?Symbol.for("react.memo"):60115,de=Q?Symbol.for("react.lazy"):60116,fe=Q?Symbol.for("react.block"):60121,pe="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(K,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=_e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_e(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Se(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ae(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Ee(e,t){Ae(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ce(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ce(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Me(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ce(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Te(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Pe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ke(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Oe(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Re(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Re(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,ze,Fe=(ze=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ze(e,t)}))}:ze);function Ne(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ue(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var je={animationend:Ue("Animation","AnimationEnd"),animationiteration:Ue("Animation","AnimationIteration"),animationstart:Ue("Animation","AnimationStart"),transitionend:Ue("Transition","TransitionEnd")},Ve={},Ge={};function He(e){if(Ve[e])return Ve[e];if(!je[e])return e;var t,n=je[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ve[e]=n[t];return e}C&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var We=He("animationend"),qe=He("animationiteration"),Ze=He("animationstart"),Xe=He("transitionend"),Ye="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$e=new("function"==typeof WeakMap?WeakMap:Map);function Je(e){var t=$e.get(e);return void 0===t&&(t=new Map,$e.set(e,t)),t}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function et(e){if(Ke(e)!==e)throw Error(a(188))}function tt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return et(i),e;if(o===r)return et(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function rt(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var it=null;function ot(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function at(e){if(null!==e&&(it=nt(it,e)),e=it,it=null,e){if(rt(e,ot),it)throw Error(a(95));if(u)throw e=h,u=!1,h=null,e}}function st(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!C)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ct=[];function ut(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ct.length&&ct.push(e)}function ht(e,t,n,r){if(ct.length){var i=ct.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function dt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Pn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=st(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<w.length;l++){var c=w[l];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=nt(s,c))}at(s)}}function ft(e,t,n){if(!n.has(e)){switch(e){case"scroll":Zt(t,"scroll",!0);break;case"focus":case"blur":Zt(t,"focus",!0),Zt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Zt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ye.indexOf(e)&&qt(e,t)}n.set(e,null)}}var pt,mt,gt,yt=!1,vt=[],_t=null,bt=null,xt=null,wt=new Map,St=new Map,At=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ct(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Tt(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":wt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Pt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Ct(t,n,r,i,o),null!==t&&null!==(t=Dn(t))&&mt(t),e):(e.eventSystemFlags|=r,e)}function Dt(e){var t=Pn(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kt(e){if(null!==e.blockedOn)return!1;var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Dn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Ot(e,t,n){kt(e)&&n.delete(t)}function It(){for(yt=!1;0<vt.length;){var e=vt[0];if(null!==e.blockedOn){null!==(e=Dn(e.blockedOn))&&pt(e);break}var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:vt.shift()}null!==_t&&kt(_t)&&(_t=null),null!==bt&&kt(bt)&&(bt=null),null!==xt&&kt(xt)&&(xt=null),wt.forEach(Ot),St.forEach(Ot)}function Rt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,It)))}function Lt(e){function t(t){return Rt(t,e)}if(0<vt.length){Rt(vt[0],e);for(var n=1;n<vt.length;n++){var r=vt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Rt(_t,e),null!==bt&&Rt(bt,e),null!==xt&&Rt(xt,e),wt.forEach(t),St.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Dt(n),null===n.blockedOn&&At.shift()}var Bt={},zt=new Map,Ft=new Map,Nt=["abort","abort",We,"animationEnd",qe,"animationIteration",Ze,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Ut(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Ft.set(r,t),zt.set(r,o),Bt[i]=o}}Ut("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ut("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ut(Nt,2);for(var jt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Vt=0;Vt<jt.length;Vt++)Ft.set(jt[Vt],0);var Gt=o.unstable_UserBlockingPriority,Ht=o.unstable_runWithPriority,Wt=!0;function qt(e,t){Zt(t,e,!1)}function Zt(e,t,n){var r=Ft.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=Yt.bind(null,t,1,e);break;default:r=$t.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){F||B();var i=$t,o=F;F=!0;try{L(i,e,t,n,r)}finally{(F=o)||U()}}function Yt(e,t,n,r){Ht(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){if(Wt)if(0<vt.length&&-1<Et.indexOf(e))e=Ct(null,e,t,n,r),vt.push(e);else{var i=Jt(e,t,n,r);if(null===i)Tt(e,r);else if(-1<Et.indexOf(e))e=Ct(i,e,t,n,r),vt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Pt(_t,e,t,n,r,i),!0;case"dragenter":return bt=Pt(bt,e,t,n,r,i),!0;case"mouseover":return xt=Pt(xt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return wt.set(o,Pt(wt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Pt(St.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Tt(e,r),e=ht(e,r,null,t);try{j(dt,e)}finally{ut(e)}}}}function Jt(e,t,n,r){if(null!==(n=Pn(n=st(r)))){var i=Ke(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=Qe(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ht(e,r,n,t);try{j(dt,e)}finally{ut(e)}return null}var Kt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qt=["Webkit","ms","Moz","O"];function en(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Kt.hasOwnProperty(e)&&Kt[e]?(""+t).trim():t+"px"}function tn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Kt).forEach((function(e){Qt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kt[t]=Kt[e]}))}));var nn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rn(e,t){if(t){if(nn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function on(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an="http://www.w3.org/1999/xhtml";function sn(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=E[t];for(var r=0;r<t.length;r++)ft(t[r],e,n)}function ln(){}function cn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function un(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=un(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=un(r)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fn(){for(var e=window,t=cn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=cn((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$?",gn="$!",yn=null,vn=null;function _n(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function bn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xn="function"==typeof setTimeout?setTimeout:void 0,wn="function"==typeof clearTimeout?clearTimeout:void 0;function Sn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function An(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===gn||n===mn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),Mn="__reactInternalInstance$"+En,Cn="__reactEventHandlers$"+En,Tn="__reactContainere$"+En;function Pn(e){var t=e[Mn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Tn]||n[Mn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=An(e);null!==e;){if(n=e[Mn])return n;e=An(e)}return t}n=(e=n).parentNode}return null}function Dn(e){return!(e=e[Mn]||e[Tn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function kn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function On(e){return e[Cn]||null}function In(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Rn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}function Ln(e,t,n){(t=Rn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=nt(n._dispatchListeners,t),n._dispatchInstances=nt(n._dispatchInstances,e))}function Bn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=In(t);for(t=n.length;0<t--;)Ln(n[t],"captured",e);for(t=0;t<n.length;t++)Ln(n[t],"bubbled",e)}}function zn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Rn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=nt(n._dispatchListeners,t),n._dispatchInstances=nt(n._dispatchInstances,e))}function Fn(e){rt(e,Bn)}var Nn=null,Un=null,jn=null;function Vn(){if(jn)return jn;var e,t,n=Un,r=n.length,i="value"in Nn?Nn.value:Nn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return jn=i.slice(e,1<t?1-t:void 0)}function Gn(){return!0}function Hn(){return!1}function Wn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gn:Hn,this.isPropagationStopped=Hn,this}function qn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Zn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Xn(e){e.eventPool=[],e.getPooled=qn,e.release=Zn}i(Wn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){this.isPersistent=Gn},isPersistent:Hn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Hn,this._dispatchInstances=this._dispatchListeners=null}}),Wn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Wn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Xn(n),n},Xn(Wn);var Yn=Wn.extend({data:null}),$n=Wn.extend({data:null}),Jn=[9,13,27,32],Kn=C&&"CompositionEvent"in window,Qn=null;C&&"documentMode"in document&&(Qn=document.documentMode);var er=C&&"TextEvent"in window&&!Qn,tr=C&&(!Kn||Qn&&8<Qn&&11>=Qn),nr=String.fromCharCode(32),rr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ir=!1;function or(e,t){switch(e){case"keyup":return-1!==Jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ar(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var sr=!1,lr={eventTypes:rr,extractEvents:function(e,t,n,r){var i;if(Kn)e:{switch(e){case"compositionstart":var o=rr.compositionStart;break e;case"compositionend":o=rr.compositionEnd;break e;case"compositionupdate":o=rr.compositionUpdate;break e}o=void 0}else sr?or(e,n)&&(o=rr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=rr.compositionStart);return o?(tr&&"ko"!==n.locale&&(sr||o!==rr.compositionStart?o===rr.compositionEnd&&sr&&(i=Vn()):(Un="value"in(Nn=r)?Nn.value:Nn.textContent,sr=!0)),o=Yn.getPooled(o,t,n,r),(i||null!==(i=ar(n)))&&(o.data=i),Fn(o),i=o):i=null,(e=er?function(e,t){switch(e){case"compositionend":return ar(t);case"keypress":return 32!==t.which?null:(ir=!0,nr);case"textInput":return(e=t.data)===nr&&ir?null:e;default:return null}}(e,n):function(e,t){if(sr)return"compositionend"===e||!Kn&&or(e,t)?(e=Vn(),jn=Un=Nn=null,sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=$n.getPooled(rr.beforeInput,t,n,r)).data=e,Fn(t)):t=null,null===i?t:null===t?i:[i,t]}},cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!cr[e.type]:"textarea"===t}var hr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function dr(e,t,n){return(e=Wn.getPooled(hr.change,e,t,n)).type="change",O(n),Fn(e),e}var fr=null,pr=null;function mr(e){at(e)}function gr(e){if(xe(kn(e)))return e}function yr(e,t){if("change"===e)return t}var vr=!1;function _r(){fr&&(fr.detachEvent("onpropertychange",br),pr=fr=null)}function br(e){if("value"===e.propertyName&&gr(pr))if(e=dr(pr,e,st(e)),F)at(e);else{F=!0;try{R(mr,e)}finally{F=!1,U()}}}function xr(e,t,n){"focus"===e?(_r(),pr=n,(fr=t).attachEvent("onpropertychange",br)):"blur"===e&&_r()}function wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gr(pr)}function Sr(e,t){if("click"===e)return gr(t)}function Ar(e,t){if("input"===e||"change"===e)return gr(t)}C&&(vr=lt("input")&&(!document.documentMode||9<document.documentMode));var Er={eventTypes:hr,_isInputEventSupported:vr,extractEvents:function(e,t,n,r){var i=t?kn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=yr;else if(ur(i))if(vr)a=Ar;else{a=wr;var s=xr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Sr);if(a&&(a=a(e,t)))return dr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ce(i,"number",i.value)}},Mr=Wn.extend({view:null,detail:null}),Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Pr(){return Tr}var Dr=0,kr=0,Or=!1,Ir=!1,Rr=Mr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Dr;return Dr=e.screenX,Or?"mousemove"===e.type?e.screenX-t:0:(Or=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=kr;return kr=e.screenY,Ir?"mousemove"===e.type?e.screenY-t:0:(Ir=!0,0)}}),Lr=Rr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Br={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},zr={eventTypes:Br,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Pn(t):null)&&(t!==Ke(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Rr,l=Br.mouseLeave,c=Br.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Lr,l=Br.pointerLeave,c=Br.pointerEnter,u="pointer");if(e=null==a?o:kn(a),o=null==t?o:kn(t),(l=s.getPooled(l,a,n,r)).type=u+"leave",l.target=e,l.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=u+"enter",n.target=o,n.relatedTarget=e,u=t,(r=a)&&u)e:{for(c=u,a=0,e=s=r;e;e=In(e))a++;for(e=0,t=c;t;t=In(t))e++;for(;0<a-e;)s=In(s),a--;for(;0<e-a;)c=In(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=In(s),c=In(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=In(r);for(r=[];u&&u!==c&&(null===(a=u.alternate)||a!==c);)r.push(u),u=In(u);for(u=0;u<s.length;u++)zn(s[u],"bubbled",l);for(u=r.length;0<u--;)zn(r[u],"captured",n);return 0==(64&i)?[l]:[l,n]}},Fr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Nr=Object.prototype.hasOwnProperty;function Ur(e,t){if(Fr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Nr.call(t,n[r])||!Fr(e[n[r]],t[n[r]]))return!1;return!0}var jr=C&&"documentMode"in document&&11>=document.documentMode,Vr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gr=null,Hr=null,Wr=null,qr=!1;function Zr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return qr||null==Gr||Gr!==cn(n)?null:(n="selectionStart"in(n=Gr)&&pn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wr&&Ur(Wr,n)?null:(Wr=n,(e=Wn.getPooled(Vr.select,Hr,e,t)).type="select",e.target=Gr,Fn(e),e))}var Xr={eventTypes:Vr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Je(i),o=E.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?kn(t):window,e){case"focus":(ur(i)||"true"===i.contentEditable)&&(Gr=i,Hr=t,Wr=null);break;case"blur":Wr=Hr=Gr=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return qr=!1,Zr(n,r);case"selectionchange":if(jr)break;case"keydown":case"keyup":return Zr(n,r)}return null}},Yr=Wn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),$r=Wn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jr=Mr.extend({relatedTarget:null});function Kr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ei={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Mr.extend({key:function(e){if(e.key){var t=Qr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ei[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?Kr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ni=Rr.extend({dataTransfer:null}),ri=Mr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ii=Wn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),oi=Rr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ai={eventTypes:Bt,extractEvents:function(e,t,n,r){var i=zt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Kr(n))return null;case"keydown":case"keyup":e=ti;break;case"blur":case"focus":e=Jr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ri;break;case We:case qe:case Ze:e=Yr;break;case Xe:e=ii;break;case"scroll":e=Mr;break;case"wheel":e=oi;break;case"copy":case"cut":case"paste":e=$r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Lr;break;default:e=Wn}return Fn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=On,m=Dn,g=kn,M({SimpleEventPlugin:ai,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Er,SelectEventPlugin:Xr,BeforeInputEventPlugin:lr});var si=[],li=-1;function ci(e){0>li||(e.current=si[li],si[li]=null,li--)}function ui(e,t){li++,si[li]=e.current,e.current=t}var hi={},di={current:hi},fi={current:!1},pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gi(e){return null!=e.childContextTypes}function yi(){ci(fi),ci(di)}function vi(e,t,n){if(di.current!==hi)throw Error(a(168));ui(di,t),ui(fi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,ge(t)||"Unknown",o));return i({},n,{},r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ui(di,e),ui(fi,fi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=_i(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(fi),ci(di),ui(di,e)):ci(fi),ui(fi,n)}var wi=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Ei=o.unstable_requestPaint,Mi=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,Ti=o.unstable_ImmediatePriority,Pi=o.unstable_UserBlockingPriority,Di=o.unstable_NormalPriority,ki=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Ii={},Ri=o.unstable_shouldYield,Li=void 0!==Ei?Ei:function(){},Bi=null,zi=null,Fi=!1,Ni=Mi(),Ui=1e4>Ni?Mi:function(){return Mi()-Ni};function ji(){switch(Ci()){case Ti:return 99;case Pi:return 98;case Di:return 97;case ki:return 96;case Oi:return 95;default:throw Error(a(332))}}function Vi(e){switch(e){case 99:return Ti;case 98:return Pi;case 97:return Di;case 96:return ki;case 95:return Oi;default:throw Error(a(332))}}function Gi(e,t){return e=Vi(e),wi(e,t)}function Hi(e,t,n){return e=Vi(e),Si(e,t,n)}function Wi(e){return null===Bi?(Bi=[e],zi=Si(Ti,Zi)):Bi.push(e),Ii}function qi(){if(null!==zi){var e=zi;zi=null,Ai(e)}Zi()}function Zi(){if(!Fi&&null!==Bi){Fi=!0;var e=0;try{var t=Bi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(t){throw null!==Bi&&(Bi=Bi.slice(e+1)),Si(Ti,qi),t}finally{Fi=!1}}}function Xi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Yi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var $i={current:null},Ji=null,Ki=null,Qi=null;function eo(){Qi=Ki=Ji=null}function to(e){var t=$i.current;ci($i),e.type._context._currentValue=t}function no(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ro(e,t){Ji=e,Qi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(ka=!0),e.firstContext=null)}function io(e,t){if(Qi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Qi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ki){if(null===Ji)throw Error(a(308));Ki=t,Ji.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ki=Ki.next=t;return e._currentValue}var oo=!1;function ao(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function lo(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function co(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function uo(e,t){var n=e.alternate;null!==n&&so(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ho(e,t,n,r){var o=e.updateQueue;oo=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=e.alternate)&&null!==(l=l.updateQueue)&&(l.baseQueue=s)}if(null!==a){l=a.next;var c=o.baseState,u=0,h=null,d=null,f=null;if(null!==l)for(var p=l;;){if((s=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=c):f=f.next=m,s>u&&(u=s)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),al(s,p.suspenseConfig);e:{var g=e,y=p;switch(s=t,m=n,y.tag){case 1:if("function"==typeof(g=y.payload)){c=g.call(m,c,s);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=y.payload)?g.call(m,c,s):g))break e;c=i({},c,s);break e;case 2:oo=!0}}null!==p.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[p]:s.push(p))}if(null===(p=p.next)||p===l){if(null===(s=o.shared.pending))break;p=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===f?h=c:f.next=d,o.baseState=h,o.baseQueue=f,sl(u),e.expirationTime=u,e.memoizedState=c}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var po=$.ReactCurrentBatchConfig,mo=(new r.Component).refs;function go(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ys(),i=po.suspense;(i=lo(r=$s(r,e,i),i)).payload=t,null!=n&&(i.callback=n),co(e,i),Js(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ys(),i=po.suspense;(i=lo(r=$s(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),co(e,i),Js(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ys(),r=po.suspense;(r=lo(n=$s(n,e,r),r)).tag=2,null!=t&&(r.callback=t),co(e,r),Js(e,n)}};function vo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&Ur(n,r)&&Ur(i,o))}function _o(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"==typeof o&&null!==o?o=io(o):(i=gi(t)?pi:di.current,o=(r=null!=(r=t.contextTypes))?mi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function bo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function xo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=mo,ao(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=io(o):(o=gi(t)?pi:di.current,i.context=mi(e,o)),ho(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),ho(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var wo=Array.isArray;function So(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===mo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ao(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Cl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=So(e,t,n),r.return=e,r):((r=Tl(n.type,n.key,n.props,null,e.mode,r)).ref=So(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=kl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Dl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Tl(t.type,t.key,t.props,null,e.mode,n)).ref=So(e,null,t),n.return=e,n;case te:return(t=kl(t,e.mode,n)).return=e,t}if(wo(t)||me(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Ao(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null}if(wo(n)||me(n))return null!==i?null:h(e,t,n,r,null);Ao(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Ao(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,s,l,c){var u=me(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(s=o(v,s,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,o,l){var c="object"==typeof o&&null!==o&&o.type===ne&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case ee:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){switch(c.tag){case 7:if(o.type===ne){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=So(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===ne?((r=Pl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Tl(o.type,o.key,o.props,null,e.mode,l)).ref=So(e,r,o),l.return=e,e=l)}return s(e);case te:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=kl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Dl(o,e.mode,l)).return=e,e=r),s(e);if(wo(o))return m(e,r,o,l);if(me(o))return g(e,r,o,l);if(u&&Ao(e,o),void 0===o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Mo=Eo(!0),Co=Eo(!1),To={},Po={current:To},Do={current:To},ko={current:To};function Oo(e){if(e===To)throw Error(a(174));return e}function Io(e,t){switch(ui(ko,t),ui(Do,e),ui(Po,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Le(null,"");break;default:t=Le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Po),ui(Po,t)}function Ro(){ci(Po),ci(Do),ci(ko)}function Lo(e){Oo(ko.current);var t=Oo(Po.current),n=Le(t,e.type);t!==n&&(ui(Do,e),ui(Po,n))}function Bo(e){Do.current===e&&(ci(Po),ci(Do))}var zo={current:0};function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===mn||n.data===gn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function No(e,t){return{responder:e,props:t}}var Uo=$.ReactCurrentDispatcher,jo=$.ReactCurrentBatchConfig,Vo=0,Go=null,Ho=null,Wo=null,qo=!1;function Zo(){throw Error(a(321))}function Xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fr(e[n],t[n]))return!1;return!0}function Yo(e,t,n,r,i,o){if(Vo=o,Go=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Uo.current=null===e||null===e.memoizedState?va:_a,e=n(r,i),t.expirationTime===Vo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Wo=Ho=null,t.updateQueue=null,Uo.current=ba,e=n(r,i)}while(t.expirationTime===Vo)}if(Uo.current=ya,t=null!==Ho&&null!==Ho.next,Vo=0,Wo=Ho=Go=null,qo=!1,t)throw Error(a(300));return e}function $o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Go.memoizedState=Wo=e:Wo=Wo.next=e,Wo}function Jo(){if(null===Ho){var e=Go.alternate;e=null!==e?e.memoizedState:null}else e=Ho.next;var t=null===Wo?Go.memoizedState:Wo.next;if(null!==t)Wo=t,Ho=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Ho=e).memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},null===Wo?Go.memoizedState=Wo=e:Wo=Wo.next=e}return Wo}function Ko(e,t){return"function"==typeof t?t(e):t}function Qo(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,c=i;do{var u=c.expirationTime;if(u<Vo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=h,o=r):l=l.next=h,u>Go.expirationTime&&(Go.expirationTime=u,sl(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),al(u,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===l?o=r:l.next=s,Fr(r,t.memoizedState)||(ka=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ea(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Fr(o,t.memoizedState)||(ka=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(e){var t=$o();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:e}).dispatch=ga.bind(null,Go,e),[t.memoizedState,e]}function na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Go.updateQueue)?(t={lastEffect:null},Go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ra(){return Jo().memoizedState}function ia(e,t,n,r){var i=$o();Go.effectTag|=e,i.memoizedState=na(1|t,n,void 0,void 0===r?null:r)}function oa(e,t,n,r){var i=Jo();r=void 0===r?null:r;var o=void 0;if(null!==Ho){var a=Ho.memoizedState;if(o=a.destroy,null!==r&&Xo(r,a.deps))return void na(t,n,o,r)}Go.effectTag|=e,i.memoizedState=na(1|t,n,o,r)}function aa(e,t){return ia(516,4,e,t)}function sa(e,t){return oa(516,4,e,t)}function la(e,t){return oa(4,2,e,t)}function ca(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ua(e,t,n){return n=null!=n?n.concat([e]):null,oa(4,2,ca.bind(null,t,e),n)}function ha(){}function da(e,t){return $o().memoizedState=[e,void 0===t?null:t],e}function fa(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pa(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ma(e,t,n){var r=ji();Gi(98>r?98:r,(function(){e(!0)})),Gi(97<r?97:r,(function(){var r=jo.suspense;jo.suspense=void 0===t?null:t;try{e(!1),n()}finally{jo.suspense=r}}))}function ga(e,t,n){var r=Ys(),i=po.suspense;i={expirationTime:r=$s(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Go||null!==o&&o===Go)qo=!0,i.expirationTime=Vo,Go.expirationTime=Vo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(e){}Js(e,r)}}var ya={readContext:io,useCallback:Zo,useContext:Zo,useEffect:Zo,useImperativeHandle:Zo,useLayoutEffect:Zo,useMemo:Zo,useReducer:Zo,useRef:Zo,useState:Zo,useDebugValue:Zo,useResponder:Zo,useDeferredValue:Zo,useTransition:Zo},va={readContext:io,useCallback:da,useContext:io,useEffect:aa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,2,ca.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ia(4,2,e,t)},useMemo:function(e,t){var n=$o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ga.bind(null,Go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},$o().memoizedState=e},useState:ta,useDebugValue:ha,useResponder:No,useDeferredValue:function(e,t){var n=ta(e),r=n[0],i=n[1];return aa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ta(!1),n=t[0];return t=t[1],[da(ma.bind(null,t,e),[t,e]),n]}},_a={readContext:io,useCallback:fa,useContext:io,useEffect:sa,useImperativeHandle:ua,useLayoutEffect:la,useMemo:pa,useReducer:Qo,useRef:ra,useState:function(){return Qo(Ko)},useDebugValue:ha,useResponder:No,useDeferredValue:function(e,t){var n=Qo(Ko),r=n[0],i=n[1];return sa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Qo(Ko),n=t[0];return t=t[1],[fa(ma.bind(null,t,e),[t,e]),n]}},ba={readContext:io,useCallback:fa,useContext:io,useEffect:sa,useImperativeHandle:ua,useLayoutEffect:la,useMemo:pa,useReducer:ea,useRef:ra,useState:function(){return ea(Ko)},useDebugValue:ha,useResponder:No,useDeferredValue:function(e,t){var n=ea(Ko),r=n[0],i=n[1];return sa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ea(Ko),n=t[0];return t=t[1],[fa(ma.bind(null,t,e),[t,e]),n]}},xa=null,wa=null,Sa=!1;function Aa(e,t){var n=El(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ea(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ma(e){if(Sa){var t=wa;if(t){var n=t;if(!Ea(e,t)){if(!(t=Sn(n.nextSibling))||!Ea(e,t))return e.effectTag=-1025&e.effectTag|2,Sa=!1,void(xa=e);Aa(xa,n)}xa=e,wa=Sn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Sa=!1,xa=e}}function Ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xa=e}function Ta(e){if(e!==xa)return!1;if(!Sa)return Ca(e),Sa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!bn(t,e.memoizedProps))for(t=wa;t;)Aa(e,t),t=Sn(t.nextSibling);if(Ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){wa=Sn(e.nextSibling);break e}t--}else"$"!==n&&n!==gn&&n!==mn||t++}e=e.nextSibling}wa=null}}else wa=xa?Sn(e.stateNode.nextSibling):null;return!0}function Pa(){wa=xa=null,Sa=!1}var Da=$.ReactCurrentOwner,ka=!1;function Oa(e,t,n,r){t.child=null===e?Co(t,null,n,r):Mo(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var o=t.ref;return ro(t,i),r=Yo(e,t,n,r,o,i),null===e||ka?(t.effectTag|=1,Oa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ya(e,t,i))}function Ra(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Ml(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,La(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(i,r)&&e.ref===t.ref)?Ya(e,t,o):(t.effectTag|=1,(e=Cl(a,r)).ref=t.ref,e.return=t,t.child=e)}function La(e,t,n,r,i,o){return null!==e&&Ur(e.memoizedProps,r)&&e.ref===t.ref&&(ka=!1,i<o)?(t.expirationTime=e.expirationTime,Ya(e,t,o)):za(e,t,n,r,o)}function Ba(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function za(e,t,n,r,i){var o=gi(n)?pi:di.current;return o=mi(t,o),ro(t,i),n=Yo(e,t,n,r,o,i),null===e||ka?(t.effectTag|=1,Oa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ya(e,t,i))}function Fa(e,t,n,r,i){if(gi(n)){var o=!0;bi(t)}else o=!1;if(ro(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),_o(t,n,r),xo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?io(c):mi(t,c=gi(n)?pi:di.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&bo(t,a,r,c),oo=!1;var d=t.memoizedState;a.state=d,ho(t,r,a,i),l=t.memoizedState,s!==r||d!==l||fi.current||oo?("function"==typeof u&&(go(t,n,u,r),l=t.memoizedState),(s=oo||vo(t,n,s,r,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,so(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Yi(t.type,s),l=a.context,c="object"==typeof(c=n.contextType)&&null!==c?io(c):mi(t,c=gi(n)?pi:di.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&bo(t,a,r,c),oo=!1,l=t.memoizedState,a.state=l,ho(t,r,a,i),d=t.memoizedState,s!==r||l!==d||fi.current||oo?("function"==typeof u&&(go(t,n,u,r),d=t.memoizedState),(u=oo||vo(t,n,s,r,l,d,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=c,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Na(e,t,n,r,o,i)}function Na(e,t,n,r,i,o){Ba(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&xi(t,n,!1),Ya(e,t,o);r=t.stateNode,Da.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Mo(t,e.child,null,o),t.child=Mo(t,null,s,o)):Oa(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ua(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Io(e,t.containerInfo)}var ja,Va,Ga,Ha={dehydrated:null,retryTime:0};function Wa(e,t,n){var r,i=t.mode,o=t.pendingProps,a=zo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ui(zo,1&a),null===e){if(void 0!==o.fallback&&Ma(t),s){if(s=o.fallback,(o=Pl(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Pl(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Ha,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Co(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Cl(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Cl(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ha,t.child=n,i}return n=Mo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Pl(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Pl(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ha,t.child=o,n}return t.memoizedState=null,t.child=Mo(t,e,o.children,n)}function qa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),no(e.return,t)}function Za(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Xa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Oa(e,t,r.children,n),0!=(2&(r=zo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n);else if(19===e.tag)qa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(zo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Za(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Za(t,!0,n,null,o,t.lastEffect);break;case"together":Za(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&sl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Cl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Cl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(t.type)&&yi(),null;case 3:return Ro(),ci(fi),ci(di),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ta(t)||(t.effectTag|=4),null;case 5:Bo(t),n=Oo(ko.current);var o=t.type;if(null!==e&&null!=t.stateNode)Va(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Oo(Po.current),Ta(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[Mn]=t,r[Cn]=s,o){case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(e=0;e<Ye.length;e++)qt(Ye[e],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"form":qt("reset",r),qt("submit",r);break;case"details":qt("toggle",r);break;case"input":Se(r,s),qt("invalid",r),sn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qt("invalid",r),sn(n,"onChange");break;case"textarea":ke(r,s),qt("invalid",r),sn(n,"onChange")}for(var l in rn(o,s),e=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?r.textContent!==c&&(e=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(e=["children",""+c]):A.hasOwnProperty(l)&&null!=c&&sn(n,l)}switch(o){case"input":be(r),Me(r,s,!0);break;case"textarea":be(r),Ie(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===an&&(e=Re(o)),e===an?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Mn]=t,e[Cn]=r,ja(e,t),t.stateNode=e,l=on(o,r),o){case"iframe":case"object":case"embed":qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ye.length;c++)qt(Ye[c],e);c=r;break;case"source":qt("error",e),c=r;break;case"img":case"image":case"link":qt("error",e),qt("load",e),c=r;break;case"form":qt("reset",e),qt("submit",e),c=r;break;case"details":qt("toggle",e),c=r;break;case"input":Se(e,r),c=we(e,r),qt("invalid",e),sn(n,"onChange");break;case"option":c=Te(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),qt("invalid",e),sn(n,"onChange");break;case"textarea":ke(e,r),c=De(e,r),qt("invalid",e),sn(n,"onChange");break;default:c=r}rn(o,c);var u=c;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?tn(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Fe(e,h):"children"===s?"string"==typeof h?("textarea"!==o||""!==h)&&Ne(e,h):"number"==typeof h&&Ne(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(A.hasOwnProperty(s)?null!=h&&sn(n,s):null!=h&&J(e,s,h,l))}switch(o){case"input":be(e),Me(e,r,!1);break;case"textarea":be(e),Ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Pe(e,!!r.multiple,n,!1):null!=r.defaultValue&&Pe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(e.onclick=ln)}_n(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ga(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=Oo(ko.current),Oo(Po.current),Ta(t)?(n=t.stateNode,r=t.memoizedProps,n[Mn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Mn]=t,t.stateNode=n)}return null;case 13:return ci(zo),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ta(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&zo.current)?Ds===Ss&&(Ds=As):(Ds!==Ss&&Ds!==As||(Ds=Es),0!==Ls&&null!==Cs&&(Rl(Cs,Ps),Ll(Cs,Ls)))),(n||r)&&(t.effectTag|=4),null);case 4:return Ro(),null;case 10:return to(t),null;case 17:return gi(t.type)&&yi(),null;case 19:if(ci(zo),null===(r=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(s=r.rendering)){if(o)$a(r,!1);else if(Ds!==Ss||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Fo(s))){for(t.effectTag|=64,$a(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ui(zo,1&zo.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Fo(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),$a(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,$a(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ui()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=zo.current,ui(zo,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function Ka(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ro(),ci(fi),ci(di),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Bo(e),null;case 13:return ci(zo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ci(zo),null;case 4:return Ro(),null;case 10:return to(e),null;default:return null}}function Qa(e,t){return{value:e,source:t,stack:ye(t)}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Va=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,l,c=t.stateNode;switch(Oo(Po.current),e=null,n){case"input":a=we(c,a),r=we(c,r),e=[];break;case"option":a=Te(c,a),r=Te(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=De(c,a),r=De(c,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(c.onclick=ln)}for(s in rn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in c=a[s])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(A.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var u=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&u!==c&&(null!=u||null!=c))if("style"===s)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(e||(e=[]),e.push(s,n)),n=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(s,u)):"children"===s?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(A.hasOwnProperty(s)?(null!=u&&sn(o,s),e||c===u||(e=[])):(e=e||[]).push(s,u))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ga=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var es="function"==typeof WeakSet?WeakSet:Set;function ts(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ns(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){_l(e,t)}else t.current=null}function rs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void os(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&_n(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Lt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function ss(e,t,n){switch("function"==typeof Sl&&Sl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Gi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){_l(i,e)}}e=e.next}while(e!==r)}))}break;case 1:ns(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){_l(e,t)}}(t,n);break;case 5:ns(t);break;case 4:fs(e,t,n)}}function ls(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ls(t)}function cs(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:{for(var t=e.return;null!==t;){if(cs(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Ne(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||cs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?hs(e,n,t):ds(e,n,t)}function hs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(hs(e,t,n),e=e.sibling;null!==e;)hs(e,t,n),e=e.sibling}function ds(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ds(e,t,n),e=e.sibling;null!==e;)ds(e,t,n),e=e.sibling}function fs(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,u=n,h=c;;)if(ss(l,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(ss(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ps(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void is(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Cn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ae(n,r),on(e,i),t=on(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?tn(n,l):"dangerouslySetInnerHTML"===s?Fe(n,l):"children"===s?Ne(n,l):J(n,s,l,t)}switch(e){case"input":Ee(n,r);break;case"textarea":Oe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Pe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Pe(n,!!r.multiple,r.defaultValue,!0):Pe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Lt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,zs=Ui()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ms(t);case 19:return void ms(t);case 17:return}throw Error(a(163))}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new es),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var gs="function"==typeof WeakMap?WeakMap:Map;function ys(e,t,n){(n=lo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ns||(Ns=!0,Us=r),ts(e,t)},n}function vs(e,t,n){(n=lo(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ts(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===js?js=new Set([this]):js.add(this),ts(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var _s,bs=Math.ceil,xs=$.ReactCurrentDispatcher,ws=$.ReactCurrentOwner,Ss=0,As=3,Es=4,Ms=0,Cs=null,Ts=null,Ps=0,Ds=Ss,ks=null,Os=1073741823,Is=1073741823,Rs=null,Ls=0,Bs=!1,zs=0,Fs=null,Ns=!1,Us=null,js=null,Vs=!1,Gs=null,Hs=90,Ws=null,qs=0,Zs=null,Xs=0;function Ys(){return 0!=(48&Ms)?1073741821-(Ui()/10|0):0!==Xs?Xs:Xs=1073741821-(Ui()/10|0)}function $s(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=ji();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Ms))return Ps;if(null!==n)e=Xi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Xi(e,150,100);break;case 97:case 96:e=Xi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Cs&&e===Ps&&--e,e}function Js(e,t){if(50<qs)throw qs=0,Zs=null,Error(a(185));if(null!==(e=Ks(e,t))){var n=ji();1073741823===t?0!=(8&Ms)&&0==(48&Ms)?nl(e):(el(e),0===Ms&&qi()):el(e),0==(4&Ms)||98!==n&&99!==n||(null===Ws?Ws=new Map([[e,t]]):(void 0===(n=Ws.get(e))||n>t)&&Ws.set(e,t))}}function Ks(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Cs===i&&(sl(t),Ds===Es&&Rl(i,Ps)),Ll(i,t)),i}function Qs(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Il(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function el(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Wi(nl.bind(null,e));else{var t=Qs(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Ys();if(r=1073741823===t?99:1===t||2===t?95:0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ii&&Ai(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Wi(nl.bind(null,e)):Hi(r,tl.bind(null,e),{timeout:10*(1073741821-t)-Ui()}),e.callbackNode=t}}}function tl(e,t){if(Xs=0,t)return Bl(e,t=Ys()),el(e),null;var n=Qs(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ms))throw Error(a(327));if(gl(),e===Cs&&n===Ps||rl(e,n),null!==Ts){var r=Ms;Ms|=16;for(var i=ol();;)try{cl();break}catch(t){il(e,t)}if(eo(),Ms=r,xs.current=i,1===Ds)throw t=ks,rl(e,n),Rl(e,n),el(e),t;if(null===Ts)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ds,Cs=null,r){case Ss:case 1:throw Error(a(345));case 2:Bl(e,2<n?2:n);break;case As:if(Rl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dl(i)),1073741823===Os&&10<(i=zs+500-Ui())){if(Bs){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,rl(e,n);break}}if(0!==(o=Qs(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=xn(fl.bind(null,e),i);break}fl(e);break;case Es:if(Rl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dl(i)),Bs&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,rl(e,n);break}if(0!==(i=Qs(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Is?r=10*(1073741821-Is)-Ui():1073741823===Os?r=0:(r=10*(1073741821-Os)-5e3,0>(r=(i=Ui())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=xn(fl.bind(null,e),r);break}fl(e);break;case 5:if(1073741823!==Os&&null!==Rs){o=Os;var s=Rs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ui()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Rl(e,n),e.timeoutHandle=xn(fl.bind(null,e),r);break}}fl(e);break;default:throw Error(a(329))}if(el(e),e.callbackNode===t)return tl.bind(null,e)}}return null}function nl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ms))throw Error(a(327));if(gl(),e===Cs&&t===Ps||rl(e,t),null!==Ts){var n=Ms;Ms|=16;for(var r=ol();;)try{ll();break}catch(t){il(e,t)}if(eo(),Ms=n,xs.current=r,1===Ds)throw n=ks,rl(e,t),Rl(e,t),el(e),n;if(null!==Ts)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Cs=null,fl(e),el(e)}return null}function rl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,wn(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:Ro(),ci(fi),ci(di);break;case 5:Bo(r);break;case 4:Ro();break;case 13:case 19:ci(zo);break;case 10:to(r)}n=n.return}Cs=e,Ts=Cl(e.current,null),Ps=t,Ds=Ss,ks=null,Is=Os=1073741823,Rs=null,Ls=0,Bs=!1}function il(e,t){for(;;){try{if(eo(),Uo.current=ya,qo)for(var n=Go.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Vo=0,Wo=Ho=Go=null,qo=!1,null===Ts||null===Ts.return)return Ds=1,ks=t,Ts=null;e:{var i=e,o=Ts.return,a=Ts,s=t;if(t=Ps,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var u=0!=(1&zo.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!u)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=lo(1073741823,null);y.tag=2,co(a,y)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new gs,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(a)){s.add(a);var _=bl.bind(null,i,l,a);l.then(_,_)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);s=Error((ge(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(a))}5!==Ds&&(Ds=2),s=Qa(s,a),h=o;do{switch(h.tag){case 3:l=s,h.effectTag|=4096,h.expirationTime=t,uo(h,ys(h,l,t));break e;case 1:l=s;var b=h.type,x=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===js||!js.has(x)))){h.effectTag|=4096,h.expirationTime=t,uo(h,vs(h,l,t));break e}}h=h.return}while(null!==h)}Ts=hl(Ts)}catch(e){t=e;continue}break}}function ol(){var e=xs.current;return xs.current=ya,null===e?ya:e}function al(e,t){e<Os&&2<e&&(Os=e),null!==t&&e<Is&&2<e&&(Is=e,Rs=t)}function sl(e){e>Ls&&(Ls=e)}function ll(){for(;null!==Ts;)Ts=ul(Ts)}function cl(){for(;null!==Ts&&!Ri();)Ts=ul(Ts)}function ul(e){var t=_s(e.alternate,e,Ps);return e.memoizedProps=e.pendingProps,null===t&&(t=hl(e)),ws.current=null,t}function hl(e){Ts=e;do{var t=Ts.alternate;if(e=Ts.return,0==(2048&Ts.effectTag)){if(t=Ja(t,Ts,Ps),1===Ps||1!==Ts.childExpirationTime){for(var n=0,r=Ts.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ts.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ts.firstEffect),null!==Ts.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ts.firstEffect),e.lastEffect=Ts.lastEffect),1<Ts.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ts:e.firstEffect=Ts,e.lastEffect=Ts))}else{if(null!==(t=Ka(Ts)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ts.sibling))return t;Ts=e}while(null!==Ts);return Ds===Ss&&(Ds=5),null}function dl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function fl(e){var t=ji();return Gi(99,pl.bind(null,e,t)),null}function pl(e,t){do{gl()}while(null!==Gs);if(0!=(48&Ms))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=dl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Cs&&(Ts=Cs=null,Ps=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ms;Ms|=32,ws.current=null,yn=Wt;var s=fn();if(pn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(e){l=null;break e}var d=0,f=-1,p=-1,m=0,g=0,y=s,v=null;t:for(;;){for(var _;y!==l||0!==u&&3!==y.nodeType||(f=d+u),y!==h||0!==c&&3!==y.nodeType||(p=d+c),3===y.nodeType&&(d+=y.nodeValue.length),null!==(_=y.firstChild);)v=y,y=_;for(;;){if(y===s)break t;if(v===l&&++m===u&&(f=d),v===h&&++g===c&&(p=d),null!==(_=y.nextSibling))break;v=(y=v).parentNode}y=_}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;vn={activeElementDetached:null,focusedElem:s,selectionRange:l},Wt=!1,Fs=i;do{try{ml()}catch(e){if(null===Fs)throw Error(a(330));_l(Fs,e),Fs=Fs.nextEffect}}while(null!==Fs);Fs=i;do{try{for(s=e,l=t;null!==Fs;){var b=Fs.effectTag;if(16&b&&Ne(Fs.stateNode,""),128&b){var x=Fs.alternate;if(null!==x){var w=x.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&b){case 2:us(Fs),Fs.effectTag&=-3;break;case 6:us(Fs),Fs.effectTag&=-3,ps(Fs.alternate,Fs);break;case 1024:Fs.effectTag&=-1025;break;case 1028:Fs.effectTag&=-1025,ps(Fs.alternate,Fs);break;case 4:ps(Fs.alternate,Fs);break;case 8:fs(s,u=Fs,l),ls(u)}Fs=Fs.nextEffect}}catch(e){if(null===Fs)throw Error(a(330));_l(Fs,e),Fs=Fs.nextEffect}}while(null!==Fs);if(w=vn,x=fn(),b=w.focusedElem,l=w.selectionRange,x!==b&&b&&b.ownerDocument&&dn(b.ownerDocument.documentElement,b)){null!==l&&pn(b)&&(x=l.start,void 0===(w=l.end)&&(w=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(w,b.value.length)):(w=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,s=Math.min(l.start,u),l=void 0===l.end?s:Math.min(l.end,u),!w.extend&&s>l&&(u=l,l=s,s=u),u=hn(b,s),h=hn(b,l),u&&h&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==h.node||w.focusOffset!==h.offset)&&((x=x.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),s>l?(w.addRange(x),w.extend(h.node,h.offset)):(x.setEnd(h.node,h.offset),w.addRange(x))))),x=[];for(w=b;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<x.length;b++)(w=x[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Wt=!!yn,vn=yn=null,e.current=n,Fs=i;do{try{for(b=e;null!==Fs;){var S=Fs.effectTag;if(36&S&&as(b,Fs.alternate,Fs),128&S){x=void 0;var A=Fs.ref;if(null!==A){var E=Fs.stateNode;switch(Fs.tag){case 5:x=E;break;default:x=E}"function"==typeof A?A(x):A.current=x}}Fs=Fs.nextEffect}}catch(e){if(null===Fs)throw Error(a(330));_l(Fs,e),Fs=Fs.nextEffect}}while(null!==Fs);Fs=null,Li(),Ms=o}else e.current=n;if(Vs)Vs=!1,Gs=e,Hs=t;else for(Fs=i;null!==Fs;)t=Fs.nextEffect,Fs.nextEffect=null,Fs=t;if(0===(t=e.firstPendingTime)&&(js=null),1073741823===t?e===Zs?qs++:(qs=0,Zs=e):qs=0,"function"==typeof wl&&wl(n.stateNode,r),el(e),Ns)throw Ns=!1,e=Us,Us=null,e;return 0!=(8&Ms)||qi(),null}function ml(){for(;null!==Fs;){var e=Fs.effectTag;0!=(256&e)&&rs(Fs.alternate,Fs),0==(512&e)||Vs||(Vs=!0,Hi(97,(function(){return gl(),null}))),Fs=Fs.nextEffect}}function gl(){if(90!==Hs){var e=97<Hs?97:Hs;return Hs=90,Gi(e,yl)}}function yl(){if(null===Gs)return!1;var e=Gs;if(Gs=null,0!=(48&Ms))throw Error(a(331));var t=Ms;for(Ms|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:is(5,n),os(5,n)}}catch(t){if(null===e)throw Error(a(330));_l(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ms=t,qi(),!0}function vl(e,t,n){co(e,t=ys(e,t=Qa(n,t),1073741823)),null!==(e=Ks(e,1073741823))&&el(e)}function _l(e,t){if(3===e.tag)vl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){vl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===js||!js.has(r))){co(n,e=vs(n,e=Qa(t,e),1073741823)),null!==(n=Ks(n,1073741823))&&el(n);break}}n=n.return}}function bl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Cs===e&&Ps===n?Ds===Es||Ds===As&&1073741823===Os&&Ui()-zs<500?rl(e,Ps):Bs=!0:Il(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,el(e)))}function xl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=$s(t=Ys(),e,null)),null!==(e=Ks(e,t))&&el(e)}_s=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||fi.current)ka=!0;else{if(r<n){switch(ka=!1,t.tag){case 3:Ua(t),Pa();break;case 5:if(Lo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gi(t.type)&&bi(t);break;case 4:Io(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ui($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Wa(e,t,n):(ui(zo,1&zo.current),null!==(t=Ya(e,t,n))?t.sibling:null);ui(zo,1&zo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return Xa(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ui(zo,zo.current),!r)return null}return Ya(e,t,n)}ka=!1}}else ka=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=mi(t,di.current),ro(t,n),i=Yo(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var o=!0;bi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ao(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&go(t,r,s,e),i.updater=yo,t.stateNode=i,i._reactInternalFiber=t,xo(t,r,e,n),t=Na(null,t,r,!0,o,n)}else t.tag=0,Oa(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Ml(e)?1:0;if(null!=e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=za(null,t,i,e,n);break e;case 1:t=Fa(null,t,i,e,n);break e;case 11:t=Ia(null,t,i,e,n);break e;case 14:t=Ra(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ua(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,so(e,t),ho(t,r,null,n),(r=t.memoizedState.element)===i)Pa(),t=Ya(e,t,n);else{if((i=t.stateNode.hydrate)&&(wa=Sn(t.stateNode.containerInfo.firstChild),xa=t,i=Sa=!0),i)for(n=Co(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Oa(e,t,r,n),Pa();t=t.child}return t;case 5:return Lo(t),null===e&&Ma(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,bn(r,i)?s=null:null!==o&&bn(r,o)&&(t.effectTag|=16),Ba(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Oa(e,t,s,n),t=t.child),t;case 6:return null===e&&Ma(t),null;case 13:return Wa(e,t,n);case 4:return Io(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Mo(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(ui($i,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0==(o=Fr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!fi.current){t=Ya(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===l.tag&&((u=lo(n,null)).tag=2,co(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),no(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Oa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,ro(t,n),r=r(i=io(i,o.unstable_observedBits)),t.effectTag|=1,Oa(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),Ra(e,t,i,o=Yi(i.type,o),r,n);case 15:return La(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,ro(t,n),_o(t,r,i),xo(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Xa(e,t,n)}throw Error(a(156,t.tag))};var wl=null,Sl=null;function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function El(e,t,n,r){return new Al(e,t,n,r)}function Ml(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Cl(e,t){var n=e.alternate;return null===n?((n=El(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Ml(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ne:return Pl(n.children,i,o,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=El(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=El(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case ue:return(e=El(19,n,t,i)).elementType=ue,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case le:s=11;break e;case he:s=14;break e;case de:s=16,r=null;break e;case fe:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=El(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Pl(e,t,n,r){return(e=El(7,e,r,t)).expirationTime=n,e}function Dl(e,t,n){return(e=El(6,e,null,t)).expirationTime=n,e}function kl(e,t,n){return(t=El(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ol(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Il(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Rl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Ll(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Bl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function zl(e,t,n,r){var i=t.current,o=Ys(),s=po.suspense;o=$s(o,i,s);e:if(n){t:{if(Ke(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=_i(n,c,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),co(i,t),Js(i,o),o}function Fl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Nl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Ul(e,t){Nl(e,t),(e=e.alternate)&&Nl(e,t)}function jl(e,t,n){var r=new Ol(e,t,n=null!=n&&!0===n.hydrate),i=El(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ao(i),e[Tn]=r.current,n&&0!==t&&function(e,t){var n=Je(t);Et.forEach((function(e){ft(e,t,n)})),Mt.forEach((function(e){ft(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Vl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Gl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Fl(a);s.call(e)}}zl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new jl(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Fl(a);l.call(e)}}!function(e,t){var n=Ms;Ms&=-2,Ms|=8;try{e(t)}finally{0===(Ms=n)&&qi()}}((function(){zl(t,a,e,i)}))}return Fl(a)}jl.prototype.render=function(e){zl(e,this._internalRoot,null,null)},jl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;zl(null,e,null,(function(){t[Tn]=null}))},pt=function(e){if(13===e.tag){var t=Xi(Ys(),150,100);Js(e,t),Ul(e,t)}},mt=function(e){13===e.tag&&(Js(e,3),Ul(e,3))},gt=function(e){if(13===e.tag){var t=Ys();Js(e,t=$s(t,e,null)),Ul(e,t)}},T=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=On(r);if(!i)throw Error(a(90));xe(r),Ee(r,i)}}}break;case"textarea":Oe(e,n);break;case"select":null!=(t=n.value)&&Pe(e,!!n.multiple,t,!1)}},R=function(e,t){var n=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=n)&&qi()}},L=function(e,t,n,r,i){var o=Ms;Ms|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ms=o)&&qi()}},B=function(){0==(49&Ms)&&(function(){if(null!==Ws){var e=Ws;Ws=null,e.forEach((function(e,t){Bl(t,e),el(t)})),qi()}}(),gl())},z=function(e,t){var n=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=n)&&qi()}};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);wl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Sl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=tt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Pn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return null===(e=tt(t))?null:e.stateNode},t.render=function(e,t,n){if(!Vl(t))throw Error(a(200));return Gl(null,e,t,!1,n)}},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},1570:(e,t)=>{t.w=function(e){return e}},4210:function(e,t,n){var r;e.exports=(r=n(7294),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=r},function(e,t,n){(function(t){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=c(e),a=r[0],s=r[1],l=new o(function(e,t){return 3*(e+t)/4-t}(a,s)),u=0,h=0<s?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(u(e,a,s<a+16383?s:a+16383));return 1==i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),i=e("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var a=2147483647;function s(e){if(a<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"!=typeof e)return l(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}function l(e,n,r){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|f(e,n),i=s(r),o=i.write(e,n);return o!==r&&(i=i.slice(0,o)),i}(e,n);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,n,r){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),Object.setPrototypeOf(i,t.prototype),i}(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,n,r);var o=function(e){if(t.isBuffer(e)){var n=0|d(e.length),r=s(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||z(e.length)?s(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),s(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(a<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function f(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return R(e).length;default:if(o)return i?-1:I(e).length;n=(""+n).toLowerCase(),o=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,n,r,i,o){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),z(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=t.from(n,i)),t.isBuffer(n))return 0===n.length?-1:g(e,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):g(e,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var h=!0,d=0;d<l;d++)if(c(e,o+d)!==c(t,d)){h=!1;break}if(h)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=t.length;o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(z(s))return a;e[n+a]=s}return a}function v(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return L(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,h=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=w));return n}(r)}n.kMaxLength=a,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return i=t,o=n,c(r=e),r<=0?s(r):void 0!==i?"string"==typeof o?s(r).fill(i,o):s(r).fill(i):s(r);var r,i,o},t.allocUnsafe=function(e){return u(e)},t.allocUnsafeSlow=function(e){return u(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(B(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),B(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);o<a;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(r=n=0;r<e.length;++r)n+=e[r].length;var i=t.allocUnsafe(n),o=0;for(r=0;r<e.length;++r){var a=e[r];if(B(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},t.byteLength=f,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(e,n,r,i,o){if(B(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(o<=i&&r<=n)return 0;if(o<=i)return-1;if(r<=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),l=Math.min(a,s),c=this.slice(i,o),u=e.slice(n,r),h=0;h<l;++h)if(c[h]!==u[h]){a=c[h],s=u[h];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l,c=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return s=t,l=n,L(I(e,this.length-s),this,s,l);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return o=t,a=n,L(R(e),this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(c)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),c=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=F[e[o]];return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function T(e,n,r,i,o,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<n||n<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function k(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e);var i=this.subarray(e,n);return Object.setPrototypeOf(i,t.prototype),i},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,i||0===i||(i=this.length),n>=e.length&&(n=e.length),n=n||0,0<i&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===e&&r<n&&n<i)for(var a=o-1;0<=a;--a)e[a+n]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),n);return o},t.prototype.fill=function(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var a;if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=n;a<r;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,i),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-n;++a)this[a+n]=s[a%l]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function z(e){return e!=e}var F=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:9}],5:[function(e,t,n){"use strict";t.exports=e("./").polyfill()},{"./":6}],6:[function(e,n,r){(function(t,i){var o;o=function(){"use strict";function n(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,a=void 0,s=void 0,l=function(e,t){m[o]=e,m[o+1]=t,2===(o+=2)&&(s?s(g):x())},c="undefined"!=typeof window?window:void 0,u=c||{},h=u.MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(g,1)}}var m=new Array(1e3);function g(){for(var e=0;e<o;e+=2)(0,m[e])(m[e+1]),m[e]=void 0,m[e+1]=void 0;o=0}var y,v,_,b,x=void 0;function w(e,t){var n=this,r=new this.constructor(E);void 0===r[A]&&B(r);var i=n._state;if(i){var o=arguments[i-1];l((function(){return R(i,r,o,n._result)}))}else O(n,r,e,t);return r}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return T(t,e),t}x=d?function(){return t.nextTick(g)}:h?(v=0,_=new h(g),b=document.createTextNode(""),_.observe(b,{characterData:!0}),function(){b.data=v=++v%2}):f?((y=new MessageChannel).port1.onmessage=g,function(){return y.port2.postMessage(0)}):void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(g)}:p()}catch(e){return p()}}():p();var A=Math.random().toString(36).substring(2);function E(){}var M=void 0;function C(e,t,r){var i,o;t.constructor===e.constructor&&r===w&&t.constructor.resolve===S?(i=e,1===(o=t)._state?D(i,o._result):2===o._state?k(i,o._result):O(o,void 0,(function(e){return T(i,e)}),(function(e){return k(i,e)}))):void 0===r?D(e,t):n(r)?function(e,t,n){l((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?T(e,n):D(e,n))}),(function(t){r||(r=!0,k(e,t))}),e._label);!r&&i&&(r=!0,k(e,i))}),e)}(e,t,r):D(e,t)}function T(e,t){if(e===t)k(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=t),null===r||"object"!=i&&"function"!=i)D(e,t);else{var n=void 0;try{n=t.then}catch(t){return void k(e,t)}C(e,t,n)}var r,i}function P(e){e._onerror&&e._onerror(e._result),I(e)}function D(e,t){e._state===M&&(e._result=t,e._state=1,0!==e._subscribers.length&&l(I,e))}function k(e,t){e._state===M&&(e._state=2,e._result=t,l(P,e))}function O(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=n,i[o+2]=r,0===o&&e._state&&l(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?R(n,r,i,o):i(o);e._subscribers.length=0}}function R(e,t,r,i){var o=n(r),a=void 0,s=void 0,l=!0;if(o){try{a=r(i)}catch(e){l=!1,s=e}if(t===a)return void k(t,new TypeError("A promises callback cannot return that same promise."))}else a=i;t._state!==M||(o&&l?T(t,a):!1===l?k(t,s):1===e?D(t,a):2===e&&k(t,a))}var L=0;function B(e){e[A]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var z=(F.prototype._enumerate=function(e){for(var t=0;this._state===M&&t<e.length;t++)this._eachEntry(e[t],t)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===S){var i=void 0,o=void 0,a=!1;try{i=e.then}catch(t){a=!0,o=t}if(i===w&&e._state!==M)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===N){var s=new n(E);a?k(s,o):C(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},F.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===M&&(this._remaining--,2===e?k(r,n):this._result[t]=n),0===this._remaining&&D(r,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},F);function F(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[A]||B(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&D(this.promise,this._result))):k(this.promise,new Error("Array Methods must be provided an Array"))}var N=(U.prototype.catch=function(e){return this.then(null,e)},U.prototype.finally=function(e){var t=this.constructor;return n(e)?this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})):this.then(e,e)},U);function U(e){this[A]=L++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof U?function(e,t){try{t((function(t){T(e,t)}),(function(t){k(e,t)}))}catch(t){k(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return N.prototype.then=w,N.all=function(e){return new z(this,e).promise},N.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},N.resolve=S,N.reject=function(e){var t=new this(E);return k(t,e),t},N._setScheduler=function(e){s=e},N._setAsap=function(e){l=e},N._asap=l,N.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=N},N.Promise=N},"object"==typeof r&&void 0!==n?n.exports=o():this.ES6Promise=o()}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:14}],7:[function(e,t,n){!function(e,r){if(void 0!==n&&void 0!==t)r(0,t);else{var i={exports:{}};r(0,i),e.fetchJsonp=i.exports}}(this,(function(e,t){"use strict";var n="callback";function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,a=t.timeout||5e3,s=t.jsonpCallback||n,l=void 0;return new Promise((function(n,c){var u=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),h=s+"_"+u;window[u]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),i(h),r(u)},o+=-1===o.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+o+s+"="+u),t.charset&&d.setAttribute("charset",t.charset),d.id=h,document.getElementsByTagName("head")[0].appendChild(d),l=setTimeout((function(){c(new Error("JSONP request to "+e+" timed out")),r(u),i(h),window[u]=function(){r(u)}}),a),d.onerror=function(){c(new Error("JSONP request to "+e+" failed")),r(u),i(h),l&&clearTimeout(l)}}))}}))},{}],8:[function(e,t,n){var r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(t,u,h){function d(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,e)}catch(e){s(e)}}}(p,"writestart progress write writeend".split(" "))}h||(t=c(t));var f,p=this,m="application/octet-stream"===t.type;if(p.readyState=p.INIT,i)return f=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=f,r.download=u,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),d(),l(f),p.readyState=p.DONE}));!function(){if((a||m&&o)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,d()},r.readAsDataURL(t),p.readyState=p.INIT}f=f||n().createObjectURL(t),m?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),p.readyState=p.DONE,d(),l(f)}()},h=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=r)},{}],9:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;0<u;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+h?d/l:d*Math.pow(2,1-h))*l&&(a++,l/=2),u<=a+h?(s=0,a=u):1<=a+h?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;e[n+f]=255&a,f+=p,a/=256,c-=8);e[n+f-p]|=128*m}},{}],10:[function(e,t,n){"use strict";var r;function i(e,t){return e.b===t.b&&e.a===t.a}function o(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function a(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?r<i?t.a-e.a+r/(r+i)*(e.a-n.a):t.a-n.a+i/(r+i)*(n.a-e.a):0}function s(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?(t.a-n.a)*r+(t.a-e.a)*i:0}function l(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function c(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?r<i?t.b-e.b+r/(r+i)*(e.b-n.b):t.b-n.b+i/(r+i)*(n.b-e.b):0}function u(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?(t.b-n.b)*r+(t.b-e.b)*i:0}function h(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function d(e){var t=y(e.b);return _(t,e.c),_(t.b,e.c),b(t,e.a),t}function f(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,w(t.a,e.a)),t.d!==e.d&&(n=!0,S(t.d,e.d)),v(t,e),r||(_(t,e.a),e.a.c=e),n||(b(t,e.d),e.d.a=e))}function p(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,S(e.d,e.b.d)),e.c===e?w(e.a,null):(e.b.d.a=K(e),e.a.c=e.c,v(e,K(e)),n||b(e,e.d)),t.c===t?(w(t.a,null),S(t.d,null)):(e.d.a=K(t),t.a.c=t.c,v(t,K(t))),x(e)}function m(e){var t=y(e),n=t.b;return v(t,e.e),t.a=e.b.a,_(n,t.a),t.d=n.d=e.d,t=t.b,v(e.b,K(e.b)),v(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function g(e,t){var n=!1,r=y(e),i=r.b;return t.d!==e.d&&(n=!0,S(t.d,e.d)),v(r,e.e),v(i,t),r.a=e.b.a,i.a=t.a,r.d=i.d=e.d,e.d.a=i,n||b(r,e.d),r}function y(e){var t=new J,n=new J,r=e.b.h;return(((n.h=r).b.h=t).h=e).b.h=n,t.b=n,((t.c=t).e=n).b=t,(n.c=n).e=t}function v(e,t){var n=e.c,r=t.c;n.b.e=t,(r.b.e=e).c=r,t.c=n}function _(e,t){var n=t.f,r=new ee(t,n);for(n.e=r,n=(t.f=r).c=e;n.a=r,(n=n.c)!==e;);}function b(e,t){var n=t.d,r=new $(t,n);for(n.b=r,(t.d=r).a=e,r.c=t.c,n=e;n.d=r,(n=n.e)!==e;);}function x(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function w(e,t){for(var n=e.c,r=n;r.a=t,(r=r.c)!==n;);n=e.f,((r=e.e).f=n).e=r}function S(e,t){for(var n=e.a,r=n;r.d=t,(r=r.e)!==n;);n=e.d,((r=e.b).d=n).b=r}function A(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}var E=4e150;function M(e,t){e.f+=t.f,e.b.f+=t.b.f}function C(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?o(t.a,n.a)?s(n.b.a,t.a,n.a)<=0:0<=s(t.b.a,n.a,t.a):s(n.b.a,e,n.a)<=0:n.b.a===e?0<=s(t.b.a,e,t.a):(t=a(t.b.a,e,t.a),(e=a(n.b.a,e,n.a))<=t)}function T(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function P(e,t){p(e.a),e.c=!1,(e.a=t).i=e}function D(e){for(var t=e.a.a;(e=de(e)).a.a===t;);return e.c&&(P(e,t=g(he(e).a.b,e.a.e)),e=de(e)),e}function k(e,t,n){var r=new ue;return r.a=n,r.e=W(e.f,t.e,r),n.i=r}function O(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function I(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,T(e)}function R(e,t,n){for(t=(e=t).a;e!==n;){e.c=!1;var r=he(e),i=r.a;if(i.a!==t.a){if(!r.c){I(e);break}P(r,i=g(t.c.b,i.b))}t.c!==i&&(f(K(i),i),f(t,i)),I(e),t=r.a,e=r}return t}function L(e,t,n,r,i,o){for(var a=!0;k(e,t,n.b),(n=n.c)!==r;);for(null===i&&(i=he(t).a.b.c);(n=(r=he(t)).a.b).a===i.a;)n.c!==i&&(f(K(n),n),f(K(i),n)),r.f=t.f-n.f,r.d=O(e,r.f),t.b=!0,!a&&N(e,t)&&(M(n,i),T(t),p(i)),a=!1,t=r,i=n;t.b=!0,o&&j(e,t)}function B(e,t,n,r,i){var o=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(o,n,r,e.c)||null,null===t.d&&(i?e.n||(Y(e,100156),e.n=!0):t.d=n[0])}function z(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,B(e,t.a,r,[.5,.5,0,0],!1),f(t,n)}function F(e,t,n,r,i){var o=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),s=i+1;r[i]=.5*a/(o+a),r[s]=.5*o/(o+a),e.g[0]+=r[i]*t.g[0]+r[s]*n.g[0],e.g[1]+=r[i]*t.g[1]+r[s]*n.g[1],e.g[2]+=r[i]*t.g[2]+r[s]*n.g[2]}function N(e,t){var n=he(t),r=t.a,a=n.a;if(o(r.a,a.a)){if(0<s(a.b.a,r.a,a.a))return!1;if(i(r.a,a.a)){if(r.a!==a.a){n=e.e;var l=r.a.h;if(0<=l){var c=(n=n.b).d,u=n.e,h=n.c,d=h[l];c[d]=c[n.a],(h[c[d]]=d)<=--n.a&&(d<=1||o(u[c[d>>1]],u[c[d]])?le(n,d):ce(n,d)),u[l]=null,h[l]=n.b,n.b=l}else for(n.c[-(l+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;z(e,K(a),r)}}else m(a.b),f(r,K(a)),t.b=n.b=!0}else{if(s(r.b.a,a.a,r.a)<0)return!1;de(t).b=t.b=!0,m(r.b),f(K(a),r)}return!0}function U(e,t){var n=he(t),r=t.a,d=n.a,p=r.a,g=d.a,y=r.b.a,v=d.b.a,_=new ee;if(s(y,e.a,p),s(v,e.a,g),p===g||Math.min(p.a,y.a)>Math.max(g.a,v.a))return!1;if(o(p,g)){if(0<s(v,p,g))return!1}else if(s(y,g,p)<0)return!1;var b,x,w=y,S=p,A=v,E=g;if(o(w,S)||(b=w,w=S,S=b),o(A,E)||(b=A,A=E,E=b),o(w,A)||(b=w,w=A,A=b,b=S,S=E,E=b),o(A,S)?o(S,E)?((b=a(w,A,S))+(x=a(A,S,E))<0&&(b=-b,x=-x),_.b=h(b,A.b,x,S.b)):((b=s(w,A,S))+(x=-s(w,E,S))<0&&(b=-b,x=-x),_.b=h(b,A.b,x,E.b)):_.b=(A.b+S.b)/2,l(w,S)||(b=w,w=S,S=b),l(A,E)||(b=A,A=E,E=b),l(w,A)||(b=w,w=A,A=b,b=S,S=E,E=b),l(A,S)?l(S,E)?((b=c(w,A,S))+(x=c(A,S,E))<0&&(b=-b,x=-x),_.a=h(b,A.a,x,S.a)):((b=u(w,A,S))+(x=-u(w,E,S))<0&&(b=-b,x=-x),_.a=h(b,A.a,x,E.a)):_.a=(A.a+S.a)/2,o(_,e.a)&&(_.b=e.a.b,_.a=e.a.a),w=o(p,g)?p:g,o(w,_)&&(_.b=w.b,_.a=w.a),i(_,p)||i(_,g))return N(e,t),!1;if(!i(y,e.a)&&0<=s(y,e.a,_)||!i(v,e.a)&&s(v,e.a,_)<=0){if(v===e.a)return m(r.b),f(d.b,r),r=he(t=D(t)).a,R(e,he(t),n),L(e,t,K(r),r,r,!0),!0;if(y!==e.a)return 0<=s(y,e.a,_)&&(de(t).b=t.b=!0,m(r.b),r.a.b=e.a.b,r.a.a=e.a.a),s(v,e.a,_)<=0&&(t.b=n.b=!0,m(d.b),d.a.b=e.a.b,d.a.a=e.a.a),!1;for(m(d.b),f(r.e,K(d)),g=(p=n=t).a.b.a;(p=de(p)).a.b.a===g;);return p=he(t=p).a.b.c,n.a=K(d),L(e,t,(d=R(e,n,null)).c,r.b.c,p,!0),!0}return m(r.b),m(d.b),f(K(d),r),r.a.b=_.b,r.a.a=_.a,r.a.h=ne(e.e,r.a),r=r.a,d=[0,0,0,0],_=[p.d,y.d,g.d,v.d],r.g[0]=r.g[1]=r.g[2]=0,F(r,p,y,d,0),F(r,g,v,d,2),B(e,r,_,d,!0),de(t).b=t.b=n.b=!0,!1}function j(e,t){for(var n=he(t);;){for(;n.b;)n=he(t=n);if(!(t.b||null!==(t=de(n=t))&&t.b))break;t.b=!1;var r,i=t.a,a=n.a;if(r=i.b.a!==a.b.a)e:{var l=he(r=t),c=r.a,u=l.a,h=void 0;if(o(c.b.a,u.b.a)){if(s(c.b.a,u.b.a,c.a)<0){r=!1;break e}de(r).b=r.b=!0,h=m(c),f(u.b,h),h.d.c=r.d}else{if(0<s(u.b.a,c.b.a,u.a)){r=!1;break e}r.b=l.b=!0,h=m(u),f(c.e,u.b),h.b.d.c=r.d}r=!0}if(r&&(n.c?(T(n),p(a),a=(n=he(t)).a):t.c&&(T(t),p(i),i=(t=de(n)).a)),i.a!==a.a)if(i.b.a===a.b.a||t.c||n.c||i.b.a!==e.a&&a.b.a!==e.a)N(e,t);else if(U(e,t))break;i.a===a.a&&i.b.a===a.b.a&&(M(a,i),T(t),p(i),t=de(n))}}function V(e,t){for(var n=(e.a=t).c;null===n.i;)if((n=n.c)===t.c){n=e;var r=t;(c=new ue).a=r.c.b;for(var a=(h=n.f).a;null!==(a=a.a).b&&!h.c(h.b,c,a.b););var l=he(h=a.b),c=h.a;if(a=l.a,0===s(c.b.a,r,c.a))i((c=h.a).a,r)||i(c.b.a,r)||(m(c.b),h.c&&(p(c.c),h.c=!1),f(r.c,c),V(n,r));else{var u=o(a.b.a,c.b.a)?h:l;l=void 0,h.d||u.c?(l=u===h?g(r.c.b,c.e):g(a.b.c.b,r.c).b,u.c?P(u,l):((h=k(c=n,h,l)).f=de(h).f+h.a.f,h.d=O(c,h.f)),V(n,r)):L(n,h,r.c,r.c,null,!0)}return}if(h=(c=he(n=D(n.i))).a,(c=R(e,c,null)).c===h){c=(h=c).c,a=he(n),l=n.a,u=a.a;var h,d=!1;l.b.a!==u.b.a&&U(e,n),i(l.a,e.a)&&(f(K(c),l),c=he(n=D(n)).a,R(e,he(n),a),d=!0),i(u.a,e.a)&&(f(h,K(u)),h=R(e,a,null),d=!0),d?L(e,n,h.c,c,c,!0):(r=o(u.a,l.a)?K(u):l,L(e,n,r=g(h.c.b,r),r.c,r.c,!1),r.b.i.c=!0,j(e,n))}else L(e,n,c.c,h,h,!0)}function G(e,t){var n=new ue,r=d(e.b);r.a.b=E,r.a.a=t,r.b.a.b=-E,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=W(r=e.f,r.a,n),n.e=r}function H(e){this.a=new q,this.b=e,this.c=C}function W(e,t,n){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,n););return e=new q(n,t.a,t),t.a.c=e,t.a=e}function q(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function Z(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function X(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:Y(e,100151),e.u(null);break;case 1:Y(e,100152),e.t()}else switch(e.d){case 2:Y(e,100154),e.v();break;case 1:Y(e,100153),e.w()}}function Y(e,t){e.p&&e.p(t,e.c)}function $(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function J(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function K(e){return e.b.e}function Q(){this.c=new ee,this.a=new $,this.b=new J,this.d=new J,this.b.b=this.d,this.d.b=this.b}function ee(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ie}function ne(e,t){if(e.e){var n,r=e.b,i=++r.a;return 2*i>r.f&&(r.f*=2,r.c=oe(r.c,r.f+1)),0===r.b?n=i:(n=r.b,r.b=r.c[r.b]),r.e[n]=t,r.c[n]=i,r.d[i]=n,r.h&&ce(r,i),n}return r=e.a++,e.c[r]=t,-(r+1)}function re(e){if(0===e.a)return se(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&o(ae(e.b),t))return se(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function ie(){this.d=oe([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function oe(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function ae(e){return e.e[e.d[1]]}function se(e){var t=e.d,n=e.e,r=e.c,i=t[1],o=n[i];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[i]=null,r[i]=e.b,e.b=i,0<--e.a&&le(e,1)),o}function le(e,t){for(var n=e.d,r=e.e,i=e.c,a=t,s=n[a];;){var l=a<<1;l<e.a&&o(r[n[l+1]],r[n[l]])&&(l+=1);var c=n[l];if(l>e.a||o(r[s],r[c])){i[n[a]=s]=a;break}i[n[a]=c]=a,a=l}}function ce(e,t){for(var n=e.d,r=e.e,i=e.c,a=t,s=n[a];;){var l=a>>1,c=n[l];if(0==l||o(r[c],r[s])){i[n[a]=s]=a;break}i[n[a]=c]=a,a=l}}function ue(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function he(e){return e.e.c.b}function de(e){return e.e.a.b}(r=Z.prototype).x=function(){X(this,0)},r.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void Y(this,100900)}Y(this,100901)},r.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Y(this,100900)}return!1},r.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},r.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:Y(this,100900)}},r.C=function(e,t){var n=!1,r=[0,0,0];X(this,2);for(var i=0;i<3;++i){var o=e[i];o<-1e150&&(o=-1e150,n=!0),1e150<o&&(o=1e150,n=!0),r[i]=o}n&&Y(this,100155),null===(n=this.q)?f(n=d(this.b),n.b):(m(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},r.u=function(e){X(this,0),this.d=1,this.b=new Q,this.c=e},r.t=function(){X(this,1),this.d=2,this.q=null},r.v=function(){X(this,2),this.d=1},r.w=function(){X(this,1),this.d=0;var e,t,n=!1,r=[h=this.j[0],a=this.j[1],c=this.j[2]];if(0===h&&0===a&&0===c){for(var a=[-2e150,-2e150,-2e150],l=[2e150,2e150,2e150],c=[],u=[],h=(n=this.b.c).e;h!==n;h=h.e)for(var d=0;d<3;++d){var f=h.g[d];f<l[d]&&(l[d]=f,u[d]=h),f>a[d]&&(a[d]=f,c[d]=h)}if(h=0,a[1]-l[1]>a[0]-l[0]&&(h=1),a[2]-l[2]>a[h]-l[h]&&(h=2),l[h]>=a[h])r[0]=0,r[1]=0,r[2]=1;else{for(a=0,l=u[h],c=c[h],u=[0,0,0],l=[l.g[0]-c.g[0],l.g[1]-c.g[1],l.g[2]-c.g[2]],d=[0,0,0],h=n.e;h!==n;h=h.e)d[0]=h.g[0]-c.g[0],d[1]=h.g[1]-c.g[1],d[2]=h.g[2]-c.g[2],u[0]=l[1]*d[2]-l[2]*d[1],u[1]=l[2]*d[0]-l[0]*d[2],u[2]=l[0]*d[1]-l[1]*d[0],a<(f=u[0]*u[0]+u[1]*u[1]+u[2]*u[2])&&(a=f,r[0]=u[0],r[1]=u[1],r[2]=u[2]);a<=0&&(r[0]=r[1]=r[2]=0,r[A(l)]=1)}n=!0}for(u=A(r),h=this.b.c,a=(u+1)%3,c=(u+2)%3,u=0<r[u]?1:-1,r=h.e;r!==h;r=r.e)r.b=r.g[a],r.a=u*r.g[c];if(n){for(r=0,h=(n=this.b.a).b;h!==n;h=h.b)if(!((a=h.a).f<=0))for(;r+=(a.a.b-a.b.a.b)*(a.a.a+a.b.a.a),(a=a.e)!==h.a;);if(r<0)for(n=(r=this.b.c).e;n!==r;n=n.e)n.a=-n.a}for(this.n=!1,h=(r=this.b.b).h;h!==r;h=n)n=h.h,a=h.e,i(h.a,h.b.a)&&h.e.e!==h&&(z(this,a,h),p(h),a=(h=a).e),a.e===h&&(a!==h&&(a!==n&&a!==n.b||(n=n.h),p(a)),h!==n&&h!==n.b||(n=n.h),p(h));for(this.e=r=new te,h=(n=this.b.c).e;h!==n;h=h.e)h.h=ne(r,h);for(function(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;e.d.sort(function(e){return function(t,n){return o(e[t],e[n])?1:-1}}(e.c)),e.e=!0,function(e){for(var t=e.a;1<=t;--t)le(e,t);e.h=!0}(e.b)}(r),this.f=new H(this),G(this,-E),G(this,E);null!==(r=re(this.e));){for(;;){e:if(h=this.e,0===h.a)n=ae(h.b);else if(n=h.c[h.d[h.a-1]],0!==h.b.a&&(h=ae(h.b),o(h,n))){n=h;break e}if(null===n||!i(n,r))break;n=re(this.e),z(this,r.c,n.c)}V(this,r)}for(this.a=this.f.a.a.b.a.a,r=0;null!==(n=this.f.a.a.b);)n.h||++r,T(n);for(this.f=null,(r=this.e).b=null,r.d=null,this.e=r.c=null,h=(r=this.b).a.b;h!==r.a;h=n)n=h.b,(h=h.a).e.e===h&&(M(h.c,h),p(h));if(!this.n){if(r=this.b,this.m)for(h=r.b.h;h!==r.b;h=n)n=h.h,h.b.d.c!==h.d.c?h.f=h.d.c?1:-1:p(h);else for(h=r.a.b;h!==r.a;h=n)if(n=h.b,h.c){for(h=h.a;o(h.b.a,h.a);h=h.c.b);for(;o(h.a,h.b.a);h=h.e);for(a=h.c.b,c=void 0;h.e!==a;)if(o(h.b.a,a.a)){for(;a.e!==h&&(o((t=a.e).b.a,t.a)||s(a.a,a.b.a,a.e.b.a)<=0);)a=(c=g(a.e,a)).b;a=a.c.b}else{for(;a.e!==h&&(o((e=h.c.b).a,e.b.a)||0<=s(h.b.a,h.a,h.c.b.a));)h=(c=g(h,h.c.b)).b;h=h.e}for(;a.e.e!==h;)a=(c=g(a.e,a)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(r=this.b).a.b;n!==r.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),h=n.a;this.k&&this.k(h.a.d,this.c),(h=h.e)!==n.a;);this.i&&this.i(this.c)}}else{for(r=this.b,n=!!this.l,h=!1,a=-1,c=r.a.d;c!==r.a;c=c.d)if(c.c)for(h||(this.h&&this.h(4,this.c),h=!0),u=c.a;n&&a!==(l=u.b.d.c?0:1)&&(a=l,this.l&&this.l(!!a,this.c)),this.k&&this.k(u.a.d,this.c),(u=u.e)!==c.a;);h&&this.i&&this.i(this.c)}if(this.r){for(h=(r=this.b).a.b;h!==r.a;h=n)if(n=h.b,!h.c){for(c=(a=h.a).e,u=void 0;c=(u=c).e,(u.d=null)===u.b.d&&(u.c===u?w(u.a,null):(u.a.c=u.c,v(u,K(u))),(l=u.b).c===l?w(l.a,null):(l.a.c=l.c,v(l,K(l))),x(u)),u!==a;);a=h.d,((h=h.b).d=a).b=h}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Z,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Z.prototype.gluDeleteTess=Z.prototype.x,Z.prototype.gluTessProperty=Z.prototype.B,Z.prototype.gluGetTessProperty=Z.prototype.y,Z.prototype.gluTessNormal=Z.prototype.A,Z.prototype.gluTessCallback=Z.prototype.z,Z.prototype.gluTessVertex=Z.prototype.C,Z.prototype.gluTessBeginPolygon=Z.prototype.u,Z.prototype.gluTessBeginContour=Z.prototype.t,Z.prototype.gluTessEndContour=Z.prototype.v,Z.prototype.gluTessEndPolygon=Z.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],11:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=e[t++],o=1<<i,a=1+o,s=1+a,l=i+1,c=(1<<l)-1,u=0,h=0,d=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;u<16&&0!==f;)h|=e[t++]<<u,u+=8,1===f?f=e[t++]:--f;if(u<l)break;var g=h&c;if(h>>=l,u-=l,g!=o){if(g==a)break;for(var y=g<s?g:m,v=0,_=y;o<_;)_=p[_]>>8,++v;var b=_;if(r<d+v+(y!==g?1:0))return void console.log("Warning, gif stream longer than expected.");n[d++]=b;var x=d+=v;for(y!==g&&(n[d++]=b),_=y;v--;)_=p[_],n[--x]=255&_,_>>=8;null!==m&&s<4096&&(p[s++]=m<<8|b,c+1<=s&&l<12&&(++l,c=c<<1|1)),m=g}else s=1+a,c=(1<<(l=i+1))-1,m=null}return d!==r&&console.log("Warning, gif stream shorter than expected."),n}try{n.GifWriter=function(e,t,n,r){var i=0,o=void 0===(r=void 0===r?{}:r).loop?null:r.loop,a=void 0===r.palette?null:r.palette;if(t<=0||n<=0||65535<t||65535<n)throw new Error("Width/Height invalid.");function s(e){var t=e.length;if(t<2||256<t||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[i++]=71,e[i++]=73,e[i++]=70,e[i++]=56,e[i++]=57,e[i++]=97;var l=0,c=0;if(null!==a){for(var u=s(a);u>>=1;)++l;if(u=1<<l,--l,void 0!==r.background){if(u<=(c=r.background))throw new Error("Background index out of range.");if(0===c)throw new Error("Background index explicitly passed as 0.")}}if(e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=(null!==a?128:0)|l,e[i++]=c,e[i++]=0,null!==a)for(var h=0,d=a.length;h<d;++h){var f=a[h];e[i++]=f>>16&255,e[i++]=f>>8&255,e[i++]=255&f}if(null!==o){if(o<0||65535<o)throw new Error("Loop count invalid.");e[i++]=33,e[i++]=255,e[i++]=11,e[i++]=78,e[i++]=69,e[i++]=84,e[i++]=83,e[i++]=67,e[i++]=65,e[i++]=80,e[i++]=69,e[i++]=50,e[i++]=46,e[i++]=48,e[i++]=3,e[i++]=1,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=0}var p=!1;this.addFrame=function(t,n,r,o,l,c){if(!0===p&&(--i,p=!1),c=void 0===c?{}:c,t<0||n<0||65535<t||65535<n)throw new Error("x/y invalid.");if(r<=0||o<=0||65535<r||65535<o)throw new Error("Width/Height invalid.");if(l.length<r*o)throw new Error("Not enough pixels for the frame size.");var u=!0,h=c.palette;if(null==h&&(u=!1,h=a),null==h)throw new Error("Must supply either a local or global palette.");for(var d=s(h),f=0;d>>=1;)++f;d=1<<f;var m=void 0===c.delay?0:c.delay,g=void 0===c.disposal?0:c.disposal;if(g<0||3<g)throw new Error("Disposal out of range.");var y=!1,v=0;if(void 0!==c.transparent&&null!==c.transparent&&(y=!0,(v=c.transparent)<0||d<=v))throw new Error("Transparent color index.");if(0===g&&!y&&0===m||(e[i++]=33,e[i++]=249,e[i++]=4,e[i++]=g<<2|(!0===y?1:0),e[i++]=255&m,e[i++]=m>>8&255,e[i++]=v,e[i++]=0),e[i++]=44,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=!0===u?128|f-1:0,!0===u)for(var _=0,b=h.length;_<b;++_){var x=h[_];e[i++]=x>>16&255,e[i++]=x>>8&255,e[i++]=255&x}return i=function(e,t,n,r){e[t++]=n;var i=t++,o=1<<n,a=o-1,s=1+o,l=1+s,c=n+1,u=0,h=0;function d(n){for(;n<=u;)e[t++]=255&h,h>>=8,u-=8,t===i+256&&(e[i]=255,i=t++)}function f(e){h|=e<<u,u+=c,d(8)}var p=r[0]&a,m={};f(o);for(var g=1,y=r.length;g<y;++g){var v=r[g]&a,_=p<<8|v,b=m[_];if(void 0===b){for(h|=p<<u,u+=c;8<=u;)e[t++]=255&h,h>>=8,u-=8,t===i+256&&(e[i]=255,i=t++);4096===l?(f(o),l=1+s,c=n+1,m={}):(1<<c<=l&&++c,m[_]=l++),p=v}else p=b}return f(p),f(s),d(1),i+1===t?e[i]=0:(e[i]=t-i-1,e[t++]=0),t}(e,i,f<2?2:f,l)},this.end=function(){return!1===p&&(e[i++]=59,p=!0),i},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(e){i=e}},n.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,o=e[t++],a=o>>7,s=1<<1+(7&o);e[t++],e[t++];var l=null,c=null;a&&(l=t,t+=3*(c=s));var u=!0,h=[],d=0,f=null,p=0,m=null;for(this.width=n,this.height=i;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(C=e[t++])))throw Error("Invalid block size");if(0===C)break;t+=C}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var g=e[t++];d=e[t++]|e[t++]<<8,f=e[t++],0==(1&g)&&(f=null),p=g>>2&7,t++;break;case 254:for(;;){if(!(0<=(C=e[t++])))throw Error("Invalid block size");if(0===C)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++],w=x>>6&1,S=l,A=c,E=!1;x>>7&&(E=!0,S=t,t+=3*(A=1<<1+(7&x)));var M=t;for(t++;;){var C;if(!(0<=(C=e[t++])))throw Error("Invalid block size");if(0===C)break;t+=C}h.push({x:y,y:v,width:_,height:b,has_local_palette:E,palette_offset:S,palette_size:A,data_offset:M,data_length:t-M,transparent_index:f,interlaced:!!w,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=h.length)throw new Error("Frame index out of range.");return h[e]},this.decodeAndBlitFrameBGRA=function(t,i){var o=this.frameInfo(t),a=o.width*o.height,s=new Uint8Array(a);r(e,o.data_offset,s,a);var l=o.palette_offset,c=o.transparent_index;null===c&&(c=256);var u=o.width,h=n-u,d=u,f=4*(o.y*n+o.x),p=4*((o.y+o.height)*n+o.x),m=f,g=4*h;!0===o.interlaced&&(g+=4*n*7);for(var y=8,v=0,_=s.length;v<_;++v){var b=s[v];if(0===d&&(d=u,p<=(m+=g)&&(g=4*h+4*n*(y-1),m=f+(u+h)*(y<<1),y>>=1)),b===c)m+=4;else{var x=e[l+3*b],w=e[l+3*b+1],S=e[l+3*b+2];i[m++]=S,i[m++]=w,i[m++]=x,i[m++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,i){var o=this.frameInfo(t),a=o.width*o.height,s=new Uint8Array(a);r(e,o.data_offset,s,a);var l=o.palette_offset,c=o.transparent_index;null===c&&(c=256);var u=o.width,h=n-u,d=u,f=4*(o.y*n+o.x),p=4*((o.y+o.height)*n+o.x),m=f,g=4*h;!0===o.interlaced&&(g+=4*n*7);for(var y=8,v=0,_=s.length;v<_;++v){var b=s[v];if(0===d&&(d=u,p<=(m+=g)&&(g=4*h+4*n*(y-1),m=f+(u+h)*(y<<1),y>>=1)),b===c)m+=4;else{var x=e[l+3*b],w=e[l+3*b+1],S=e[l+3*b+2];i[m++]=x,i[m++]=w,i[m++]=S,i[m++]=255}--d}}}}catch(e){}},{}],12:[function(e,t,n){(function(r){!function(t){"use strict";function n(e){if(null==this)throw TypeError();var t=String(this),n=t.length,r=e?Number(e):0;if(r!=r&&(r=0),!(r<0||n<=r)){var i,o=t.charCodeAt(r);return 55296<=o&&o<=56319&&r+1<n&&56320<=(i=t.charCodeAt(r+1))&&i<=57343?1024*(o-55296)+i-56320+65536:o}}var i;function o(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function a(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new o,this.dtree=new o}String.prototype.codePointAt||((i=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}())?i(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n);var s=new o,l=new o,c=new Uint8Array(30),u=new Uint16Array(30),h=new Uint8Array(30),d=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=new o,m=new Uint8Array(320);function g(e,t,n,r){var i,o;for(i=0;i<n;++i)e[i]=0;for(i=0;i<30-n;++i)e[i+n]=i/n|0;for(o=r,i=0;i<30;++i)t[i]=o,o+=1<<e[i]}var y=new Uint16Array(16);function v(e,t,n,r){var i,o;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<r;++i)e.table[t[n+i]]++;for(i=o=e.table[0]=0;i<16;++i)y[i]=o,o+=e.table[i];for(i=0;i<r;++i)t[n+i]&&(e.trans[y[t[n+i]]++]=i)}function _(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function b(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function x(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var n=0,r=0,i=0,o=e.tag;r=2*r+(1&o),o>>>=1,++i,n+=t.table[i],0<=(r-=t.table[i]););return e.tag=o,e.bitcount-=i,t.trans[n+r]}function w(e,t,n){var r,i,o,a,s,l;for(r=b(e,5,257),i=b(e,5,1),o=b(e,4,4),a=0;a<19;++a)m[a]=0;for(a=0;a<o;++a){var c=b(e,3,0);m[f[a]]=c}for(v(p,m,0,19),s=0;s<r+i;){var u=x(e,p);switch(u){case 16:var h=m[s-1];for(l=b(e,2,3);l;--l)m[s++]=h;break;case 17:for(l=b(e,3,3);l;--l)m[s++]=0;break;case 18:for(l=b(e,7,11);l;--l)m[s++]=0;break;default:m[s++]=u}}v(t,m,0,r),v(n,m,r,i)}function S(e,t,n){for(;;){var r,i,o,a,s=x(e,t);if(256===s)return 0;if(s<256)e.dest[e.destLen++]=s;else for(r=b(e,c[s-=257],u[s]),i=x(e,n),a=o=e.destLen-b(e,h[i],d[i]);a<o+r;++a)e.dest[e.destLen++]=e.dest[a]}}function A(e){for(var t,n;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}function E(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function M(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function C(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function T(e){throw new Error(e)}function P(e,t){e||T(t)}!function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}(s,l),g(c,u,4,3),g(h,d,2,1),c[28]=0,u[28]=258,M.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},M.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},M.prototype.addX=function(e){this.addPoint(e,null)},M.prototype.addY=function(e){this.addPoint(null,e)},M.prototype.addBezier=function(e,t,n,r,i,o,a,s){var l=this,c=[e,t],u=[n,r],h=[i,o],d=[a,s];this.addPoint(e,t),this.addPoint(a,s);for(var f=0;f<=1;f++){var p=6*c[f]-12*u[f]+6*h[f],m=-3*c[f]+9*u[f]-9*h[f]+3*d[f],g=3*u[f]-3*c[f];if(0!=m){var y=Math.pow(p,2)-4*g*m;if(!(y<0)){var v=(-p+Math.sqrt(y))/(2*m);0<v&&v<1&&(0===f&&l.addX(E(c[f],u[f],h[f],d[f],v)),1===f&&l.addY(E(c[f],u[f],h[f],d[f],v)));var _=(-p-Math.sqrt(y))/(2*m);0<_&&_<1&&(0===f&&l.addX(E(c[f],u[f],h[f],d[f],_)),1===f&&l.addY(E(c[f],u[f],h[f],d[f],_)))}}else{if(0==p)continue;var b=-g/p;0<b&&b<1&&(0===f&&l.addX(E(c[f],u[f],h[f],d[f],b)),1===f&&l.addY(E(c[f],u[f],h[f],d[f],b)))}}},M.prototype.addQuad=function(e,t,n,r,i,o){var a=e+2/3*(n-e),s=t+2/3*(r-t),l=a+1/3*(i-e),c=s+1/3*(o-t);this.addBezier(e,t,a,s,l,c,i,o)},C.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},C.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},C.prototype.curveTo=C.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:o})},C.prototype.quadTo=C.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},C.prototype.close=C.prototype.closePath=function(){this.commands.push({type:"Z"})},C.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof M){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},C.prototype.getBoundingBox=function(){for(var e=new M,t=0,n=0,r=0,i=0,o=0;o<this.commands.length;o++){var a=this.commands[o];switch(a.type){case"M":e.addPoint(a.x,a.y),t=r=a.x,n=i=a.y;break;case"L":e.addPoint(a.x,a.y),r=a.x,i=a.y;break;case"Q":e.addQuad(r,i,a.x1,a.y1,a.x,a.y),r=a.x,i=a.y;break;case"C":e.addBezier(r,i,a.x1,a.y1,a.x2,a.y2,a.x,a.y),r=a.x,i=a.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+a.type)}}return e.isEmpty()&&e.addPoint(0,0),e},C.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},C.prototype.toPathData=function(e){function t(){for(var t,n=arguments,r="",i=0;i<arguments.length;i+=1){var o=n[i];0<=o&&0<i&&(r+=" "),r+=(t=o,Math.round(t)===t?""+Math.round(t):t.toFixed(e))}return r}e=void 0!==e?e:2;for(var n="",r=0;r<this.commands.length;r+=1){var i=this.commands[r];"M"===i.type?n+="M"+t(i.x,i.y):"L"===i.type?n+="L"+t(i.x,i.y):"C"===i.type?n+="C"+t(i.x1,i.y1,i.x2,i.y2,i.x,i.y):"Q"===i.type?n+="Q"+t(i.x1,i.y1,i.x,i.y):"Z"===i.type&&(n+="Z")}return n},C.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},C.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var D={fail:T,argument:P,assert:P},k=2147483648,O={},I={},R={};function L(e){return function(){return e}}I.BYTE=function(e){return D.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},R.BYTE=L(1),I.CHAR=function(e){return[e.charCodeAt(0)]},R.CHAR=L(1),I.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},R.CHARARRAY=function(e){return e.length},I.USHORT=function(e){return[e>>8&255,255&e]},R.USHORT=L(2),I.SHORT=function(e){return 32768<=e&&(e=-(65536-e)),[e>>8&255,255&e]},R.SHORT=L(2),I.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},R.UINT24=L(3),I.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},R.ULONG=L(4),I.LONG=function(e){return k<=e&&(e=-(2*k-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONG=L(4),I.FIXED=I.ULONG,R.FIXED=R.ULONG,I.FWORD=I.SHORT,R.FWORD=R.SHORT,I.UFWORD=I.USHORT,R.UFWORD=R.USHORT,I.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONGDATETIME=L(8),I.TAG=function(e){return D.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},R.TAG=L(4),I.Card8=I.BYTE,R.Card8=R.BYTE,I.Card16=I.USHORT,R.Card16=R.USHORT,I.OffSize=I.BYTE,R.OffSize=R.BYTE,I.SID=I.USHORT,R.SID=R.USHORT,I.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?I.NUMBER16(e):I.NUMBER32(e)},R.NUMBER=function(e){return I.NUMBER(e).length},I.NUMBER16=function(e){return[28,e>>8&255,255&e]},R.NUMBER16=L(3),I.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},R.NUMBER32=L(5),I.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}for(var i="",o=0,a=t.length;o<a;o+=1){var s=t[o];i+="e"===s?"-"===t[++o]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],c=0,u=(i+=1&i.length?"f":"ff").length;c<u;c+=2)l.push(parseInt(i.substr(c,2),16));return l},R.REAL=function(e){return I.REAL(e).length},I.NAME=I.CHARARRAY,R.NAME=R.CHARARRAY,I.STRING=I.CHARARRAY,R.STRING=R.CHARARRAY,O.UTF8=function(e,t,n){for(var r=[],i=n,o=0;o<i;o++,t+=1)r[o]=e.getUint8(t);return String.fromCharCode.apply(null,r)},O.UTF16=function(e,t,n){for(var r=[],i=n/2,o=0;o<i;o++,t+=2)r[o]=e.getUint16(t);return String.fromCharCode.apply(null,r)},I.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},R.UTF16=function(e){return 2*e.length};var B={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};O.MACSTRING=function(e,t,n,r){var i=B[r];if(void 0!==i){for(var o="",a=0;a<n;a++){var s=e.getUint8(t+a);o+=s<=127?String.fromCharCode(s):i[127&s]}return o}};var z,F="function"==typeof WeakMap&&new WeakMap;function N(e){return-128<=e&&e<=127}function U(e,t,n){for(var r=0,i=e.length;t<i&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}function j(e,t,n){for(var r=0,i=e.length,o=t;o<i&&r<64;){var a=e[o];if(!N(a))break;if(0===a&&o+1<i&&0===e[o+1])break;++o,++r}n.push(r-1);for(var s=t;s<o;++s)n.push(e[s]+256&255);return o}function V(e,t,n){for(var r=0,i=e.length,o=t;o<i&&r<64;){var a=e[o];if(0===a)break;if(N(a)&&o+1<i&&N(e[o+1]))break;++o,++r}n.push(64|r-1);for(var s=t;s<o;++s){var l=e[s];n.push(l+65536>>8&255,l+256&255)}return o}I.MACSTRING=function(e,t){var n=function(e){if(!z)for(var t in z={},B)z[t]=new String(t);var n=z[e];if(void 0!==n){if(F){var r=F.get(n);if(void 0!==r)return r}var i=B[e];if(void 0!==i){for(var o={},a=0;a<i.length;a++)o[i.charCodeAt(a)]=a+128;return F&&F.set(n,o),o}}}(t);if(void 0!==n){for(var r=[],i=0;i<e.length;i++){var o=e.charCodeAt(i);if(128<=o&&void 0===(o=n[o]))return;r[i]=o}return r}},R.MACSTRING=function(e,t){var n=I.MACSTRING(e,t);return void 0!==n?n.length:0},I.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=0===r?U(e,t,n):-128<=r&&r<=127?j(e,t,n):V(e,t,n)}return n},I.INDEX=function(e){for(var t=1,n=[t],r=[],i=0;i<e.length;i+=1){var o=I.OBJECT(e[i]);Array.prototype.push.apply(r,o),t+=o.length,n.push(t)}if(0===r.length)return[0,0];for(var a=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,I.BYTE,I.USHORT,I.UINT24,I.ULONG][s],c=0;c<n.length;c+=1){var u=l(n[c]);Array.prototype.push.apply(a,u)}return Array.prototype.concat(I.Card16(e.length),I.OffSize(s),a,r)},R.INDEX=function(e){return I.INDEX(e).length},I.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=parseInt(n[i],0),a=e[o];t=(t=t.concat(I.OPERAND(a.value,a.type))).concat(I.OPERATOR(o))}return t},R.DICT=function(e){return I.DICT(e).length},I.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},I.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)D.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(I.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(I.NUMBER(e));else if("offset"===t)n=n.concat(I.NUMBER32(e));else if("number"===t)n=n.concat(I.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(I.REAL(e))}return n},I.OP=I.BYTE,R.OP=R.BYTE;var G="function"==typeof WeakMap&&new WeakMap;function H(e,t,n){for(var r=0;r<t.length;r+=1){var i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n)for(var o=Object.keys(n),a=0;a<o.length;a+=1){var s=o[a],l=n[s];void 0!==this[s]&&(this[s]=l)}}function W(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function q(e,t,n){var r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return i}function Z(e,t,n){var r=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i=i.concat(n(t[o],o));return i}function X(e){1===e.format?H.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(W("glyph",e.glyphs))):D.assert(!1,"Can't create coverage table format 2 yet.")}function Y(e){H.call(this,"scriptListTable",Z("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return D.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new H("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new H("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(W("featureIndex",r.featureIndexes)))}].concat(Z("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new H("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(W("featureIndex",n.featureIndexes)))}]}))))}]})))}function $(e){H.call(this,"featureListTable",Z("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new H("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(W("lookupListIndex",n.lookupListIndexes)))}]})))}function J(e,t){H.call(this,"lookupListTable",q("lookup",e,(function(e){var n=t[e.lookupType];return D.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new H("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(q("subtable",e.subtables,n)))})))}I.CHARSTRING=function(e){if(G){var t=G.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,i=0;i<r;i+=1){var o=e[i];n=n.concat(I[o.type](o.value))}return G&&G.set(e,n),n},R.CHARSTRING=function(e){return I.CHARSTRING(e).length},I.OBJECT=function(e){var t=I[e.type];return D.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},R.OBJECT=function(e){var t=R[e.type];return D.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},I.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],i=[],o=0;o<n;o+=1){var a=e.fields[o],s=I[a.type];D.argument(void 0!==s,"No encoding function for field type "+a.type+" ("+a.name+")");var l=e[a.name];void 0===l&&(l=a.value);var c=s(l);"TABLE"===a.type?(i.push(t.length),t=t.concat([0,0]),r.push(c)):t=t.concat(c)}for(var u=0;u<r.length;u+=1){var h=i[u],d=t.length;D.argument(d<65536,"Table "+e.tableName+" too big."),t[h]=d>>8,t[h+1]=255&d,t=t.concat(r[u])}return t},R.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var i=e.fields[r],o=R[i.type];D.argument(void 0!==o,"No sizeOf function for field type "+i.type+" ("+i.name+")");var a=e[i.name];void 0===a&&(a=i.value),t+=o(a),"TABLE"===i.type&&(t+=2)}return t},I.RECORD=I.TABLE,R.RECORD=R.TABLE,I.LITERAL=function(e){return e},R.LITERAL=function(e){return e.length},H.prototype.encode=function(){return I.TABLE(this)},H.prototype.sizeOf=function(){return R.TABLE(this)};var K={Table:H,Record:H,Coverage:(X.prototype=Object.create(H.prototype)).constructor=X,ScriptList:(Y.prototype=Object.create(H.prototype)).constructor=Y,FeatureList:($.prototype=Object.create(H.prototype)).constructor=$,LookupList:(J.prototype=Object.create(H.prototype)).constructor=J,ushortList:W,tableList:q,recordList:Z};function Q(e,t){return e.getUint8(t)}function ee(e,t){return e.getUint16(t,!1)}function te(e,t){return e.getUint32(t,!1)}function ne(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var re={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ie(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ie.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ie.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ie.prototype.parseCard8=ie.prototype.parseByte,ie.prototype.parseCard16=ie.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ie.prototype.parseSID=ie.prototype.parseUShort,ie.prototype.parseOffset16=ie.prototype.parseUShort,ie.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ie.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ie.prototype.parseOffset32=ie.prototype.parseULong=function(){var e=te(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ie.prototype.parseFixed=function(){var e=ne(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ie.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r},ie.prototype.parseTag=function(){return this.parseString(4)},ie.prototype.parseLongDateTime=function(){var e=te(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ie.prototype.parseVersion=function(e){var t=ee(this.data,this.offset+this.relativeOffset),n=ee(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},ie.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=re[e]*t},ie.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},ie.prototype.parseOffset16List=ie.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},ie.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},ie.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t},ie.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ie.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ie.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var o={},a=0;a<r.length;a++){var s=r[a],l=t[s];o[s]=l.call(this)}n[i]=o}return n},ie.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var o={},a=0;a<r.length;a++){var s=r[a],l=t[s];o[s]=l.call(this)}n[i]=o}return n},ie.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],o=e[i];n[i]=o.call(this)}return n},ie.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ie.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},ie.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new ie(this.data,this.offset+t).parseStruct(e)},ie.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new ie(this.data,this.offset+t).parseStruct(e)},ie.prototype.parseListOfLists=function(e){for(var t=this,n=this.parseOffset16List(),r=n.length,i=this.relativeOffset,o=new Array(r),a=0;a<r;a++){var s=n[a];if(0!==s)if(t.relativeOffset=s,e){for(var l=t.parseOffset16List(),c=new Array(l.length),u=0;u<l.length;u++)t.relativeOffset=s+l[u],c[u]=e.call(t);o[a]=c}else o[a]=t.parseUShortList();else o[a]=void 0}return this.relativeOffset=i,o},ie.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var r=new Array(n),i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}},ie.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ie.uShort,end:ie.uShort,classId:ie.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ie.list=function(e,t){return function(){return this.parseList(e,t)}},ie.list32=function(e,t){return function(){return this.parseList32(e,t)}},ie.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ie.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ie.pointer=function(e){return function(){return this.parsePointer(e)}},ie.pointer32=function(e){return function(){return this.parsePointer32(e)}},ie.tag=ie.prototype.parseTag,ie.byte=ie.prototype.parseByte,ie.uShort=ie.offset16=ie.prototype.parseUShort,ie.uShortList=ie.prototype.parseUShortList,ie.uLong=ie.offset32=ie.prototype.parseULong,ie.uLongList=ie.prototype.parseULongList,ie.struct=ie.prototype.parseStruct,ie.coverage=ie.prototype.parseCoverage,ie.classDef=ie.prototype.parseClassDef;var oe={reserved:ie.uShort,reqFeatureIndex:ie.uShort,featureIndexes:ie.uShortList};ie.prototype.parseScriptList=function(){return this.parsePointer(ie.recordList({tag:ie.tag,script:ie.pointer({defaultLangSys:ie.pointer(oe),langSysRecords:ie.recordList({tag:ie.tag,langSys:ie.pointer(oe)})})}))||[]},ie.prototype.parseFeatureList=function(){return this.parsePointer(ie.recordList({tag:ie.tag,feature:ie.pointer({featureParams:ie.offset16,lookupListIndexes:ie.uShortList})}))||[]},ie.prototype.parseLookupList=function(e){return this.parsePointer(ie.list(ie.pointer((function(){var t=this.parseUShort();D.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ie.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},ie.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return D.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ie.offset32,featureTableSubstitutionOffset:ie.offset32})}))||[]};var ae={getByte:Q,getCard8:Q,getUShort:ee,getCard16:ee,getShort:function(e,t){return e.getInt16(t,!1)},getULong:te,getFixed:ne,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,i=0;i<n;i+=1)r<<=8,r+=e.getUint8(t+i);return r},getBytes:function(e,t,n){for(var r=[],i=t;i<n;i+=1)r.push(e.getUint8(i));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ie},se=function(e,t){var n={};n.version=ae.getUShort(e,t),D.argument(0===n.version,"cmap table version should be 0."),n.numTables=ae.getUShort(e,t+2);for(var r=-1,i=n.numTables-1;0<=i;--i){var o=ae.getUShort(e,t+4+8*i),a=ae.getUShort(e,t+4+8*i+2);if(3===o&&(0===a||1===a||10===a)||0===o&&(0===a||1===a||2===a||3===a||4===a)){r=ae.getULong(e,t+4+8*i+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new ae.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var i=t.parseULong(),o=t.parseULong(),a=t.parseULong(),s=i;s<=o;s+=1)e.glyphIndexMap[s]=a,a++}(n,s);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,r,i){var o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var a=new ae.Parser(n,r+i+14),s=new ae.Parser(n,r+i+16+2*o),l=new ae.Parser(n,r+i+16+4*o),c=new ae.Parser(n,r+i+16+6*o),u=r+i+16+8*o,h=0;h<o-1;h+=1)for(var d=void 0,f=a.parseUShort(),p=s.parseUShort(),m=l.parseShort(),g=c.parseUShort(),y=p;y<=f;y+=1)0!==g?(u=c.offset+c.relativeOffset-2,u+=g,u+=2*(y-p),0!==(d=ae.getUShort(n,u))&&(d=d+m&65535)):d=y+m&65535,e.glyphIndexMap[y]=d}(n,s,e,t,r)}return n},le=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ue=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],he=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function de(e){this.font=e}function fe(e){this.cmap=e}function pe(e,t){this.encoding=e,this.charset=t}function me(e){switch(e.version){case 1:this.names=he.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<he.length?this.names[t]=he[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-he.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=he[n+e.glyphNameIndex[n]];break;case 3:default:this.names=[]}}de.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var i=n.get(r),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===t)return r;return null},fe.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},pe.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},me.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},me.prototype.glyphIndexToName=function(e){return this.names[e]};var ge=function(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()};function ye(e){this.bindConstructorValues(e)}function ve(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function _e(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}ye.prototype.bindConstructorValues=function(e){var t,n;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,n=t||new C,{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){n=e}}))},ye.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},ye.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ye.prototype.getPath=function(e,t,n,r,i){var o,a;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;var s=(r=r||{}).xScale,l=r.yScale;if(r.hinting&&i&&i.hinting&&(a=this.path&&i.hinting.exec(this,n)),a)o=i.hinting.getCommands(a),e=Math.round(e),t=Math.round(t),s=l=1;else{o=this.path.commands;var c=1/this.path.unitsPerEm*n;void 0===s&&(s=c),void 0===l&&(l=c)}for(var u=new C,h=0;h<o.length;h+=1){var d=o[h];"M"===d.type?u.moveTo(e+d.x*s,t+-d.y*l):"L"===d.type?u.lineTo(e+d.x*s,t+-d.y*l):"Q"===d.type?u.quadraticCurveTo(e+d.x1*s,t+-d.y1*l,e+d.x*s,t+-d.y*l):"C"===d.type?u.curveTo(e+d.x1*s,t+-d.y1*l,e+d.x2*s,t+-d.y2*l,e+d.x*s,t+-d.y*l):"Z"===d.type&&u.closePath()}return u},ye.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return D.argument(0===t.length,"There are still points left in the current contour."),e},ye.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];"Z"!==i.type&&(t.push(i.x),n.push(i.y)),"Q"!==i.type&&"C"!==i.type||(t.push(i.x1),n.push(i.y1)),"C"===i.type&&(t.push(i.x2),n.push(i.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},ye.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)},ye.prototype.drawPoints=function(e,t,n,r){function i(t,n,r,i){var o=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*i,r+t[a].y*i),e.arc(n+t[a].x*i,r+t[a].y*i,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24;for(var o=1/this.path.unitsPerEm*r,a=[],s=[],l=this.path,c=0;c<l.commands.length;c+=1){var u=l.commands[c];void 0!==u.x&&a.push({x:u.x,y:-u.y}),void 0!==u.x1&&s.push({x:u.x1,y:-u.y1}),void 0!==u.x2&&s.push({x:u.x2,y:-u.y2})}e.fillStyle="blue",i(a,t,n,o),e.fillStyle="red",i(s,t,n,o)},ye.prototype.drawMetrics=function(e,t,n,r){var i;t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",ge(e,t,-1e4,t,1e4),ge(e,-1e4,n,1e4,n);var o=this.xMin||0,a=this.yMin||0,s=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",ge(e,t+o*i,-1e4,t+o*i,1e4),ge(e,t+s*i,-1e4,t+s*i,1e4),ge(e,-1e4,n+-a*i,1e4,n+-a*i),ge(e,-1e4,n+-l*i,1e4,n+-l*i),e.strokeStyle="green",ge(e,t+c*i,-1e4,t+c*i,1e4)},_e.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},_e.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var be={GlyphSet:_e,glyphLoader:function(e,t){return new ye({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,i,o){return function(){var a=new ye({index:t,font:e});return a.path=function(){n(a,r,i);var t=o(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},ve(a,"xMin","_xMin"),ve(a,"xMax","_xMax"),ve(a,"yMin","_yMin"),ve(a,"yMax","_yMax"),a}},cffGlyphLoader:function(e,t,n,r){return function(){var i=new ye({index:t,font:e});return i.path=function(){var t=n(e,i,r);return t.unitsPerEm=e.unitsPerEm,t},i}}};function xe(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!xe(e[n],t[n]))return!1;return!0}return!1}function we(e){return e.length<1240?107:e.length<33900?1131:32768}function Se(e,t,n){var r,i,o=[],a=[],s=ae.getCard16(e,t);if(0!==s){var l=ae.getByte(e,t+2);r=t+(s+1)*l+2;for(var c=t+3,u=0;u<s+1;u+=1)o.push(ae.getOffset(e,c,l)),c+=l;i=r+o[s]}else i=t+2;for(var h=0;h<o.length-1;h+=1){var d=ae.getBytes(e,r+o[h],r+o[h+1]);n&&(d=n(d)),a.push(d)}return{objects:a,startOffset:t,endOffset:i}}function Ae(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),i=r>>4,o=15&r;if(15==i)break;if(t+=n[i],15==o)break;t+=n[o]}return parseFloat(t)}(e);if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ee(e,t,n){t=void 0!==t?t:0;var r=new ae.Parser(e,t),i=[],o=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var a=r.parseByte();a<=21?(12===a&&(a=1200+r.parseByte()),i.push([a,o]),o=[]):o.push(Ae(r,a))}return function(e){for(var t={},n=0;n<e.length;n+=1){var r,i=e[n][0],o=e[n][1];if(r=1===o.length?o[0]:o,t.hasOwnProperty(i)&&!isNaN(t[i]))throw new Error("Object "+t+" already has key "+i);t[i]=r}return t}(i)}function Me(e,t){return t<=390?le[t]:e[t-391]}function Ce(e,t,n){for(var r,i={},o=0;o<t.length;o+=1){var a=t[o];if(Array.isArray(a.type)){var s=[];s.length=a.type.length;for(var l=0;l<a.type.length;l++)void 0===(r=void 0!==e[a.op]?e[a.op][l]:void 0)&&(r=void 0!==a.value&&void 0!==a.value[l]?a.value[l]:null),"SID"===a.type[l]&&(r=Me(n,r)),s[l]=r;i[a.name]=s}else void 0===(r=e[a.op])&&(r=void 0!==a.value?a.value:null),"SID"===a.type&&(r=Me(n,r)),i[a.name]=r}return i}var Te=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Pe=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function De(e,t,n,r){return Ce(Ee(e,t,n),Pe,r)}function ke(e,t,n,r){for(var i,o,a=[],s=0;s<n.length;s+=1){var l=(o=r,Ce(Ee(i=new DataView(new Uint8Array(n[s]).buffer),0,i.byteLength),Te,o));l._subrs=[],l._subrsBias=0;var c=l.private[0],u=l.private[1];if(0!==c&&0!==u){var h=De(e,u+t,c,r);if(l._defaultWidthX=h.defaultWidthX,l._nominalWidthX=h.nominalWidthX,0!==h.subrs){var d=Se(e,u+h.subrs+t);l._subrs=d.objects,l._subrsBias=we(l._subrs)}l._privateDict=h}a.push(l)}return a}function Oe(e,t,n){var r,i,o,a,s,l,c,u,h=new C,d=[],f=0,p=!1,m=!1,g=0,y=0;if(e.isCIDFont){var v=e.tables.cff.topDict._fdSelect[t.index],_=e.tables.cff.topDict._fdArray[v];s=_._subrs,l=_._subrsBias,c=_._defaultWidthX,u=_._nominalWidthX}else s=e.tables.cff.topDict._subrs,l=e.tables.cff.topDict._subrsBias,c=e.tables.cff.topDict._defaultWidthX,u=e.tables.cff.topDict._nominalWidthX;var b=c;function x(e,t){m&&h.closePath(),h.moveTo(e,t),m=!0}function w(){d.length%2==0||p||(b=d.shift()+u),f+=d.length>>1,d.length=0,p=!0}return function n(c){for(var v,_,S,A,E,M,C,T,P,D,k,O,I=0;I<c.length;){var R=c[I];switch(I+=1,R){case 1:case 3:w();break;case 4:1<d.length&&!p&&(b=d.shift()+u,p=!0),y+=d.pop(),x(g,y);break;case 5:for(;0<d.length;)g+=d.shift(),y+=d.shift(),h.lineTo(g,y);break;case 6:for(;0<d.length&&(g+=d.shift(),h.lineTo(g,y),0!==d.length);)y+=d.shift(),h.lineTo(g,y);break;case 7:for(;0<d.length&&(y+=d.shift(),h.lineTo(g,y),0!==d.length);)g+=d.shift(),h.lineTo(g,y);break;case 8:for(;0<d.length;)r=g+d.shift(),i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),g=o+d.shift(),y=a+d.shift(),h.curveTo(r,i,o,a,g,y);break;case 10:E=d.pop()+l,(M=s[E])&&n(M);break;case 11:return;case 12:switch(R=c[I],I+=1,R){case 35:r=g+d.shift(),i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),C=o+d.shift(),T=a+d.shift(),P=C+d.shift(),D=T+d.shift(),k=P+d.shift(),O=D+d.shift(),g=k+d.shift(),y=O+d.shift(),d.shift(),h.curveTo(r,i,o,a,C,T),h.curveTo(P,D,k,O,g,y);break;case 34:r=g+d.shift(),i=y,o=r+d.shift(),a=i+d.shift(),C=o+d.shift(),T=a,P=C+d.shift(),D=a,k=P+d.shift(),O=y,g=k+d.shift(),h.curveTo(r,i,o,a,C,T),h.curveTo(P,D,k,O,g,y);break;case 36:r=g+d.shift(),i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),C=o+d.shift(),T=a,P=C+d.shift(),D=a,k=P+d.shift(),O=D+d.shift(),g=k+d.shift(),h.curveTo(r,i,o,a,C,T),h.curveTo(P,D,k,O,g,y);break;case 37:r=g+d.shift(),i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),C=o+d.shift(),T=a+d.shift(),P=C+d.shift(),D=T+d.shift(),k=P+d.shift(),O=D+d.shift(),Math.abs(k-g)>Math.abs(O-y)?g=k+d.shift():y=O+d.shift(),h.curveTo(r,i,o,a,C,T),h.curveTo(P,D,k,O,g,y);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+R),d.length=0}break;case 14:0<d.length&&!p&&(b=d.shift()+u,p=!0),m&&(h.closePath(),m=!1);break;case 18:w();break;case 19:case 20:w(),I+=f+7>>3;break;case 21:2<d.length&&!p&&(b=d.shift()+u,p=!0),y+=d.pop(),x(g+=d.pop(),y);break;case 22:1<d.length&&!p&&(b=d.shift()+u,p=!0),x(g+=d.pop(),y);break;case 23:w();break;case 24:for(;2<d.length;)r=g+d.shift(),i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),g=o+d.shift(),y=a+d.shift(),h.curveTo(r,i,o,a,g,y);g+=d.shift(),y+=d.shift(),h.lineTo(g,y);break;case 25:for(;6<d.length;)g+=d.shift(),y+=d.shift(),h.lineTo(g,y);r=g+d.shift(),i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),g=o+d.shift(),y=a+d.shift(),h.curveTo(r,i,o,a,g,y);break;case 26:for(d.length%2&&(g+=d.shift());0<d.length;)r=g,i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),g=o,y=a+d.shift(),h.curveTo(r,i,o,a,g,y);break;case 27:for(d.length%2&&(y+=d.shift());0<d.length;)r=g+d.shift(),i=y,o=r+d.shift(),a=i+d.shift(),g=o+d.shift(),y=a,h.curveTo(r,i,o,a,g,y);break;case 28:v=c[I],_=c[I+1],d.push((v<<24|_<<16)>>16),I+=2;break;case 29:E=d.pop()+e.gsubrsBias,(M=e.gsubrs[E])&&n(M);break;case 30:for(;0<d.length&&(r=g,i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),g=o+d.shift(),y=a+(1===d.length?d.shift():0),h.curveTo(r,i,o,a,g,y),0!==d.length);)r=g+d.shift(),i=y,o=r+d.shift(),a=i+d.shift(),y=a+d.shift(),g=o+(1===d.length?d.shift():0),h.curveTo(r,i,o,a,g,y);break;case 31:for(;0<d.length&&(r=g+d.shift(),i=y,o=r+d.shift(),a=i+d.shift(),y=a+d.shift(),g=o+(1===d.length?d.shift():0),h.curveTo(r,i,o,a,g,y),0!==d.length);)r=g,i=y+d.shift(),o=r+d.shift(),a=i+d.shift(),g=o+d.shift(),y=a+(1===d.length?d.shift():0),h.curveTo(r,i,o,a,g,y);break;default:R<32?console.log("Glyph "+t.index+": unknown operator "+R):R<247?d.push(R-139):R<251?(v=c[I],I+=1,d.push(256*(R-247)+v+108)):R<255?(v=c[I],I+=1,d.push(256*-(R-251)-v-108)):(v=c[I],_=c[I+1],S=c[I+2],A=c[I+3],I+=4,d.push((v<<24|_<<16|S<<8|A)/65536))}}}(n),t.advanceWidth=b,h}function Ie(e,t){var n,r=le.indexOf(e);return 0<=r&&(n=r),0<=(r=t.indexOf(e))?n=r+le.length:(n=le.length+t.length,t.push(e)),n}function Re(e,t,n){for(var r={},i=0;i<e.length;i+=1){var o=e[i],a=t[o.name];void 0===a||xe(a,o.value)||("SID"===o.type&&(a=Ie(a,n)),r[o.op]={name:o.name,type:o.type,value:a})}return r}function Le(e,t){var n=new K.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Re(Te,e,t),n}function Be(e){var t=new K.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function ze(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,i=0,o=0;o<n.commands.length;o+=1){var a=void 0,s=void 0,l=n.commands[o];if("Q"===l.type&&(l={type:"C",x:l.x,y:l.y,x1:1/3*r+2/3*l.x1,y1:1/3*i+2/3*l.y1,x2:1/3*l.x+2/3*l.x1,y2:1/3*l.y+2/3*l.y1}),"M"===l.type)a=Math.round(l.x-r),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),i=Math.round(l.y);else if("L"===l.type)a=Math.round(l.x-r),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),i=Math.round(l.y);else if("C"===l.type){var c=Math.round(l.x1-r),u=Math.round(l.y1-i),h=Math.round(l.x2-l.x1),d=Math.round(l.y2-l.y1);a=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:u}),t.push({name:"dx2",type:"NUMBER",value:h}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),i=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Fe=function(e,t){var n={},r=new ae.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),D.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n},Ne=function(e,t){var n={},r=new ae.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n},Ue=function(e,t){var n=new ae.Parser(e,t),r=n.parseULong();D.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);for(var i=n.parseULong(),o=[],a=0;a<i;a++){for(var s="",l=t+n.parseUShort(),c=n.parseUShort(),u=l;u<l+c;++u)s+=String.fromCharCode(e.getInt8(u));o.push(s)}return o},je=function(e,t){var n={},r=new ae.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n},Ve=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ge={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},He={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},We={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function qe(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Ge[t];case 3:return We[t]}}var Ze="utf-16",Xe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ye={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function $e(e,t,n){switch(e){case 0:return Ze;case 1:return Ye[n]||Xe[t];case 3:if(1===t||10===t)return Ze}}function Je(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function Ke(e,t,n,r,i,o){return new K.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function Qe(e,t){var n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var o=0;o<n;o++)if(t[i+o]!==e[o])continue e;return i}return-1}(e,t);if(n<0){n=t.length;for(var r=0,i=e.length;r<i;++r)t.push(e[r])}return n}var et=function(e,t,n){for(var r={},i=new ae.Parser(e,t),o=i.parseUShort(),a=i.parseUShort(),s=i.offset+i.parseUShort(),l=0;l<a;l++){var c,u=i.parseUShort(),h=i.parseUShort(),d=i.parseUShort(),f=i.parseUShort(),p=Ve[f]||f,m=i.parseUShort(),g=i.parseUShort(),y=qe(u,d,n),v=$e(u,h,d);if(void 0!==v&&void 0!==y&&(c=v===Ze?O.UTF16(e,s+g,m):O.MACSTRING(e,s+g,m,v))){var _=r[p];void 0===_&&(_=r[p]={}),_[y]=c}}return 1===o&&i.parseUShort(),r},tt=function(e,t){var n,r=[],i={},o=Je(Ve);for(var a in e){var s=o[a];if(void 0===s&&(s=a),n=parseInt(s),isNaN(n))throw new Error('Name table entry "'+a+'" does not exist, see nameTableNames for complete list.');i[n]=e[a],r.push(n)}for(var l=Je(Ge),c=Je(We),u=[],h=[],d=0;d<r.length;d++){var f=i[n=r[d]];for(var p in f){var m=f[p],g=1,y=l[p],v=He[y],_=$e(g,v,y),b=I.MACSTRING(m,_);void 0===b&&(g=0,(y=t.indexOf(p))<0&&(y=t.length,t.push(p)),v=4,b=I.UTF16(m));var x=Qe(b,h);u.push(Ke(g,v,y,n,b.length,x));var w=c[p];if(void 0!==w){var S=I.UTF16(m),A=Qe(S,h);u.push(Ke(3,1,w,n,S.length,A))}}}u.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var E=new K.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+12*u.length}]),M=0;M<u.length;M++)E.fields.push({name:"record_"+M,type:"RECORD",value:u[M]});return E.fields.push({name:"strings",type:"LITERAL",value:h}),E},nt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],rt=function(e,t){var n={},r=new ae.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),1<=n.version&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),2<=n.version&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},it=function(e){for(var t=0;t<nt.length;t+=1){var n=nt[t];if(e>=n.begin&&e<n.end)return t}return-1},ot=function(e,t){var n={},r=new ae.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=he.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(var o=0;o<n.numberOfGlyphs;o++)if(n.glyphNameIndex[o]>=he.length){var a=r.parseChar();n.names.push(r.parseString(a))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},at=new Array(9);at[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ie.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ie.coverage),substitute:this.parseOffset16List()}:void D.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},at[2]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ie.coverage),sequences:this.parseListOfLists()}},at[3]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ie.coverage),alternateSets:this.parseListOfLists()}},at[4]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ie.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var st={sequenceIndex:ie.uShort,lookupListIndex:ie.uShort};at[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ie.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,st)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(ie.coverage),classDef:this.parsePointer(ie.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,st)}}))};if(3===t){var n=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,ie.pointer(ie.coverage)),lookupRecords:this.parseRecordList(r,st)}}D.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},at[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ie.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(st)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ie.coverage),backtrackClassDef:this.parsePointer(ie.classDef),inputClassDef:this.parsePointer(ie.classDef),lookaheadClassDef:this.parsePointer(ie.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(st)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ie.pointer(ie.coverage)),inputCoverage:this.parseList(ie.pointer(ie.coverage)),lookaheadCoverage:this.parseList(ie.pointer(ie.coverage)),lookupRecords:this.parseRecordList(st)}:void D.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},at[7]=function(){var e=this.parseUShort();D.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new ie(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:at[t].call(n)}},at[8]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ie.coverage),backtrackCoverage:this.parseList(ie.pointer(ie.coverage)),lookaheadCoverage:this.parseList(ie.pointer(ie.coverage)),substitutes:this.parseUShortList()}};var lt=new Array(9);lt[1]=function(e){return 1===e.substFormat?new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.ushortList("substitute",e.substitute)))},lt[3]=function(e){return D.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("altSet",e.alternateSets,(function(e){return new K.Table("alternateSetTable",K.ushortList("alternate",e))}))))},lt[4]=function(e){return D.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("ligSet",e.ligatureSets,(function(e){return new K.Table("ligatureSetTable",K.tableList("ligature",e,(function(e){return new K.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(K.ushortList("component",e.components,e.components.length+1)))})))}))))};var ct=function(e,t){var n=new ie(e,t=t||0),r=n.parseVersion(1);return D.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(at)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(at),variations:n.parseFeatureVariationsList()}},ut=function(e,t){var n=new ae.Parser(e,t),r=n.parseULong();D.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var i=n.parseULong(),o={},a=0;a<i;a++){var s=n.parseTag(),l=n.parseULong(),c=n.parseULong(),u=O.UTF8(e,t+l,c);o[s]=u}return o};function ht(e){return Math.log(e)/Math.log(2)|0}function dt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%Math.pow(2,32)}function ft(e,t,n,r){return new K.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function pt(e){var t=new K.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,ht(t.numTables));t.searchRange=16*n,t.entrySelector=ht(n),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],i=[],o=t.sizeOf()+ft().sizeOf()*t.numTables;o%4!=0;)o+=1,i.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<e.length;a+=1){var s=e[a];D.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var l=s.sizeOf(),c=ft(s.tableName,dt(s.encode()),o,l);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),i.push({name:s.tableName+" table",type:"RECORD",value:s}),o+=l,D.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function mt(e,t,n){for(var r=0;r<t.length;r+=1){var i=e.charToGlyphIndex(t[r]);if(0<i)return e.glyphs.get(i).getMetrics()}return n}var gt=function(e){for(var t,n=[],r=[],i=[],o=[],a=[],s=[],l=[],c=0,u=0,h=0,d=0,f=0,p=0;p<e.glyphs.length;p+=1){var m=e.glyphs.get(p),g=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+p+"): advanceWidth is not a number.");(g<t||void 0===t)&&0<g&&(t=g),c<g&&(c=g);var y=it(g);if(y<32)u|=1<<y;else if(y<64)h|=1<<y-32;else if(y<96)d|=1<<y-64;else{if(!(y<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");f|=1<<y-96}if(".notdef"!==m.name){var v=m.getMetrics();n.push(v.xMin),r.push(v.yMin),i.push(v.xMax),o.push(v.yMax),s.push(v.leftSideBearing),l.push(v.rightSideBearing),a.push(m.advanceWidth)}}var _={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};_.ascender=e.ascender,_.descender=e.descender;var b=function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new K.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}({flags:3,unitsPerEm:e.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),x=function(e){return new K.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:e.glyphs.length}),w=function(e){return new K.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}(e.glyphs.length),S=function(e){return new K.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}({xAvgCharWidth:Math.round(_.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:h,ulUnicodeRange3:d,ulUnicodeRange4:f,fsSelection:e.tables.os2.fsSelection,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:mt(e,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:mt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),A=function(e){for(var t=new K.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),i=r.advanceWidth||0,o=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}(e.glyphs),E=function(e){var t,n=!0;for(t=e.length-1;0<t;--t)if(65535<e.get(t).unicode){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var i,o,a,s=new K.Table("cmap",r);for(s.segments=[],t=0;t<e.length;t+=1){for(var l=e.get(t),c=0;c<l.unicodes.length;c+=1)i=s,o=l.unicodes[c],a=t,i.segments.push({end:o,start:o,delta:-(o-a),offset:0,glyphIndex:a});s.segments=s.segments.sort((function(e,t){return e.start-t.start}))}s.segments.push({end:65535,start:65535,delta:1,offset:0});var u=s.segments.length,h=0,d=[],f=[],p=[],m=[],g=[],y=[];for(t=0;t<u;t+=1){var v=s.segments[t];v.end<=65535&&v.start<=65535?(d=d.concat({name:"end_"+t,type:"USHORT",value:v.end}),f=f.concat({name:"start_"+t,type:"USHORT",value:v.start}),p=p.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),m=m.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(g=g.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):h+=1,n||void 0===v.glyphIndex||(y=(y=(y=y.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=2*(u-h),s.searchRange=2*Math.pow(2,Math.floor(Math.log(u-h)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(d),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(f),s.fields=s.fields.concat(p),s.fields=s.fields.concat(m),s.fields=s.fields.concat(g),s.cmap4Length=14+2*d.length+2+2*f.length+2*p.length+2*m.length+2*g.length,!n){var _=16+4*y.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:_},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:y.length/3}]),s.fields=s.fields.concat(y)}return s}(e.glyphs),M=e.getEnglishName("fontFamily"),C=e.getEnglishName("fontSubfamily"),T=M+" "+C,P=e.getEnglishName("postScriptName");P=P||M.replace(/\s/g,"")+"-"+C;var D={};for(var k in e.names)D[k]=e.names[k];D.uniqueID||(D.uniqueID={en:e.getEnglishName("manufacturer")+":"+T}),D.postScriptName||(D.postScriptName={en:P}),D.preferredFamily||(D.preferredFamily=e.names.fontFamily),D.preferredSubfamily||(D.preferredSubfamily=e.names.fontSubfamily);var O=[],I=tt(D,O),R=0<O.length?function(e){for(var t=new K.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,i=0;i<e.length;++i){var o=n.indexOf(e[i]);o<0&&(o=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t}(O):void 0,L=new K.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}]),B=function(e,t){for(var n,r=new K.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a=[],s=1;s<e.length;s+=1)n=e.get(s),a.push(n.name);var l=[];r.header=new K.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new K.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var c,u,h,d=Le(o,l);r.topDictIndex=Be(d),r.globalSubrIndex=new K.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new K.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var i=Ie(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:i})}return n}(a,l),r.charStringsIndex=function(e){for(var t=new K.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),i=ze(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}(e),r.privateDict=(c={},u=l,(h=new K.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Re(Pe,c,u),h),r.stringIndex=function(e){var t=new K.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(l);var f=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return o.charset=f,o.encoding=0,o.charStrings=o.charset+r.charsets.sizeOf(),o.private[1]=o.charStrings+r.charStringsIndex.sizeOf(),d=Le(o,l),r.topDictIndex=Be(d),r}(e.glyphs,{version:e.getEnglishName("version"),fullName:T,familyName:M,weightName:C,postScriptName:P,unitsPerEm:e.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),z=e.metas&&0<Object.keys(e.metas).length?function(e){var t=Object.keys(e).length,n="",r=16+12*t,i=new K.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var o in e){var a=n.length;n+=e[o],i.fields.push({name:"tag "+o,type:"TAG",value:o}),i.fields.push({name:"offset "+o,type:"ULONG",value:r+a}),i.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}(e.metas):void 0,F=[b,x,w,S,I,E,L,B,A];R&&F.push(R),e.tables.gsub&&F.push(function(e){return new K.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new K.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new K.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new K.LookupList(e.lookups,lt)}])}(e.tables.gsub)),z&&F.push(z);for(var N=pt(F),U=dt(N.encode()),j=N.fields,V=!1,G=0;G<j.length;G+=1)if("head table"===j[G].name){j[G].value.checkSumAdjustment=2981146554-U,V=!0;break}if(!V)throw new Error("Could not find head table with checkSum to adjust.");return N};function yt(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,o=e[i].tag;if(o===t)return i;o<t?n=1+i:r=i-1}return-n-1}function vt(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,o=e[i];if(o===t)return i;o<t?n=1+i:r=i-1}return-n-1}function _t(e,t){for(var n,r=0,i=e.length-1;r<=i;){var o=r+i>>>1,a=(n=e[o]).start;if(a===t)return n;a<t?r=1+o:i=o-1}if(0<r)return t>(n=e[r-1]).end?0:n}function bt(e,t){this.font=e,this.tableName=t}function xt(e){bt.call(this,e,"gpos")}function wt(e){bt.call(this,e,"gsub")}function St(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function At(e,t,n){for(var r=e.subtables,i=0;i<r.length;i++){var o=r[i];if(o.substFormat===t)return o}if(n)return r.push(n),n}function Et(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function Mt(e,t){if(!e)throw t}function Ct(e,t,n,r,i){var o;return 0<(t&r)?(o=e.parseByte(),0==(t&i)&&(o=-o),n+o):0<(t&i)?n:n+e.parseShort()}function Tt(e,t,n){var r,i,o=new ae.Parser(t,n);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),0<e.numberOfContours){for(var a=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)a.push(o.parseUShort());e.instructionLength=o.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(o.parseByte());var c=a[a.length-1]+1;r=[];for(var u=0;u<c;u+=1)if(i=o.parseByte(),r.push(i),0<(8&i))for(var h=o.parseByte(),d=0;d<h;d+=1)r.push(i),u+=1;if(D.argument(r.length===c,"Bad flags."),0<a.length){var f,p=[];if(0<c){for(var m=0;m<c;m+=1)i=r[m],(f={}).onCurve=!!(1&i),f.lastPointOfContour=0<=a.indexOf(m),p.push(f);for(var g=0,y=0;y<c;y+=1)i=r[y],(f=p[y]).x=Ct(o,i,g,2,16),g=f.x;for(var v=0,_=0;_<c;_+=1)i=r[_],(f=p[_]).y=Ct(o,i,v,4,32),v=f.y}e.points=p}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var b=!0;b;){r=o.parseUShort();var x={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&r)?0<(2&r)?(x.dx=o.parseShort(),x.dy=o.parseShort()):x.matchedPoints=[o.parseUShort(),o.parseUShort()]:0<(2&r)?(x.dx=o.parseChar(),x.dy=o.parseChar()):x.matchedPoints=[o.parseByte(),o.parseByte()],0<(8&r)?x.xScale=x.yScale=o.parseF2Dot14():0<(64&r)?(x.xScale=o.parseF2Dot14(),x.yScale=o.parseF2Dot14()):0<(128&r)&&(x.xScale=o.parseF2Dot14(),x.scale01=o.parseF2Dot14(),x.scale10=o.parseF2Dot14(),x.yScale=o.parseF2Dot14()),e.components.push(x),b=!!(32&r)}if(256&r){e.instructionLength=o.parseUShort(),e.instructions=[];for(var w=0;w<e.instructionLength;w+=1)e.instructions.push(o.parseByte())}}}function Pt(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],o={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(o)}return n}function Dt(e){var t=new C;if(!e)return t;for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return D.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var i=n[r],o=null,a=i[i.length-1],s=i[0];if(a.onCurve)t.moveTo(a.x,a.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var l={x:.5*(a.x+s.x),y:.5*(a.y+s.y)};t.moveTo(l.x,l.y)}for(var c=0;c<i.length;++c)if(o=a,a=s,s=i[(c+1)%i.length],a.onCurve)t.lineTo(a.x,a.y);else{var u=s;o.onCurve||(a.x,o.x,a.y,o.y),s.onCurve||(u={x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),t.quadraticCurveTo(a.x,a.y,u.x,u.y)}t.closePath()}return t}function kt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){var o=void 0;if(void 0===r.matchedPoints)o=Pt(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var a=t.points[r.matchedPoints[0]],s=i.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};s=Pt([s],l)[0],l.dx=a.x-s.x,l.dy=a.y-s.y,o=Pt(i.points,l)}t.points=t.points.concat(o)}}return Dt(t.points)}(xt.prototype=bt.prototype={searchTag:yt,binSearch:vt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var r=n.scripts,i=yt(n.scripts,e);if(0<=i)return r[i].script;if(t){var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,o),o.script}}},getLangSysTable:function(e,t,n){var r=this.getScriptTable(e,n);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var i=yt(r.langSysRecords,t);if(0<=i)return r.langSysRecords[i].langSys;if(n){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,o),o.langSys}}},getFeatureTable:function(e,t,n,r){var i=this.getLangSysTable(e,t,r);if(i){for(var o,a=i.featureIndexes,s=this.font.tables[this.tableName].features,l=0;l<a.length;l++)if((o=s[a[l]]).tag===n)return o.feature;if(r){var c=s.length;return D.assert(0===c||n>=s[c-1].tag,"Features must be added in alphabetical order."),o={tag:n,feature:{params:0,lookupListIndexes:[]}},s.push(o),a.push(c),o.feature}}},getLookupTables:function(e,t,n,r,i){var o=this.getFeatureTable(e,t,n,i),a=[];if(o){for(var s,l=o.lookupListIndexes,c=this.font.tables[this.tableName].lookups,u=0;u<l.length;u++)(s=c[l[u]]).lookupType===r&&a.push(s);if(0===a.length&&i){s={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=c.length;return c.push(s),l.push(h),[s]}}return a},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=_t(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=vt(e.glyphs,t);return 0<=n?n:-1;case 2:var r=_t(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var i=n[r],o=i.start,a=i.end,s=o;s<=a;s++)t.push(s);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},xt.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r].subtables,o=0;o<i.length;o++){var a=i[o],s=this.getCoverageIndex(a.coverage,t);if(!(s<0))switch(a.posFormat){case 1:for(var l=a.pairSets[s],c=0;c<l.length;c++){var u=l[c];if(u.secondGlyph===n)return u.value1&&u.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(a.classDef1,t),d=this.getGlyphClass(a.classDef2,n),f=a.classRecords[h][d];return f.value1&&f.value1.xAdvance||0}}return 0},xt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(wt.prototype=bt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},wt.prototype.getSingle=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,1),o=0;o<i.length;o++)for(var a=i[o].subtables,s=0;s<a.length;s++){var l=a[s],c=this.expandCoverage(l.coverage),u=void 0;if(1===l.substFormat){var h=l.deltaGlyphId;for(u=0;u<c.length;u++){var d=c[u];r.push({sub:d,by:d+h})}}else{var f=l.substitute;for(u=0;u<c.length;u++)r.push({sub:c[u],by:f[u]})}}return r},wt.prototype.getAlternates=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,3),o=0;o<i.length;o++)for(var a=i[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.alternateSets,h=0;h<c.length;h++)r.push({sub:c[h],by:u[h]});return r},wt.prototype.getLigatures=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,4),o=0;o<i.length;o++)for(var a=i[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.ligatureSets,h=0;h<c.length;h++)for(var d=c[h],f=u[h],p=0;p<f.length;p++){var m=f[p];r.push({sub:[d].concat(m.components),by:m.ligGlyph})}return r},wt.prototype.addSingle=function(e,t,n,r){var i=At(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});D.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);var o=t.sub,a=this.binSearch(i.coverage.glyphs,o);a<0&&(a=-1-a,i.coverage.glyphs.splice(a,0,o),i.substitute.splice(a,0,0)),i.substitute[a]=t.by},wt.prototype.addAlternate=function(e,t,n,r){var i=At(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});D.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);var o=t.sub,a=this.binSearch(i.coverage.glyphs,o);a<0&&(a=-1-a,i.coverage.glyphs.splice(a,0,o),i.alternateSets.splice(a,0,0)),i.alternateSets[a]=t.by},wt.prototype.addLigature=function(e,t,n,r){var i=this.getLookupTables(n,r,e,4,!0)[0],o=i.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=o),D.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var a=t.sub[0],s=t.sub.slice(1),l={ligGlyph:t.by,components:s},c=this.binSearch(o.coverage.glyphs,a);if(0<=c){for(var u=o.ligatureSets[c],h=0;h<u.length;h++)if(St(u[h].components,s))return;u.push(l)}else c=-1-c,o.coverage.glyphs.splice(c,0,a),o.ligatureSets.splice(c,0,[l])},wt.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},wt.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};var Ot,It,Rt,Lt,Bt={getPath:Dt,parse:function(e,t,n,r){for(var i=new be.GlyphSet(r),o=0;o<n.length-1;o+=1){var a=n[o];a!==n[o+1]?i.push(o,be.ttfGlyphLoader(r,o,Tt,e,t+a,kt)):i.push(o,be.glyphLoader(r,o))}return i}};function zt(e){this.font=e,this.getCommands=function(e){return Bt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ft(e){return e}function Nt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Ut(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function jt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Vt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Gt(e){return Math.sign(e)*Math.floor(Math.abs(e))}function Ht(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r}var Wt={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var i,o,a,s,l,c,u;if(!r||r===this)return i=e.xo-t.xo,o=e.xo-n.xo,l=t.x-t.xo,c=n.x-n.xo,0===(u=(a=Math.abs(i))+(s=Math.abs(o)))?void(e.x=e.xo+(l+c)/2):void(e.x=e.xo+(l*s+c*a)/u);i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0!==(u=(a=Math.abs(i))+(s=Math.abs(o)))?Wt.setRelative(e,e,(l*s+c*a)/u,r,!0):Wt.setRelative(e,e,(l+c)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){if(r&&r!==this){var o=i?t.xo:t.x,a=i?t.yo:t.y,s=o+n*r.x,l=a+n*r.y;e.x=s+(e.y-l)/r.normalSlope}else e.x=(i?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},qt={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var i,o,a,s,l,c,u;if(!r||r===this)return i=e.yo-t.yo,o=e.yo-n.yo,l=t.y-t.yo,c=n.y-n.yo,0===(u=(a=Math.abs(i))+(s=Math.abs(o)))?void(e.y=e.yo+(l+c)/2):void(e.y=e.yo+(l*s+c*a)/u);i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0!==(u=(a=Math.abs(i))+(s=Math.abs(o)))?qt.setRelative(e,e,(l*s+c*a)/u,r,!0):qt.setRelative(e,e,(l+c)/2,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){if(r&&r!==this){var o=i?t.xo:t.x,a=i?t.yo:t.y,s=o+n*r.x,l=a+n*r.y;e.y=l+r.normalSlope*(e.x-s)}else e.y=(i?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Zt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Xt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1==(e/=n)&&0===t?Wt:0===e&&1===t?qt:new Zt(e,t)}function Yt(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Wt),Object.freeze(qt),Zt.prototype.distance=function(e,t,n,r){return this.x*Wt.distance(e,t,n,r)+this.y*qt.distance(e,t,n,r)},Zt.prototype.interpolate=function(e,t,n,r){var i,o,a,s,l,c,u;a=r.distance(e,t,!0,!0),s=r.distance(e,n,!0,!0),i=r.distance(t,t,!1,!0),o=r.distance(n,n,!1,!0),0!==(u=(l=Math.abs(a))+(c=Math.abs(s)))?this.setRelative(e,e,(i*c+o*l)/u,r,!0):this.setRelative(e,e,(i+o)/2,r,!0)},Zt.prototype.setRelative=function(e,t,n,r,i){r=r||this;var o=i?t.xo:t.x,a=i?t.yo:t.y,s=o+n*r.x,l=a+n*r.y,c=r.normalSlope,u=this.slope,h=e.x,d=e.y;e.x=(u*h-c*s+l-d)/(u-c),e.y=u*(e.x-h)+d},Zt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Yt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Yt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var $t=Object.freeze(new Yt(0,0)),Jt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Kt(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Wt,this.round=Nt}}function Qt(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new Yt(0,0)}function en(e,t){var n,r=e.prog,i=e.ip,o=1;do{if(88===(n=r[++i]))o++;else if(89===n)o--;else if(64===n)i+=r[i+1]+1;else if(65===n)i+=2*r[i+1]+1;else if(176<=n&&n<=183)i+=n-176+1;else if(184<=n&&n<=191)i+=2*(n-184+1);else if(t&&1===o&&27===n)break}while(0<o);e.ip=i}function tn(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function nn(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function rn(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function on(e,n){var r,i,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log("SPVTL["+e+"]",a,s),i=e?(r=l.y-c.y,c.x-l.x):(r=c.x-l.x,c.y-l.y),n.pv=n.dpv=Xt(r,i)}function an(e,n){var r,i,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log("SFVTL["+e+"]",a,s),i=e?(r=l.y-c.y,c.x-l.x):(r=c.x-l.x,c.y-l.y),n.fv=Xt(r,i)}function sn(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function ln(e,n){var r=n.stack.pop(),i=n.z0[r],o=n.fv,a=n.pv;t.DEBUG&&console.log(n.step,"MDAP["+e+"]",r);var s=a.distance(i,$t);e&&(s=n.round(s)),o.setRelative(i,$t,s,a),o.touch(i),n.rp0=n.rp1=r}function cn(e,n){var r,i,o,a=n.z2,s=a.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var l=0;l<s;l++)r=a[l],e.touched(r)||(i=r.prevTouched(e))!==r&&(i===(o=r.nextTouched(e))&&e.setRelative(r,r,e.distance(i,i,!1,!0),e,!0),e.interpolate(r,i,o,e))}function un(e,n){for(var r=n.stack,i=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[i],a=n.fv,s=n.pv,l=n.loop,c=n.z2;l--;){var u=r.pop(),h=c[u],d=s.distance(o,o,!1,!0);a.setRelative(h,h,d,s),a.touch(h),t.DEBUG&&console.log(n.step,(1<n.loop?"loop "+(n.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u)}n.loop=1}function hn(e,n){var r=n.stack,i=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[i],a=n.fv,s=n.pv,l=r.pop(),c=n.z2[n.contours[l]],u=c;t.DEBUG&&console.log(n.step,"SHC["+e+"]",l);for(var h=s.distance(o,o,!1,!0);u!==o&&a.setRelative(u,u,h,s),(u=u.nextPointOnContour)!==c;);}function dn(e,n){var r,i,o=n.stack,a=e?n.rp1:n.rp2,s=(e?n.z0:n.z1)[a],l=n.fv,c=n.pv,u=o.pop();switch(t.DEBUG&&console.log(n.step,"SHZ["+e+"]",u),u){case 0:r=n.tZone;break;case 1:r=n.gZone;break;default:throw new Error("Invalid zone")}for(var h=c.distance(s,s,!1,!0),d=r.length-2,f=0;f<d;f++)i=r[f],l.setRelative(i,i,h,c)}function fn(e,n){var r=n.stack,i=r.pop()/64,o=r.pop(),a=n.z1[o],s=n.z0[n.rp0],l=n.fv,c=n.pv;l.setRelative(a,s,i,c),l.touch(a),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",i,o),n.rp1=n.rp0,n.rp2=o,e&&(n.rp0=o)}function pn(e,n){var r=n.stack,i=r.pop(),o=r.pop(),a=n.z0[o],s=n.fv,l=n.pv,c=n.cvt[i];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",i,"(",c,")",o);var u=l.distance(a,$t);e&&(Math.abs(u-c)<n.cvCutIn&&(u=c),u=n.round(u)),s.setRelative(a,$t,u,l),0===n.zp0&&(a.xo=a.x,a.yo=a.y),s.touch(a),n.rp0=n.rp1=o}function mn(e,n){var r=n.stack,i=r.pop(),o=n.z2[i];t.DEBUG&&console.log(n.step,"GC["+e+"]",i),r.push(64*n.dpv.distance(o,$t,e,!1))}function gn(e,n){var r=n.stack,i=r.pop(),o=r.pop(),a=n.z1[i],s=n.z0[o],l=n.dpv.distance(s,a,e,e);t.DEBUG&&console.log(n.step,"MD["+e+"]",i,o,"->",l),n.stack.push(Math.round(64*l))}function yn(e,n){var r=n.stack,i=r.pop(),o=n.fv,a=n.pv,s=n.ppem,l=n.deltaBase+16*(e-1),c=n.deltaShift,u=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",i,r);for(var h=0;h<i;h++){var d=r.pop(),f=r.pop();if(l+((240&f)>>4)===s){var p=(15&f)-8;0<=p&&p++,t.DEBUG&&console.log(n.step,"DELTAPFIX",d,"by",p*c);var m=u[d];o.setRelative(m,m,p*c,a)}}}function vn(e,n){var r=n.stack,i=r.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),r.push(64*n.round(i/64))}function _n(e,n){var r=n.stack,i=r.pop(),o=n.ppem,a=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",i,r);for(var l=0;l<i;l++){var c=r.pop(),u=r.pop();if(a+((240&u)>>4)===o){var h=(15&u)-8;0<=h&&h++;var d=h*s;t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",d),n.cvt[c]+=d}}}function bn(e,n){var r,i,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",a,s),i=e?(r=l.y-c.y,c.x-l.x):(r=c.x-l.x,c.y-l.y),n.dpv=Xt(r,i)}function xn(e,n){var r=n.stack,i=n.prog,o=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)r.push(i[++o]);n.ip=o}function wn(e,n){var r=n.ip,i=n.prog,o=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var s=i[++r]<<8|i[++r];32768&s&&(s=-(1+(65535^s))),o.push(s)}n.ip=r}function Sn(e,n,r,i,o,a){var s,l,c,u,h=a.stack,d=e&&h.pop(),f=h.pop(),p=a.rp0,m=a.z0[p],g=a.z1[f],y=a.minDis,v=a.fv,_=a.dpv;c=0<=(l=s=_.distance(g,m,!0,!0))?1:-1,l=Math.abs(l),e&&(u=a.cvt[d],i&&Math.abs(l-u)<a.cvCutIn&&(l=u)),r&&l<y&&(l=y),i&&(l=a.round(l)),v.setRelative(g,m,c*l,_),v.touch(g),t.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(r?">":"_")+(i?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",e?d+"("+a.cvt[d]+","+u+")":"",f,"(d =",s,"->",c*l,")"),a.rp1=a.rp0,a.rp2=f,n&&(a.rp0=f)}zt.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,i=this._prepState;if(!i||i.ppem!==n){var o=this._fpgmState;if(!o){Kt.prototype=Jt,(o=this._fpgmState=new Kt("fpgm",r.tables.fpgm)).funcs=[],o.font=r,t.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{It(o)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}Kt.prototype=o,(i=this._prepState=new Kt("prep",r.tables.prep)).ppem=n;var a=r.tables.cvt;if(a)for(var s=i.cvt=new Array(a.length),l=n/r.unitsPerEm,c=0;c<a.length;c++)s[c]=a[c]*l;else i.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{It(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return Rt(e,i)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Rt=function(e,n){var r,i,o,a=n.ppem/n.font.unitsPerEm,s=a,l=e.components;if(Kt.prototype=n,l){var c=n.font;i=[],r=[];for(var u=0;u<l.length;u++){var h=l[u],d=c.glyphs.get(h.glyphIndex);o=new Kt("glyf",d.instructions),t.DEBUG&&(console.log("---EXEC COMP "+u+"---"),o.step=-1),Lt(d,o,a,s);for(var f=Math.round(h.dx*a),p=Math.round(h.dy*s),m=o.gZone,g=o.contours,y=0;y<m.length;y++){var v=m[y];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+f,v.yo=v.y=v.y+p}var _=i.length;i.push.apply(i,m);for(var b=0;b<g.length;b++)r.push(g[b]+_)}e.instructions&&!o.inhibitGridFit&&((o=new Kt("glyf",e.instructions)).gZone=o.z0=o.z1=o.z2=i,o.contours=r,i.push(new Yt(0,0),new Yt(Math.round(e.advanceWidth*a),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),o.step=-1),It(o),i.length-=2)}else o=new Kt("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),o.step=-1),Lt(e,o,a,s),i=o.gZone;return i},Lt=function(e,n,r,i){for(var o,a,s,l=e.points||[],c=l.length,u=n.gZone=n.z0=n.z1=n.z2=[],h=n.contours=[],d=0;d<c;d++)o=l[d],u[d]=new Yt(o.x*r,o.y*i,o.lastPointOfContour,o.onCurve);for(var f=0;f<c;f++)o=u[f],a||(a=o,h.push(f)),o.lastPointOfContour?((o.nextPointOnContour=a).prevPointOnContour=o,a=void 0):(s=u[f+1],(o.nextPointOnContour=s).prevPointOnContour=o);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var p=0;p<c;p++)console.log(p,u[p].x,u[p].y)}if(u.push(new Yt(0,0),new Yt(Math.round(e.advanceWidth*r),0)),It(n),u.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var m=0;m<c;m++)console.log(m,u[m].x,u[m].y)}}},It=function(e){var n=e.prog;if(n){var r,i=n.length;for(e.ip=0;e.ip<i;e.ip++){if(t.DEBUG&&e.step++,!(r=Ot[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));r(e)}}},Ot=[tn.bind(void 0,qt),tn.bind(void 0,Wt),nn.bind(void 0,qt),nn.bind(void 0,Wt),rn.bind(void 0,qt),rn.bind(void 0,Wt),on.bind(void 0,0),on.bind(void 0,1),an.bind(void 0,0),an.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.pv=e.dpv=Xt(i,r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.fv=Xt(i,r)},function(e){var n=e.stack,r=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){var n=e.stack,r=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=e.stack,r=n.pop(),i=n.pop(),o=n.pop(),a=n.pop(),s=n.pop(),l=e.z0,c=e.z1,u=l[r],h=l[i],d=c[o],f=c[a],p=e.z2[s];t.DEBUG&&console.log("ISECT[], ",r,i,o,a,s);var m=u.x,g=u.y,y=h.x,v=h.y,_=d.x,b=d.y,x=f.x,w=f.y,S=(m-y)*(b-w)-(g-v)*(_-x),A=m*v-g*y,E=_*w-b*x;p.x=(A*(_-x)-E*(m-y))/S,p.y=(A*(b-w)-E*(g-v))/S},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n){case 0:e.tZone||Qt(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n){case 0:e.tZone||Qt(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n){case 0:e.tZone||Qt(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n,n){case 0:e.tZone||Qt(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Nt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=jt},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),en(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},sn,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(r),n.push(i)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",r),n.push(n[n.length-r])},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",r),n.push(n.splice(n.length-r,1)[0])},void 0,void 0,void 0,function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",r,i);var o=e.ip,a=e.prog;e.prog=e.funcs[r];for(var s=0;s<i;s++)It(e),t.DEBUG&&console.log(++e.step,s+1<i?"next loopcall":"done loopcall",s);e.ip=o,e.prog=a},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",n);var r=e.ip,i=e.prog;e.prog=e.funcs[n],It(e),e.ip=r,e.prog=i,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,r=e.prog,i=e.ip,o=n.pop(),a=i;for(t.DEBUG&&console.log(e.step,"FDEF[]",o);45!==r[++i];);e.ip=i,e.funcs[o]=r.slice(a+1,i)},void 0,ln.bind(void 0,0),ln.bind(void 0,1),cn.bind(void 0,qt),cn.bind(void 0,Wt),un.bind(void 0,0),un.bind(void 0,1),hn.bind(void 0,0),hn.bind(void 0,1),dn.bind(void 0,0),dn.bind(void 0,1),function(e){for(var n=e.stack,r=e.loop,i=e.fv,o=n.pop()/64,a=e.z2;r--;){var s=n.pop(),l=a[s];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,o),i.setRelative(l,l,o),i.touch(l)}e.loop=1},function(e){for(var n=e.stack,r=e.rp1,i=e.rp2,o=e.loop,a=e.z0[r],s=e.z1[i],l=e.fv,c=e.dpv,u=e.z2;o--;){var h=n.pop(),d=u[h];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-o)+": ":"")+"IP[]",h,r,"<->",i),l.interpolate(d,a,s,c),l.touch(d)}e.loop=1},fn.bind(void 0,0),fn.bind(void 0,1),function(e){for(var n=e.stack,r=e.rp0,i=e.z0[r],o=e.loop,a=e.fv,s=e.pv,l=e.z1;o--;){var c=n.pop(),u=l[c];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-o)+": ":"")+"ALIGNRP[]",c),a.setRelative(u,i,0,s),a.touch(u)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Ut},pn.bind(void 0,0),pn.bind(void 0,1),function(e){var n=e.prog,r=e.ip,i=e.stack,o=n[++r];t.DEBUG&&console.log(e.step,"NPUSHB[]",o);for(var a=0;a<o;a++)i.push(n[++r]);e.ip=r},function(e){var n=e.ip,r=e.prog,i=e.stack,o=r[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",o);for(var a=0;a<o;a++){var s=r[++n]<<8|r[++n];32768&s&&(s=-(1+(65535^s))),i.push(s)}e.ip=n},function(e){var n=e.stack,r=e.store;r=r||(e.store=[]);var i=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"WS",i,o),r[o]=i},function(e){var n=e.stack,r=e.store,i=n.pop();t.DEBUG&&console.log(e.step,"RS",i);var o=r&&r[i]||0;n.push(o)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"WCVTP",r,i),e.cvt[i]=r/64},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"RCVT",r),n.push(64*e.cvt[r])},mn.bind(void 0,0),mn.bind(void 0,1),void 0,gn.bind(void 0,0),gn.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"LT[]",r,i),n.push(i<r?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",r,i),n.push(i<=r?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"GT[]",r,i),n.push(r<i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",r,i),n.push(r<=i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",r,i),n.push(r===i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",r,i),n.push(r!==i?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",r),n.push(Math.trunc(r)%2?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",r),n.push(Math.trunc(r)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(en(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"AND[]",r,i),n.push(r&&i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"OR[]",r,i),n.push(r||i?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",r),n.push(r?0:1)},yn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",r,i),n.push(i+r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",r,i),n.push(i-r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",r,i),n.push(64*i/r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",r,i),n.push(i*r/64)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",r),n.push(Math.abs(r))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",r),n.push(-r)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",r),n.push(64*Math.floor(r/64))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",r),n.push(64*Math.ceil(r/64))},vn.bind(void 0,0),vn.bind(void 0,1),vn.bind(void 0,2),vn.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",r,i),e.cvt[i]=r*e.ppem/e.font.unitsPerEm},yn.bind(void 0,2),yn.bind(void 0,3),_n.bind(void 0,1),_n.bind(void 0,2),_n.bind(void 0,3),function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Ht,192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Ht,192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ft},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Vt},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Gt},sn,sn,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},bn.bind(void 0,0),bn.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),i=0;t.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(i=35),32&r&&(i|=4096),n.push(i)},void 0,function(e){var n=e.stack,r=n.pop(),i=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(i),n.push(r),n.push(o)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",r,i),n.push(Math.max(i,r))},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",r,i),n.push(Math.min(i,r))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,r),n){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,xn.bind(void 0,1),xn.bind(void 0,2),xn.bind(void 0,3),xn.bind(void 0,4),xn.bind(void 0,5),xn.bind(void 0,6),xn.bind(void 0,7),xn.bind(void 0,8),wn.bind(void 0,1),wn.bind(void 0,2),wn.bind(void 0,3),wn.bind(void 0,4),wn.bind(void 0,5),wn.bind(void 0,6),wn.bind(void 0,7),wn.bind(void 0,8),Sn.bind(void 0,0,0,0,0,0),Sn.bind(void 0,0,0,0,0,1),Sn.bind(void 0,0,0,0,0,2),Sn.bind(void 0,0,0,0,0,3),Sn.bind(void 0,0,0,0,1,0),Sn.bind(void 0,0,0,0,1,1),Sn.bind(void 0,0,0,0,1,2),Sn.bind(void 0,0,0,0,1,3),Sn.bind(void 0,0,0,1,0,0),Sn.bind(void 0,0,0,1,0,1),Sn.bind(void 0,0,0,1,0,2),Sn.bind(void 0,0,0,1,0,3),Sn.bind(void 0,0,0,1,1,0),Sn.bind(void 0,0,0,1,1,1),Sn.bind(void 0,0,0,1,1,2),Sn.bind(void 0,0,0,1,1,3),Sn.bind(void 0,0,1,0,0,0),Sn.bind(void 0,0,1,0,0,1),Sn.bind(void 0,0,1,0,0,2),Sn.bind(void 0,0,1,0,0,3),Sn.bind(void 0,0,1,0,1,0),Sn.bind(void 0,0,1,0,1,1),Sn.bind(void 0,0,1,0,1,2),Sn.bind(void 0,0,1,0,1,3),Sn.bind(void 0,0,1,1,0,0),Sn.bind(void 0,0,1,1,0,1),Sn.bind(void 0,0,1,1,0,2),Sn.bind(void 0,0,1,1,0,3),Sn.bind(void 0,0,1,1,1,0),Sn.bind(void 0,0,1,1,1,1),Sn.bind(void 0,0,1,1,1,2),Sn.bind(void 0,0,1,1,1,3),Sn.bind(void 0,1,0,0,0,0),Sn.bind(void 0,1,0,0,0,1),Sn.bind(void 0,1,0,0,0,2),Sn.bind(void 0,1,0,0,0,3),Sn.bind(void 0,1,0,0,1,0),Sn.bind(void 0,1,0,0,1,1),Sn.bind(void 0,1,0,0,1,2),Sn.bind(void 0,1,0,0,1,3),Sn.bind(void 0,1,0,1,0,0),Sn.bind(void 0,1,0,1,0,1),Sn.bind(void 0,1,0,1,0,2),Sn.bind(void 0,1,0,1,0,3),Sn.bind(void 0,1,0,1,1,0),Sn.bind(void 0,1,0,1,1,1),Sn.bind(void 0,1,0,1,1,2),Sn.bind(void 0,1,0,1,1,3),Sn.bind(void 0,1,1,0,0,0),Sn.bind(void 0,1,1,0,0,1),Sn.bind(void 0,1,1,0,0,2),Sn.bind(void 0,1,1,0,0,3),Sn.bind(void 0,1,1,0,1,0),Sn.bind(void 0,1,1,0,1,1),Sn.bind(void 0,1,1,0,1,2),Sn.bind(void 0,1,1,0,1,3),Sn.bind(void 0,1,1,1,0,0),Sn.bind(void 0,1,1,1,0,1),Sn.bind(void 0,1,1,1,0,2),Sn.bind(void 0,1,1,1,0,3),Sn.bind(void 0,1,1,1,1,0),Sn.bind(void 0,1,1,1,1,1),Sn.bind(void 0,1,1,1,1,2),Sn.bind(void 0,1,1,1,1,3)];var An=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function En(e){(e=e||{}).empty||(Mt(e.familyName,"When creating a new Font object, familyName is required."),Mt(e.styleName,"When creating a new Font object, styleName is required."),Mt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Mt(e.ascender,"When creating a new Font object, ascender is required."),Mt(e.descender,"When creating a new Font object, descender is required."),Mt(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new be.GlyphSet(this,e.glyphs||[]),this.encoding=new de(this),this.position=new xt(this),this.substitution=new wt(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new zt(this):void 0}})}function Mn(e,t,n,r){var i={},o=new ae.Parser(e,t);i.name=r[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(var a=0;a<n.length;++a)i.coordinates[n[a].tag]=o.parseFixed();return i}En.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},En.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},En.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e);return this.glyphs.get(t)||this.glyphs.get(0)},En.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=An(e),r=[],i=0;i<n.length;i+=1){var o=n[i];r.push(this.charToGlyphIndex(o))}var a=r.length;if(t.features){var s=t.script||this.substitution.getDefaultScriptName(),l=[];t.features.liga&&(l=l.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",s,t.language)));for(var c=0;c<a;c+=1)for(var u=0;u<l.length;u++){for(var h=l[u],d=h.sub,f=d.length,p=0;p<f&&d[p]===r[c+p];)p++;p===f&&(r.splice(c,f,h.by),a=a-f+1)}}for(var m=new Array(a),g=this.glyphs.get(0),y=0;y<a;y+=1)m[y]=this.glyphs.get(r[y])||g;return m},En.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},En.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e);return this.glyphs.get(t)||this.glyphs.get(0)},En.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},En.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},En.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},En.prototype.forEachGlyph=function(e,t,n,r,i,o){t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:72,i=i||this.defaultRenderOptions;var a,s=1/this.unitsPerEm*r,l=this.stringToGlyphs(e,i);if(i.kerning){var c=i.script||this.position.getDefaultScriptName();a=this.position.getKerningTables(c,i.language)}for(var u=0;u<l.length;u+=1){var h=l[u];o.call(this,h,t,n,r,i),h.advanceWidth&&(t+=h.advanceWidth*s),i.kerning&&u<l.length-1&&(t+=(a?this.position.getKerningValue(a,h.index,l[u+1].index):this.getKerningValue(h,l[u+1]))*s),i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t},En.prototype.getPath=function(e,t,n,r,i){var o=new C;return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var a=e.getPath(t,n,r,i,this);o.extend(a)})),o},En.prototype.getPaths=function(e,t,n,r,i){var o=[];return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var a=e.getPath(t,n,r,i,this);o.push(a)})),o},En.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},En.prototype.draw=function(e,t,n,r,i,o){this.getPath(t,n,r,i,o).draw(e)},En.prototype.drawPoints=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,(function(t,n,r,i){t.drawPoints(e,n,r,i)}))},En.prototype.drawMetrics=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,(function(t,n,r,i){t.drawMetrics(e,n,r,i)}))},En.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},En.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},En.prototype.toTables=function(){return gt(this)},En.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},En.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},En.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),i=this.getEnglishName("fontSubfamily");t=t||n.replace(/\s/g,"")+"-"+i+".otf";var o=this.toArrayBuffer();if("undefined"!=typeof window)window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,o.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(o),r=new Blob([n],{type:"font/opentype"});t.write(r),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}));else{var a=e("fs"),s=function(e){for(var t=new r(e.byteLength),n=new Uint8Array(e),i=0;i<t.length;++i)t[i]=n[i];return t}(o);a.writeFileSync(t,s)}},En.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},En.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},En.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Cn=function(e,t,n){var r=new ae.Parser(e,t),i=r.parseULong();D.argument(65536===i,"Unsupported fvar table version.");var o=r.parseOffset16();r.skip("uShort",1);for(var a,s,l,c,u,h=r.parseUShort(),d=r.parseUShort(),f=r.parseUShort(),p=r.parseUShort(),m=[],g=0;g<h;g++)m.push((a=e,s=t+o+g*d,l=n,u=c=void 0,c={},u=new ae.Parser(a,s),c.tag=u.parseTag(),c.minValue=u.parseFixed(),c.defaultValue=u.parseFixed(),c.maxValue=u.parseFixed(),u.skip("uShort",1),c.name=l[u.parseUShort()]||{},c));for(var y=[],v=t+o+h*d,_=0;_<f;_++)y.push(Mn(e,v+_*p,m,n));return{axes:m,instances:y}},Tn=new Array(10);Tn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ie.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ie.coverage),values:this.parseValueRecordList()}:void D.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Tn[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();D.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(ie.coverage),r=this.parseUShort(),i=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:i,pairSets:this.parseList(ie.pointer(ie.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(i)}}))))};if(2===t){var o=this.parsePointer(ie.classDef),a=this.parsePointer(ie.classDef),s=this.parseUShort(),l=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:i,classDef1:o,classDef2:a,class1Count:s,class2Count:l,classRecords:this.parseList(s,ie.list(l,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(i)}})))}}},Tn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Tn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Tn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Tn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Tn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Tn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Tn[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);var Pn=function(e,t){var n=new ie(e,t=t||0),r=n.parseVersion(1);return D.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Tn)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Tn),variations:n.parseFeatureVariationsList()}},Dn=function(e,t){var n=new ae.Parser(e,t),r=n.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();D.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var o=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[o+","+a]=s}return t}(n);if(1===r)return function(e){var t={};e.skip("uShort"),1<e.parseULong()&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0==n){var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var o=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[o+","+a]=s}}return t}(n);throw new Error("Unsupported kern table version ("+r+").")};function kn(t,n){e("fs").readFile(t,(function(e,t){if(e)return n(e.message);n(null,Et(t))}))}function On(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function In(e,t){for(var n=[],r=12,i=0;i<t;i+=1){var o=ae.getTag(e,r),a=ae.getULong(e,r+4),s=ae.getULong(e,r+8),l=ae.getULong(e,r+12);n.push({tag:o,checksum:a,offset:s,length:l,compression:!1}),r+=16}return n}function Rn(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(function(e,t){var n,r,i=new a(e,t);do{switch(n=_(i),b(i,2,0)){case 0:r=A(i);break;case 1:r=S(i,s,l);break;case 2:w(i,i.ltree,i.dtree),r=S(i,i.ltree,i.dtree);break;default:r=-3}if(0!==r)throw new Error("Data error")}while(!n);i.destLen<i.dest.length?"function"==typeof i.dest.slice?i.dest.slice(0,i.destLen):i.dest.subarray(0,i.destLen):i.dest}(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}function Ln(e){var t,n,r,i,o,a,s,l,c,u,h,d,f,p,m=new En({empty:!0}),g=new DataView(e,0),y=[],v=ae.getTag(g,0);if(v===String.fromCharCode(0,1,0,0)||"true"===v||"typ1"===v)m.outlinesFormat="truetype",y=In(g,r=ae.getUShort(g,4));else if("OTTO"===v)m.outlinesFormat="cff",y=In(g,r=ae.getUShort(g,4));else{if("wOFF"!==v)throw new Error("Unsupported OpenType signature "+v);var _=ae.getTag(g,4);if(_===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==_)throw new Error("Unsupported OpenType flavor "+v);m.outlinesFormat="cff"}y=function(e,t){for(var n=[],r=44,i=0;i<t;i+=1){var o,a=ae.getTag(e,r),s=ae.getULong(e,r+4),l=ae.getULong(e,r+8),c=ae.getULong(e,r+12);o=l<c&&"WOFF",n.push({tag:a,offset:s,compression:o,compressedLength:l,length:c}),r+=20}return n}(g,r=ae.getUShort(g,12))}for(var b=0;b<r;b+=1){var x=y[b],w=void 0;switch(x.tag){case"cmap":w=Rn(g,x),m.tables.cmap=se(w.data,w.offset),m.encoding=new fe(m.tables.cmap);break;case"cvt ":w=Rn(g,x),p=new ae.Parser(w.data,w.offset),m.tables.cvt=p.parseShortList(x.length/2);break;case"fvar":o=x;break;case"fpgm":w=Rn(g,x),p=new ae.Parser(w.data,w.offset),m.tables.fpgm=p.parseByteList(x.length);break;case"head":w=Rn(g,x),m.tables.head=Fe(w.data,w.offset),m.unitsPerEm=m.tables.head.unitsPerEm,t=m.tables.head.indexToLocFormat;break;case"hhea":w=Rn(g,x),m.tables.hhea=Ne(w.data,w.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":c=x;break;case"ltag":w=Rn(g,x),n=Ue(w.data,w.offset);break;case"maxp":w=Rn(g,x),m.tables.maxp=je(w.data,w.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":d=x;break;case"OS/2":w=Rn(g,x),m.tables.os2=rt(w.data,w.offset);break;case"post":w=Rn(g,x),m.tables.post=ot(w.data,w.offset),m.glyphNames=new me(m.tables.post);break;case"prep":w=Rn(g,x),p=new ae.Parser(w.data,w.offset),m.tables.prep=p.parseByteList(x.length);break;case"glyf":a=x;break;case"loca":h=x;break;case"CFF ":i=x;break;case"kern":u=x;break;case"GPOS":s=x;break;case"GSUB":l=x;break;case"meta":f=x}}var S=Rn(g,d);if(m.tables.name=et(S.data,S.offset,n),m.names=m.tables.name,a&&h){var A=0===t,E=Rn(g,h),M=function(e,t,n,r){for(var i=new ae.Parser(e,t),o=r?i.parseUShort:i.parseULong,a=[],s=0;s<n+1;s+=1){var l=o.call(i);r&&(l*=2),a.push(l)}return a}(E.data,E.offset,m.numGlyphs,A),C=Rn(g,a);m.glyphs=Bt.parse(C.data,C.offset,M,m)}else{if(!i)throw new Error("Font doesn't contain TrueType or CFF outlines.");var T=Rn(g,i);!function(e,t,n){n.tables.cff={};var r,i,o,a=Se(e,(r=e,i=t,(o={}).formatMajor=ae.getCard8(r,i),o.formatMinor=ae.getCard8(r,i+1),o.size=ae.getCard8(r,i+2),o.offsetSize=ae.getCard8(r,i+3),o.startOffset=i,o.endOffset=i+4,o).endOffset,ae.bytesToString),s=Se(e,a.endOffset),l=Se(e,s.endOffset,ae.bytesToString),c=Se(e,l.endOffset);n.gsubrs=c.objects,n.gsubrsBias=we(n.gsubrs);var u=ke(e,t,s.objects,l.objects);if(1!==u.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var h=u[0];if((n.tables.cff.topDict=h)._privateDict&&(n.defaultWidthX=h._privateDict.defaultWidthX,n.nominalWidthX=h._privateDict.nominalWidthX),void 0!==h.ros[0]&&void 0!==h.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var d=h.fdArray,f=h.fdSelect;if(0===d||0===f)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=ke(e,t,Se(e,d+=t).objects,l.objects);h._fdArray=p,f+=t,h._fdSelect=function(e,t,n,r){var i,o=[],a=new ae.Parser(e,t),s=a.parseCard8();if(0===s)for(var l=0;l<n;l++){if(r<=(i=a.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");o.push(i)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var c,u=a.parseCard16(),h=a.parseCard16();if(0!==h)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var d=0;d<u;d++){if(i=a.parseCard8(),c=a.parseCard16(),r<=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");if(n<c)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+c);for(;h<c;h++)o.push(i);h=c}if(c!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+c)}return o}(e,f,n.numGlyphs,p.length)}var m=t+h.private[1],g=De(e,m,h.private[0],l.objects);if(n.defaultWidthX=g.defaultWidthX,n.nominalWidthX=g.nominalWidthX,0!==g.subrs){var y=Se(e,m+g.subrs);n.subrs=y.objects,n.subrsBias=we(n.subrs)}else n.subrs=[],n.subrsBias=0;var v=Se(e,t+h.charStrings);n.nGlyphs=v.objects.length;var _=function(e,t,n,r){var i,o,a=new ae.Parser(e,t);--n;var s=[".notdef"],l=a.parseCard8();if(0===l)for(var c=0;c<n;c+=1)i=a.parseSID(),s.push(Me(r,i));else if(1===l)for(;s.length<=n;){i=a.parseSID(),o=a.parseCard8();for(var u=0;u<=o;u+=1)s.push(Me(r,i)),i+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);for(;s.length<=n;){i=a.parseSID(),o=a.parseCard16();for(var h=0;h<=o;h+=1)s.push(Me(r,i)),i+=1}}return s}(e,t+h.charset,n.nGlyphs,l.objects);0===h.encoding?n.cffEncoding=new pe(ce,_):1===h.encoding?n.cffEncoding=new pe(ue,_):n.cffEncoding=function(e,t,n){var r,i={},o=new ae.Parser(e,t),a=o.parseCard8();if(0===a)for(var s=o.parseCard8(),l=0;l<s;l+=1)i[r=o.parseCard8()]=l;else{if(1!==a)throw new Error("Unknown encoding format "+a);var c=o.parseCard8();r=1;for(var u=0;u<c;u+=1)for(var h=o.parseCard8(),d=o.parseCard8(),f=h;f<=h+d;f+=1)i[f]=r,r+=1}return new pe(i,n)}(e,t+h.encoding,_),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new be.GlyphSet(n);for(var b=0;b<n.nGlyphs;b+=1){var x=v.objects[b];n.glyphs.push(b,be.cffGlyphLoader(n,b,Oe,x))}}(T.data,T.offset,m)}var P=Rn(g,c);if(function(e,t,n,r,i){for(var o,a,s=new ae.Parser(e,t),l=0;l<r;l+=1){l<n&&(o=s.parseUShort(),a=s.parseShort());var c=i.get(l);c.advanceWidth=o,c.leftSideBearing=a}}(P.data,P.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs),function(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),i=0;i<r.length;i+=1){var o=r[i],a=n[o];(t=e.glyphs.get(a)).addUnicode(parseInt(o))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(m),u){var D=Rn(g,u);m.kerningPairs=Dn(D.data,D.offset)}else m.kerningPairs={};if(s){var k=Rn(g,s);m.tables.gpos=Pn(k.data,k.offset),m.position.init()}if(l){var O=Rn(g,l);m.tables.gsub=ct(O.data,O.offset)}if(o){var I=Rn(g,o);m.tables.fvar=Cn(I.data,I.offset,m.names)}if(f){var R=Rn(g,f);m.tables.meta=ut(R.data,R.offset),m.metas=m.tables.meta}return m}t.Font=En,t.Glyph=ye,t.Path=C,t.BoundingBox=M,t._parse=ae,t.parse=Ln,t.load=function(e,t){("undefined"==typeof window?kn:On)(e,(function(e,n){if(e)return t(e);var r;try{r=Ln(n)}catch(e){return t(e,null)}return t(null,r)}))},t.loadSync=function(t){return Ln(Et(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],13:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;-1<=o&&!i;o--){var a=0<=o?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return(i?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!i).join("/"))||"."},n.normalize=function(e){var o=n.isAbsolute(e),a="/"===i(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;1<=o;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},n.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;0<=t;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47===s){if(i)continue;n=a+1;break}-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:14}],14:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],h=!1,d=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!h){var e=l(f);h=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||h||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],15:[function(e,t,n){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))};p.prototype.append=function(e,t){e=h(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},_.call(b.prototype),_.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var u=[301,302,303,307,308];w.redirect=function(e,t){if(-1===u.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=b,e.Response=w,e.fetch=function(e,t){return new Promise((function(n,i){var o=new b(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new w(i,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0}function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n,r=m(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=g(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function x(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function w(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=a(e("../core/main")),o=a(e("../color/color_conversion"));function a(e){return e&&e.__esModule?e:{default:e}}var s=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],l=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];i.default.prototype._rgbColorName=function(e){var t=o.default._rgbaToHSBA(e);return function(e){var t;if(0!==e[0]){e[0]=Math.round(100*e[0]);var n=e[0].toString().split(""),i=n.length-1;n[i]=parseInt(n[i]),n[i]<2.5?n[i]=0:2.5<=n[i]&&n[i]<7.5&&(n[i]=5),2===n.length?(n[0]=parseInt(n[0]),7.5<=n[i]&&(n[i]=0,n[0]=n[0]+1),e[0]=10*n[0]+n[1]):7.5<=n[i]?e[0]=10:e[0]=n[i]}e[2]=e[2]/255;for(var o=e.length-1;1<=o;o--)e[o]<=.25?e[o]=0:.25<e[o]&&e[o]<.75?e[o]=.5:e[o]=1;if(0===e[0]&&0===e[1]&&1===e[2]){for(var a=2;0<=a;a--)r[a]=Math.round(1e4*r[a])/1e4;for(var c=0;c<s.length;c++){if(s[c].h===r[0]&&s[c].s===r[1]&&s[c].b===r[2]){t=s[c].name;break}t="white"}}else for(var u=0;u<l.length;u++)if(l[u].h===e[0]&&l[u].s===e[1]&&l[u].b===e[2]){t=l[u].name;break}return t}([(r=t)[0],t[1],t[2]])};var c=i.default;n.default=c},{"../color/color_conversion":22,"../core/main":36}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r},o="_Description",a="_fallbackDesc",s="_fallbackTable",l="_Label",c="_labelDesc",u="_labelTable";function h(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}i.default.prototype.describe=function(e,t){if(i.default._validateParameters("describe",arguments),"string"==typeof e){var n=this.canvas.id;e=h(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e))}},i.default.prototype.describeElement=function(e,t,n){if(i.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e){var r=this.canvas.id;t=h(t);var o=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e);e=e.replace(/[^a-zA-Z0-9 ]/g,"");var a='<th scope="row">'.concat(o,"</th><td>").concat(t,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==a&&(this.descriptions.fallbackElements[e].innerHTML=a):this._describeElementHTML("fallback",e,a),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==a&&(this.descriptions.labelElements[e].innerHTML=a):this._describeElementHTML("label",e,a))}},i.default.prototype._describeHTML=function(e,t){var n=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(n+o)))this.dummyDOM.querySelector("#"+n+s).insertAdjacentHTML("beforebegin",'<p id="'.concat(n+a,'"></p>'));else{var r='<div id="'.concat(n).concat(o,'" role="region" aria-label="Canvas Description"><p id="').concat(n).concat(a,'"></p></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#".concat(n)).innerHTML=r}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(n).concat(a)),void(this.descriptions.fallback.innerHTML=t)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(n+l)))this.dummyDOM.querySelector("#".concat(n+u))&&this.dummyDOM.querySelector("#".concat(n+u)).insertAdjacentHTML("beforebegin",'<p id="'.concat(n).concat(c,'"></p>'));else{var i='<div id="'.concat(n).concat(l,'" class="p5Label"><p id="').concat(n).concat(c,'"></p></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",i):this.dummyDOM.querySelector("#"+n).insertAdjacentHTML("afterend",i)}return this.descriptions.label=this.dummyDOM.querySelector("#"+n+c),void(this.descriptions.label.innerHTML=t)}},i.default.prototype._describeElementHTML=function(e,t,n){var r=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(r+o)))this.dummyDOM.querySelector("#"+r+s)||this.dummyDOM.querySelector("#"+r+a).insertAdjacentHTML("afterend",'<table id="'.concat(r).concat(s,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var i='<div id="'.concat(r).concat(o,'" role="region" aria-label="Canvas Description"><table id="').concat(r).concat(s,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",i):this.dummyDOM.querySelector("#"+r).innerHTML=i}var h=document.createElement("tr");return h.id=r+"_fte_"+t,this.dummyDOM.querySelector("#"+r+s).appendChild(h),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(r).concat("_fte_").concat(t)),void(this.descriptions.fallbackElements[t].innerHTML=n)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(r+l)))this.dummyDOM.querySelector("#".concat(r+u))||this.dummyDOM.querySelector("#"+r+c).insertAdjacentHTML("afterend",'<table id="'.concat(r+u,'"></table>'));else{var d='<div id="'.concat(r).concat(l,'" class="p5Label"><table id="').concat(r).concat(u,'"></table></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",d)}var f=document.createElement("tr");f.id=r+"_lte_"+t,this.dummyDOM.querySelector("#"+r+u).appendChild(f),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(r).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=n}};var d=i.default;n.default=d},{"../core/main":36}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype._updateGridOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],n=function(e,t){var n="",r="",i=0;for(var o in t){var a=0;for(var s in t[o]){var l='<li id="'.concat(e,"shape").concat(i,'">').concat(t[o][s].color," ").concat(o,",");"line"===o?l+=" location = ".concat(t[o][s].pos,", length = ").concat(t[o][s].length," pixels"):(l+=" location = ".concat(t[o][s].pos),"point"!==o&&(l+=", area = ".concat(t[o][s].area," %")),l+="</li>"),n+=l,a++,i++}r=1<a?"".concat(r," ").concat(a," ").concat(o,"s"):"".concat(r," ").concat(a," ").concat(o)}return{numShapes:[i,r],details:n}}(e,this.ingredients.shapes),r=function(e,t,n,r){var i="".concat(t," canvas, ").concat(n," by ").concat(r," pixels, contains ").concat(e[0]);return 1===e[0]?"".concat(i," shape: ").concat(e[1]):"".concat(i," shapes: ").concat(e[1])}(n.numShapes,this.ingredients.colors.background,this.width,this.height),i=function(e,t){var n=0,r="",i=Array.apply(null,Array(10)).map((function(){}));for(var o in i)i[o]=Array.apply(null,Array(10)).map((function(){}));for(var a in t)for(var s in t[a]){var l;l="line"!==a?'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[a][s].color," ").concat(a,"</a>"):'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[a][s].color," ").concat(a," midpoint</a>"),i[t[a][s].loc.locY][t[a][s].loc.locX]?i[t[a][s].loc.locY][t[a][s].loc.locX]=i[t[a][s].loc.locY][t[a][s].loc.locX]+"  "+l:i[t[a][s].loc.locY][t[a][s].loc.locX]=l,n++}for(var c in i){var u="<tr>";for(var h in i[c])u+="<td>",void 0!==i[c][h]&&(u+=i[c][h]),u+="</td>";r=r+u+"</tr>"}return r}(e,this.ingredients.shapes);r!==t.summary.innerHTML&&(t.summary.innerHTML=r),i!==t.map.innerHTML&&(t.map.innerHTML=i),n.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n.details),this._accessibleOutputs[e]=t}};var o=i.default;n.default=o},{"../core/main":36}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e,t,n){return e[0]<.4*t?e[1]<.4*n?"top left":e[1]>.6*n?"bottom left":"mid left":e[0]>.6*t?e[1]<.4*n?"top right":e[1]>.6*n?"bottom right":"mid right":e[1]<.4*n?"top middle":e[1]>.6*n?"bottom middle":"middle"}function a(e,t,n){var r=Math.floor(e[0]/t*10),i=Math.floor(e[1]/n*10);return 10===r&&--r,10===i&&--i,{locX:r,locY:i}}i.default.prototype.textOutput=function(e){i.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},i.default.prototype.gridOutput=function(e){i.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},i.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},i.default.prototype._createOutput=function(e,t){var n,r,i,o=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode);var a="";"Fallback"===t?(n=o+e,r=o+"accessibleOutput",this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(o,"_Description"))?this.dummyDOM.querySelector("#".concat(o,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(o)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(n=o+e+(a=t),r=o+"accessibleOutput"+t,this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(o,"_Label"))?this.dummyDOM.querySelector("#".concat(o,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')):this.dummyDOM.querySelector("#".concat(o)).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')))),this._accessibleOutputs[n]={},"textOutput"===e?(a="#".concat(o,"gridOutput").concat(a),i='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",i):this.dummyDOM.querySelector("#".concat(r)).innerHTML=i,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):"gridOutput"===e&&(a="#".concat(o,"textOutput").concat(a),i='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",i):this.dummyDOM.querySelector("#".concat(r)).innerHTML=i,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},i.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},i.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},i.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},i.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var n={},r=!0,i=function(e,t){var n,r;return r="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,(t[1]+t[3])/2):(n=t[0],t[1]),[n,r]}(e,t);if("line"===e){n.color=this.ingredients.colors.stroke,n.length=Math.round(this.dist(t[0],t[1],t[2],t[3]));var s=o([t[0],[1]],this.width,this.height),l=o([t[2],[3]],this.width,this.height);n.loc=a(i,this.width,this.height),n.pos=s===l?"at ".concat(s):"from ".concat(s," to ").concat(l)}else"point"===e?n.color=this.ingredients.colors.stroke:(n.color=this.ingredients.colors.fill,n.area=function(e,t,n,r){var i=0;if("arc"===e){var o=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(i=o*t[2]*t[3]/8,"open"===t[6]||"chord"===t[6]){var a=t[0],s=t[1],l=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),c=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),u=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),h=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),d=Math.abs(a*(c-h)+l*(h-s)+u*(s-c))/2;o>Math.PI?i+=d:i-=d}}else"ellipse"===e||"circle"===e?i=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?i=0:"quadrilateral"===e?i=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?i=t[2]*t[3]:"triangle"===e&&(i=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2);return Math.round(100*i/(n*r))}(e,t,this.width,this.height)),n.pos=o(i,this.width,this.height),n.loc=a(i,this.width,this.height);if(this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[n]){for(var c in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][c])===JSON.stringify(n)&&(r=!1);!0===r&&this.ingredients.shapes[e].push(n)}}else this.ingredients.shapes[e]=[n]};var s=i.default;n.default=s},{"../core/main":36}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype._updateTextOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],n=function(e,t){var n="",r=0;for(var i in t)for(var o in t[i]){var a='<li><a href="#'.concat(e,"shape").concat(r,'">').concat(t[i][o].color," ").concat(i,"</a>");"line"===i?a+=", ".concat(t[i][o].pos,", ").concat(t[i][o].length," pixels long.</li>"):(a+=", at ".concat(t[i][o].pos),"point"!==i&&(a+=", covering ".concat(t[i][o].area,"% of the canvas")),a+=".</li>"),n+=a,r++}return{numShapes:r,listShapes:n}}(e,this.ingredients.shapes),r=function(e,t,n,r){var i="Your output is a, ".concat(n," by ").concat(r," pixels, ").concat(t," canvas containing the following");return 1===e?"".concat(i," shape:"):"".concat(i," ").concat(e," shapes:")}(n.numShapes,this.ingredients.colors.background,this.width,this.height),i=function(e,t){var n="",r=0;for(var i in t)for(var o in t[i]){var a='<tr id="'.concat(e,"shape").concat(r,'"><th>').concat(t[i][o].color," ").concat(i,"</th>");"line"===i?a+="<td>location = ".concat(t[i][o].pos,"</td><td>length = ").concat(t[i][o].length," pixels</td></tr>"):(a+="<td>location = ".concat(t[i][o].pos,"</td>"),"point"!==i&&(a+="<td> area = ".concat(t[i][o].area,"%</td>")),a+="</tr>"),n+=a,r++}return n}(e,this.ingredients.shapes);r!==t.summary.innerHTML&&(t.summary.innerHTML=r),n.listShapes!==t.list.innerHTML&&(t.list.innerHTML=n.listShapes),i!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=i),this._accessibleOutputs[e]=t}};var o=i.default;n.default=o},{"../core/main":36}],21:[function(e,t,n){"use strict";var r,i=(r=e("./core/main"))&&r.__esModule?r:{default:r};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=i.default},{"./accessibility/color_namer":16,"./accessibility/describe":17,"./accessibility/gridOutput":18,"./accessibility/outputs":19,"./accessibility/textOutput":20,"./color/color_conversion":22,"./color/creating_reading":23,"./color/p5.Color":24,"./color/setting":25,"./core/constants":26,"./core/environment":27,"./core/friendly_errors/fes_core":28,"./core/friendly_errors/file_errors":29,"./core/friendly_errors/stacktrace":30,"./core/friendly_errors/validate_params":31,"./core/helpers":32,"./core/init":33,"./core/legacy":35,"./core/main":36,"./core/p5.Element":37,"./core/p5.Graphics":38,"./core/p5.Renderer":39,"./core/p5.Renderer2D":40,"./core/preload":41,"./core/rendering":42,"./core/shape/2d_primitives":43,"./core/shape/attributes":44,"./core/shape/curves":45,"./core/shape/vertex":46,"./core/shim":47,"./core/structure":48,"./core/transform":49,"./data/local_storage.js":50,"./data/p5.TypedDict":51,"./dom/dom":52,"./events/acceleration":53,"./events/keyboard":54,"./events/mouse":55,"./events/touch":56,"./image/filters":57,"./image/image":58,"./image/loading_displaying":59,"./image/p5.Image":60,"./image/pixels":61,"./io/files":62,"./io/p5.Table":63,"./io/p5.TableRow":64,"./io/p5.XML":65,"./math/calculation":66,"./math/math":67,"./math/noise":68,"./math/p5.Vector":69,"./math/random":70,"./math/trigonometry":71,"./typography/attributes":72,"./typography/loading_displaying":73,"./typography/p5.Font":74,"./utilities/array_functions":75,"./utilities/conversion":76,"./utilities/string_functions":77,"./utilities/time_date":78,"./webgl/3d_primitives":79,"./webgl/interaction":80,"./webgl/light":81,"./webgl/loading":82,"./webgl/material":83,"./webgl/p5.Camera":84,"./webgl/p5.Geometry":85,"./webgl/p5.Matrix":86,"./webgl/p5.RenderBuffer":87,"./webgl/p5.RendererGL":90,"./webgl/p5.RendererGL.Immediate":88,"./webgl/p5.RendererGL.Retained":89,"./webgl/p5.Shader":91,"./webgl/p5.Texture":92,"./webgl/text":93}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.ColorConversion={},i.default.ColorConversion._hsbaToHSLA=function(e){var t=e[0],n=e[1],r=e[2],i=(2-n)*r/2;return 0!=i&&(1==i?n=0:i<.5?n/=2-n:n=n*r/(2-2*i)),[t,n,i,e[3]]},i.default.ColorConversion._hsbaToRGBA=function(e){var t=6*e[0],n=e[1],r=e[2],i=[];if(0===n)i=[r,r,r,e[3]];else{var o,a,s,l=Math.floor(t),c=r*(1-n),u=r*(1-n*(t-l)),h=r*(1-n*(1+l-t));s=1===l?(o=u,a=r,c):2===l?(o=c,a=r,h):3===l?(o=c,a=u,r):4===l?(o=h,a=c,r):5===l?(o=r,a=c,u):(o=r,a=h,c),i=[o,a,s,e[3]]}return i},i.default.ColorConversion._hslaToHSBA=function(e){var t,n=e[0],r=e[1],i=e[2];return[n,r=2*((t=i<.5?(1+r)*i:i+r-i*r)-i)/t,t,e[3]]},i.default.ColorConversion._hslaToRGBA=function(e){var t=6*e[0],n=e[1],r=e[2],i=[];if(0===n)i=[r,r,r,e[3]];else{var o,a=2*r-(o=r<.5?(1+n)*r:r+n-r*n),s=function(e,t,n){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t};i=[s(2+t,a,o),s(t,a,o),s(t-2,a,o),e[3]]}return i},i.default.ColorConversion._rgbaToHSBA=function(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.max(r,i,o),s=a-Math.min(r,i,o);return 0==s?n=t=0:(n=s/a,r===a?t=(i-o)/s:i===a?t=2+(o-r)/s:o===a&&(t=4+(r-i)/s),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,a,e[3]]},i.default.ColorConversion._rgbaToHSLA=function(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.max(r,i,o),s=Math.min(r,i,o),l=a+s,c=a-s;return 0==c?n=t=0:(n=l<1?c/l:c/(2-l),r===a?t=(i-o)/c:i===a?t=2+(o-r)/c:o===a&&(t=4+(r-i)/c),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,l/2,e[3]]};var o=i.default.ColorConversion;n.default=o},{"../core/main":36}],23:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.alpha=function(e){return o.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},o.default.prototype.blue=function(e){return o.default._validateParameters("blue",arguments),this.color(e)._getBlue()},o.default.prototype.brightness=function(e){return o.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},o.default.prototype.color=function(){if(o.default._validateParameters("color",arguments),arguments[0]instanceof o.default.Color)return arguments[0];var e=arguments[0]instanceof Array?arguments[0]:arguments;return new o.default.Color(this,e)},o.default.prototype.green=function(e){return o.default._validateParameters("green",arguments),this.color(e)._getGreen()},o.default.prototype.hue=function(e){return o.default._validateParameters("hue",arguments),this.color(e)._getHue()},o.default.prototype.lerpColor=function(e,t,n){o.default._validateParameters("lerpColor",arguments);var r,i,s,l,c,u,h=this._colorMode,d=this._colorMaxes;if(h===a.RGB)c=e.levels.map((function(e){return e/255})),u=t.levels.map((function(e){return e/255}));else if(h===a.HSB)e._getBrightness(),t._getBrightness(),c=e.hsba,u=t.hsba;else{if(h!==a.HSL)throw new Error("".concat(h,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),c=e.hsla,u=t.hsla}return n=Math.max(Math.min(n,1),0),void 0===this.lerp&&(this.lerp=function(e,t,n){return n*(t-e)+e}),r=this.lerp(c[0],u[0],n),i=this.lerp(c[1],u[1],n),s=this.lerp(c[2],u[2],n),l=this.lerp(c[3],u[3],n),r*=d[h][0],i*=d[h][1],s*=d[h][2],l*=d[h][3],this.color(r,i,s,l)},o.default.prototype.lightness=function(e){return o.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},o.default.prototype.red=function(e){return o.default._validateParameters("red",arguments),this.color(e)._getRed()},o.default.prototype.saturation=function(e){return o.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var s=o.default;n.default=s},{"../core/constants":26,"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36,"./p5.Color":24}],24:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("../core/main")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),a=s(e("./color_conversion"));function s(e){return e&&e.__esModule?e:{default:e}}i.default.Color=function(e,t){if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),this.mode!==o.RGB&&this.mode!==o.HSL&&this.mode!==o.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=i.default.Color._parseInputs.apply(this,t),this._calculateLevels(),this},i.default.Color.prototype.toString=function(e){var t=this.levels,n=this._array,r=n[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[2].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16),Math.round(15*n[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%, ",(100*n[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[o.HSB][0],", ",this.hsba[1]*this.maxes[o.HSB][1],", ",this.hsba[2]*this.maxes[o.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[o.HSB][0],", ",this.hsba[1]*this.maxes[o.HSB][1],", ",this.hsba[2]*this.maxes[o.HSB][2],", ",r,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[o.HSL][0],", ",this.hsla[1]*this.maxes[o.HSL][1],", ",this.hsla[2]*this.maxes[o.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[o.HSL][0],", ",this.hsla[1]*this.maxes[o.HSL][1],", ",this.hsla[2]*this.maxes[o.HSL][2],", ",r,")");case"hsla%":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",r,")")}},i.default.Color.prototype.setRed=function(e){this._array[0]=e/this.maxes[o.RGB][0],this._calculateLevels()},i.default.Color.prototype.setGreen=function(e){this._array[1]=e/this.maxes[o.RGB][1],this._calculateLevels()},i.default.Color.prototype.setBlue=function(e){this._array[2]=e/this.maxes[o.RGB][2],this._calculateLevels()},i.default.Color.prototype.setAlpha=function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()},i.default.Color.prototype._calculateLevels=function(){for(var e=this._array,t=this.levels=new Array(e.length),n=e.length-1;0<=n;--n)t[n]=Math.round(255*e[n])},i.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},i.default.Color.prototype._storeModeAndMaxes=function(e,t){this.mode=e,this.maxes=t},i.default.Color.prototype._getMode=function(){return this.mode},i.default.Color.prototype._getMaxes=function(){return this.maxes},i.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[o.RGB][2]},i.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[o.HSB][2]},i.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[o.RGB][1]},i.default.Color.prototype._getHue=function(){return this.mode===o.HSB?(this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[o.HSB][0]):(this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[o.HSL][0])},i.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[o.HSL][2]},i.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[o.RGB][0]},i.default.Color.prototype._getSaturation=function(){return this.mode===o.HSB?(this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[o.HSB][1]):(this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[o.HSL][1])};var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},c=/\s*/,u=/(\d{1,3})/,h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,d=new RegExp("".concat(h.source,"%")),f={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(c.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(c.source),"i"),RGBA:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",h.source,"\\)$"].join(c.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",h.source,"\\)$"].join(c.source),"i"),HSL:new RegExp(["^hsl\\(",u.source,",",d.source,",",d.source,"\\)$"].join(c.source),"i"),HSLA:new RegExp(["^hsla\\(",u.source,",",d.source,",",d.source,",",h.source,"\\)$"].join(c.source),"i"),HSB:new RegExp(["^hsb\\(",u.source,",",d.source,",",d.source,"\\)$"].join(c.source),"i"),HSBA:new RegExp(["^hsba\\(",u.source,",",d.source,",",d.source,",",h.source,"\\)$"].join(c.source),"i")};i.default.Color._parseInputs=function(e,t,n,r){var s,c=arguments.length,u=this.mode,h=this.maxes[u],d=[];if(3<=c){for(d[0]=e/h[0],d[1]=t/h[1],d[2]=n/h[2],d[3]="number"==typeof r?r/h[3]:1,s=d.length-1;0<=s;--s){var p=d[s];p<0?d[s]=0:1<p&&(d[s]=1)}return u===o.HSL?a.default._hslaToRGBA(d):u===o.HSB?a.default._hsbaToRGBA(d):d}if(1===c&&"string"==typeof e){var m=e.trim().toLowerCase();if(l[m])return i.default.Color._parseInputs.call(this,l[m]);if(f.HEX3.test(m))return(d=f.HEX3.exec(m).slice(1).map((function(e){return parseInt(e+e,16)/255})))[3]=1,d;if(f.HEX6.test(m))return(d=f.HEX6.exec(m).slice(1).map((function(e){return parseInt(e,16)/255})))[3]=1,d;if(f.HEX4.test(m))return f.HEX4.exec(m).slice(1).map((function(e){return parseInt(e+e,16)/255}));if(f.HEX8.test(m))return f.HEX8.exec(m).slice(1).map((function(e){return parseInt(e,16)/255}));if(f.RGB.test(m))return(d=f.RGB.exec(m).slice(1).map((function(e){return e/255})))[3]=1,d;if(f.RGB_PERCENT.test(m))return(d=f.RGB_PERCENT.exec(m).slice(1).map((function(e){return parseFloat(e)/100})))[3]=1,d;if(f.RGBA.test(m))return f.RGBA.exec(m).slice(1).map((function(e,t){return 3===t?parseFloat(e):e/255}));if(f.RGBA_PERCENT.test(m))return f.RGBA_PERCENT.exec(m).slice(1).map((function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100}));if(f.HSL.test(m)?(d=f.HSL.exec(m).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:f.HSLA.test(m)&&(d=f.HSLA.exec(m).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),(d=d.map((function(e){return Math.max(Math.min(e,1),0)}))).length)return a.default._hslaToRGBA(d);if(f.HSB.test(m)?(d=f.HSB.exec(m).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:f.HSBA.test(m)&&(d=f.HSBA.exec(m).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),d.length){for(s=d.length-1;0<=s;--s)d[s]=Math.max(Math.min(d[s],1),0);return a.default._hsbaToRGBA(d)}d=[1,1,1,1]}else{if(1!==c&&2!==c||"number"!=typeof e)throw new Error("".concat(arguments,"is not a valid color representation."));d[0]=e/h[2],d[1]=e/h[2],d[2]=e/h[2],d[3]="number"==typeof t?t/h[3]:1,d=d.map((function(e){return Math.max(Math.min(e,1),0)}))}return d};var p=i.default.Color;n.default=p},{"../core/constants":26,"../core/main":36,"./color_conversion":22}],25:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.Color"),o.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},o.default.prototype.clear=function(){return this._renderer.clear(),this},o.default.prototype.colorMode=function(e,t,n,r,i){if(o.default._validateParameters("colorMode",arguments),e===a.RGB||e===a.HSB||e===a.HSL){this._colorMode=e;var s=this._colorMaxes[e];2===arguments.length?(s[0]=t,s[1]=t,s[2]=t,s[3]=t):4===arguments.length?(s[0]=t,s[1]=n,s[2]=r):5===arguments.length&&(s[0]=t,s[1]=n,s[2]=r,s[3]=i)}return this},o.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},o.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},o.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},o.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},o.default.prototype.erase=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;return this._renderer.erase(e,t),this},o.default.prototype.noErase=function(){return this._renderer.noErase(),this};var s=o.default;n.default=s},{"../core/constants":26,"../core/main":36,"./p5.Color":24}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FILL=n.STROKE=n.CURVE=n.BEZIER=n.QUADRATIC=n.LINEAR=n._CTX_MIDDLE=n._DEFAULT_LEADMULT=n._DEFAULT_TEXT_FILL=n.BOLDITALIC=n.BOLD=n.ITALIC=n.NORMAL=n.BLUR=n.ERODE=n.DILATE=n.POSTERIZE=n.INVERT=n.OPAQUE=n.GRAY=n.THRESHOLD=n.BURN=n.DODGE=n.SOFT_LIGHT=n.HARD_LIGHT=n.OVERLAY=n.REPLACE=n.SCREEN=n.MULTIPLY=n.EXCLUSION=n.SUBTRACT=n.DIFFERENCE=n.LIGHTEST=n.DARKEST=n.ADD=n.REMOVE=n.BLEND=n.UP_ARROW=n.TAB=n.SHIFT=n.RIGHT_ARROW=n.RETURN=n.OPTION=n.LEFT_ARROW=n.ESCAPE=n.ENTER=n.DOWN_ARROW=n.DELETE=n.CONTROL=n.BACKSPACE=n.ALT=n.AUTO=n.HSL=n.HSB=n.RGB=n.MITER=n.BEVEL=n.ROUND=n.SQUARE=n.PROJECT=n.PIE=n.CHORD=n.OPEN=n.CLOSE=n.TESS=n.QUAD_STRIP=n.QUADS=n.TRIANGLE_STRIP=n.TRIANGLE_FAN=n.TRIANGLES=n.LINE_LOOP=n.LINE_STRIP=n.LINES=n.POINTS=n.BASELINE=n.BOTTOM=n.TOP=n.CENTER=n.LEFT=n.RIGHT=n.RADIUS=n.CORNERS=n.CORNER=n.RAD_TO_DEG=n.DEG_TO_RAD=n.RADIANS=n.DEGREES=n.TWO_PI=n.TAU=n.QUARTER_PI=n.PI=n.HALF_PI=n.WAIT=n.TEXT=n.MOVE=n.HAND=n.CROSS=n.ARROW=n.WEBGL=n.P2D=void 0,n.FALLBACK=n.LABEL=n.AXES=n.GRID=n._DEFAULT_FILL=n._DEFAULT_STROKE=n.PORTRAIT=n.LANDSCAPE=n.MIRROR=n.CLAMP=n.REPEAT=n.NEAREST=n.IMAGE=n.IMMEDIATE=n.TEXTURE=void 0;var r=Math.PI;n.P2D="p2d",n.WEBGL="webgl",n.ARROW="default",n.CROSS="crosshair",n.HAND="pointer",n.MOVE="move",n.TEXT="text",n.WAIT="wait";var i=r/2;n.HALF_PI=i;var o=r;n.PI=o;var a=r/4;n.QUARTER_PI=a;var s=2*r;n.TAU=s;var l=2*r;n.TWO_PI=l,n.DEGREES="degrees",n.RADIANS="radians";var c=r/180;n.DEG_TO_RAD=c;var u=180/r;n.RAD_TO_DEG=u,n.CORNER="corner",n.CORNERS="corners",n.RADIUS="radius",n.RIGHT="right",n.LEFT="left",n.CENTER="center",n.TOP="top",n.BOTTOM="bottom",n.BASELINE="alphabetic",n.POINTS=0,n.LINES=1,n.LINE_STRIP=3,n.LINE_LOOP=2,n.TRIANGLES=4,n.TRIANGLE_FAN=6,n.TRIANGLE_STRIP=5,n.QUADS="quads",n.QUAD_STRIP="quad_strip",n.TESS="tess",n.CLOSE="close",n.OPEN="open",n.CHORD="chord",n.PIE="pie",n.PROJECT="square",n.SQUARE="butt",n.ROUND="round",n.BEVEL="bevel",n.MITER="miter",n.RGB="rgb",n.HSB="hsb",n.HSL="hsl",n.AUTO="auto",n.ALT=18,n.BACKSPACE=8,n.CONTROL=17,n.DELETE=46,n.DOWN_ARROW=40,n.ENTER=13,n.ESCAPE=27,n.LEFT_ARROW=37,n.OPTION=18,n.RETURN=13,n.RIGHT_ARROW=39,n.SHIFT=16,n.TAB=9,n.UP_ARROW=38,n.BLEND="source-over",n.REMOVE="destination-out",n.ADD="lighter",n.DARKEST="darken",n.LIGHTEST="lighten",n.DIFFERENCE="difference",n.SUBTRACT="subtract",n.EXCLUSION="exclusion",n.MULTIPLY="multiply",n.SCREEN="screen",n.REPLACE="copy",n.OVERLAY="overlay",n.HARD_LIGHT="hard-light",n.SOFT_LIGHT="soft-light",n.DODGE="color-dodge",n.BURN="color-burn",n.THRESHOLD="threshold",n.GRAY="gray",n.OPAQUE="opaque",n.INVERT="invert",n.POSTERIZE="posterize",n.DILATE="dilate",n.ERODE="erode",n.BLUR="blur",n.NORMAL="normal",n.ITALIC="italic",n.BOLD="bold",n.BOLDITALIC="bold italic",n._DEFAULT_TEXT_FILL="#000000",n._DEFAULT_LEADMULT=1.25,n._CTX_MIDDLE="middle",n.LINEAR="linear",n.QUADRATIC="quadratic",n.BEZIER="bezier",n.CURVE="curve",n.STROKE="stroke",n.FILL="fill",n.TEXTURE="texture",n.IMMEDIATE="immediate",n.IMAGE="image",n.NEAREST="nearest",n.REPEAT="repeat",n.CLAMP="clamp",n.MIRROR="mirror",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n._DEFAULT_STROKE="#000000",n._DEFAULT_FILL="#FFFFFF",n.GRID="grid",n.AXES="axes",n.LABEL="label",n.FALLBACK="fallback"},{}],27:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("./main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),s=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT];o.default.prototype._frameRate=0,o.default.prototype._lastFrameTime=window.performance.now(),o.default.prototype._targetFrameRate=60;var l=window.print;function c(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function u(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}o.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):l()},o.default.prototype.frameCount=0,o.default.prototype.deltaTime=0,o.default.prototype.focused=document.hasFocus(),o.default.prototype.cursor=function(e,t,n){var r="auto",i=this._curElement.elt;if(s.includes(e))r=e;else if("string"==typeof e){var o="";t&&n&&"number"==typeof t&&"number"==typeof n&&(o="".concat(t," ").concat(n)),r="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(o,", auto"):e}i.style.cursor=r},o.default.prototype.frameRate=function(e){return o.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},o.default.prototype.getFrameRate=function(){return this.frameRate()},o.default.prototype.setFrameRate=function(e){return this.frameRate(e)},o.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.default.prototype.displayWidth=screen.width,o.default.prototype.displayHeight=screen.height,o.default.prototype.windowWidth=c(),o.default.prototype.windowHeight=u(),o.default.prototype._onresize=function(e){this._setProperty("windowWidth",c()),this._setProperty("windowHeight",u());var t,n=this._isGlobal?window:this;"function"==typeof n.windowResized&&(void 0===(t=n.windowResized(e))||t||e.preventDefault())},o.default.prototype.width=0,o.default.prototype.height=0,o.default.prototype.fullscreen=function(e){if(o.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e?function(e){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},o.default.prototype.pixelDensity=function(e){var t;return o.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},o.default.prototype.displayDensity=function(){return window.devicePixelRatio},o.default.prototype.getURL=function(){return location.href},o.default.prototype.getURLPath=function(){return location.pathname.split("/").filter((function(e){return""!==e}))},o.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,n[e[1]]=e[2];return n};var h=o.default;n.default=h},{"./constants":26,"./main":36}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization");var o,a=null;function s(e,t){t=t||console.log.bind(console),a||o(),a.some((function(n){if(e.message&&null!==e.message.match("\\W?".concat(n.name,"\\W"))){var r="function"===n.type?"".concat(n.name,"()"):n.name;return t("Did you just try to use p5.js's ".concat(r," ").concat(n.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat("https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup")),!0}}))}i.default._friendlyError=i.default._checkForUserDefinedFunctions=i.default._fesErrorMonitor=function(){},a=null,o=function(){function t(e){return Object.getOwnPropertyNames(e).filter((function(e){return"_"!==e[0]&&!(e in n)&&(n[e]=!0)})).map((function(t){var n;return n="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:n}}))}var n={};(a=[].concat(t(i.default.prototype),t(e("../constants")))).sort((function(e,t){return t.name.length-e.name.length}))},i.default.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",(function(){window.removeEventListener("error",s,!1)})));var l=i.default;n.default=l},{"../constants":26,"../internationalization":34,"../main":36,"./browser_errors":void 0}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization"),i.default._friendlyFileLoadError=function(){};var o=i.default;n.default=o},{"../internationalization":34,"../main":36}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../main"))&&r.__esModule?r:{default:r};function o(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(t)}),this).map((function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),i=this.extractLocation(n?n[1]:r.pop());return{functionName:r.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(i[0])?void 0:i[0],lineNumber:i[1],columnNumber:i[2],source:e}}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,i=this.extractLocation(e.replace(t,""));return{functionName:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e}}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],i=2,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||"",o=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return i.match(/\(([^)]*)\)/)&&(t=i.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:o,args:void 0===t||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}}),this)}}}i.default._getErrorStackParser=function(){return new o};var a=i.default;n.default=a},{"../main":36}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../main"))&&r.__esModule?r:{default:r};(function(e){if(!(e&&e.__esModule||null===e||"object"!==function(e){return("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(e)&&"function"!=typeof e)){var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n)}})(e("../constants")),e("../internationalization"),i.default._validateParameters=i.default._clearValidateParamsCache=function(){};var o=i.default;n.default=o},{"../../../docs/parameterData.json":void 0,"../constants":26,"../internationalization":34,"../main":36}],32:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),o={modeAdjust:function(e,t,n,r,o){return o===i.CORNER?{x:e,y:t,w:n,h:r}:o===i.CORNERS?{x:e,y:t,w:n-e,h:r-t}:o===i.RADIUS?{x:e-n,y:t-r,w:2*n,h:2*r}:o===i.CENTER?{x:e-.5*n,y:t-.5*r,w:n,h:r}:void 0}};n.default=o},{"./constants":26}],33:[function(e,t,n){"use strict";var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./internationalization");var o=Promise.resolve();Promise.all([new Promise((function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)})),o]).then((function(){void 0===window._setupDone?window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!i.default.instance&&new i.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")}))},{"../core/main":36,"./internationalization":34}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initialize=n.translator=void 0;var r,i=a(e("i18next")),o=a(e("i18next-browser-languagedetector"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n)}var t;return(t=[{key:"fetchWithTimeout",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:2e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),r)}))])}},{key:"init",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};this.services=e,this.options=n}},{key:"read",value:function(e,t,n){var i=this.options.loadPath;if(e===this.options.fallback)n(null,r[e][t]);else if((void 0).includes(e)){var o=this.services.interpolator.interpolate(i,{lng:e,ns:t});this.loadUrl(o,n)}else n("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then((function(t){if(!t.ok)throw new Error("failed loading ".concat(e));return t.json()}),(function(){throw new Error("failed loading ".concat(e))})).then((function(e){return t(null,e)})).catch(t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();s.type="backend";var l=function(e,t){console.debug("p5.js translator called before translations were loaded"),i.default.t(e,t)};n.translator=l,n.initialize=function(){return i.default.use(o.default).use(s).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:r}).then((function(e){n.translator=l=e}),(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))}},{"../../translations":void 0,"../../translations/dev":void 0,i18next:3,"i18next-browser-languagedetector":3}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./main"))&&r.__esModule?r:{default:r};i.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},i.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},i.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},i.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var o=i.default;n.default=o},{"./main":36}],36:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./shim");var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));var o=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var o=Object.getOwnPropertyNames(e.prototype._registeredMethods),a=!0,s=!1,l=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var h=c.value;this._registeredMethods[h]=e.prototype._registeredMethods[h].slice()}}catch(t){s=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){i._userNode&&"string"==typeof i._userNode&&(i._userNode=document.getElementById(i._userNode));var t=i._isGlobal?window:i;if(t.preload){var n=document.getElementById(i._loadingScreenId);n||((n=document.createElement("div")).innerHTML="Loading...",n.style.position="absolute",n.id=i._loadingScreenId,(i._userNode||document.body).appendChild(n));var r=i._preloadMethods;for(var o in r){r[o]=r[o]||e;var a=r[o];a!==e.prototype&&a!==e||(i._isGlobal&&(window[o]=i._wrapPreload(i,o)),a=i),i._registeredPreloadMethods[o]=a[o],a[o]=i._wrapPreload(a,o)}t.preload(),i._runIfPreloadsAreDone()}else i._setup(),i._draw()},this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(0===e._preloadCount){var t=document.getElementById(e._loadingScreenId);t&&t.parentNode.removeChild(t),this._setupDone||(this._lastFrameTime=window.performance.now(),e._setup(),e._draw())}},this._decrementPreload=function(){var e=this._isGlobal?window:this;"function"==typeof e.preload&&(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var n=this;return function(){n._incrementPreload();for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n._registeredPreloadMethods[t].apply(e,i)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){i.createCanvas(i._defaultCanvasSize.width,i._defaultCanvasSize.height,"p2d");var e=i._isGlobal?window:i;if("function"==typeof e.preload)for(var t in i._preloadMethods)e[t]=i._preloadMethods[t][t],e[t]&&i&&(e[t]=e[t].bind(i));i._millisStart=window.performance.now(),"function"==typeof e.setup&&e.setup();var n=document.getElementsByTagName("canvas"),r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;"true"===c.dataset.hidden&&(c.style.visibility="",delete c.dataset.hidden)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}i._lastFrameTime=window.performance.now(),i._setupDone=!0,(i._accessibleOutputs.grid||i._accessibleOutputs.text)&&i._updateAccsOutput()},this._draw=function(){var e=window.performance.now(),t=e-i._lastFrameTime,n=1e3/i._targetFrameRate;(!i._loop||n-5<=t)&&(i.redraw(),i._frameRate=1e3/(e-i._lastFrameTime),i.deltaTime=e-i._lastFrameTime,i._setProperty("deltaTime",i.deltaTime),i._lastFrameTime=e,void 0!==i._updateMouseCoords&&(i._updateMouseCoords(),i._setProperty("movedX",0),i._setProperty("movedY",0))),i._loop&&(i._requestAnimId=window.requestAnimationFrame(i._draw))},this._setProperty=function(e,t){i[e]=t,i._isGlobal&&(window[e]=t)},this.remove=function(){var t=document.getElementById(i._loadingScreenId);if(t&&(t.parentNode.removeChild(t),i._incrementPreload()),i._curElement){for(var n in i._loop=!1,i._requestAnimId&&window.cancelAnimationFrame(i._requestAnimId),i._events)window.removeEventListener(n,i._events[n]);var r=!0,o=!1,a=void 0;try{for(var s,l=i._elements[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;for(var u in c.elt&&c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt),c._events)c.elt.removeEventListener(u,c._events[u])}}catch(t){o=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var h=i;i._registeredMethods.remove.forEach((function(e){void 0!==e&&e.call(h)}))}if(i._isGlobal){for(var d in e.prototype)try{delete window[d]}catch(t){window[d]=void 0}for(var f in i)if(i.hasOwnProperty(f))try{delete window[f]}catch(t){window[f]=void 0}e.instance=null}},this._registeredMethods.init.forEach((function(e){void 0!==e&&e.call(this)}),this),this._setupPromisePreloads();var d=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var f in this._isGlobal=!0,e.instance=this,e.prototype)if("function"==typeof e.prototype[f]){var p=f.substring(2);this._events.hasOwnProperty(p)||(Math.hasOwnProperty(f)&&Math[f]===e.prototype[f]?d(f,e.prototype[f]):d(f,e.prototype[f].bind(this)))}else d(f,e.prototype[f]);for(var m in this)this.hasOwnProperty(m)&&d(m,this[m])}for(var g in this._events){var y=this["_on".concat(g)];if(y){var v=y.bind(this);window.addEventListener(g,v,{passive:!1}),this._events[g]=v}}function _(){i._setProperty("focused",!0)}function b(){i._setProperty("focused",!1)}window.addEventListener("focus",_),window.addEventListener("blur",b),this.registerMethod("remove",(function(){window.removeEventListener("focus",_),window.removeEventListener("blur",b)})),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t;return(t=[{key:"_initializeInstanceVariables",value:function(){this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=i.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,n){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=n)}},{key:"registerMethod",value:function(t,n){var r=this||e.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(n)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.globalObject||window;return t.log||console.log.bind(console),function(e,t){n[e]=t}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();for(var a in o.instance=null,o.disableFriendlyErrors=!1,i)o.prototype[a]=i[a];o.prototype._preloadMethods={loadJSON:o.prototype,loadImage:o.prototype,loadStrings:o.prototype,loadXML:o.prototype,loadBytes:o.prototype,loadTable:o.prototype,loadFont:o.prototype,loadModel:o.prototype,loadShader:o.prototype},o.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},o.prototype._registeredPreloadMethods={};var s=o;n.default=s},{"./constants":26,"./shim":47}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./main"))&&r.__esModule?r:{default:r};i.default.Element=function(e,t){this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},i.default.Element.prototype.parent=function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof i.default.Element&&(e=e.elt),e.appendChild(this.elt),this)},i.default.Element.prototype.id=function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},i.default.Element.prototype.class=function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)},i.default.Element.prototype.mousePressed=function(e){return i.default.Element._adjustListener("mousedown",(function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this)}),this),this},i.default.Element.prototype.doubleClicked=function(e){return i.default.Element._adjustListener("dblclick",e,this),this},i.default.Element.prototype.mouseWheel=function(e){return i.default.Element._adjustListener("wheel",e,this),this},i.default.Element.prototype.mouseReleased=function(e){return i.default.Element._adjustListener("mouseup",e,this),this},i.default.Element.prototype.mouseClicked=function(e){return i.default.Element._adjustListener("click",e,this),this},i.default.Element.prototype.mouseMoved=function(e){return i.default.Element._adjustListener("mousemove",e,this),this},i.default.Element.prototype.mouseOver=function(e){return i.default.Element._adjustListener("mouseover",e,this),this},i.default.Element.prototype.mouseOut=function(e){return i.default.Element._adjustListener("mouseout",e,this),this},i.default.Element.prototype.touchStarted=function(e){return i.default.Element._adjustListener("touchstart",e,this),this},i.default.Element.prototype.touchMoved=function(e){return i.default.Element._adjustListener("touchmove",e,this),this},i.default.Element.prototype.touchEnded=function(e){return i.default.Element._adjustListener("touchend",e,this),this},i.default.Element.prototype.dragOver=function(e){return i.default.Element._adjustListener("dragover",e,this),this},i.default.Element.prototype.dragLeave=function(e){return i.default.Element._adjustListener("dragleave",e,this),this},i.default.Element._adjustListener=function(e,t,n){return!1===t?i.default.Element._detachListener(e,n):i.default.Element._attachListener(e,t,n),this},i.default.Element._attachListener=function(e,t,n){n._events[e]&&i.default.Element._detachListener(e,n);var r=t.bind(n);n.elt.addEventListener(e,r,!1),n._events[e]=r},i.default.Element._detachListener=function(e,t){var n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null},i.default.Element.prototype._setProperty=function(e,t){this[e]=t};var o=i.default.Element;n.default=o},{"./main":36}],38:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("./main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));o.default.Graphics=function(e,t,n,r){var i=n||a.P2D;this.canvas=document.createElement("canvas");var s=r._userNode||document.body;for(var l in s.appendChild(this.canvas),o.default.Element.call(this,this.canvas,r),o.default.prototype)this[l]||("function"==typeof o.default.prototype[l]?this[l]=o.default.prototype[l].bind(this):this[l]=o.default.prototype[l]);return o.default.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=r._pixelDensity,i===a.WEBGL?this._renderer=new o.default.RendererGL(this.canvas,this,!1):this._renderer=new o.default.Renderer2D(this.canvas,this,!1),r._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(e,t),this._renderer._applyDefaults(),this},o.default.Graphics.prototype=Object.create(o.default.Element.prototype),o.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},o.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e=this._pInst._elements.indexOf(this);for(var t in-1!==e&&this._pInst._elements.splice(e,1),this._events)this.elt.removeEventListener(t,this._events[t])};var s=o.default.Graphics;n.default=s},{"./constants":26,"./main":36}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./main"))&&r.__esModule?r:{default:r},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}i.default.Renderer=function(e,t,n){i.default.Element.call(this,e,t),this.canvas=e,this._pixelsState=t,n?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=o.LEFT,this._textBaseline=o.BASELINE,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1},i.default.Renderer.prototype=Object.create(i.default.Element.prototype),i.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle}}},i.default.Renderer.prototype.pop=function(e){e.properties&&Object.assign(this,e.properties)},i.default.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},i.default.Renderer.prototype.get=function(e,t,n,r){var o=this._pixelsState,a=o._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=o.width,r=o.height;else if(e*=a,t*=a,void 0===n&&void 0===r)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);var l=new i.default.Image(n,r);return l.canvas.getContext("2d").drawImage(s,e,t,n*a,r*a,0,0,n,r),l},i.default.Renderer.prototype.textLeading=function(e){return"number"==typeof e?(this._setProperty("_textLeading",e),this._pInst):this._textLeading},i.default.Renderer.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._setProperty("_textLeading",e*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},i.default.Renderer.prototype.textStyle=function(e){return e?(e!==o.NORMAL&&e!==o.ITALIC&&e!==o.BOLD&&e!==o.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},i.default.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},i.default.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},i.default.Renderer.prototype.textAlign=function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},i.default.Renderer.prototype.text=function(e,t,n,r,i){var a,s,l,c,u,h,d,f,p,m=this._pInst,g=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&void 0!==e){if("string"!=typeof e&&(e=e.toString()),a=(e=e.replace(/(\t)/g,"  ")).split("\n"),void 0!==r){for(l=f=0;l<a.length;l++){for(u="",d=a[l].split(" "),s=0;s<d.length;s++)if(h="".concat(u+d[s]," "),r<this.textWidth(h)){for(var y=d[s],v=0;v<y.length;v++)h="".concat(u+y[v]),r<this.textWidth(h)&&0<u.length?(u="".concat(y[v]),f+=m.textLeading()):u=h;u="".concat(u," ")}else u=h;l<a.length-1&&(f+=m.textLeading())}switch(this._rectMode===o.CENTER&&(t-=r/2,n-=i/2),this._textAlign){case o.CENTER:t+=r/2;break;case o.RIGHT:t+=r}var _=!1;if(void 0!==i){switch(this._textBaseline){case o.BOTTOM:p=n+(i-f),n=Math.max(p,n);break;case o.CENTER:p=n+(i-f)/2,n=Math.max(p,n);break;case o.BASELINE:_=!0,this._textBaseline=o.TOP}g=n+i-m.textAscent()}for(l=0;l<a.length;l++){for(u="",d=a[l].split(" "),s=0;s<d.length;s++)if(h="".concat(u+d[s]," "),r<this.textWidth(h)){for(var b=d[s],x=0;x<b.length;x++)if(h="".concat(u+b[x]),r<this.textWidth(h)&&0<u.length){var w=u.slice(-1),S="\n"!==w&&" "!==w;u="".concat(u).concat(S?"-":""),this._renderText(m,u,t,n,g),n+=m.textLeading(),u="".concat(b[x])}else u=h;u="".concat(u," ")}else u=h;this._renderText(m,u,t,n,g),n+=m.textLeading(),_&&(this._textBaseline=o.BASELINE)}}else{var A=0,E=m.textAlign().vertical;for(E===o.CENTER?A=(a.length-1)*m.textLeading()/2:E===o.BOTTOM&&(A=(a.length-1)*m.textLeading()),c=0;c<a.length;c++)this._renderText(m,a[c],t,n-A,g),n+=m.textLeading()}return m}},i.default.Renderer.prototype._applyDefaults=function(){return this},i.default.Renderer.prototype._isOpenType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===a(e)&&e.font&&e.font.supported},i.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var e=document.createElement("span");e.style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|";var t=document.createElement("div");t.style.display="inline-block",t.style.width="1px",t.style.height="0px";var n=document.createElement("div");n.appendChild(e),n.appendChild(t),n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n),t.style.verticalAlign="baseline";var r=s(t),i=s(e),o=r[1]-i[1];t.style.verticalAlign="bottom",r=s(t),i=s(e);var a=r[1]-i[1]-o;return document.body.removeChild(n),this._setProperty("_textAscent",o),this._setProperty("_textDescent",a),this};var l=i.default.Renderer;n.default=l},{"../core/constants":26,"./main":36}],40:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("./main")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),a=s(e("../image/filters"));function s(e){return e&&e.__esModule?e:{default:e}}e("./p5.Renderer");var l="rgba(0,0,0,0)";i.default.Renderer2D=function(e,t,n){return i.default.Renderer.call(this,e,t,n),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},i.default.Renderer2D.prototype=Object.create(i.default.Renderer.prototype),i.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=o.BLEND,this._setFill(o._DEFAULT_FILL),this._setStroke(o._DEFAULT_STROKE),this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},i.default.Renderer2D.prototype.resize=function(e,t){i.default.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},i.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof i.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var e,t=this._getFill(),n=(e=this._pInst).color.apply(e,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(n.levels);var r=n.toString();this._setFill(r),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},i.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},i.default.Renderer2D.prototype.fill=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setFill(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",t.levels)},i.default.Renderer2D.prototype.stroke=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setStroke(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",t.levels)},i.default.Renderer2D.prototype.erase=function(e,t){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var n=this._pInst.color(255,e).toString();this.drawingContext.fillStyle=n,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var r=this._pInst.color(255,t).toString();this.drawingContext.strokeStyle=r;var i=this._cachedBlendMode;this.blendMode(o.REMOVE),this._cachedBlendMode=i,this._isErasing=!0}},i.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},i.default.Renderer2D.prototype.image=function(e,t,n,r,o,a,s,l,c){var u;e.gifProperties&&e._animateGif(this._pInst);try{this._tint&&(i.default.MediaElement&&e instanceof i.default.MediaElement&&e.loadPixels(),e.canvas&&(u=this._getTintedImageCanvas(e))),u=u||e.canvas||e.elt;var h=1;e.width&&0<e.width&&(h=u.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(u,h*t,h*n,h*r,h*o,a,s,l,c),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}},i.default.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=a.default._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var r=n.getContext("2d"),i=r.createImageData(e.canvas.width,e.canvas.height),o=i.data,s=0;s<t.length;s+=4){var l=t[s],c=t[s+1],u=t[s+2],h=t[s+3];o[s]=l*this._tint[0]/255,o[s+1]=c*this._tint[1]/255,o[s+2]=u*this._tint[2]/255,o[s+3]=h*this._tint[3]/255}return r.putImageData(i,0,0),n},i.default.Renderer2D.prototype.blendMode=function(e){if(e===o.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==o.BLEND&&e!==o.REMOVE&&e!==o.DARKEST&&e!==o.LIGHTEST&&e!==o.DIFFERENCE&&e!==o.MULTIPLY&&e!==o.EXCLUSION&&e!==o.SCREEN&&e!==o.REPLACE&&e!==o.OVERLAY&&e!==o.HARD_LIGHT&&e!==o.SOFT_LIGHT&&e!==o.DODGE&&e!==o.BURN&&e!==o.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}},i.default.Renderer2D.prototype.blend=function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[n.length-1],a=Array.prototype.slice.call(n,0,n.length-1);this.drawingContext.globalCompositeOperation=o,i.default.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=e},i.default.Renderer2D.prototype._getPixel=function(e,t){var n;return[(n=this.drawingContext.getImageData(e,t,1,1).data)[0],n[1],n[2],n[3]]},i.default.Renderer2D.prototype.loadPixels=function(){var e=this._pixelsState,t=e._pixelDensity,n=this.width*t,r=this.height*t,i=this.drawingContext.getImageData(0,0,n,r);e._setProperty("imageData",i),e._setProperty("pixels",i.data)},i.default.Renderer2D.prototype.set=function(e,t,n){e=Math.floor(e),t=Math.floor(t);var r=this._pixelsState;if(n instanceof i.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(r._pixelDensity,r._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{var o=0,a=0,s=0,l=0,c=4*(t*r._pixelDensity*(this.width*r._pixelDensity)+e*r._pixelDensity);if(r.imageData||r.loadPixels.call(r),"number"==typeof n)c<r.pixels.length&&(s=a=o=n,l=255);else if(n instanceof Array){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");c<r.pixels.length&&(o=n[0],a=n[1],s=n[2],l=n[3])}else n instanceof i.default.Color&&c<r.pixels.length&&(o=n.levels[0],a=n.levels[1],s=n.levels[2],l=n.levels[3]);for(var u=0;u<r._pixelDensity;u++)for(var h=0;h<r._pixelDensity;h++)c=4*((t*r._pixelDensity+h)*this.width*r._pixelDensity+(e*r._pixelDensity+u)),r.pixels[c]=o,r.pixels[c+1]=a,r.pixels[c+2]=s,r.pixels[c+3]=l}},i.default.Renderer2D.prototype.updatePixels=function(e,t,n,r){var i=this._pixelsState,o=i._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(t=e=0,n=this.width,r=this.height),e*=o,t*=o,n*=o,r*=o,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=i.imageData),this.drawingContext.putImageData(i.imageData,e,t,0,0,n,r)},i.default.Renderer2D.prototype._acuteArcToBezier=function(e,t){var n=t/2,r=Math.cos(n),i=Math.sin(n),o=1/Math.tan(n),a=e+n,s=Math.cos(a),l=Math.sin(a),c=(4-r)/3,u=i+(r-c)*o;return{ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(c*s+u*l).toFixed(7),by:(c*l-u*s).toFixed(7),cx:(c*s-u*l).toFixed(7),cy:(c*l+u*s).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}},i.default.Renderer2D.prototype.arc=function(e,t,n,r,i,a,s){var l=this.drawingContext,c=n/2,u=r/2,h=0,d=[];for(e+=c,t+=u;1e-5<=a-i;)h=Math.min(a-i,o.HALF_PI),d.push(this._acuteArcToBezier(i,h)),i+=h;return this._doFill&&(l.beginPath(),d.forEach((function(n,r){0===r&&l.moveTo(e+n.ax*c,t+n.ay*u),l.bezierCurveTo(e+n.bx*c,t+n.by*u,e+n.cx*c,t+n.cy*u,e+n.dx*c,t+n.dy*u)})),s!==o.PIE&&null!=s||l.lineTo(e,t),l.closePath(),l.fill()),this._doStroke&&(l.beginPath(),d.forEach((function(n,r){0===r&&l.moveTo(e+n.ax*c,t+n.ay*u),l.bezierCurveTo(e+n.bx*c,t+n.by*u,e+n.cx*c,t+n.cy*u,e+n.dx*c,t+n.dy*u)})),s===o.PIE?(l.lineTo(e,t),l.closePath()):s===o.CHORD&&l.closePath(),l.stroke()),this},i.default.Renderer2D.prototype.ellipse=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,i=parseFloat(e[0]),o=parseFloat(e[1]),a=parseFloat(e[2]),s=parseFloat(e[3]);if(n&&!r){if(this._getFill()===l)return this}else if(!n&&r&&this._getStroke()===l)return this;var c=a/2*.5522847498,u=s/2*.5522847498,h=i+a,d=o+s,f=i+a/2,p=o+s/2;t.beginPath(),t.moveTo(i,p),t.bezierCurveTo(i,p-u,f-c,o,f,o),t.bezierCurveTo(f+c,o,h,p-u,h,p),t.bezierCurveTo(h,p+u,f+c,d,f,d),t.bezierCurveTo(f-c,d,i,p+u,i,p),n&&t.fill(),r&&t.stroke()},i.default.Renderer2D.prototype.line=function(e,t,n,r){var i=this.drawingContext;return this._doStroke&&(this._getStroke()===l||(i.beginPath(),i.moveTo(e,t),i.lineTo(n,r),i.stroke())),this},i.default.Renderer2D.prototype.point=function(e,t){var n=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===l)return this;var r=this._getStroke(),i=this._getFill();e=Math.round(e),t=Math.round(t),this._setFill(r),1<n.lineWidth?(n.beginPath(),n.arc(e,t,n.lineWidth/2,0,o.TWO_PI,!1),n.fill()):n.fillRect(e,t,1,1),this._setFill(i)},i.default.Renderer2D.prototype.quad=function(e,t,n,r,i,o,a,s){var c=this.drawingContext,u=this._doFill,h=this._doStroke;if(u&&!h){if(this._getFill()===l)return this}else if(!u&&h&&this._getStroke()===l)return this;return c.beginPath(),c.moveTo(e,t),c.lineTo(n,r),c.lineTo(i,o),c.lineTo(a,s),c.closePath(),u&&c.fill(),h&&c.stroke(),this},i.default.Renderer2D.prototype.rect=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=this.drawingContext,h=this._doFill,d=this._doStroke;if(h&&!d){if(this._getFill()===l)return this}else if(!h&&d&&this._getStroke()===l)return this;if(u.beginPath(),void 0===o)u.rect(t,n,r,i);else{void 0===a&&(a=o),void 0===s&&(s=a),void 0===c&&(c=s);var f=Math.abs(r),p=Math.abs(i),m=f/2,g=p/2;f<2*o&&(o=m),p<2*o&&(o=g),f<2*a&&(a=m),p<2*a&&(a=g),f<2*s&&(s=m),p<2*s&&(s=g),f<2*c&&(c=m),p<2*c&&(c=g),u.beginPath(),u.moveTo(t+o,n),u.arcTo(t+r,n,t+r,n+i,a),u.arcTo(t+r,n+i,t,n+i,s),u.arcTo(t,n+i,t,n,c),u.arcTo(t,n,t+r,n,o),u.closePath()}return this._doFill&&u.fill(),this._doStroke&&u.stroke(),this},i.default.Renderer2D.prototype.triangle=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,i=e[0],o=e[1],a=e[2],s=e[3],c=e[4],u=e[5];if(n&&!r){if(this._getFill()===l)return this}else if(!n&&r&&this._getStroke()===l)return this;t.beginPath(),t.moveTo(i,o),t.lineTo(a,s),t.lineTo(c,u),t.closePath(),n&&t.fill(),r&&t.stroke()},i.default.Renderer2D.prototype.endShape=function(e,t,n,r,i,a,s){if(0===t.length)return this;if(!this._doStroke&&!this._doFill)return this;var l,c,u,h=e===o.CLOSE;h&&!a&&t.push(t[0]);var d=t.length;if(!n||s!==o.POLYGON&&null!==s)if(!r||s!==o.POLYGON&&null!==s)if(!i||s!==o.POLYGON&&null!==s)if(s===o.POINTS)for(c=0;c<d;c++)l=t[c],this._doStroke&&this._pInst.stroke(l[6]),this._pInst.point(l[0],l[1]);else if(s===o.LINES)for(c=0;c+1<d;c+=2)l=t[c],this._doStroke&&this._pInst.stroke(t[c+1][6]),this._pInst.line(l[0],l[1],t[c+1][0],t[c+1][1]);else if(s===o.TRIANGLES)for(c=0;c+2<d;c+=3)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[c+2][6]),this.drawingContext.stroke());else if(s===o.TRIANGLE_STRIP)for(c=0;c+1<d;c++)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(l[0],l[1]),this._doStroke&&this._pInst.stroke(t[c+1][6]),this._doFill&&this._pInst.fill(t[c+1][5]),c+2<d&&(this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this._doStroke&&this._pInst.stroke(t[c+2][6]),this._doFill&&this._pInst.fill(t[c+2][5])),this._doFillStrokeClose(h);else if(s===o.TRIANGLE_FAN){if(2<d){for(this.drawingContext.beginPath(),c=2;c<d;c++)l=t[c],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[c-1][0],t[c-1][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),c<d-1&&(this._doFill&&l[5]!==t[c+1][5]||this._doStroke&&l[6]!==t[c+1][6])&&(this._doFill&&(this._pInst.fill(l[5]),this.drawingContext.fill(),this._pInst.fill(t[c+1][5])),this._doStroke&&(this._pInst.stroke(l[6]),this.drawingContext.stroke(),this._pInst.stroke(t[c+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(h)}}else if(s===o.QUADS)for(c=0;c+3<d;c+=4){for(l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),u=1;u<4;u++)this.drawingContext.lineTo(t[c+u][0],t[c+u][1]);this.drawingContext.lineTo(l[0],l[1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6]),this._doFillStrokeClose(h)}else if(s===o.QUAD_STRIP){if(3<d)for(c=0;c+1<d;c+=2)l=t[c],this.drawingContext.beginPath(),c+3<d?(this.drawingContext.moveTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+3][0],t[c+3][1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6])):(this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1])),this._doFillStrokeClose(h)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),c=1;c<d;c++)(l=t[c]).isVert&&(l.moveTo?this.drawingContext.moveTo(l[0],l[1]):this.drawingContext.lineTo(l[0],l[1]));this._doFillStrokeClose(h)}else{for(this.drawingContext.beginPath(),c=0;c<d;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.quadraticCurveTo(t[c][0],t[c][1],t[c][2],t[c][3]);this._doFillStrokeClose(h)}else{for(this.drawingContext.beginPath(),c=0;c<d;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.bezierCurveTo(t[c][0],t[c][1],t[c][2],t[c][3],t[c][4],t[c][5]);this._doFillStrokeClose(h)}else if(3<d){var f=[],p=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),c=1;c+2<d;c++)l=t[c],f[0]=[l[0],l[1]],f[1]=[l[0]+(p*t[c+1][0]-p*t[c-1][0])/6,l[1]+(p*t[c+1][1]-p*t[c-1][1])/6],f[2]=[t[c+1][0]+(p*t[c][0]-p*t[c+2][0])/6,t[c+1][1]+(p*t[c][1]-p*t[c+2][1])/6],f[3]=[t[c+1][0],t[c+1][1]],this.drawingContext.bezierCurveTo(f[1][0],f[1][1],f[2][0],f[2][1],f[3][0],f[3][1]);h&&this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this._doFillStrokeClose(h)}return a=i=r=n=!1,h&&t.pop(),this},i.default.Renderer2D.prototype.strokeCap=function(e){return e!==o.ROUND&&e!==o.SQUARE&&e!==o.PROJECT||(this.drawingContext.lineCap=e),this},i.default.Renderer2D.prototype.strokeJoin=function(e){return e!==o.ROUND&&e!==o.BEVEL&&e!==o.MITER||(this.drawingContext.lineJoin=e),this},i.default.Renderer2D.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this},i.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},i.default.Renderer2D.prototype._setFill=function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)},i.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},i.default.Renderer2D.prototype._setStroke=function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)},i.default.Renderer2D.prototype.bezier=function(e,t,n,r,i,o,a,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(n,r,i,o,a,s),this._pInst.endShape(),this},i.default.Renderer2D.prototype.curve=function(e,t,n,r,i,o,a,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(n,r),this._pInst.curveVertex(i,o),this._pInst.curveVertex(a,s),this._pInst.endShape(),this},i.default.Renderer2D.prototype._doFillStrokeClose=function(e){e&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},i.default.Renderer2D.prototype.applyMatrix=function(e,t,n,r,i,o){this.drawingContext.transform(e,t,n,r,i,o)},i.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},i.default.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},i.default.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},i.default.Renderer2D.prototype.translate=function(e,t){return e instanceof i.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this},i.default.Renderer2D.prototype.text=function(e,t,n,r,a){var s;void 0!==r&&this.drawingContext.textBaseline===o.BASELINE&&(s=!0,this.drawingContext.textBaseline=o.TOP);var l=i.default.Renderer.prototype.text.apply(this,arguments);return s&&(this.drawingContext.textBaseline=o.BASELINE),l},i.default.Renderer2D.prototype._renderText=function(e,t,n,r,i){if(!(i<=r))return e.push(),this._isOpenType()?this._textFont._renderPath(t,n,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,n,r),this._doFill&&(this._fillSet||this._setFill(o._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,n,r))),e.pop(),e},i.default.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},i.default.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t},i.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),i.default.Renderer.prototype.push.apply(this)},i.default.Renderer2D.prototype.pop=function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,i.default.Renderer.prototype.pop.call(this,e)};var c=i.default.Renderer2D;n.default=c},{"../image/filters":57,"./constants":26,"./main":36,"./p5.Renderer":39}],41:[function(e,t,n){"use strict";var r,i=(r=e("./main"))&&r.__esModule?r:{default:r};i.default.prototype._promisePreloads=[];var o=!(i.default.prototype.registerPromisePreload=function(e){i.default.prototype._promisePreloads.push(e)});function a(){return{}}i.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this._promisePreloads[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,l=this,c=s.method,u=s.addCallbacks,h=s.legacyPreloadSetup,d=s.target||this,f=d[c].bind(d);if(d===i.default.prototype){if(o)continue;l=null,f=d[c]}d[c]=this._wrapPromisePreload(l,f,u),h&&(d[h.method]=this._legacyPreloadGenerator(l,h,d[c]))}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}o=!0},i.default.prototype._wrapPromisePreload=function(e,t,n){var r=function(){var e=this;this._incrementPreload();for(var r=null,i=null,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if(n)for(var l=a.length-1;0<=l&&!i&&"function"==typeof a[l];l--)i=r,r=a.pop();var c=Promise.resolve(t.apply(this,a));return r&&c.then(r),i&&c.catch(i),c.then((function(){return e._decrementPreload()})),c};return e&&(r=r.bind(e)),r},i.default.prototype._legacyPreloadGenerator=function(e,t,n){var r=t.createBaseObject||a,i=function(){var e=this;this._incrementPreload();var t=r.apply(this,arguments);return n.apply(this,arguments).then((function(n){Object.assign(t,n),e._decrementPreload()})),t};return e&&(i=i.bind(e)),i}},{"./main":36}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./main"))&&r.__esModule?r:{default:r},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var s="defaultCanvas0";i.default.prototype.createCanvas=function(e,t,n){i.default._validateParameters("createCanvas",arguments);var r,a=n||o.P2D;if(a===o.WEBGL){if(r=document.getElementById(s)){r.parentNode.removeChild(r);var l=this._renderer;this._elements=this._elements.filter((function(e){return e!==l}))}(r=document.createElement("canvas")).id=s,r.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)r=this.canvas;else{r=document.createElement("canvas");for(var c=0;document.getElementById("defaultCanvas".concat(c));)c++;s="defaultCanvas".concat(c),r.id=s,r.classList.add("p5Canvas")}if(this._setupDone||(r.dataset.hidden=!0,r.style.visibility="hidden"),this._userNode)this._userNode.appendChild(r);else{if(0===document.getElementsByTagName("main").length){var u=document.createElement("main");document.body.appendChild(u)}document.getElementsByTagName("main")[0].appendChild(r)}return a===o.WEBGL?(this._setProperty("_renderer",new i.default.RendererGL(r,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new i.default.Renderer2D(r,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},i.default.prototype.resizeCanvas=function(e,t,n){if(i.default._validateParameters("resizeCanvas",arguments),this._renderer){var r={};for(var o in this.drawingContext){var s=this.drawingContext[o];"object"!==a(s)&&"function"!=typeof s&&(r[o]=s)}for(var l in this._renderer.resize(e,t),this.width=e,this.height=t,r)try{this.drawingContext[l]=r[l]}catch(e){}n||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},i.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},i.default.prototype.createGraphics=function(e,t,n){return i.default._validateParameters("createGraphics",arguments),new i.default.Graphics(e,t,n,this)},i.default.prototype.blendMode=function(e){i.default._validateParameters("blendMode",arguments),e===o.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=o.BLEND),this._renderer.blendMode(e)};var l=i.default;n.default=l},{"../webgl/p5.RendererGL":90,"./constants":26,"./main":36,"./p5.Graphics":38,"./p5.Renderer2D":40}],43:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("../main")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../constants")),a=s(e("../helpers"));function s(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),i.default.prototype._normalizeArcAngles=function(e,t,n,r,i){var a;return e-=o.TWO_PI*Math.floor(e/o.TWO_PI),t-=o.TWO_PI*Math.floor(t/o.TWO_PI),a=Math.min(Math.abs(e-t),o.TWO_PI-Math.abs(e-t)),i&&(e=e<=o.HALF_PI?Math.atan(n/r*Math.tan(e)):e>o.HALF_PI&&e<=3*o.HALF_PI?Math.atan(n/r*Math.tan(e))+o.PI:Math.atan(n/r*Math.tan(e))+o.TWO_PI,t=t<=o.HALF_PI?Math.atan(n/r*Math.tan(t)):t>o.HALF_PI&&t<=3*o.HALF_PI?Math.atan(n/r*Math.tan(t))+o.PI:Math.atan(n/r*Math.tan(t))+o.TWO_PI),t<e&&(t+=o.TWO_PI),{start:e,stop:t,correspondToSamePoint:a<1e-5}},i.default.prototype.arc=function(e,t,n,r,o,s,l,c){if(i.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(o===s)return this;o=this._toRadians(o),s=this._toRadians(s),n=Math.abs(n),r=Math.abs(r);var u=a.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),h=this._normalizeArcAngles(o,s,u.w,u.h,!0);return h.correspondToSamePoint?this._renderer.ellipse([u.x,u.y,u.w,u.h,c]):(this._renderer.arc(u.x,u.y,u.w,u.h,h.start,h.stop,l,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[u.x,u.y,u.w,u.h,h.start,h.stop,l])),this},i.default.prototype.ellipse=function(e,t,n,r,o){return i.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},i.default.prototype.circle=function(){i.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,e)},i.default.prototype._renderEllipse=function(e,t,n,r,i){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;n<0&&(n=Math.abs(n)),void 0===r?r=n:r<0&&(r=Math.abs(r));var o=a.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode);return this._renderer.ellipse([o.x,o.y,o.w,o.h,i]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[o.x,o.y,o.w,o.h]),this},i.default.prototype.line=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return i.default._validateParameters("line",t),this._renderer._doStroke&&(r=this._renderer).line.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",t),this},i.default.prototype.point=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return i.default._validateParameters("point",t),this._renderer._doStroke&&(1===t.length&&t[0]instanceof i.default.Vector?this._renderer.point.call(this._renderer,t[0].x,t[0].y,t[0].z):((r=this._renderer).point.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",t))),this},i.default.prototype.quad=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return i.default._validateParameters("quad",t),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&12!==t.length?this._renderer.quad.call(this._renderer,t[0],t[1],0,t[2],t[3],0,t[4],t[5],0,t[6],t[7],0):((r=this._renderer).quad.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",t))),this},i.default.prototype.rect=function(){return i.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},i.default.prototype.square=function(e,t,n,r,o,a,s){return i.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,n,n,r,o,a,s)},i.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=a.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},i.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this};var l=i.default;n.default=l},{"../constants":26,"../friendly_errors/fes_core":28,"../friendly_errors/file_errors":29,"../friendly_errors/validate_params":31,"../helpers":32,"../main":36}],44:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../constants"));o.default.prototype.ellipseMode=function(e){return o.default._validateParameters("ellipseMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._ellipseMode=e),this},o.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},o.default.prototype.rectMode=function(e){return o.default._validateParameters("rectMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._rectMode=e),this},o.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},o.default.prototype.strokeCap=function(e){return o.default._validateParameters("strokeCap",arguments),e!==a.ROUND&&e!==a.SQUARE&&e!==a.PROJECT||this._renderer.strokeCap(e),this},o.default.prototype.strokeJoin=function(e){return o.default._validateParameters("strokeJoin",arguments),e!==a.ROUND&&e!==a.BEVEL&&e!==a.MITER||this._renderer.strokeJoin(e),this},o.default.prototype.strokeWeight=function(e){return o.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var s=o.default;n.default=s},{"../constants":26,"../main":36}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../main"))&&r.__esModule?r:{default:r};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),i.default.prototype.bezier=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("bezier",n),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,n),this},i.default.prototype.bezierDetail=function(e){return i.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},i.default.prototype.bezierPoint=function(e,t,n,r,o){i.default._validateParameters("bezierPoint",arguments);var a=1-o;return Math.pow(a,3)*e+3*Math.pow(a,2)*o*t+3*a*Math.pow(o,2)*n+Math.pow(o,3)*r},i.default.prototype.bezierTangent=function(e,t,n,r,o){i.default._validateParameters("bezierTangent",arguments);var a=1-o;return 3*r*Math.pow(o,2)-3*n*Math.pow(o,2)+6*n*a*o-6*t*a*o+3*t*Math.pow(a,2)-3*e*Math.pow(a,2)},i.default.prototype.curve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return i.default._validateParameters("curve",t),this._renderer._doStroke&&(r=this._renderer).curve.apply(r,t),this},i.default.prototype.curveDetail=function(e){return i.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},i.default.prototype.curveTightness=function(e){return i.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},i.default.prototype.curvePoint=function(e,t,n,r,o){i.default._validateParameters("curvePoint",arguments);var a=o*o*o,s=o*o;return e*(-.5*a+s-.5*o)+t*(1.5*a-2.5*s+1)+n*(-1.5*a+2*s+.5*o)+r*(.5*a-.5*s)},i.default.prototype.curveTangent=function(e,t,n,r,o){i.default._validateParameters("curveTangent",arguments);var a=o*o;return e*(-3*a/2+2*o-.5)+t*(9*a/2-5*o)+n*(-9*a/2+4*o+.5)+r*(3*a/2-o)};var o=i.default;n.default=o},{"../friendly_errors/fes_core":28,"../friendly_errors/file_errors":29,"../friendly_errors/validate_params":31,"../main":36}],46:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../constants")),s=null,l=[],c=[],u=!1,h=!1,d=!1,f=!1,p=!0;o.default.prototype.beginContour=function(){return c=[],f=!0,this},o.default.prototype.beginShape=function(e){var t;return o.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(s=e===a.POINTS||e===a.LINES||e===a.TRIANGLES||e===a.TRIANGLE_FAN||e===a.TRIANGLE_STRIP||e===a.QUADS||e===a.QUAD_STRIP?e:null,l=[],c=[]),this},o.default.prototype.bezierVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;if(o.default._validateParameters("bezierVertex",t),this._renderer.isP3D)(r=this._renderer).bezierVertex.apply(r,t);else if(0===l.length)o.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{u=!0;for(var i=[],a=0;a<t.length;a++)i[a]=t[a];i.isVert=!1,f?c.push(i):l.push(i)}return this},o.default.prototype.curveVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return o.default._validateParameters("curveVertex",t),this._renderer.isP3D?(r=this._renderer).curveVertex.apply(r,t):(h=!0,this.vertex(t[0],t[1])),this},o.default.prototype.endContour=function(){var e=c[0].slice();e.isVert=c[0].isVert,e.moveTo=!1,c.push(e),p&&(l.push(l[0]),p=!1);for(var t=0;t<c.length;t++)l.push(c[t]);return this},o.default.prototype.endShape=function(e){if(o.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(e,h,u,d,f,s);else{if(0===l.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===a.CLOSE;t&&!f&&l.push(l[0]),this._renderer.endShape(e,l,h,u,d,f,s),p=!(f=d=u=h=!1),t&&l.pop()}return this},o.default.prototype.quadraticVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(o.default._validateParameters("quadraticVertex",t),this._renderer.isP3D){var r;(r=this._renderer).quadraticVertex.apply(r,t)}else{if(this._contourInited){var i={};return i.x=t[0],i.y=t[1],i.x3=t[2],i.y3=t[3],i.type=a.QUADRATIC,this._contourVertices.push(i),this}if(0<l.length){d=!0;for(var s=[],u=0;u<t.length;u++)s[u]=t[u];s.isVert=!1,f?c.push(s):l.push(s)}else o.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},o.default.prototype.vertex=function(e,t,n,r,i){if(this._renderer.isP3D){var o;(o=this._renderer).vertex.apply(o,arguments)}else{var a=[];a.isVert=!0,a[0]=e,a[1]=t,a[2]=0,a[3]=0,a[4]=0,a[5]=this._renderer._getFill(),a[6]=this._renderer._getStroke(),n&&(a.moveTo=n),f?(0===c.length&&(a.moveTo=!0),c.push(a)):l.push(a)}return this};var m=o.default;n.default=m},{"../constants":26,"../main":36}],47:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var e=Object.keys,t=Object.defineProperty,n="function"==typeof Symbol&&"symbol"===r(Symbol()),i=Object.prototype.propertyIsEnumerable,o=function(e){return function(t){return i.call(e,t)}};t(Object,"assign",{value:function(t,r){if(null==t)throw new TypeError("target must be an object");var i,a,s,l,c=Object(t);for(i=1;i<arguments.length;++i)for(a=Object(arguments[i]),l=e(a),n&&Object.getOwnPropertySymbols&&l.push.apply(l,Object.getOwnPropertySymbols(a).filter(o(a))),s=0;s<l.length;++s)c[l[s]]=a[l[s]];return c},configurable:!0,enumerable:!1,writable:!0})}}()},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./main"))&&r.__esModule?r:{default:r};i.default.prototype.noLoop=function(){this._loop=!1},i.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},i.default.prototype.isLooping=function(){return this._loop},i.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},i.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},i.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e);(isNaN(t)||t<1)&&(t=1);var n=this._isGlobal?window:this;if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(var r=function(e){e.call(n)},i=0;i<t;i++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(r),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(r)}}}};var o=i.default;n.default=o},{"./main":36}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./main"))&&r.__esModule?r:{default:r};i.default.prototype.applyMatrix=function(e,t,n,r,i,o){var a;return(a=this._renderer).applyMatrix.apply(a,arguments),this},i.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},i.default.prototype.rotate=function(e,t){return i.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},i.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),i.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},i.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),i.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},i.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),i.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},i.default.prototype.scale=function(e,t,n){if(i.default._validateParameters("scale",arguments),e instanceof i.default.Vector){var r=e;e=r.x,t=r.y,n=r.z}else if(e instanceof Array){var o=e;e=o[0],t=o[1],n=o[2]||1}return isNaN(t)?t=n=e:isNaN(n)&&(n=1),this._renderer.scale.call(this._renderer,e,t,n),this},i.default.prototype.shearX=function(e){i.default._validateParameters("shearX",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,0,Math.tan(t),1,0,0),this},i.default.prototype.shearY=function(e){i.default._validateParameters("shearY",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,Math.tan(t),0,1,0,0),this},i.default.prototype.translate=function(e,t,n){return i.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this};var o=i.default;n.default=o},{"./main":36}],50:[function(e,t,n){"use strict";var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var n=a(t);switch(n){case"number":case"boolean":t=t.toString();break;case"object":t instanceof i.default.Color?n="p5.Color":t instanceof i.default.Vector&&(n="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t);var r="".concat(e,"p5TypeID");localStorage.setItem(r,n)},i.default.prototype.getItem=function(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===n)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,o(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,o(t))}return t},i.default.prototype.clearStorage=function(){localStorage.clear()},i.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":36}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.createStringDict=function(e,t){return i.default._validateParameters("createStringDict",arguments),new i.default.StringDict(e,t)},i.default.prototype.createNumberDict=function(e,t){return i.default._validateParameters("createNumberDict",arguments),new i.default.NumberDict(e,t)},i.default.TypedDict=function(e,t){return e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this},i.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},i.default.TypedDict.prototype.hasKey=function(e){return this.data.hasOwnProperty(e)},i.default.TypedDict.prototype.get=function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))},i.default.TypedDict.prototype.set=function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")},i.default.TypedDict.prototype._addObj=function(e){for(var t in e)this.set(t,e[t])},i.default.TypedDict.prototype.create=function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},i.default.TypedDict.prototype.clear=function(){this.data={}},i.default.TypedDict.prototype.remove=function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]},i.default.TypedDict.prototype.print=function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))},i.default.TypedDict.prototype.saveTable=function(e){var t="";for(var n in this.data)t+="".concat(n,",").concat(this.data[n],"\n");var r=new Blob([t],{type:"text/csv"});i.default.prototype.downloadFile(r,e||"mycsv","csv")},i.default.TypedDict.prototype.saveJSON=function(e,t){i.default.prototype.saveJSON(this.data,e,t)},i.default.TypedDict.prototype._validate=function(e){return!0},i.default.StringDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default.TypedDict.apply(this,t)},i.default.StringDict.prototype=Object.create(i.default.TypedDict.prototype),i.default.StringDict.prototype._validate=function(e){return"string"==typeof e},i.default.NumberDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default.TypedDict.apply(this,t)},i.default.NumberDict.prototype=Object.create(i.default.TypedDict.prototype),i.default.NumberDict.prototype._validate=function(e){return"number"==typeof e},i.default.NumberDict.prototype.add=function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},i.default.NumberDict.prototype.sub=function(e,t){this.add(e,-t)},i.default.NumberDict.prototype.mult=function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},i.default.NumberDict.prototype.div=function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},i.default.NumberDict.prototype._valueTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t=this.data[Object.keys(this.data)[0]];for(var n in this.data)this.data[n]*e<t*e&&(t=this.data[n]);return t},i.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},i.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},i.default.NumberDict.prototype._keyTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],n=1;n<Object.keys(this.data).length;n++)Object.keys(this.data)[n]*e<t*e&&(t=Object.keys(this.data)[n]);return t},i.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},i.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var o=i.default.TypedDict;n.default=o},{"../core/main":36}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){(t._userNode?t._userNode:document.body).appendChild(e);var r=n?new i.default.MediaElement(e,t):new i.default.Element(e,t);return t._elements.push(r),r}function s(e,t,n,r){var i=document.createElement(t);"string"==typeof(n=n||"")&&(n=[n]);var o=!0,s=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value,d=document.createElement("source");d.setAttribute("src",h),i.appendChild(d)}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}"function"==typeof r&&i.addEventListener("canplaythrough",(function e(){r(),i.removeEventListener("canplaythrough",e)}));var f=a(i,e,!0);return f.loadedmetadata=!1,i.addEventListener("loadedmetadata",(function(){f.width=i.videoWidth,f.height=i.videoHeight,0===f.elt.width&&(f.elt.width=i.videoWidth),0===f.elt.height&&(f.elt.height=i.videoHeight),f.presetPlaybackRate&&(f.elt.playbackRate=f.presetPlaybackRate,delete f.presetPlaybackRate),f.loadedmetadata=!0})),f}function l(e,t,n,r){this.callback=e,this.time=t,this.id=n,this.val=r}i.default.prototype.select=function(e,t){i.default._validateParameters("select",arguments);var n=this._getContainer(t).querySelector(e);return n?this._wrapElement(n):null},i.default.prototype.selectAll=function(e,t){i.default._validateParameters("selectAll",arguments);var n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(var o=0;o<r.length;o++){var a=this._wrapElement(r[o]);n.push(a)}return n},i.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof i.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},i.default.prototype._wrapElement=function(e){var t=Array.prototype.slice.call(e.children);if("INPUT"!==e.tagName||"checkbox"!==e.type)return"VIDEO"===e.tagName||"AUDIO"===e.tagName?new i.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new i.default.Element(e,this)):0<t.length&&t.every((function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName}))?this.createRadio(new i.default.Element(e,this)):new i.default.Element(e,this);var n=new i.default.Element(e,this);return n.checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!!arguments[0],this)},n},i.default.prototype.removeElements=function(e){i.default._validateParameters("removeElements",arguments),this._elements.filter((function(e){return!(e.elt instanceof HTMLCanvasElement)})).map((function(e){return e.remove()}))},i.default.Element.prototype.changed=function(e){return i.default.Element._adjustListener("change",e,this),this},i.default.Element.prototype.input=function(e){return i.default.Element._adjustListener("input",e,this),this},i.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,a(t,this)},i.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,a(t,this)},i.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,a(t,this)},i.default.prototype.createImg=function(){i.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),n=arguments;return 1<n.length&&"string"==typeof n[1]&&(t.alt=n[1]),2<n.length&&"string"==typeof n[2]&&(t.crossOrigin=n[2]),t.src=n[0],e=a(t,this),t.addEventListener("load",(function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var r=n[n.length-1];"function"==typeof r&&r(e)})),e},i.default.prototype.createA=function(e,t,n){i.default._validateParameters("createA",arguments);var r=document.createElement("a");return r.href=e,r.innerHTML=t,n&&(r.target=n),a(r,this)},i.default.prototype.createSlider=function(e,t,n,r){i.default._validateParameters("createSlider",arguments);var o=document.createElement("input");return o.type="range",o.min=e,o.max=t,0===r?o.step=1e-18:r&&(o.step=r),"number"==typeof n&&(o.value=n),a(o,this)},i.default.prototype.createButton=function(e,t){i.default._validateParameters("createButton",arguments);var n=document.createElement("button");return n.innerHTML=e,t&&(n.value=t),a(n,this)},i.default.prototype.createCheckbox=function(){i.default._validateParameters("createCheckbox",arguments);var e=document.createElement("div"),t=document.createElement("input");t.type="checkbox",e.appendChild(t);var n=a(e,this);if(n.checked=function(){var e=n.elt.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!!arguments[0]}return n},this.value=function(e){return n.value=e,this},arguments[0]){var r=Math.random().toString(36).slice(2),o=document.createElement("label");t.setAttribute("id",r),o.htmlFor=r,n.value(arguments[0]),o.appendChild(document.createTextNode(arguments[0])),e.appendChild(o)}return arguments[1]&&(t.checked=!0),n},i.default.prototype.createSelect=function(){var e;i.default._validateParameters("createSelect",arguments);var t=arguments[0];if(t instanceof i.default.Element&&t.elt instanceof HTMLSelectElement)e=t,this.elt=t.elt;else if(t instanceof HTMLSelectElement)e=a(t,this),this.elt=t;else{var n=document.createElement("select");t&&"boolean"==typeof t&&n.setAttribute("multiple","true"),e=a(n,this),this.elt=n}return e.option=function(e,t){var n;if(void 0!==e){for(var r=0;r<this.elt.length;r+=1)if(this.elt[r].innerHTML===e){n=r;break}if(void 0!==n)!1===t?this.elt.remove(n):this.elt[n].value=t;else{var i=document.createElement("option");i.innerHTML=e,i.value=void 0===t?e:t,this.elt.appendChild(i),this._pInst._elements.push(i)}}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=this.elt.selectedOptions[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(l.value)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e},i.default.prototype.createRadio=function(){var e,t,n=arguments[0];n instanceof HTMLDivElement||n instanceof HTMLSpanElement?(e=n,"string"==typeof arguments[1]&&(t=arguments[1])):("string"==typeof n&&(t=n),e=document.createElement("div"));var r=a(this.elt=e,this);function i(e){return e instanceof HTMLInputElement&&"radio"===e.type}function o(e){return e.nextElementSibling instanceof HTMLLabelElement}return r._name=t||"radioOption",r._getOptionsArray=function(){return Array.from(this.elt.children).filter(i)},r.option=function(e,t){var n,i,a=!0,s=!1,l=void 0;try{for(var c,u=r._getOptionsArray()[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var h=c.value;if(h.value===e){n=h;break}}}catch(e){s=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}return void 0===n&&((n=document.createElement("input")).setAttribute("type","radio"),n.setAttribute("value",e),this.elt.appendChild(n)),o(n)?i=n.nextElementSibling:(i=document.createElement("label"),n.insertAdjacentElement("afterend",i)),i.innerHTML=void 0===t?e:t,n.setAttribute("name",r._name),n},r.remove=function(e){var t=!0,n=!1,i=void 0;try{for(var a,s=r._getOptionsArray()[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value;if(l.value===e)return o(l)&&l.nextElementSibling.remove(),void l.remove()}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}},r.value=function(){var e="",t=!0,n=!1,i=void 0;try{for(var o,a=r._getOptionsArray()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.checked){e=s.value;break}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e},r.selected=function(e){var t=null;if(void 0===e){var n=!0,i=!1,o=void 0;try{for(var a,s=r._getOptionsArray()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(l.checked){t=l;break}}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}else{var c=!0,u=!1,h=void 0;try{for(var d,f=r._getOptionsArray()[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;p.value===e&&(p.setAttribute("checked",!0),t=p)}}catch(e){u=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}}return t},r.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,n=!1,i=void 0;try{for(var o,a=r._getOptionsArray()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)o.value.setAttribute("disabled",e)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},r},i.default.prototype.createColorPicker=function(e){i.default._validateParameters("createColorPicker",arguments);var t,n=document.createElement("input");return n.type="color",e?e instanceof i.default.Color?n.value=e.toString("#rrggbb"):(i.default.prototype._colorMode="rgb",i.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},n.value=i.default.prototype.color(e).toString("#rrggbb")):n.value="#000000",(t=a(n,this)).color=function(){return e&&(e.mode&&(i.default.prototype._colorMode=e.mode),e.maxes&&(i.default.prototype._colorMaxes=e.maxes)),i.default.prototype.color(this.elt.value)},t},i.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text";i.default._validateParameters("createInput",arguments);var n=document.createElement("input");return n.setAttribute("value",e),n.setAttribute("type",t),a(n,this)},i.default.prototype.createFileInput=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(i.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var n=document.createElement("input");return n.setAttribute("type","file"),t&&n.setAttribute("multiple",!0),n.addEventListener("change",(function(t){var n=!0,r=!1,o=void 0;try{for(var a,s=t.target.files[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;i.default.File._load(l,e)}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}),!1),a(n,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},i.default.prototype.createVideo=function(e,t){return i.default._validateParameters("createVideo",arguments),s(this,"video",e,t)},i.default.prototype.createAudio=function(e,t){return i.default._validateParameters("createAudio",arguments),s(this,"audio",e,t)},i.default.prototype.VIDEO="video",i.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),i.default.prototype.createCapture=function(){if(i.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var e,t,n=!0,r=!0,s=!0,l=!1,c=void 0;try{for(var u,h=arguments[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;d===i.default.prototype.VIDEO?r=!1:d===i.default.prototype.AUDIO?n=!1:"object"===o(d)?e=d:"function"==typeof d&&(t=d)}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}e=e||{video:n,audio:r};var f=document.createElement("video");f.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(e).then((function(e){try{"srcObject"in f?f.srcObject=e:f.src=window.URL.createObjectURL(e)}catch(t){f.src=e}}),console.log);var p=a(f,this,!0);return p.loadedmetadata=!1,f.addEventListener("loadedmetadata",(function(){f.play(),f.width?(p.width=f.width,p.height=f.height):(p.width=p.elt.width=f.videoWidth,p.height=p.elt.height=f.videoHeight),p.loadedmetadata=!0,t&&t(f.srcObject)})),p},i.default.prototype.createElement=function(e,t){i.default._validateParameters("createElement",arguments);var n=document.createElement(e);return void 0!==t&&(n.innerHTML=t),a(n,this)},i.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},i.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},i.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},i.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},i.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof i.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},i.default.Element.prototype.center=function(e){var t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,i={x:this.elt.offsetLeft,y:this.elt.offsetTop};n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var o=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(o/2+this.parent().offsetLeft,a/2+this.parent().offsetTop):"horizontal"===e?this.position(o/2+this.parent().offsetLeft,i.y):"vertical"===e&&this.position(i.x,a/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this},i.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},i.default.Element.prototype.position=function(){if(0===arguments.length)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var e="absolute";return"static"!==arguments[2]&&"fixed"!==arguments[2]&&"relative"!==arguments[2]&&"sticky"!==arguments[2]&&"initial"!==arguments[2]&&"inherit"!==arguments[2]||(e=arguments[2]),this.elt.style.position=e,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},i.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":arguments[3]+"px"),this.elt.style.transform+=e,this},i.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=e,this},i.default.Element.prototype.style=function(e,t){if(t instanceof i.default.Color&&(t="rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")"),void 0===t){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var n=e.split(";"),r=0;r<n.length;r++){var o=n[r].split(":");o[0]&&o[1]&&(this.elt.style[o[0].trim()]=o[1].trim())}}else if(this.elt.style[e]=t,"width"===e||"height"===e||"left"===e||"top"===e){var a=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/\D+/g,"");this[e]=parseInt(a,10)}return this},i.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)},i.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},i.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},i.default.Element.prototype.show=function(){return this.elt.style.display="block",this},i.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},i.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=e,r=t,o=i.default.prototype.AUTO;if(n!==o||r!==o){if(n===o?n=t*this.width/this.height:r===o&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var a,s={},l=this.elt.getContext("2d");for(a in l)s[a]=l[a];for(a in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),s)this.elt.getContext("2d")[a]=s[a]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},i.default.Element.prototype.remove=function(){if(this instanceof i.default.MediaElement){this.stop();var e=this.elt.srcObject;null!==e&&e.getTracks().forEach((function(e){e.stop()}))}var t=this._pInst._elements.indexOf(this);for(var n in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(n,this._events[n]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},i.default.Element.prototype.drop=function(e,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var n=function(e){e.preventDefault()};this.elt.addEventListener("dragover",n),this.elt.addEventListener("dragleave",n)}i.default.Element._attachListener("drop",(function(n){n.preventDefault(),"function"==typeof t&&t.call(this,n);for(var r=n.dataTransfer.files,o=0;o<r.length;o++){var a=r[o];i.default.File._load(a,e)}}),this)}else console.log("The File APIs are not fully supported in this browser.");return this},i.default.MediaElement=function(e,t){i.default.Element.call(this,e,t);var n=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(t){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var i=document.createElement("source");i.src=t,e.appendChild(i),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)}},i.default.MediaElement.prototype=Object.create(i.default.Element.prototype),i.default.MediaElement.prototype.play=function(){var e,t=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch((function(e){"NotAllowedError"===e.name?i.default._friendlyAutoplayError(t.src):console.error("Media play method encountered an unexpected error",e)})),this},i.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},i.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},i.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},i.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},i.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var e=this,t=setTimeout((function(){return i.default._friendlyAutoplayError(e.src)}),500);this.elt.addEventListener("play",(function(){return clearTimeout(t)}),{passive:!0,once:!0})},i.default.MediaElement.prototype.autoplay=function(e){var t=this,n=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",e),e&&!n){var r=function(){return t._setupAutoplayFailDetection()};4===this.elt.readyState?r():this.elt.addEventListener("canplay",r,{passive:!0,once:!0})}return this},i.default.MediaElement.prototype.volume=function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e},i.default.MediaElement.prototype.speed=function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e},i.default.MediaElement.prototype.time=function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)},i.default.MediaElement.prototype.duration=function(){return this.elt.duration},i.default.MediaElement.prototype.pixels=[],i.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},i.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),i.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},i.default.MediaElement.prototype.updatePixels=function(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),i.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this},i.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),i.default.Renderer2D.prototype.get.apply(this,arguments)},i.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),i.default.Renderer2D.prototype._getPixel.apply(this,arguments)},i.default.MediaElement.prototype.set=function(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),i.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))},i.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),i.default.prototype.copy.apply(this,arguments)},i.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),i.default.Image.prototype.mask.apply(this,arguments)},i.default.MediaElement.prototype.isModified=function(){return this._modified},i.default.MediaElement.prototype.setModified=function(e){this._modified=e},i.default.MediaElement.prototype.onended=function(e){return this._onended=e,this},i.default.MediaElement.prototype.connect=function(e){var t,n;if("function"==typeof i.default.prototype.getAudioContext)t=i.default.prototype.getAudioContext(),n=i.default.soundOut.input;else try{n=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)},i.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},i.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},i.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},i.default.MediaElement.prototype.addCue=function(e,t,n){var r=this._cueIDCounter++,i=new l(t,e,r,n);return this._cues.push(i),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r},i.default.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)},i.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},i.default.MediaElement.prototype._onTimeUpdate=function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e},i.default.File=function(e,t){this.file=e,this._pInst=t;var n=e.type.split("/");this.type=n[0],this.subtype=n[1],this.name=e.name,this.size=e.size,this.data=void 0},i.default.File._createLoader=function(e,t){var n=new FileReader;return n.onload=function(n){var r=new i.default.File(e);if("application/json"===r.file.type)r.data=JSON.parse(n.target.result);else if("text/xml"===r.file.type){var o=(new DOMParser).parseFromString(n.target.result,"text/xml");r.data=new i.default.XML(o.documentElement)}else r.data=n.target.result;t(r)},n},i.default.File._load=function(e,t){if(/^text\//.test(e.type)||"application/json"===e.type)i.default.File._createLoader(e,t).readAsText(e);else if(/^(video|audio)\//.test(e.type)){var n=new i.default.File(e);n.data=URL.createObjectURL(e),t(n)}else i.default.File._createLoader(e,t).readAsDataURL(e)};var c=i.default;n.default=c},{"../core/main":36}],53:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));o.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",o.default.prototype.accelerationX=0,o.default.prototype.accelerationY=0,o.default.prototype.accelerationZ=0,o.default.prototype.pAccelerationX=0,o.default.prototype.pAccelerationY=0,o.default.prototype.pAccelerationZ=0,o.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},o.default.prototype.rotationX=0,o.default.prototype.rotationY=0,o.default.prototype.rotationZ=0,o.default.prototype.pRotationX=0,o.default.prototype.pRotationY=0;var s=o.default.prototype.pRotationZ=0,l=0,c=0,u="clockwise",h="clockwise",d="clockwise";o.default.prototype.pRotateDirectionX=void 0,o.default.prototype.pRotateDirectionY=void 0,o.default.prototype.pRotateDirectionZ=void 0,o.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},o.default.prototype.turnAxis=void 0;var f=.5,p=30;o.default.prototype.setMoveThreshold=function(e){o.default._validateParameters("setMoveThreshold",arguments),f=e},o.default.prototype.setShakeThreshold=function(e){o.default._validateParameters("setShakeThreshold",arguments),p=e},o.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===a.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},o.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},o.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,n=this._isGlobal?window:this;if("function"==typeof n.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&n.deviceMoved(),"function"==typeof n.deviceTurned){var r=this.rotationX+180,i=this.pRotationX+180,o=s+180;0<r-i&&r-i<270||r-i<-270?u="clockwise":(r-i<0||270<r-i)&&(u="counter-clockwise"),u!==this.pRotateDirectionX&&(o=r),90<Math.abs(r-o)&&Math.abs(r-o)<270&&(o=r,this._setProperty("turnAxis","X"),n.deviceTurned()),this.pRotateDirectionX=u,s=o-180;var a=this.rotationY+180,m=this.pRotationY+180,g=l+180;0<a-m&&a-m<270||a-m<-270?h="clockwise":(a-m<0||270<a-this.pRotationY)&&(h="counter-clockwise"),h!==this.pRotateDirectionY&&(g=a),90<Math.abs(a-g)&&Math.abs(a-g)<270&&(g=a,this._setProperty("turnAxis","Y"),n.deviceTurned()),this.pRotateDirectionY=h,l=g-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?d="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(c=this.rotationZ),90<Math.abs(this.rotationZ-c)&&Math.abs(this.rotationZ-c)<270&&(c=this.rotationZ,this._setProperty("turnAxis","Z"),n.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)}"function"==typeof n.deviceShaken&&(null!==this.pAccelerationX&&(e=Math.abs(this.accelerationX-this.pAccelerationX),t=Math.abs(this.accelerationY-this.pAccelerationY)),p<e+t&&n.deviceShaken())};var m=o.default;n.default=m},{"../core/constants":26,"../core/main":36}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.isKeyPressed=!1,i.default.prototype.keyIsPressed=!1,i.default.prototype.key="",i.default.prototype.keyCode=0,i.default.prototype._onkeydown=function(e){if(!this._downKeys[e.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"!=typeof t.keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault()}},i.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},i.default.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyTyped&&!1===t.keyTyped(e)&&e.preventDefault()}},i.default.prototype._onblur=function(e){this._downKeys={}},i.default.prototype.keyIsDown=function(e){return i.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},i.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1};var o=i.default;n.default=o},{"../core/main":36}],55:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));o.default.prototype.movedX=0,o.default.prototype.movedY=0,o.default.prototype._hasMouseInteracted=!1,o.default.prototype.mouseX=0,o.default.prototype.mouseY=0,o.default.prototype.pmouseX=0,o.default.prototype.pmouseY=0,o.default.prototype.winMouseX=0,o.default.prototype.winMouseY=0,o.default.prototype.pwinMouseX=0,o.default.prototype.pwinMouseY=0,o.default.prototype.mouseButton=0,o.default.prototype.mouseIsPressed=!1,o.default.prototype._updateNextMouseCoords=function(e){if(null!==this._curElement&&(!e.touches||0<e.touches.length)){var t=function(e,t,n,r){r&&!r.clientX&&(r.touches?r=r.touches[0]:r.changedTouches&&(r=r.changedTouches[0]));var i=e.getBoundingClientRect(),o=e.scrollWidth/t||1,a=e.scrollHeight/n||1;return{x:(r.clientX-i.left)/o,y:(r.clientY-i.top)/a,winX:r.clientX,winY:r.clientY,id:r.identifier}}(this._curElement.elt,this.width,this.height,e);this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y),this._setProperty("winMouseX",t.winX),this._setProperty("winMouseY",t.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},o.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},o.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",a.CENTER):2===e.button?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},o.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},o.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},o.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},o.default.prototype._ondragend=o.default.prototype._onmouseup,o.default.prototype._ondragover=o.default.prototype._onmousemove,o.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},o.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},o.default.prototype._mouseWheelDeltaY=0,o.default.prototype._pmouseWheelDeltaY=0,o.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},o.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},o.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var s=o.default;n.default=s},{"../core/constants":26,"../core/main":36}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e,t,n,r,i){var o=4<arguments.length&&void 0!==i?i:0,a=e.getBoundingClientRect(),s=e.scrollWidth/t||1,l=e.scrollHeight/n||1,c=r.touches[o]||r.changedTouches[o];return{x:(c.clientX-a.left)/s,y:(c.clientY-a.top)/l,winX:c.clientX,winY:c.clientY,id:c.identifier}}i.default.prototype.touches=[],i.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],n=0;n<e.touches.length;n++)t[n]=o(this._curElement.elt,this.width,this.height,e,n);this._setProperty("touches",t)}},i.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},i.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},i.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()};var a=i.default;n.default=a},{"../core/main":36}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,o,a,s={_toPixels:function(e){return e instanceof ImageData?e.data:e.getContext("2d").getImageData(0,0,e.width,e.height).data},_getARGB:function(e,t){var n=4*t;return e[3+n]<<24&4278190080|e[n]<<16&16711680|e[1+n]<<8&65280|255&e[2+n]},_setPixels:function(e,t){for(var n=0,r=0,i=e.length;r<i;r++)e[0+(n=4*r)]=(16711680&t[r])>>>16,e[n+1]=(65280&t[r])>>>8,e[n+2]=255&t[r],e[n+3]=(4278190080&t[r])>>>24},_toImageData:function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},_createImageData:function(e,t){return s._tmpCanvas=document.createElement("canvas"),s._tmpCtx=s._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},apply:function(e,t,n){var r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height),o=t(i,n);o instanceof ImageData?r.putImageData(o,0,0,0,0,e.width,e.height):r.putImageData(i,0,0,0,0,e.width,e.height)},threshold:function(e,t){var n=s._toPixels(e);void 0===t&&(t=.5);for(var r=Math.floor(255*t),i=0;i<n.length;i+=4){var o;o=r<=.2126*n[i]+.7152*n[i+1]+.0722*n[i+2]?255:0,n[i]=n[i+1]=n[i+2]=o}},gray:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4){var r=.2126*t[n]+.7152*t[n+1]+.0722*t[n+2];t[n]=t[n+1]=t[n+2]=r}},opaque:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n+3]=255;return t},invert:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},posterize:function(e,t){var n=s._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,i=0;i<n.length;i+=4){var o=n[i],a=n[i+1],l=n[i+2];n[i]=255*(o*t>>8)/r,n[i+1]=255*(a*t>>8)/r,n[i+2]=255*(l*t>>8)/r}},dilate:function(e){for(var t,n,r,i,o,a,l,c,u,h,d,f,p,m,g,y,v,_=s._toPixels(e),b=0,x=_.length?_.length/4:0,w=new Int32Array(x);b<x;)for(n=(t=b)+e.width;b<n;)r=i=s._getARGB(_,b),(l=b-1)<t&&(l=b),n<=(a=b+1)&&(a=b),(c=b-e.width)<0&&(c=0),x<=(u=b+e.width)&&(u=b),f=s._getARGB(_,c),d=s._getARGB(_,l),p=s._getARGB(_,u),(o=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))<(g=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))&&(i=d,o=g),o<(m=77*((h=s._getARGB(_,a))>>16&255)+151*(h>>8&255)+28*(255&h))&&(i=h,o=m),o<(y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(i=f,o=y),o<(v=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(i=p,o=v),w[b++]=i;s._setPixels(_,w)},erode:function(e){for(var t,n,r,i,o,a,l,c,u,h,d,f,p,m,g,y,v,_=s._toPixels(e),b=0,x=_.length?_.length/4:0,w=new Int32Array(x);b<x;)for(n=(t=b)+e.width;b<n;)r=i=s._getARGB(_,b),(l=b-1)<t&&(l=b),n<=(a=b+1)&&(a=b),(c=b-e.width)<0&&(c=0),x<=(u=b+e.width)&&(u=b),f=s._getARGB(_,c),d=s._getARGB(_,l),p=s._getARGB(_,u),(g=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(o=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))&&(i=d,o=g),(m=77*((h=s._getARGB(_,a))>>16&255)+151*(h>>8&255)+28*(255&h))<o&&(i=h,o=m),(y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<o&&(i=f,o=y),(v=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<o&&(i=p,o=v),w[b++]=i;s._setPixels(_,w)},blur:function(e,t){!function(e,t){for(var n,l,c,u,h,d,f,p,m,g,y=s._toPixels(e),v=e.width,_=e.height,b=v*_,x=new Int32Array(b),w=0;w<b;w++)x[w]=s._getARGB(y,w);var S,A,E,M,C=new Int32Array(b),T=new Int32Array(b),P=new Int32Array(b),D=new Int32Array(b),k=0;for(function(e){var t=3.5*e|0;if(r!==(t=t<1?1:t<248?t:248)){i=1+(r=t)<<1,o=new Int32Array(i),a=new Array(i);for(var n=0;n<i;n++)a[n]=new Int32Array(256);for(var s,l,c,u,h=1,d=t-1;h<t;h++){o[t+h]=o[d]=l=d*d,c=a[t+h],u=a[d--];for(var f=0;f<256;f++)c[f]=u[f]=l*f}s=o[t]=t*t,c=a[t];for(var p=0;p<256;p++)c[p]=s*p}}(t),A=0;A<_;A++){for(S=0;S<v;S++){if(u=c=l=h=n=0,(d=S-r)<0)g=-d,d=0;else{if(v<=d)break;g=0}for(E=g;E<i&&!(v<=d);E++){var O=x[d+k];h+=(M=a[E])[(-16777216&O)>>>24],l+=M[(16711680&O)>>16],c+=M[(65280&O)>>8],u+=M[255&O],n+=o[E],d++}C[f=k+S]=h/n,T[f]=l/n,P[f]=c/n,D[f]=u/n}k+=v}for(m=(p=-r)*v,A=k=0;A<_;A++){for(S=0;S<v;S++){if(u=c=l=h=n=0,p<0)g=f=-p,d=S;else{if(_<=p)break;g=0,f=p,d=S+m}for(E=g;E<i&&!(_<=f);E++)h+=(M=a[E])[C[d]],l+=M[T[d]],c+=M[P[d]],u+=M[D[d]],n+=o[E],f++,d+=v;x[S+k]=h/n<<24|l/n<<16|c/n<<8|u/n}k+=v,m+=v,p++}s._setPixels(y,x)}(e,t)}},l=s;n.default=l},{}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),i=o(e("omggif"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.createImage=function(e,t){return r.default._validateParameters("createImage",arguments),new r.default.Image(e,t)},r.default.prototype.saveCanvas=function(){r.default._validateParameters("saveCanvas",arguments);var e,t,n,i,o=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],o.shift()):arguments[0]instanceof r.default.Element?(e=arguments[0].elt,o.shift()):e=this._curElement&&this._curElement.elt,1<=o.length&&(t=o[0]),2<=o.length&&(n=o[1]),n=n||r.default.prototype._checkFileExtension(t,n)[1]||"png"){default:i="image/png";break;case"jpeg":case"jpg":i="image/jpeg"}e.toBlob((function(e){r.default.prototype.downloadFile(e,t,n)}),i)},r.default.prototype.saveGif=function(e,t){var n=e.gifProperties,o=n.loopLimit;1===o?o=null:null===o&&(o=0);for(var s=new Uint8Array(e.width*e.height*n.numFrames),l=[],c={},u=0;u<n.numFrames;u++){for(var h=new Set,d=n.frames[u].image.data,f=d.length,p=new Uint32Array(e.width*e.height),m=0,g=0;m<f;m+=4,g++){var y=d[m+0]<<16|d[m+1]<<8|d[m+2]<<0;h.add(y),p[g]=y}var v=a(h).sort().toString();void 0===c[v]?c[v]={freq:1,frames:[u]}:(c[v].freq+=1,c[v].frames.push(u)),l.push(p)}var _=[],b=Object.keys(c).sort((function(e,t){return c[t].freq-c[e].freq})),x=b[0].split(",").map((function(e){return parseInt(e)}));_=_.concat(c[x].frames);for(var w=new Set(x),S=1;S<b.length;S++){var A=b[S].split(",").map((function(e){return parseInt(e)})).filter((function(e){return!w.has(e)}));if(x.length+A.length<=256){for(var E=0;E<A.length;E++)x.push(A[E]),w.add(A[E]);_=_.concat(c[b[S]].frames)}}_=new Set(_);for(var M={},C=0;C<x.length;C++)M[x[C]]||(M[x[C]]=C);for(var T=1;T<x.length;)T<<=1;x.length=T;for(var P={loop:o,palette:new Uint32Array(x)},D=new i.default.GifWriter(s,e.width,e.height,P),k={},O=function(t){for(var r=!_.has(t),i=r?[]:x,o=new Uint8Array(e.width*e.height),a={},s=new Set,c=0;c<l[t].length;c++){var u=l[t][c];r?(void 0===a[u]&&(a[u]=i.length,i.push(u)),o[c]=a[u]):o[c]=M[u],0<t&&l[t-1][c]!==u&&s.add(u)}var h={},d=i.filter((function(e){return!s.has(e)}));if(0<d.length){var f=d[0],p=r?a[f]:M[f];if(0<t){for(var m=0;m<l[t].length;m++)l[t-1][m]===l[t][m]&&(o[m]=p);h.transparent=p,k.frameOpts.disposal=1}}if(h.delay=n.frames[t].delay/10,r){for(var g=1;g<i.length;)g<<=1;i.length=g,h.palette=new Uint32Array(i)}0<t&&D.addFrame(0,0,e.width,e.height,k.pixelPaletteIndex,k.frameOpts),k={pixelPaletteIndex:o,frameOpts:h}},I=0;I<n.numFrames;I++)O(I);k.frameOpts.disposal=1,D.addFrame(0,0,e.width,e.height,k.pixelPaletteIndex,k.frameOpts);var R=new Blob([s.slice(0,D.end())],{type:"image/gif"});r.default.prototype.downloadFile(R,t,"gif")},r.default.prototype.saveFrames=function(e,t,n,i,o){r.default._validateParameters("saveFrames",arguments);var a=n||3;a=r.default.prototype.constrain(a,0,15),a*=1e3;var s=i||15;s=r.default.prototype.constrain(s,0,22);var l=0,c=r.default.prototype._makeFrame,u=this._curElement.elt,h=[],d=setInterval((function(){h.push(c(e+l,t,u)),l++}),1e3/s);setTimeout((function(){if(clearInterval(d),o)o(h);else{var e=!0,t=!1,n=void 0;try{for(var i,a=h[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;r.default.prototype.downloadFile(s.imageData,s.filename,s.ext)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}h=[]}),a+.01)},r.default.prototype._makeFrame=function(e,t,n){var r,i;if(r=this?this._curElement.elt:n,t)switch(t.toLowerCase()){case"png":i="image/png";break;case"jpeg":case"jpg":i="image/jpeg";break;default:i="image/png"}else t="png",i="image/png";var o=r.toDataURL(i);o=o.replace(i,"image/octet-stream");var a={};return a.imageData=o,a.filename=e,a.ext=t,a};var s=r.default;n.default=s},{"../core/main":36,omggif:11}],59:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=c(e("../core/main")),o=c(e("./filters")),a=c(e("../core/helpers")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),l=c(e("omggif"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadImage=function(e,t,n){i.default._validateParameters("loadImage",arguments);var r=new i.default.Image(1,1,this),o=this,a=new Request(e,{method:"GET",mode:"cors"});return fetch(e,a).then((function(a){var s=a.headers.get("content-type");if(null===s&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),s&&s.includes("image/gif"))a.arrayBuffer().then((function(e){e&&function(e,t,n,r,o){var a=new l.default.GifReader(e);t.width=t.canvas.width=a.width,t.height=t.canvas.height=a.height;var s=[],c=a.numFrames(),u=new Uint8ClampedArray(t.width*t.height*4);if(1<c){for(var h=function(e,n){try{n.decodeAndBlitFrameRGBA(e,u)}catch(e){i.default._friendlyFileLoadError(8,t.src),"function"==typeof r?r(e):console.error(e)}},d=0;d<c;d++){var f=a.frameInfo(d);1===a.frameInfo(d).disposal&&0<d?t.drawingContext.putImageData(s[d-1].image,0,0):(t.drawingContext.clearRect(0,0,t.width,t.height),u=new Uint8ClampedArray(t.width*t.height*4)),h(d,a);var p=new ImageData(u,t.width,t.height);t.drawingContext.putImageData(p,0,0),s.push({image:t.drawingContext.getImageData(0,0,t.width,t.height),delay:10*f.delay})}var m=a.loopCount();null===m?m=1:0===m&&(m=null),t.drawingContext.putImageData(s[0].image,0,0),t.gifProperties={displayIndex:0,loopLimit:m,loopCount:0,frames:s,numFrames:c,playing:!0,timeDisplayed:0,lastChangeTime:0}}"function"==typeof n&&n(t),o()}(new Uint8Array(e),r,t,n,function(e){o._decrementPreload()}.bind(o))}),(function(e){"function"==typeof n?n(e):console.error(e)}));else{var c=new Image;c.onload=function(){r.width=r.canvas.width=c.width,r.height=r.canvas.height=c.height,r.drawingContext.drawImage(c,0,0),r.modified=!0,"function"==typeof t&&t(r),o._decrementPreload()},c.onerror=function(e){i.default._friendlyFileLoadError(0,c.src),"function"==typeof n?n(e):console.error(e)},0!==e.indexOf("data:image/")&&(c.crossOrigin="Anonymous"),c.src=e}r.modified=!0})),r},i.default.prototype.image=function(e,t,n,r,o,s,l,c,h){i.default._validateParameters("image",arguments);var d=e.width,f=e.height;e.elt&&e.elt.videoWidth&&!e.canvas&&(d=e.elt.videoWidth,f=e.elt.videoHeight);var p=t,m=n,g=r||d,y=o||f,v=s||0,_=l||0,b=c||d,x=h||f;b=u(b,d),x=u(x,f);var w=1;e.elt&&!e.canvas&&e.elt.style.width&&(w=e.elt.videoWidth&&!r?e.elt.videoWidth:e.elt.width,w/=parseInt(e.elt.style.width,10)),v*=w,_*=w,x*=w,b*=w;var S=a.default.modeAdjust(p,m,g,y,this._renderer._imageMode);this._renderer.image(e,v,_,b,x,S.x,S.y,S.w,S.h)},i.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("tint",t);var r=this.color.apply(this,t);this._renderer._tint=r.levels},i.default.prototype.noTint=function(){this._renderer._tint=null},i.default.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=o.default._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var r=n.getContext("2d"),i=r.createImageData(e.canvas.width,e.canvas.height),a=i.data,s=0;s<t.length;s+=4){var l=t[s],c=t[s+1],u=t[s+2],h=t[s+3];a[s]=l*this._renderer._tint[0]/255,a[s+1]=c*this._renderer._tint[1]/255,a[s+2]=u*this._renderer._tint[2]/255,a[s+3]=h*this._renderer._tint[3]/255}return r.putImageData(i,0,0),n},i.default.prototype.imageMode=function(e){i.default._validateParameters("imageMode",arguments),e!==s.CORNER&&e!==s.CORNERS&&e!==s.CENTER||(this._renderer._imageMode=e)};var h=i.default;n.default=h},{"../core/constants":26,"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/helpers":32,"../core/main":36,"./filters":57,omggif:11}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),i=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},r.default.Image.prototype._animateGif=function(e){var t=this.gifProperties,n=e._lastFrameTime+e.deltaTime;if(0===t.lastChangeTime&&(t.lastChangeTime=n),t.playing){t.timeDisplayed=n-t.lastChangeTime;var r=t.frames[t.displayIndex].delay;if(t.timeDisplayed>=r){var i=Math.floor(t.timeDisplayed/r);if(t.timeDisplayed=0,t.lastChangeTime=n,t.displayIndex+=i,t.loopCount=Math.floor(t.displayIndex/t.numFrames),null!==t.loopLimit&&t.loopCount>=t.loopLimit)t.playing=!1;else{var o=t.displayIndex%t.numFrames;this.drawingContext.putImageData(t.frames[o].image,0,0),t.displayIndex=o,this.setModified(!0)}}}},r.default.Image.prototype._setProperty=function(e,t){this[e]=t,this.setModified(!0)},r.default.Image.prototype.loadPixels=function(){r.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},r.default.Image.prototype.updatePixels=function(e,t,n,i){r.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,i),this.setModified(!0)},r.default.Image.prototype.get=function(e,t,n,i){return r.default._validateParameters("p5.Image.get",arguments),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.Image.prototype._getPixel=r.default.Renderer2D.prototype._getPixel,r.default.Image.prototype.set=function(e,t,n){r.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0)},r.default.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties)for(var r=this.gifProperties,i=function(e,t){for(var n=0,r=0;r<t.height;r++)for(var i=0;i<t.width;i++){var o=Math.floor(i*e.width/t.width),a=4*(Math.floor(r*e.height/t.height)*e.width+o);t.data[n++]=e.data[a++],t.data[n++]=e.data[a++],t.data[n++]=e.data[a++],t.data[n++]=e.data[a++]}},o=0;o<r.numFrames;o++){var a=this.drawingContext.createImageData(e,t);i(r.frames[o].image,a),r.frames[o].image=a}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},r.default.Image.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.copy.apply(this,t)},r.default.Image.prototype.mask=function(e){void 0===e&&(e=this);var t=this.drawingContext.globalCompositeOperation,n=1;e instanceof r.default.Renderer&&(n=e._pInst._pixelDensity);var i=[e,0,0,n*e.width,n*e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",r.default.Image.prototype.copy.apply(this,i),this.drawingContext.globalCompositeOperation=t,this.setModified(!0)},r.default.Image.prototype.filter=function(e,t){i.default.apply(this.canvas,i.default[e],t),this.setModified(!0)},r.default.Image.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("p5.Image.blend",arguments),r.default.prototype.blend.apply(this,t),this.setModified(!0)},r.default.Image.prototype.setModified=function(e){this._modified=e},r.default.Image.prototype.isModified=function(){return this._modified},r.default.Image.prototype.save=function(e,t){this.gifProperties?r.default.prototype.saveGif(this,e):r.default.prototype.saveCanvas(this.canvas,e,t)},r.default.Image.prototype.reset=function(){if(this.gifProperties){var e=this.gifProperties;e.playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0)}},r.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var e=this.gifProperties;return e.displayIndex%e.numFrames}},r.default.Image.prototype.setFrame=function(e){if(this.gifProperties){var t=this.gifProperties;e<t.numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},r.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},r.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},r.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},r.default.Image.prototype.delay=function(e,t){if(this.gifProperties){var n=this.gifProperties;if(t<n.numFrames&&0<=t)n.frames[t].delay=e;else{var r=!0,i=!1,o=void 0;try{for(var a,s=n.frames[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value.delay=e}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}};var a=r.default.Image;n.default=a},{"../core/main":36,"./filters":57}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),i=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),r.default.prototype.pixels=[],r.default.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;r.default._validateParameters("blend",t),this._renderer?(i=this._renderer).blend.apply(i,t):r.default.Renderer2D.prototype.blend.apply(this,t)},r.default.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,o,a,s,l,c,u,h,d;if(r.default._validateParameters("copy",t),9===t.length)i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],u=t[6],h=t[7],d=t[8];else{if(8!==t.length)throw new Error("Signature not supported");i=this,o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7]}r.default.prototype._copyHelper(this,i,o,a,s,l,c,u,h,d)},r.default.prototype._copyHelper=function(e,t,n,i,o,a,s,l,c,u){t.loadPixels();var h=t.canvas.width/t.width,d=0,f=0;t._renderer&&t._renderer.isP3D&&(d=t.width/2,f=t.height/2),e._renderer&&e._renderer.isP3D?r.default.RendererGL.prototype.image.call(e._renderer,t,n+d,i+f,o,a,s,l,c,u):e.drawingContext.drawImage(t.canvas,h*(n+d),h*(i+f),h*o,h*a,s,l,c,u)},r.default.prototype.filter=function(e,t){r.default._validateParameters("filter",arguments),void 0!==this.canvas?i.default.apply(this.canvas,i.default[e],t):i.default.apply(this.elt,i.default[e],t)},r.default.prototype.get=function(e,t,n,i){var o;return r.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},r.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},r.default.prototype.set=function(e,t,n){this._renderer.set(e,t,n)},r.default.prototype.updatePixels=function(e,t,n,i){r.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,i)};var a=r.default;n.default=a},{"../color/p5.Color":24,"../core/main":36,"./filters":57}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var i=a(e("fetch-jsonp")),o=a(e("file-saver"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n={};if(void 0===(t=t||[]))for(var r=0;r<e.length;r++)t[r.toString()]=r;for(var i=0;i<t.length;i++){var o=t[i],a=e[i];n[o]=a}return n}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(e,t){t&&!0!==t&&"true"!==t||(t="");var n="";return(e=e||"untitled")&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e="".concat(e,".").concat(n)),[e,n]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadJSON",t);for(var i,o,a,l=t[0],c={},u="json",h=1;h<t.length;h++){var d=t[h];"string"==typeof d?"jsonp"!==d&&"json"!==d||(u=d):"function"==typeof d?i?o=d:i=d:"object"===s(d)&&(d.hasOwnProperty("jsonpCallback")||d.hasOwnProperty("jsonpCallbackFunction"))&&(u="jsonp",a=d)}var f=this;return this.httpDo(l,"GET",a,u,(function(e){for(var t in e)c[t]=e[t];void 0!==i&&i(e),f._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(5,l),!o)throw e;o(e)})),c},r.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadStrings",t);for(var i,o,a=[],s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===i?i=l:void 0===o&&(o=l))}var c=this;return r.default.prototype.httpDo.call(this,t[0],"GET","text",(function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),n=0,r=t.length;n<r;n+=32768)Array.prototype.push.apply(a,t.slice(n,Math.min(n+32768,r)));void 0!==i&&i(a),c._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(3,e),!o)throw e;o(e)})),a},r.default.prototype.loadTable=function(e){var t,n,i,o=[],a=!1,s=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===s?i=",":"ssv"===s?i=";":"tsv"===s&&(i="\t");for(var c=1;c<arguments.length;c++)"function"==typeof arguments[c]?void 0===t?t=arguments[c]:void 0===n&&(n=arguments[c]):"string"==typeof arguments[c]&&(o.push(arguments[c]),"header"===arguments[c]&&(a=!0),"csv"===arguments[c]?i=",":"ssv"===arguments[c]?i=";":"tsv"===arguments[c]&&(i="\t"));var u=new r.default.Table,h=this;return this.httpDo(e,"GET","table",(function(e){for(var n,o,s={},c=[],d=0,f=null,p=function(){s.currentState=0,s.token=""},m=function(){f.push(s.token),p()},g=function(){s.currentState=4,c.push(f),f=null};;){if(null==(n=e[d++])){if(s.escaped)throw new Error("Unclosed quote in file.");if(f){m(),g();break}}if(null===f&&(s.escaped=!1,f=[],p()),0===s.currentState){if('"'===n){s.escaped=!0,s.currentState=1;continue}s.currentState=1}if(1===s.currentState&&s.escaped)if('"'===n)'"'===e[d]?(s.token+='"',d++):(s.escaped=!1,s.currentState=2);else{if("\r"===n)continue;s.token+=n}else"\r"===n?("\n"===e[d]&&d++,m(),g()):"\n"===n?(m(),g()):n===i?m():1===s.currentState&&(s.token+=n)}if(a)u.columns=c.shift();else for(var y=0;y<c[0].length;y++)u.columns[y]="null";for(var v=0;v<c.length;v++)(1!==c[v].length||"undefined"!==c[v][0]&&""!==c[v][0])&&((o=new r.default.TableRow).arr=c[v],o.obj=l(c[v],u.columns),u.addRow(o));"function"==typeof t&&t(u),h._decrementPreload()}),(function(t){r.default._friendlyFileLoadError(2,e),n?n(t):console.error(t)})),u},r.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i,o,a=new r.default.XML,s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===i?i=l:void 0===o&&(o=l))}var c=this;return this.httpDo(t[0],"GET","xml",(function(e){for(var t in e)a[t]=e[t];void 0!==i&&i(a),c._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(1,e),!o)throw e;o(e)})),a},r.default.prototype.loadBytes=function(e,t,n){var i={},o=this;return this.httpDo(e,"GET","arrayBuffer",(function(e){i.bytes=new Uint8Array(e),"function"==typeof t&&t(i),o._decrementPreload()}),(function(t){if(r.default._friendlyFileLoadError(6,e),!n)throw t;n(t)})),i},r.default.prototype.httpGet=function(){r.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),r.default.prototype.httpDo.apply(this,e)},r.default.prototype.httpPost=function(){r.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),r.default.prototype.httpDo.apply(this,e)},r.default.prototype.httpDo=function(){for(var e,t,n,o,a,l={},c=0,u="text/plain",h=arguments.length-1;0<h&&"function"==typeof(h<0||arguments.length<=h?void 0:arguments[h]);h--)c++;var d=arguments.length<=0?void 0:arguments[0];if(2==arguments.length-c&&"string"==typeof d&&"object"===s(arguments.length<=1?void 0:arguments[1]))o=new Request(d,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3];else{for(var f,p="GET",m=1;m<arguments.length;m++){var g=m<0||arguments.length<=m?void 0:arguments[m];if("string"==typeof g)"GET"===g||"POST"===g||"PUT"===g||"DELETE"===g?p=g:"json"===g||"jsonp"===g||"binary"===g||"arrayBuffer"===g||"xml"===g||"text"===g||"table"===g?e=g:f=g;else if("number"==typeof g)f=g.toString();else if("object"===s(g))if(g.hasOwnProperty("jsonpCallback")||g.hasOwnProperty("jsonpCallbackFunction"))for(var y in g)l[y]=g[y];else u=g instanceof r.default.XML?(f=g.serialize(),"application/xml"):(f=JSON.stringify(g),"application/json");else"function"==typeof g&&(t?n=g:t=g)}var v="GET"===p?new Headers:new Headers({"Content-Type":u});o=new Request(d,{method:p,mode:"cors",body:f,headers:v})}return(a=(a="jsonp"===(e=e||(d.includes("json")?"json":d.includes("xml")?"xml":"text"))?(0,i.default)(d,l):fetch(o)).then((function(t){if(!t.ok){var n=new Error(t.body);throw n.status=t.status,n.ok=!1,n}var i=0;switch("jsonp"!==e&&(i=t.headers.get("content-length")),i&&64e6<i&&r.default._friendlyFileLoadError(7,d),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then((function(e){var t=(new DOMParser).parseFromString(e,"text/xml");return new r.default.XML(t.documentElement)}));default:return t.text()}}))).then(t||function(){}),a.catch(n||console.error),a},window.URL=window.URL||window.webkitURL,r.default.prototype._pWriters=[],r.default.prototype.createWriter=function(e,t){var n;for(var i in r.default.prototype._pWriters)if(r.default.prototype._pWriters[i].name===e)return n=new r.default.PrintWriter(e+this.millis(),t),r.default.prototype._pWriters.push(n),n;return n=new r.default.PrintWriter(e,t),r.default.prototype._pWriters.push(n),n},r.default.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var i=[];for(var o in i.push(this.content),r.default.prototype.writeFile(i,e,t),r.default.prototype._pWriters)r.default.prototype._pWriters[o].name===this.name&&r.default.prototype._pWriters.splice(o,1);n.clear(),n={}}},r.default.prototype.save=function(e,t,n){var i=arguments,o=this._curElement?this._curElement.elt:this.elt;if(0!==i.length)if(i[0]instanceof r.default.Renderer||i[0]instanceof r.default.Graphics)r.default.prototype.saveCanvas(i[0].elt,i[1],i[2]);else if(1===i.length&&"string"==typeof i[0])r.default.prototype.saveCanvas(o,i[0]);else switch(u(i[1],i[2])[1]){case"json":return void r.default.prototype.saveJSON(i[0],i[1],i[2]);case"txt":return void r.default.prototype.saveStrings(i[0],i[1],i[2]);default:i[0]instanceof Array?r.default.prototype.saveStrings(i[0],i[1],i[2]):i[0]instanceof r.default.Table?r.default.prototype.saveTable(i[0],i[1],i[2]):i[0]instanceof r.default.Image?r.default.prototype.saveCanvas(i[0].canvas,i[1]):i[0]instanceof r.default.SoundFile&&r.default.prototype.saveSound(i[0],i[1],i[2],i[3])}else r.default.prototype.saveCanvas(o)},r.default.prototype.saveJSON=function(e,t,n){var i;r.default._validateParameters("saveJSON",arguments),i=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(i.split("\n"),t,"json")},r.default.prototype.saveJSONObject=r.default.prototype.saveJSON,r.default.prototype.saveJSONArray=r.default.prototype.saveJSON,r.default.prototype.saveStrings=function(e,t,n,i){r.default._validateParameters("saveStrings",arguments);for(var o=n||"txt",a=this.createWriter(t,o),s=0;s<e.length;s++)i?a.write(e[s]+"\r\n"):a.write(e[s]+"\n");a.close(),a.clear()},r.default.prototype.saveTable=function(e,t,n){var i;r.default._validateParameters("saveTable",arguments),i=void 0===n?t.substring(t.lastIndexOf(".")+1,t.length):n;var o=this.createWriter(t,i),a=e.columns,s=",";if("tsv"===i&&(s="\t"),"html"!==i){if("0"!==a[0]){for(var l=0;l<a.length;l++)l<a.length-1?o.write(a[l]+s):o.write(a[l]);o.write("\n")}for(var u=0;u<e.rows.length;u++){var h=void 0;for(h=0;h<e.rows[u].arr.length;h++)h<e.rows[u].arr.length-1?"csv"===i&&e.rows[u].arr[h].includes(",")?o.write('"'+e.rows[u].arr[h]+'"'+s):o.write(e.rows[u].arr[h]+s):"csv"===i&&e.rows[u].arr[h].includes(",")?o.write('"'+e.rows[u].arr[h]+'"'):o.write(e.rows[u].arr[h]);o.write("\n")}}else{if(o.print("<html>"),o.print("<head>"),o.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),o.print("</head>"),o.print("<body>"),o.print("  <table>"),"0"!==a[0]){o.print("    <tr>");for(var d=0;d<a.length;d++){var f=c(a[d]);o.print("      <td>".concat(f)),o.print("      </td>")}o.print("    </tr>")}for(var p=0;p<e.rows.length;p++){o.print("    <tr>");for(var m=0;m<e.columns.length;m++){var g=c(e.rows[p].getString(m));o.print("      <td>".concat(g)),o.print("      </td>")}o.print("    </tr>")}o.print("  </table>"),o.print("</body>"),o.print("</html>")}o.close(),o.clear()},r.default.prototype.writeFile=function(e,t,n){var i="application/octet-stream";r.default.prototype._isSafari()&&(i="text/plain");var o=new Blob(e,{type:i});r.default.prototype.downloadFile(o,t,n)},r.default.prototype.downloadFile=function(e,t,n){var i=u(t,n),a=i[0];if(e instanceof Blob)o.default.saveAs(e,a);else{var s=document.createElement("a");if(s.href=e,s.download=a,s.onclick=function(e){var t;t=e,document.body.removeChild(t.target),e.stopPropagation()},s.style.display="none",document.body.appendChild(s),r.default.prototype._isSafari()){var l="Hello, Safari user! To download this file...\n";l+="1. Go to File --\x3e Save As.\n",l+='2. Choose "Page Source" as the Format.\n',l+='3. Name it with this extension: ."'.concat(i[1],'"'),alert(l)}s.click()}},r.default.prototype._checkFileExtension=u,r.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var h=r.default;n.default=h},{"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36,"es6-promise/auto":5,"fetch-jsonp":7,"file-saver":8,"whatwg-fetch":15}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.Table=function(e){this.columns=[],this.rows=[]},i.default.Table.prototype.addRow=function(e){var t=e||new i.default.TableRow;if(void 0===t.arr||void 0===t.obj)throw new Error("invalid TableRow: ".concat(t));return(t.table=this).rows.push(t),t},i.default.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},i.default.Table.prototype.getRow=function(e){return this.rows[e]},i.default.Table.prototype.getRows=function(){return this.rows},i.default.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===e)return this.rows[r];return null},i.default.Table.prototype.findRows=function(e,t){var n=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t]===e&&n.push(this.rows[r]);else for(var i=0;i<this.rows.length;i++)this.rows[i].arr[t]===e&&n.push(this.rows[i]);return n},i.default.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(e))return this.rows[r];return null},i.default.Table.prototype.matchRows=function(e,t){var n=[];if("number"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(var i=0;i<this.rows.length;i++)this.rows[i].obj[t].match(e)&&n.push(this.rows[i]);return n},i.default.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].arr[e]);return t},i.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},i.default.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)},i.default.Table.prototype.getColumnCount=function(){return this.columns.length},i.default.Table.prototype.getRowCount=function(){return this.rows.length},i.default.Table.prototype.removeTokens=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var i=new RegExp(n.join("|"),"g");if(void 0===t)for(var o=0;o<this.columns.length;o++)for(var a=0;a<this.rows.length;a++){var s=this.rows[a].arr[o];s=s.replace(i,""),this.rows[a].arr[o]=s,this.rows[a].obj[this.columns[o]]=s}else if("string"==typeof t)for(var l=0;l<this.rows.length;l++){var c=this.rows[l].obj[t];c=c.replace(i,""),this.rows[l].obj[t]=c;var u=this.columns.indexOf(t);this.rows[l].arr[u]=c}else for(var h=0;h<this.rows.length;h++){var d=this.rows[h].arr[t];d=d.replace(i,""),this.rows[h].arr[t]=d,this.rows[h].obj[this.columns[t]]=d}},i.default.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if(void 0===e)for(var n=0;n<this.columns.length;n++)for(var r=0;r<this.rows.length;r++){var i=this.rows[r].arr[n];i=i.replace(t,""),this.rows[r].arr[n]=i,this.rows[r].obj[this.columns[n]]=i}else if("string"==typeof e)for(var o=0;o<this.rows.length;o++){var a=this.rows[o].obj[e];a=a.replace(t,""),this.rows[o].obj[e]=a;var s=this.columns.indexOf(e);this.rows[o].arr[s]=a}else for(var l=0;l<this.rows.length;l++){var c=this.rows[l].arr[e];c=c.replace(t,""),this.rows[l].arr[e]=c,this.rows[l].obj[this.columns[e]]=c}},i.default.Table.prototype.removeColumn=function(e){var t,n;"string"==typeof e?(t=e,n=this.columns.indexOf(e)):(n=e,t=this.columns[e]);var r=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(r);for(var i=0;i<this.rows.length;i++){var o=this.rows[i].arr,a=o.splice(n+1,o.length);o.pop(),this.rows[i].arr=o.concat(a),delete this.rows[i].obj[t]}},i.default.Table.prototype.set=function(e,t,n){this.rows[e].set(t,n)},i.default.Table.prototype.setNum=function(e,t,n){this.rows[e].setNum(t,n)},i.default.Table.prototype.setString=function(e,t,n){this.rows[e].setString(t,n)},i.default.Table.prototype.get=function(e,t){return this.rows[e].get(t)},i.default.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},i.default.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},i.default.Table.prototype.getObject=function(e){for(var t,n={},r=0;r<this.rows.length;r++)if(t=this.rows[r].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));n[t[e]]=t}else n[r]=this.rows[r].obj;return n},i.default.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e};var o=i.default;n.default=o},{"../core/main":36}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.TableRow=function(e,t){var n=[],r={};e&&(t=t||",",n=e.split(t));for(var i=0;i<n.length;i++){var o=i,a=n[i];r[o]=a}this.arr=n,this.obj=r,this.table=null},i.default.TableRow.prototype.set=function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(0<=n))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t;var r=this.table.columns[e];this.obj[r]=t}},i.default.TableRow.prototype.setNum=function(e,t){var n=parseFloat(t);this.set(e,n)},i.default.TableRow.prototype.setString=function(e,t){var n=t.toString();this.set(e,n)},i.default.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},i.default.TableRow.prototype.getNum=function(e){var t;if("NaN"===(t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e])).toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t},i.default.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()};var o=i.default;n.default=o},{"../core/main":36}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.XML=function(e){if(e)this.DOM=e;else{var t=document.implementation.createDocument(null,"doc");this.DOM=t.createElement("root")}},i.default.XML.prototype.getParent=function(){return new i.default.XML(this.DOM.parentElement)},i.default.XML.prototype.getName=function(){return this.DOM.tagName},i.default.XML.prototype.setName=function(e){var t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(var i=0;i<n.length;i++)r.setAttribute(n[i].nodeName,n.nodeValue);this.DOM=r},i.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},i.default.XML.prototype.listChildren=function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e},i.default.XML.prototype.getChildren=function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push(new i.default.XML(e[n]));return t}(e?this.DOM.getElementsByTagName(e):this.DOM.children)},i.default.XML.prototype.getChild=function(e){if("string"!=typeof e)return new i.default.XML(this.DOM.children[e]);var t=!0,n=!1,r=void 0;try{for(var o,a=this.DOM.children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.tagName===e)return new i.default.XML(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}},i.default.XML.prototype.addChild=function(e){e instanceof i.default.XML&&this.DOM.appendChild(e.DOM)},i.default.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])},i.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},i.default.XML.prototype.listAttributes=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.DOM.attributes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a.nodeName)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},i.default.XML.prototype.hasAttribute=function(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=this.DOM.attributes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t[s.nodeName]=s.nodeValue}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!!t[e]},i.default.XML.prototype.getNum=function(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.nodeName]=l.nodeValue}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return Number(n[e])||t||0},i.default.XML.prototype.getString=function(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.nodeName]=l.nodeValue}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n[e]?String(n[e]):t||null},i.default.XML.prototype.setAttribute=function(e,t){this.DOM.setAttribute(e,t)},i.default.XML.prototype.getContent=function(e){return this.DOM.textContent.replace(/\s\s+/g,",")||e||null},i.default.XML.prototype.setContent=function(e){this.DOM.children.length||(this.DOM.textContent=e)},i.default.XML.prototype.serialize=function(){return(new XMLSerializer).serializeToString(this.DOM)};var o=i.default;n.default=o},{"../core/main":36}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var e=arguments.length,t=[],n=0,r=0;r<e;r++){var i=arguments[r];if((i=+i)==1/0||i===-1/0)return 1/0;n<(i=Math.abs(i))&&(n=i),t[r]=i}0===n&&(n=1);for(var o=0,a=0,s=0;s<e;s++){var l=t[s]/n,c=l*l-a,u=o+c;a=u-o-c,o=u}return Math.sqrt(o)*n}i.default.prototype.abs=Math.abs,i.default.prototype.ceil=Math.ceil,i.default.prototype.constrain=function(e,t,n){return i.default._validateParameters("constrain",arguments),Math.max(Math.min(e,n),t)},i.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("dist",t),4===t.length?o(t[2]-t[0],t[3]-t[1]):6===t.length?o(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},i.default.prototype.exp=Math.exp,i.default.prototype.floor=Math.floor,i.default.prototype.lerp=function(e,t,n){return i.default._validateParameters("lerp",arguments),n*(t-e)+e},i.default.prototype.log=Math.log,i.default.prototype.mag=function(e,t){return i.default._validateParameters("mag",arguments),o(e,t)},i.default.prototype.map=function(e,t,n,r,o,a){i.default._validateParameters("map",arguments);var s=(e-t)/(n-t)*(o-r)+r;return a?r<o?this.constrain(s,r,o):this.constrain(s,o,r):s},i.default.prototype.max=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.max.apply(null,t[0]):Math.max.apply(null,t)},i.default.prototype.min=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.min.apply(null,t[0]):Math.min.apply(null,t)},i.default.prototype.norm=function(e,t,n){return i.default._validateParameters("norm",arguments),this.map(e,t,n,0,1)},i.default.prototype.pow=Math.pow,i.default.prototype.round=function(e,t){return t?Number(Math.round(e+"e"+t)+"e-"+t):Math.round(e)},i.default.prototype.sq=function(e){return e*e},i.default.prototype.sqrt=Math.sqrt,i.default.prototype.fract=function(e){i.default._validateParameters("fract",arguments);var t=0,n=Number(e);if(isNaN(n)||Math.abs(n)===1/0)return n;if(n<0&&(n=-n,t=1),!String(n).includes(".")||String(n).includes("e"))return n<1?Math.abs(t-n):0;var r=String(n);return r=Number("0"+r.slice(r.indexOf("."))),Math.abs(t-r)};var a=i.default;n.default=a},{"../core/main":36}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.createVector=function(e,t,n){return this instanceof i.default?new i.default.Vector(this,arguments):new i.default.Vector(e,t,n)};var o=i.default;n.default=o},{"../core/main":36}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e){return.5*(1-Math.cos(e*Math.PI))}var a,s=4095,l=4,c=.5;i.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==a){a=new Array(4096);for(var r=0;r<4096;r++)a[r]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var i,u,h,d,f,p=Math.floor(e),m=Math.floor(t),g=Math.floor(n),y=e-p,v=t-m,_=n-g,b=0,x=.5,w=0;w<l;w++){var S=p+(m<<4)+(g<<8);i=o(y),u=o(v),h=a[S&s],h+=i*(a[S+1&s]-h),d=a[S+16&s],h+=u*((d+=i*(a[S+16+1&s]-d))-h),d=a[(S+=256)&s],d+=i*(a[S+1&s]-d),f=a[S+16&s],d+=u*((f+=i*(a[S+16+1&s]-f))-d),b+=(h+=o(_)*(d-h))*x,x*=c,p<<=1,m<<=1,g<<=1,1<=(y*=2)&&(p++,y--),1<=(v*=2)&&(m++,v--),1<=(_*=2)&&(g++,_--)}return b},i.default.prototype.noiseDetail=function(e,t){0<e&&(l=e),0<t&&(c=t)},i.default.prototype.noiseSeed=function(e){var t,n,r,i=(r=4294967296,{setSeed:function(e){n=t=(null==e?Math.random()*r:e)>>>0},getSeed:function(){return t},rand:function(){return(n=(1664525*n+1013904223)%r)/r}});i.setSeed(e),a=new Array(4096);for(var o=0;o<4096;o++)a[o]=i.rand()};var u=i.default;n.default=u},{"../core/main":36}],69:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function s(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function l(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this}o.default.Vector=function(e,t,n){var r,i,a;a=e instanceof o.default?(this.p5=e,r=t[0]||0,i=t[1]||0,t[2]||0):(r=e||0,i=t||0,n||0),this.x=r,this.y=i,this.z=a},o.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},o.default.Vector.prototype.set=function(e,t,n){return e instanceof o.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=n||0),this},o.default.Vector.prototype.copy=function(){return this.p5?new o.default.Vector(this.p5,[this.x,this.y,this.z]):new o.default.Vector(this.x,this.y,this.z)},o.default.Vector.prototype.add=function(e,t,n){return e instanceof o.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=n||0),this},o.default.Vector.prototype.rem=function(e,t,n){if(e instanceof o.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)){var r=parseFloat(e.x),i=parseFloat(e.y),a=parseFloat(e.z);l.call(this,r,i,a)}}else if(e instanceof Array)e.every((function(e){return Number.isFinite(e)}))&&(2===e.length&&s.call(this,e[0],e[1]),3===e.length&&l.call(this,e[0],e[1],e[2]));else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var c=Array.prototype.slice.call(arguments);c.every((function(e){return Number.isFinite(e)}))&&2===c.length&&s.call(this,c[0],c[1])}else if(3===arguments.length){var u=Array.prototype.slice.call(arguments);u.every((function(e){return Number.isFinite(e)}))&&3===u.length&&l.call(this,u[0],u[1],u[2])}},o.default.Vector.prototype.sub=function(e,t,n){return e instanceof o.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=n||0),this},o.default.Vector.prototype.mult=function(e,t,n){if(e instanceof o.default.Vector)return Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(e instanceof Array)return e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var r=Array.prototype.slice.call(arguments);return r.every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=n)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},o.default.Vector.prototype.div=function(e,t,n){if(e instanceof o.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){if(0===e.x||0===e.y||0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,this.z/=e.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(e instanceof Array){if(e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))){if(e.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var r=Array.prototype.slice.call(arguments);if(r.every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))){if(r.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=n)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},o.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},o.default.Vector.prototype.magSq=function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n},o.default.Vector.prototype.dot=function(e,t,n){return e instanceof o.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)},o.default.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,r=this.x*e.y-this.y*e.x;return this.p5?new o.default.Vector(this.p5,[t,n,r]):new o.default.Vector(t,n,r)},o.default.Vector.prototype.dist=function(e){return e.copy().sub(this).mag()},o.default.Vector.prototype.normalize=function(){var e=this.mag();return 0!==e&&this.mult(1/e),this},o.default.Vector.prototype.limit=function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this},o.default.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},o.default.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.p5?this.p5._fromRadians(e):e},o.default.Vector.prototype.setHeading=function(e){var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this},o.default.Vector.prototype.rotate=function(e){var t=this.heading()+e;this.p5&&(t=this.p5._toRadians(t));var n=this.mag();return this.x=Math.cos(t)*n,this.y=Math.sin(t)*n,this},o.default.Vector.prototype.angleBetween=function(e){var t,n=this.dot(e)/(this.mag()*e.mag());return t=Math.acos(Math.min(1,Math.max(-1,n))),t*=Math.sign(this.cross(e).z||1),this.p5&&(t=this.p5._fromRadians(t)),t},o.default.Vector.prototype.lerp=function(e,t,n,r){return e instanceof o.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*r||0,this.y+=(t-this.y)*r||0,this.z+=(n-this.z)*r||0,this)},o.default.Vector.prototype.reflect=function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))},o.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},o.default.Vector.prototype.equals=function(e,t,n){var r,i,a;return a=e instanceof o.default.Vector?(r=e.x||0,i=e.y||0,e.z||0):e instanceof Array?(r=e[0]||0,i=e[1]||0,e[2]||0):(r=e||0,i=t||0,n||0),this.x===r&&this.y===i&&this.z===a},o.default.Vector.fromAngle=function(e,t){return void 0===t&&(t=1),new o.default.Vector(t*Math.cos(e),t*Math.sin(e),0)},o.default.Vector.fromAngles=function(e,t,n){void 0===n&&(n=1);var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),s=Math.sin(e);return new o.default.Vector(n*s*i,-n*a,n*s*r)},o.default.Vector.random2D=function(){return this.fromAngle(Math.random()*a.TWO_PI)},o.default.Vector.random3D=function(){var e=Math.random()*a.TWO_PI,t=2*Math.random()-1,n=Math.sqrt(1-t*t),r=n*Math.cos(e),i=n*Math.sin(e);return new o.default.Vector(r,i,t)},o.default.Vector.add=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),n.add(t),n},o.default.Vector.rem=function(e,t){if(e instanceof o.default.Vector&&t instanceof o.default.Vector){var n=e.copy();return n.rem(t),n}},o.default.Vector.sub=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),n.sub(t),n},o.default.Vector.mult=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),n.mult(t),n},o.default.Vector.div=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),n.div(t),n},o.default.Vector.dot=function(e,t){return e.dot(t)},o.default.Vector.cross=function(e,t){return e.cross(t)},o.default.Vector.dist=function(e,t){return e.dist(t)},o.default.Vector.lerp=function(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),r.lerp(t,n),r},o.default.Vector.mag=function(e){var t=e.x,n=e.y,r=e.z,i=t*t+n*n+r*r;return Math.sqrt(i)};var c=o.default.Vector;n.default=c},{"../core/constants":26,"../core/main":36}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r},o="_lcg_random_state",a=4294967296,s=0;i.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%a,this[e]/a},i.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*a:t)>>>0},i.default.prototype.randomSeed=function(e){this._lcgSetSeed(o,e),this._gaussian_previous=!1},i.default.prototype.random=function(e,t){var n;if(i.default._validateParameters("random",arguments),n=null!=this[o]?this._lcg(o):Math.random(),void 0===e)return n;if(void 0===t)return e instanceof Array?e[Math.floor(n*e.length)]:n*e;if(t<e){var r=e;e=t,t=r}return n*(t-e)+e},i.default.prototype.randomGaussian=function(e){var t,n,r,i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=s,this._gaussian_previous=!1;else{for(;1<=(i=(n=this.random(2)-1)*n+(r=this.random(2)-1)*r););t=n*(i=Math.sqrt(-2*Math.log(i)/i)),s=r*i,this._gaussian_previous=!0}return t*o+(e||0)};var l=i.default;n.default=l},{"../core/main":36}],71:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));o.default.prototype._angleMode=a.RADIANS,o.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},o.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},o.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},o.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},o.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},o.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},o.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},o.default.prototype.degrees=function(e){return e*a.RAD_TO_DEG},o.default.prototype.radians=function(e){return e*a.DEG_TO_RAD},o.default.prototype.angleMode=function(e){e!==a.DEGREES&&e!==a.RADIANS||(this._angleMode=e)},o.default.prototype._toRadians=function(e){return this._angleMode===a.DEGREES?e*a.DEG_TO_RAD:e},o.default.prototype._toDegrees=function(e){return this._angleMode===a.RADIANS?e*a.RAD_TO_DEG:e},o.default.prototype._fromRadians=function(e){return this._angleMode===a.DEGREES?e*a.RAD_TO_DEG:e};var s=o.default;n.default=s},{"../core/constants":26,"../core/main":36}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.textAlign=function(e,t){var n;return i.default._validateParameters("textAlign",arguments),(n=this._renderer).textAlign.apply(n,arguments)},i.default.prototype.textLeading=function(e){var t;return i.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},i.default.prototype.textSize=function(e){var t;return i.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},i.default.prototype.textStyle=function(e){var t;return i.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},i.default.prototype.textWidth=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n[0]+="",i.default._validateParameters("textWidth",n),0===n[0].length?0:(e=this._renderer).textWidth.apply(e,n)},i.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("textAscent",t),this._renderer.textAscent()},i.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("textDescent",t),this._renderer.textDescent()},i.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()};var o=i.default;n.default=o},{"../core/main":36}],73:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=c(e("../core/constants")),s=c(e("opentype.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadFont=function(e,t,n){o.default._validateParameters("loadFont",arguments);var r=new o.default.Font(this),i=this;return s.load(e,(function(a,s){if(a)return o.default._friendlyFileLoadError(4,e),void 0!==n?n(a):void console.error(a,e);r.font=s,void 0!==t&&t(r),i._decrementPreload();var l,c,u=e.split("\\").pop().split("/").pop(),h=u.lastIndexOf("."),d=h<1?null:u.substr(h+1);["ttf","otf","woff","woff2"].includes(d)&&(l=u.substr(0,h),(c=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(l,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(c))})),r},o.default.prototype.text=function(e,t,n,r,i){var a;return o.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(a=this._renderer).text.apply(a,arguments):this},o.default.prototype.textFont=function(e,t){if(o.default._validateParameters("textFont",arguments),arguments.length){if(!e)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._setProperty("_textLeading",t*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var u=o.default;n.default=u},{"../core/constants":26,"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36,"opentype.js":12}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=function(e,t){if("object"!==a(e))e=t;else for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}(t,{sampleFactor:.1,simplifyThreshold:0}),r=p(e,0,1),i=r/(r*n.sampleFactor),o=[],s=0;s<r;s+=i)o.push(p(e,s));return n.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.length-1;3<e.length&&0<=n;--n)h(u(e,n-1),u(e,n),u(e,n+1),t)&&e.splice(n%e.length,1)}(o,n.simplifyThreshold),o}function l(e){for(var t,n=[],r=0;r<e.length;r++)"M"===e[r].type&&(t&&n.push(t),t=[]),t.push(c(e[r]));return n.push(t),n}function c(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}function u(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function h(e,t,n,r){if(!r)return 0==(i=e,a=n,((o=t)[0]-i[0])*(a[1]-i[1])-(a[0]-i[0])*(o[1]-i[1]));var i,o,a;void 0===h.tmpPoint1&&(h.tmpPoint1=[],h.tmpPoint2=[]);var s=h.tmpPoint1,l=h.tmpPoint2;s.x=t.x-e.x,s.y=t.y-e.y,l.x=n.x-t.x,l.y=n.y-t.y;var c=s.x*l.x+s.y*l.y,u=Math.sqrt(s.x*s.x+s.y*s.y),d=Math.sqrt(l.x*l.x+l.y*l.y);return Math.acos(c/(u*d))<r}function d(e,t,n,r,i,o,a,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),d=l*l,f=d*l,p=u*e+3*h*l*n+3*c*l*l*i+f*a,m=u*t+3*h*l*r+3*c*l*l*o+f*s,g=e+2*l*(n-e)+d*(i-2*n+e),y=t+2*l*(r-t)+d*(o-2*r+t),v=n+2*l*(i-n)+d*(a-2*i+n),_=r+2*l*(o-r)+d*(s-2*o+r),b=c*e+l*n,x=c*t+l*r,w=c*i+l*a,S=c*o+l*s,A=90-180*Math.atan2(g-v,y-_)/Math.PI;return(v<g||y<_)&&(A+=180),{x:p,y:m,m:{x:g,y},n:{x:v,y:_},start:{x:b,y:x},end:{x:w,y:S},alpha:A}}function f(e,t,n,r,i,o,a,s,l){return null==l?_(e,t,n,r,i,o,a,s):d(e,t,n,r,i,o,a,s,function(e,t,n,r,i,o,a,s,l){if(!(l<0||_(e,t,n,r,i,o,a,s)<l)){var c,u=.5,h=1-u;for(c=_(e,t,n,r,i,o,a,s,h);.01<Math.abs(c-l);)c=_(e,t,n,r,i,o,a,s,h+=(c<l?1:-1)*(u/=2));return h}}(e,t,n,r,i,o,a,s,l))}function p(e,t,n){for(var r,i,o,a,s,l=0,c=0,u=(e=function(e,t){function n(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,n,r,i,o,a,s,l,c,u){var h,d,f,p,m,g=Math.PI,y=120*g/180,v=g/180*(+o||0),_=[],b=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(u)h=u[0],d=u[1],f=u[2],p=u[3];else{t=(m=b(t,n,-v)).x,n=m.y;var x=(t-(l=(m=b(l,c,-v)).x))/2,w=(n-(c=m.y))/2,S=x*x/(r*r)+w*w/(i*i);1<S&&(r*=S=Math.sqrt(S),i*=S);var A=r*r,E=i*i,M=(a===s?-1:1)*Math.sqrt(Math.abs((A*E-A*w*w-E*x*x)/(A*w*w+E*x*x)));f=M*r*w/i+(t+l)/2,p=M*-i*x/r+(n+c)/2,h=Math.asin(((n-p)/i).toFixed(9)),d=Math.asin(((c-p)/i).toFixed(9)),(h=t<f?g-h:h)<0&&(h=2*g+h),(d=l<f?g-d:d)<0&&(d=2*g+d),s&&d<h&&(h-=2*g),!s&&h<d&&(d-=2*g)}var C=d-h;if(Math.abs(C)>y){var T=d,P=l,D=c;d=h+y*(s&&h<d?1:-1),_=e(l=f+r*Math.cos(d),c=p+i*Math.sin(d),r,i,o,0,s,P,D,[d,T,f,p])}C=d-h;var k=Math.cos(h),O=Math.sin(h),I=Math.cos(d),R=Math.sin(d),L=Math.tan(C/4),B=4/3*r*L,z=4/3*i*L,F=[t,n],N=[t+B*O,n-z*k],U=[l+B*R,c-z*I],j=[l,c];if(N[0]=2*F[0]-N[0],N[1]=2*F[1]-N[1],u)return[N,U,j].concat(_);for(var V=[],G=0,H=(_=[N,U,j].concat(_).join().split(",")).length;G<H;G++)V[G]=G%2?b(_[G-1],_[G],v).y:b(_[G],_[G+1],v).x;return V}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":i="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(v(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(v(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(y(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(y(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(y(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(y(t.x,t.y,t.X,t.Y))}return e}function r(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)u[t]="A",s&&(h[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),o=Math.max(a.length,s&&s.length||0)}}function i(e,t,n,r,i){e&&t&&"M"===e[i][0]&&"M"!==t[i][0]&&(t.splice(i,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[i][1],n.y=e[i][2],o=Math.max(a.length,s&&s.length||0))}var o,a=m(e),s=void 0,l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=[],h=[],d="",f="";o=Math.max(a.length,s&&s.length||0);for(var p=0;p<o;p++){a[p]&&(d=a[p][0]),"C"!==d&&(u[p]=d,p&&(f=u[p-1])),a[p]=n(a[p],l,f),"A"!==u[p]&&"C"===d&&(u[p]="C"),r(a,p),s&&(s[p]&&(d=s[p][0]),"C"!==d&&(h[p]=d,p&&(f=h[p-1])),s[p]=n(s[p],c,f),"A"!==h[p]&&"C"===d&&(h[p]="C"),r(s,p)),i(a,s,l,c,p),i(s,a,c,l,p);var g=a[p],_=s&&s[p],b=g.length,x=s&&_.length;l.x=g[b-2],l.y=g[b-1],l.bx=parseFloat(g[b-4])||l.x,l.by=parseFloat(g[b-3])||l.y,c.bx=s&&(parseFloat(_[x-4])||c.x),c.by=s&&(parseFloat(_[x-3])||c.y),c.x=s&&_[x-2],c.y=s&&_[x-1]}return s?[a,s]:a}(e)).length;c<u;c++){if("M"===(o=e[c])[0])r=+o[1],i=+o[2];else{if(t<l+(a=f(r,i,o[1],o[2],o[3],o[4],o[5],o[6]))&&!n)return{x:(s=f(r,i,o[1],o[2],o[3],o[4],o[5],o[6],t-l)).x,y:s.y,alpha:s.alpha};l+=a,r=+o[5],i=+o[6]}o.shift()}return(s=n?l:d(r,i,o[0],o[1],o[2],o[3],o[4],o[5],1)).alpha&&(s={x:s.x,y:s.y,alpha:s.alpha}),s}function m(e){var t,n=[],r=0,i=0,o=0,a=0,s=0;if(!e)return n;"M"===e[0][0]&&(o=r=+e[0][1],a=i=+e[0][2],s++,n[0]=["M",r,i]);for(var l,c,u=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),h=s,d=e.length;h<d;h++){if(n.push(l=[]),(c=e[h])[0]!==String.prototype.toUpperCase.call(c[0]))switch(l[0]=String.prototype.toUpperCase.call(c[0]),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+(c[6]+r),l[7]=+(c[7]+i);break;case"V":l[1]=+c[1]+i;break;case"H":l[1]=+c[1]+r;break;case"R":for(var f=2,p=(t=[r,i].concat(c.slice(1))).length;f<p;f++)t[f]=+t[f]+r,t[++f]=+t[f]+i;n.pop(),n=n.concat(g(t,u));break;case"M":o=+c[1]+r,a=+c[2]+i;break;default:for(var m=1,y=c.length;m<y;m++)l[m]=+c[m]+(m%2?r:i)}else if("R"===c[0])t=[r,i].concat(c.slice(1)),n.pop(),n=n.concat(g(t,u)),l=["R"].concat(c.slice(-2));else for(var v=0,_=c.length;v<_;v++)l[v]=c[v];switch(l[0]){case"Z":r=o,i=a;break;case"H":r=l[1];break;case"V":i=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];break;default:r=l[l.length-2],i=l[l.length-1]}}return n}function g(e,t){for(var n=[],r=0,i=e.length;r<i-2*!t;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?o[3]={x:+e[0],y:+e[1]}:i-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function y(e,t,n,r){return[e,t,n,r,n,r]}function v(e,t,n,r,i,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]}function _(e,t,n,r,i,o,a,s,l){null==l&&(l=1);for(var c=(l=1<l?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=0,d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0;f<12;f++){var p=c*u[f]+c,m=b(p,e,n,i,a),g=b(p,t,r,o,s),y=m*m+g*g;h+=d[f]*Math.sqrt(y)}return c*h}function b(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}i.default.Font=function(e){this.parent=e,this.cache={},this.font=void 0},i.default.Font.prototype.textBounds=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,s=a&&a.renderer&&a.renderer._pInst||this.parent,l=s._renderer.drawingContext;if(l.textAlign||o.LEFT,l.textBaseline||o.BASELINE,i=i||s._renderer._textSize,!t){var c,u,h=[],d=[],f=[];f[0]=[];var p=[],m=this._scale(i),g=s._renderer.textLeading(),y=0;this.font.forEachGlyph(e,n,r,i,a,(function(e,t,n,r){var i=e.getMetrics();0===e.index||10===e.index?f[y+=1]=[]:(f[y].push(t+i.xMin*m),f[y].push(t+i.xMax*m),p.push(n+y*g+-i.yMin*m),p.push(n+y*g+-i.yMax*m))})),0<f[y].length&&(h[y]=Math.min.apply(null,f[y]),d[y]=Math.max.apply(null,f[y]));for(var v=0,_=0;_<=y;_++){h[_]=Math.min.apply(null,f[_]),d[_]=Math.max.apply(null,f[_]);var b=d[_]-h[_];v<b&&(v=b)}var x=Math.min.apply(null,h);t={x,y:c=Math.min.apply(null,p),h:Math.max.apply(null,p)-c,w:v,advance:x-n},u=this._handleAlignment(s._renderer,e,t.x,t.y,t.w+t.advance),t.x=u.x,t.y=u.y}return t},i.default.Font.prototype.textToPoints=function(e,t,n,r,i){var o,a=0,c=[],u=this._getGlyphs(e);r=r||this.parent._renderer._textSize;for(var h=0;h<u.length;h++){if(!(u[o=h].name&&"space"===u[o].name||e.length===u.length&&" "===e[o]||u[o].index&&3===u[o].index))for(var d=l(u[h].getPath(t,n,r).commands),f=0;f<d.length;f++)for(var p=s(d[f],i),m=0;m<p.length;m++)p[m].x+=a,c.push(p[m]);a+=u[h].advanceWidth*this._scale(r)}return c},i.default.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},i.default.Font.prototype._getPath=function(e,t,n,r){var i=(r&&r.renderer&&r.renderer._pInst||this.parent)._renderer,o=this._handleAlignment(i,e,t,n);return this.font.getPath(e,o.x,o.y,i._textSize,r)},i.default.Font.prototype._getPathData=function(e,t,n,r){var i=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===a(t)&&(r=t),r&&"number"==typeof r.decimals&&(i=r.decimals),e.toPathData(i)},i.default.Font.prototype._getSVG=function(e,t,n,r){var i=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===a(t)&&(r=t),r&&("number"==typeof r.decimals&&(i=r.decimals),"number"==typeof r.strokeWidth&&(e.strokeWidth=r.strokeWidth),void 0!==r.fill&&(e.fill=r.fill),void 0!==r.stroke&&(e.stroke=r.stroke)),e.toSVG(i)},i.default.Font.prototype._renderPath=function(e,t,n,r){var i,s=r&&r.renderer||this.parent._renderer,l=s.drawingContext;i="object"===a(e)&&e.commands?e.commands:this._getPath(e,t,n,r).commands,l.beginPath();var c=!0,u=!1,h=void 0;try{for(var d,f=i[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;"M"===p.type?l.moveTo(p.x,p.y):"L"===p.type?l.lineTo(p.x,p.y):"C"===p.type?l.bezierCurveTo(p.x1,p.y1,p.x2,p.y2,p.x,p.y):"Q"===p.type?l.quadraticCurveTo(p.x1,p.y1,p.x,p.y):"Z"===p.type&&l.closePath()}}catch(e){u=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}return s._doStroke&&s._strokeSet&&l.stroke(),s._doFill&&(s._fillSet||s._setFill(o._DEFAULT_TEXT_FILL),l.fill()),this},i.default.Font.prototype._textWidth=function(e,t){return this.font.getAdvanceWidth(e,t)},i.default.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},i.default.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},i.default.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},i.default.Font.prototype._handleAlignment=function(e,t,n,r,i){var a=e._textSize;switch(void 0===i&&(i=this._textWidth(t,a)),e._textAlign){case o.CENTER:n-=i/2;break;case o.RIGHT:n-=i}switch(e._textBaseline){case o.TOP:r+=this._textAscent(a);break;case o.CENTER:r+=this._textAscent(a)/2;break;case o.BOTTOM:r-=this._textDescent(a)}return{x:n,y:r}};var x=i.default;n.default=x},{"../core/constants":26,"../core/main":36}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.append=function(e,t){return e.push(t),e},i.default.prototype.arrayCopy=function(e,t,n,r,i){var o,a;e=void 0!==i?(a=Math.min(i,e.length),o=r,e.slice(t,a+t)):(a=void 0!==n?(a=n,Math.min(a,e.length)):e.length,o=0,n=t,e.slice(0,a)),Array.prototype.splice.apply(n,[o,a].concat(e))},i.default.prototype.concat=function(e,t){return e.concat(t)},i.default.prototype.reverse=function(e){return e.reverse()},i.default.prototype.shorten=function(e){return e.pop(),e},i.default.prototype.shuffle=function(e,t){for(var n,r,i=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),o=(e=t||i?e:e.slice()).length;1<o;)n=this.random(0,1)*o|0,r=e[--o],e[o]=e[n],e[n]=r;return e},i.default.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e,r=t?e.slice(Math.min(t,e.length)):[];return(n="string"==typeof n[0]?n.sort():n.sort((function(e,t){return e-t}))).concat(r)},i.default.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},i.default.prototype.subset=function(e,t,n){return void 0!==n?e.slice(t,t+n):e.slice(t,e.length)};var o=i.default;n.default=o},{"../core/main":36}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},i.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map((function(e){return i.default.prototype.int(e,t)})):void 0},i.default.prototype.str=function(e){return e instanceof Array?e.map(i.default.prototype.str):String(e)},i.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(i.default.prototype.boolean):void 0},i.default.prototype.byte=function(e){var t=i.default.prototype.int(e,10);return"number"==typeof t?(t+128)%256-128:t instanceof Array?t.map(i.default.prototype.byte):void 0},i.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(i.default.prototype.char):"string"==typeof e?i.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},i.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(i.default.prototype.unchar):void 0},i.default.prototype.hex=function(e,t){if(t=null==t?t=8:t,e instanceof Array)return e.map((function(e){return i.default.prototype.hex(e,t)}));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0".concat(n);return n.length>=t&&(n=n.substring(n.length-t,n.length)),n}},i.default.prototype.unhex=function(e){return e instanceof Array?e.map(i.default.prototype.unhex):parseInt("0x".concat(e),16)};var o=i.default;n.default=o},{"../core/main":36}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e,t,n){var r=e<0,i=r?e.toString().substring(1):e.toString(),o=i.indexOf("."),a=-1!==o?i.substring(0,o):i,s=-1!==o?i.substring(o+1):"",l=r?"-":"";if(void 0!==n){var c="";(-1!==o||0<n-s.length)&&(c="."),s.length>n&&(s=s.substring(0,n));for(var u=0;u<t-a.length;u++)l+="0";l+=a,l+=c,l+=s;for(var h=0;h<n-s.length;h++)l+="0";return l}for(var d=0;d<Math.max(t-a.length,0);d++)l+="0";return l+i}function a(e,t){var n=(e=e.toString()).indexOf("."),r=-1!==n?e.substring(n):"",i=-1!==n?e.substring(0,n):e;if(i=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)r="";else if(void 0!==t)if(t>r.length)for(var o=t-(r+=-1===n?".":"").length+1,a=0;a<o;a++)r+="0";else r=r.substring(0,t+1);return i+r}function s(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function l(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.join=function(e,t){return i.default._validateParameters("join",arguments),e.join(t)},i.default.prototype.match=function(e,t){return i.default._validateParameters("match",arguments),e.match(t)},i.default.prototype.matchAll=function(e,t){i.default._validateParameters("matchAll",arguments);for(var n=new RegExp(t,"g"),r=n.exec(e),o=[];null!==r;)o.push(r),r=n.exec(e);return o},i.default.prototype.nf=function(e,t,n){return i.default._validateParameters("nf",arguments),e instanceof Array?e.map((function(e){return o(e,t,n)})):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):o(e,t,n)},i.default.prototype.nfc=function(e,t){return i.default._validateParameters("nfc",arguments),e instanceof Array?e.map((function(e){return a(e,t)})):a(e,t)},i.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("nfp",t);var r=i.default.prototype.nf.apply(this,t);return r instanceof Array?r.map(s):s(r)},i.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("nfs",t);var r=i.default.prototype.nf.apply(this,t);return r instanceof Array?r.map(l):l(r)},i.default.prototype.split=function(e,t){return i.default._validateParameters("split",arguments),e.split(t)},i.default.prototype.splitTokens=function(e,t){var n;if(i.default._validateParameters("splitTokens",arguments),void 0!==t){var r=t,o=/\]/g.exec(r),a=/\[/g.exec(r);n=a&&o?(r=r.slice(0,o.index)+r.slice(o.index+1),a=/\[/g.exec(r),r=r.slice(0,a.index)+r.slice(a.index+1),new RegExp("[\\[".concat(r,"\\]]"),"g")):o?(r=r.slice(0,o.index)+r.slice(o.index+1),new RegExp("[".concat(r,"\\]]"),"g")):a?(r=r.slice(0,a.index)+r.slice(a.index+1),new RegExp("[".concat(r,"\\[]"),"g")):new RegExp("[".concat(r,"]"),"g")}else n=/\s/g;return e.split(n).filter((function(e){return e}))},i.default.prototype.trim=function(e){return i.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var c=i.default;n.default=c},{"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.day=function(){return(new Date).getDate()},i.default.prototype.hour=function(){return(new Date).getHours()},i.default.prototype.minute=function(){return(new Date).getMinutes()},i.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},i.default.prototype.month=function(){return(new Date).getMonth()+1},i.default.prototype.second=function(){return(new Date).getSeconds()},i.default.prototype.year=function(){return(new Date).getFullYear()};var o=i.default;n.default=o},{"../core/main":36}],79:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i};e("./p5.Geometry");var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function s(e,t,n,r,i,a,s){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;var l,c,u,h=(a=void 0===a||a)?-2:0,d=(i=i<1?1:i)+((s=void 0===s?0!==t:s)?2:0),f=Math.atan2(e-t,n),p=Math.sin(f),m=Math.cos(f);for(l=h;l<=d;++l){var g=l/i,y=n*g,v=void 0;for(v=l<0?(g=y=0,e):i<l?(y=n,g=1,t):e+(t-e)*g,-2!==l&&l!==i+2||(v=0),y-=n/2,c=0;c<r;++c){var _,b=c/(r-1),x=2*Math.PI*b,w=Math.sin(x),S=Math.cos(x);this.vertices.push(new o.default.Vector(w*v,y,S*v)),_=l<0?new o.default.Vector(0,-1,0):i<l&&t?new o.default.Vector(0,1,0):new o.default.Vector(w*m,p,S*m),this.vertexNormals.push(_),this.uvs.push(b,g)}}var A=0;if(a){for(u=0;u<r;++u){var E=(u+1)%r;this.faces.push([A+u,A+r+E,A+r+u])}A+=2*r}for(l=0;l<i;++l){for(c=0;c<r;++c){var M=(c+1)%r;this.faces.push([A+c,A+M,A+r+M]),this.faces.push([A+c,A+r+M,A+r+c])}A+=r}if(s)for(A+=r,c=0;c<r;++c)this.faces.push([A+c,A+(c+1)%r,A+r])}o.default.prototype.plane=function(e,t,n,r){this._assert3d("plane"),o.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=1),void 0===r&&(r=1);var i="plane|".concat(n,"|").concat(r);if(!this._renderer.geometryInHash(i)){var a=new o.default.Geometry(n,r,(function(){for(var e,t,n,r=0;r<=this.detailY;r++){t=r/this.detailY;for(var i=0;i<=this.detailX;i++)e=i/this.detailX,n=new o.default.Vector(e-.5,t-.5,0),this.vertices.push(n),this.uvs.push(e,t)}}));a.computeFaces().computeNormals(),n<=1&&r<=1?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(i,a)}return this._renderer.drawBuffersScaled(i,e,t,1),this},o.default.prototype.box=function(e,t,n,r,i){this._assert3d("box"),o.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=t);var a=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;void 0===r&&(r=a?1:4),void 0===i&&(i=a?1:4);var s="box|".concat(r,"|").concat(i);if(!this._renderer.geometryInHash(s)){var l=new o.default.Geometry(r,i,(function(){var e=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var t=0;t<e.length;t++){for(var n=e[t],r=4*t,i=0;i<4;i++){var a=n[i],s=new o.default.Vector((2*(1&a)-1)/2,((2&a)-1)/2,((4&a)/2-1)/2);this.vertices.push(s),this.uvs.push(1&i,(2&i)/2)}this.faces.push([r,1+r,2+r]),this.faces.push([2+r,1+r,3+r])}}));l.computeNormals(),r<=4&&i<=4?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(s,l)}return this._renderer.drawBuffersScaled(s,e,t,n),this},o.default.prototype.sphere=function(e,t,n){return this._assert3d("sphere"),o.default._validateParameters("sphere",arguments),void 0===e&&(e=50),void 0===t&&(t=24),void 0===n&&(n=16),this.ellipsoid(e,e,e,t,n),this},o.default.prototype.cylinder=function(e,t,n,r,i,a){this._assert3d("cylinder"),o.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=24),void 0===r&&(r=1),void 0===a&&(a=!0),void 0===i&&(i=!0);var l="cylinder|".concat(n,"|").concat(r,"|").concat(i,"|").concat(a);if(!this._renderer.geometryInHash(l)){var c=new o.default.Geometry(n,r);s.call(c,1,1,1,n,r,i,a),n<=24&&r<=16?c._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(l,c)}return this._renderer.drawBuffersScaled(l,e,t,e),this},o.default.prototype.cone=function(e,t,n,r,i){this._assert3d("cone"),o.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=24),void 0===r&&(r=1),void 0===i&&(i=!0);var a="cone|".concat(n,"|").concat(r,"|").concat(i);if(!this._renderer.geometryInHash(a)){var l=new o.default.Geometry(n,r);s.call(l,1,0,1,n,r,i,!1),n<=24&&r<=16?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(a,l)}return this._renderer.drawBuffersScaled(a,e,t,e),this},o.default.prototype.ellipsoid=function(e,t,n,r,i){this._assert3d("ellipsoid"),o.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=e),void 0===r&&(r=24),void 0===i&&(i=16);var a="ellipsoid|".concat(r,"|").concat(i);if(!this._renderer.geometryInHash(a)){var s=new o.default.Geometry(r,i,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=Math.PI*t-Math.PI/2,r=Math.cos(n),i=Math.sin(n),a=0;a<=this.detailX;a++){var s=a/this.detailX,l=2*Math.PI*s,c=Math.cos(l),u=Math.sin(l),h=new o.default.Vector(r*u,i,r*c);this.vertices.push(h),this.vertexNormals.push(h),this.uvs.push(s,t)}}));s.computeFaces(),r<=24&&i<=24?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(a,s)}return this._renderer.drawBuffersScaled(a,e,t,n),this},o.default.prototype.torus=function(e,t,n,r){if(this._assert3d("torus"),o.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===n&&(n=24),void 0===r&&(r=16);var i=(t/e).toPrecision(4),a="torus|".concat(i,"|").concat(n,"|").concat(r);if(!this._renderer.geometryInHash(a)){var s=new o.default.Geometry(n,r,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),a=Math.sin(n),s=1+i*r,l=0;l<=this.detailX;l++){var c=l/this.detailX,u=2*Math.PI*c,h=Math.cos(u),d=Math.sin(u),f=new o.default.Vector(s*h,s*d,i*a),p=new o.default.Vector(r*h,r*d,a);this.vertices.push(f),this.vertexNormals.push(p),this.uvs.push(c,t)}}));s.computeFaces(),n<=24&&r<=16?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(a,s)}return this._renderer.drawBuffersScaled(a,e,e,e),this},o.default.RendererGL.prototype.point=function(e,t,n){void 0===n&&(n=0);var r=[];return r.push(new o.default.Vector(e,t,n)),this._drawPoints(r,this.immediateMode.buffers.point),this},o.default.RendererGL.prototype.triangle=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5];if(!this.geometryInHash("tri")){var l=new o.default.Geometry(1,1,(function(){var e=[];e.push(new o.default.Vector(0,0,0)),e.push(new o.default.Vector(0,1,0)),e.push(new o.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}));l._makeTriangleEdges()._edgesToVertices(),l.computeNormals(),this.createBuffers("tri",l)}var c=this.uMVMatrix.copy();try{var u=new o.default.Matrix([r-t,i-n,0,0,a-t,s-n,0,0,0,0,1,0,t,n,0,1]).mult(this.uMVMatrix);this.uMVMatrix=u,this.drawBuffers("tri")}finally{this.uMVMatrix=c}return this},o.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,a.TWO_PI,a.OPEN,e[4])},o.default.RendererGL.prototype.arc=function(e){var t,n=e,r=arguments[1],i=arguments[2],s=arguments[3],l=arguments[4],c=arguments[5],u=arguments[6],h=arguments[7]||25;if(t=Math.abs(c-l)>=a.TWO_PI?"".concat("ellipse","|").concat(h,"|"):"".concat("arc","|").concat(l,"|").concat(c,"|").concat(u,"|").concat(h,"|"),!this.geometryInHash(t)){var d=new o.default.Geometry(h,1,(function(){if(this.strokeIndices=[],l.toFixed(10)!==c.toFixed(10)){u!==a.PIE&&void 0!==u||(this.vertices.push(new o.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=h;e++){var t=e/h*(c-l)+l,n=.5+Math.cos(t)/2,r=.5+Math.sin(t)/2;this.vertices.push(new o.default.Vector(n,r,0)),this.uvs.push([n,r]),e<h-1&&(this.faces.push([0,e+1,e+2]),this.strokeIndices.push([e+1,e+2]))}switch(u){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}}));d.computeNormals(),h<=50?d._makeTriangleEdges()._edgesToVertices(d):this._renderer._doStroke&&console.log("Cannot stroke ${shape} with more than 50 detail"),this.createBuffers(t,d)}var f=this.uMVMatrix.copy();try{this.uMVMatrix.translate([n,r,0]),this.uMVMatrix.scale(i,s,1),this.drawBuffers(t)}finally{this.uMVMatrix=f}return this},o.default.RendererGL.prototype.rect=function(e){var t=this._pInst._glAttributes.perPixelLighting,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4]||(t?1:24),l=e[5]||(t?1:16),c="rect|".concat(s,"|").concat(l);if(!this.geometryInHash(c)){var u=new o.default.Geometry(s,l,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=0;n<=this.detailX;n++){var r=n/this.detailX,i=new o.default.Vector(r,t,0);this.vertices.push(i),this.uvs.push(r,t)}0<s&&0<l&&(this.strokeIndices=[[0,s],[s,(s+1)*(l+1)-1],[(s+1)*(l+1)-1,(s+1)*l],[(s+1)*l,0]])}));u.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(c,u)}var h=this.uMVMatrix.copy();try{this.uMVMatrix.translate([n,r,0]),this.uMVMatrix.scale(i,a,1),this.drawBuffers(c)}finally{this.uMVMatrix=h}return this},o.default.RendererGL.prototype.quad=function(e,t,n,r,i,a,s,l,c,u,h,d){var f="quad|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(c,"|").concat(u,"|").concat(h,"|").concat(d);if(!this.geometryInHash(f)){var p=new o.default.Geometry(2,2,(function(){this.vertices.push(new o.default.Vector(e,t,n)),this.vertices.push(new o.default.Vector(r,i,a)),this.vertices.push(new o.default.Vector(s,l,c)),this.vertices.push(new o.default.Vector(u,h,d)),this.uvs.push(0,0,1,0,1,1,0,1),this.strokeIndices=[[0,1],[1,2],[2,3],[3,0]]}));p.computeNormals()._makeTriangleEdges()._edgesToVertices(),p.faces=[[0,1,2],[2,3,0]],this.createBuffers(f,p)}return this.drawBuffers(f),this},o.default.RendererGL.prototype.bezier=function(e,t,n,r,i,o,a,s,l,c,u,h){8===arguments.length&&(u=s,c=a,s=o,a=i,i=r,r=n,n=o=l=h=0);var d=this._pInst._bezierDetail||20;this.beginShape();for(var f=0;f<=d;f++){var p=Math.pow(1-f/d,3),m=f/d*3*Math.pow(1-f/d,2),g=3*Math.pow(f/d,2)*(1-f/d),y=Math.pow(f/d,3);this.vertex(e*p+r*m+a*g+c*y,t*p+i*m+s*g+u*y,n*p+o*m+l*g+h*y)}return this.endShape(),this},o.default.RendererGL.prototype.curve=function(e,t,n,r,i,o,a,s,l,c,u,h){8===arguments.length&&(c=a,u=s,a=i,s=r,i=r=n,n=o=l=h=0);var d=this._pInst._curveDetail;this.beginShape();for(var f=0;f<=d;f++){var p=.5*Math.pow(f/d,3),m=.5*Math.pow(f/d,2),g=f/d*.5,y=p*(3*r-e-3*a+c)+m*(2*e-5*r+4*a-c)+g*(-e+a)+2*r*.5,v=p*(3*i-t-3*s+u)+m*(2*t-5*i+4*s-u)+g*(-t+s)+2*i*.5,_=p*(3*o-n-3*l+h)+m*(2*n-5*o+4*l-h)+g*(-n+l)+2*o*.5;this.vertex(y,v,_)}return this.endShape(),this},o.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},o.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,n,r,i,o=[],a=[],s=[],l=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,u=0,h=1,d=0;u<1;){if(e=parseFloat(u.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(e),h.toFixed(6)===c.toFixed(6)){e=parseFloat(h.toFixed(6))+parseFloat(u.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(e);break}u+=c,h-=c,++d}}var f=this._lookUpTableBezier.length;if(6===l){for(this.isBezier=!0,o=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],a=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],i=0;i<f;i++)t=o[0]*this._lookUpTableBezier[i][0]+o[1]*this._lookUpTableBezier[i][1]+o[2]*this._lookUpTableBezier[i][2]+o[3]*this._lookUpTableBezier[i][3],n=a[0]*this._lookUpTableBezier[i][0]+a[1]*this._lookUpTableBezier[i][1]+a[2]*this._lookUpTableBezier[i][2]+a[3]*this._lookUpTableBezier[i][3],this.vertex(t,n);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===l){for(this.isBezier=!0,o=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],a=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],s=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],i=0;i<f;i++)t=o[0]*this._lookUpTableBezier[i][0]+o[1]*this._lookUpTableBezier[i][1]+o[2]*this._lookUpTableBezier[i][2]+o[3]*this._lookUpTableBezier[i][3],n=a[0]*this._lookUpTableBezier[i][0]+a[1]*this._lookUpTableBezier[i][1]+a[2]*this._lookUpTableBezier[i][2]+a[3]*this._lookUpTableBezier[i][3],r=s[0]*this._lookUpTableBezier[i][0]+s[1]*this._lookUpTableBezier[i][1]+s[2]*this._lookUpTableBezier[i][2]+s[3]*this._lookUpTableBezier[i][3],this.vertex(t,n,r);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},o.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,n,r,i,o=[],a=[],s=[],l=arguments.length;if((e=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var c=1/this._lutQuadraticDetail,u=0,h=1,d=0;u<1;){if(e=parseFloat(u.toFixed(6)),this._lookUpTableQuadratic[d]=this._quadraticCoefficients(e),h.toFixed(6)===c.toFixed(6)){e=parseFloat(h.toFixed(6))+parseFloat(u.toFixed(6)),++d,this._lookUpTableQuadratic[d]=this._quadraticCoefficients(e);break}u+=c,h-=c,++d}}var f=this._lookUpTableQuadratic.length;if(4===l){for(this.isQuadratic=!0,o=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],a=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],i=0;i<f;i++)t=o[0]*this._lookUpTableQuadratic[i][0]+o[1]*this._lookUpTableQuadratic[i][1]+o[2]*this._lookUpTableQuadratic[i][2],n=a[0]*this._lookUpTableQuadratic[i][0]+a[1]*this._lookUpTableQuadratic[i][1]+a[2]*this._lookUpTableQuadratic[i][2],this.vertex(t,n);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===l){for(this.isQuadratic=!0,o=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],a=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],s=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],i=0;i<f;i++)t=o[0]*this._lookUpTableQuadratic[i][0]+o[1]*this._lookUpTableQuadratic[i][1]+o[2]*this._lookUpTableQuadratic[i][2],n=a[0]*this._lookUpTableQuadratic[i][0]+a[1]*this._lookUpTableQuadratic[i][1]+a[2]*this._lookUpTableQuadratic[i][2],r=s[0]*this._lookUpTableQuadratic[i][0]+s[1]*this._lookUpTableQuadratic[i][1]+s[2]*this._lookUpTableQuadratic[i][2],this.vertex(t,n,r);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},o.default.RendererGL.prototype.curveVertex=function(){var e,t,n,r,i,o=[],a=[],s=[],l=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,u=0,h=1,d=0;u<1;){if(e=parseFloat(u.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(e),h.toFixed(6)===c.toFixed(6)){e=parseFloat(h.toFixed(6))+parseFloat(u.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(e);break}u+=c,h-=c,++d}}var f=this._lookUpTableBezier.length;if(2===l){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,o=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),a=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),i=0;i<f;i++)t=o[0]*this._lookUpTableBezier[i][0]+o[1]*this._lookUpTableBezier[i][1]+o[2]*this._lookUpTableBezier[i][2]+o[3]*this._lookUpTableBezier[i][3],n=a[0]*this._lookUpTableBezier[i][0]+a[1]*this._lookUpTableBezier[i][1]+a[2]*this._lookUpTableBezier[i][2]+a[3]*this._lookUpTableBezier[i][3],this.vertex(t,n);for(i=0;i<l;i++)this.immediateMode._curveVertex.shift()}}else if(3===l&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,o=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),a=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),i=0;i<f;i++)t=o[0]*this._lookUpTableBezier[i][0]+o[1]*this._lookUpTableBezier[i][1]+o[2]*this._lookUpTableBezier[i][2]+o[3]*this._lookUpTableBezier[i][3],n=a[0]*this._lookUpTableBezier[i][0]+a[1]*this._lookUpTableBezier[i][1]+a[2]*this._lookUpTableBezier[i][2]+a[3]*this._lookUpTableBezier[i][3],r=s[0]*this._lookUpTableBezier[i][0]+s[1]*this._lookUpTableBezier[i][1]+s[2]*this._lookUpTableBezier[i][2]+s[3]*this._lookUpTableBezier[i][3],this.vertex(t,n,r);for(i=0;i<l;i++)this.immediateMode._curveVertex.shift()}},o.default.RendererGL.prototype.image=function(e,t,n,r,i,o,s,l,c){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(e),this._pInst.textureMode(a.NORMAL);var u=0;t<=e.width&&(u=t/e.width);var h=1;t+r<=e.width&&(h=(t+r)/e.width);var d=0;n<=e.height&&(d=n/e.height);var f=1;n+i<=e.height&&(f=(n+i)/e.height),this.beginShape(),this.vertex(o,s,0,u,d),this.vertex(o+l,s,0,h,d),this.vertex(o+l,s+c,0,h,f),this.vertex(o,s+c,0,u,f),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var l=o.default;n.default=l},{"../core/constants":26,"../core/main":36,"./p5.Geometry":85}],80:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));o.default.prototype.orbitControl=function(e,t,n){if(this._assert3d("orbitControl"),o.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var r=this._renderer._curCamera;void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=.5),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var i=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,n*i):this._renderer._curCamera._orbit(0,0,-n*i)),this.mouseIsPressed)if(this.mouseButton===this.LEFT){var a=-e*(this.mouseX-this.pmouseX)/i,s=t*(this.mouseY-this.pmouseY)/i;this._renderer._curCamera._orbit(a,s,0)}else if(this.mouseButton===this.RIGHT){var l=r._getLocalAxes(),c=Math.sqrt(l.x[0]*l.x[0]+l.x[2]*l.x[2]);0!==c&&(l.x[0]/=c,l.x[2]/=c);var u=Math.sqrt(l.y[0]*l.y[0]+l.y[2]*l.y[2]);0!==u&&(l.y[0]/=u,l.y[2]/=u);var h=-1*e*(this.mouseX-this.pmouseX),d=-1*t*(this.mouseY-this.pmouseY);r.setPosition(r.eyeX+h*l.x[0]+d*l.z[0],r.eyeY,r.eyeZ+h*l.x[2]+d*l.z[2])}return this}},o.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("debugMode",t);for(var r=this._registeredMethods.post.length-1;0<=r;r--)this._registeredMethods.post[r].toString()!==this._grid().toString()&&this._registeredMethods.post[r].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(r,1);t[0]===a.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===a.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},o.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},o.default.prototype._grid=function(e,t,n,r,i){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=e/t,a=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-a+n,r,e*o-a+i),this.vertex(+a+n,r,e*o-a+i),this.endShape();for(var s=0;s<=t;s++)this.beginShape(this.LINES),this.vertex(s*o-a+n,r,-a+i),this.vertex(s*o-a+n,r,+a+i),this.endShape();this.pop()}},o.default.prototype._axesIcon=function(e,t,n,r){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}};var s=o.default;n.default=s},{"../core/constants":26,"../core/main":36}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.ambientLight=function(e,t,n,r){this._assert3d("ambientLight"),i.default._validateParameters("ambientLight",arguments);var o=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(o._array[0],o._array[1],o._array[2]),this._renderer._enableLighting=!0,this},i.default.prototype.specularColor=function(e,t,n){this._assert3d("specularColor"),i.default._validateParameters("specularColor",arguments);var r=this.color.apply(this,arguments);return this._renderer.specularColors=[r._array[0],r._array[1],r._array[2]],this},i.default.prototype.directionalLight=function(e,t,n,r,o,a){var s,l,c,u;this._assert3d("directionalLight"),i.default._validateParameters("directionalLight",arguments),s=e instanceof i.default.Color?e:this.color(e,t,n);var h=arguments[arguments.length-1];u="number"==typeof h?(l=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(l=h.x,c=h.y,h.z);var d=Math.sqrt(l*l+c*c+u*u);return this._renderer.directionalLightDirections.push(l/d,c/d,u/d),this._renderer.directionalLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.pointLight=function(e,t,n,r,o,a){var s,l,c,u;this._assert3d("pointLight"),i.default._validateParameters("pointLight",arguments),s=e instanceof i.default.Color?e:this.color(e,t,n);var h=arguments[arguments.length-1];return u="number"==typeof h?(l=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(l=h.x,c=h.y,h.z),this._renderer.pointLightPositions.push(l,c,u),this._renderer.pointLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.lights=function(){return this._assert3d("lights"),this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1),this},i.default.prototype.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),i.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=n,this},i.default.prototype.spotLight=function(e,t,n,r,o,a,s,l,c,u,h){var d,f,p;this._assert3d("spotLight"),i.default._validateParameters("spotLight",arguments);var m=arguments.length;switch(m){case 11:case 10:d=this.color(e,t,n),f=new i.default.Vector(r,o,a),p=new i.default.Vector(s,l,c);break;case 9:e instanceof i.default.Color?(d=e,f=new i.default.Vector(t,n,r),p=new i.default.Vector(o,a,s),u=l,h=c):r instanceof i.default.Vector?(d=this.color(e,t,n),f=r,p=new i.default.Vector(o,a,s),u=l,h=c):s instanceof i.default.Vector?(d=this.color(e,t,n),f=new i.default.Vector(r,o,a),p=s,u=l,h=c):(d=this.color(e,t,n),f=new i.default.Vector(r,o,a),p=new i.default.Vector(s,l,c));break;case 8:p=e instanceof i.default.Color?(d=e,f=new i.default.Vector(t,n,r),new i.default.Vector(o,a,s)):r instanceof i.default.Vector?(d=this.color(e,t,n),f=r,new i.default.Vector(o,a,s)):(d=this.color(e,t,n),f=new i.default.Vector(r,o,a),s),u=l;break;case 7:e instanceof i.default.Color&&t instanceof i.default.Vector?(d=e,f=t,p=new i.default.Vector(n,r,o),u=a,h=s):e instanceof i.default.Color&&o instanceof i.default.Vector?(d=e,f=new i.default.Vector(t,n,r),p=o,u=a,h=s):r instanceof i.default.Vector&&o instanceof i.default.Vector?(d=this.color(e,t,n),f=r,p=o,u=a,h=s):p=e instanceof i.default.Color?(d=e,f=new i.default.Vector(t,n,r),new i.default.Vector(o,a,s)):r instanceof i.default.Vector?(d=this.color(e,t,n),f=r,new i.default.Vector(o,a,s)):(d=this.color(e,t,n),f=new i.default.Vector(r,o,a),s);break;case 6:r instanceof i.default.Vector&&o instanceof i.default.Vector?(d=this.color(e,t,n),f=r,p=o,u=a):e instanceof i.default.Color&&o instanceof i.default.Vector?(d=e,f=new i.default.Vector(t,n,r),p=o,u=a):e instanceof i.default.Color&&t instanceof i.default.Vector&&(d=e,f=t,p=new i.default.Vector(n,r,o),u=a);break;case 5:e instanceof i.default.Color&&t instanceof i.default.Vector&&n instanceof i.default.Vector?(d=e,f=t,p=n,u=r,h=o):r instanceof i.default.Vector&&o instanceof i.default.Vector?(d=this.color(e,t,n),f=r,p=o):e instanceof i.default.Color&&o instanceof i.default.Vector?(d=e,f=new i.default.Vector(t,n,r),p=o):e instanceof i.default.Color&&t instanceof i.default.Vector&&(d=e,f=t,p=new i.default.Vector(n,r,o));break;case 4:d=e,f=t,p=n,u=r;break;case 3:d=e,f=t,p=n;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(m<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(f.x,f.y,f.z),p.normalize(),this._renderer.spotLightDirections.push(p.x,p.y,p.z),void 0===u&&(u=Math.PI/3),void 0!==h&&h<1?(h=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===h&&(h=100),u=this._renderer._pInst._toRadians(u),this._renderer.spotLightAngle.push(Math.cos(u)),this._renderer.spotLightConc.push(h),this._renderer._enableLighting=!0,this},i.default.prototype.noLights=function(){return this._assert3d("noLights"),i.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var o=i.default;n.default=o},{"../core/main":36}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};function o(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}e("./p5.Geometry"),i.default.prototype.loadModel=function(e){var t,n,r;i.default._validateParameters("loadModel",arguments);var a=e.slice(-4);"boolean"==typeof arguments[1]?(t=arguments[1],n=arguments[2],r=arguments[3],void 0!==arguments[4]&&(a=arguments[4])):(t=!1,n=arguments[1],r=arguments[2],void 0!==arguments[3]&&(a=arguments[3]));var s=new i.default.Geometry;s.gid="".concat(e,"|").concat(t);var l=this;return a.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",(function(e){!function(e,t){if(function(e){for(var t=new DataView(e),n=[115,111,108,105,100],r=0;r<5;r++)if(o(n,t,r))return!1;return!0}(t))!function(e,t){for(var n,r,o,a,s,l,c,u=new DataView(t),h=u.getUint32(80,!0),d=!1,f=0;f<70;f++)1129270351===u.getUint32(f,!1)&&82===u.getUint8(f+4)&&61===u.getUint8(f+5)&&(d=!0,a=[],s=u.getUint8(f+6)/255,l=u.getUint8(f+7)/255,c=u.getUint8(f+8)/255);for(var p=0;p<h;p++){var m=84+50*p,g=u.getFloat32(m,!0),y=u.getFloat32(4+m,!0),v=u.getFloat32(8+m,!0);if(d){var _=u.getUint16(48+m,!0);o=0==(32768&_)?(n=(31&_)/31,r=(_>>5&31)/31,(_>>10&31)/31):(n=s,r=l,c)}for(var b=new i.default.Vector(g,y,v),x=1;x<=3;x++){var w=m+12*x,S=new i.default.Vector(u.getFloat32(w,!0),u.getFloat32(4+w,!0),u.getFloat32(8+w,!0));e.vertices.push(S),e.vertexNormals.push(b),d&&a.push(n,r,o)}e.faces.push([3*p,3*p+1,3*p+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{var n=new DataView(t);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(e,t){for(var n,r,o="",a=[],s=0;s<t.length;++s){for(var l=t[s].trim(),c=l.split(" "),u=0;u<c.length;++u)""===c[u]&&c.splice(u,1);if(0!==c.length)switch(o){case"":if("solid"!==c[0])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "solid"'));o="solid";break;case"solid":if("facet"!==c[0]||"normal"!==c[1])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "facet normal"'));n=new i.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),o="facet normal";break;case"facet normal":if("outer"!==c[0]||"loop"!==c[1])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "outer loop"'));o="vertex";break;case"vertex":if("vertex"===c[0])r=new i.default.Vector(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),e.vertices.push(r),e.uvs.push([0,0]),a.push(e.vertices.indexOf(r));else{if("endloop"!==c[0])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "vertex" or "endloop"'));e.faces.push(a),a=[],o="endloop"}break;case"endloop":if("endfacet"!==c[0])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "endfacet"'));o="endfacet";break;case"endfacet":if("endsolid"!==c[0]){if("facet"!==c[0]||"normal"!==c[1])return console.error(l),console.error('Invalid state "'.concat(c[0],'", should be "endsolid" or "facet normal"'));n=new i.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),o="facet normal"}break;default:console.error('Invalid state "'.concat(o,'"'))}}}(e,new TextDecoder("utf-8").decode(n).split("\n"))}}(s,e),t&&s.normalize(),l._decrementPreload(),"function"==typeof n&&n(s)}),r):a.match(/\.obj$/i)?this.loadStrings(e,(function(e){!function(e,t){for(var n={v:[],vt:[],vn:[]},r={},o=0;o<t.length;++o){var a=t[o].trim().split(/\b\s+/);if(0<a.length)if("v"===a[0]||"vn"===a[0]){var s=new i.default.Vector(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));n[a[0]].push(s)}else if("vt"===a[0]){var l=[parseFloat(a[1]),parseFloat(a[2])];n[a[0]].push(l)}else if("f"===a[0])for(var c=3;c<a.length;++c){for(var u=[],h=[1,c-1,c],d=0;d<h.length;++d){var f=a[h[d]],p=0;if(void 0!==r[f])p=r[f];else{for(var m=f.split("/"),g=0;g<m.length;g++)m[g]=parseInt(m[g])-1;p=r[f]=e.vertices.length,e.vertices.push(n.v[m[0]].copy()),n.vt[m[1]]?e.uvs.push(n.vt[m[1]].slice()):e.uvs.push([0,0]),n.vn[m[2]]&&e.vertexNormals.push(n.vn[m[2]].copy())}u.push(p)}u[0]!==u[1]&&u[0]!==u[2]&&u[1]!==u[2]&&e.faces.push(u)}}0===e.vertexNormals.length&&e.computeNormals()}(s,e),t&&s.normalize(),l._decrementPreload(),"function"==typeof n&&n(s)}),r):(i.default._friendlyFileLoadError(3,e),r?r():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),s},i.default.prototype.model=function(e){this._assert3d("model"),i.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var a=i.default;n.default=a},{"../core/main":36,"./p5.Geometry":85}],83:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.Texture"),o.default.prototype.loadShader=function(e,t,n,r){function i(){s._decrementPreload(),n&&n(a)}o.default._validateParameters("loadShader",arguments),r=r||console.error;var a=new o.default.Shader,s=this,l=!1,c=!1;return this.loadStrings(e,(function(e){a._vertSrc=e.join("\n"),c=!0,l&&i()}),r),this.loadStrings(t,(function(e){a._fragSrc=e.join("\n"),l=!0,c&&i()}),r),a},o.default.prototype.createShader=function(e,t){return this._assert3d("createShader"),o.default._validateParameters("createShader",arguments),new o.default.Shader(this._renderer,e,t)},o.default.prototype.shader=function(e){return this._assert3d("shader"),o.default._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),e.init(),this},o.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},o.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default._validateParameters("normalMaterial",t),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},o.default.prototype.texture=function(e){return this._assert3d("texture"),o.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},o.default.prototype.textureMode=function(e){e!==a.IMAGE&&e!==a.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},o.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;this._renderer.textureWrapX=e,this._renderer.textureWrapY=t;for(var n=this._renderer.textures,r=0;r<n.length;r++)n[r].setWrapMode(e,t)},o.default.prototype.ambientMaterial=function(e,t,n){this._assert3d("ambientMaterial"),o.default._validateParameters("ambientMaterial",arguments);var r=o.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=r._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.emissiveMaterial=function(e,t,n,r){this._assert3d("emissiveMaterial"),o.default._validateParameters("emissiveMaterial",arguments);var i=o.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=i._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.specularMaterial=function(e,t,n,r){this._assert3d("specularMaterial"),o.default._validateParameters("specularMaterial",arguments);var i=o.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=i._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.shininess=function(e){return this._assert3d("shininess"),o.default._validateParameters("shininess",arguments),e<1&&(e=1),this._renderer._useShininess=e,this},o.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,n=this.drawMode===a.TEXTURE||e[e.length-1]<1||this._isErasing;return n!==this._isBlending&&(n||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=n),this._applyBlendMode(),e},o.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case a.BLEND:case a.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);break;case a.REMOVE:e.blendEquation(e.FUNC_REVERSE_SUBTRACT),e.blendFunc(e.SRC_ALPHA,e.DST_ALPHA);break;case a.MULTIPLY:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ONE,e.ONE);break;case a.SCREEN:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE,e.ONE,e.ONE);break;case a.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case a.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case a.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case a.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var s=o.default;n.default=s},{"../core/constants":26,"../core/main":36,"./p5.Texture":92}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("camera",n),(e=this._renderer._curCamera).camera.apply(e,n),this},i.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("perspective",n),(e=this._renderer._curCamera).perspective.apply(e,n),this},i.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("ortho",n),(e=this._renderer._curCamera).ortho.apply(e,n),this},i.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.default._validateParameters("frustum",n),(e=this._renderer._curCamera).frustum.apply(e,n),this},i.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new i.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},i.default.Camera=function(e){this._renderer=e,this.cameraType="default",this.cameraMatrix=new i.default.Matrix,this.projMatrix=new i.default.Matrix},i.default.Camera.prototype.perspective=function(e,t,n,r){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===r&&(r=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),r<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=r,this.projMatrix=i.default.Matrix.identity();var o=1/Math.tan(this.cameraFOV/2),a=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(o/t,0,0,0,0,-o,0,0,0,0,(r+n)*a,-1,0,0,2*r*n*a,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},i.default.Camera.prototype.ortho=function(e,t,n,r,o,a){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===r&&(r=this._renderer.height/2),void 0===o&&(o=0),void 0===a&&(a=Math.max(this._renderer.width,this._renderer.height));var s=t-e,l=r-n,c=a-o,u=2/s,h=2/l,d=-2/c,f=-(t+e)/s,p=-(r+n)/l,m=-(a+o)/c;this.projMatrix=i.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-h,0,0,0,0,d,0,f,p,m,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},i.default.Camera.prototype.frustum=function(e,t,n,r,o,a){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===r&&(r=this._renderer.height/2),void 0===o&&(o=0),void 0===a&&(a=Math.max(this._renderer.width,this._renderer.height));var s=t-e,l=r-n,c=a-o,u=2*o/s,h=2*o/l,d=-2*a*o/c,f=(t+e)/s,p=(r+n)/l,m=-(a+o)/c;this.projMatrix=i.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,h,0,0,f,p,m,-1,0,0,d,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},i.default.Camera.prototype._rotateView=function(e,t,n,r){var o=this.centerX,a=this.centerY,s=this.centerZ;o-=this.eyeX,a-=this.eyeY,s-=this.eyeZ;var l=i.default.Matrix.identity(this._renderer._pInst);l.rotate(this._renderer._pInst._toRadians(e),t,n,r);var c=[o*l.mat4[0]+a*l.mat4[4]+s*l.mat4[8],o*l.mat4[1]+a*l.mat4[5]+s*l.mat4[9],o*l.mat4[2]+a*l.mat4[6]+s*l.mat4[10]];c[0]+=this.eyeX,c[1]+=this.eyeY,c[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,c[0],c[1],c[2],this.upX,this.upY,this.upZ)},i.default.Camera.prototype.pan=function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])},i.default.Camera.prototype.tilt=function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])},i.default.Camera.prototype.lookAt=function(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)},i.default.Camera.prototype.camera=function(e,t,n,r,i,o,a,s,l){void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,i=t,s=1,l=a=o=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=i,this.centerZ=o),void 0!==a&&(this.upX=a,this.upY=s,this.upZ=l);var c=this._getLocalAxes();this.cameraMatrix.set(c.x[0],c.y[0],c.z[0],0,c.x[1],c.y[1],c.z[1],0,c.x[2],c.y[2],c.z[2],0,0,0,0,1);var u=-e,h=-t,d=-n;return this.cameraMatrix.translate([u,h,d]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},i.default.Camera.prototype.move=function(e,t,n){var r=this._getLocalAxes(),i=[r.x[0]*e,r.x[1]*e,r.x[2]*e],o=[r.y[0]*t,r.y[1]*t,r.y[2]*t],a=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+i[0]+o[0]+a[0],this.eyeY+i[1]+o[1]+a[1],this.eyeZ+i[2]+o[2]+a[2],this.centerX+i[0]+o[0]+a[0],this.centerY+i[1]+o[1]+a[1],this.centerZ+i[2]+o[2]+a[2],0,1,0)},i.default.Camera.prototype.setPosition=function(e,t,n){var r=e-this.eyeX,i=t-this.eyeY,o=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+i,this.centerZ+o,0,1,0)},i.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},i.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},i.default.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},i.default.Camera.prototype.copy=function(){var e=new i.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e},i.default.Camera.prototype._getLocalAxes=function(){var e=this.eyeX-this.centerX,t=this.eyeY-this.centerY,n=this.eyeZ-this.centerZ,r=Math.sqrt(e*e+t*t+n*n);0!==r&&(e/=r,t/=r,n/=r);var i=this.upX,o=this.upY,a=this.upZ,s=o*n-a*t,l=-i*n+a*e,c=i*t-o*e;i=t*c-n*l,o=-e*c+n*s,a=e*l-t*s;var u=Math.sqrt(s*s+l*l+c*c);0!==u&&(s/=u,l/=u,c/=u);var h=Math.sqrt(i*i+o*o+a*a);return 0!==h&&(i/=h,o/=h,a/=h),{x:[s,l,c],y:[i,o,a],z:[e,t,n]}},i.default.Camera.prototype._orbit=function(e,t,n){var r=this.eyeX-this.centerX,i=this.eyeY-this.centerY,o=this.eyeZ-this.centerZ,a=Math.sqrt(r*r+i*i+o*o),s=Math.atan2(r,o),l=Math.acos(Math.max(-1,Math.min(1,i/a)));s+=e,(a+=n)<0&&(a=.1),(l+=t)>Math.PI?l=Math.PI:l<=0&&(l=.001);var c=Math.sin(l)*a*Math.sin(s),u=Math.cos(l)*a,h=Math.sin(l)*a*Math.cos(s);this.camera(c+this.centerX,u+this.centerY,h+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},i.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},i.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])};var o=i.default.Camera;n.default=o},{"../core/main":36}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.Geometry=function(e,t,n){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,this.dirtyFlags={},n instanceof Function&&n.call(this),this},i.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},i.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var e,t,n,r,i=this.detailX+1,o=0;o<this.detailY;o++)for(var a=0;a<this.detailX;a++)t=(e=o*i+a)+1,n=(o+1)*i+a+1,r=(o+1)*i+a,this.faces.push([e,t,r]),this.faces.push([r,t,n]);return this},i.default.Geometry.prototype._getFaceNormal=function(e){var t=this.faces[e],n=this.vertices[t[0]],r=this.vertices[t[1]],o=this.vertices[t[2]],a=i.default.Vector.sub(r,n),s=i.default.Vector.sub(o,n),l=i.default.Vector.cross(a,s),c=i.default.Vector.mag(l),u=c/(i.default.Vector.mag(a)*i.default.Vector.mag(s));return 0===u||isNaN(u)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),l):(1<u&&(u=1),l.mult(Math.asin(u)/c))},i.default.Geometry.prototype.computeNormals=function(){var e,t=this.vertexNormals,n=this.vertices,r=this.faces;for(e=t.length=0;e<n.length;++e)t.push(new i.default.Vector);for(var o=0;o<r.length;++o)for(var a=r[o],s=this._getFaceNormal(o),l=0;l<3;++l)t[a[l]].add(s);for(e=0;e<n.length;++e)t[e].normalize();return this},i.default.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,n=i.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=i.default.Vector.div(n,2),this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this},i.default.Geometry.prototype.averagePoleNormals=function(){for(var e=new i.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=i.default.Vector.div(e,this.detailX);for(var n=0;n<this.detailX;n++)this.vertexNormals[n]=e;e=new i.default.Vector(0,0,0);for(var r=this.vertices.length-1;r>this.vertices.length-1-this.detailX;r--)e.add(this.vertexNormals[r]);e=i.default.Vector.div(e,this.detailX);for(var o=this.vertices.length-1;o>this.vertices.length-1-this.detailX;o--)this.vertexNormals[o]=e;return this},i.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var e=0,t=this.strokeIndices.length;e<t;e++)this.edges.push(this.strokeIndices[e]);else for(var n=0;n<this.faces.length;n++)this.edges.push([this.faces[n][0],this.faces[n][1]]),this.edges.push([this.faces[n][1],this.faces[n][2]]),this.edges.push([this.faces[n][2],this.faces[n][0]]);return this},i.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var e=this.lineNormals.length=0;e<this.edges.length;e++){var t=this.vertices[this.edges[e][0]],n=this.vertices[this.edges[e][1]],r=n.copy().sub(t).normalize(),i=t.array(),o=t.array(),a=n.array(),s=n.array(),l=r.array(),c=r.array();l.push(1),c.push(-1),this.lineNormals.push(l,c,l,l,c,c),this.lineVertices.push(i,o,a,a,o,s)}return this},i.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),n=0;n<this.vertices.length;n++)e.x=Math.max(e.x,this.vertices[n].x),t.x=Math.min(t.x,this.vertices[n].x),e.y=Math.max(e.y,this.vertices[n].y),t.y=Math.min(t.y,this.vertices[n].y),e.z=Math.max(e.z,this.vertices[n].z),t.z=Math.min(t.z,this.vertices[n].z);for(var r=i.default.Vector.lerp(e,t,.5),o=i.default.Vector.sub(e,t),a=200/Math.max(Math.max(o.x,o.y),o.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(r),this.vertices[s].mult(a)}return this};var o=i.default.Geometry;n.default=o},{"../core/main":36}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r},o=Array,a=function(e){return e instanceof Array};"undefined"!=typeof Float32Array&&(o=Float32Array,a=function(e){return e instanceof Array||e instanceof Float32Array}),i.default.Matrix=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e.length&&e[e.length-1]instanceof i.default&&(this.p5=e[e.length-1]),"mat3"===e[0]?this.mat3=Array.isArray(e[1])?e[1]:new o([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(e[0])?e[0]:new o([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},i.default.Matrix.prototype.set=function(e){return e instanceof i.default.Matrix?this.mat4=e.mat4:a(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},i.default.Matrix.prototype.get=function(){return new i.default.Matrix(this.mat4,this.p5)},i.default.Matrix.prototype.copy=function(){var e=new i.default.Matrix(this.p5);return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},i.default.Matrix.identity=function(e){return new i.default.Matrix(e)},i.default.Matrix.prototype.transpose=function(e){var t,n,r,o,s,l;return e instanceof i.default.Matrix?(t=e.mat4[1],n=e.mat4[2],r=e.mat4[3],o=e.mat4[6],s=e.mat4[7],l=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=n,this.mat4[9]=o,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=r,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e.mat4[15]):a(e)&&(t=e[1],n=e[2],r=e[3],o=e[6],s=e[7],l=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=n,this.mat4[9]=o,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=r,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e[15]),this},i.default.Matrix.prototype.invert=function(e){var t,n,r,o,s,l,c,u,h,d,f,p,m,g,y,v;e instanceof i.default.Matrix?(t=e.mat4[0],n=e.mat4[1],r=e.mat4[2],o=e.mat4[3],s=e.mat4[4],l=e.mat4[5],c=e.mat4[6],u=e.mat4[7],h=e.mat4[8],d=e.mat4[9],f=e.mat4[10],p=e.mat4[11],m=e.mat4[12],g=e.mat4[13],y=e.mat4[14],v=e.mat4[15]):a(e)&&(t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15]);var _=t*l-n*s,b=t*c-r*s,x=t*u-o*s,w=n*c-r*l,S=n*u-o*l,A=r*u-o*c,E=h*g-d*m,M=h*y-f*m,C=h*v-p*m,T=d*y-f*g,P=d*v-p*g,D=f*v-p*y,k=_*D-b*P+x*T+w*C-S*M+A*E;return k?(k=1/k,this.mat4[0]=(l*D-c*P+u*T)*k,this.mat4[1]=(r*P-n*D-o*T)*k,this.mat4[2]=(g*A-y*S+v*w)*k,this.mat4[3]=(f*S-d*A-p*w)*k,this.mat4[4]=(c*C-s*D-u*M)*k,this.mat4[5]=(t*D-r*C+o*M)*k,this.mat4[6]=(y*x-m*A-v*b)*k,this.mat4[7]=(h*A-f*x+p*b)*k,this.mat4[8]=(s*P-l*C+u*E)*k,this.mat4[9]=(n*C-t*P-o*E)*k,this.mat4[10]=(m*S-g*x+v*_)*k,this.mat4[11]=(d*x-h*S-p*_)*k,this.mat4[12]=(l*M-s*T-c*E)*k,this.mat4[13]=(t*T-n*M+r*E)*k,this.mat4[14]=(g*b-m*w-y*_)*k,this.mat4[15]=(h*w-d*b+f*_)*k,this):null},i.default.Matrix.prototype.invert3x3=function(){var e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],i=this.mat3[4],o=this.mat3[5],a=this.mat3[6],s=this.mat3[7],l=this.mat3[8],c=l*i-o*s,u=-l*r+o*a,h=s*r-i*a,d=e*c+t*u+n*h;return d?(d=1/d,this.mat3[0]=c*d,this.mat3[1]=(-l*t+n*s)*d,this.mat3[2]=(o*t-n*i)*d,this.mat3[3]=u*d,this.mat3[4]=(l*e-n*a)*d,this.mat3[5]=(-o*e+n*r)*d,this.mat3[6]=h*d,this.mat3[7]=(-s*e+t*a)*d,this.mat3[8]=(i*e-t*r)*d,this):null},i.default.Matrix.prototype.transpose3x3=function(e){var t=e[1],n=e[2],r=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this},i.default.Matrix.prototype.inverseTranspose=function(e){void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]);var t=this.invert3x3();if(t)t.transpose3x3(this.mat3);else for(var n=0;n<9;n++)this.mat3[n]=0;return this},i.default.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],i=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],a=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],c=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],u=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*u+n*c+r*l-i*s+o*a},i.default.Matrix.prototype.mult=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof i.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=this.mat4[0],r=this.mat4[1],o=this.mat4[2],s=this.mat4[3];return this.mat4[0]=n*t[0]+r*t[4]+o*t[8]+s*t[12],this.mat4[1]=n*t[1]+r*t[5]+o*t[9]+s*t[13],this.mat4[2]=n*t[2]+r*t[6]+o*t[10]+s*t[14],this.mat4[3]=n*t[3]+r*t[7]+o*t[11]+s*t[15],n=this.mat4[4],r=this.mat4[5],o=this.mat4[6],s=this.mat4[7],this.mat4[4]=n*t[0]+r*t[4]+o*t[8]+s*t[12],this.mat4[5]=n*t[1]+r*t[5]+o*t[9]+s*t[13],this.mat4[6]=n*t[2]+r*t[6]+o*t[10]+s*t[14],this.mat4[7]=n*t[3]+r*t[7]+o*t[11]+s*t[15],n=this.mat4[8],r=this.mat4[9],o=this.mat4[10],s=this.mat4[11],this.mat4[8]=n*t[0]+r*t[4]+o*t[8]+s*t[12],this.mat4[9]=n*t[1]+r*t[5]+o*t[9]+s*t[13],this.mat4[10]=n*t[2]+r*t[6]+o*t[10]+s*t[14],this.mat4[11]=n*t[3]+r*t[7]+o*t[11]+s*t[15],n=this.mat4[12],r=this.mat4[13],o=this.mat4[14],s=this.mat4[15],this.mat4[12]=n*t[0]+r*t[4]+o*t[8]+s*t[12],this.mat4[13]=n*t[1]+r*t[5]+o*t[9]+s*t[13],this.mat4[14]=n*t[2]+r*t[6]+o*t[10]+s*t[14],this.mat4[15]=n*t[3]+r*t[7]+o*t[11]+s*t[15],this},i.default.Matrix.prototype.apply=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof i.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=this.mat4,r=n[0],o=n[4],s=n[8],l=n[12];n[0]=t[0]*r+t[1]*o+t[2]*s+t[3]*l,n[4]=t[4]*r+t[5]*o+t[6]*s+t[7]*l,n[8]=t[8]*r+t[9]*o+t[10]*s+t[11]*l,n[12]=t[12]*r+t[13]*o+t[14]*s+t[15]*l;var c=n[1],u=n[5],h=n[9],d=n[13];n[1]=t[0]*c+t[1]*u+t[2]*h+t[3]*d,n[5]=t[4]*c+t[5]*u+t[6]*h+t[7]*d,n[9]=t[8]*c+t[9]*u+t[10]*h+t[11]*d,n[13]=t[12]*c+t[13]*u+t[14]*h+t[15]*d;var f=n[2],p=n[6],m=n[10],g=n[14];n[2]=t[0]*f+t[1]*p+t[2]*m+t[3]*g,n[6]=t[4]*f+t[5]*p+t[6]*m+t[7]*g,n[10]=t[8]*f+t[9]*p+t[10]*m+t[11]*g,n[14]=t[12]*f+t[13]*p+t[14]*m+t[15]*g;var y=n[3],v=n[7],_=n[11],b=n[15];return n[3]=t[0]*y+t[1]*v+t[2]*_+t[3]*b,n[7]=t[4]*y+t[5]*v+t[6]*_+t[7]*b,n[11]=t[8]*y+t[9]*v+t[10]*_+t[11]*b,n[15]=t[12]*y+t[13]*v+t[14]*_+t[15]*b,this},i.default.Matrix.prototype.scale=function(e,t,n){return e instanceof i.default.Vector?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this},i.default.Matrix.prototype.rotate=function(e,t,n,r){t instanceof i.default.Vector?(n=t.y,r=t.z,t=t.x):t instanceof Array&&(n=t[1],r=t[2],t=t[0]);var o=Math.sqrt(t*t+n*n+r*r);t*=1/o,n*=1/o,r*=1/o;var a=this.mat4[0],s=this.mat4[1],l=this.mat4[2],c=this.mat4[3],u=this.mat4[4],h=this.mat4[5],d=this.mat4[6],f=this.mat4[7],p=this.mat4[8],m=this.mat4[9],g=this.mat4[10],y=this.mat4[11],v=Math.sin(e),_=Math.cos(e),b=1-_,x=t*t*b+_,w=n*t*b+r*v,S=r*t*b-n*v,A=t*n*b-r*v,E=n*n*b+_,M=r*n*b+t*v,C=t*r*b+n*v,T=n*r*b-t*v,P=r*r*b+_;return this.mat4[0]=a*x+u*w+p*S,this.mat4[1]=s*x+h*w+m*S,this.mat4[2]=l*x+d*w+g*S,this.mat4[3]=c*x+f*w+y*S,this.mat4[4]=a*A+u*E+p*M,this.mat4[5]=s*A+h*E+m*M,this.mat4[6]=l*A+d*E+g*M,this.mat4[7]=c*A+f*E+y*M,this.mat4[8]=a*C+u*T+p*P,this.mat4[9]=s*C+h*T+m*P,this.mat4[10]=l*C+d*T+g*P,this.mat4[11]=c*C+f*T+y*P,this},i.default.Matrix.prototype.translate=function(e){var t=e[0],n=e[1],r=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*n+this.mat4[8]*r,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*n+this.mat4[9]*r,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*n+this.mat4[10]*r,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*n+this.mat4[11]*r},i.default.Matrix.prototype.rotateX=function(e){this.rotate(e,1,0,0)},i.default.Matrix.prototype.rotateY=function(e){this.rotate(e,0,1,0)},i.default.Matrix.prototype.rotateZ=function(e){this.rotate(e,0,0,1)},i.default.Matrix.prototype.perspective=function(e,t,n,r){var i=1/Math.tan(e/2),o=1/(n-r);return this.mat4[0]=i/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=i,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+n)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*n*o,this.mat4[15]=0,this},i.default.Matrix.prototype.ortho=function(e,t,n,r,i,o){var a=1/(e-t),s=1/(n-r),l=1/(i-o);return this.mat4[0]=-2*a,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(e+t)*a,this.mat4[13]=(r+n)*s,this.mat4[14]=(o+i)*l,this.mat4[15]=1,this};var s=i.default.Matrix;n.default=s},{"../core/main":36}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.RenderBuffer=function(e,t,n,r,i,o){this.size=e,this.src=t,this.dst=n,this.attr=r,this._renderer=i,this.map=o},i.default.RenderBuffer.prototype._prepareBuffer=function(e,t){var n,r=t.attributes,i=this._renderer.GL;n=e.model?e.model:e;var o=r[this.attr];if(o){var a=e[this.dst],s=n[this.src];if(0<s.length){var l=!a;if(l&&(e[this.dst]=a=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,a),l||!1!==n.dirtyFlags[this.src]){var c=this.map,u=c?c(s):s;this._renderer._bindBuffer(a,i.ARRAY_BUFFER,u),n.dirtyFlags[this.src]=!1}t.enableAttrib(o,this.size)}}};var o=i.default.RenderBuffer;n.default=o},{"../core/main":36}],88:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.RenderBuffer"),o.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:a.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},o.default.RendererGL.prototype.vertex=function(e,t){var n,r,i;n=r=i=0,3===arguments.length?n=arguments[2]:4===arguments.length?(r=arguments[2],i=arguments[3]):5===arguments.length&&(n=arguments[2],r=arguments[3],i=arguments[4]);var s=new o.default.Vector(e,t,n);this.immediateMode.geometry.vertices.push(s);var l=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(l[0],l[1],l[2],l[3]),this.textureMode===a.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(r/=this._tex.width,i/=this._tex.height):null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(r,i),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=n,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=n,this},o.default.RendererGL.prototype.endShape=function(e,t,n,r,i,o){return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},o.default.RendererGL.prototype._processVertices=function(e){if(0!==this.immediateMode.geometry.vertices.length){var t=this._doStroke&&this.drawMode!==a.TEXTURE,n=e===a.CLOSE;t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,n),this.immediateMode.geometry._edgesToVertices());var r=this.immediateMode.shapeMode===a.TESS;(this.isBezier||this.isQuadratic||this.isCurve||r)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape()}},o.default.RendererGL.prototype._calculateEdges=function(e,t,n){var r=[],i=0;switch(e){case a.TRIANGLE_STRIP:for(i=0;i<t.length-2;i++)r.push([i,i+1]),r.push([i,i+2]);r.push([i,i+1]);break;case a.TRIANGLES:for(i=0;i<t.length-2;i+=3)r.push([i,i+1]),r.push([i+1,i+2]),r.push([i+2,i]);break;case a.LINES:for(i=0;i<t.length-1;i+=2)r.push([i,i+1]);break;default:for(i=0;i<t.length-1;i++)r.push([i,i+1])}return n&&r.push([t.length-1,0]),r},o.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=a.TRIANGLES;var e=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],t=this._triangulate(e);this.immediateMode.geometry.vertices=[];for(var n=0,r=t.length;n<r;n+=3)this.vertex(t[n],t[n+1],t[n+2])},o.default.RendererGL.prototype._drawImmediateFill=function(){var e=this.GL,t=this._getImmediateFillShader();this._calculateNormals(this.immediateMode.geometry),this._setFillUniforms(t);var n=!0,r=!1,i=void 0;try{for(var o,s=this.immediateMode.buffers.fill[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)o.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},o.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=this._getImmediateStrokeShader();this._setStrokeUniforms(t);var n=!0,r=!1,i=void 0;try{for(var o,a=this.immediateMode.buffers.stroke[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)o.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t.unbindShader()},o.default.RendererGL.prototype._calculateNormals=function(e){e.vertices.forEach((function(){e.vertexNormals.push(new o.default.Vector(0,0,1))}))};var s=o.default.RendererGL;n.default=s},{"../core/constants":26,"../core/main":36,"./p5.RenderBuffer":87}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./p5.RendererGL"),e("./p5.RenderBuffer");var o=0;i.default.RendererGL.prototype._initBufferDefaults=function(e){if(this._freeBuffers(e),1e3<++o){var t=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[t],o--}return this.retainedMode.geometry[e]={}},i.default.RendererGL.prototype._freeBuffers=function(e){var t=this.retainedMode.geometry[e];if(t){delete this.retainedMode.geometry[e],o--;var n=this.GL;t.indexBuffer&&n.deleteBuffer(t.indexBuffer),r(this.retainedMode.buffers.stroke),r(this.retainedMode.buffers.fill)}function r(e){var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;t[l.dst]&&(n.deleteBuffer(t[l.dst]),t[l.dst]=null)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},i.default.RendererGL.prototype.createBuffers=function(e,t){var n=this.GL,r=this._initBufferDefaults(e);r.model=t;var o=r.indexBuffer;if(t.faces.length){o=o||(r.indexBuffer=n.createBuffer());var a=i.default.RendererGL.prototype._flatten(t.faces);this._bindBuffer(o,n.ELEMENT_ARRAY_BUFFER,a,Uint16Array),r.vertexCount=3*t.faces.length}else o&&(n.deleteBuffer(o),r.indexBuffer=null),r.vertexCount=t.vertices?t.vertices.length:0;return r.lineVertexCount=t.lineVertices?t.lineVertices.length:0,r},i.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,n=this.retainedMode.geometry[e];if(this._doStroke&&0<n.lineVertexCount){var r=this._getRetainedStrokeShader();this._setStrokeUniforms(r);var i=!0,o=!1,a=void 0;try{for(var s,l=this.retainedMode.buffers.stroke[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value._prepareBuffer(n,r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),r.unbindShader()}if(this._doFill){var c=this._getRetainedFillShader();this._setFillUniforms(c);var u=!0,h=!1,d=void 0;try{for(var f,p=this.retainedMode.buffers.fill[Symbol.iterator]();!(u=(f=p.next()).done);u=!0)f.value._prepareBuffer(n,c)}catch(e){h=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(h)throw d}}n.indexBuffer&&this._bindBuffer(n.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),c.unbindShader()}return this},i.default.RendererGL.prototype.drawBuffersScaled=function(e,t,n,r){var i=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,n,r),this.drawBuffers(e)}finally{this.uMVMatrix=i}},i.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},i.default.RendererGL.prototype._drawElements=function(e,t){var n=this.retainedMode.geometry[t],r=this.GL;n.indexBuffer?r.drawElements(r.TRIANGLES,n.vertexCount,r.UNSIGNED_SHORT,0):r.drawArrays(e||r.TRIANGLES,0,n.vertexCount)},i.default.RendererGL.prototype._drawPoints=function(e,t){var n=this.GL,r=this._getImmediatePointShader();this._setPointUniforms(r),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),n.drawArrays(n.Points,0,e.length),r.unbindShader()};var a=i.default.RendererGL;n.default=a},{"../core/main":36,"./p5.RenderBuffer":87,"./p5.RendererGL":90}],90:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("../core/main")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),a=s(e("libtess"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");var c="precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n",u={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:c+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n}\n",lightTextureFrag:"precision highp float;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;\n  }\n}",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n}\n",phongFrag:c+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;\n  }\n}",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = uMaterialColor;\n  gl_FragColor.a *= saturate(max(antialias, cover));\n}",lineVert:"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\n\nattribute vec4 aPosition;\nattribute vec4 aDirection;\n  \nvoid main() {\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  vec3 scale = vec3(0.9995);\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posq.xyz = posq.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 q = uProjectionMatrix * posq;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);\n\n  // flip tangent to normal (it's already normalized)\n  vec2 normal = vec2(-tangent.y, tangent.x);\n\n  float thickness = aDirection.w * uStrokeWeight;\n  vec2 offset = normal * thickness / 2.0;\n\n  vec2 curPerspScale;\n\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n}\n",lineFrag:"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\n\nvoid main() {\n  gl_FragColor = uMaterialColor;\n}",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n\tfloat mask = 0.0;\n\n\t// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n\tmask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n\t// if strokeWeight is 1 or less lets just draw a square\n\t// this prevents weird artifacting from carving circles when our points are really small\n\t// if strokeWeight is larger than 1, we just use it as is\n\n\tmask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n\t// throw away the borders of the mask\n    // otherwise we get weird alpha blending issues\n\n\tif(mask > 0.98){\n      discard;\n  \t}\n\n  \tgl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;\n}"};i.default.RendererGL=function(e,t,n,r){return i.default.Renderer.call(this,e,t,n),this._setAttributeDefaults(t),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=o.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=o.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new i.default.Matrix,this.uPMatrix=new i.default.Matrix,this.uNMatrix=new i.default.Matrix("mat3"),this._curCamera=new i.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new i.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new i.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aMaterialColor",this),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new i.default.Geometry,shapeMode:o.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new i.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new i.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=o.IMAGE,this.textureWrapX=o.CLAMP,this.textureWrapY=o.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},i.default.RendererGL.prototype=Object.create(i.default.Renderer.prototype),i.default.RendererGL.prototype._setAttributeDefaults=function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)},i.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(e){throw e}},i.default.RendererGL.prototype._resetContext=function(e,t){var n=this.width,r=this.height,o=this.canvas.id,a=this._pInst instanceof i.default.Graphics;if(a){var s=this._pInst;s.canvas.parentNode.removeChild(s.canvas),s.canvas=document.createElement("canvas"),(s._pInst._userNode||document.body).appendChild(s.canvas),i.default.Element.call(s,s.canvas,s._pInst),s.width=n,s.height=r}else{var l=this.canvas;l&&l.parentNode.removeChild(l),(l=document.createElement("canvas")).id=o,this._pInst._userNode?this._pInst._userNode.appendChild(l):document.body.appendChild(l),this._pInst.canvas=l}var c=new i.default.RendererGL(this._pInst.canvas,this._pInst,!a);this._pInst._setProperty("_renderer",c),c.resize(n,r),c._applyDefaults(),a||this._pInst._elements.push(c),"function"==typeof t&&setTimeout((function(){t.apply(window._renderer,e)}),0)},i.default.prototype.setAttributes=function(e,t){if(void 0!==this._glAttributes){var n=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,n=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,n=!1),this._renderer.isP3D&&!n){if(!this._setupDone)for(var r in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(r))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},i.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},i.default.RendererGL.prototype.background=function(){var e,t=(e=this._pInst).color.apply(e,arguments),n=t.levels[0]/255,r=t.levels[1]/255,i=t.levels[2]/255,o=t.levels[3]/255;this.GL.clearColor(n,r,i,o),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},i.default.RendererGL.prototype.fill=function(e,t,n,r){var a=i.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=a._array,this.drawMode=o.FILL,this._useNormalMaterial=!1,this._tex=null},i.default.RendererGL.prototype.stroke=function(e,t,n,r){arguments[3]=255;var o=i.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=o._array},i.default.RendererGL.prototype.strokeCap=function(e){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},i.default.RendererGL.prototype.strokeJoin=function(e){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},i.default.RendererGL.prototype.filter=function(e){console.error("filter() does not work in WEBGL mode")},i.default.RendererGL.prototype.blendMode=function(e){e===o.DARKEST||e===o.LIGHTEST||e===o.ADD||e===o.BLEND||e===o.SUBTRACT||e===o.SCREEN||e===o.EXCLUSION||e===o.REPLACE||e===o.MULTIPLY||e===o.REMOVE?this.curBlendMode=e:e!==o.BURN&&e!==o.OVERLAY&&e!==o.HARD_LIGHT&&e!==o.SOFT_LIGHT&&e!==o.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},i.default.RendererGL.prototype.erase=function(e,t){this._isErasing||(this._applyBlendMode(o.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])},i.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},i.default.RendererGL.prototype.strokeWeight=function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)},i.default.RendererGL.prototype._getPixel=function(e,t){var n;return n=new Uint8Array(4),this.drawingContext.readPixels(e,t,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,n),[n[0],n[1],n[2],n[3]]},i.default.RendererGL.prototype.loadPixels=function(){var e=this._pixelsState;if(!0===this._pInst._glAttributes.preserveDrawingBuffer){var t=e.pixels,n=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;t instanceof Uint8Array&&t.length===n||(t=new Uint8Array(n),this._pixelsState._setProperty("pixels",t));var r=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*r,this.height*r,this.GL.RGBA,this.GL.UNSIGNED_BYTE,t)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},i.default.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.retainedMode.geometry[e]},i.default.RendererGL.prototype.resize=function(e,t){i.default.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var n=this._pixelsState;void 0!==n.pixels&&n._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},i.default.RendererGL.prototype.clear=function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,n=(arguments.length<=2?void 0:arguments[2])||0,r=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(e,t,n,r),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},i.default.RendererGL.prototype.applyMatrix=function(e,t,n,r,o,a){16===arguments.length?i.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,o,a,0,1])},i.default.RendererGL.prototype.translate=function(e,t,n){return e instanceof i.default.Vector&&(n=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,n]),this},i.default.RendererGL.prototype.scale=function(e,t,n){return this.uMVMatrix.scale(e,t,n),this},i.default.RendererGL.prototype.rotate=function(e,t){return void 0===t?this.rotateZ(e):(i.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},i.default.RendererGL.prototype.rotateX=function(e){return this.rotate(e,1,0,0),this},i.default.RendererGL.prototype.rotateY=function(e){return this.rotate(e,0,1,0),this},i.default.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,0,0,1),this},i.default.RendererGL.prototype.push=function(){var e=i.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,e},i.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=i.default.Matrix.identity(this._pInst),this},i.default.RendererGL.prototype._getImmediateStrokeShader=function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()},i.default.RendererGL.prototype._getRetainedStrokeShader=i.default.RendererGL.prototype._getImmediateStrokeShader,i.default.RendererGL.prototype._getImmediateFillShader=function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e},i.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e},i.default.RendererGL.prototype._getImmediatePointShader=function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()},i.default.RendererGL.prototype._getRetainedLineShader=i.default.RendererGL.prototype._getImmediateLineShader,i.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new i.default.Shader(this,u.phongVert,u.phongFrag):this._defaultLightShader=new i.default.Shader(this,u.lightVert,u.lightTextureFrag)),this._defaultLightShader},i.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new i.default.Shader(this,u.immediateVert,u.vertexColorFrag)),this._defaultImmediateModeShader},i.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new i.default.Shader(this,u.normalVert,u.normalFrag)),this._defaultNormalShader},i.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new i.default.Shader(this,u.normalVert,u.basicFrag)),this._defaultColorShader},i.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new i.default.Shader(this,u.pointVert,u.pointFrag)),this._defaultPointShader},i.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new i.default.Shader(this,u.lineVert,u.lineFrag)),this._defaultLineShader},i.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new i.default.Shader(this,u.fontVert,u.fontFrag)),this._defaultFontShader},i.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var e=new i.default.Image(1,1);e.set(0,0,255),this._emptyTexture=new i.default.Texture(this,e)}return this._emptyTexture},i.default.RendererGL.prototype.getTexture=function(e){var t=this.textures,n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(l.src===e)return l}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var c=new i.default.Texture(this,e);return t.push(c),c},i.default.RendererGL.prototype._setStrokeUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight)},i.default.RendererGL.prototype._setFillUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var n=this.directionalLightDiffuseColors.length/3;e.setUniform("uDirectionalLightCount",n),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var r=this.ambientLightColors.length/3;e.setUniform("uAmbientLightCount",r),e.setUniform("uAmbientColor",this.ambientLightColors);var i=this.spotLightDiffuseColors.length/3;e.setUniform("uSpotLightCount",i),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()},i.default.RendererGL.prototype._setPointUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},i.default.RendererGL.prototype._bindBuffer=function(e,t,n,r,i){if(t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==n){var o=new(r||Float32Array)(n);this.GL.bufferData(t,o,i||this.GL.STATIC_DRAW)}},i.default.RendererGL.prototype._arraysEqual=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},i.default.RendererGL.prototype._isTypedArray=function(e){return Float32Array,Float64Array,Int16Array,Uint16Array,e instanceof Uint32Array},i.default.RendererGL.prototype._flatten=function(e){if(0===e.length)return[];if(2e4<e.length){var t,n=Object.prototype.toString,r=[],i=e.slice();for(t=i.pop();"[object Array]"===n.call(t)?i.push.apply(i,l(t)):r.push(t),i.length&&void 0!==(t=i.pop()););return r.reverse(),r}var o;return(o=[]).concat.apply(o,l(e))},i.default.RendererGL.prototype._vToNArray=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(s.x,s.y,s.z)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},i.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},i.default.RendererGL.prototype._initTessy=function(){var e=new a.default.GluTesselator;return e.gluTessCallback(a.default.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t[t.length]=e[0],t[t.length]=e[1],t[t.length]=e[2]})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_BEGIN,(function(e){e!==a.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_ERROR,(function(e){console.log("error callback"),console.log("error number: ".concat(e))})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){return[e[0],e[1],e[2]]})),e.gluTessCallback(a.default.gluEnum.GLU_TESS_EDGE_FLAG,(function(e){})),e},i.default.RendererGL.prototype._triangulate=function(e){this._tessy.gluTessNormal(0,0,1);var t=[];this._tessy.gluTessBeginPolygon(t);for(var n=0;n<e.length;n++){this._tessy.gluTessBeginContour();for(var r=e[n],i=0;i<r.length;i+=3){var o=[r[i],r[i+1],r[i+2]];this._tessy.gluTessVertex(o,o)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),t},i.default.RendererGL.prototype._bezierCoefficients=function(e){var t=e*e,n=1-e,r=n*n;return[r*n,3*r*e,3*n*t,t*e]},i.default.RendererGL.prototype._quadraticCoefficients=function(e){var t=1-e;return[t*t,2*t*e,e*e]},i.default.RendererGL.prototype._bezierToCatmull=function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]};var h=i.default.RendererGL;n.default=h},{"../core/constants":26,"../core/main":36,"../core/p5.Renderer":39,"./p5.Camera":84,"./p5.Matrix":86,"./p5.Shader":91,libtess:10,path:13}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("../core/main"))&&r.__esModule?r:{default:r};i.default.Shader=function(e,t,n){this._renderer=e,this._vertSrc=t,this._fragSrc=n,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},i.default.Shader.prototype.init=function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},i.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),n=0;n<t;++n){var r=e.getActiveAttrib(this._glProgram,n),i=r.name,o=e.getAttribLocation(this._glProgram,i),a={};a.name=i,a.location=o,a.index=n,a.type=r.type,a.size=r.size,this.attributes[i]=a}this._loadedAttributes=!0}},i.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),n=0,r=0;r<t;++r){var i=e.getActiveUniform(this._glProgram,r),o={};o.location=e.getUniformLocation(this._glProgram,i.name),o.size=i.size;var a=i.name;1<i.size&&(a=a.substring(0,a.indexOf("[0]"))),o.name=a,o.type=i.type,o._cachedData=void 0,o.type===e.SAMPLER_2D&&(o.samplerIndex=n,n++,this.samplers.push(o)),o.isArray=o.type===e.FLOAT_MAT3||o.type===e.FLOAT_MAT4||o.type===e.FLOAT_VEC2||o.type===e.FLOAT_VEC3||o.type===e.FLOAT_VEC4||o.type===e.INT_VEC2||o.type===e.INT_VEC3||o.type===e.INT_VEC4,this.uniforms[a]=o}this._loadedUniforms=!0}},i.default.Shader.prototype.compile=function(){},i.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},i.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},i.default.Shader.prototype.bindTextures=function(){var e=this._renderer.GL,t=!0,n=!1,r=void 0;try{for(var i,o=this.samplers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=a.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+a.samplerIndex),s.bindTexture(),s.update(),e.uniform1i(a.location,a.samplerIndex)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},i.default.Shader.prototype.updateTextures=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.samplers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value.texture;o&&o.update()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},i.default.Shader.prototype.unbindTextures=function(){},i.default.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},i.default.Shader.prototype.useProgram=function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this},i.default.Shader.prototype.setUniform=function(e,t){var n=this.uniforms[e];if(n){var r=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;n._cachedData=t}var i=n.location;switch(this.useProgram(),n.type){case r.BOOL:!0===t?r.uniform1i(i,1):r.uniform1i(i,0);break;case r.INT:1<n.size?t.length&&r.uniform1iv(i,t):r.uniform1i(i,t);break;case r.FLOAT:1<n.size?t.length&&r.uniform1fv(i,t):r.uniform1f(i,t);break;case r.FLOAT_MAT3:r.uniformMatrix3fv(i,!1,t);break;case r.FLOAT_MAT4:r.uniformMatrix4fv(i,!1,t);break;case r.FLOAT_VEC2:1<n.size?t.length&&r.uniform2fv(i,t):r.uniform2f(i,t[0],t[1]);break;case r.FLOAT_VEC3:1<n.size?t.length&&r.uniform3fv(i,t):r.uniform3f(i,t[0],t[1],t[2]);break;case r.FLOAT_VEC4:1<n.size?t.length&&r.uniform4fv(i,t):r.uniform4f(i,t[0],t[1],t[2],t[3]);break;case r.INT_VEC2:1<n.size?t.length&&r.uniform2iv(i,t):r.uniform2i(i,t[0],t[1]);break;case r.INT_VEC3:1<n.size?t.length&&r.uniform3iv(i,t):r.uniform3i(i,t[0],t[1],t[2]);break;case r.INT_VEC4:1<n.size?t.length&&r.uniform4iv(i,t):r.uniform4i(i,t[0],t[1],t[2],t[3]);break;case r.SAMPLER_2D:r.activeTexture(r.TEXTURE0+n.samplerIndex),n.texture=this._renderer.getTexture(t),r.uniform1i(n.location,n.samplerIndex)}return this}},i.default.Shader.prototype.isLightShader=function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},i.default.Shader.prototype.isNormalShader=function(){return void 0!==this.attributes.aNormal},i.default.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},i.default.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},i.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},i.default.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},i.default.Shader.prototype.enableAttrib=function(e,t,n,r,i,o){if(e){var a=e.location;if(-1!==a){var s=this._renderer.GL;e.enabled||(s.enableVertexAttribArray(a),e.enabled=!0),this._renderer.GL.vertexAttribPointer(a,t,n||s.FLOAT,r||!1,i||0,o||0)}}return this};var o=i.default.Shader;n.default=o},{"../core/main":36}],92:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));o.default.Texture=function(e,t){this._renderer=e;var n=this._renderer.GL;this.src=t,this.glTex=void 0,this.glTarget=n.TEXTURE_2D,this.glFormat=n.RGBA,this.mipmaps=!1,this.glMinFilter=n.LINEAR,this.glMagFilter=n.LINEAR,this.glWrapS=n.CLAMP_TO_EDGE,this.glWrapT=n.CLAMP_TO_EDGE,this.isSrcMediaElement=void 0!==o.default.MediaElement&&t instanceof o.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==o.default.Element&&t instanceof o.default.Element&&!(t instanceof o.default.Graphics),this.isSrcP5Image=t instanceof o.default.Image,this.isSrcP5Graphics=t instanceof o.default.Graphics,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData;var r=this._getTextureDataFromSource();return this.width=r.width,this.height=r.height,this.init(r),this},o.default.Texture.prototype._getTextureDataFromSource=function(){var e;return this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e},o.default.Texture.prototype.init=function(e){var t=this._renderer.GL;if(this.glTex=t.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata){var n=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,t.UNSIGNED_BYTE,n)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,t.UNSIGNED_BYTE,e)},o.default.Texture.prototype.update=function(){var e=this.src;if(0===e.width||0===e.height)return!1;var t=this._getTextureDataFromSource(),n=!1,r=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(n=!0,this.width=t.width,this.height=t.height,this.isSrcP5Image?e.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&e.setModified(!0)):this.isSrcP5Image?e.isModified()&&(n=!0,e.setModified(!1)):this.isSrcMediaElement?e.isModified()?(n=!0,e.setModified(!1)):e.loadedmetadata&&this._videoPrevUpdateTime!==e.time()&&(this._videoPrevUpdateTime=e.time(),n=!0):this.isImageData?e._dirty&&(n=!(e._dirty=!1)):n=!0,n&&(this.bindTexture(),r.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,r.UNSIGNED_BYTE,t)),n},o.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},o.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},o.default.Texture.prototype.setInterpolation=function(e,t){var n=this._renderer.GL;e===a.NEAREST?this.glMinFilter=n.NEAREST:this.glMinFilter=n.LINEAR,t===a.NEAREST?this.glMagFilter=n.NEAREST:this.glMagFilter=n.LINEAR,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},o.default.Texture.prototype.setWrapMode=function(e,t){function n(e){return 0==(e&e-1)}var r=this._renderer.GL,i=n(this.width),o=n(this.height);e===a.REPEAT?i&&o?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===a.MIRROR?i&&o?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===a.REPEAT?i&&o?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===a.MIRROR?i&&o?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var s=o.default.Texture;n.default=s},{"../core/constants":26,"../core/main":36}],93:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=(i=e("../core/main"))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function s(e,t){this.width=e,this.height=t,this.infos=[],this.findImage=function(e){var t,n,r=this.width*this.height;if(r<e)throw new Error("font is too complex to render in 3D");for(var i=this.infos.length-1;0<=i;--i){var o=this.infos[i];if(o.index+e<r){n=(t=o).imageData;break}}if(!t){try{n=new ImageData(this.width,this.height)}catch(e){var a=document.getElementsByTagName("canvas")[0],s=!a;a||((a=document.createElement("canvas")).style.display="none",document.body.appendChild(a));var l=a.getContext("2d");l&&(n=l.createImageData(this.width,this.height)),s&&document.body.removeChild(a)}t={index:0,imageData:n},this.infos.push(t)}var c=t.index;return t.index+=e,n._dirty=!0,{imageData:n,index:c}}}function l(e,t,n,r,i){var o=e.imageData.data,a=4*e.index++;o[a++]=t,o[a++]=n,o[a++]=r,o[a++]=i}function c(e){this.font=e,this.strokeImageInfos=new s(64,64),this.colDimImageInfos=new s(64,64),this.rowDimImageInfos=new s(64,64),this.colCellImageInfos=new s(64,64),this.rowCellImageInfos=new s(64,64),this.glyphInfos={},this.getGlyphInfo=function(e){var t=this.glyphInfos[e.index];if(t)return t;var n,r=e.getBoundingBox(),i=r.x1,a=r.y1,s=r.x2-i,c=r.y2-a,h=e.path.commands;if(0==s||0==c||!h.length)return this.glyphInfos[e.index]={};var d,f,p,m,g=[],y=[],v=[];for(n=8;0<=n;--n)v.push([]);for(n=8;0<=n;--n)y.push([]);function _(e,t,n){var r=g.length;function i(e,t,n){for(var r=e.length;0<r--;){var i=e[r];i<t&&(t=i),n<i&&(n=i)}return{min:t,max:n}}g.push(n);for(var o=i(e,1,0),a=Math.max(Math.floor(9*o.min),0),s=Math.min(Math.ceil(9*o.max),9),l=a;l<s;++l)v[l].push(r);for(var c=i(t,1,0),u=Math.max(Math.floor(9*c.min),0),h=Math.min(Math.ceil(9*c.max),9),d=u;d<h;++d)y[d].push(r)}function b(e){return(t=255*e)<0?0:255<t?255:t;var t}function x(e,t,n,r){this.p0=e,this.c0=t,this.c1=n,this.p1=r,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return o.default.Vector.sub(o.default.Vector.sub(this.p1,this.p0),o.default.Vector.mult(o.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(e){var t=o.default.Vector.lerp(this.p0,this.c0,e),n=o.default.Vector.lerp(this.c0,this.c1,e),r=o.default.Vector.lerp(t,n,e);this.c1=o.default.Vector.lerp(this.c1,this.p1,e),this.c0=o.default.Vector.lerp(n,this.c1,e);var i=o.default.Vector.lerp(r,this.c0,e),a=new x(this.p0,t,r,i);return this.p0=i,a},this.splitInflections=function(){var e=o.default.Vector.sub(this.c0,this.p0),t=o.default.Vector.sub(o.default.Vector.sub(this.c1,this.c0),e),n=o.default.Vector.sub(o.default.Vector.sub(o.default.Vector.sub(this.p1,this.c1),e),o.default.Vector.mult(t,2)),r=[],i=t.x*n.y-t.y*n.x;if(0!==i){var a=e.x*n.y-e.y*n.x,s=e.x*t.y-e.y*t.x,l=a*a-4*i*s;if(0<=l){i<0&&(i=-i,a=-a,s=-s);var c=Math.sqrt(l),u=(-a-c)/(2*i),h=(-a+c)/(2*i);0<u&&u<1&&(r.push(this.split(u)),h=1-(1-h)/(1-u)),0<h&&h<1&&r.push(this.split(h))}}return r.push(this),r}}function w(e,t,n,r,i,a,s,l){var c=new x(new o.default.Vector(e,t),new o.default.Vector(n,r),new o.default.Vector(i,a),new o.default.Vector(s,l)).splitInflections(),h=[],d=30/u,f=!0,p=!1,m=void 0;try{for(var g,y=c[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){for(var v=g.value,_=[],b=void 0;!(.125<=(b=d/v.quadError()));){var w=Math.pow(b,1/3),S=v.split(w),A=v.split(1-w/(1-w));h.push(S),_.push(v),v=A}b<1&&h.push(v.split(.5)),h.push(v),Array.prototype.push.apply(h,_.reverse())}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}return h}function S(e,t,n,r){_([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function A(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}var E=!0,M=!1,C=void 0;try{for(var T,P=h[Symbol.iterator]();!(E=(T=P.next()).done);E=!0){var D=T.value,k=(D.x-i)/s,O=(D.y-a)/c;if(!A(d,f,k,O)){switch(D.type){case"M":p=k,m=O;break;case"L":S(d,f,k,O);break;case"Q":var I=(D.x1-i)/s,R=(D.y1-a)/c;_([d,k,I],[f,O,R],{x:d,y:f,cx:I,cy:R});break;case"Z":A(d,f,p,m)?g.push({x:d,y:f}):(S(d,f,p,m),g.push({x:p,y:m}));break;case"C":for(var L=w(d,f,(D.x1-i)/s,(D.y1-a)/c,(D.x2-i)/s,(D.y2-a)/c,k,O),B=0;B<L.length;B++){var z=L[B].toQuadratic();_([z.x,z.x1,z.cx],[z.y,z.y1,z.cy],z)}break;default:throw new Error("unknown command type: ".concat(D.type))}d=k,f=O}}}catch(e){M=!0,C=e}finally{try{E||null==P.return||P.return()}finally{if(M)throw C}}for(var F=g.length,N=this.strokeImageInfos.findImage(F),U=N.index,j=0;j<F;++j){var V=g[j];l(N,b(V.x),b(V.y),b(V.cx),b(V.cy))}function G(e,t,n){for(var r=e.length,i=t.findImage(r),o=i.index,a=0,s=0;s<r;++s)a+=e[s].length;for(var c=n.findImage(a),u=0;u<r;++u){var h=e[u],d=h.length,f=c.index;l(i,f>>7,127&f,d>>7,127&d);for(var p=0;p<d;++p){var m=h[p]+U;l(c,m>>7,127&m,0,0)}}return{cellImageInfo:c,dimOffset:o,dimImageInfo:i}}return(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[r.x1,-r.y1,r.x2,-r.y2],strokeImageInfo:N,strokes:g,colInfo:G(v,this.colDimImageInfos,this.colCellImageInfos),rowInfo:G(y,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset],t}}e("./p5.Shader"),e("./p5.RendererGL.Retained"),o.default.RendererGL.prototype._applyTextProperties=function(){},o.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var u=Math.sqrt(3);o.default.RendererGL.prototype._renderText=function(e,t,n,r,i){if(this._textFont&&"string"!=typeof this._textFont){if(!(i<=r)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),e;e.push();var s=this._doStroke,l=this.drawMode;this._doStroke=!1,this.drawMode=a.TEXTURE;var u=this._textFont.font,h=this._textFont._fontInfo;h=h||(this._textFont._fontInfo=new c(u));var d=this._textFont._handleAlignment(this,t,n,r),f=this._textSize/u.unitsPerEm;this.translate(d.x,d.y,0),this.scale(f,f,1);var p=this.GL,m=!this._defaultFontShader,g=this._getFontShader();g.init(),g.bindShader(),m&&(g.setUniform("uGridImageSize",[64,64]),g.setUniform("uCellsImageSize",[64,64]),g.setUniform("uStrokeImageSize",[64,64]),g.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var y=this.retainedMode.geometry.glyph;if(!y){var v=this._textGeom=new o.default.Geometry(1,1,(function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new o.default.Vector(t,e,0)),this.uvs.push(t,e)}));v.computeFaces().computeNormals(),y=this.createBuffers("glyph",v)}var _=!0,b=!1,x=void 0;try{for(var w,S=this.retainedMode.buffers.text[Symbol.iterator]();!(_=(w=S.next()).done);_=!0)w.value._prepareBuffer(y,g)}catch(e){b=!0,x=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw x}}this._bindBuffer(y.indexBuffer,p.ELEMENT_ARRAY_BUFFER),g.setUniform("uMaterialColor",this.curFillColor);try{var A=0,E=null,M=u.stringToGlyphs(t),C=!0,T=!1,P=void 0;try{for(var D,k=M[Symbol.iterator]();!(C=(D=k.next()).done);C=!0){var O=D.value;E&&(A+=u.getKerningValue(E,O));var I=h.getGlyphInfo(O);if(I.uGlyphRect){var R=I.rowInfo,L=I.colInfo;g.setUniform("uSamplerStrokes",I.strokeImageInfo.imageData),g.setUniform("uSamplerRowStrokes",R.cellImageInfo.imageData),g.setUniform("uSamplerRows",R.dimImageInfo.imageData),g.setUniform("uSamplerColStrokes",L.cellImageInfo.imageData),g.setUniform("uSamplerCols",L.dimImageInfo.imageData),g.setUniform("uGridOffset",I.uGridOffset),g.setUniform("uGlyphRect",I.uGlyphRect),g.setUniform("uGlyphOffset",A),g.bindTextures(),p.drawElements(p.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}A+=O.advanceWidth,E=O}}catch(e){T=!0,P=e}finally{try{C||null==k.return||k.return()}finally{if(T)throw P}}}finally{g.unbindShader(),this._doStroke=s,this.drawMode=l,e.pop()}return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":26,"../core/main":36,"./p5.RendererGL.Retained":89,"./p5.Shader":91}]},{},[21])(21)}).call(this,n(3))},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r=n(0),i=n.n(r),o=n(1),a=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}"undefined"!=typeof window&&(window.p5=a.a);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasParentRef=i.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.sketch=new a.a((function(t){t.setup=function(){e.props.setup(t,e.canvasParentRef.current)},["draw","windowResized","preload","mouseClicked","doubleClicked","mouseMoved","mousePressed","mouseWheel","mouseDragged","mouseReleased","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","deviceMoved","deviceTurned","deviceShaken"].forEach((function(n){e.props[n]&&(t[n]=function(){e.props[n](t)})}))}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.sketch.remove()}},{key:"render",value:function(){return i.a.createElement("div",{ref:this.canvasParentRef,className:this.props.className||"react-p5",style:this.props.style||{}})}}])&&l(t.prototype,n),o}(i.a.Component)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]).default)},2408:(e,t,n)=>{"use strict";var r=n(7418),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}function x(){}function w(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=b.prototype;var S=w.prototype=new x;S.constructor=w,r(S,b.prototype),S.isPureReactComponent=!0;var A={current:null},E=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!M.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:A.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var P=/\/+/g,D=[];function k(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function I(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+L(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+L(i=e[l],l);s+=I(i,c,n,r)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=g&&e[g]||e["@@iterator"])?c:null))for(e=c.call(e),l=0;!(i=e.next()).done;)s+=I(i=i.value,c=t+L(i,l++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function R(e,t,n){return null==e?0:I(e,"",t,n)}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function z(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(T(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),R(e,z,t=k(t,o,r,i)),O(t)}var N={current:null};function U(){var e=N.current;if(null===e)throw Error(y(321));return e}var j={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,B,t=k(null,null,t,n)),O(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!T(e))throw Error(y(143));return e}},t.Component=b,t.Fragment=s,t.Profiler=c,t.PureComponent=w,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var i=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=A.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!M.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?p:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function g(){}function y(){}function v(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==n&&r.call(x,o)&&(_=x);var w=v.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function P(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return y.prototype=w.constructor=v,v.constructor=y,y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(A.prototype),A.prototype[a]=function(){return this},e.AsyncIterator=A,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new A(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},53:(e,t)=>{"use strict";var n,r,i,o,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,l=null,c=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(c,0),e}},u=Date.now();t.unstable_now=function(){return Date.now()-u},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},o=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var y=!1,v=null,_=-1,b=5,x=0;o=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,S=w.port2;w.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();x=e+b;try{v(!0,e)?S.postMessage(null):(y=!1,v=null)}catch(e){throw S.postMessage(null),e}}else y=!1},n=function(e){v=e,y||(y=!0,S.postMessage(null))},r=function(e,n){_=f((function(){e(t.unstable_now())}),n)},i=function(){p(_),_=-1}}function A(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<C(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function M(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>C(a,n))void 0!==l&&0>C(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>C(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],P=[],D=1,k=null,O=3,I=!1,R=!1,L=!1;function B(e){for(var t=E(P);null!==t;){if(null===t.callback)M(P);else{if(!(t.startTime<=e))break;M(P),t.sortIndex=t.expirationTime,A(T,t)}t=E(P)}}function z(e){if(L=!1,B(e),!R)if(null!==E(T))R=!0,n(F);else{var t=E(P);null!==t&&r(z,t.startTime-e)}}function F(e,n){R=!1,L&&(L=!1,i()),I=!0;var a=O;try{for(B(n),k=E(T);null!==k&&(!(k.expirationTime>n)||e&&!o());){var s=k.callback;if(null!==s){k.callback=null,O=k.priorityLevel;var l=s(k.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?k.callback=l:k===E(T)&&M(T),B(n)}else M(T);k=E(T)}if(null!==k)var c=!0;else{var u=E(P);null!==u&&r(z,u.startTime-n),c=!1}return c}finally{k=null,O=a,I=!1}}function N(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||I||(R=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:N(e)}else a=N(e),l=s;return e={id:D++,callback:o,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,A(P,e),null===E(T)&&e===E(P)&&(L?i():L=!0,r(z,l-s))):(e.sortIndex=a,A(T,e),R||I||(R=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=E(T);return n!==k&&null!==k&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<k.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},8747:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(178),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(178,(t=>{o=n(178),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},9462:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(7442),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(7442,(t=>{o=n(7442),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},5267:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(6449),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(6449,(t=>{o=n(6449),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},6273:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(5132),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(5132,(t=>{o=n(5132),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},9248:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(6790),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(6790,(t=>{o=n(6790),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},6225:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(8877),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(8877,(t=>{o=n(8877),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},4839:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(2995),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(2995,(t=>{o=n(2995),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},4288:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(2736),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(2736,(t=>{o=n(2736),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},848:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(6752),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(6752,(t=>{o=n(6752),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},1530:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(4214),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(4214,(t=>{o=n(4214),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},6030:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(7463),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(7463,(t=>{o=n(7463),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},1938:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(2646),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(2646,(t=>{o=n(2646),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},9418:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(7237),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(7237,(t=>{o=n(7237),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},621:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(6433),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(6433,(t=>{o=n(6433),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},8339:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(3379),i=n.n(r),o=n(212),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(212,(t=>{o=n(212),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()}));const l=o.default.locals||{}},7760:(e,t,n)=>{"use strict";var r=n(3379),i=n.n(r),o=n(6545),a=i()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var s=o.default.locals;e.hot.accept(6545,(t=>{o=n(6545),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,o.default.locals)?(s=o.default.locals,a(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),o.default.locals},3379:(e,t,n)=>{"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],l=t.base?s[0]+t.base:s[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=a(u),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:u,updater:m(d,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,p=0;function m(e,t){var n,r,i;if(t.singleton){var o=p++;n=f||(f=l(t)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=l(t),r=d.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var l=s(e,t),c=0;c<n.length;c++){var u=a(n[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=l}}}},1385:(e,t,n)=>{var r=n(2212),i=n(3134),o=n(5717),a=n(7824),s=n(2910),l=n(162),c=r.BufferGeometry;function u(e){c.call(this),"string"==typeof e&&(e={text:e}),this._opt=Object.assign({},e),e&&this.update(e)}e.exports=function(e){return new u(e)},o(u,c),u.prototype.update=function(e){if("string"==typeof e&&(e={text:e}),!(e=Object.assign({},this._opt,e)).font)throw new TypeError("must specify a { font } in options");this.layout=i(e);var t=!1!==e.flipY,n=e.font,o=n.common.scaleW,l=n.common.scaleH,c=this.layout.glyphs.filter((function(e){var t=e.data;return t.width*t.height>0}));this.visibleGlyphs=c;var u=s.positions(c),h=s.uvs(c,o,l,t),d=a([],{clockwise:!0,type:"uint16",count:c.length});if(this.setIndex(d),this.setAttribute("position",new r.BufferAttribute(u,2)),this.setAttribute("uv",new r.BufferAttribute(h,2)),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var f=s.pages(c);this.setAttribute("page",new r.BufferAttribute(f,1))}},u.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new r.Sphere);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);l.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},u.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new r.Box3);var e=this.boundingBox,t=this.attributes.position.array,n=this.attributes.position.itemSize;!t||!n||t.length<2?e.makeEmpty():l.computeBox(t,e)}},162:e=>{var t={min:[0,0],max:[0,0]};function n(e){var n=e.length/2;t.min[0]=e[0],t.min[1]=e[1],t.max[0]=e[0],t.max[1]=e[1];for(var r=0;r<n;r++){var i=e[2*r+0],o=e[2*r+1];t.min[0]=Math.min(i,t.min[0]),t.min[1]=Math.min(o,t.min[1]),t.max[0]=Math.max(i,t.max[0]),t.max[1]=Math.max(o,t.max[1])}}e.exports.computeBox=function(e,r){n(e),r.min.set(t.min[0],t.min[1],0),r.max.set(t.max[0],t.max[1],0)},e.exports.computeSphere=function(e,r){n(e);var i=t.min[0],o=t.min[1],a=t.max[0]-i,s=t.max[1]-o,l=Math.sqrt(a*a+s*s);r.center.set(i+a/2,o+s/2,0),r.radius=l/2}},2910:e=>{e.exports.pages=function(e){var t=new Float32Array(4*e.length*1),n=0;return e.forEach((function(e){var r=e.data.page||0;t[n++]=r,t[n++]=r,t[n++]=r,t[n++]=r})),t},e.exports.uvs=function(e,t,n,r){var i=new Float32Array(4*e.length*2),o=0;return e.forEach((function(e){var a=e.data,s=a.x+a.width,l=a.y+a.height,c=a.x/t,u=a.y/n,h=s/t,d=l/n;r&&(u=(n-a.y)/n,d=(n-l)/n),i[o++]=c,i[o++]=u,i[o++]=c,i[o++]=d,i[o++]=h,i[o++]=d,i[o++]=h,i[o++]=u})),i},e.exports.positions=function(e){var t=new Float32Array(4*e.length*2),n=0;return e.forEach((function(e){var r=e.data,i=e.position[0]+r.xoffset,o=e.position[1]+r.yoffset,a=r.width,s=r.height;t[n++]=i,t[n++]=o,t[n++]=i,t[n++]=o+s,t[n++]=i+a,t[n++]=o+s,t[n++]=i+a,t[n++]=o})),t}},2299:(e,t,n)=>{var r=n(2212),i=n(7418);e.exports=function(e){var t="number"==typeof(e=e||{}).opacity?e.opacity:1,n="number"==typeof e.alphaTest?e.alphaTest:1e-4,o=e.precision||"highp",a=e.color,s=e.map,l="boolean"!=typeof e.negate||e.negate;return delete e.map,delete e.color,delete e.precision,delete e.opacity,delete e.negate,i({uniforms:{opacity:{type:"f",value:t},map:{type:"t",value:s||new r.Texture},color:{type:"c",value:new r.Color(a)}},vertexShader:["attribute vec2 uv;","attribute vec4 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * position;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives : enable","#endif","precision "+o+" float;","uniform float opacity;","uniform vec3 color;","uniform sampler2D map;","varying vec2 vUv;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","void main() {","  vec3 sample = "+(l?"1.0 - ":"")+"texture2D(map, vUv).rgb;","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);","  gl_FragColor = vec4(color.xyz, alpha * opacity);",0===n?"":"  if (gl_FragColor.a < "+n+") discard;","}"].join("\n")},e)}},2212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>ne,AddEquation:()=>E,AddOperation:()=>J,AdditiveAnimationBlendMode:()=>qt,AdditiveBlending:()=>x,AlphaFormat:()=>Be,AlwaysDepth:()=>V,AlwaysStencilFunc:()=>An,AmbientLight:()=>ah,AmbientLightProbe:()=>Th,AnimationClip:()=>fu,AnimationLoader:()=>xu,AnimationMixer:()=>ad,AnimationObjectGroup:()=>id,AnimationUtils:()=>eu,ArcCurve:()=>Pu,ArrayCamera:()=>Ps,ArrowHelper:()=>$d,Audio:()=>Nh,AudioAnalyser:()=>Wh,AudioContext:()=>Eh,AudioListener:()=>Fh,AudioLoader:()=>Mh,AxesHelper:()=>Jd,AxisHelper:()=>Qf,BackSide:()=>m,BasicDepthPacking:()=>on,BasicShadowMap:()=>u,BinaryTextureLoader:()=>ip,Bone:()=>fl,BooleanKeyframeTrack:()=>au,BoundingBoxHelper:()=>ep,Box2:()=>gd,Box3:()=>er,Box3Helper:()=>Wd,BoxBufferGeometry:()=>fo,BoxGeometry:()=>fo,BoxHelper:()=>Hd,BufferAttribute:()=>Ei,BufferGeometry:()=>qi,BufferGeometryLoader:()=>ph,ByteType:()=>Ee,Cache:()=>mu,Camera:()=>vo,CameraHelper:()=>jd,CanvasRenderer:()=>sp,CanvasTexture:()=>Vl,CatmullRomCurve3:()=>Lu,CineonToneMapping:()=>te,CircleBufferGeometry:()=>Hl,CircleGeometry:()=>Hl,ClampToEdgeWrapping:()=>de,Clock:()=>Oh,ClosedSplineCurve3:()=>$f,Color:()=>vi,ColorKeyframeTrack:()=>su,CompressedTexture:()=>jl,CompressedTextureLoader:()=>wu,ConeBufferGeometry:()=>ql,ConeGeometry:()=>ql,CubeCamera:()=>xo,CubeReflectionMapping:()=>oe,CubeRefractionMapping:()=>ae,CubeTexture:()=>wo,CubeTextureLoader:()=>Au,CubeUVReflectionMapping:()=>ce,CubeUVRefractionMapping:()=>ue,CubicBezierCurve:()=>Nu,CubicBezierCurve3:()=>Uu,CubicInterpolant:()=>nu,CullFaceBack:()=>s,CullFaceFront:()=>l,CullFaceFrontBack:()=>c,CullFaceNone:()=>a,Curve:()=>Cu,CurvePath:()=>Zu,CustomBlending:()=>A,CustomToneMapping:()=>re,CylinderBufferGeometry:()=>Wl,CylinderGeometry:()=>Wl,Cylindrical:()=>pd,DataTexture:()=>Ao,DataTexture2DArray:()=>Xo,DataTexture3D:()=>Yo,DataTextureLoader:()=>Eu,DataUtils:()=>ef,DecrementStencilOp:()=>fn,DecrementWrapStencilOp:()=>mn,DefaultLoadingManager:()=>yu,DepthFormat:()=>Ve,DepthStencilFormat:()=>Ge,DepthTexture:()=>Gl,DirectionalLight:()=>oh,DirectionalLightHelper:()=>Fd,DiscreteInterpolant:()=>iu,DodecahedronBufferGeometry:()=>Xl,DodecahedronGeometry:()=>Xl,DoubleSide:()=>g,DstAlphaFactor:()=>B,DstColorFactor:()=>F,DynamicBufferAttribute:()=>Uf,DynamicCopyUsage:()=>On,DynamicDrawUsage:()=>Mn,DynamicReadUsage:()=>Pn,EdgesGeometry:()=>Ql,EdgesHelper:()=>tp,EllipseCurve:()=>Tu,EqualDepth:()=>W,EqualStencilFunc:()=>_n,EquirectangularReflectionMapping:()=>se,EquirectangularRefractionMapping:()=>le,Euler:()=>Ir,EventDispatcher:()=>Bn,ExtrudeBufferGeometry:()=>Cc,ExtrudeGeometry:()=>Cc,Face3:()=>_i,Face4:()=>Ef,FaceColors:()=>Pf,FileLoader:()=>bu,FlatShading:()=>y,Float16BufferAttribute:()=>Ii,Float32Attribute:()=>Xf,Float32BufferAttribute:()=>Ri,Float64Attribute:()=>Yf,Float64BufferAttribute:()=>Li,FloatType:()=>De,Fog:()=>zs,FogExp2:()=>Bs,Font:()=>xh,FontLoader:()=>Sh,FrontSide:()=>p,Frustum:()=>Co,GLBufferAttribute:()=>cd,GLSL1:()=>Rn,GLSL3:()=>Ln,GammaEncoding:()=>Kt,GeometryUtils:()=>ap,GreaterDepth:()=>Z,GreaterEqualDepth:()=>q,GreaterEqualStencilFunc:()=>Sn,GreaterStencilFunc:()=>xn,GridHelper:()=>Id,Group:()=>Ds,HalfFloatType:()=>ke,HemisphereLight:()=>Ju,HemisphereLightHelper:()=>Od,HemisphereLightProbe:()=>Ch,IcosahedronBufferGeometry:()=>Pc,IcosahedronGeometry:()=>Pc,ImageBitmapLoader:()=>_h,ImageLoader:()=>Su,ImageUtils:()=>Gn,ImmediateRenderObject:()=>bd,IncrementStencilOp:()=>dn,IncrementWrapStencilOp:()=>pn,InstancedBufferAttribute:()=>fh,InstancedBufferGeometry:()=>dh,InstancedInterleavedBuffer:()=>ld,InstancedMesh:()=>xl,Int16Attribute:()=>Hf,Int16BufferAttribute:()=>Pi,Int32Attribute:()=>qf,Int32BufferAttribute:()=>ki,Int8Attribute:()=>jf,Int8BufferAttribute:()=>Mi,IntType:()=>Te,InterleavedBuffer:()=>Ns,InterleavedBufferAttribute:()=>js,Interpolant:()=>tu,InterpolateDiscrete:()=>Nt,InterpolateLinear:()=>Ut,InterpolateSmooth:()=>jt,InvertStencilOp:()=>gn,JSONLoader:()=>lp,KeepStencilOp:()=>un,KeyframeTrack:()=>ou,LOD:()=>al,LatheBufferGeometry:()=>Dc,LatheGeometry:()=>Dc,Layers:()=>Br,LensFlare:()=>up,LessDepth:()=>G,LessEqualDepth:()=>H,LessEqualStencilFunc:()=>bn,LessStencilFunc:()=>vn,Light:()=>$u,LightProbe:()=>ch,Line:()=>Tl,Line3:()=>_d,LineBasicMaterial:()=>wl,LineCurve:()=>ju,LineCurve3:()=>Vu,LineDashedMaterial:()=>Kc,LineLoop:()=>Ol,LinePieces:()=>Cf,LineSegments:()=>kl,LineStrip:()=>Mf,LinearEncoding:()=>$t,LinearFilter:()=>_e,LinearInterpolant:()=>ru,LinearMipMapLinearFilter:()=>Se,LinearMipMapNearestFilter:()=>xe,LinearMipmapLinearFilter:()=>we,LinearMipmapNearestFilter:()=>be,LinearToneMapping:()=>Q,Loader:()=>vu,LoaderUtils:()=>hh,LoadingManager:()=>gu,LogLuvEncoding:()=>en,LoopOnce:()=>Bt,LoopPingPong:()=>Ft,LoopRepeat:()=>zt,LuminanceAlphaFormat:()=>Ue,LuminanceFormat:()=>Ne,MOUSE:()=>i,Material:()=>xi,MaterialLoader:()=>uh,Math:()=>Nn,MathUtils:()=>Nn,Matrix3:()=>jn,Matrix4:()=>Er,MaxEquation:()=>P,Mesh:()=>uo,MeshBasicMaterial:()=>wi,MeshDepthMaterial:()=>Ss,MeshDistanceMaterial:()=>As,MeshFaceMaterial:()=>kf,MeshLambertMaterial:()=>$c,MeshMatcapMaterial:()=>Jc,MeshNormalMaterial:()=>Yc,MeshPhongMaterial:()=>Zc,MeshPhysicalMaterial:()=>qc,MeshStandardMaterial:()=>Wc,MeshToonMaterial:()=>Xc,MinEquation:()=>T,MirroredRepeatWrapping:()=>fe,MixOperation:()=>$,MultiMaterial:()=>Of,MultiplyBlending:()=>S,MultiplyOperation:()=>Y,NearestFilter:()=>pe,NearestMipMapLinearFilter:()=>ve,NearestMipMapNearestFilter:()=>ge,NearestMipmapLinearFilter:()=>ye,NearestMipmapNearestFilter:()=>me,NeverDepth:()=>j,NeverStencilFunc:()=>yn,NoBlending:()=>_,NoColors:()=>Tf,NoToneMapping:()=>K,NormalAnimationBlendMode:()=>Wt,NormalBlending:()=>b,NotEqualDepth:()=>X,NotEqualStencilFunc:()=>wn,NumberKeyframeTrack:()=>lu,Object3D:()=>$r,ObjectLoader:()=>mh,ObjectSpaceNormalMap:()=>ln,OctahedronBufferGeometry:()=>kc,OctahedronGeometry:()=>kc,OneFactor:()=>k,OneMinusDstAlphaFactor:()=>z,OneMinusDstColorFactor:()=>N,OneMinusSrcAlphaFactor:()=>L,OneMinusSrcColorFactor:()=>I,OrthographicCamera:()=>rh,PCFShadowMap:()=>h,PCFSoftShadowMap:()=>d,PMREMGenerator:()=>vf,ParametricBufferGeometry:()=>Oc,ParametricGeometry:()=>Oc,Particle:()=>Rf,ParticleBasicMaterial:()=>zf,ParticleSystem:()=>Lf,ParticleSystemMaterial:()=>Ff,Path:()=>Xu,PerspectiveCamera:()=>_o,Plane:()=>ei,PlaneBufferGeometry:()=>Do,PlaneGeometry:()=>Do,PlaneHelper:()=>qd,PointCloud:()=>If,PointCloudMaterial:()=>Bf,PointLight:()=>nh,PointLightHelper:()=>Td,Points:()=>Fl,PointsMaterial:()=>Il,PolarGridHelper:()=>Rd,PolyhedronBufferGeometry:()=>Zl,PolyhedronGeometry:()=>Zl,PositionalAudio:()=>Hh,PropertyBinding:()=>rd,PropertyMixer:()=>qh,QuadraticBezierCurve:()=>Gu,QuadraticBezierCurve3:()=>Hu,Quaternion:()=>$n,QuaternionKeyframeTrack:()=>uu,QuaternionLinearInterpolant:()=>cu,REVISION:()=>r,RGBADepthPacking:()=>an,RGBAFormat:()=>Fe,RGBAIntegerFormat:()=>Ye,RGBA_ASTC_10x10_Format:()=>vt,RGBA_ASTC_10x5_Format:()=>mt,RGBA_ASTC_10x6_Format:()=>gt,RGBA_ASTC_10x8_Format:()=>yt,RGBA_ASTC_12x10_Format:()=>_t,RGBA_ASTC_12x12_Format:()=>bt,RGBA_ASTC_4x4_Format:()=>st,RGBA_ASTC_5x4_Format:()=>lt,RGBA_ASTC_5x5_Format:()=>ct,RGBA_ASTC_6x5_Format:()=>ut,RGBA_ASTC_6x6_Format:()=>ht,RGBA_ASTC_8x5_Format:()=>dt,RGBA_ASTC_8x6_Format:()=>ft,RGBA_ASTC_8x8_Format:()=>pt,RGBA_BPTC_Format:()=>xt,RGBA_ETC2_EAC_Format:()=>at,RGBA_PVRTC_2BPPV1_Format:()=>rt,RGBA_PVRTC_4BPPV1_Format:()=>nt,RGBA_S3TC_DXT1_Format:()=>Je,RGBA_S3TC_DXT3_Format:()=>Ke,RGBA_S3TC_DXT5_Format:()=>Qe,RGBDEncoding:()=>rn,RGBEEncoding:()=>Qt,RGBEFormat:()=>je,RGBFormat:()=>ze,RGBIntegerFormat:()=>Xe,RGBM16Encoding:()=>nn,RGBM7Encoding:()=>tn,RGB_ETC1_Format:()=>it,RGB_ETC2_Format:()=>ot,RGB_PVRTC_2BPPV1_Format:()=>tt,RGB_PVRTC_4BPPV1_Format:()=>et,RGB_S3TC_DXT1_Format:()=>$e,RGFormat:()=>qe,RGIntegerFormat:()=>Ze,RawShaderMaterial:()=>Hc,Ray:()=>Ar,Raycaster:()=>ud,RectAreaLight:()=>sh,RedFormat:()=>He,RedIntegerFormat:()=>We,ReinhardToneMapping:()=>ee,RepeatWrapping:()=>he,ReplaceStencilOp:()=>hn,ReverseSubtractEquation:()=>C,RingBufferGeometry:()=>Ic,RingGeometry:()=>Ic,SRGB8_ALPHA8_ASTC_10x10_Format:()=>It,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Dt,SRGB8_ALPHA8_ASTC_10x6_Format:()=>kt,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Ot,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Rt,SRGB8_ALPHA8_ASTC_12x12_Format:()=>Lt,SRGB8_ALPHA8_ASTC_4x4_Format:()=>wt,SRGB8_ALPHA8_ASTC_5x4_Format:()=>St,SRGB8_ALPHA8_ASTC_5x5_Format:()=>At,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Et,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Mt,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Ct,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Tt,SRGB8_ALPHA8_ASTC_8x8_Format:()=>Pt,Scene:()=>Fs,SceneUtils:()=>cp,ShaderChunk:()=>ko,ShaderLib:()=>Io,ShaderMaterial:()=>yo,ShadowMaterial:()=>Gc,Shape:()=>Yu,ShapeBufferGeometry:()=>Rc,ShapeGeometry:()=>Rc,ShapePath:()=>bh,ShapeUtils:()=>Ac,ShortType:()=>Me,Skeleton:()=>gl,SkeletonHelper:()=>Md,SkinnedMesh:()=>dl,SmoothShading:()=>v,Sphere:()=>gr,SphereBufferGeometry:()=>Lc,SphereGeometry:()=>Lc,Spherical:()=>fd,SphericalHarmonics3:()=>lh,Spline:()=>Kf,SplineCurve:()=>Wu,SplineCurve3:()=>Jf,SpotLight:()=>eh,SpotLightHelper:()=>wd,Sprite:()=>nl,SpriteMaterial:()=>Vs,SrcAlphaFactor:()=>R,SrcAlphaSaturateFactor:()=>U,SrcColorFactor:()=>O,StaticCopyUsage:()=>kn,StaticDrawUsage:()=>En,StaticReadUsage:()=>Tn,StereoCamera:()=>kh,StreamCopyUsage:()=>In,StreamDrawUsage:()=>Cn,StreamReadUsage:()=>Dn,StringKeyframeTrack:()=>hu,SubtractEquation:()=>M,SubtractiveBlending:()=>w,TOUCH:()=>o,TangentSpaceNormalMap:()=>sn,TetrahedronBufferGeometry:()=>Bc,TetrahedronGeometry:()=>Bc,TextBufferGeometry:()=>zc,TextGeometry:()=>zc,Texture:()=>Wn,TextureLoader:()=>Mu,TorusBufferGeometry:()=>Fc,TorusGeometry:()=>Fc,TorusKnotBufferGeometry:()=>Nc,TorusKnotGeometry:()=>Nc,Triangle:()=>hi,TriangleFanDrawMode:()=>Yt,TriangleStripDrawMode:()=>Xt,TrianglesDrawMode:()=>Zt,TubeBufferGeometry:()=>Uc,TubeGeometry:()=>Uc,UVMapping:()=>ie,Uint16Attribute:()=>Wf,Uint16BufferAttribute:()=>Di,Uint32Attribute:()=>Zf,Uint32BufferAttribute:()=>Oi,Uint8Attribute:()=>Vf,Uint8BufferAttribute:()=>Ci,Uint8ClampedAttribute:()=>Gf,Uint8ClampedBufferAttribute:()=>Ti,Uniform:()=>sd,UniformsLib:()=>Oo,UniformsUtils:()=>go,UnsignedByteType:()=>Ae,UnsignedInt248Type:()=>Le,UnsignedIntType:()=>Pe,UnsignedShort4444Type:()=>Oe,UnsignedShort5551Type:()=>Ie,UnsignedShort565Type:()=>Re,UnsignedShortType:()=>Ce,VSMShadowMap:()=>f,Vector2:()=>Un,Vector3:()=>Jn,Vector4:()=>Zn,VectorKeyframeTrack:()=>du,Vertex:()=>Nf,VertexColors:()=>Df,VideoTexture:()=>Ul,WebGL1Renderer:()=>Ls,WebGLCubeRenderTarget:()=>So,WebGLMultisampleRenderTarget:()=>Yn,WebGLRenderTarget:()=>Xn,WebGLRenderTargetCube:()=>op,WebGLRenderer:()=>Rs,WebGLUtils:()=>Ts,WireframeGeometry:()=>jc,WireframeHelper:()=>np,WrapAroundEnding:()=>Ht,XHRLoader:()=>rp,ZeroCurvatureEnding:()=>Vt,ZeroFactor:()=>D,ZeroSlopeEnding:()=>Gt,ZeroStencilOp:()=>cn,sRGBEncoding:()=>Jt});const r="125",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,c=3,u=0,h=1,d=2,f=3,p=0,m=1,g=2,y=1,v=2,_=0,b=1,x=2,w=3,S=4,A=5,E=100,M=101,C=102,T=103,P=104,D=200,k=201,O=202,I=203,R=204,L=205,B=206,z=207,F=208,N=209,U=210,j=0,V=1,G=2,H=3,W=4,q=5,Z=6,X=7,Y=0,$=1,J=2,K=0,Q=1,ee=2,te=3,ne=4,re=5,ie=300,oe=301,ae=302,se=303,le=304,ce=306,ue=307,he=1e3,de=1001,fe=1002,pe=1003,me=1004,ge=1004,ye=1005,ve=1005,_e=1006,be=1007,xe=1007,we=1008,Se=1008,Ae=1009,Ee=1010,Me=1011,Ce=1012,Te=1013,Pe=1014,De=1015,ke=1016,Oe=1017,Ie=1018,Re=1019,Le=1020,Be=1021,ze=1022,Fe=1023,Ne=1024,Ue=1025,je=Fe,Ve=1026,Ge=1027,He=1028,We=1029,qe=1030,Ze=1031,Xe=1032,Ye=1033,$e=33776,Je=33777,Ke=33778,Qe=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,ot=37492,at=37496,st=37808,lt=37809,ct=37810,ut=37811,ht=37812,dt=37813,ft=37814,pt=37815,mt=37816,gt=37817,yt=37818,vt=37819,_t=37820,bt=37821,xt=36492,wt=37840,St=37841,At=37842,Et=37843,Mt=37844,Ct=37845,Tt=37846,Pt=37847,Dt=37848,kt=37849,Ot=37850,It=37851,Rt=37852,Lt=37853,Bt=2200,zt=2201,Ft=2202,Nt=2300,Ut=2301,jt=2302,Vt=2400,Gt=2401,Ht=2402,Wt=2500,qt=2501,Zt=0,Xt=1,Yt=2,$t=3e3,Jt=3001,Kt=3007,Qt=3002,en=3003,tn=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,ln=1,cn=0,un=7680,hn=7681,dn=7682,fn=7683,pn=34055,mn=34056,gn=5386,yn=512,vn=513,_n=514,bn=515,xn=516,wn=517,Sn=518,An=519,En=35044,Mn=35048,Cn=35040,Tn=35045,Pn=35049,Dn=35041,kn=35046,On=35050,In=35042,Rn="100",Ln="300 es";function Bn(){}Object.assign(Bn.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}});const zn=[];for(let e=0;e<256;e++)zn[e]=(e<16?"0":"")+e.toString(16);let Fn=1234567;const Nn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(zn[255&e]+zn[e>>8&255]+zn[e>>16&255]+zn[e>>24&255]+"-"+zn[255&t]+zn[t>>8&255]+"-"+zn[t>>16&15|64]+zn[t>>24&255]+"-"+zn[63&n|128]+zn[n>>8&255]+"-"+zn[n>>16&255]+zn[n>>24&255]+zn[255&r]+zn[r>>8&255]+zn[r>>16&255]+zn[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},damp:function(e,t,n,r){return Nn.lerp(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Nn.euclideanModulo(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Fn=e%2147483647),Fn=16807*Fn%2147483647,(Fn-1)/2147483646},degToRad:function(e){return e*Nn.DEG2RAD},radToDeg:function(e){return e*Nn.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Un{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class jn{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],y=r[1],v=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*p+a*y+s*b,i[3]=o*m+a*v+s*x,i[6]=o*g+a*_+s*w,i[1]=l*p+c*y+u*b,i[4]=l*m+c*v+u*x,i[7]=l*g+c*_+u*w,i[2]=h*p+d*y+f*b,i[5]=h*m+d*v+f*x,i[8]=h*g+d*_+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,f=t*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}let Vn;const Gn={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Vn&&(Vn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Vn.width=e.width,Vn.height=e.height;const n=Vn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Vn}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Hn=0;function Wn(e=Wn.DEFAULT_IMAGE,t=Wn.DEFAULT_MAPPING,n=de,r=de,i=_e,o=we,a=Fe,s=Ae,l=1,c=$t){Object.defineProperty(this,"id",{value:Hn++}),this.uuid=Nn.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Un(0,0),this.repeat=new Un(1,1),this.center=new Un(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}function qn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Gn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Wn.DEFAULT_IMAGE=void 0,Wn.DEFAULT_MAPPING=ie,Wn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Nn.generateUUID()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(qn(r[e].image)):t.push(qn(r[e]))}else t=qn(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case he:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case fe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case he:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case fe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class Zn{constructor(e=0,t=0,n=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,y=(g+1)/2,v=(c+h)/4,_=(u+p)/4,b=(f+m)/4;return e>s&&e>y?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=v/n,i=_/n):s>y?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=v/r,i=b/r):y<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=_/i,r=b/i),this.set(n,r,i,t),this}let y=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(y)<.001&&(y=1),this.x=(m-f)/y,this.y=(u-p)/y,this.z=(h-c)/y,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}class Xn extends Bn{constructor(e,t,n){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=e,this.height=t,this.scissor=new Zn(0,0,e,t),this.scissorTest=!1,this.viewport=new Zn(0,0,e,t),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:_e,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setSize(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yn extends Xn{constructor(e,t,n){super(e,t,n),Object.defineProperty(this,"isWebGLMultisampleRenderTarget",{value:!0}),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}class $n{constructor(e=0,t=0,n=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return n.copy(e).slerp(t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(u!==p||s!==h||l!==d||c!==f){let e=1-a;const t=s*h+l*d+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+f*i,u=u*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return e[t]=a*f+c*u+s*d-l*h,e[t+1]=s*f+c*h+l*u-a*d,e[t+2]=l*f+c*d+a*h-s*u,e[t+3]=c*f-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nn.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Jn{constructor(e=0,t=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Qn.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Qn.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Kn.copy(this).projectOnVector(e),this.sub(Kn)}reflect(e){return this.sub(Kn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Nn.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Kn=new Jn,Qn=new $n;class er{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new Jn(1/0,1/0,1/0),this.max=void 0!==t?t:new Jn(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=rr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Jn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Jn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ir.copy(t.boundingBox),ir.applyMatrix4(e.matrixWorld),this.union(ir));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Jn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,rr),rr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hr),dr.subVectors(this.max,hr),or.subVectors(e.a,hr),ar.subVectors(e.b,hr),sr.subVectors(e.c,hr),lr.subVectors(ar,or),cr.subVectors(sr,ar),ur.subVectors(or,sr);let t=[0,-lr.z,lr.y,0,-cr.z,cr.y,0,-ur.z,ur.y,lr.z,0,-lr.x,cr.z,0,-cr.x,ur.z,0,-ur.x,-lr.y,lr.x,0,-cr.y,cr.x,0,-ur.y,ur.x,0];return!!tr(t,or,ar,sr,dr)&&(t=[1,0,0,0,1,0,0,0,1],!!tr(t,or,ar,sr,dr)&&(fr.crossVectors(lr,cr),t=[fr.x,fr.y,fr.z],tr(t,or,ar,sr,dr)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Jn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return rr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(rr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(nr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function tr(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){pr.fromArray(e,o);const a=i.x*Math.abs(pr.x)+i.y*Math.abs(pr.y)+i.z*Math.abs(pr.z),s=t.dot(pr),l=n.dot(pr),c=r.dot(pr);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const nr=[new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn],rr=new Jn,ir=new er,or=new Jn,ar=new Jn,sr=new Jn,lr=new Jn,cr=new Jn,ur=new Jn,hr=new Jn,dr=new Jn,fr=new Jn,pr=new Jn,mr=new er;class gr{constructor(e,t){this.center=void 0!==e?e:new Jn,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):mr.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Jn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new er),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const yr=new Jn,vr=new Jn,_r=new Jn,br=new Jn,xr=new Jn,wr=new Jn,Sr=new Jn;class Ar{constructor(e,t){this.origin=void 0!==e?e:new Jn,this.direction=void 0!==t?t:new Jn(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Jn),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yr)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Jn),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yr.copy(this.direction).multiplyScalar(t).add(this.origin),yr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){vr.copy(e).add(t).multiplyScalar(.5),_r.copy(t).sub(e).normalize(),br.copy(this.origin).sub(vr);const i=.5*e.distanceTo(t),o=-this.direction.dot(_r),a=br.dot(this.direction),s=-br.dot(_r),l=br.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*s-a,h=o*a-s,f=i*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-f?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(_r).multiplyScalar(h).add(vr),d}intersectSphere(e,t){yr.subVectors(e.center,this.origin);const n=yr.dot(this.direction),r=yr.dot(yr)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,yr)}intersectTriangle(e,t,n,r,i){xr.subVectors(t,e),wr.subVectors(n,e),Sr.crossVectors(xr,wr);let o,a=this.direction.dot(Sr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}br.subVectors(this.origin,e);const s=o*this.direction.dot(wr.crossVectors(br,wr));if(s<0)return null;const l=o*this.direction.dot(xr.cross(br));if(l<0)return null;if(s+l>a)return null;const c=-o*br.dot(Sr);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class Er{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Er).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Mr.setFromMatrixColumn(e,0).length(),i=1/Mr.setFromMatrixColumn(e,1).length(),o=1/Mr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Tr,e,Pr)}lookAt(e,t,n){const r=this.elements;return Or.subVectors(e,t),0===Or.lengthSq()&&(Or.z=1),Or.normalize(),Dr.crossVectors(n,Or),0===Dr.lengthSq()&&(1===Math.abs(n.z)?Or.x+=1e-4:Or.z+=1e-4,Or.normalize(),Dr.crossVectors(n,Or)),Dr.normalize(),kr.crossVectors(Or,Dr),r[0]=Dr.x,r[4]=kr.x,r[8]=Or.x,r[1]=Dr.y,r[5]=kr.y,r[9]=Or.y,r[2]=Dr.z,r[6]=kr.z,r[10]=Or.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],_=n[11],b=n[15],x=r[0],w=r[4],S=r[8],A=r[12],E=r[1],M=r[5],C=r[9],T=r[13],P=r[2],D=r[6],k=r[10],O=r[14],I=r[3],R=r[7],L=r[11],B=r[15];return i[0]=o*x+a*E+s*P+l*I,i[4]=o*w+a*M+s*D+l*R,i[8]=o*S+a*C+s*k+l*L,i[12]=o*A+a*T+s*O+l*B,i[1]=c*x+u*E+h*P+d*I,i[5]=c*w+u*M+h*D+d*R,i[9]=c*S+u*C+h*k+d*L,i[13]=c*A+u*T+h*O+d*B,i[2]=f*x+p*E+m*P+g*I,i[6]=f*w+p*M+m*D+g*R,i[10]=f*S+p*C+m*k+g*L,i[14]=f*A+p*T+m*O+g*B,i[3]=y*x+v*E+_*P+b*I,i[7]=y*w+v*M+_*D+b*R,i[11]=y*S+v*C+_*k+b*L,i[15]=y*A+v*T+_*O+b*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],y=u*m*l-p*h*l+p*s*d-a*m*d-u*s*g+a*h*g,v=f*h*l-c*m*l-f*s*d+o*m*d+c*s*g-o*h*g,_=c*p*l-f*u*l+f*a*d-o*p*d-c*a*g+o*u*g,b=f*u*s-c*p*s-f*a*h+o*p*h+c*a*m-o*u*m,x=t*y+n*v+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=y*w,e[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*w,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*w,e[4]=v*w,e[5]=(c*m*i-f*h*i+f*r*d-t*m*d-c*r*g+t*h*g)*w,e[6]=(f*s*i-o*m*i-f*r*l+t*m*l+o*r*g-t*s*g)*w,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*w,e[8]=_*w,e[9]=(f*u*i-c*p*i-f*n*d+t*p*d+c*n*g-t*u*g)*w,e[10]=(o*p*i-f*a*i+f*n*l-t*p*l-o*n*g+t*a*g)*w,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*w,e[12]=b*w,e[13]=(c*p*r-f*u*r+f*n*h-t*p*h-c*n*m+t*u*m)*w,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*w,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,f=i*u,p=o*c,m=o*u,g=a*u,y=s*l,v=s*c,_=s*u,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+g))*b,r[1]=(d+_)*b,r[2]=(f-v)*b,r[3]=0,r[4]=(d-_)*x,r[5]=(1-(h+g))*x,r[6]=(m+y)*x,r[7]=0,r[8]=(f+v)*w,r[9]=(m-y)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Mr.set(r[0],r[1],r[2]).length();const o=Mr.set(r[4],r[5],r[6]).length(),a=Mr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Cr.copy(this);const s=1/i,l=1/o,c=1/a;return Cr.elements[0]*=s,Cr.elements[1]*=s,Cr.elements[2]*=s,Cr.elements[4]*=l,Cr.elements[5]*=l,Cr.elements[6]*=l,Cr.elements[8]*=c,Cr.elements[9]*=c,Cr.elements[10]*=c,t.setFromRotationMatrix(Cr),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Mr=new Jn,Cr=new Er,Tr=new Jn(0,0,0),Pr=new Jn(1,1,1),Dr=new Jn,kr=new Jn,Or=new Jn;class Ir{constructor(e=0,t=0,n=0,r=Ir.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=Nn.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],f=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Rr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Rr,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Lr.setFromEuler(this),this.setFromQuaternion(Lr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Jn(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ir.DefaultOrder="XYZ",Ir.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Rr=new Er,Lr=new $n;class Br{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let zr=0;const Fr=new Jn,Nr=new $n,Ur=new Er,jr=new Jn,Vr=new Jn,Gr=new Jn,Hr=new $n,Wr=new Jn(1,0,0),qr=new Jn(0,1,0),Zr=new Jn(0,0,1),Xr={type:"added"},Yr={type:"removed"};function $r(){Object.defineProperty(this,"id",{value:zr++}),this.uuid=Nn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$r.DefaultUp.clone();const e=new Jn,t=new Ir,n=new $n,r=new Jn(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Er},normalMatrix:{value:new jn}}),this.matrix=new Er,this.matrixWorld=new Er,this.matrixAutoUpdate=$r.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Br,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}$r.DefaultUp=new Jn(0,1,0),$r.DefaultMatrixAutoUpdate=!0,$r.prototype=Object.assign(Object.create(Bn.prototype),{constructor:$r,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Nr.setFromAxisAngle(e,t),this.quaternion.multiply(Nr),this},rotateOnWorldAxis:function(e,t){return Nr.setFromAxisAngle(e,t),this.quaternion.premultiply(Nr),this},rotateX:function(e){return this.rotateOnAxis(Wr,e)},rotateY:function(e){return this.rotateOnAxis(qr,e)},rotateZ:function(e){return this.rotateOnAxis(Zr,e)},translateOnAxis:function(e,t){return Fr.copy(e).applyQuaternion(this.quaternion),this.position.add(Fr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Wr,e)},translateY:function(e){return this.translateOnAxis(qr,e)},translateZ:function(e){return this.translateOnAxis(Zr,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Ur.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?jr.copy(e):jr.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Vr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ur.lookAt(Vr,jr,this.up):Ur.lookAt(jr,Vr,this.up),this.quaternion.setFromRotationMatrix(Ur),r&&(Ur.extractRotation(r.matrixWorld),Nr.setFromRotationMatrix(Ur),this.quaternion.premultiply(Nr.invert()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Xr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Yr)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Yr)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Ur.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ur.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ur),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new $n),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vr,e,Gr),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vr,Hr,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const Jr=new Jn,Kr=new Jn,Qr=new jn;class ei{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new Jn(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Jr.subVectors(n,t).cross(Kr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Jn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Jn);const n=e.delta(Jr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Jn),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Qr.getNormalMatrix(e),r=this.coplanarPoint(Jr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const ti=new Jn,ni=new Jn,ri=new Jn,ii=new Jn,oi=new Jn,ai=new Jn,si=new Jn,li=new Jn,ci=new Jn,ui=new Jn;class hi{constructor(e,t,n){this.a=void 0!==e?e:new Jn,this.b=void 0!==t?t:new Jn,this.c=void 0!==n?n:new Jn}static getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Jn),r.subVectors(n,t),ti.subVectors(e,t),r.cross(ti);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ti.subVectors(r,t),ni.subVectors(n,t),ri.subVectors(e,t);const o=ti.dot(ti),a=ti.dot(ni),s=ti.dot(ri),l=ni.dot(ni),c=ni.dot(ri),u=o*l-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Jn),0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,f=(o*c-a*s)*h;return i.set(1-d-f,f,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,ii),s.set(0,0),s.addScaledVector(i,ii.x),s.addScaledVector(o,ii.y),s.addScaledVector(a,ii.z),s}static isFrontFacing(e,t,n,r){return ti.subVectors(n,t),ni.subVectors(e,t),ti.cross(ni).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ti.subVectors(this.c,this.b),ni.subVectors(this.a,this.b),.5*ti.cross(ni).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Jn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ei),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return hi.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return hi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Jn);const n=this.a,r=this.b,i=this.c;let o,a;oi.subVectors(r,n),ai.subVectors(i,n),li.subVectors(e,n);const s=oi.dot(li),l=ai.dot(li);if(s<=0&&l<=0)return t.copy(n);ci.subVectors(e,r);const c=oi.dot(ci),u=ai.dot(ci);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(oi,o);ui.subVectors(e,i);const d=oi.dot(ui),f=ai.dot(ui);if(f>=0&&d<=f)return t.copy(i);const p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(ai,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return si.subVectors(i,r),a=(u-c)/(u-c+(d-f)),t.copy(r).addScaledVector(si,a);const g=1/(m+p+h);return o=p*g,a=h*g,t.copy(n).addScaledVector(oi,o).addScaledVector(ai,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fi={h:0,s:0,l:0},pi={h:0,s:0,l:0};function mi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function gi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function yi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class vi{constructor(e,t,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Nn.euclideanModulo(e,1),t=Nn.clamp(t,0,1),n=Nn.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=mi(i,r,e+1/3),this.g=mi(i,r,e),this.b=mi(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=di[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=gi(e.r),this.g=gi(e.g),this.b=gi(e.b),this}copyLinearToSRGB(e){return this.r=yi(e.r),this.g=yi(e.g),this.b=yi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const l=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=l<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(fi),fi.h+=e,fi.s+=t,fi.l+=n,this.setHSL(fi.h,fi.s,fi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(fi),e.getHSL(pi);const n=Nn.lerp(fi.h,pi.h,t),r=Nn.lerp(fi.s,pi.s,t),i=Nn.lerp(fi.l,pi.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}vi.NAMES=di,vi.prototype.r=1,vi.prototype.g=1,vi.prototype.b=1;class _i{constructor(e,t,n,r,i,o=0){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Jn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new vi,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let bi=0;function xi(){Object.defineProperty(this,"id",{value:bi++}),this.uuid=Nn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=b,this.side=p,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=R,this.blendDst=L,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=An,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function wi(e){xi.call(this),this.type="MeshBasicMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}xi.prototype=Object.assign(Object.create(Bn.prototype),{constructor:xi,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===y;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(xi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),wi.prototype=Object.create(xi.prototype),wi.prototype.constructor=wi,wi.prototype.isMeshBasicMaterial=!0,wi.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const Si=new Jn,Ai=new Un;function Ei(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0}function Mi(e,t,n){Ei.call(this,new Int8Array(e),t,n)}function Ci(e,t,n){Ei.call(this,new Uint8Array(e),t,n)}function Ti(e,t,n){Ei.call(this,new Uint8ClampedArray(e),t,n)}function Pi(e,t,n){Ei.call(this,new Int16Array(e),t,n)}function Di(e,t,n){Ei.call(this,new Uint16Array(e),t,n)}function ki(e,t,n){Ei.call(this,new Int32Array(e),t,n)}function Oi(e,t,n){Ei.call(this,new Uint32Array(e),t,n)}function Ii(e,t,n){Ei.call(this,new Uint16Array(e),t,n)}function Ri(e,t,n){Ei.call(this,new Float32Array(e),t,n)}function Li(e,t,n){Ei.call(this,new Float64Array(e),t,n)}function Bi(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(Ei.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ei.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new vi),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Un),t[n++]=i.x,t[n++]=i.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Jn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Zn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix3(e),this.setXY(t,Ai.x,Ai.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix3(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)Si.x=this.getX(t),Si.y=this.getY(t),Si.z=this.getZ(t),Si.applyMatrix4(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)Si.x=this.getX(t),Si.y=this.getY(t),Si.z=this.getZ(t),Si.applyNormalMatrix(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)Si.x=this.getX(t),Si.y=this.getY(t),Si.z=this.getZ(t),Si.transformDirection(e),this.setXYZ(t,Si.x,Si.y,Si.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Mi.prototype=Object.create(Ei.prototype),Mi.prototype.constructor=Mi,Ci.prototype=Object.create(Ei.prototype),Ci.prototype.constructor=Ci,Ti.prototype=Object.create(Ei.prototype),Ti.prototype.constructor=Ti,Pi.prototype=Object.create(Ei.prototype),Pi.prototype.constructor=Pi,Di.prototype=Object.create(Ei.prototype),Di.prototype.constructor=Di,ki.prototype=Object.create(Ei.prototype),ki.prototype.constructor=ki,Oi.prototype=Object.create(Ei.prototype),Oi.prototype.constructor=Oi,Ii.prototype=Object.create(Ei.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isFloat16BufferAttribute=!0,Ri.prototype=Object.create(Ei.prototype),Ri.prototype.constructor=Ri,Li.prototype=Object.create(Ei.prototype),Li.prototype.constructor=Li;const zi={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Fi(e,t){return new zi[e](t)}let Ni=0;const Ui=new Er,ji=new $r,Vi=new Jn,Gi=new er,Hi=new er,Wi=new Jn;function qi(){Object.defineProperty(this,"id",{value:Ni++}),this.uuid=Nn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}qi.prototype=Object.assign(Object.create(Bn.prototype),{constructor:qi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(Bi(e)>65535?Oi:Di)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new jn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Ui.makeRotationX(e),this.applyMatrix4(Ui),this},rotateY:function(e){return Ui.makeRotationY(e),this.applyMatrix4(Ui),this},rotateZ:function(e){return Ui.makeRotationZ(e),this.applyMatrix4(Ui),this},translate:function(e,t,n){return Ui.makeTranslation(e,t,n),this.applyMatrix4(Ui),this},scale:function(e,t,n){return Ui.makeScale(e,t,n),this.applyMatrix4(Ui),this},lookAt:function(e){return ji.lookAt(e),ji.updateMatrix(),this.applyMatrix4(ji.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vi).negate(),this.translate(Vi.x,Vi.y,Vi.z),this},setFromPoints:function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ri(t,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new er);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Jn(-1/0,-1/0,-1/0),new Jn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Gi.setFromBufferAttribute(n),this.morphTargetsRelative?(Wi.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint(Wi),Wi.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint(Wi)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Jn,1/0);if(e){const n=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Hi.setFromBufferAttribute(n),this.morphTargetsRelative?(Wi.addVectors(Gi.min,Hi.min),Gi.expandByPoint(Wi),Wi.addVectors(Gi.max,Hi.max),Gi.expandByPoint(Wi)):(Gi.expandByPoint(Hi.min),Gi.expandByPoint(Hi.max))}Gi.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Wi.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Wi));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)Wi.fromBufferAttribute(o,t),a&&(Vi.fromBufferAttribute(e,t),Wi.add(Vi)),r=Math.max(r,n.distanceToSquared(Wi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ei(new Float32Array(4*a),4));const s=t.tangent.array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new Jn,c[e]=new Jn;const u=new Jn,h=new Jn,d=new Jn,f=new Un,p=new Un,m=new Un,g=new Jn,y=new Jn;function v(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),y.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)v(n[e+0],n[e+1],n[e+2])}const b=new Jn,x=new Jn,w=new Jn,S=new Jn;function A(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];b.copy(t),b.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(c[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)A(n[e+0]),A(n[e+1]),A(n[e+2])}},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ei(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Jn,i=new Jn,o=new Jn,a=new Jn,s=new Jn,l=new Jn,c=new Jn,u=new Jn;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=a[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Wi.fromBufferAttribute(e,t),Wi.normalize(),e.setXYZ(t,Wi.x,Wi.y,Wi.z)},toNonIndexed:function(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let e=0,i=t.length;e<i;e++){a=t[e]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Ei(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qi,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t],i=r.toJSON(e.data);""!==r.name&&(i.name=r.name),e.data.attributes[t]=i}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t],i=r.toJSON(e.data);""!==r.name&&(i.name=r.name),o.push(i)}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e},clone:function(){return(new qi).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Zi=new Er,Xi=new Ar,Yi=new gr,$i=new Jn,Ji=new Jn,Ki=new Jn,Qi=new Jn,eo=new Jn,to=new Jn,no=new Jn,ro=new Jn,io=new Jn,oo=new Un,ao=new Un,so=new Un,lo=new Jn,co=new Jn;function uo(e=new qi,t=new wi){$r.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}function ho(e,t,n,r,i,o,a,s,l,c,u,h){$i.fromBufferAttribute(i,c),Ji.fromBufferAttribute(i,u),Ki.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){no.set(0,0,0),ro.set(0,0,0),io.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(Qi.fromBufferAttribute(n,c),eo.fromBufferAttribute(n,u),to.fromBufferAttribute(n,h),a?(no.addScaledVector(Qi,t),ro.addScaledVector(eo,t),io.addScaledVector(to,t)):(no.addScaledVector(Qi.sub($i),t),ro.addScaledVector(eo.sub(Ji),t),io.addScaledVector(to.sub(Ki),t)))}$i.add(no),Ji.add(ro),Ki.add(io)}e.isSkinnedMesh&&(e.boneTransform(c,$i),e.boneTransform(u,Ji),e.boneTransform(h,Ki));const f=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===m?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==g,s),null===l)return null;co.copy(s),co.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(co);return c<n.near||c>n.far?null:{distance:c,point:co.clone(),object:e}}(e,t,n,r,$i,Ji,Ki,lo);if(f){s&&(oo.fromBufferAttribute(s,c),ao.fromBufferAttribute(s,u),so.fromBufferAttribute(s,h),f.uv=hi.getUV(lo,$i,Ji,Ki,oo,ao,so,new Un)),l&&(oo.fromBufferAttribute(l,c),ao.fromBufferAttribute(l,u),so.fromBufferAttribute(l,h),f.uv2=hi.getUV(lo,$i,Ji,Ki,oo,ao,so,new Un));const e=new _i(c,u,h);hi.getNormal($i,Ji,Ki,e.normal),f.face=e}return f}uo.prototype=Object.assign(Object.create($r.prototype),{constructor:uo,isMesh:!0,copy:function(e){return $r.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Yi.copy(n.boundingSphere),Yi.applyMatrix4(i),!1===e.ray.intersectsSphere(Yi))return;if(Zi.copy(i).invert(),Xi.copy(e.ray).applyMatrix4(Zi),null!==n.boundingBox&&!1===Xi.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=r[f.materialIndex];for(let n=Math.max(f.start,d.start),r=Math.min(f.start+f.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=ho(this,p,e,Xi,a,s,l,c,u,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=f.materialIndex,t.push(o))}}else for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),f=i.getX(n+2);o=ho(this,r,e,Xi,a,s,l,c,u,h,d,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],f=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3)o=ho(this,f,e,Xi,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}else for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3)o=ho(this,r,e,Xi,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class fo extends qi{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,r,i,o,f,p,m,g,y){const v=o/m,_=f/g,b=o/2,x=f/2,w=p/2,S=m+1,A=g+1;let E=0,M=0;const C=new Jn;for(let o=0;o<A;o++){const a=o*_-x;for(let s=0;s<S;s++){const h=s*v-b;C[e]=h*r,C[t]=a*i,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/m),u.push(1-o/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),o=h+(t+1)+S*e;s.push(n,r,o),s.push(r,i,o),M+=6}a.addGroup(d,M,y),d+=M,h+=E}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Ri(l,3)),this.setAttribute("normal",new Ri(c,3)),this.setAttribute("uv",new Ri(u,2))}}function po(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function mo(e){const t={};for(let n=0;n<e.length;n++){const r=po(e[n]);for(const e in r)t[e]=r[e]}return t}const go={clone:po,merge:mo};function yo(e){xi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function vo(){$r.call(this),this.type="Camera",this.matrixWorldInverse=new Er,this.projectionMatrix=new Er,this.projectionMatrixInverse=new Er}function _o(e=50,t=1,n=.1,r=2e3){vo.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}yo.prototype=Object.create(xi.prototype),yo.prototype.constructor=yo,yo.prototype.isShaderMaterial=!0,yo.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=po(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},yo.prototype.toJSON=function(e){const t=xi.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},vo.prototype=Object.assign(Object.create($r.prototype),{constructor:vo,isCamera:!0,copy:function(e,t){return $r.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){$r.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){$r.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),_o.prototype=Object.assign(Object.create(vo.prototype),{constructor:_o,isPerspectiveCamera:!0,copy:function(e,t){return vo.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Nn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*Nn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Nn.RAD2DEG*Math.atan(Math.tan(.5*Nn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*Nn.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=$r.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const bo=90;function xo(e,t,n){if($r.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new _o(bo,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Jn(1,0,0)),this.add(r);const i=new _o(bo,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Jn(-1,0,0)),this.add(i);const o=new _o(bo,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Jn(0,1,0)),this.add(o);const a=new _o(bo,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Jn(0,-1,0)),this.add(a);const s=new _o(bo,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Jn(0,0,1)),this.add(s);const l=new _o(bo,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Jn(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}function wo(e,t,n,r,i,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:oe,a=void 0!==a?a:ze,Wn.call(this,e,t,n,r,i,o,a,s,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}xo.prototype=Object.create($r.prototype),xo.prototype.constructor=xo,wo.prototype=Object.create(Wn.prototype),wo.prototype.constructor=wo,wo.prototype.isCubeTexture=!0,Object.defineProperty(wo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});class So extends Xn{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),t=t||{},this.texture=new wo(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Fe,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new fo(5,5,5),a=new yo({name:"CubemapFromEquirect",uniforms:po(n),vertexShader:r,fragmentShader:i,side:m,blending:_});a.uniforms.tEquirect.value=t;const s=new uo(o,a),l=t.minFilter;return t.minFilter===we&&(t.minFilter=_e),new xo(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}function Ao(e,t,n,r,i,o,a,s,l,c,u,h){Wn.call(this,null,o,a,s,l,c,r,i,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:pe,this.minFilter=void 0!==c?c:pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Ao.prototype=Object.create(Wn.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isDataTexture=!0;const Eo=new gr,Mo=new Jn;class Co{constructor(e,t,n,r,i,o){this.planes=[void 0!==e?e:new ei,void 0!==t?t:new ei,void 0!==n?n:new ei,void 0!==r?r:new ei,void 0!==i?i:new ei,void 0!==o?o:new ei]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(a-r,u-s,p-h,v-m).normalize(),t[1].setComponents(a+r,u+s,p+h,v+m).normalize(),t[2].setComponents(a+i,u+l,p+d,v+g).normalize(),t[3].setComponents(a-i,u-l,p-d,v-g).normalize(),t[4].setComponents(a-o,u-c,p-f,v-y).normalize(),t[5].setComponents(a+o,u+c,p+f,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Eo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Eo)}intersectsSprite(e){return Eo.center.set(0,0,0),Eo.radius=.7071067811865476,Eo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Eo)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Mo.x=r.normal.x>0?e.max.x:e.min.x,Mo.y=r.normal.y>0?e.max.y:e.min.y,Mo.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Mo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}function To(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Po(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class Do extends qi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new Ri(f,3)),this.setAttribute("normal",new Ri(p,3)),this.setAttribute("uv",new Ri(m,2))}}const ko={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Oo={common:{diffuse:{value:new vi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new jn},uv2Transform:{value:new jn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Un(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new jn}},sprite:{diffuse:{value:new vi(15658734)},opacity:{value:1},center:{value:new Un(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new jn}}},Io={basic:{uniforms:mo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.fog]),vertexShader:ko.meshbasic_vert,fragmentShader:ko.meshbasic_frag},lambert:{uniforms:mo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.fog,Oo.lights,{emissive:{value:new vi(0)}}]),vertexShader:ko.meshlambert_vert,fragmentShader:ko.meshlambert_frag},phong:{uniforms:mo([Oo.common,Oo.specularmap,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,Oo.lights,{emissive:{value:new vi(0)},specular:{value:new vi(1118481)},shininess:{value:30}}]),vertexShader:ko.meshphong_vert,fragmentShader:ko.meshphong_frag},standard:{uniforms:mo([Oo.common,Oo.envmap,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.roughnessmap,Oo.metalnessmap,Oo.fog,Oo.lights,{emissive:{value:new vi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ko.meshphysical_vert,fragmentShader:ko.meshphysical_frag},toon:{uniforms:mo([Oo.common,Oo.aomap,Oo.lightmap,Oo.emissivemap,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.gradientmap,Oo.fog,Oo.lights,{emissive:{value:new vi(0)}}]),vertexShader:ko.meshtoon_vert,fragmentShader:ko.meshtoon_frag},matcap:{uniforms:mo([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,Oo.fog,{matcap:{value:null}}]),vertexShader:ko.meshmatcap_vert,fragmentShader:ko.meshmatcap_frag},points:{uniforms:mo([Oo.points,Oo.fog]),vertexShader:ko.points_vert,fragmentShader:ko.points_frag},dashed:{uniforms:mo([Oo.common,Oo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ko.linedashed_vert,fragmentShader:ko.linedashed_frag},depth:{uniforms:mo([Oo.common,Oo.displacementmap]),vertexShader:ko.depth_vert,fragmentShader:ko.depth_frag},normal:{uniforms:mo([Oo.common,Oo.bumpmap,Oo.normalmap,Oo.displacementmap,{opacity:{value:1}}]),vertexShader:ko.normal_vert,fragmentShader:ko.normal_frag},sprite:{uniforms:mo([Oo.sprite,Oo.fog]),vertexShader:ko.sprite_vert,fragmentShader:ko.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null}},vertexShader:ko.background_vert,fragmentShader:ko.background_frag},cube:{uniforms:mo([Oo.envmap,{opacity:{value:1}}]),vertexShader:ko.cube_vert,fragmentShader:ko.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ko.equirect_vert,fragmentShader:ko.equirect_frag},distanceRGBA:{uniforms:mo([Oo.common,Oo.displacementmap,{referencePosition:{value:new Jn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ko.distanceRGBA_vert,fragmentShader:ko.distanceRGBA_frag},shadow:{uniforms:mo([Oo.lights,Oo.fog,{color:{value:new vi(0)},opacity:{value:1}}]),vertexShader:ko.shadow_vert,fragmentShader:ko.shadow_frag}};function Ro(e,t,n,r,i){const o=new vi(0);let a,s,l=0,c=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),l=t,d(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(o,l)},render:function(n,i,f,g){let y=!0===i.isScene?i.background:null;y&&y.isTexture&&(y=t.get(y));const v=e.xr,_=v.getSession&&v.getSession();_&&"additive"===_.environmentBlendMode&&(y=null),null===y?d(o,l):y&&y.isColor&&(d(y,1),g=!0),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.mapping===ce)?(void 0===s&&(s=new uo(new fo(1,1,1),new yo({name:"BackgroundCubeMaterial",uniforms:po(Io.cube.uniforms),vertexShader:Io.cube.vertexShader,fragmentShader:Io.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),y.isWebGLCubeRenderTarget&&(y=y.texture),s.material.uniforms.envMap.value=y,s.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y._needsFlipEnvMap?-1:1,c===y&&u===y.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=y,u=y.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):y&&y.isTexture&&(void 0===a&&(a=new uo(new Do(2,2),new yo({name:"BackgroundMaterial",uniforms:po(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),c===y&&u===y.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=y,u=y.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Lo(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=d(null);let c=l;function u(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function v(){_(),c!==l&&(c=l,u(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,v,_){let b=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=d(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(v,h,l);c!==t&&(c=t,u(c.object)),b=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],o=r[e];if(void 0===t)return!0;if(t.attribute!==o)return!0;if(t.data!==o.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(v,_),b&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],o={};o.attribute=t,t.data&&(o.data=t.data),n[e]=o,i++}c.attributes=n,c.attributesNum=i,c.index=t}(v,_)}else{const e=!0===l.wireframe;c.geometry===v.id&&c.program===h.id&&c.wireframe===e||(c.geometry=v.id,c.program=h.id,c.wireframe=e,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==_&&n.update(_,34963),b&&(function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r>=0){const o=l[t];if(void 0!==o){const t=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const l=a.buffer,c=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(r),e.bindBuffer(34962,l),y(r,i,c,t,a*u,h*u)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(r),e.bindBuffer(34962,l),y(r,i,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r+0,4,a,!1,64,0),e.vertexAttribPointer(r+1,4,a,!1,64,16),e.vertexAttribPointer(r+2,4,a,!1,64,32),e.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}g()}(i,l,h,v),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:v,resetDefaultState:_,dispose:function(){v();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:g}}function Bo(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function zo(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),f=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=u>0,v=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;const n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:y&&v,maxSamples:o?e.getParameter(36183):0}}function Fo(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new ei,s=new jn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!f)o?u(null):c();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=u(h,a,t,s);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function No(e){let t=new WeakMap;function n(e,t){return t===se?e.mapping=oe:t===le&&(e.mapping=ae),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===se||o===le){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=e.getRenderList(),s=e.getRenderTarget(),l=new So(o.height/2);return l.fromEquirectangularTexture(e,i),t.set(i,l),e.setRenderTarget(s),e.setRenderList(a),i.addEventListener("dispose",r),n(l.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function Uo(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function jo(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Bi(n)>65535?Oi:Di)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Vo(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,r*s,c),n.update(l,o,c)}}function Go(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ho(e,t){return e[0]-t[0]}function Wo(e,t){return Math.abs(t[1])-Math.abs(e[1])}function qo(e){const t={},n=new Float32Array(8),r=[];for(let e=0;e<8;e++)r[e]=[e,0];return{update:function(i,o,a,s){const l=i.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[o.id];if(void 0===u){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[o.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort(Wo);for(let e=0;e<8;e++)e<c&&u[e][1]?(r[e][0]=u[e][0],r[e][1]=u[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(Ho);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let f=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],a=t[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[i]&&o.setAttribute("morphTarget"+e,h[i]),d&&o.getAttribute("morphNormal"+e)!==d[i]&&o.setAttribute("morphNormal"+e,d[i]),n[e]=a,f+=a):(h&&!0===o.hasAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),d&&!0===o.hasAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const p=o.morphTargetsRelative?1:1-f;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Zo(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}function Xo(e=null,t=1,n=1,r=1){Wn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pe,this.minFilter=pe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Yo(e=null,t=1,n=1,r=1){Wn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pe,this.minFilter=pe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Io.physical={uniforms:mo([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Un(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new vi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ko.meshphysical_vert,fragmentShader:ko.meshphysical_frag},Xo.prototype=Object.create(Wn.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isDataTexture2DArray=!0,Yo.prototype=Object.create(Wn.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isDataTexture3D=!0;const $o=new Wn,Jo=new Xo,Ko=new Yo,Qo=new wo,ea=[],ta=[],na=new Float32Array(16),ra=new Float32Array(9),ia=new Float32Array(4);function oa(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=ea[i];if(void 0===o&&(o=new Float32Array(i),ea[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function aa(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function sa(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function la(e,t){let n=ta[t];void 0===n&&(n=new Int32Array(t),ta[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ca(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ua(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(aa(n,t))return;e.uniform2fv(this.addr,t),sa(n,t)}}function ha(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(aa(n,t))return;e.uniform3fv(this.addr,t),sa(n,t)}}function da(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(aa(n,t))return;e.uniform4fv(this.addr,t),sa(n,t)}}function fa(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(aa(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),sa(n,t)}else{if(aa(n,r))return;ia.set(r),e.uniformMatrix2fv(this.addr,!1,ia),sa(n,r)}}function pa(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(aa(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),sa(n,t)}else{if(aa(n,r))return;ra.set(r),e.uniformMatrix3fv(this.addr,!1,ra),sa(n,r)}}function ma(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(aa(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),sa(n,t)}else{if(aa(n,r))return;na.set(r),e.uniformMatrix4fv(this.addr,!1,na),sa(n,r)}}function ga(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||$o,i)}function ya(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Jo,i)}function va(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ko,i)}function _a(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Qo,i)}function ba(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function xa(e,t){const n=this.cache;aa(n,t)||(e.uniform2iv(this.addr,t),sa(n,t))}function wa(e,t){const n=this.cache;aa(n,t)||(e.uniform3iv(this.addr,t),sa(n,t))}function Sa(e,t){const n=this.cache;aa(n,t)||(e.uniform4iv(this.addr,t),sa(n,t))}function Aa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ea(e,t){e.uniform1fv(this.addr,t)}function Ma(e,t){e.uniform1iv(this.addr,t)}function Ca(e,t){e.uniform2iv(this.addr,t)}function Ta(e,t){e.uniform3iv(this.addr,t)}function Pa(e,t){e.uniform4iv(this.addr,t)}function Da(e,t){const n=oa(t,this.size,2);e.uniform2fv(this.addr,n)}function ka(e,t){const n=oa(t,this.size,3);e.uniform3fv(this.addr,n)}function Oa(e,t){const n=oa(t,this.size,4);e.uniform4fv(this.addr,n)}function Ia(e,t){const n=oa(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ra(e,t){const n=oa(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function La(e,t){const n=oa(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ba(e,t,n){const r=t.length,i=la(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||$o,i[e])}function za(e,t,n){const r=t.length,i=la(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||Qo,i[e])}function Fa(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ca;case 35664:return ua;case 35665:return ha;case 35666:return da;case 35674:return fa;case 35675:return pa;case 35676:return ma;case 5124:case 35670:return ba;case 35667:case 35671:return xa;case 35668:case 35672:return wa;case 35669:case 35673:return Sa;case 5125:return Aa;case 35678:case 36198:case 36298:case 36306:case 35682:return ga;case 35679:case 36299:case 36307:return va;case 35680:case 36300:case 36308:case 36293:return _a;case 36289:case 36303:case 36311:case 36292:return ya}}(t.type)}function Na(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ea;case 35664:return Da;case 35665:return ka;case 35666:return Oa;case 35674:return Ia;case 35675:return Ra;case 35676:return La;case 5124:case 35670:return Ma;case 35667:case 35671:return Ca;case 35668:case 35672:return Ta;case 35669:case 35673:return Pa;case 35678:case 36198:case 36298:case 36306:case 35682:return Ba;case 35680:case 36300:case 36308:case 36293:return za}}(t.type)}function Ua(e){this.id=e,this.seq=[],this.map={}}Na.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),sa(t,e)},Ua.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const ja=/(\w+)(\])?(\[|\.)?/g;function Va(e,t){e.seq.push(t),e.map[t.id]=t}function Ga(e,t,n){const r=e.name,i=r.length;for(ja.lastIndex=0;;){const o=ja.exec(r),a=ja.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){Va(n,void 0===c?new Fa(s,e,t):new Na(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Ua(s),Va(n,e)),n=e}}}function Ha(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Ga(n,e.getUniformLocation(t,n.name),this)}}function Wa(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Ha.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Ha.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},Ha.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},Ha.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let qa=0;function Za(e){switch(e){case $t:return["Linear","( value )"];case Jt:return["sRGB","( value )"];case Qt:return["RGBE","( value )"];case tn:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Kt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case en:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Xa(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Ya(e,t){const n=Za(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function $a(e,t){const n=Za(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ja(e,t){let n;switch(t){case Q:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ka(e){return""!==e}function Qa(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function es(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ts=/^[ \t]*#include +<([\w\d./]+)>/gm;function ns(e){return e.replace(ts,rs)}function rs(e,t){const n=ko[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ns(n)}const is=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,os=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function as(e){return e.replace(os,ls).replace(is,ss)}function ss(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ls(0,t,n,r)}function ls(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function cs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function us(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===f&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case oe:case ae:t="ENVMAP_TYPE_CUBE";break;case ce:case ue:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ae:case ue:t="ENVMAP_MODE_REFRACTION"}return t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Y:t="ENVMAP_BLENDING_MULTIPLY";break;case $:t="ENVMAP_BLENDING_MIX";break;case J:t="ENVMAP_BLENDING_ADD"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ka).join("\n")}(n),y=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),v=i.createProgram();let _,b,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=[y].filter(Ka).join("\n"),_.length>0&&(_+="\n"),b=[g,y].filter(Ka).join("\n"),b.length>0&&(b+="\n")):(_=[cs(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ka).join("\n"),b=[g,cs(n),"#define SHADER_NAME "+n.shaderName,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?ko.tonemapping_pars_fragment:"",n.toneMapping!==K?Ja("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",ko.encodings_pars_fragment,n.map?Ya("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ya("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ya("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ya("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ya("lightMapTexelToLinear",n.lightMapEncoding):"",$a("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ka).join("\n")),a=ns(a),a=Qa(a,n),a=es(a,n),s=ns(s),s=Qa(s,n),s=es(s,n),a=as(a),s=as(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",_=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,b=["#define varying in",n.glslVersion===Ln?"":"out highp vec4 pc_fragColor;",n.glslVersion===Ln?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const w=x+b+s,S=Wa(i,35633,x+_+a),A=Wa(i,35632,w);if(i.attachShader(v,S),i.attachShader(v,A),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(v).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(A).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(v,35714)){r=!1;const t=Xa(i,S,"vertex"),n=Xa(i,A,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(v,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:_},fragmentShader:{log:n,prefix:b}})}let E,M;return i.deleteShader(S),i.deleteShader(A),this.getUniforms=function(){return void 0===E&&(E=new Ha(i,v)),E},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,v)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=qa++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=A,this}function hs(e,t,n,r,i,o){const a=[],s=r.isWebGL2,l=r.logarithmicDepthBuffer,c=r.floatVertexTextures,u=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function y(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=$t,t}return{getParameters:function(i,a,p,v,_){const b=v.fog,x=i.isMeshStandardMaterial?v.environment:null,w=t.get(i.envMap||x),S=f[i.type],A=_.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=u,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(_):0;let E,M;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),S){const e=Io[S];E=e.vertexShader,M=e.fragmentShader}else E=i.vertexShader,M=i.fragmentShader;const C=e.getRenderTarget();return{isWebGL2:s,shaderID:S,shaderName:i.type,vertexShader:E,fragmentShader:M,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:h,outputEncoding:null!==C?y(C.texture):e.outputEncoding,map:!!i.map,mapEncoding:y(i.map),matcap:!!i.matcap,matcapEncoding:y(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:y(w),envMapCubeUV:!!w&&(w.mapping===ce||w.mapping===ue),lightMap:!!i.lightMap,lightMapEncoding:y(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:y(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===ln,tangentSpaceNormalMap:i.normalMapType===sn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:l,skinning:i.skinning&&A>0,maxBones:A,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:K,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===g,flipSided:i.side===m,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Io[t];n=go.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=a.length;e<t;e++){const t=a[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new us(e,n,t,i),a.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function ds(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function fs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ps(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ms(e){const t=[];let n=0;const r=[],i=[],o={id:-1};function a(r,i,a,s,l,c){let u=t[n];const h=e.get(a);return void 0===u?(u={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:l,group:c},t[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(e,t,n,o,s,l){const c=a(e,t,n,o,s,l);(!0===n.transparent?i:r).push(c)},unshift:function(e,t,n,o,s,l){const c=a(e,t,n,o,s,l);(!0===n.transparent?i:r).unshift(c)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||fs),i.length>1&&i.sort(t||ps)}}}function gs(e){let t=new WeakMap;return{get:function(n,r){const i=t.get(n);let o;return void 0===i?(o=new ms(e),t.set(n,new WeakMap),t.get(n).set(r,o)):(o=i.get(r),void 0===o&&(o=new ms(e),i.set(r,o))),o},dispose:function(){t=new WeakMap}}}function ys(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Jn,color:new vi};break;case"SpotLight":n={position:new Jn,direction:new Jn,color:new vi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Jn,color:new vi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Jn,skyColor:new vi,groundColor:new vi};break;case"RectAreaLight":n={color:new vi,position:new Jn,halfWidth:new Jn,halfHeight:new Jn}}return e[t.id]=n,n}}}let vs=0;function _s(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function bs(e,t){const n=new ys,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Un};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Un,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new Jn);const o=new Jn,a=new Er,s=new Er;return{setup:function(o){let a=0,s=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0;o.sort(_s);for(let e=0,t=o.length;e<t;e++){const t=o[e],y=t.color,v=t.intensity,_=t.distance,b=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=y.r*v,s+=y.g*v,l+=y.b*v;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],v);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=b,i.directionalShadowMatrix[c]=t.shadow.matrix,p++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(y).multiplyScalar(v),e.distance=_,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=b,i.spotShadowMatrix[h]=t.shadow.matrix,g++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(y).multiplyScalar(v),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[u]=n,i.pointShadowMap[u]=b,i.pointShadowMatrix[u]=t.shadow.matrix,m++}i.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(v),e.groundColor.copy(t.groundColor).multiplyScalar(v),i.hemi[f]=e,f++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Oo.LTC_FLOAT_1,i.rectAreaLTC2=Oo.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Oo.LTC_HALF_1,i.rectAreaLTC2=Oo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=l;const y=i.hash;y.directionalLength===c&&y.pointLength===u&&y.spotLength===h&&y.rectAreaLength===d&&y.hemiLength===f&&y.numDirectionalShadows===p&&y.numPointShadows===m&&y.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=d,i.point.length=u,i.hemi.length=f,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,y.directionalLength=c,y.pointLength=u,y.spotLength=h,y.rectAreaLength=d,y.hemiLength=f,y.numDirectionalShadows=p,y.numPointShadows=m,y.numSpotShadows=g,i.version=vs++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(d.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:i}}function xs(e,t){const n=new bs(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function ws(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new xs(e,t),n.set(r,[]),n.get(r).push(o)):i>=n.get(r).length?(o=new xs(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}function Ss(e){xi.call(this),this.type="MeshDepthMaterial",this.depthPacking=on,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function As(e){xi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Jn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function Es(e,t,n){let r=new Co;const i=new Un,o=new Un,a=new Zn,s=[],l=[],c={},u={0:m,1:p,2:g},d=new yo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Un},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=d.clone();y.defines.HORIZONTAL_PASS=1;const v=new qi;v.setAttribute("position",new Ei(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new uo(v,d),x=this;function w(n,r){const i=t.update(b);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,b,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,y,b,null)}function S(e,t,n){const r=e<<0|t<<1|n<<2;let i=s[r];return void 0===i&&(i=new Ss({depthPacking:an,morphTargets:e,skinning:t}),s[r]=i),i}function A(e,t,n){const r=e<<0|t<<1|n<<2;let i=l[r];return void 0===i&&(i=new As({morphTargets:e,skinning:t}),l[r]=i),i}function E(t,n,r,i,o,a,s){let l=null,h=S,d=t.customDepthMaterial;if(!0===i.isPointLight&&(h=A,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=h(e,i,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=l.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=l.clone(),n[t]=i),l=i}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=s===f?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:u[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function M(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===f)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=E(n,r,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=E(n,r,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)M(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,s,l){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(_),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let c=0,u=t.length;c<u;c++){const u=t[c],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const p=h.getFrameExtents();if(i.multiply(p),o.copy(h.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/p.x),i.x=o.x*p.x,h.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/p.y),i.y=o.y*p.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===f){const e={minFilter:_e,magFilter:_e,format:Fe};h.map=new Xn(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Xn(i.x,i.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:pe,magFilter:pe,format:Fe};h.map=new Xn(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const m=h.getViewportCount();for(let e=0;e<m;e++){const t=h.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),h.updateMatrices(u,e),r=h.getFrustum(),M(s,l,h.camera,u,this.type)}h.isPointLightShadow||this.type!==f||w(h,l),h.needsUpdate=!1}x.needsUpdate=!1,e.setRenderTarget(c,u,h)}}function Ms(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new Zn;let r=null;const i=new Zn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?pe(2929):me(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case j:e.depthFunc(512);break;case V:e.depthFunc(519);break;case G:e.depthFunc(513);break;case H:e.depthFunc(515);break;case W:e.depthFunc(514);break;case q:e.depthFunc(518);break;case Z:e.depthFunc(516);break;case X:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?pe(2960):me(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}};let u={},h=null,d=null,f=null,p=null,y=null,v=null,Y=null,$=null,J=null,K=!1,Q=null,ee=null,te=null,ne=null,re=null;const ie=e.getParameter(35661);let oe=!1,ae=0;const se=e.getParameter(7938);-1!==se.indexOf("WebGL")?(ae=parseFloat(/^WebGL (\d)/.exec(se)[1]),oe=ae>=1):-1!==se.indexOf("OpenGL ES")&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(se)[1]),oe=ae>=2);let le=null,ce={};const ue=new Zn,he=new Zn;function de(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}const fe={};function pe(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function me(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}fe[3553]=de(3553,3553,1),fe[34067]=de(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),c.setClear(0),pe(2929),o.setFunc(H),_e(!1),be(s),pe(2884),ve(_);const ge={[E]:32774,[M]:32778,[C]:32779};if(r)ge[T]=32775,ge[P]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(ge[T]=e.MIN_EXT,ge[P]=e.MAX_EXT)}const ye={[D]:0,[k]:1,[O]:768,[R]:770,[U]:776,[F]:774,[B]:772,[I]:769,[L]:771,[N]:775,[z]:773};function ve(t,n,r,i,o,a,s,l){if(t!==_){if(d||(pe(3042),d=!0),t===A)o=o||n,a=a||r,s=s||i,n===p&&o===Y||(e.blendEquationSeparate(ge[n],ge[o]),p=n,Y=o),r===y&&i===v&&a===$&&s===J||(e.blendFuncSeparate(ye[r],ye[i],ye[a],ye[s]),y=r,v=i,$=a,J=s),f=t,K=null;else if(t!==f||l!==K){if(p===E&&Y===E||(e.blendEquation(32774),p=E,Y=E),l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case w:e.blendFuncSeparate(0,0,769,771);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case w:e.blendFunc(0,769);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,v=null,$=null,J=null,f=t,K=l}}else d&&(me(3042),d=!1)}function _e(t){Q!==t&&(t?e.frontFace(2304):e.frontFace(2305),Q=t)}function be(t){t!==a?(pe(2884),t!==ee&&(t===s?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):me(2884),ee=t}function xe(t,n,r){t?(pe(32823),ne===n&&re===r||(e.polygonOffset(n,r),ne=n,re=r)):me(32823)}function we(t){void 0===t&&(t=33984+ie-1),le!==t&&(e.activeTexture(t),le=t)}return{buffers:{color:i,depth:o,stencil:c},enable:pe,disable:me,useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:ve,setMaterial:function(e,t){e.side===g?me(2884):pe(2884);let n=e.side===m;t&&(n=!n),_e(n),e.blending===b&&!1===e.transparent?ve(_):ve(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),xe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:_e,setCullFace:be,setLineWidth:function(t){t!==te&&(oe&&e.lineWidth(t),te=t)},setPolygonOffset:xe,setScissorTest:function(e){e?pe(3089):me(3089)},activeTexture:we,bindTexture:function(t,n){null===le&&we();let r=ce[le];void 0===r&&(r={type:void 0,texture:void 0},ce[le]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||fe[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=ce[le];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ue.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ue.copy(t))},viewport:function(t){!1===he.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),he.copy(t))},reset:function(){u={},le=null,ce={},h=null,d=null,f=null,p=null,y=null,v=null,Y=null,$=null,J=null,K=!1,Q=null,ee=null,te=null,ne=null,re=null,i.reset(),o.reset(),c.reset()}}}function Cs(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Nn.floorPowerOfTwo:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===f&&(f=m(o,a));const s=n?m(o,a):f;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return Nn.isPowerOfTwo(e.width)&&Nn.isPowerOfTwo(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==pe&&e.minFilter!==_e}function _(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function b(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function x(e){return e===pe||e===me||e===ye?9728:9729}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(t.texture),r.remove(t)}}(n),a.memory.textures--}let A=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void k(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function M(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;D(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=a||l?l?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,c);const h=u[0],d=y(h)||s,f=o.convert(r.format),p=o.convert(r.type),m=b(r.internalFormat,f,p);let x;if(P(34067,r,d),a){for(let e=0;e<6;e++){x=u[e].mipmaps;for(let t=0;t<x.length;t++){const i=x[t];r.format!==Fe&&r.format!==ze?null!==f?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,f,p,i.data)}}t.__maxMipLevel=x.length-1}else{x=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,p,u[e].data);for(let t=0;t<x.length;t++){const r=x[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,p,r.data)}}else{n.texImage2D(34069+e,0,m,f,p,u[e]);for(let t=0;t<x.length;t++){const r=x[t];n.texImage2D(34069+e,t+1,m,f,p,r.image[e])}}t.__maxMipLevel=x.length}v(r,d)&&_(34067,r,h.width,h.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const C={[he]:10497,[de]:33071,[fe]:33648},T={[pe]:9728,[me]:9984,[ye]:9986,[_e]:9729,[be]:9985,[we]:9987};function P(n,o,a){a?(e.texParameteri(n,10242,C[o.wrapS]),e.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,C[o.wrapR]),e.texParameteri(n,10240,T[o.magFilter]),e.texParameteri(n,10241,T[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===de&&o.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(o.magFilter)),e.texParameteri(n,10241,x(o.minFilter)),o.minFilter!==pe&&o.minFilter!==_e&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=t.get("EXT_texture_filter_anisotropic");if(l){if(o.type===De&&null===t.get("OES_texture_float_linear"))return;if(o.type===ke&&null===(s||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function D(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),a.memory.textures++)}function k(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),D(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);const l=function(e){return!s&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==pe&&e.minFilter!==_e)}(r)&&!1===y(r.image),c=g(r.image,l,!1,u),h=y(c)||s,d=o.convert(r.format);let f,p=o.convert(r.type),m=b(r.internalFormat,d,p);P(a,r,h);const x=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===De?36012:r.type===Pe?33190:r.type===Le?35056:33189:r.type===De&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ve&&6402===m&&r.type!==Ce&&r.type!==Pe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ce,p=o.convert(r.type)),r.format===Ge&&6402===m&&(m=34041,r.type!==Le&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Le,p=o.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,p,null);else if(r.isDataTexture)if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,p,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)f=x[e],r.format!==Fe&&r.format!==ze?null!==d?n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);t.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,m,d,p,f);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,d,p,c),t.__maxMipLevel=0;v(r,h)&&_(a,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function O(t,i,a,s){const l=o.convert(i.texture.format),c=o.convert(i.texture.type),u=b(i.texture.internalFormat,l,c);n.texImage2D(s,0,u,i.width,i.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===De?i=36012:t.type===Pe&&(i=33190));const r=R(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=R(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=o.convert(n.texture.format),i=o.convert(n.texture.type),a=b(n.texture.internalFormat,t,i);if(r){const t=R(n);e.renderbufferStorageMultisample(36161,t,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function R(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let L=!1,B=!1;this.allocateTextureUnit=function(){const e=A;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),A+=1,e},this.resetTextureUnits=function(){A=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?k(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?k(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(t){const i=r.get(t),l=r.get(t.texture);t.addEventListener("dispose",S),l.__webglTexture=e.createTexture(),a.memory.textures++;const c=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,h=y(t)||s;if(!s||t.texture.format!==ze||t.texture.type!==De&&t.texture.type!==ke||(t.texture.format=Fe,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){i.__webglFramebuffer=[];for(let t=0;t<6;t++)i.__webglFramebuffer[t]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),u)if(s){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const n=o.convert(t.texture.format),r=o.convert(t.texture.type),a=b(t.texture.internalFormat,n,r),s=R(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),I(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),P(34067,t.texture,h);for(let e=0;e<6;e++)O(i.__webglFramebuffer[e],t,36064,34069+e);v(t.texture,h)&&_(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),P(3553,t.texture,h),O(i.__webglFramebuffer,t,36064,3553),v(t.texture,h)&&_(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&function(t){const n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);const i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ve)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)e.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),I(n.__webglDepthbuffer[r],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),I(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(v(t,y(e)||s)){const i=e.isWebGLCubeRenderTarget?34067:3553,o=r.get(t).__webglTexture;n.bindTexture(i,o),_(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const i=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),M(e,t)}}function Ts(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===Ae)return 5121;if(e===Oe)return 32819;if(e===Ie)return 32820;if(e===Re)return 33635;if(e===Ee)return 5120;if(e===Me)return 5122;if(e===Ce)return 5123;if(e===Te)return 5124;if(e===Pe)return 5125;if(e===De)return 5126;if(e===ke)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Be)return 6406;if(e===ze)return 6407;if(e===Fe)return 6408;if(e===Ne)return 6409;if(e===Ue)return 6410;if(e===Ve)return 6402;if(e===Ge)return 34041;if(e===He)return 6403;if(e===We)return 36244;if(e===qe)return 33319;if(e===Ze)return 33320;if(e===Xe)return 36248;if(e===Ye)return 36249;if(e===$e||e===Je||e===Ke||e===Qe){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===$e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Je)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ke)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Qe)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===nt||e===rt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===et)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===rt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===it)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===ot||e===at)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===ot)return n.COMPRESSED_RGB8_ETC2;if(e===at)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===st||e===lt||e===ct||e===ut||e===ht||e===dt||e===ft||e===pt||e===mt||e===gt||e===yt||e===vt||e===_t||e===bt||e===wt||e===St||e===At||e===Et||e===Mt||e===Ct||e===Tt||e===Pt||e===Dt||e===kt||e===Ot||e===It||e===Rt||e===Lt?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===xt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Le?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ps(e=[]){_o.call(this),this.cameras=e}function Ds(){$r.call(this),this.type="Group"}function ks(){this._targetRay=null,this._grip=null,this._hand=null}function Os(e,t){const n=this;let r=null,i=1,o=null,a="local-floor",s=null;const l=[],c=new Map,u=new _o;u.layers.enable(1),u.viewport=new Zn;const h=new _o;h.layers.enable(2),h.viewport=new Zn;const d=[u,h],f=new Ps;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;function g(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function y(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),p=null,m=null,e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(e){const t=r.inputSources;for(let e=0;e<l.length;e++)c.set(t[e],l[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=c.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),c.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=c.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new ks,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new ks,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new ks,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",y),r.addEventListener("inputsourceschange",v);const e=t.getContextAttributes();!0!==e.xrCompatible&&await t.makeXRCompatible();const s={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:i},l=new XRWebGLLayer(r,t,s);r.updateRenderState({baseLayer:l}),o=await r.requestReferenceSpace(a),S.setContext(r),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const _=new Jn,b=new Jn;function x(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.getCamera=function(e){f.near=h.near=u.near=e.near,f.far=h.far=u.far=e.far,p===f.near&&m===f.far||(r.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);const t=e.parent,n=f.cameras;x(f,t);for(let e=0;e<n.length;e++)x(n[e],t);e.matrixWorld.copy(f.matrixWorld),e.matrix.copy(f.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){_.setFromMatrixPosition(t.matrixWorld),b.setFromMatrixPosition(n.matrixWorld);const r=_.distanceTo(b),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=r/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,y=s+p,v=d-m,x=f+(r-m),w=l*s/y*g,S=c*s/y*g;e.projectionMatrix.makePerspective(v,x,w,S,g,y)}(f,u,h):f.projectionMatrix.copy(u.projectionMatrix),f};let w=null;const S=new To;S.setAnimationLoop((function(t,n){if(s=n.getViewerPose(o),null!==s){const t=s.views,n=r.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let i=!1;t.length!==f.cameras.length&&(f.cameras.length=0,i=!0);for(let e=0;e<t.length;e++){const r=t[e],o=n.getViewport(r),a=d[e];a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===e&&f.matrix.copy(a.matrix),!0===i&&f.cameras.push(a)}}const i=r.inputSources;for(let e=0;e<l.length;e++){const t=l[e],r=i[e];t.update(r,n,o)}w&&w(t,n)})),this.setAnimationLoop=function(e){w=e},this.dispose=function(){}}function Is(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===m&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===m&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,r):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Rs(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;const f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=$t,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let m=!1,g=null,y=0,v=0,_=null,b=null,x=-1,w=null;const S=new Zn,A=new Zn;let E=null,M=t.width,C=t.height,T=1,P=null,D=null;const k=new Zn(0,0,M,C),O=new Zn(0,0,M,C);let I=!1;const R=new Co;let L=!1,B=!1;const z=new Er,F=new Jn,N={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===_?T:1}let j,V,G,H,W,q,Z,X,Y,$,J,Q,ee,te,ne,re,ie,oe,ae,se,le,ce=n;function ue(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",me,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&t.shift(),ce=ue(t,e),null===ce)throw ue(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function he(){j=new Uo(ce),V=new zo(ce,j,e),j.init(V),se=new Ts(ce,j,V),G=new Ms(ce,j,V),G.scissor(A.copy(O).multiplyScalar(T).floor()),G.viewport(S.copy(k).multiplyScalar(T).floor()),H=new Go(ce),W=new ds,q=new Cs(ce,j,G,W,V,se,H),Z=new No(p),X=new Po(ce,V),le=new Lo(ce,j,X,V),Y=new jo(ce,X,H,le),$=new Zo(ce,Y,X,H),ie=new qo(ce),ne=new Fo(W),J=new hs(p,Z,j,V,le,ne),Q=new Is(W),ee=new gs(W),te=new ws(j,V),re=new Ro(p,Z,G,$,s),oe=new Bo(ce,j,H,V),ae=new Vo(ce,j,H,V),H.programs=J.programs,p.capabilities=V,p.extensions=j,p.properties=W,p.renderLists=ee,p.state=G,p.info=H}he();const de=new Os(p,ce);this.xr=de;const fe=new Es(p,$,V.maxTextureSize);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1,he()}function ge(e){const t=e.target;t.removeEventListener("dispose",ge),function(e){ye(e),W.remove(e)}(t)}function ye(e){const t=W.get(e).program;void 0!==t&&J.releaseProgram(t)}this.shadowMap=fe,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=j.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=j.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(M,C,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Un),e.set(M,C)},this.setSize=function(e,n,r){de.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,C=n,t.width=Math.floor(e*T),t.height=Math.floor(n*T),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Un),e.set(M*T,C*T).floor()},this.setDrawingBufferSize=function(e,n,r){M=e,C=n,T=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Zn),e.copy(S)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),G.viewport(S.copy(k).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),G.scissor(A.copy(O).multiplyScalar(T).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(e){G.setScissorTest(I=e)},this.setOpaqueSort=function(e){P=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new vi),e.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),W.dispose(),Z.dispose(),$.dispose(),le.dispose(),de.dispose(),_e.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();const n=W.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());const r=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),le.enableAttribute(r.position),ce.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),le.enableAttribute(r.normal),ce.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),le.enableAttribute(r.uv),ce.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),le.enableAttribute(r.color),ce.vertexAttribPointer(r.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=N);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Ee(e,t,r,i);G.setMaterial(r,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=Y.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&ie.update(i,n,r,s),le.setup(i,r,s,n,l);let d=oe;null!==l&&(u=X.get(l),d=ae,d.setIndex(u));const f=null!==l?l.count:c.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,y=null!==o?o.count*h:1/0,v=Math.max(p,g),_=Math.min(f,p+m,g+y)-1,b=Math.max(0,_-v+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(G.setLineWidth(r.wireframeLinewidth*U()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),G.setLineWidth(e*U()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(v,b,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,b,e)}else d.render(v,b)}},this.compile=function(e,t){d=te.get(e),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights();const n=new WeakMap;e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];!1===n.has(o)&&(Se(o,e,t),n.set(o))}else!1===n.has(r)&&(Se(r,e,t),n.set(r))}))};let ve=null;const _e=new To;function be(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=$.update(e),i=e.material;i.visible&&h.push(e,t,i,n,F.z,null)}}else if(e.isImmediateRenderObject)r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),h.push(e,null,e.material,n,F.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||R.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=$.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,F.z,a)}}else i.visible&&h.push(e,t,i,n,F.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)be(i[e],t,n,r)}function xe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];a.layers.test(r.layers)&&(G.viewport(S.copy(r.viewport)),d.setupLightsView(r),we(a,t,r,s,l,c))}}else we(a,t,n,s,l,c)}}function we(e,t,n,r,i,o){if(e.onBeforeRender(p,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=Ee(n,t,i,e);G.setMaterial(i),le.reset(),function(e,t){e.render((function(e){p.renderBufferImmediate(e,t)}))}(e,r)}else p.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(p,t,n,r,i,o)}function Se(e,t,n){!0!==t.isScene&&(t=N);const r=W.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=J.getParameters(e,i.state,o,t,n),l=J.getProgramCacheKey(s);let c=r.program,u=!0;if(r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=Z.get(e.envMap||r.environment),void 0===c)e.addEventListener("dispose",ge);else if(c.cacheKey!==l)ye(e);else if(r.lightsStateVersion!==a)u=!1;else{if(void 0!==s.shaderID)return;u=!1}u&&(s.uniforms=J.getUniforms(e),e.onBeforeCompile(s,p),c=J.acquireProgram(s,l),r.program=c,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ne.numPlanes,r.numIntersection=ne.numIntersection,h.clippingPlanes=ne.uniform),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=r.program.getUniforms(),m=Ha.seqWithValue(f.seq,h);r.uniformsList=m}function Ee(e,t,n,r){!0!==t.isScene&&(t=N),q.resetTextureUnits();const i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===_?p.outputEncoding:_.texture.encoding,s=Z.get(n.envMap||o),l=W.get(n),c=d.state.lights;if(!0===L&&(!0===B||e!==w)){const t=e===w&&n.id===x;ne.setState(n,e,t)}n.version===l.__version?n.fog&&l.fog!==i||l.environment!==o||l.needsLights&&l.lightsStateVersion!==c.state.version?Se(n,t,r):void 0===l.numClippingPlanes||l.numClippingPlanes===ne.numPlanes&&l.numIntersection===ne.numIntersection?(l.outputEncoding!==a||l.envMap!==s)&&Se(n,t,r):Se(n,t,r):(Se(n,t,r),l.__version=n.version);let u=!1,h=!1,f=!1;const m=l.program,g=m.getUniforms(),y=l.uniforms;if(G.useProgram(m.program)&&(u=!0,h=!0,f=!0),n.id!==x&&(x=n.id,h=!0),u||w!==e){if(g.setValue(ce,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&g.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=g.map.cameraPosition;void 0!==t&&t.setValue(ce,F.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(ce,r,"bindMatrix"),g.setOptional(ce,r,"bindMatrixInverse");const e=r.skeleton;if(e){const t=e.bones;if(V.floatVertexTextures){if(null===e.boneTexture){let n=Math.sqrt(4*t.length);n=Nn.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(e.boneMatrices);const i=new Ao(r,n,n,Fe,De);e.boneMatrices=r,e.boneTexture=i,e.boneTextureSize=n}g.setValue(ce,"boneTexture",e.boneTexture,q),g.setValue(ce,"boneTextureSize",e.boneTextureSize)}else g.setOptional(ce,e,"boneMatrices")}}var v,b;return(h||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,g.setValue(ce,"receiveShadow",r.receiveShadow)),h&&(g.setValue(ce,"toneMappingExposure",p.toneMappingExposure),l.needsLights&&(b=f,(v=y).ambientLightColor.needsUpdate=b,v.lightProbe.needsUpdate=b,v.directionalLights.needsUpdate=b,v.directionalLightShadows.needsUpdate=b,v.pointLights.needsUpdate=b,v.pointLightShadows.needsUpdate=b,v.spotLights.needsUpdate=b,v.spotLightShadows.needsUpdate=b,v.rectAreaLights.needsUpdate=b,v.hemisphereLights.needsUpdate=b),i&&n.fog&&Q.refreshFogUniforms(y,i),Q.refreshMaterialUniforms(y,n,T,C),Ha.upload(ce,l.uniformsList,y,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ha.upload(ce,l.uniformsList,y,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(ce,"center",r.center),g.setValue(ce,"modelViewMatrix",r.modelViewMatrix),g.setValue(ce,"normalMatrix",r.normalMatrix),g.setValue(ce,"modelMatrix",r.matrixWorld),m}_e.setAnimationLoop((function(e){de.isPresenting||ve&&ve(e)})),"undefined"!=typeof window&&_e.setContext(window),this.setAnimationLoop=function(e){ve=e,de.setAnimationLoop(e),null===e?_e.stop():_e.start()},this.render=function(e,t){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===m)return;le.resetDefaultState(),x=-1,w=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===de.enabled&&!0===de.isPresenting&&(t=de.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,n||_),d=te.get(e,f.length),d.init(),f.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(z),B=this.localClippingEnabled,L=ne.init(this.clippingPlanes,B,t),h=ee.get(e,t),h.init(),be(e,t,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(P,D),!0===L&&ne.beginShadows();const i=d.state.shadowsArray;fe.render(i,e,t),d.setupLights(),d.setupLightsView(t),!0===L&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),re.render(h,e,t,r);const o=h.opaque,a=h.transparent;o.length>0&&xe(o,e,t),a.length>0&&xe(a,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==_&&(q.updateRenderTargetMipmap(_),q.updateMultisampleRenderTarget(_)),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),f.pop(),d=f.length>0?f[f.length-1]:null,h=null},this.setFramebuffer=function(e){g!==e&&null===_&&ce.bindFramebuffer(36160,e),g=e},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return h},this.setRenderList=function(e){h=e},this.getRenderTarget=function(){return _},this.setRenderTarget=function(e,t=0,n=0){_=e,y=t,v=n,e&&void 0===W.get(e).__webglFramebuffer&&q.setupRenderTarget(e);let r=g,i=!1;if(e){const n=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=n[t],i=!0):r=e.isWebGLMultisampleRenderTarget?W.get(e).__webglMultisampledFramebuffer:n,S.copy(e.viewport),A.copy(e.scissor),E=e.scissorTest}else S.copy(k).multiplyScalar(T).floor(),A.copy(O).multiplyScalar(T).floor(),E=I;if(b!==r&&(ce.bindFramebuffer(36160,r),b=r),G.viewport(S),G.scissor(A),G.setScissorTest(E),i){const r=W.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==b&&(ce.bindFramebuffer(36160,s),a=!0);try{const s=e.texture,l=s.format,c=s.type;if(l!==Fe&&se.convert(l)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=c===ke&&(j.has("EXT_color_buffer_half_float")||V.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(c===Ae||se.convert(c)===ce.getParameter(35738)||c===De&&(V.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,se.convert(l),se.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&ce.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=se.convert(t.format);q.setTexture2D(t,0),ce.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),G.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=se.convert(n.format),s=se.convert(n.type);q.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),G.unbindTexture()},this.initTexture=function(e){q.setTexture2D(e,0),G.unbindTexture()},this.resetState=function(){G.reset(),le.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ls(e){Rs.call(this,e)}Ss.prototype=Object.create(xi.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isMeshDepthMaterial=!0,Ss.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},As.prototype=Object.create(xi.prototype),As.prototype.constructor=As,As.prototype.isMeshDistanceMaterial=!0,As.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Ps.prototype=Object.assign(Object.create(_o.prototype),{constructor:Ps,isArrayCamera:!0}),Ds.prototype=Object.assign(Object.create($r.prototype),{constructor:Ds,isGroup:!0}),Object.assign(ks.prototype,{constructor:ks,getHandSpace:function(){return null===this._hand&&(this._hand=new Ds,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Ds,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Ds,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new Ds;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}),Object.assign(Os.prototype,Bn.prototype),Ls.prototype=Object.assign(Object.create(Rs.prototype),{constructor:Ls,isWebGL1Renderer:!0});class Bs{constructor(e,t){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new vi(e),this.density=void 0!==t?t:25e-5}clone(){return new Bs(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class zs{constructor(e,t,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new vi(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}clone(){return new zs(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Fs extends $r{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function Ns(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Nn.generateUUID()}Object.defineProperty(Ns.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ns.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new Ns(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Us=new Jn;function js(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Vs(e){xi.call(this),this.type="SpriteMaterial",this.color=new vi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Gs;Object.defineProperties(js.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(js.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Us.x=this.getX(t),Us.y=this.getY(t),Us.z=this.getZ(t),Us.applyMatrix4(e),this.setXYZ(t,Us.x,Us.y,Us.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ei(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new js(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Vs.prototype=Object.create(xi.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isSpriteMaterial=!0,Vs.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const Hs=new Jn,Ws=new Jn,qs=new Jn,Zs=new Un,Xs=new Un,Ys=new Er,$s=new Jn,Js=new Jn,Ks=new Jn,Qs=new Un,el=new Un,tl=new Un;function nl(e){if($r.call(this),this.type="Sprite",void 0===Gs){Gs=new qi;const e=new Ns(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Gs.setIndex([0,1,2,0,2,3]),Gs.setAttribute("position",new js(e,3,0,!1)),Gs.setAttribute("uv",new js(e,2,3,!1))}this.geometry=Gs,this.material=void 0!==e?e:new Vs,this.center=new Un(.5,.5)}function rl(e,t,n,r,i,o){Zs.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Xs.x=o*Zs.x-i*Zs.y,Xs.y=i*Zs.x+o*Zs.y):Xs.copy(Zs),e.copy(t),e.x+=Xs.x,e.y+=Xs.y,e.applyMatrix4(Ys)}nl.prototype=Object.assign(Object.create($r.prototype),{constructor:nl,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ws.setFromMatrixScale(this.matrixWorld),Ys.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ws.multiplyScalar(-qs.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;rl($s.set(-.5,-.5,0),qs,o,Ws,r,i),rl(Js.set(.5,-.5,0),qs,o,Ws,r,i),rl(Ks.set(.5,.5,0),qs,o,Ws,r,i),Qs.set(0,0),el.set(1,0),tl.set(1,1);let a=e.ray.intersectTriangle($s,Js,Ks,!1,Hs);if(null===a&&(rl(Js.set(-.5,.5,0),qs,o,Ws,r,i),el.set(0,1),a=e.ray.intersectTriangle($s,Ks,Js,!1,Hs),null===a))return;const s=e.ray.origin.distanceTo(Hs);s<e.near||s>e.far||t.push({distance:s,point:Hs.clone(),uv:hi.getUV(Hs,$s,Js,Ks,Qs,el,tl,new Un),face:null,object:this})},copy:function(e){return $r.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const il=new Jn,ol=new Jn;function al(){$r.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}al.prototype=Object.assign(Object.create($r.prototype),{constructor:al,isLOD:!0,copy:function(e){$r.prototype.copy.call(this,e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){il.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(il);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){il.setFromMatrixPosition(e.matrixWorld),ol.setFromMatrixPosition(this.matrixWorld);const n=il.distanceTo(ol)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){const t=$r.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}});const sl=new Jn,ll=new Zn,cl=new Zn,ul=new Jn,hl=new Er;function dl(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),uo.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Er,this.bindMatrixInverse=new Er}function fl(){$r.call(this),this.type="Bone"}dl.prototype=Object.assign(Object.create(uo.prototype),{constructor:dl,isSkinnedMesh:!0,copy:function(e){return uo.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Zn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){uo.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(e,t){const n=this.skeleton,r=this.geometry;ll.fromBufferAttribute(r.attributes.skinIndex,e),cl.fromBufferAttribute(r.attributes.skinWeight,e),sl.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=cl.getComponent(e);if(0!==r){const i=ll.getComponent(e);hl.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(ul.copy(sl).applyMatrix4(hl),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}),fl.prototype=Object.assign(Object.create($r.prototype),{constructor:fl,isBone:!0});const pl=new Er,ml=new Er;function gl(e=[],t=[]){this.uuid=Nn.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(gl.prototype,{init:function(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Er)}},calculateInverses:function(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Er;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:ml;pl.multiplyMatrices(i,t[r]),pl.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)},clone:function(){return new gl(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new fl),this.bones.push(i),this.boneInverses.push((new Er).fromArray(e.boneInverses[n]))}return this.init(),this},toJSON:function(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}});const yl=new Er,vl=new Er,_l=[],bl=new uo;function xl(e,t,n){uo.call(this,e,t),this.instanceMatrix=new Ei(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function wl(e){xi.call(this),this.type="LineBasicMaterial",this.color=new vi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}xl.prototype=Object.assign(Object.create(uo.prototype),{constructor:xl,isInstancedMesh:!0,copy:function(e){return uo.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,r=this.count;if(bl.geometry=this.geometry,bl.material=this.material,void 0!==bl.material)for(let i=0;i<r;i++){this.getMatrixAt(i,yl),vl.multiplyMatrices(n,yl),bl.matrixWorld=vl,bl.raycast(e,_l);for(let e=0,n=_l.length;e<n;e++){const n=_l[e];n.instanceId=i,n.object=this,t.push(n)}_l.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new Ei(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}}),wl.prototype=Object.create(xi.prototype),wl.prototype.constructor=wl,wl.prototype.isLineBasicMaterial=!0,wl.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const Sl=new Jn,Al=new Jn,El=new Er,Ml=new Ar,Cl=new gr;function Tl(e=new qi,t=new wl){$r.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}Tl.prototype=Object.assign(Object.create($r.prototype),{constructor:Tl,isLine:!0,copy:function(e){return $r.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Sl.fromBufferAttribute(t,e-1),Al.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Sl.distanceTo(Al);e.setAttribute("lineDistance",new Ri(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Cl.copy(n.boundingSphere),Cl.applyMatrix4(r),Cl.radius+=i,!1===e.ray.intersectsSphere(Cl))return;El.copy(r).invert(),Ml.copy(e.ray).applyMatrix4(El);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Jn,l=new Jn,c=new Jn,u=new Jn,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,o=n.length-1;r<o;r+=h){const o=n[r],h=n[r+1];if(s.fromBufferAttribute(i,o),l.fromBufferAttribute(i,h),Ml.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,r=i.count-1;n<r;n+=h){if(s.fromBufferAttribute(i,n),l.fromBufferAttribute(i,n+1),Ml.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Pl=new Jn,Dl=new Jn;function kl(e,t){Tl.call(this,e,t),this.type="LineSegments"}function Ol(e,t){Tl.call(this,e,t),this.type="LineLoop"}function Il(e){xi.call(this),this.type="PointsMaterial",this.color=new vi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}kl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:kl,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Pl.fromBufferAttribute(t,e),Dl.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Pl.distanceTo(Dl);e.setAttribute("lineDistance",new Ri(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}),Ol.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Ol,isLineLoop:!0}),Il.prototype=Object.create(xi.prototype),Il.prototype.constructor=Il,Il.prototype.isPointsMaterial=!0,Il.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const Rl=new Er,Ll=new Ar,Bl=new gr,zl=new Jn;function Fl(e=new qi,t=new Il){$r.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}function Nl(e,t,n,r,i,o,a){const s=Ll.distanceSqToPoint(e);if(s<n){const n=new Jn;Ll.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}function Ul(e,t,n,r,i,o,a,s,l){Wn.call(this,e,t,n,r,i,o,a,s,l),this.format=void 0!==a?a:ze,this.minFilter=void 0!==o?o:_e,this.magFilter=void 0!==i?i:_e,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function jl(e,t,n,r,i,o,a,s,l,c,u,h){Wn.call(this,null,o,a,s,l,c,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Vl(e,t,n,r,i,o,a,s,l){Wn.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function Gl(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:Ve)!==Ve&&c!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ve&&(n=Ce),void 0===n&&c===Ge&&(n=Le),Wn.call(this,null,r,i,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:pe,this.minFilter=void 0!==s?s:pe,this.flipY=!1,this.generateMipmaps=!1}Fl.prototype=Object.assign(Object.create($r.prototype),{constructor:Fl,isPoints:!0,copy:function(e){return $r.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bl.copy(n.boundingSphere),Bl.applyMatrix4(r),Bl.radius+=i,!1===e.ray.intersectsSphere(Bl))return;Rl.copy(r).invert(),Ll.copy(e.ray).applyMatrix4(Rl);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,s=n.length;i<s;i++){const s=n[i];zl.fromBufferAttribute(o,s),Nl(zl,s,a,r,e,t,this)}}else for(let n=0,i=o.count;n<i;n++)zl.fromBufferAttribute(o,n),Nl(zl,n,a,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Ul.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Ul,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),jl.prototype=Object.create(Wn.prototype),jl.prototype.constructor=jl,jl.prototype.isCompressedTexture=!0,Vl.prototype=Object.create(Wn.prototype),Vl.prototype.constructor=Vl,Vl.prototype.isCanvasTexture=!0,Gl.prototype=Object.create(Wn.prototype),Gl.prototype.constructor=Gl,Gl.prototype.isDepthTexture=!0;class Hl extends qi{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],l=new Jn,c=new Un;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const h=n+i/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[u]/e+1)/2,c.y=(o[u+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Ri(o,3)),this.setAttribute("normal",new Ri(a,3)),this.setAttribute("uv",new Ri(s,2))}}class Wl extends qi{constructor(e=1,t=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function y(n){const i=f,o=new Un,p=new Jn;let y=0;const v=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),f++;const b=f;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);p.x=v*i,p.y=m*_,p.z=v*n,u.push(p.x,p.y,p.z),h.push(0,_,0),o.x=.5*n+.5,o.y=.5*i*_+.5,d.push(o.x,o.y),f++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const o=new Jn,y=new Jn;let v=0;const _=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,v=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),p=Math.cos(i);y.x=v*l,y.y=-g*n+m,y.z=v*p,u.push(y.x,y.y,y.z),o.set(l,_,p).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];c.push(n,r,o),c.push(r,i,o),v+=6}l.addGroup(g,v,0),g+=v}(),!1===o&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Ri(u,3)),this.setAttribute("normal",new Ri(h,3)),this.setAttribute("uv",new Ri(d,2))}}class ql extends Wl{constructor(e=1,t=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class Zl extends qi{constructor(e,t,n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const a=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)o[r][e]=0===e&&r===i?a:a.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(o[e][n+1]),s(o[e+1][n]),s(o[e][n])):(s(o[e][n+1]),s(o[e+1][n+1]),s(o[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Jn,r=new Jn,i=new Jn;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new Jn;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new Jn;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new Jn,t=new Jn,n=new Jn,r=new Jn,a=new Un,s=new Un,l=new Un;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);c(a,d+0,e,f),c(s,d+2,t,f),c(l,d+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Ri(i,3)),this.setAttribute("normal",new Ri(i.slice(),3)),this.setAttribute("uv",new Ri(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class Xl extends Zl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}}const Yl=new Jn,$l=new Jn,Jl=new Jn,Kl=new hi;class Ql extends qi{constructor(e,t){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,!0===e.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=Math.pow(10,4),r=Math.cos(Nn.DEG2RAD*t),i=e.getIndex(),o=e.getAttribute("position"),a=i?i.count:o.count,s=[0,0,0],l=["a","b","c"],c=new Array(3),u={},h=[];for(let e=0;e<a;e+=3){i?(s[0]=i.getX(e),s[1]=i.getX(e+1),s[2]=i.getX(e+2)):(s[0]=e,s[1]=e+1,s[2]=e+2);const{a:t,b:a,c:d}=Kl;if(t.fromBufferAttribute(o,s[0]),a.fromBufferAttribute(o,s[1]),d.fromBufferAttribute(o,s[2]),Kl.getNormal(Jl),c[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,c[1]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,c[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],i=c[t],o=Kl[l[e]],a=Kl[l[t]],d=`${n}_${i}`,f=`${i}_${n}`;f in u&&u[f]?(Jl.dot(u[f].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),u[f]=null):d in u||(u[d]={index0:s[e],index1:s[t],normal:Jl.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:n}=u[e];Yl.fromBufferAttribute(o,t),$l.fromBufferAttribute(o,n),h.push(Yl.x,Yl.y,Yl.z),h.push($l.x,$l.y,$l.z)}this.setAttribute("position",new Ri(h,3))}}function ec(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=xc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=xc(o,e[o],e[o+1],a);return a&&mc(a,a.next)&&(wc(a),a=a.next),a}function tc(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!mc(r,r.next)&&0!==pc(r.prev,r,r.next))r=r.next;else{if(wc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function nc(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=uc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?ic(e,r,i,o):rc(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),wc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?nc(e=oc(tc(e),t,n),t,n,r,i,o,2):2===a&&ac(e,t,n,r,i,o):nc(tc(e),t,n,r,i,o,1);break}}function rc(e){const t=e.prev,n=e,r=e.next;if(pc(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(dc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&pc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ic(e,t,n,r){const i=e.prev,o=e,a=e.next;if(pc(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=uc(s,l,t,n,r),d=uc(c,u,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&dc(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&pc(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&dc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&pc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&dc(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&pc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&dc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&pc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function oc(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!mc(i,o)&&gc(i,r,r.next,o)&&_c(i,o)&&_c(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),wc(r),wc(r.next),r=e=o),r=r.next}while(r!==e);return tc(r)}function ac(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&fc(a,e)){let s=bc(a,e);return a=tc(a,a.next),s=tc(s,s.next),nc(a,t,n,r,i,o),void nc(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function sc(e,t){return e.x-t.x}function lc(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{r>=n.x&&n.x>=l&&r!==n.x&&dc(i<c?r:a,i,l,c,i<c?a:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),_c(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&cc(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(e,t)){const n=bc(t,e);tc(t,t.next),tc(n,n.next)}}function cc(e,t){return pc(e.prev,e,t.prev)<0&&pc(t.next,e,e.next)<0}function uc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function dc(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function fc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&gc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(_c(e,t)&&_c(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(pc(e.prev,e,t.prev)||pc(e,t.prev,t))||mc(e,t)&&pc(e.prev,e,e.next)>0&&pc(t.prev,t,t.next)>0)}function pc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function mc(e,t){return e.x===t.x&&e.y===t.y}function gc(e,t,n,r){const i=vc(pc(e,t,n)),o=vc(pc(e,t,r)),a=vc(pc(n,r,e)),s=vc(pc(n,r,t));return i!==o&&a!==s||!(0!==i||!yc(e,n,t))||!(0!==o||!yc(e,r,t))||!(0!==a||!yc(n,e,r))||!(0!==s||!yc(n,t,r))}function yc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function vc(e){return e>0?1:e<0?-1:0}function _c(e,t){return pc(e.prev,e,e.next)<0?pc(e,t,e.next)>=0&&pc(e,e.prev,t)>=0:pc(e,t,e.prev)<0||pc(e,e.next,t)<0}function bc(e,t){const n=new Sc(e.i,e.x,e.y),r=new Sc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function xc(e,t,n,r){const i=new Sc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Sc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Ac={area:function(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Ac.area(e)<0},triangulateShape:function(e,t){const n=[],r=[],i=[];Ec(e),Mc(n,e);let o=e.length;t.forEach(Ec);for(let e=0;e<t.length;e++)r.push(o),o+=t[e].length,Mc(n,t[e]);const a=function(e,t,n){n=n||2;const r=t&&t.length,i=r?t[0]*n:e.length;let o=ec(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,f;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,c=ec(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(hc(c));for(i.sort(sc),o=0;o<i.length;o++)lc(i[o],n),n=tc(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-s,u-l),f=0!==f?1/f:0}return nc(o,a,n,s,l,f),a}(n,r);for(let e=0;e<a.length;e+=3)i.push(a.slice(e,e+3));return i}};function Ec(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Mc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Cc extends qi{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)o(e[t]);function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Tc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,y,v,_,b,x=!1;p&&(g=p.getSpacedPoints(s),x=!0,c=!1,y=p.computeFrenetFrames(s,!1),v=new Jn,_=new Jn,b=new Jn),c||(f=0,u=0,h=0,d=0);const w=e.extractPoints(a);let S=w.shape;const A=w.holes;if(!Ac.isClockWise(S)){S=S.reverse();for(let e=0,t=A.length;e<t;e++){const t=A[e];Ac.isClockWise(t)&&(A[e]=t.reverse())}}const E=Ac.triangulateShape(S,A),M=S;for(let e=0,t=A.length;e<t;e++){const t=A[e];S=S.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const T=S.length,P=E.length;function D(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-s/h,p=t.y+a/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(a*c-s*l);r=f+a*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new Un(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new Un(r/o,i/o)}const k=[];for(let e=0,t=M.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),k[e]=D(M[e],M[n],M[r]);const O=[];let I,R=k.concat();for(let e=0,t=A.length;e<t;e++){const t=A[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=D(t[e],t[r],t[i]);O.push(I),R=R.concat(I)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=C(M[e],k[e],r);z(t.x,t.y,-n)}for(let e=0,t=A.length;e<t;e++){const t=A[e];I=O[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],I[e],r);z(i.x,i.y,-n)}}}const L=h+d;for(let e=0;e<T;e++){const t=c?C(S[e],R[e],L):S[e];x?(_.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(_).add(v),z(b.x,b.y,b.z)):z(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<T;t++){const n=c?C(S[t],R[t],L):S[t];x?(_.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),b.copy(g[e]).add(_).add(v),z(b.x,b.y,b.z)):z(n.x,n.y,l/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=C(M[e],k[e],r);z(t.x,t.y,l+n)}for(let e=0,t=A.length;e<t;e++){const t=A[e];I=O[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],I[e],r);x?z(i.x,i.y+g[s-1].y,g[s-1].x+n):z(i.x,i.y,l+n)}}}function B(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=T*e,o=T*(e+1);N(t+r+n,t+i+n,t+i+o,t+r+o)}}}function z(e,t,n){o.push(e),o.push(t),o.push(n)}function F(e,t,i){U(e),U(t),U(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function N(e,t,i,o){U(e),U(t),U(o),U(t),U(i),U(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function U(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function j(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=T*e;for(let e=0;e<P;e++){const n=E[e];F(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=T*e;for(let e=0;e<P;e++){const n=E[e];F(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];F(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];F(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;B(M,t),t+=M.length;for(let e=0,n=A.length;e<n;e++){const n=A[e];B(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Ri(r,3)),this.setAttribute("uv",new Ri(i,2)),this.computeVertexNormals()}toJSON(){const e=qi.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}const Tc={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Un(o,a),new Un(s,l),new Un(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],y=t[3*o+2];return Math.abs(s-u)<.01?[new Un(a,1-l),new Un(c,1-h),new Un(d,1-p),new Un(m,1-y)]:[new Un(s,1-l),new Un(u,1-h),new Un(f,1-p),new Un(g,1-y)]}};class Pc extends Zl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}}class Dc extends qi{constructor(e,t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Nn.clamp(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/t,l=new Jn,c=new Un;for(let i=0;i<=t;i++){const u=n+i*s*r,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=e.length-1;n++)l.x=e[n].x*h,l.y=e[n].y,l.z=e[n].x*d,o.push(l.x,l.y,l.z),c.x=i/t,c.y=n/(e.length-1),a.push(c.x,c.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,o=r,a=r+e.length,s=r+e.length+1,l=r+1;i.push(o,a,l),i.push(a,s,l)}if(this.setIndex(i),this.setAttribute("position",new Ri(o,3)),this.setAttribute("uv",new Ri(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new Jn,i=new Jn,o=new Jn,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class kc extends Zl{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}}function Oc(e,t,n){qi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],o=[],a=[],s=1e-5,l=new Jn,c=new Jn,u=new Jn,h=new Jn,d=new Jn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=t+1;for(let r=0;r<=n;r++){const f=r/n;for(let n=0;n<=t;n++){const r=n/t;e(r,f,c),i.push(c.x,c.y,c.z),r-s>=0?(e(r-s,f,u),h.subVectors(c,u)):(e(r+s,f,u),h.subVectors(u,c)),f-s>=0?(e(r,f-s,u),d.subVectors(c,u)):(e(r,f+s,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),o.push(l.x,l.y,l.z),a.push(r,f)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*f+n,i=e*f+n+1,o=(e+1)*f+n+1,a=(e+1)*f+n;r.push(t,i,a),r.push(i,o,a)}this.setIndex(r),this.setAttribute("position",new Ri(i,3)),this.setAttribute("normal",new Ri(o,3)),this.setAttribute("uv",new Ri(a,2))}Oc.prototype=Object.create(qi.prototype),Oc.prototype.constructor=Oc;class Ic extends qi{constructor(e=.5,t=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],l=[],c=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new Jn,f=new Un;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,s=r+n+2,l=r+1;a.push(i,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Ri(s,3)),this.setAttribute("normal",new Ri(l,3)),this.setAttribute("uv",new Ri(c,2))}}class Rc extends qi{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,s,t),a+=s,s=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Ac.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Ac.isClockWise(t)&&(u[e]=t.reverse())}const h=Ac.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+a,i=t[1]+a,o=t[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Ri(r,3)),this.setAttribute("normal",new Ri(i,3)),this.setAttribute("uv",new Ri(o,2))}toJSON(){const e=qi.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class Lc extends qi{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Jn,h=new Jn,d=[],f=[],p=[],m=[];for(let d=0;d<=n;d++){const g=[],y=d/n;let v=0;0==d&&0==o?v=.5/t:d==n&&s==Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+y*a),u.y=e*Math.cos(o+y*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+y*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(s+v,1-y),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],a=c[e+1][r],l=c[e+1][r+1];(0!==e||o>0)&&d.push(t,i,l),(e!==n-1||s<Math.PI)&&d.push(i,a,l)}this.setIndex(d),this.setAttribute("position",new Ri(f,3)),this.setAttribute("normal",new Ri(p,3)),this.setAttribute("uv",new Ri(m,2))}}class Bc extends Zl{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}}class zc extends Cc{constructor(e,t={}){const n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new qi;const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class Fc extends qi{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],c=new Jn,u=new Jn,h=new Jn;for(let o=0;o<=n;o++)for(let d=0;d<=r;d++){const f=d/r*i,p=o/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),a.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(d/r),l.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,a=(r+1)*(e-1)+t,s=(r+1)*e+t;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new Ri(a,3)),this.setAttribute("normal",new Ri(s,3)),this.setAttribute("uv",new Ri(l,2))}}class Nc extends qi{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],l=[],c=[],u=new Jn,h=new Jn,d=new Jn,f=new Jn,p=new Jn,m=new Jn,g=new Jn;for(let a=0;a<=n;++a){const v=a/n*i*Math.PI*2;y(v,i,o,e,d),y(v+.01,i,o,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),f=t*Math.sin(i);u.x=d.x+(o*g.x+f*p.x),u.y=d.y+(o*g.y+f*p.y),u.z=d.z+(o*g.z+f*p.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(a/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;a.push(n,i,s),a.push(i,o,s)}function y(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Ri(s,3)),this.setAttribute("normal",new Ri(l,3)),this.setAttribute("uv",new Ri(c,2))}}class Uc extends qi{constructor(e,t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Jn,s=new Jn,l=new Un;let c=new Jn;const u=[],h=[],d=[],f=[];function p(i){c=e.getPointAt(i/t,c);const l=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+i*d.x,s.y=o*l.y+i*d.y,s.z=o*l.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;f.push(n,i,a),f.push(i,o,a)}}()}(),this.setIndex(f),this.setAttribute("position",new Ri(u,3)),this.setAttribute("normal",new Ri(h,3)),this.setAttribute("uv",new Ri(d,2))}toJSON(){const e=qi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class jc extends qi{constructor(e){if(super(),this.type="WireframeGeometry",!0===e.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const t=[],n=[0,0],r={},i=new Jn;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],i=t.start;for(let e=i,o=i+t.count;e<o;e+=3)for(let t=0;t<3;t++){const i=a.getX(e+t),o=a.getX(e+(t+1)%3);n[0]=Math.min(i,o),n[1]=Math.max(i,o);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const e in r){const n=r[e];i.fromBufferAttribute(o,n.index1),t.push(i.x,i.y,i.z),i.fromBufferAttribute(o,n.index2),t.push(i.x,i.y,i.z)}}else{const n=e.attributes.position;for(let e=0,r=n.count/3;e<r;e++)for(let r=0;r<3;r++){const o=3*e+r;i.fromBufferAttribute(n,o),t.push(i.x,i.y,i.z);const a=3*e+(r+1)%3;i.fromBufferAttribute(n,a),t.push(i.x,i.y,i.z)}}this.setAttribute("position",new Ri(t,3))}}var Vc=Object.freeze({__proto__:null,BoxGeometry:fo,BoxBufferGeometry:fo,CircleGeometry:Hl,CircleBufferGeometry:Hl,ConeGeometry:ql,ConeBufferGeometry:ql,CylinderGeometry:Wl,CylinderBufferGeometry:Wl,DodecahedronGeometry:Xl,DodecahedronBufferGeometry:Xl,EdgesGeometry:Ql,ExtrudeGeometry:Cc,ExtrudeBufferGeometry:Cc,IcosahedronGeometry:Pc,IcosahedronBufferGeometry:Pc,LatheGeometry:Dc,LatheBufferGeometry:Dc,OctahedronGeometry:kc,OctahedronBufferGeometry:kc,ParametricGeometry:Oc,ParametricBufferGeometry:Oc,PlaneGeometry:Do,PlaneBufferGeometry:Do,PolyhedronGeometry:Zl,PolyhedronBufferGeometry:Zl,RingGeometry:Ic,RingBufferGeometry:Ic,ShapeGeometry:Rc,ShapeBufferGeometry:Rc,SphereGeometry:Lc,SphereBufferGeometry:Lc,TetrahedronGeometry:Bc,TetrahedronBufferGeometry:Bc,TextGeometry:zc,TextBufferGeometry:zc,TorusGeometry:Fc,TorusBufferGeometry:Fc,TorusKnotGeometry:Nc,TorusKnotBufferGeometry:Nc,TubeGeometry:Uc,TubeBufferGeometry:Uc,WireframeGeometry:jc});function Gc(e){xi.call(this),this.type="ShadowMaterial",this.color=new vi(0),this.transparent=!0,this.setValues(e)}function Hc(e){yo.call(this,e),this.type="RawShaderMaterial"}function Wc(e){xi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function qc(e){Wc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Un(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Nn.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function Zc(e){xi.call(this),this.type="MeshPhongMaterial",this.color=new vi(16777215),this.specular=new vi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xc(e){xi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Yc(e){xi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $c(e){xi.call(this),this.type="MeshLambertMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Jc(e){xi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Kc(e){wl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Gc.prototype=Object.create(xi.prototype),Gc.prototype.constructor=Gc,Gc.prototype.isShadowMaterial=!0,Gc.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this},Hc.prototype=Object.create(yo.prototype),Hc.prototype.constructor=Hc,Hc.prototype.isRawShaderMaterial=!0,Wc.prototype=Object.create(xi.prototype),Wc.prototype.constructor=Wc,Wc.prototype.isMeshStandardMaterial=!0,Wc.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},qc.prototype=Object.create(Wc.prototype),qc.prototype.constructor=qc,qc.prototype.isMeshPhysicalMaterial=!0,qc.prototype.copy=function(e){return Wc.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new vi).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},Zc.prototype=Object.create(xi.prototype),Zc.prototype.constructor=Zc,Zc.prototype.isMeshPhongMaterial=!0,Zc.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Xc.prototype=Object.create(xi.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isMeshToonMaterial=!0,Xc.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Yc.prototype=Object.create(xi.prototype),Yc.prototype.constructor=Yc,Yc.prototype.isMeshNormalMaterial=!0,Yc.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$c.prototype=Object.create(xi.prototype),$c.prototype.constructor=$c,$c.prototype.isMeshLambertMaterial=!0,$c.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jc.prototype=Object.create(xi.prototype),Jc.prototype.constructor=Jc,Jc.prototype.isMeshMatcapMaterial=!0,Jc.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Kc.prototype=Object.create(wl.prototype),Kc.prototype.constructor=Kc,Kc.prototype.isLineDashedMaterial=!0,Kc.prototype.copy=function(e){return wl.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Qc=Object.freeze({__proto__:null,ShadowMaterial:Gc,SpriteMaterial:Vs,RawShaderMaterial:Hc,ShaderMaterial:yo,PointsMaterial:Il,MeshPhysicalMaterial:qc,MeshStandardMaterial:Wc,MeshPhongMaterial:Zc,MeshToonMaterial:Xc,MeshNormalMaterial:Yc,MeshLambertMaterial:$c,MeshDepthMaterial:Ss,MeshDistanceMaterial:As,MeshBasicMaterial:wi,MeshMatcapMaterial:Jc,LineDashedMaterial:Kc,LineBasicMaterial:wl,Material:xi});const eu={arraySlice:function(e,t,n){return eu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*i;if(!(o<n||o>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=eu.convertArray(l,t.times.constructor),t.values=eu.convertArray(c,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)continue;let s=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=r.times.length-1;let d;if(o<=r.times[0]){const e=s,t=l-s;d=eu.arraySlice(r.values,e,t)}else if(o>=r.times[h]){const e=h*l+s,t=e+l-s;d=eu.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=l-s;e.evaluate(o),d=eu.arraySlice(e.resultBuffer,t,n)}"quaternion"===i&&(new $n).fromArray(d).normalize().conjugate().toArray(d);const f=a.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===i)$n.multiplyQuaternionsFlat(a.values,t,d,0,a.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)a.values[t+n]-=d[n]}}}return e.blendMode=qt,e}};function tu(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function nu(e,t,n,r){tu.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ru(e,t,n,r){tu.call(this,e,t,n,r)}function iu(e,t,n,r){tu.call(this,e,t,n,r)}function ou(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eu.convertArray(t,this.TimeBufferType),this.values=eu.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function au(e,t,n){ou.call(this,e,t,n)}function su(e,t,n,r){ou.call(this,e,t,n,r)}function lu(e,t,n,r){ou.call(this,e,t,n,r)}function cu(e,t,n,r){tu.call(this,e,t,n,r)}function uu(e,t,n,r){ou.call(this,e,t,n,r)}function hu(e,t,n,r){ou.call(this,e,t,n,r)}function du(e,t,n,r){ou.call(this,e,t,n,r)}function fu(e,t=-1,n,r=Wt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Nn.generateUUID(),this.duration<0&&this.resetDuration()}function pu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lu;case"vector":case"vector2":case"vector3":case"vector4":return du;case"color":return su;case"quaternion":return uu;case"bool":case"boolean":return au;case"string":return hu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];eu.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(tu.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(tu.prototype,{beforeStart_:tu.prototype.copySampleValue_,afterEnd_:tu.prototype.copySampleValue_}),nu.prototype=Object.assign(Object.create(tu.prototype),{constructor:nu,DefaultSettings_:{endingStart:Vt,endingEnd:Vt},intervalChanged_:function(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Gt:i=e,a=2*t-n;break;case Ht:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Gt:o=e,s=2*n-t;break;case Ht:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,_=d*m-d*p;for(let e=0;e!==a;++e)i[e]=g*o[c+e]+y*o[l+e]+v*o[s+e]+_*o[u+e];return i}}),ru.prototype=Object.assign(Object.create(tu.prototype),{constructor:ru,interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=o[l+e]*u+o[s+e]*c;return i}}),iu.prototype=Object.assign(Object.create(tu.prototype),{constructor:iu,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(ou,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:eu.convertArray(e.times,Array),values:eu.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(ou.prototype,{constructor:ou,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ut,InterpolantFactoryMethodDiscrete:function(e){return new iu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ru(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new nu(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case Nt:t=this.InterpolantFactoryMethodDiscrete;break;case Ut:t=this.InterpolantFactoryMethodLinear;break;case jt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nt;case this.InterpolantFactoryMethodLinear:return Ut;case this.InterpolantFactoryMethodSmooth:return jt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=eu.arraySlice(n,i,o),this.values=eu.arraySlice(this.values,i*e,o*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&eu.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e},optimize:function(){const e=eu.arraySlice(this.times),t=eu.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===jt,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=eu.arraySlice(e,0,o),this.values=eu.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=eu.arraySlice(this.times,0),t=eu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),au.prototype=Object.assign(Object.create(ou.prototype),{constructor:au,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Nt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),su.prototype=Object.assign(Object.create(ou.prototype),{constructor:su,ValueTypeName:"color"}),lu.prototype=Object.assign(Object.create(ou.prototype),{constructor:lu,ValueTypeName:"number"}),cu.prototype=Object.assign(Object.create(tu.prototype),{constructor:cu,interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)$n.slerpFlat(i,0,o,l-a,o,l,s);return i}}),uu.prototype=Object.assign(Object.create(ou.prototype),{constructor:uu,ValueTypeName:"quaternion",DefaultInterpolation:Ut,InterpolantFactoryMethodLinear:function(e){return new cu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),hu.prototype=Object.assign(Object.create(ou.prototype),{constructor:hu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Nt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),du.prototype=Object.assign(Object.create(ou.prototype),{constructor:du,ValueTypeName:"vector"}),Object.assign(fu,{parse:function(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(pu(n[e]).scale(r));const i=new fu(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i},toJSON:function(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(ou.toJSON(n[e]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){const i=t.length,o=[];for(let e=0;e<i;e++){let a=[],s=[];a.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=eu.getKeyframeOrder(a);a=eu.sortedArray(a,1,l),s=eu.sortedArray(s,1,l),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new lu(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new fu(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(i);if(o&&o.length>1){const e=o[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const o=[];for(const e in r)o.push(fu.CreateFromMorphTargetSequence(e,r[e],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];eu.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new lu(".morphTargetInfluence["+n+"]",e,o))}s=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(du,o+".position",i,"pos",r),n(uu,o+".quaternion",i,"rot",r),n(du,o+".scale",i,"scl",r)}}return 0===r.length?null:new fu(i,s,r,a)}}),Object.assign(fu.prototype,{resetDuration:function(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new fu(this.name,this.duration,e,this.blendMode)},toJSON:function(){return fu.toJSON(this)}});const mu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function gu(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}const yu=new gu;function vu(e){this.manager=void 0!==e?e:yu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(vu.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const _u={};function bu(e){vu.call(this,e)}function xu(e){vu.call(this,e)}function wu(e){vu.call(this,e)}function Su(e){vu.call(this,e)}function Au(e){vu.call(this,e)}function Eu(e){vu.call(this,e)}function Mu(e){vu.call(this,e)}function Cu(){this.type="Curve",this.arcLengthDivisions=200}function Tu(e,t,n,r,i,o,a,s){Cu.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Pu(e,t,n,r,i,o){Tu.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Du(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}bu.prototype=Object.assign(Object.create(vu.prototype),{constructor:bu,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=mu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0!==_u[e])return void _u[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);r="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{_u[e]=[],_u[e].push({onLoad:t,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,r=_u[e];if(delete _u[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),mu.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=_u[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=_u[e];delete _u[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=_u[e];delete _u[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return i.manager.itemStart(e),s},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),xu.prototype=Object.assign(Object.create(vu.prototype),{constructor:xu,load:function(e,t,n,r){const i=this,o=new bu(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const r=fu.parse(e[n]);t.push(r)}return t}}),wu.prototype=Object.assign(Object.create(vu.prototype),{constructor:wu,load:function(e,t,n,r){const i=this,o=[],a=new jl,s=new bu(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=_e),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=_e),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}),Su.prototype=Object.assign(Object.create(vu.prototype),{constructor:Su,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=mu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),mu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),Au.prototype=Object.assign(Object.create(vu.prototype),{constructor:Au,load:function(e,t,n,r){const i=new wo,o=new Su(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}),Eu.prototype=Object.assign(Object.create(vu.prototype),{constructor:Eu,load:function(e,t,n,r){const i=this,o=new Ao,a=new bu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:de,o.wrapT=void 0!==n.wrapT?n.wrapT:de,o.magFilter=void 0!==n.magFilter?n.magFilter:_e,o.minFilter=void 0!==n.minFilter?n.minFilter:_e,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=we),1===n.mipmapCount&&(o.minFilter=_e),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Mu.prototype=Object.assign(Object.create(vu.prototype),{constructor:Mu,load:function(e,t,n,r){const i=new Wn,o=new Su(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?ze:Fe,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(Cu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)},getTangent:function(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new Un:new Jn);return s.copy(a).sub(o).normalize(),s},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Jn,r=[],i=[],o=[],a=new Jn,s=new Er;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new Jn),r[t].normalize()}i[0]=new Jn,o[0]=new Jn;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(r[t-1],r[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Nn.clamp(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Nn.clamp(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Tu.prototype=Object.create(Cu.prototype),Tu.prototype.constructor=Tu,Tu.prototype.isEllipseCurve=!0,Tu.prototype.getPoint=function(e,t){const n=t||new Un,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)},Tu.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Tu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Tu.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Pu.prototype=Object.create(Tu.prototype),Pu.prototype.constructor=Pu,Pu.prototype.isArcCurve=!0;const ku=new Jn,Ou=new Du,Iu=new Du,Ru=new Du;function Lu(e=[],t=!1,n="centripetal",r=.5){Cu.call(this),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}function Bu(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function zu(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Fu(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Nu(e=new Un,t=new Un,n=new Un,r=new Un){Cu.call(this),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}function Uu(e=new Jn,t=new Jn,n=new Jn,r=new Jn){Cu.call(this),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}function ju(e=new Un,t=new Un){Cu.call(this),this.type="LineCurve",this.v1=e,this.v2=t}function Vu(e=new Jn,t=new Jn){Cu.call(this),this.type="LineCurve3",this.v1=e,this.v2=t}function Gu(e=new Un,t=new Un,n=new Un){Cu.call(this),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}function Hu(e=new Jn,t=new Jn,n=new Jn){Cu.call(this),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}function Wu(e=[]){Cu.call(this),this.type="SplineCurve",this.points=e}Lu.prototype=Object.create(Cu.prototype),Lu.prototype.constructor=Lu,Lu.prototype.isCatmullRomCurve3=!0,Lu.prototype.getPoint=function(e,t=new Jn){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?a=r[(l-1)%i]:(ku.subVectors(r[0],r[1]).add(r[0]),a=ku);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(ku.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=ku),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Ou.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,t,n,r),Iu.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,t,n,r),Ru.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(Ou.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),Iu.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),Ru.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set(Ou.calc(c),Iu.calc(c),Ru.calc(c)),n},Lu.prototype.copy=function(e){Cu.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Lu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Lu.prototype.fromJSON=function(e){Cu.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Jn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Nu.prototype=Object.create(Cu.prototype),Nu.prototype.constructor=Nu,Nu.prototype.isCubicBezierCurve=!0,Nu.prototype.getPoint=function(e,t=new Un){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fu(e,r.x,i.x,o.x,a.x),Fu(e,r.y,i.y,o.y,a.y)),n},Nu.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Nu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Nu.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Uu.prototype=Object.create(Cu.prototype),Uu.prototype.constructor=Uu,Uu.prototype.isCubicBezierCurve3=!0,Uu.prototype.getPoint=function(e,t=new Jn){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fu(e,r.x,i.x,o.x,a.x),Fu(e,r.y,i.y,o.y,a.y),Fu(e,r.z,i.z,o.z,a.z)),n},Uu.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Uu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Uu.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ju.prototype=Object.create(Cu.prototype),ju.prototype.constructor=ju,ju.prototype.isLineCurve=!0,ju.prototype.getPoint=function(e,t=new Un){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ju.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ju.prototype.getTangent=function(e,t){const n=t||new Un;return n.copy(this.v2).sub(this.v1).normalize(),n},ju.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ju.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ju.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Vu.prototype=Object.create(Cu.prototype),Vu.prototype.constructor=Vu,Vu.prototype.isLineCurve3=!0,Vu.prototype.getPoint=function(e,t=new Jn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Vu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Vu.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Vu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Vu.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Gu.prototype=Object.create(Cu.prototype),Gu.prototype.constructor=Gu,Gu.prototype.isQuadraticBezierCurve=!0,Gu.prototype.getPoint=function(e,t=new Un){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(zu(e,r.x,i.x,o.x),zu(e,r.y,i.y,o.y)),n},Gu.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Gu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Gu.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hu.prototype=Object.create(Cu.prototype),Hu.prototype.constructor=Hu,Hu.prototype.isQuadraticBezierCurve3=!0,Hu.prototype.getPoint=function(e,t=new Jn){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(zu(e,r.x,i.x,o.x),zu(e,r.y,i.y,o.y),zu(e,r.z,i.z,o.z)),n},Hu.prototype.copy=function(e){return Cu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hu.prototype.fromJSON=function(e){return Cu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Wu.prototype=Object.create(Cu.prototype),Wu.prototype.constructor=Wu,Wu.prototype.isSplineCurve=!0,Wu.prototype.getPoint=function(e,t=new Un){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(Bu(a,s.x,l.x,c.x,u.x),Bu(a,s.y,l.y,c.y,u.y)),n},Wu.prototype.copy=function(e){Cu.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this},Wu.prototype.toJSON=function(){const e=Cu.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e},Wu.prototype.fromJSON=function(e){Cu.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Un).fromArray(n))}return this};var qu=Object.freeze({__proto__:null,ArcCurve:Pu,CatmullRomCurve3:Lu,CubicBezierCurve:Nu,CubicBezierCurve3:Uu,EllipseCurve:Tu,LineCurve:ju,LineCurve3:Vu,QuadraticBezierCurve:Gu,QuadraticBezierCurve3:Hu,SplineCurve:Wu});function Zu(){Cu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Xu(e){Zu.call(this),this.type="Path",this.currentPoint=new Un,e&&this.setFromPoints(e)}function Yu(e){Xu.call(this,e),this.uuid=Nn.generateUUID(),this.type="Shape",this.holes=[]}function $u(e,t=1){$r.call(this),this.type="Light",this.color=new vi(e),this.intensity=t}function Ju(e,t,n){$u.call(this,e,n),this.type="HemisphereLight",this.position.copy($r.DefaultUp),this.updateMatrix(),this.groundColor=new vi(t)}function Ku(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Un(512,512),this.map=null,this.mapPass=null,this.matrix=new Er,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Co,this._frameExtents=new Un(1,1),this._viewportCount=1,this._viewports=[new Zn(0,0,1,1)]}function Qu(){Ku.call(this,new _o(50,1,.5,500)),this.focus=1}function eh(e,t,n,r,i,o){$u.call(this,e,t),this.type="SpotLight",this.position.copy($r.DefaultUp),this.updateMatrix(),this.target=new $r,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Qu}function th(){Ku.call(this,new _o(90,1,.5,500)),this._frameExtents=new Un(4,2),this._viewportCount=6,this._viewports=[new Zn(2,1,1,1),new Zn(0,1,1,1),new Zn(3,1,1,1),new Zn(1,1,1,1),new Zn(3,0,1,1),new Zn(1,0,1,1)],this._cubeDirections=[new Jn(1,0,0),new Jn(-1,0,0),new Jn(0,0,1),new Jn(0,0,-1),new Jn(0,1,0),new Jn(0,-1,0)],this._cubeUps=[new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,0,1),new Jn(0,0,-1)]}function nh(e,t,n,r){$u.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new th}function rh(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){vo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}function ih(){Ku.call(this,new rh(-5,5,5,-5,.5,500))}function oh(e,t){$u.call(this,e,t),this.type="DirectionalLight",this.position.copy($r.DefaultUp),this.updateMatrix(),this.target=new $r,this.shadow=new ih}function ah(e,t){$u.call(this,e,t),this.type="AmbientLight"}function sh(e,t,n,r){$u.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Zu.prototype=Object.assign(Object.create(Cu.prototype),{constructor:Zu,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ju(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],o=i.getLength(),a=0===o?0:1-e/o;return i.getPointAt(a)}r++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Cu.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Cu.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Cu.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new qu[n.type]).fromJSON(n))}return this}}),Xu.prototype=Object.assign(Object.create(Zu.prototype),{constructor:Xu,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new ju(this.currentPoint.clone(),new Un(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){const i=new Gu(this.currentPoint.clone(),new Un(e,t),new Un(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){const a=new Nu(this.currentPoint.clone(),new Un(e,t),new Un(n,r),new Un(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){const t=new Wu([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){const l=new Tu(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Zu.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=Zu.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Zu.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Yu.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Yu,getPointsHoles:function(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Xu.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){const e=Xu.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Xu.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Xu).fromJSON(n))}return this}}),$u.prototype=Object.assign(Object.create($r.prototype),{constructor:$u,isLight:!0,copy:function(e){return $r.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=$r.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ju.prototype=Object.assign(Object.create($u.prototype),{constructor:Ju,isHemisphereLight:!0,copy:function(e){return $u.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ku.prototype,{_projScreenMatrix:new Er,_lightPositionWorld:new Jn,_lookTarget:new Jn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Qu.prototype=Object.assign(Object.create(Ku.prototype),{constructor:Qu,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*Nn.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),Ku.prototype.updateMatrices.call(this,e)}}),eh.prototype=Object.assign(Object.create($u.prototype),{constructor:eh,isSpotLight:!0,copy:function(e){return $u.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),th.prototype=Object.assign(Object.create(Ku.prototype),{constructor:th,isPointLightShadow:!0,updateMatrices:function(e,t=0){const n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),nh.prototype=Object.assign(Object.create($u.prototype),{constructor:nh,isPointLight:!0,copy:function(e){return $u.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),rh.prototype=Object.assign(Object.create(vo.prototype),{constructor:rh,isOrthographicCamera:!0,copy:function(e,t){return vo.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=$r.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),ih.prototype=Object.assign(Object.create(Ku.prototype),{constructor:ih,isDirectionalLightShadow:!0,updateMatrices:function(e){Ku.prototype.updateMatrices.call(this,e)}}),oh.prototype=Object.assign(Object.create($u.prototype),{constructor:oh,isDirectionalLight:!0,copy:function(e){return $u.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ah.prototype=Object.assign(Object.create($u.prototype),{constructor:ah,isAmbientLight:!0}),sh.prototype=Object.assign(Object.create($u.prototype),{constructor:sh,isRectAreaLight:!0,copy:function(e){return $u.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=$u.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class lh{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Jn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}function ch(e,t){$u.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new lh}function uh(e){vu.call(this,e),this.textures={}}ch.prototype=Object.assign(Object.create($u.prototype),{constructor:ch,isLightProbe:!0,copy:function(e){return $u.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=$u.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),uh.prototype=Object.assign(Object.create(vu.prototype),{constructor:uh,load:function(e,t,n,r){const i=this,o=new bu(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new Qc[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new vi).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new vi).setHex(i.value);break;case"v2":r.uniforms[t].value=(new Un).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new Jn).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new Zn).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new jn).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Er).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Un).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Un).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),r},setTextures:function(e){return this.textures=e,this}});const hh={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function dh(){qi.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function fh(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ei.call(this,e,t,n),this.meshPerAttribute=r||1}function ph(e){vu.call(this,e)}dh.prototype=Object.assign(Object.create(qi.prototype),{constructor:dh,isInstancedBufferGeometry:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=qi.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),fh.prototype=Object.assign(Object.create(Ei.prototype),{constructor:fh,isInstancedBufferAttribute:!0,copy:function(e){return Ei.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=Ei.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),ph.prototype=Object.assign(Object.create(vu.prototype),{constructor:ph,load:function(e,t,n,r){const i=this,o=new bu(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)},parse:function(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=new Ns(Fi(i.type,o),i.stride);return a.uuid=i.uuid,t[r]=a,a}const i=e.isInstancedBufferGeometry?new dh:new qi,o=e.data.index;if(void 0!==o){const e=Fi(o.type,o.array);i.setIndex(new Ei(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let o;if(n.isInterleavedBufferAttribute)o=new js(r(e.data,n.data),n.itemSize,n.offset,n.normalized);else{const e=Fi(n.type,n.array);o=new(n.isInstancedBufferAttribute?fh:Ei)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),i.setAttribute(t,o)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let a;a=i.isInterleavedBufferAttribute?new js(r(e.data,i.data),i.itemSize,i.offset,i.normalized):new Ei(Fi(i.type,i.array),i.itemSize,i.normalized),void 0!==i.name&&(a.name=i.name),o.push(a)}i.morphAttributes[t]=o}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Jn;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new gr(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}});class mh extends vu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?hh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new bu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in o)if(o[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Yu).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new gl).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};let r;if(void 0!==e){const i=new ph;for(let o=0,a=e.length;o<a;o++){let a;const s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Vc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":a=new Vc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Vc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Vc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Vc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Vc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Vc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Vc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Vc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Vc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Vc[s.type]((new qu[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Vc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Vc[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];r.push(n)}a=new Vc[s.type](r,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];r.push(n)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new qu[e.type]).fromJSON(e)),a=new Vc[s.type](r,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new uh;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=fu.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Fi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new gu(t);i=new Su(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=o(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new Ao(t.data,t.width,t.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image];Array.isArray(s)?(a=new wo(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new Ao(s.data,s.width,s.height):new Wn(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,gh)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],yh),a.wrapT=n(o.wrap[1],yh)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,vh)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,vh)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),r[o.uuid]=a}return r}parseObject(e,t,n,r){let i,o,a;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Fs,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new vi(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new zs(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Bs(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new _o(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new rh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new ah(e.color,e.intensity);break;case"DirectionalLight":i=new oh(e.color,e.intensity);break;case"PointLight":i=new nh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new sh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new eh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Ju(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new ch).fromJSON(e);break;case"SkinnedMesh":o=s(e.geometry),a=l(e.material),i=new dl(o,a),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":o=s(e.geometry),a=l(e.material),i=new uo(o,a);break;case"InstancedMesh":o=s(e.geometry),a=l(e.material);const t=e.count,n=e.instanceMatrix;i=new xl(o,a,t),i.instanceMatrix=new Ei(new Float32Array(n.array),16);break;case"LOD":i=new al;break;case"Line":i=new Tl(s(e.geometry),l(e.material));break;case"LineLoop":i=new Ol(s(e.geometry),l(e.material));break;case"LineSegments":i=new kl(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":i=new Fl(s(e.geometry),l(e.material));break;case"Sprite":i=new nl(l(e.material));break;case"Group":i=new Ds;break;case"Bone":i=new fl;break;default:i=new $r}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)i.add(this.parseObject(o[e],t,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const gh={UVMapping:ie,CubeReflectionMapping:oe,CubeRefractionMapping:ae,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:ue},yh={RepeatWrapping:he,ClampToEdgeWrapping:de,MirroredRepeatWrapping:fe},vh={NearestFilter:pe,NearestMipmapNearestFilter:me,NearestMipmapLinearFilter:ye,LinearFilter:_e,LinearMipmapNearestFilter:be,LinearMipmapLinearFilter:we};function _h(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),vu.call(this,e),this.options={premultiplyAlpha:"none"}}function bh(){this.type="ShapePath",this.color=new vi,this.subPaths=[],this.currentPath=null}_h.prototype=Object.assign(Object.create(vu.prototype),{constructor:_h,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=mu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,i.options)})).then((function(n){mu.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(bh.prototype,{moveTo:function(e,t){return this.currentPath=new Xu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Yu;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=Ac.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,l;const c=[];if(1===o.length)return s=o[0],l=new Yu,l.curves=s.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const h=[],d=[];let f,p,m=[],g=0;d[g]=void 0,m[g]=[];for(let t=0,n=o.length;t<n;t++)s=o[t],f=s.getPoints(),a=i(f),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new Yu,p:f},d[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){l=d[e].s,c.push(l),p=m[e];for(let e=0,t=p.length;e<t;e++)l.holes.push(p[e].h)}return c}});class xh{constructor(e){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function(e,t,n){const r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,l=0;for(let e=0;e<r.length;e++){const t=r[e];if("\n"===t)s=0,l-=o;else{const e=wh(t,i,s,l,n);s+=e.offsetX,a.push(e.path)}}return a}(e,t,this.data);for(let e=0,t=r.length;e<t;e++)Array.prototype.push.apply(n,r[e].toShapes());return n}}function wh(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const a=new bh;let s,l,c,u,h,d,f,p;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=e.length;i<o;)switch(e[i++]){case"m":s=e[i++]*t+n,l=e[i++]*t+r,a.moveTo(s,l);break;case"l":s=e[i++]*t+n,l=e[i++]*t+r,a.lineTo(s,l);break;case"q":c=e[i++]*t+n,u=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,a.quadraticCurveTo(h,d,c,u);break;case"b":c=e[i++]*t+n,u=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,f=e[i++]*t+n,p=e[i++]*t+r,a.bezierCurveTo(h,d,f,p,c,u)}}return{offsetX:o.ha*t,path:a}}function Sh(e){vu.call(this,e)}let Ah;Sh.prototype=Object.assign(Object.create(vu.prototype),{constructor:Sh,load:function(e,t,n,r){const i=this,o=new bu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new xh(e)}});const Eh={getContext:function(){return void 0===Ah&&(Ah=new(window.AudioContext||window.webkitAudioContext)),Ah},setContext:function(e){Ah=e}};function Mh(e){vu.call(this,e)}function Ch(e,t,n){ch.call(this,void 0,n);const r=(new vi).set(e),i=(new vi).set(t),o=new Jn(r.r,r.g,r.b),a=new Jn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function Th(e,t){ch.call(this,void 0,t);const n=(new vi).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Mh.prototype=Object.assign(Object.create(vu.prototype),{constructor:Mh,load:function(e,t,n,r){const i=this,o=new bu(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);Eh.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}),Ch.prototype=Object.assign(Object.create(ch.prototype),{constructor:Ch,isHemisphereLightProbe:!0,copy:function(e){return ch.prototype.copy.call(this,e),this},toJSON:function(e){return ch.prototype.toJSON.call(this,e)}}),Th.prototype=Object.assign(Object.create(ch.prototype),{constructor:Th,isAmbientLightProbe:!0,copy:function(e){return ch.prototype.copy.call(this,e),this},toJSON:function(e){return ch.prototype.toJSON.call(this,e)}});const Ph=new Er,Dh=new Er;function kh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _o,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _o,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(kh.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,o=t.near*Math.tan(Nn.DEG2RAD*t.fov*.5)/t.zoom;let a,s;Dh.elements[12]=-r,Ph.elements[12]=r,a=-o*t.aspect+i,s=o*t.aspect+i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*t.aspect-i,s=o*t.aspect-i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Dh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ph)}});class Oh{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ih(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Ih();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Ih(){return("undefined"==typeof performance?Date:performance).now()}const Rh=new Jn,Lh=new $n,Bh=new Jn,zh=new Jn;class Fh extends $r{constructor(){super(),this.type="AudioListener",this.context=Eh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Oh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Rh,Lh,Bh),zh.set(0,0,-1).applyQuaternion(Lh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Rh.x,e),t.positionY.linearRampToValueAtTime(Rh.y,e),t.positionZ.linearRampToValueAtTime(Rh.z,e),t.forwardX.linearRampToValueAtTime(zh.x,e),t.forwardY.linearRampToValueAtTime(zh.y,e),t.forwardZ.linearRampToValueAtTime(zh.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Rh.x,Rh.y,Rh.z),t.setOrientation(zh.x,zh.y,zh.z,n.x,n.y,n.z)}}class Nh extends $r{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Uh=new Jn,jh=new $n,Vh=new Jn,Gh=new Jn;class Hh extends Nh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Uh,jh,Vh),Gh.set(0,0,1).applyQuaternion(jh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Uh.x,e),t.positionY.linearRampToValueAtTime(Uh.y,e),t.positionZ.linearRampToValueAtTime(Uh.z,e),t.orientationX.linearRampToValueAtTime(Gh.x,e),t.orientationY.linearRampToValueAtTime(Gh.y,e),t.orientationZ.linearRampToValueAtTime(Gh.z,e)}else t.setPosition(Uh.x,Uh.y,Uh.z),t.setOrientation(Gh.x,Gh.y,Gh.z)}}class Wh{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}function qh(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(qh.prototype,{accumulate:function(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){a.setValue(n,r);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]},_slerp:function(e,t,n,r){$n.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){const o=this._workIndex*i;$n.multiplyQuaternionsFlat(e,o,e,t,e,n),$n.slerpFlat(e,t,e,t,e,o,r)},_lerp:function(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}},_lerpAdditive:function(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}});const Zh=new RegExp("[\\[\\]\\.:\\/]","g"),Xh="[^\\[\\]\\.:\\/]",Yh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",$h=/((?:WC+[\/:])*)/.source.replace("WC",Xh),Jh=/(WCOD+)?/.source.replace("WCOD",Yh),Kh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xh),Qh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xh),ed=new RegExp("^"+$h+Jh+Kh+Qh+"$"),td=["material","materials","bones"];function nd(e,t,n){const r=n||rd.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function rd(e,t,n){this.path=t,this.parsedPath=n||rd.parseTrackName(t),this.node=rd.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function id(){this.uuid=Nn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(nd.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(rd,{Composite:nd,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new rd.Composite(e,t,n):new rd(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Zh,"")},parseTrackName:function(e){const t=ed.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==td.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}}),Object.assign(rd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=rd.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(rd.prototype,{_getValue_unbound:rd.prototype.getValue,_setValue_unbound:rd.prototype.setValue}),Object.assign(id.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new rd(u,n[e],r[e]))}else if(d<l){a=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new rd(u,n[e],r[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const a=--i,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[c];t[l]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let n=c,r=s.length;n!==r;++n){const r=s[n];u[n]=new rd(r,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}});class od{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:Vt,endingEnd:Vt};for(let e=0;e!==o;++e){const t=i[e].createInterpolant(null);a[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case qt:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);break;case Wt:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===Ft;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===Bt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Gt,r.endingEnd=Gt):(r.endingStart=e?this.zeroSlopeAtStart?Gt:Vt:Ht,r.endingEnd=t?this.zeroSlopeAtEnd?Gt:Vt:Ht)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}function ad(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}ad.prototype=Object.assign(Object.create(Bn.prototype),{constructor:ad,_bindAction:function(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new qh(rd.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),o[e]=u}a[e].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ru(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?fu.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Wt),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new od(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c},existingAction:function(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?fu.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(r,e,i,o);const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this},setTime:function(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class sd{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new sd(void 0===this.value.clone?this.value:this.value.clone())}}function ld(e,t,n){Ns.call(this,e,t),this.meshPerAttribute=n||1}function cd(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function ud(e,t,n,r){this.ray=new Ar(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Br,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function hd(e,t){return e.distance-t.distance}function dd(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)dd(r[e],t,n,!0)}}ld.prototype=Object.assign(Object.create(Ns.prototype),{constructor:ld,isInstancedInterleavedBuffer:!0,copy:function(e){return Ns.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Ns.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Ns.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(cd.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(cd.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(ud.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(e,t,n){const r=n||[];return dd(e,this,r,t),r.sort(hd),r},intersectObjects:function(e,t,n){const r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let n=0,i=e.length;n<i;n++)dd(e[n],this,r,t);return r.sort(hd),r}});class fd{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Nn.clamp(t/this.radius,-1,1))),this}}class pd{constructor(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}const md=new Un;class gd{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new Un(1/0,1/0),this.max=void 0!==t?t:new Un(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=md.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Un),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Un),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Un),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Un),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return md.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yd=new Jn,vd=new Jn;class _d{constructor(e,t){this.start=void 0!==e?e:new Jn,this.end=void 0!==t?t:new Jn}set(e,t){return this.start.copy(e),this.end.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Jn),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Jn),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Jn),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){yd.subVectors(e,this.start),vd.subVectors(this.end,this.start);const n=vd.dot(vd);let r=vd.dot(yd)/n;return t&&(r=Nn.clamp(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Jn),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}function bd(e){$r.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}bd.prototype=Object.create($r.prototype),bd.prototype.constructor=bd,bd.prototype.isImmediateRenderObject=!0;const xd=new Jn;class wd extends $r{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new qi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,o=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Ri(r,3));const i=new wl({fog:!1,toneMapped:!1});this.cone=new kl(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),xd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Sd=new Jn,Ad=new Er,Ed=new Er;class Md extends kl{constructor(e){const t=Cd(e),n=new qi,r=[],i=[],o=new vi(0,0,1),a=new vi(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Ri(r,3)),n.setAttribute("color",new Ri(i,3)),super(n,new wl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ed.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(Ad.multiplyMatrices(Ed,i.matrixWorld),Sd.setFromMatrixPosition(Ad),r.setXYZ(n,Sd.x,Sd.y,Sd.z),Ad.multiplyMatrices(Ed,i.parent.matrixWorld),Sd.setFromMatrixPosition(Ad),r.setXYZ(n+1,Sd.x,Sd.y,Sd.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Cd(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Cd(e.children[n]));return t}class Td extends uo{constructor(e,t,n){super(new Lc(t,4,2),new wi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Pd=new Jn,Dd=new vi,kd=new vi;class Od extends $r{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new kc(t);r.rotateY(.5*Math.PI),this.material=new wi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ei(o,3)),this.add(new uo(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Dd.copy(this.light.color),kd.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Dd:kd;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Pd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Id extends kl{constructor(e=10,t=10,n=4473924,r=8947848){n=new vi(n),r=new vi(r);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let e=0,c=0,u=-a;e<=t;e++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new qi;c.setAttribute("position",new Ri(s,3)),c.setAttribute("color",new Ri(l,3)),super(c,new wl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Rd extends kl{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new vi(i),o=new vi(o);const a=[],s=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;a.push(0,0,0),a.push(l,0,c);const u=1&n?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const l=1&t?i:o,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;a.push(n,0,i),s.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,a.push(n,0,i),s.push(l.r,l.g,l.b)}}const l=new qi;l.setAttribute("position",new Ri(a,3)),l.setAttribute("color",new Ri(s,3)),super(l,new wl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Ld=new Jn,Bd=new Jn,zd=new Jn;class Fd extends $r{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new qi;r.setAttribute("position",new Ri([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new wl({fog:!1,toneMapped:!1});this.lightPlane=new Tl(r,i),this.add(this.lightPlane),r=new qi,r.setAttribute("position",new Ri([0,0,0,0,0,1],3)),this.targetLine=new Tl(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Ld.setFromMatrixPosition(this.light.matrixWorld),Bd.setFromMatrixPosition(this.light.target.matrixWorld),zd.subVectors(Bd,Ld),this.lightPlane.lookAt(Bd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Bd),this.targetLine.scale.z=zd.length()}}const Nd=new Jn,Ud=new vo;class jd extends kl{constructor(e){const t=new qi,n=new wl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new vi(16755200),s=new vi(16711680),l=new vi(43775),c=new vi(16777215),u=new vi(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new Ri(r,3)),t.setAttribute("color",new Ri(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;Ud.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vd("c",t,e,Ud,0,0,-1),Vd("t",t,e,Ud,0,0,1),Vd("n1",t,e,Ud,-1,-1,-1),Vd("n2",t,e,Ud,1,-1,-1),Vd("n3",t,e,Ud,-1,1,-1),Vd("n4",t,e,Ud,1,1,-1),Vd("f1",t,e,Ud,-1,-1,1),Vd("f2",t,e,Ud,1,-1,1),Vd("f3",t,e,Ud,-1,1,1),Vd("f4",t,e,Ud,1,1,1),Vd("u1",t,e,Ud,.7,1.1,-1),Vd("u2",t,e,Ud,-.7,1.1,-1),Vd("u3",t,e,Ud,0,2,-1),Vd("cf1",t,e,Ud,-1,0,1),Vd("cf2",t,e,Ud,1,0,1),Vd("cf3",t,e,Ud,0,-1,1),Vd("cf4",t,e,Ud,0,1,1),Vd("cn1",t,e,Ud,-1,0,-1),Vd("cn2",t,e,Ud,1,0,-1),Vd("cn3",t,e,Ud,0,-1,-1),Vd("cn4",t,e,Ud,0,1,-1),e.getAttribute("position").needsUpdate=!0}}function Vd(e,t,n,r,i,o,a){Nd.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Nd.x,Nd.y,Nd.z)}}const Gd=new er;class Hd extends kl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new qi;i.setIndex(new Ei(n,1)),i.setAttribute("position",new Ei(r,3)),super(i,new wl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Gd.setFromObject(this.object),Gd.isEmpty())return;const t=Gd.min,n=Gd.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return kl.prototype.copy.call(this,e),this.object=e.object,this}}class Wd extends kl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new qi;r.setIndex(new Ei(n,1)),r.setAttribute("position",new Ri([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new wl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class qd extends Tl{constructor(e,t=1,n=16776960){const r=n,i=new qi;i.setAttribute("position",new Ri([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new wl({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new qi;o.setAttribute("position",new Ri([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new uo(o,new wi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?m:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Zd=new Jn;let Xd,Yd;class $d extends $r{constructor(e,t,n,r,i,o){super(),this.type="ArrowHelper",void 0===e&&(e=new Jn(0,0,1)),void 0===t&&(t=new Jn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Xd&&(Xd=new qi,Xd.setAttribute("position",new Ri([0,0,0,0,1,0],3)),Yd=new Wl(0,.5,1,5,1),Yd.translate(0,-.5,0)),this.position.copy(t),this.line=new Tl(Xd,new wl({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new uo(Yd,new wi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Zd.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Zd,t)}}setLength(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Jd extends kl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new qi;n.setAttribute("position",new Ri(t,3)),n.setAttribute("color",new Ri([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new wl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const Kd=new Float32Array(1),Qd=new Int32Array(Kd.buffer),ef={toHalfFloat:function(e){Kd[0]=e;const t=Qd[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}},tf=Math.pow(2,8),nf=[.125,.215,.35,.446,.526,.582],rf=5+nf.length,of={[$t]:0,[Jt]:1,[Qt]:2,[tn]:3,[nn]:4,[rn]:5,[Kt]:6},af=new wi({side:m,depthWrite:!1,depthTest:!1}),sf=new uo(new fo,af),lf=new rh,{_lodPlanes:cf,_sizeLods:uf,_sigmas:hf}=bf(),df=new vi;let ff=null;const pf=(1+Math.sqrt(5))/2,mf=1/pf,gf=[new Jn(1,1,1),new Jn(-1,1,1),new Jn(1,1,-1),new Jn(-1,1,-1),new Jn(0,pf,mf),new Jn(0,pf,-mf),new Jn(mf,0,pf),new Jn(-mf,0,pf),new Jn(pf,mf,0),new Jn(-pf,mf,0)];function yf(e){const t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-n)),(n+128)/255}class vf{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=new Hc({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Jn(0,1,0)},inputEncoding:{value:of[$t]},outputEncoding:{value:of[$t]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:_,depthTest:!1,depthWrite:!1}),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){ff=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Af(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Sf(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<cf.length;e++)cf[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(ff),e.scissorTest=!1,wf(e,0,0,e.width,e.height)}_fromTexture(e){ff=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:pe,minFilter:pe,generateMipmaps:!1,type:Ae,format:je,encoding:_f(e)?e.encoding:Qt,depthBuffer:!1},n=xf(t);return n.depthBuffer=!e,this._pingPongRenderTarget=xf(t),n}_compileMaterial(e){const t=new uo(cf[0],e);this._renderer.compile(t,lf)}_sceneToCubeUV(e,t,n,r){const i=new _o(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.outputEncoding,u=s.toneMapping;s.getClearColor(df),s.toneMapping=K,s.outputEncoding=$t,s.autoClear=!1;let h=!1;const d=e.background;if(d){if(d.isColor){af.color.copy(d).convertSRGBToLinear(),e.background=null;const t=yf(af.color);af.opacity=t,h=!0}}else{af.color.copy(df).convertSRGBToLinear();const e=yf(af.color);af.opacity=e,h=!0}for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,o[t],0),i.lookAt(a[t],0,0)):1==n?(i.up.set(0,0,o[t]),i.lookAt(0,a[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,a[t])),wf(r,n*tf,t>2?tf:0,tf,tf),s.setRenderTarget(r),h&&s.render(sf,i),s.render(e,i)}s.toneMapping=u,s.outputEncoding=c,s.autoClear=l}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Af()):null==this._equirectShader&&(this._equirectShader=Sf());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new uo(cf[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=of[e.encoding],o.outputEncoding.value=of[t.texture.encoding],wf(t,0,0,3*tf,2*tf),n.setRenderTarget(t),n.render(i,lf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<rf;t++){const n=Math.sqrt(hf[t]*hf[t]-hf[t-1]*hf[t-1]),r=gf[(t-1)%gf.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new uo(cf[r],l),u=l.uniforms,h=uf[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0==e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=of[e.texture.encoding],u.outputEncoding.value=of[e.texture.encoding];const y=uf[r];wf(t,3*Math.max(0,tf-2*y),(0===r?0:2*tf)+2*y*(r>4?r-8+4:0),3*y,2*y),s.setRenderTarget(t),s.render(c,lf)}}function _f(e){return void 0!==e&&e.type===Ae&&(e.encoding===$t||e.encoding===Jt||e.encoding===Kt)}function bf(){const e=[],t=[],n=[];let r=8;for(let i=0;i<rf;i++){const o=Math.pow(2,r);t.push(o);let a=1/o;i>4?a=nf[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,f=3,p=2,m=1,g=new Float32Array(f*d*h),y=new Float32Array(p*d*h),v=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,f*d*e),y.set(u,p*d*e);const i=[e,e,e,e,e,e];v.set(i,m*d*e)}const _=new qi;_.setAttribute("position",new Ei(g,f)),_.setAttribute("uv",new Ei(y,p)),_.setAttribute("faceIndex",new Ei(v,m)),e.push(_),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function xf(e){const t=new Xn(3*tf,3*tf,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function wf(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Sf(){return new Hc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Un(1,1)},inputEncoding:{value:of[$t]},outputEncoding:{value:of[$t]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:_,depthTest:!1,depthWrite:!1})}function Af(){return new Hc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:of[$t]},outputEncoding:{value:of[$t]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:_,depthTest:!1,depthWrite:!1})}function Ef(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new _i(e,t,n,i,o,a)}const Mf=0,Cf=1,Tf=0,Pf=1,Df=2;function kf(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Of(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function If(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Fl(e,t)}function Rf(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new nl(e)}function Lf(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Fl(e,t)}function Bf(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Il(e)}function zf(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Il(e)}function Ff(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Il(e)}function Nf(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Jn(e,t,n)}function Uf(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ei(e,t).setUsage(Mn)}function jf(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Mi(e,t)}function Vf(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ci(e,t)}function Gf(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ti(e,t)}function Hf(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Pi(e,t)}function Wf(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Di(e,t)}function qf(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ki(e,t)}function Zf(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Oi(e,t)}function Xf(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ri(e,t)}function Yf(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Li(e,t)}function $f(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Lu.call(this,e),this.type="catmullrom",this.closed=!0}function Jf(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Lu.call(this,e),this.type="catmullrom"}function Kf(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Lu.call(this,e),this.type="catmullrom"}function Qf(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Jd(e)}function ep(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Hd(e,t)}function tp(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new kl(new Ql(e.geometry),new wl({color:void 0!==t?t:16777215}))}function np(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new kl(new jc(e.geometry),new wl({color:void 0!==t?t:16777215}))}function rp(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new bu(e)}function ip(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Eu(e)}function op(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new So(e,n)}Cu.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Cu.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Xu.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),$f.prototype=Object.create(Lu.prototype),Jf.prototype=Object.create(Lu.prototype),Kf.prototype=Object.create(Lu.prototype),Object.assign(Kf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Id.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Md.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(vu.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hh.extractUrlBase(e)}}),vu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(gd.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(er.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(gr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Co.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},_d.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Nn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Nn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Nn.ceilPowerOfTwo(e)}}),Object.assign(jn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),Object.assign(Er.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Jn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},getInverse:function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),ei.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Object.assign($n.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Ar.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(hi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(hi,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hi.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hi.getNormal(e,t,n,r)}}),Object.assign(Yu.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Cc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Rc(this,e)}}),Object.assign(Un.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Jn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Zn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign($r.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties($r.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(uo.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(uo.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Zt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(al.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(gl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),dl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Cu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),_o.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties($u.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ei.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Mn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Mn)}}}),Object.assign(Ei.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Mn:En),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(qi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ei(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(qi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(dh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(ud.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Ns.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Mn},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Ns.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Mn:En),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Cc.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}}),Object.assign(Fs.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(sd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(xi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===y}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Zc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(qc.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(yo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Rs.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Rs.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Jt:$t}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Es.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Xn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Nh.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Mh).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Wh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},xo.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},xo.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)};const ap={merge:function(e,t,n){let r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function sp(){console.error("THREE.CanvasRenderer has been removed")}function lp(){console.error("THREE.JSONLoader has been removed.")}Gn.crossOrigin=void 0,Gn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Mu;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Gn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Au;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Gn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Gn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const cp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function up(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},1661:(e,t,n)=>{},7621:(e,t,n)=>{var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,l=i.round,c=i.min,u=i.max,h=i.random;function d(e,t){if(t=t||{},(e=e||"")instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=function(e){var t,n,r,s={r:0,g:0,b:0},l=1,h=null,d=null,f=null,p=!1,m=!1;return"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(D[e])e=D[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=G.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=G.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=G.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=G.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=G.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=G.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=G.hex8.exec(e))?{r:L(t[1]),g:L(t[2]),b:L(t[3]),a:N(t[4]),format:n?"name":"hex8"}:(t=G.hex6.exec(e))?{r:L(t[1]),g:L(t[2]),b:L(t[3]),format:n?"name":"hex"}:(t=G.hex4.exec(e))?{r:L(t[1]+""+t[1]),g:L(t[2]+""+t[2]),b:L(t[3]+""+t[3]),a:N(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=G.hex3.exec(e))&&{r:L(t[1]+""+t[1]),g:L(t[2]+""+t[2]),b:L(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(t=e.r,n=e.g,r=e.b,s={r:255*I(t,255),g:255*I(n,255),b:255*I(r,255)},p=!0,m="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(h=z(e.s),d=z(e.v),s=function(e,t,n){e=6*I(e,360),t=I(t,100),n=I(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),l=n*(1-(1-o)*t),c=r%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c]}}(e.h,h,d),p=!0,m="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(h=z(e.s),f=z(e.l),s=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,h,f),p=!0,m="hsl"),e.hasOwnProperty("a")&&(l=e.a)),l=O(l),{ok:p,format:e.format||m,r:c(255,u(s.r,0)),g:c(255,u(s.g,0)),b:c(255,u(s.b,0)),a:l}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function f(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,o=u(e,t,n),a=c(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function p(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,o=u(e,t,n),a=c(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function m(e,t,n,r){var i=[B(l(e).toString(16)),B(l(t).toString(16)),B(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[B(F(r)),B(l(e).toString(16)),B(l(t).toString(16)),B(l(n).toString(16))].join("")}function y(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=R(n.s),d(n)}function v(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=R(n.s),d(n)}function _(e){return d(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=R(n.l),d(n)}function x(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=u(0,c(255,n.r-l(-t/100*255))),n.g=u(0,c(255,n.g-l(-t/100*255))),n.b=u(0,c(255,n.b-l(-t/100*255))),d(n)}function w(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=R(n.l),d(n)}function S(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function A(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function E(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function M(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function C(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function T(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),i=360/n,o=[d(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(d(r));return o}function P(e,t){t=t||6;for(var n=d(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(d({h:r,s:i,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[B(l(e).toString(16)),B(l(t).toString(16)),B(l(n).toString(16)),B(F(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*I(this._r,255))+"%",g:l(100*I(this._g,255))+"%",b:l(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%)":"rgba("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=d(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:z(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),i=d(t).toRgb(),o=n/100;return d({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},d.readability=function(e,t){var n=d(e),r=d(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,i,o,a,s,l=d.readability(e,t);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=l>=4.5;break;case"AAlarge":i=l>=3;break;case"AAAsmall":i=l>=7}return i},d.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=d.readability(e,t[c]))>l&&(l=r,s=d(t[c]));return d.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var D=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=d.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(D);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function R(e){return c(1,u(0,e))}function L(e){return parseInt(e,16)}function B(e){return 1==e.length?"0"+e:""+e}function z(e){return e<=1&&(e=100*e+"%"),e}function F(e){return i.round(255*parseFloat(e)).toString(16)}function N(e){return L(e)/255}var U,j,V,G=(j="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",V="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+V),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(e){return!!G.CSS_UNIT.exec(e)}e.exports?e.exports=d:void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}(Math)},2739:e=>{var t=/\n/,n="\n",r=/\s/;function i(e,t,n,r){var i=e.indexOf(t,n);return-1===i||i>r?r:i}function o(e){return r.test(e)}function a(e,t,n,r){return{start:t,end:t+Math.min(r,n-t)}}e.exports=function(t,n){return e.exports.lines(t,n).map((function(e){return t.substring(e.start,e.end)})).join("\n")},e.exports.lines=function(e,r){if(0===(r=r||{}).width&&"nowrap"!==r.mode)return[];e=e||"";var s="number"==typeof r.width?r.width:Number.MAX_VALUE,l=Math.max(0,r.start||0),c="number"==typeof r.end?r.end:e.length,u=r.mode,h=r.measure||a;return"pre"===u?function(e,n,r,i,o){for(var a=[],s=r,l=r;l<i&&l<n.length;l++){var c=n.charAt(l),u=t.test(c);if(u||l===i-1){var h=e(n,s,u?l:l+1,o);a.push(h),s=l+1}}return a}(h,e,l,c,s):function(e,t,r,a,s,l){var c=[],u=s;for("nowrap"===l&&(u=Number.MAX_VALUE);r<a&&r<t.length;){for(var h=i(t,n,r,a);r<h&&o(t.charAt(r));)r++;var d=e(t,r,h,u),f=r+(d.end-d.start),p=f+n.length;if(f<h){for(;f>r&&!o(t.charAt(f));)f--;if(f===r)p>r+n.length&&p--,f=p;else for(p=f;f>r&&o(t.charAt(f-n.length));)f--}if(f>=r){var m=e(t,r,f,u);c.push(m)}r=p}return c}(h,e,l,c,s,u)}},7529:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)t.call(r,i)&&(e[i]=r[i])}return e};var t=Object.prototype.hasOwnProperty},5908:(e,t,n)=>{"use strict";e.exports=n.p+"efb86bbda5c64f820d84.svg"},8318:(e,t,n)=>{"use strict";e.exports=n.p+"4a6a04744a4a7878e932.svg"},7867:(e,t,n)=>{"use strict";e.exports=n.p+"5c5b9cf6f7edce1a59e8.png"},7539:(e,t,n)=>{"use strict";e.exports=n.p+"9e3fb8ac0548bbbd4959.png"},4802:(e,t,n)=>{"use strict";e.exports=n.p+"59ecb3d64966a06cd94b.png"},5851:(e,t,n)=>{"use strict";e.exports=n.p+"b424766e80711f247aea.jpg"},6237:(e,t,n)=>{"use strict";e.exports=n.p+"7edec26ade9435158c94.otf"},2259:(e,t,n)=>{"use strict";e.exports=n.p+"433abab51c68c2a5d24c.otf"},6706:(e,t,n)=>{"use strict";e.exports=n.p+"9485f0518ac1133a0141.otf"},5105:(e,t,n)=>{"use strict";e.exports=n.p+"cf27180747600ec8a6e7.otf"},7071:(e,t,n)=>{"use strict";e.exports=n.p+"095036d56695c523d80a.otf"},2271:(e,t,n)=>{"use strict";e.exports=n.p+"e7830ebddc0d174c307c.otf"},6607:e=>{"use strict";e.exports=JSON.parse('{"pages":["Georgia.png"],"chars":[{"id":87,"index":58,"char":"W","width":40,"height":29,"xoffset":-2,"yoffset":4,"xadvance":35,"chnl":15,"x":0,"y":0,"page":0},{"id":47,"index":18,"char":"/","width":18,"height":38,"xoffset":-1,"yoffset":2,"xadvance":17,"chnl":15,"x":0,"y":30,"page":0},{"id":92,"index":63,"char":"\\\\","width":18,"height":38,"xoffset":0,"yoffset":2,"xadvance":17,"chnl":15,"x":0,"y":69,"page":0},{"id":106,"index":77,"char":"j","width":14,"height":38,"xoffset":-5,"yoffset":2,"xadvance":11,"chnl":15,"x":0,"y":108,"page":0},{"id":124,"index":95,"char":"|","width":6,"height":38,"xoffset":4,"yoffset":2,"xadvance":14,"chnl":15,"x":0,"y":147,"page":0},{"id":40,"index":11,"char":"(","width":14,"height":37,"xoffset":0,"yoffset":2,"xadvance":14,"chnl":15,"x":0,"y":186,"page":0},{"id":41,"index":12,"char":")","width":14,"height":37,"xoffset":-1,"yoffset":2,"xadvance":14,"chnl":15,"x":7,"y":147,"page":0},{"id":123,"index":94,"char":"{","width":17,"height":37,"xoffset":-1,"yoffset":2,"xadvance":15,"chnl":15,"x":15,"y":108,"page":0},{"id":125,"index":96,"char":"}","width":17,"height":37,"xoffset":-1,"yoffset":2,"xadvance":15,"chnl":15,"x":15,"y":185,"page":0},{"id":36,"index":7,"char":"$","width":21,"height":36,"xoffset":1,"yoffset":2,"xadvance":22,"chnl":15,"x":22,"y":146,"page":0},{"id":81,"index":52,"char":"Q","width":28,"height":36,"xoffset":-1,"yoffset":3,"xadvance":27,"chnl":15,"x":33,"y":183,"page":0},{"id":91,"index":62,"char":"[","width":13,"height":36,"xoffset":1,"yoffset":2,"xadvance":14,"chnl":15,"x":33,"y":220,"page":0},{"id":93,"index":64,"char":"]","width":13,"height":36,"xoffset":-1,"yoffset":2,"xadvance":14,"chnl":15,"x":47,"y":220,"page":0},{"id":77,"index":48,"char":"M","width":35,"height":29,"xoffset":-1,"yoffset":4,"xadvance":33,"chnl":15,"x":61,"y":220,"page":0},{"id":64,"index":35,"char":"@","width":32,"height":34,"xoffset":1,"yoffset":5,"xadvance":33,"chnl":15,"x":19,"y":30,"page":0},{"id":109,"index":80,"char":"m","width":34,"height":22,"xoffset":-1,"yoffset":11,"xadvance":32,"chnl":15,"x":41,"y":0,"page":0},{"id":98,"index":69,"char":"b","width":23,"height":32,"xoffset":-2,"yoffset":2,"xadvance":20,"chnl":15,"x":0,"y":224,"page":0},{"id":100,"index":71,"char":"d","width":23,"height":32,"xoffset":-1,"yoffset":2,"xadvance":21,"chnl":15,"x":19,"y":65,"page":0},{"id":78,"index":49,"char":"N","width":31,"height":29,"xoffset":-2,"yoffset":4,"xadvance":28,"chnl":15,"x":33,"y":98,"page":0},{"id":102,"index":73,"char":"f","width":18,"height":31,"xoffset":-2,"yoffset":2,"xadvance":12,"chnl":15,"x":43,"y":65,"page":0},{"id":104,"index":75,"char":"h","width":24,"height":31,"xoffset":-2,"yoffset":2,"xadvance":21,"chnl":15,"x":52,"y":23,"page":0},{"id":105,"index":76,"char":"i","width":13,"height":31,"xoffset":-1,"yoffset":2,"xadvance":11,"chnl":15,"x":62,"y":55,"page":0},{"id":107,"index":78,"char":"k","width":24,"height":31,"xoffset":-2,"yoffset":2,"xadvance":19,"chnl":15,"x":44,"y":128,"page":0},{"id":108,"index":79,"char":"l","width":13,"height":31,"xoffset":-2,"yoffset":2,"xadvance":10,"chnl":15,"x":65,"y":87,"page":0},{"id":119,"index":90,"char":"w","width":31,"height":21,"xoffset":-2,"yoffset":12,"xadvance":27,"chnl":15,"x":76,"y":0,"page":0},{"id":33,"index":4,"char":"!","width":9,"height":30,"xoffset":2,"yoffset":3,"xadvance":12,"chnl":15,"x":76,"y":55,"page":0},{"id":37,"index":8,"char":"%","width":30,"height":30,"xoffset":0,"yoffset":3,"xadvance":29,"chnl":15,"x":77,"y":22,"page":0},{"id":38,"index":9,"char":"&","width":28,"height":30,"xoffset":-1,"yoffset":3,"xadvance":26,"chnl":15,"x":62,"y":160,"page":0},{"id":51,"index":22,"char":"3","width":21,"height":30,"xoffset":-1,"yoffset":10,"xadvance":20,"chnl":15,"x":69,"y":119,"page":0},{"id":52,"index":23,"char":"4","width":22,"height":30,"xoffset":-1,"yoffset":10,"xadvance":20,"chnl":15,"x":79,"y":86,"page":0},{"id":54,"index":25,"char":"6","width":21,"height":30,"xoffset":0,"yoffset":3,"xadvance":20,"chnl":15,"x":86,"y":53,"page":0},{"id":56,"index":27,"char":"8","width":22,"height":30,"xoffset":0,"yoffset":3,"xadvance":21,"chnl":15,"x":91,"y":117,"page":0},{"id":57,"index":28,"char":"9","width":21,"height":30,"xoffset":-1,"yoffset":10,"xadvance":20,"chnl":15,"x":102,"y":84,"page":0},{"id":63,"index":34,"char":"?","width":18,"height":30,"xoffset":0,"yoffset":3,"xadvance":17,"chnl":15,"x":91,"y":148,"page":0},{"id":65,"index":36,"char":"A","width":30,"height":29,"xoffset":-3,"yoffset":4,"xadvance":24,"chnl":15,"x":91,"y":179,"page":0},{"id":67,"index":38,"char":"C","width":25,"height":30,"xoffset":-1,"yoffset":4,"xadvance":23,"chnl":15,"x":110,"y":148,"page":0},{"id":71,"index":42,"char":"G","width":28,"height":30,"xoffset":-1,"yoffset":4,"xadvance":26,"chnl":15,"x":114,"y":115,"page":0},{"id":72,"index":43,"char":"H","width":30,"height":29,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":97,"y":209,"page":0},{"id":74,"index":45,"char":"J","width":21,"height":30,"xoffset":-2,"yoffset":4,"xadvance":19,"chnl":15,"x":128,"y":179,"page":0},{"id":79,"index":50,"char":"O","width":28,"height":30,"xoffset":-1,"yoffset":3,"xadvance":27,"chnl":15,"x":136,"y":146,"page":0},{"id":83,"index":54,"char":"S","width":21,"height":30,"xoffset":0,"yoffset":3,"xadvance":20,"chnl":15,"x":128,"y":210,"page":0},{"id":85,"index":56,"char":"U","width":30,"height":30,"xoffset":-1,"yoffset":4,"xadvance":27,"chnl":15,"x":150,"y":177,"page":0},{"id":103,"index":74,"char":"g","width":21,"height":30,"xoffset":-1,"yoffset":11,"xadvance":18,"chnl":15,"x":150,"y":208,"page":0},{"id":112,"index":83,"char":"p","width":23,"height":30,"xoffset":-1,"yoffset":11,"xadvance":21,"chnl":15,"x":172,"y":208,"page":0},{"id":113,"index":84,"char":"q","width":23,"height":30,"xoffset":-1,"yoffset":11,"xadvance":20,"chnl":15,"x":108,"y":0,"page":0},{"id":53,"index":24,"char":"5","width":20,"height":29,"xoffset":-1,"yoffset":10,"xadvance":19,"chnl":15,"x":108,"y":31,"page":0},{"id":55,"index":26,"char":"7","width":21,"height":29,"xoffset":0,"yoffset":10,"xadvance":18,"chnl":15,"x":124,"y":61,"page":0},{"id":66,"index":37,"char":"B","width":24,"height":29,"xoffset":0,"yoffset":4,"xadvance":24,"chnl":15,"x":129,"y":31,"page":0},{"id":68,"index":39,"char":"D","width":28,"height":29,"xoffset":0,"yoffset":4,"xadvance":27,"chnl":15,"x":132,"y":0,"page":0},{"id":69,"index":40,"char":"E","width":25,"height":29,"xoffset":0,"yoffset":4,"xadvance":24,"chnl":15,"x":143,"y":91,"page":0},{"id":70,"index":41,"char":"F","width":24,"height":29,"xoffset":0,"yoffset":4,"xadvance":22,"chnl":15,"x":146,"y":61,"page":0},{"id":73,"index":44,"char":"I","width":15,"height":29,"xoffset":-1,"yoffset":4,"xadvance":14,"chnl":15,"x":154,"y":30,"page":0},{"id":75,"index":46,"char":"K","width":28,"height":29,"xoffset":0,"yoffset":4,"xadvance":25,"chnl":15,"x":161,"y":0,"page":0},{"id":76,"index":47,"char":"L","width":24,"height":29,"xoffset":0,"yoffset":4,"xadvance":22,"chnl":15,"x":170,"y":30,"page":0},{"id":80,"index":51,"char":"P","width":23,"height":29,"xoffset":0,"yoffset":4,"xadvance":22,"chnl":15,"x":190,"y":0,"page":0},{"id":82,"index":53,"char":"R","width":28,"height":29,"xoffset":0,"yoffset":4,"xadvance":25,"chnl":15,"x":165,"y":121,"page":0},{"id":84,"index":55,"char":"T","width":26,"height":29,"xoffset":-2,"yoffset":4,"xadvance":22,"chnl":15,"x":169,"y":91,"page":0},{"id":86,"index":57,"char":"V","width":29,"height":29,"xoffset":-3,"yoffset":4,"xadvance":24,"chnl":15,"x":171,"y":60,"page":0},{"id":88,"index":59,"char":"X","width":29,"height":29,"xoffset":-2,"yoffset":4,"xadvance":26,"chnl":15,"x":195,"y":30,"page":0},{"id":89,"index":60,"char":"Y","width":28,"height":29,"xoffset":-3,"yoffset":4,"xadvance":22,"chnl":15,"x":214,"y":0,"page":0},{"id":90,"index":61,"char":"Z","width":25,"height":29,"xoffset":-2,"yoffset":4,"xadvance":22,"chnl":15,"x":181,"y":151,"page":0},{"id":121,"index":92,"char":"y","width":23,"height":29,"xoffset":-2,"yoffset":12,"xadvance":18,"chnl":15,"x":194,"y":121,"page":0},{"id":59,"index":30,"char":";","width":10,"height":28,"xoffset":0,"yoffset":12,"xadvance":11,"chnl":15,"x":62,"y":191,"page":0},{"id":95,"index":66,"char":"_","width":27,"height":6,"xoffset":-2,"yoffset":32,"xadvance":23,"chnl":15,"x":61,"y":250,"page":0},{"id":116,"index":87,"char":"t","width":16,"height":27,"xoffset":-2,"yoffset":6,"xadvance":12,"chnl":15,"x":73,"y":191,"page":0},{"id":35,"index":6,"char":"#","width":22,"height":26,"xoffset":1,"yoffset":7,"xadvance":23,"chnl":15,"x":181,"y":181,"page":0},{"id":48,"index":19,"char":"0","width":22,"height":24,"xoffset":0,"yoffset":10,"xadvance":22,"chnl":15,"x":196,"y":90,"page":0},{"id":49,"index":20,"char":"1","width":16,"height":23,"xoffset":0,"yoffset":10,"xadvance":15,"chnl":15,"x":124,"y":91,"page":0},{"id":50,"index":21,"char":"2","width":20,"height":23,"xoffset":0,"yoffset":10,"xadvance":20,"chnl":15,"x":143,"y":121,"page":0},{"id":60,"index":31,"char":"<","width":20,"height":23,"xoffset":1,"yoffset":10,"xadvance":23,"chnl":15,"x":201,"y":60,"page":0},{"id":62,"index":33,"char":">","width":20,"height":23,"xoffset":1,"yoffset":10,"xadvance":23,"chnl":15,"x":196,"y":208,"page":0},{"id":110,"index":81,"char":"n","width":23,"height":22,"xoffset":-1,"yoffset":11,"xadvance":21,"chnl":15,"x":196,"y":232,"page":0},{"id":117,"index":88,"char":"u","width":23,"height":22,"xoffset":-1,"yoffset":11,"xadvance":21,"chnl":15,"x":204,"y":181,"page":0},{"id":118,"index":89,"char":"v","width":23,"height":21,"xoffset":-2,"yoffset":12,"xadvance":18,"chnl":15,"x":217,"y":204,"page":0},{"id":126,"index":97,"char":"~","width":23,"height":10,"xoffset":0,"yoffset":16,"xadvance":23,"chnl":15,"x":97,"y":241,"page":0},{"id":43,"index":14,"char":"+","width":22,"height":22,"xoffset":1,"yoffset":10,"xadvance":23,"chnl":15,"x":207,"y":151,"page":0},{"id":58,"index":29,"char":":","width":9,"height":22,"xoffset":1,"yoffset":12,"xadvance":11,"chnl":15,"x":44,"y":160,"page":0},{"id":61,"index":32,"char":"=","width":22,"height":13,"xoffset":1,"yoffset":15,"xadvance":23,"chnl":15,"x":121,"y":241,"page":0},{"id":97,"index":68,"char":"a","width":20,"height":22,"xoffset":-1,"yoffset":11,"xadvance":18,"chnl":15,"x":228,"y":174,"page":0},{"id":99,"index":70,"char":"c","width":19,"height":22,"xoffset":-1,"yoffset":11,"xadvance":16,"chnl":15,"x":220,"y":226,"page":0},{"id":101,"index":72,"char":"e","width":19,"height":22,"xoffset":-1,"yoffset":11,"xadvance":17,"chnl":15,"x":240,"y":226,"page":0},{"id":111,"index":82,"char":"o","width":21,"height":22,"xoffset":-1,"yoffset":11,"xadvance":19,"chnl":15,"x":241,"y":197,"page":0},{"id":114,"index":85,"char":"r","width":17,"height":22,"xoffset":-1,"yoffset":11,"xadvance":15,"chnl":15,"x":218,"y":115,"page":0},{"id":115,"index":86,"char":"s","width":17,"height":22,"xoffset":-1,"yoffset":11,"xadvance":16,"chnl":15,"x":219,"y":84,"page":0},{"id":120,"index":91,"char":"x","width":22,"height":21,"xoffset":-2,"yoffset":12,"xadvance":18,"chnl":15,"x":222,"y":60,"page":0},{"id":122,"index":93,"char":"z","width":18,"height":21,"xoffset":-1,"yoffset":12,"xadvance":16,"chnl":15,"x":225,"y":30,"page":0},{"id":94,"index":65,"char":"^","width":20,"height":16,"xoffset":1,"yoffset":3,"xadvance":23,"chnl":15,"x":150,"y":239,"page":0},{"id":42,"index":13,"char":"*","width":18,"height":16,"xoffset":0,"yoffset":3,"xadvance":17,"chnl":15,"x":171,"y":239,"page":0},{"id":34,"index":5,"char":"\\"","width":15,"height":14,"xoffset":0,"yoffset":2,"xadvance":15,"chnl":15,"x":108,"y":61,"page":0},{"id":44,"index":15,"char":",","width":10,"height":15,"xoffset":0,"yoffset":25,"xadvance":10,"chnl":15,"x":33,"y":128,"page":0},{"id":39,"index":10,"char":"\'","width":8,"height":14,"xoffset":0,"yoffset":2,"xadvance":8,"chnl":15,"x":24,"y":223,"page":0},{"id":45,"index":16,"char":"-","width":14,"height":7,"xoffset":-1,"yoffset":18,"xadvance":13,"chnl":15,"x":220,"y":249,"page":0},{"id":96,"index":67,"char":"`","width":11,"height":12,"xoffset":4,"yoffset":2,"xadvance":18,"chnl":15,"x":218,"y":138,"page":0},{"id":46,"index":17,"char":".","width":9,"height":9,"xoffset":0,"yoffset":25,"xadvance":10,"chnl":15,"x":19,"y":98,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":29,"xadvance":9,"chnl":15,"x":7,"y":185,"page":0}],"info":{"face":"Georgia","size":36,"bold":0,"italic":0,"charset":[" ","!","\\"","#","$","%","&","\'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[2,2,2,2],"spacing":[0,0]},"common":{"lineHeight":39,"base":29,"scaleW":512,"scaleH":256,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},6561:()=>{},5533:()=>{}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var t=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}},n={id:e,module:t,factory:__webpack_modules__[e],require:__webpack_require__};return __webpack_require__.i.forEach((function(e){e(n)})),t=n.module,n.factory.call(t.exports,t,t.exports,n.require),t.loaded=!0,t.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.c=__webpack_module_cache__,__webpack_require__.i=[],__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.hu=e=>e+"."+__webpack_require__.h()+".hot-update.js",__webpack_require__.hmrF=()=>"main."+__webpack_require__.h()+".hot-update.json",__webpack_require__.h=()=>"ded6994d348b75757702",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="covid-science:",__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=a[s];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==dataWebpackPrefix+n){i=l;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=e),inProgress[e]=[t];var c=(t,n)=>{i.onerror=i.onload=null,clearTimeout(u);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},u=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,n,r,i={},o=__webpack_require__.c,a=[],s=[],l="idle";function c(e){l=e;for(var t=0;t<s.length;t++)s[t].call(null,e)}function u(e){if(0===t.length)return e();var n=t;return t=[],Promise.all(n).then((function(){return u(e)}))}function h(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return c("check"),__webpack_require__.hmrM().then((function(r){if(!r)return c(p()?"ready":"idle"),null;c("prepare");var i=[];return t=[],n=[],Promise.all(Object.keys(__webpack_require__.hmrC).reduce((function(e,t){return __webpack_require__.hmrC[t](r.c,r.r,r.m,e,n,i),e}),[])).then((function(){return u((function(){return e?f(e):(c("ready"),i)}))}))}))}function d(e){return"ready"!==l?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):f(e)}function f(e){e=e||{},p();var t=n.map((function(t){return t(e)}));n=void 0;var i,o=t.map((function(e){return e.error})).filter(Boolean);if(o.length>0)return c("abort"),Promise.resolve().then((function(){throw o[0]}));c("dispose"),t.forEach((function(e){e.dispose&&e.dispose()})),c("apply");var a=function(e){i||(i=e)},s=[];return t.forEach((function(e){if(e.apply){var t=e.apply(a);if(t)for(var n=0;n<t.length;n++)s.push(t[n])}})),i?(c("fail"),Promise.resolve().then((function(){throw i}))):r?f(e).then((function(e){return s.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):(c("idle"),Promise.resolve(s))}function p(){if(r)return n||(n=[]),Object.keys(__webpack_require__.hmrI).forEach((function(e){r.forEach((function(t){__webpack_require__.hmrI[e](t,n)}))})),r=void 0,!0}__webpack_require__.hmrD=i,__webpack_require__.i.push((function(f){var p,m,g,y=f.module,v=function(n,r){var i=o[r];if(!i)return n;var s=function(t){if(i.hot.active){if(o[t]){var s=o[t].parents;-1===s.indexOf(r)&&s.push(r)}else a=[r],e=t;-1===i.children.indexOf(t)&&i.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+r),a=[];return n(t)},h=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&"e"!==d&&Object.defineProperty(s,d,h(d));return s.e=function(e){return function(e){switch(l){case"ready":return c("prepare"),t.push(e),u((function(){c("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(n.e(e))},s}(f.require,f.id);y.hot=(p=f.id,m=y,g={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==p,_requireSelf:function(){a=m.parents.slice(),e=p,__webpack_require__(p)},active:!0,accept:function(e,t){if(void 0===e)g._selfAccepted=!0;else if("function"==typeof e)g._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var n=0;n<e.length;n++)g._acceptedDependencies[e[n]]=t||function(){};else g._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)g._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)g._declinedDependencies[e[t]]=!0;else g._declinedDependencies[e]=!0},dispose:function(e){g._disposeHandlers.push(e)},addDisposeHandler:function(e){g._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=g._disposeHandlers.indexOf(e);t>=0&&g._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":n=[],Object.keys(__webpack_require__.hmrI).forEach((function(e){__webpack_require__.hmrI[e](p,n)})),c("ready");break;case"ready":Object.keys(__webpack_require__.hmrI).forEach((function(e){__webpack_require__.hmrI[e](p,n)}));break;case"prepare":case"check":case"dispose":case"apply":(r=r||[]).push(p)}},check:h,apply:d,status:function(e){if(!e)return l;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:i[p]},e=void 0,g),y.parents=a,y.children=[],a=[],f.require=v})),__webpack_require__.hmrC={},__webpack_require__.hmrI={}})(),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e,t,n,r,i={179:0},o={};function a(e){return new Promise(((t,n)=>{o[e]=t;var r=__webpack_require__.p+__webpack_require__.hu(e),i=new Error;__webpack_require__.l(r,(t=>{if(o[e]){o[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+r+": "+a+")",i.name="ChunkLoadError",i.type=r,i.request=a,n(i)}}))}))}function s(o){function a(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),o=i.id,a=i.chain,l=__webpack_require__.c[o];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(l.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var c=0;c<l.parents.length;c++){var u=l.parents[c],h=__webpack_require__.c[u];if(h){if(h.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([u]),moduleId:o,parentId:u};-1===t.indexOf(u)&&(h.hot._acceptedDependencies[o]?(n[u]||(n[u]=[]),s(n[u],[o])):(delete n[u],t.push(u),r.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}__webpack_require__.f&&delete __webpack_require__.f.jsonpHmr,e=void 0;var l={},c=[],u={},h=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var d in t)if(__webpack_require__.o(t,d)){var f,p=t[d],m=!1,g=!1,y=!1,v="";switch((f=p?a(d):{type:"disposed",moduleId:d}).chain&&(v="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":o.onDeclined&&o.onDeclined(f),o.ignoreDeclined||(m=new Error("Aborted because of self decline: "+f.moduleId+v));break;case"declined":o.onDeclined&&o.onDeclined(f),o.ignoreDeclined||(m=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+v));break;case"unaccepted":o.onUnaccepted&&o.onUnaccepted(f),o.ignoreUnaccepted||(m=new Error("Aborted because "+d+" is not accepted"+v));break;case"accepted":o.onAccepted&&o.onAccepted(f),g=!0;break;case"disposed":o.onDisposed&&o.onDisposed(f),y=!0;break;default:throw new Error("Unexception type "+f.type)}if(m)return{error:m};if(g)for(d in u[d]=p,s(c,f.outdatedModules),f.outdatedDependencies)__webpack_require__.o(f.outdatedDependencies,d)&&(l[d]||(l[d]=[]),s(l[d],f.outdatedDependencies[d]));y&&(s(c,[f.moduleId]),u[d]=h)}t=void 0;for(var _,b=[],x=0;x<c.length;x++){var w=c[x];__webpack_require__.c[w]&&__webpack_require__.c[w].hot._selfAccepted&&u[w]!==h&&!__webpack_require__.c[w].hot._selfInvalidated&&b.push({module:w,require:__webpack_require__.c[w].hot._requireSelf,errorHandler:__webpack_require__.c[w].hot._selfAccepted})}return{dispose:function(){var e;n.forEach((function(e){delete i[e]})),n=void 0;for(var t,r=c.slice();r.length>0;){var o=r.pop(),a=__webpack_require__.c[o];if(a){var s={},u=a.hot._disposeHandlers;for(x=0;x<u.length;x++)u[x].call(null,s);for(__webpack_require__.hmrD[o]=s,a.hot.active=!1,delete __webpack_require__.c[o],delete l[o],x=0;x<a.children.length;x++){var h=__webpack_require__.c[a.children[x]];h&&(e=h.parents.indexOf(o))>=0&&h.parents.splice(e,1)}}}for(var d in l)if(__webpack_require__.o(l,d)&&(a=__webpack_require__.c[d]))for(_=l[d],x=0;x<_.length;x++)t=_[x],(e=a.children.indexOf(t))>=0&&a.children.splice(e,1)},apply:function(e){for(var t in u)__webpack_require__.o(u,t)&&(__webpack_require__.m[t]=u[t]);for(var n=0;n<r.length;n++)r[n](__webpack_require__);for(var i in l)if(__webpack_require__.o(l,i)){var a=__webpack_require__.c[i];if(a){_=l[i];for(var s=[],h=[],d=0;d<_.length;d++){var f=_[d],p=a.hot._acceptedDependencies[f];if(p){if(-1!==s.indexOf(p))continue;s.push(p),h.push(f)}}for(var m=0;m<s.length;m++)try{s[m].call(null,_)}catch(t){o.onErrored&&o.onErrored({type:"accept-errored",moduleId:i,dependencyId:h[m],error:t}),o.ignoreErrored||e(t)}}}for(var g=0;g<b.length;g++){var y=b[g],v=y.module;try{y.require(v)}catch(t){if("function"==typeof y.errorHandler)try{y.errorHandler(t)}catch(n){o.onErrored&&o.onErrored({type:"self-accept-error-handler-errored",moduleId:v,error:n,originalError:t}),o.ignoreErrored||e(n),e(t)}else o.onErrored&&o.onErrored({type:"self-accept-errored",moduleId:v,error:t}),o.ignoreErrored||e(t)}}return c}}}self.webpackHotUpdatecovid_science=(e,n,i)=>{for(var a in n)__webpack_require__.o(n,a)&&(t[a]=n[a]);i&&r.push(i),o[e]&&(o[e](),o[e]=void 0)},__webpack_require__.hmrI.jsonp=function(e,i){t||(t={},r=[],n=[],i.push(s)),__webpack_require__.o(t,e)||(t[e]=__webpack_require__.m[e])},__webpack_require__.hmrC.jsonp=function(o,l,c,u,h,d){h.push(s),e={},n=l,t=c.reduce((function(e,t){return e[t]=!1,e}),{}),r=[],o.forEach((function(t){__webpack_require__.o(i,t)&&void 0!==i[t]&&(u.push(a(t)),e[t]=!0)})),__webpack_require__.f&&(__webpack_require__.f.jsonpHmr=function(t,n){e&&!__webpack_require__.o(e,t)&&__webpack_require__.o(i,t)&&void 0!==i[t]&&(n.push(a(t)),e[t]=!0)})},__webpack_require__.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(__webpack_require__.p+__webpack_require__.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),__webpack_require__(9506)})();
//# sourceMappingURL=bundle.js.map